var W2=Object.defineProperty;var G2=(t,a,e)=>a in t?W2(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var Ne=(t,a,e)=>G2(t,typeof a!="symbol"?a+"":a,e);function Z2(t,a){for(var e=0;e<a.length;e++){const n=a[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function iy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xp={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function $2(){if(_w)return tt;_w=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function E(R,P,G){this.props=R,this.context=P,this.refs=S,this.updater=G||_}E.prototype.isReactComponent={},E.prototype.setState=function(R,P){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,P,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function I(){}I.prototype=E.prototype;function M(R,P,G){this.props=R,this.context=P,this.refs=S,this.updater=G||_}var A=M.prototype=new I;A.constructor=M,C(A,E.prototype),A.isPureReactComponent=!0;var k=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function q(R,P,G,Q,re,Ee){return G=Ee.ref,{$$typeof:t,type:R,key:P,ref:G!==void 0?G:null,props:Ee}}function Y(R,P){return q(R.type,P,void 0,void 0,void 0,R.props)}function $(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function K(R){var P={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(G){return P[G]})}var pe=/\/+/g;function ie(R,P){return typeof R=="object"&&R!==null&&R.key!=null?K(""+R.key):P.toString(36)}function ne(){}function se(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ne,ne):(R.status="pending",R.then(function(P){R.status==="pending"&&(R.status="fulfilled",R.value=P)},function(P){R.status==="pending"&&(R.status="rejected",R.reason=P)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function z(R,P,G,Q,re){var Ee=typeof R;(Ee==="undefined"||Ee==="boolean")&&(R=null);var ye=!1;if(R===null)ye=!0;else switch(Ee){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(R.$$typeof){case t:case a:ye=!0;break;case p:return ye=R._init,z(ye(R._payload),P,G,Q,re)}}if(ye)return re=re(R),ye=Q===""?"."+ie(R,0):Q,k(re)?(G="",ye!=null&&(G=ye.replace(pe,"$&/")+"/"),z(re,P,G,"",function(Ve){return Ve})):re!=null&&($(re)&&(re=Y(re,G+(re.key==null||R&&R.key===re.key?"":(""+re.key).replace(pe,"$&/")+"/")+ye)),P.push(re)),1;ye=0;var qe=Q===""?".":Q+":";if(k(R))for(var ve=0;ve<R.length;ve++)Q=R[ve],Ee=qe+ie(Q,ve),ye+=z(Q,P,G,Ee,re);else if(ve=b(R),typeof ve=="function")for(R=ve.call(R),ve=0;!(Q=R.next()).done;)Q=Q.value,Ee=qe+ie(Q,ve++),ye+=z(Q,P,G,Ee,re);else if(Ee==="object"){if(typeof R.then=="function")return z(se(R),P,G,Q,re);throw P=String(R),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ye}function D(R,P,G){if(R==null)return R;var Q=[],re=0;return z(R,Q,"","",function(Ee){return P.call(G,Ee,re++)}),Q}function H(R){if(R._status===-1){var P=R._result;P=P(),P.then(function(G){(R._status===0||R._status===-1)&&(R._status=1,R._result=G)},function(G){(R._status===0||R._status===-1)&&(R._status=2,R._result=G)}),R._status===-1&&(R._status=0,R._result=P)}if(R._status===1)return R._result.default;throw R._result}var W=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function F(){}return tt.Children={map:D,forEach:function(R,P,G){D(R,function(){P.apply(this,arguments)},G)},count:function(R){var P=0;return D(R,function(){P++}),P},toArray:function(R){return D(R,function(P){return P})||[]},only:function(R){if(!$(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},tt.Component=E,tt.Fragment=e,tt.Profiler=s,tt.PureComponent=M,tt.StrictMode=n,tt.Suspense=h,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,tt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return O.H.useMemoCache(R)}},tt.cache=function(R){return function(){return R.apply(null,arguments)}},tt.cloneElement=function(R,P,G){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Q=C({},R.props),re=R.key,Ee=void 0;if(P!=null)for(ye in P.ref!==void 0&&(Ee=void 0),P.key!==void 0&&(re=""+P.key),P)!U.call(P,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&P.ref===void 0||(Q[ye]=P[ye]);var ye=arguments.length-2;if(ye===1)Q.children=G;else if(1<ye){for(var qe=Array(ye),ve=0;ve<ye;ve++)qe[ve]=arguments[ve+2];Q.children=qe}return q(R.type,re,void 0,void 0,Ee,Q)},tt.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},tt.createElement=function(R,P,G){var Q,re={},Ee=null;if(P!=null)for(Q in P.key!==void 0&&(Ee=""+P.key),P)U.call(P,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(re[Q]=P[Q]);var ye=arguments.length-2;if(ye===1)re.children=G;else if(1<ye){for(var qe=Array(ye),ve=0;ve<ye;ve++)qe[ve]=arguments[ve+2];re.children=qe}if(R&&R.defaultProps)for(Q in ye=R.defaultProps,ye)re[Q]===void 0&&(re[Q]=ye[Q]);return q(R,Ee,void 0,void 0,null,re)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(R){return{$$typeof:u,render:R}},tt.isValidElement=$,tt.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:H}},tt.memo=function(R,P){return{$$typeof:m,type:R,compare:P===void 0?null:P}},tt.startTransition=function(R){var P=O.T,G={};O.T=G;try{var Q=R(),re=O.S;re!==null&&re(G,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(F,W)}catch(Ee){W(Ee)}finally{O.T=P}},tt.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},tt.use=function(R){return O.H.use(R)},tt.useActionState=function(R,P,G){return O.H.useActionState(R,P,G)},tt.useCallback=function(R,P){return O.H.useCallback(R,P)},tt.useContext=function(R){return O.H.useContext(R)},tt.useDebugValue=function(){},tt.useDeferredValue=function(R,P){return O.H.useDeferredValue(R,P)},tt.useEffect=function(R,P,G){var Q=O.H;if(typeof G=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(R,P)},tt.useId=function(){return O.H.useId()},tt.useImperativeHandle=function(R,P,G){return O.H.useImperativeHandle(R,P,G)},tt.useInsertionEffect=function(R,P){return O.H.useInsertionEffect(R,P)},tt.useLayoutEffect=function(R,P){return O.H.useLayoutEffect(R,P)},tt.useMemo=function(R,P){return O.H.useMemo(R,P)},tt.useOptimistic=function(R,P){return O.H.useOptimistic(R,P)},tt.useReducer=function(R,P,G){return O.H.useReducer(R,P,G)},tt.useRef=function(R){return O.H.useRef(R)},tt.useState=function(R){return O.H.useState(R)},tt.useSyncExternalStore=function(R,P,G){return O.H.useSyncExternalStore(R,P,G)},tt.useTransition=function(){return O.H.useTransition()},tt.version="19.1.0",tt}var Sw;function oy(){return Sw||(Sw=1,xp.exports=$2()),xp.exports}var w=oy();const f=iy(w),GC=Z2({__proto__:null,default:f},[w]);var Ip={exports:{}},dc={},Dp={exports:{}},Mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function q2(){return Ew||(Ew=1,function(t){function a(D,H){var W=D.length;D.push(H);e:for(;0<W;){var F=W-1>>>1,R=D[F];if(0<s(R,H))D[F]=H,D[W]=R,W=F;else break e}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var H=D[0],W=D.pop();if(W!==H){D[0]=W;e:for(var F=0,R=D.length,P=R>>>1;F<P;){var G=2*(F+1)-1,Q=D[G],re=G+1,Ee=D[re];if(0>s(Q,W))re<R&&0>s(Ee,Q)?(D[F]=Ee,D[re]=W,F=re):(D[F]=Q,D[G]=W,F=G);else if(re<R&&0>s(Ee,W))D[F]=Ee,D[re]=W,F=re;else break e}}return H}function s(D,H){var W=D.sortIndex-H.sortIndex;return W!==0?W:D.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],m=[],p=1,v=null,b=3,_=!1,C=!1,S=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(D){for(var H=e(m);H!==null;){if(H.callback===null)n(m);else if(H.startTime<=D)n(m),H.sortIndex=H.expirationTime,a(h,H);else break;H=e(m)}}function O(D){if(S=!1,k(D),!C)if(e(h)!==null)C=!0,U||(U=!0,ie());else{var H=e(m);H!==null&&z(O,H.startTime-D)}}var U=!1,q=-1,Y=5,$=-1;function K(){return E?!0:!(t.unstable_now()-$<Y)}function pe(){if(E=!1,U){var D=t.unstable_now();$=D;var H=!0;try{e:{C=!1,S&&(S=!1,M(q),q=-1),_=!0;var W=b;try{t:{for(k(D),v=e(h);v!==null&&!(v.expirationTime>D&&K());){var F=v.callback;if(typeof F=="function"){v.callback=null,b=v.priorityLevel;var R=F(v.expirationTime<=D);if(D=t.unstable_now(),typeof R=="function"){v.callback=R,k(D),H=!0;break t}v===e(h)&&n(h),k(D)}else n(h);v=e(h)}if(v!==null)H=!0;else{var P=e(m);P!==null&&z(O,P.startTime-D),H=!1}}break e}finally{v=null,b=W,_=!1}H=void 0}}finally{H?ie():U=!1}}}var ie;if(typeof A=="function")ie=function(){A(pe)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,se=ne.port2;ne.port1.onmessage=pe,ie=function(){se.postMessage(null)}}else ie=function(){I(pe,0)};function z(D,H){q=I(function(){D(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(D){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var W=b;b=H;try{return D()}finally{b=W}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=b;b=D;try{return H()}finally{b=W}},t.unstable_scheduleCallback=function(D,H,W){var F=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?F+W:F):W=F,D){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=W+R,D={id:p++,callback:H,priorityLevel:D,startTime:W,expirationTime:R,sortIndex:-1},W>F?(D.sortIndex=W,a(m,D),e(h)===null&&D===e(m)&&(S?(M(q),q=-1):S=!0,z(O,W-F))):(D.sortIndex=R,a(h,D),C||_||(C=!0,U||(U=!0,ie()))),D},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(D){var H=b;return function(){var W=b;b=H;try{return D.apply(this,arguments)}finally{b=W}}}}(Mp)),Mp}var xw;function Q2(){return xw||(xw=1,Dp.exports=q2()),Dp.exports}var Ap={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iw;function V2(){if(Iw)return jn;Iw=1;var t=oy();function a(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(a(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,m,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:m,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return o(h,m,null,p)},jn.flushSync=function(h){var m=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=m,n.p=p,n.d.f()}},jn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},jn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},jn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,v=u(p,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:_}):p==="script"&&n.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=u(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},jn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,v=u(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jn.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=u(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},jn.requestFormReset=function(h){n.d.r(h)},jn.unstable_batchedUpdates=function(h,m){return h(m)},jn.useFormState=function(h,m,p){return l.H.useFormState(h,m,p)},jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},jn.version="19.1.0",jn}var Dw;function ZC(){if(Dw)return Ap.exports;Dw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ap.exports=V2(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function X2(){if(Mw)return dc;Mw=1;var t=Q2(),a=oy(),e=ZC();function n(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function l(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function u(r){if(o(r)!==r)throw Error(n(188))}function h(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(n(188));return i!==r?null:r}for(var c=r,d=i;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return u(g),r;if(y===d)return u(g),i;y=y.sibling}throw Error(n(188))}if(c.return!==d.return)c=g,d=y;else{for(var x=!1,T=g.child;T;){if(T===c){x=!0,c=g,d=y;break}if(T===d){x=!0,d=g,c=y;break}T=T.sibling}if(!x){for(T=y.child;T;){if(T===c){x=!0,c=y,d=g;break}if(T===d){x=!0,d=y,c=g;break}T=T.sibling}if(!x)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:i}function m(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=m(r),i!==null)return i;r=r.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function ie(r){return r===null||typeof r!="object"?null:(r=pe&&r[pe]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Symbol.for("react.client.reference");function se(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ne?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case U:return"SuspenseList";case $:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case A:return(r.displayName||"Context")+".Provider";case M:return(r._context.displayName||"Context")+".Consumer";case k:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case q:return i=r.displayName||null,i!==null?i:se(r.type)||"Memo";case Y:i=r._payload,r=r._init;try{return se(r(i))}catch{}}return null}var z=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},F=[],R=-1;function P(r){return{current:r}}function G(r){0>R||(r.current=F[R],F[R]=null,R--)}function Q(r,i){R++,F[R]=r.current,r.current=i}var re=P(null),Ee=P(null),ye=P(null),qe=P(null);function ve(r,i){switch(Q(ye,i),Q(Ee,r),Q(re,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Vb(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Vb(i),r=Xb(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}G(re),Q(re,r)}function Ve(){G(re),G(Ee),G(ye)}function ot(r){r.memoizedState!==null&&Q(qe,r);var i=re.current,c=Xb(i,r.type);i!==c&&(Q(Ee,r),Q(re,c))}function St(r){Ee.current===r&&(G(re),G(Ee)),qe.current===r&&(G(qe),ic._currentValue=W)}var Ct=Object.prototype.hasOwnProperty,vt=t.unstable_scheduleCallback,En=t.unstable_cancelCallback,Nn=t.unstable_shouldYield,La=t.unstable_requestPaint,on=t.unstable_now,Qn=t.unstable_getCurrentPriorityLevel,Oa=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,ia=t.unstable_LowPriority,pn=t.unstable_IdlePriority,io=t.log,Ds=t.unstable_setDisableYieldValue,Rn=null,en=null;function Ft(r){if(typeof io=="function"&&Ds(r),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(Rn,r)}catch{}}var gn=Math.clz32?Math.clz32:Ms,hu=Math.log,oo=Math.LN2;function Ms(r){return r>>>=0,r===0?32:31-(hu(r)/oo|0)|0}var Xn=256,Kn=4194304;function Pa(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ut(r,i,c){var d=r.pendingLanes;if(d===0)return 0;var g=0,y=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var T=d&134217727;return T!==0?(d=T&~y,d!==0?g=Pa(d):(x&=T,x!==0?g=Pa(x):c||(c=T&~r,c!==0&&(g=Pa(c))))):(T=d&~y,T!==0?g=Pa(T):x!==0?g=Pa(x):c||(c=d&~r,c!==0&&(g=Pa(c)))),g===0?0:i!==0&&i!==g&&(i&y)===0&&(y=g&-g,c=i&-i,y>=c||y===32&&(c&4194048)!==0)?i:g}function xn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function gr(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var r=Xn;return Xn<<=1,(Xn&4194048)===0&&(Xn=256),r}function pa(){var r=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),r}function lt(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function kn(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ga(r,i,c,d,g,y){var x=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var T=r.entanglements,B=r.expirationTimes,J=r.hiddenUpdates;for(c=x&~c;0<c;){var ce=31-gn(c),me=1<<ce;T[ce]=0,B[ce]=-1;var ee=J[ce];if(ee!==null)for(J[ce]=null,ce=0;ce<ee.length;ce++){var te=ee[ce];te!==null&&(te.lane&=-536870913)}c&=~me}d!==0&&Ba(r,d,0),y!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=y&~(x&~i))}function Ba(r,i,c){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-gn(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194090}function Jn(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var d=31-gn(c),g=1<<d;g&i|r[d]&i&&(r[d]|=i),c&=~g}}function rr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ua(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function pi(){var r=H.p;return r!==0?r:(r=window.event,r===void 0?32:gw(r.type))}function wl(r,i){var c=H.p;try{return H.p=r,i()}finally{H.p=c}}var ea=Math.random().toString(36).slice(2),ln="__reactFiber$"+ea,cn="__reactProps$"+ea,ta="__reactContainer$"+ea,Gr="__reactEvents$"+ea,vr="__reactListeners$"+ea,ya="__reactHandles$"+ea,As="__reactResources$"+ea,Zr="__reactMarker$"+ea;function gi(r){delete r[ln],delete r[cn],delete r[Gr],delete r[vr],delete r[ya]}function br(r){var i=r[ln];if(i)return i;for(var c=r.parentNode;c;){if(i=c[ta]||c[ln]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=tw(r);r!==null;){if(c=r[ln])return c;r=tw(r)}return i}r=c,c=r.parentNode}return null}function $r(r){if(r=r[ln]||r[ta]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function qr(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(n(33))}function va(r){var i=r[As];return i||(i=r[As]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(r){r[Zr]=!0}var yi=new Set,vi={};function Yn(r,i){oa(r,i),oa(r+"Capture",i)}function oa(r,i){for(vi[r]=i,r=0;r<i.length;r++)yi.add(i[r])}var Qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wr={},Vr={};function Cr(r){return Ct.call(Vr,r)?!0:Ct.call(wr,r)?!1:Qr.test(r)?Vr[r]=!0:(wr[r]=!0,!1)}function Ts(r,i,c){if(Cr(i))if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+c)}}function _r(r,i,c){if(c===null)r.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+c)}}function ba(r,i,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(i,c,""+d)}}var bi,sr;function za(r){if(bi===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);bi=i&&i[1]||"",sr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bi+r+sr}var Ns=!1;function wa(r,i){if(!r||Ns)return"";Ns=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(te){var ee=te}Reflect.construct(r,[],me)}else{try{me.call()}catch(te){ee=te}r.call(me.prototype)}}else{try{throw Error()}catch(te){ee=te}(me=r())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),x=y[0],T=y[1];if(x&&T){var B=x.split(`
`),J=T.split(`
`);for(g=d=0;d<B.length&&!B[d].includes("DetermineComponentFrameRoot");)d++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(d===B.length||g===J.length)for(d=B.length-1,g=J.length-1;1<=d&&0<=g&&B[d]!==J[g];)g--;for(;1<=d&&0<=g;d--,g--)if(B[d]!==J[g]){if(d!==1||g!==1)do if(d--,g--,0>g||B[d]!==J[g]){var ce=`
`+B[d].replace(" at new "," at ");return r.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",r.displayName)),ce}while(1<=d&&0<=g);break}}}finally{Ns=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?za(c):""}function Cl(r){switch(r.tag){case 26:case 27:case 5:return za(r.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 15:return wa(r.type,!1);case 11:return wa(r.type.render,!1);case 1:return wa(r.type,!0);case 31:return za("Activity");default:return""}}function wi(r){try{var i="";do i+=Cl(r),r=r.return;while(r);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function In(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lo(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Z(r){var i=lo(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),d=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(x){d=""+x,y.call(this,x)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function N(r){r._valueTracker||(r._valueTracker=Z(r))}function le(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return r&&(d=lo(r)?r.checked?"true":"false":r.value),r=d,r!==c?(i.setValue(r),!0):!1}function ue(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var be=/[\n"\\]/g;function De(r){return r.replace(be,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ie(r,i,c,d,g,y,x,T){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),i!=null?x==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+In(i)):r.value!==""+In(i)&&(r.value=""+In(i)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),i!=null?Qe(r,x,In(i)):c!=null?Qe(r,x,In(c)):d!=null&&r.removeAttribute("value"),g==null&&y!=null&&(r.defaultChecked=!!y),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+In(T):r.removeAttribute("name")}function Re(r,i,c,d,g,y,x,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;c=c!=null?""+In(c):"",i=i!=null?""+In(i):c,T||i===r.value||(r.value=i),r.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=T?r.checked:!!d,r.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function Qe(r,i,c){i==="number"&&ue(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Be(r,i,c,d){if(r=r.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<r.length;c++)g=i.hasOwnProperty("$"+r[c].value),r[c].selected!==g&&(r[c].selected=g),g&&d&&(r[c].defaultSelected=!0)}else{for(c=""+In(c),i=null,g=0;g<r.length;g++){if(r[g].value===c){r[g].selected=!0,d&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function Xe(r,i,c){if(i!=null&&(i=""+In(i),i!==r.value&&(r.value=i),c==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=c!=null?""+In(c):""}function Oe(r,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(n(92));if(z(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=In(i),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function Me(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var oe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Se(r,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,c):typeof c!="number"||c===0||oe.has(i)?i==="float"?r.cssFloat=c:r[i]=(""+c).trim():r[i]=c+"px"}function Te(r,i,c){if(i!=null&&typeof i!="object")throw Error(n(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&c[g]!==d&&Se(r,g,d)}else for(var y in i)i.hasOwnProperty(y)&&Se(r,y,i[y])}function Pe(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(r){return Et.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Sr=null;function gt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _e=null,L=null;function ge(r){var i=$r(r);if(i&&(r=i.stateNode)){var c=r[cn]||null;e:switch(r=i.stateNode,i.type){case"input":if(Ie(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+De(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==r&&d.form===r.form){var g=d[cn]||null;if(!g)throw Error(n(90));Ie(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===r.form&&le(d)}break e;case"textarea":Xe(r,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Be(r,!!c.multiple,i,!1)}}}var we=!1;function He(r,i,c){if(we)return r(i,c);we=!0;try{var d=r(i);return d}finally{if(we=!1,(_e!==null||L!==null)&&(qu(),_e&&(i=_e,r=L,L=_e=null,ge(i),r)))for(i=0;i<r.length;i++)ge(r[i])}}function Ue(r,i){var c=r.stateNode;if(c===null)return null;var d=c[cn]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var xe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ye=!1;if(xe)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ye=!1}var rt=null,Ht=null,wn=null;function Ca(){if(wn)return wn;var r,i=Ht,c=i.length,d,g="value"in rt?rt.value:rt.textContent,y=g.length;for(r=0;r<c&&i[r]===g[r];r++);var x=c-r;for(d=1;d<=x&&i[c-d]===g[y-d];d++);return wn=g.slice(r,1<d?1-d:void 0)}function _a(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ir(){return!0}function Xr(){return!1}function Cn(r){function i(c,d,g,y,x){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(c=r[T],this[T]=c?c(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ir:Xr,this.isPropagationStopped=Xr,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),i}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},co=Cn(Kr),Ci=p({},Kr,{view:0,detail:0}),Ah=Cn(Ci),Th,Nh,_l,mu=p({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==_l&&(_l&&r.type==="mousemove"?(Th=r.screenX-_l.screenX,Nh=r.screenY-_l.screenY):Nh=Th=0,_l=r),Th)},movementY:function(r){return"movementY"in r?r.movementY:Nh}}),n0=Cn(mu),GE=p({},mu,{dataTransfer:0}),ZE=Cn(GE),$E=p({},Ci,{relatedTarget:0}),Rh=Cn($E),qE=p({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),QE=Cn(qE),VE=p({},Kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),XE=Cn(VE),KE=p({},Kr,{data:0}),a0=Cn(KE),JE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ex={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nx(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=tx[r])?!!i[r]:!1}function kh(){return nx}var ax=p({},Ci,{key:function(r){if(r.key){var i=JE[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=_a(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ex[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(r){return r.type==="keypress"?_a(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?_a(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),rx=Cn(ax),sx=p({},mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r0=Cn(sx),ix=p({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),ox=Cn(ix),lx=p({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cx=Cn(lx),ux=p({},mu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),dx=Cn(ux),fx=p({},Kr,{newState:0,oldState:0}),hx=Cn(fx),mx=[9,13,27,32],Lh=xe&&"CompositionEvent"in window,Sl=null;xe&&"documentMode"in document&&(Sl=document.documentMode);var px=xe&&"TextEvent"in window&&!Sl,s0=xe&&(!Lh||Sl&&8<Sl&&11>=Sl),i0=" ",o0=!1;function l0(r,i){switch(r){case"keyup":return mx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var uo=!1;function gx(r,i){switch(r){case"compositionend":return c0(i);case"keypress":return i.which!==32?null:(o0=!0,i0);case"textInput":return r=i.data,r===i0&&o0?null:r;default:return null}}function yx(r,i){if(uo)return r==="compositionend"||!Lh&&l0(r,i)?(r=Ca(),wn=Ht=rt=null,uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return s0&&i.locale!=="ko"?null:i.data;default:return null}}var vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!vx[r.type]:i==="textarea"}function d0(r,i,c,d){_e?L?L.push(d):L=[d]:_e=d,i=ed(i,"onChange"),0<i.length&&(c=new co("onChange","change",null,c,d),r.push({event:c,listeners:i}))}var El=null,xl=null;function bx(r){Gb(r,0)}function pu(r){var i=qr(r);if(le(i))return r}function f0(r,i){if(r==="change")return i}var h0=!1;if(xe){var Oh;if(xe){var Ph="oninput"in document;if(!Ph){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),Ph=typeof m0.oninput=="function"}Oh=Ph}else Oh=!1;h0=Oh&&(!document.documentMode||9<document.documentMode)}function p0(){El&&(El.detachEvent("onpropertychange",g0),xl=El=null)}function g0(r){if(r.propertyName==="value"&&pu(xl)){var i=[];d0(i,xl,r,gt(r)),He(bx,i)}}function wx(r,i,c){r==="focusin"?(p0(),El=i,xl=c,El.attachEvent("onpropertychange",g0)):r==="focusout"&&p0()}function Cx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pu(xl)}function _x(r,i){if(r==="click")return pu(i)}function Sx(r,i){if(r==="input"||r==="change")return pu(i)}function Ex(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Sa=typeof Object.is=="function"?Object.is:Ex;function Il(r,i){if(Sa(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Ct.call(i,g)||!Sa(r[g],i[g]))return!1}return!0}function y0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function v0(r,i){var c=y0(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=i&&d>=i)return{node:c,offset:i-r};r=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=y0(c)}}function b0(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?b0(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function w0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=ue(r.document);i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=ue(r.document)}return i}function Bh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var xx=xe&&"documentMode"in document&&11>=document.documentMode,fo=null,Uh=null,Dl=null,zh=!1;function C0(r,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zh||fo==null||fo!==ue(d)||(d=fo,"selectionStart"in d&&Bh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Dl&&Il(Dl,d)||(Dl=d,d=ed(Uh,"onSelect"),0<d.length&&(i=new co("onSelect","select",null,i,c),r.push({event:i,listeners:d}),i.target=fo)))}function _i(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var ho={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},Hh={},_0={};xe&&(_0=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Si(r){if(Hh[r])return Hh[r];if(!ho[r])return r;var i=ho[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in _0)return Hh[r]=i[c];return r}var S0=Si("animationend"),E0=Si("animationiteration"),x0=Si("animationstart"),Ix=Si("transitionrun"),Dx=Si("transitionstart"),Mx=Si("transitioncancel"),I0=Si("transitionend"),D0=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function or(r,i){D0.set(r,i),Yn(i,[r])}var M0=new WeakMap;function Ha(r,i){if(typeof r=="object"&&r!==null){var c=M0.get(r);return c!==void 0?c:(i={value:r,source:i,stack:wi(i)},M0.set(r,i),i)}return{value:r,source:i,stack:wi(i)}}var Ya=[],mo=0,Fh=0;function gu(){for(var r=mo,i=Fh=mo=0;i<r;){var c=Ya[i];Ya[i++]=null;var d=Ya[i];Ya[i++]=null;var g=Ya[i];Ya[i++]=null;var y=Ya[i];if(Ya[i++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}y!==0&&A0(c,g,y)}}function yu(r,i,c,d){Ya[mo++]=r,Ya[mo++]=i,Ya[mo++]=c,Ya[mo++]=d,Fh|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function jh(r,i,c,d){return yu(r,i,c,d),vu(r)}function po(r,i){return yu(r,null,null,i),vu(r)}function A0(r,i,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=r.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(g=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,g&&i!==null&&(g=31-gn(c),r=y.hiddenUpdates,d=r[g],d===null?r[g]=[i]:d.push(i),i.lane=c|536870912),y):null}function vu(r){if(50<Kl)throw Kl=0,Qm=null,Error(n(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var go={};function Ax(r,i,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(r,i,c,d){return new Ax(r,i,c,d)}function Wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jr(r,i){var c=r.alternate;return c===null?(c=Ea(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function T0(r,i){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,i=c.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function bu(r,i,c,d,g,y){var x=0;if(d=r,typeof r=="function")Wh(r)&&(x=1);else if(typeof r=="string")x=N2(r,c,re.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case $:return r=Ea(31,c,i,g),r.elementType=$,r.lanes=y,r;case C:return Ei(c.children,g,y,i);case S:x=8,g|=24;break;case E:return r=Ea(12,c,i,g|2),r.elementType=E,r.lanes=y,r;case O:return r=Ea(13,c,i,g),r.elementType=O,r.lanes=y,r;case U:return r=Ea(19,c,i,g),r.elementType=U,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:case A:x=10;break e;case M:x=9;break e;case k:x=11;break e;case q:x=14;break e;case Y:x=16,d=null;break e}x=29,c=Error(n(130,r===null?"null":typeof r,"")),d=null}return i=Ea(x,c,i,g),i.elementType=r,i.type=d,i.lanes=y,i}function Ei(r,i,c,d){return r=Ea(7,r,d,i),r.lanes=c,r}function Gh(r,i,c){return r=Ea(6,r,null,i),r.lanes=c,r}function Zh(r,i,c){return i=Ea(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var yo=[],vo=0,wu=null,Cu=0,Fa=[],ja=0,xi=null,es=1,ts="";function Ii(r,i){yo[vo++]=Cu,yo[vo++]=wu,wu=r,Cu=i}function N0(r,i,c){Fa[ja++]=es,Fa[ja++]=ts,Fa[ja++]=xi,xi=r;var d=es;r=ts;var g=32-gn(d)-1;d&=~(1<<g),c+=1;var y=32-gn(i)+g;if(30<y){var x=g-g%5;y=(d&(1<<x)-1).toString(32),d>>=x,g-=x,es=1<<32-gn(i)+g|c<<g|d,ts=y+r}else es=1<<y|c<<g|d,ts=r}function $h(r){r.return!==null&&(Ii(r,1),N0(r,1,0))}function qh(r){for(;r===wu;)wu=yo[--vo],yo[vo]=null,Cu=yo[--vo],yo[vo]=null;for(;r===xi;)xi=Fa[--ja],Fa[ja]=null,ts=Fa[--ja],Fa[ja]=null,es=Fa[--ja],Fa[ja]=null}var na=null,tn=null,xt=!1,Di=null,Er=!1,Qh=Error(n(519));function Mi(r){var i=Error(n(418,""));throw Tl(Ha(i,r)),Qh}function R0(r){var i=r.stateNode,c=r.type,d=r.memoizedProps;switch(i[ln]=r,i[cn]=d,c){case"dialog":ft("cancel",i),ft("close",i);break;case"iframe":case"object":case"embed":ft("load",i);break;case"video":case"audio":for(c=0;c<ec.length;c++)ft(ec[c],i);break;case"source":ft("error",i);break;case"img":case"image":case"link":ft("error",i),ft("load",i);break;case"details":ft("toggle",i);break;case"input":ft("invalid",i),Re(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),N(i);break;case"select":ft("invalid",i);break;case"textarea":ft("invalid",i),Oe(i,d.value,d.defaultValue,d.children),N(i)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||Qb(i.textContent,c)?(d.popover!=null&&(ft("beforetoggle",i),ft("toggle",i)),d.onScroll!=null&&ft("scroll",i),d.onScrollEnd!=null&&ft("scrollend",i),d.onClick!=null&&(i.onclick=td),i=!0):i=!1,i||Mi(r)}function k0(r){for(na=r.return;na;)switch(na.tag){case 5:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:na=na.return}}function Ml(r){if(r!==na)return!1;if(!xt)return k0(r),xt=!0,!1;var i=r.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||dp(r.type,r.memoizedProps)),c=!c),c&&tn&&Mi(r),k0(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(i===0){tn=cr(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;r=r.nextSibling}tn=null}}else i===27?(i=tn,$s(r.type)?(r=pp,pp=null,tn=r):tn=i):tn=na?cr(r.stateNode.nextSibling):null;return!0}function Al(){tn=na=null,xt=!1}function L0(){var r=Di;return r!==null&&(da===null?da=r:da.push.apply(da,r),Di=null),r}function Tl(r){Di===null?Di=[r]:Di.push(r)}var Vh=P(null),Ai=null,ns=null;function Rs(r,i,c){Q(Vh,i._currentValue),i._currentValue=c}function as(r){r._currentValue=Vh.current,G(Vh)}function Xh(r,i,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===c)break;r=r.return}}function Kh(r,i,c,d){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=g;for(var B=0;B<i.length;B++)if(T.context===i[B]){y.lanes|=c,T=y.alternate,T!==null&&(T.lanes|=c),Xh(y.return,c,r),d||(x=null);break e}y=T.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(n(341));x.lanes|=c,y=x.alternate,y!==null&&(y.lanes|=c),Xh(x,c,r),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Nl(r,i,c,d){r=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(n(387));if(x=x.memoizedProps,x!==null){var T=g.type;Sa(g.pendingProps.value,x.value)||(r!==null?r.push(T):r=[T])}}else if(g===qe.current){if(x=g.alternate,x===null)throw Error(n(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(ic):r=[ic])}g=g.return}r!==null&&Kh(i,r,c,d),i.flags|=262144}function _u(r){for(r=r.firstContext;r!==null;){if(!Sa(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ti(r){Ai=r,ns=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fn(r){return O0(Ai,r)}function Su(r,i){return Ai===null&&Ti(r),O0(r,i)}function O0(r,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},ns===null){if(r===null)throw Error(n(308));ns=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ns=ns.next=i;return c}var Tx=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(c){return c()})}},Nx=t.unstable_scheduleCallback,Rx=t.unstable_NormalPriority,_n={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new Tx,data:new Map,refCount:0}}function Rl(r){r.refCount--,r.refCount===0&&Nx(Rx,function(){r.controller.abort()})}var kl=null,em=0,bo=0,wo=null;function kx(r,i){if(kl===null){var c=kl=[];em=0,bo=np(),wo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return em++,i.then(P0,P0),i}function P0(){if(--em===0&&kl!==null){wo!==null&&(wo.status="fulfilled");var r=kl;kl=null,bo=0,wo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function Lx(r,i){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var B0=D.S;D.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kx(r,i),B0!==null&&B0(r,i)};var Ni=P(null);function tm(){var r=Ni.current;return r!==null?r:Yt.pooledCache}function Eu(r,i){i===null?Q(Ni,Ni.current):Q(Ni,i.pool)}function U0(){var r=tm();return r===null?null:{parent:_n._currentValue,pool:r}}var Ll=Error(n(460)),z0=Error(n(474)),xu=Error(n(542)),nm={then:function(){}};function H0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Iu(){}function Y0(r,i,c){switch(c=r[c],c===void 0?r.push(i):c!==i&&(i.then(Iu,Iu),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,j0(r),r;default:if(typeof i.status=="string")i.then(Iu,Iu);else{if(r=Yt,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,j0(r),r}throw Ol=i,Ll}}var Ol=null;function F0(){if(Ol===null)throw Error(n(459));var r=Ol;return Ol=null,r}function j0(r){if(r===Ll||r===xu)throw Error(n(483))}var ks=!1;function am(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ls(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Os(r,i,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(At&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=vu(r),A0(r,null,c),i}return yu(r,d,i,c),vu(r)}function Pl(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Jn(r,c)}}function sm(r,i){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,c=c.next}while(c!==null);y===null?g=y=i:y=y.next=i}else g=y=i;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}var im=!1;function Bl(){if(im){var r=wo;if(r!==null)throw r}}function Ul(r,i,c,d){im=!1;var g=r.updateQueue;ks=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var B=T,J=B.next;B.next=null,x===null?y=J:x.next=J,x=B;var ce=r.alternate;ce!==null&&(ce=ce.updateQueue,T=ce.lastBaseUpdate,T!==x&&(T===null?ce.firstBaseUpdate=J:T.next=J,ce.lastBaseUpdate=B))}if(y!==null){var me=g.baseState;x=0,ce=J=B=null,T=y;do{var ee=T.lane&-536870913,te=ee!==T.lane;if(te?(yt&ee)===ee:(d&ee)===ee){ee!==0&&ee===bo&&(im=!0),ce!==null&&(ce=ce.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ze=r,Fe=T;ee=i;var Pt=c;switch(Fe.tag){case 1:if(Ze=Fe.payload,typeof Ze=="function"){me=Ze.call(Pt,me,ee);break e}me=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=Fe.payload,ee=typeof Ze=="function"?Ze.call(Pt,me,ee):Ze,ee==null)break e;me=p({},me,ee);break e;case 2:ks=!0}}ee=T.callback,ee!==null&&(r.flags|=64,te&&(r.flags|=8192),te=g.callbacks,te===null?g.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ce===null?(J=ce=te,B=me):ce=ce.next=te,x|=ee;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;te=T,T=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);ce===null&&(B=me),g.baseState=B,g.firstBaseUpdate=J,g.lastBaseUpdate=ce,y===null&&(g.shared.lanes=0),js|=x,r.lanes=x,r.memoizedState=me}}function W0(r,i){if(typeof r!="function")throw Error(n(191,r));r.call(i)}function G0(r,i){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)W0(c[r],i)}var Co=P(null),Du=P(0);function Z0(r,i){r=us,Q(Du,r),Q(Co,i),us=r|i.baseLanes}function om(){Q(Du,us),Q(Co,Co.current)}function lm(){us=Du.current,G(Co),G(Du)}var Ps=0,st=null,Lt=null,yn=null,Mu=!1,_o=!1,Ri=!1,Au=0,zl=0,So=null,Ox=0;function un(){throw Error(n(321))}function cm(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Sa(r[c],i[c]))return!1;return!0}function um(r,i,c,d,g,y){return Ps=y,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,D.H=r===null||r.memoizedState===null?Av:Tv,Ri=!1,y=c(d,g),Ri=!1,_o&&(y=q0(i,c,d,g)),$0(r),y}function $0(r){D.H=Ou;var i=Lt!==null&&Lt.next!==null;if(Ps=0,yn=Lt=st=null,Mu=!1,zl=0,So=null,i)throw Error(n(300));r===null||Dn||(r=r.dependencies,r!==null&&_u(r)&&(Dn=!0))}function q0(r,i,c,d){st=r;var g=0;do{if(_o&&(So=null),zl=0,_o=!1,25<=g)throw Error(n(301));if(g+=1,yn=Lt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}D.H=Fx,y=i(c,d)}while(_o);return y}function Px(){var r=D.H,i=r.useState()[0];return i=typeof i.then=="function"?Hl(i):i,r=r.useState()[0],(Lt!==null?Lt.memoizedState:null)!==r&&(st.flags|=1024),i}function dm(){var r=Au!==0;return Au=0,r}function fm(r,i,c){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~c}function hm(r){if(Mu){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mu=!1}Ps=0,yn=Lt=st=null,_o=!1,zl=Au=0,So=null}function ca(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?st.memoizedState=yn=r:yn=yn.next=r,yn}function vn(){if(Lt===null){var r=st.alternate;r=r!==null?r.memoizedState:null}else r=Lt.next;var i=yn===null?st.memoizedState:yn.next;if(i!==null)yn=i,Lt=r;else{if(r===null)throw st.alternate===null?Error(n(467)):Error(n(310));Lt=r,r={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},yn===null?st.memoizedState=yn=r:yn=yn.next=r}return yn}function mm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(r){var i=zl;return zl+=1,So===null&&(So=[]),r=Y0(So,r,i),i=st,(yn===null?i.memoizedState:yn.next)===null&&(i=i.alternate,D.H=i===null||i.memoizedState===null?Av:Tv),r}function Tu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Hl(r);if(r.$$typeof===A)return Fn(r)}throw Error(n(438,String(r)))}function pm(r){var i=null,c=st.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=st.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=mm(),st.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(r),d=0;d<r;d++)c[d]=K;return i.index++,c}function rs(r,i){return typeof i=="function"?i(r):i}function Nu(r){var i=vn();return gm(i,Lt,r)}function gm(r,i,c){var d=r.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var g=r.baseQueue,y=d.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}i.baseQueue=g=y,d.pending=null}if(y=r.baseState,g===null)r.memoizedState=y;else{i=g.next;var T=x=null,B=null,J=i,ce=!1;do{var me=J.lane&-536870913;if(me!==J.lane?(yt&me)===me:(Ps&me)===me){var ee=J.revertLane;if(ee===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),me===bo&&(ce=!0);else if((Ps&ee)===ee){J=J.next,ee===bo&&(ce=!0);continue}else me={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(T=B=me,x=y):B=B.next=me,st.lanes|=ee,js|=ee;me=J.action,Ri&&c(y,me),y=J.hasEagerState?J.eagerState:c(y,me)}else ee={lane:me,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(T=B=ee,x=y):B=B.next=ee,st.lanes|=me,js|=me;J=J.next}while(J!==null&&J!==i);if(B===null?x=y:B.next=T,!Sa(y,r.memoizedState)&&(Dn=!0,ce&&(c=wo,c!==null)))throw c;r.memoizedState=y,r.baseState=x,r.baseQueue=B,d.lastRenderedState=y}return g===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function ym(r){var i=vn(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var d=c.dispatch,g=c.pending,y=i.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do y=r(y,x.action),x=x.next;while(x!==g);Sa(y,i.memoizedState)||(Dn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),c.lastRenderedState=y}return[y,d]}function Q0(r,i,c){var d=st,g=vn(),y=xt;if(y){if(c===void 0)throw Error(n(407));c=c()}else c=i();var x=!Sa((Lt||g).memoizedState,c);x&&(g.memoizedState=c,Dn=!0),g=g.queue;var T=K0.bind(null,d,g,r);if(Yl(2048,8,T,[r]),g.getSnapshot!==i||x||yn!==null&&yn.memoizedState.tag&1){if(d.flags|=2048,Eo(9,Ru(),X0.bind(null,d,g,c,i),null),Yt===null)throw Error(n(349));y||(Ps&124)!==0||V0(d,i,c)}return c}function V0(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=st.updateQueue,i===null?(i=mm(),st.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function X0(r,i,c,d){i.value=c,i.getSnapshot=d,J0(i)&&ev(r)}function K0(r,i,c){return c(function(){J0(i)&&ev(r)})}function J0(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Sa(r,c)}catch{return!0}}function ev(r){var i=po(r,2);i!==null&&Aa(i,r,2)}function vm(r){var i=ca();if(typeof r=="function"){var c=r;if(r=c(),Ri){Ft(!0);try{c()}finally{Ft(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:r},i}function tv(r,i,c,d){return r.baseState=c,gm(r,Lt,typeof d=="function"?d:rs)}function Bx(r,i,c,d,g){if(Lu(r))throw Error(n(485));if(r=i.action,r!==null){var y={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};D.T!==null?c(!0):y.isTransition=!1,d(y),c=i.pending,c===null?(y.next=i.pending=y,nv(i,y)):(y.next=c.next,i.pending=c.next=y)}}function nv(r,i){var c=i.action,d=i.payload,g=r.state;if(i.isTransition){var y=D.T,x={};D.T=x;try{var T=c(g,d),B=D.S;B!==null&&B(x,T),av(r,i,T)}catch(J){bm(r,i,J)}finally{D.T=y}}else try{y=c(g,d),av(r,i,y)}catch(J){bm(r,i,J)}}function av(r,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){rv(r,i,d)},function(d){return bm(r,i,d)}):rv(r,i,c)}function rv(r,i,c){i.status="fulfilled",i.value=c,sv(i),r.state=c,i=r.pending,i!==null&&(c=i.next,c===i?r.pending=null:(c=c.next,i.next=c,nv(r,c)))}function bm(r,i,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,sv(i),i=i.next;while(i!==d)}r.action=null}function sv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function iv(r,i){return i}function ov(r,i){if(xt){var c=Yt.formState;if(c!==null){e:{var d=st;if(xt){if(tn){t:{for(var g=tn,y=Er;g.nodeType!==8;){if(!y){g=null;break t}if(g=cr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){tn=cr(g.nextSibling),d=g.data==="F!";break e}}Mi(d)}d=!1}d&&(i=c[0])}}return c=ca(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iv,lastRenderedState:i},c.queue=d,c=Iv.bind(null,st,d),d.dispatch=c,d=vm(!1),y=Em.bind(null,st,!1,d.queue),d=ca(),g={state:i,dispatch:null,action:r,pending:null},d.queue=g,c=Bx.bind(null,st,g,y,c),g.dispatch=c,d.memoizedState=r,[i,c,!1]}function lv(r){var i=vn();return cv(i,Lt,r)}function cv(r,i,c){if(i=gm(r,i,iv)[0],r=Nu(rs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Hl(i)}catch(x){throw x===Ll?xu:x}else d=i;i=vn();var g=i.queue,y=g.dispatch;return c!==i.memoizedState&&(st.flags|=2048,Eo(9,Ru(),Ux.bind(null,g,c),null)),[d,y,r]}function Ux(r,i){r.action=i}function uv(r){var i=vn(),c=Lt;if(c!==null)return cv(i,c,r);vn(),i=i.memoizedState,c=vn();var d=c.queue.dispatch;return c.memoizedState=r,[i,d,!1]}function Eo(r,i,c,d){return r={tag:r,create:c,deps:d,inst:i,next:null},i=st.updateQueue,i===null&&(i=mm(),st.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,i.lastEffect=r),r}function Ru(){return{destroy:void 0,resource:void 0}}function dv(){return vn().memoizedState}function ku(r,i,c,d){var g=ca();d=d===void 0?null:d,st.flags|=r,g.memoizedState=Eo(1|i,Ru(),c,d)}function Yl(r,i,c,d){var g=vn();d=d===void 0?null:d;var y=g.memoizedState.inst;Lt!==null&&d!==null&&cm(d,Lt.memoizedState.deps)?g.memoizedState=Eo(i,y,c,d):(st.flags|=r,g.memoizedState=Eo(1|i,y,c,d))}function fv(r,i){ku(8390656,8,r,i)}function hv(r,i){Yl(2048,8,r,i)}function mv(r,i){return Yl(4,2,r,i)}function pv(r,i){return Yl(4,4,r,i)}function gv(r,i){if(typeof i=="function"){r=r();var c=i(r);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function yv(r,i,c){c=c!=null?c.concat([r]):null,Yl(4,4,gv.bind(null,i,r),c)}function wm(){}function vv(r,i){var c=vn();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&cm(i,d[1])?d[0]:(c.memoizedState=[r,i],r)}function bv(r,i){var c=vn();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&cm(i,d[1]))return d[0];if(d=r(),Ri){Ft(!0);try{r()}finally{Ft(!1)}}return c.memoizedState=[d,i],d}function Cm(r,i,c){return c===void 0||(Ps&1073741824)!==0?r.memoizedState=i:(r.memoizedState=c,r=_b(),st.lanes|=r,js|=r,c)}function wv(r,i,c,d){return Sa(c,i)?c:Co.current!==null?(r=Cm(r,c,d),Sa(r,i)||(Dn=!0),r):(Ps&42)===0?(Dn=!0,r.memoizedState=c):(r=_b(),st.lanes|=r,js|=r,i)}function Cv(r,i,c,d,g){var y=H.p;H.p=y!==0&&8>y?y:8;var x=D.T,T={};D.T=T,Em(r,!1,i,c);try{var B=g(),J=D.S;if(J!==null&&J(T,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ce=Lx(B,d);Fl(r,i,ce,Ma(r))}else Fl(r,i,d,Ma(r))}catch(me){Fl(r,i,{then:function(){},status:"rejected",reason:me},Ma())}finally{H.p=y,D.T=x}}function zx(){}function _m(r,i,c,d){if(r.tag!==5)throw Error(n(476));var g=_v(r).queue;Cv(r,g,i,W,c===null?zx:function(){return Sv(r),c(d)})}function _v(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:W},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:c},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Sv(r){var i=_v(r).next.queue;Fl(r,i,{},Ma())}function Sm(){return Fn(ic)}function Ev(){return vn().memoizedState}function xv(){return vn().memoizedState}function Hx(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var c=Ma();r=Ls(c);var d=Os(i,r,c);d!==null&&(Aa(d,i,c),Pl(d,i,c)),i={cache:Jh()},r.payload=i;return}i=i.return}}function Yx(r,i,c){var d=Ma();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Lu(r)?Dv(i,c):(c=jh(r,i,c,d),c!==null&&(Aa(c,r,d),Mv(c,i,d)))}function Iv(r,i,c){var d=Ma();Fl(r,i,c,d)}function Fl(r,i,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Lu(r))Dv(i,g);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var x=i.lastRenderedState,T=y(x,c);if(g.hasEagerState=!0,g.eagerState=T,Sa(T,x))return yu(r,i,g,0),Yt===null&&gu(),!1}catch{}finally{}if(c=jh(r,i,g,d),c!==null)return Aa(c,r,d),Mv(c,i,d),!0}return!1}function Em(r,i,c,d){if(d={lane:2,revertLane:np(),action:d,hasEagerState:!1,eagerState:null,next:null},Lu(r)){if(i)throw Error(n(479))}else i=jh(r,c,d,2),i!==null&&Aa(i,r,2)}function Lu(r){var i=r.alternate;return r===st||i!==null&&i===st}function Dv(r,i){_o=Mu=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function Mv(r,i,c){if((c&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,c|=d,i.lanes=c,Jn(r,c)}}var Ou={readContext:Fn,use:Tu,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un},Av={readContext:Fn,use:Tu,useCallback:function(r,i){return ca().memoizedState=[r,i===void 0?null:i],r},useContext:Fn,useEffect:fv,useImperativeHandle:function(r,i,c){c=c!=null?c.concat([r]):null,ku(4194308,4,gv.bind(null,i,r),c)},useLayoutEffect:function(r,i){return ku(4194308,4,r,i)},useInsertionEffect:function(r,i){ku(4,2,r,i)},useMemo:function(r,i){var c=ca();i=i===void 0?null:i;var d=r();if(Ri){Ft(!0);try{r()}finally{Ft(!1)}}return c.memoizedState=[d,i],d},useReducer:function(r,i,c){var d=ca();if(c!==void 0){var g=c(i);if(Ri){Ft(!0);try{c(i)}finally{Ft(!1)}}}else g=i;return d.memoizedState=d.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},d.queue=r,r=r.dispatch=Yx.bind(null,st,r),[d.memoizedState,r]},useRef:function(r){var i=ca();return r={current:r},i.memoizedState=r},useState:function(r){r=vm(r);var i=r.queue,c=Iv.bind(null,st,i);return i.dispatch=c,[r.memoizedState,c]},useDebugValue:wm,useDeferredValue:function(r,i){var c=ca();return Cm(c,r,i)},useTransition:function(){var r=vm(!1);return r=Cv.bind(null,st,r.queue,!0,!1),ca().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,c){var d=st,g=ca();if(xt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),Yt===null)throw Error(n(349));(yt&124)!==0||V0(d,i,c)}g.memoizedState=c;var y={value:c,getSnapshot:i};return g.queue=y,fv(K0.bind(null,d,y,r),[r]),d.flags|=2048,Eo(9,Ru(),X0.bind(null,d,y,c,i),null),c},useId:function(){var r=ca(),i=Yt.identifierPrefix;if(xt){var c=ts,d=es;c=(d&~(1<<32-gn(d)-1)).toString(32)+c,i=""+i+"R"+c,c=Au++,0<c&&(i+="H"+c.toString(32)),i+=""}else c=Ox++,i=""+i+"r"+c.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:Sm,useFormState:ov,useActionState:ov,useOptimistic:function(r){var i=ca();i.memoizedState=i.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Em.bind(null,st,!0,c),c.dispatch=i,[r,i]},useMemoCache:pm,useCacheRefresh:function(){return ca().memoizedState=Hx.bind(null,st)}},Tv={readContext:Fn,use:Tu,useCallback:vv,useContext:Fn,useEffect:hv,useImperativeHandle:yv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:bv,useReducer:Nu,useRef:dv,useState:function(){return Nu(rs)},useDebugValue:wm,useDeferredValue:function(r,i){var c=vn();return wv(c,Lt.memoizedState,r,i)},useTransition:function(){var r=Nu(rs)[0],i=vn().memoizedState;return[typeof r=="boolean"?r:Hl(r),i]},useSyncExternalStore:Q0,useId:Ev,useHostTransitionStatus:Sm,useFormState:lv,useActionState:lv,useOptimistic:function(r,i){var c=vn();return tv(c,Lt,r,i)},useMemoCache:pm,useCacheRefresh:xv},Fx={readContext:Fn,use:Tu,useCallback:vv,useContext:Fn,useEffect:hv,useImperativeHandle:yv,useInsertionEffect:mv,useLayoutEffect:pv,useMemo:bv,useReducer:ym,useRef:dv,useState:function(){return ym(rs)},useDebugValue:wm,useDeferredValue:function(r,i){var c=vn();return Lt===null?Cm(c,r,i):wv(c,Lt.memoizedState,r,i)},useTransition:function(){var r=ym(rs)[0],i=vn().memoizedState;return[typeof r=="boolean"?r:Hl(r),i]},useSyncExternalStore:Q0,useId:Ev,useHostTransitionStatus:Sm,useFormState:uv,useActionState:uv,useOptimistic:function(r,i){var c=vn();return Lt!==null?tv(c,Lt,r,i):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:pm,useCacheRefresh:xv},xo=null,jl=0;function Pu(r){var i=jl;return jl+=1,xo===null&&(xo=[]),Y0(xo,r,i)}function Wl(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Bu(r,i){throw i.$$typeof===v?Error(n(525)):(r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Nv(r){var i=r._init;return i(r._payload)}function Rv(r){function i(V,j){if(r){var X=V.deletions;X===null?(V.deletions=[j],V.flags|=16):X.push(j)}}function c(V,j){if(!r)return null;for(;j!==null;)i(V,j),j=j.sibling;return null}function d(V){for(var j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function g(V,j){return V=Jr(V,j),V.index=0,V.sibling=null,V}function y(V,j,X){return V.index=X,r?(X=V.alternate,X!==null?(X=X.index,X<j?(V.flags|=67108866,j):X):(V.flags|=67108866,j)):(V.flags|=1048576,j)}function x(V){return r&&V.alternate===null&&(V.flags|=67108866),V}function T(V,j,X,de){return j===null||j.tag!==6?(j=Gh(X,V.mode,de),j.return=V,j):(j=g(j,X),j.return=V,j)}function B(V,j,X,de){var ke=X.type;return ke===C?ce(V,j,X.props.children,de,X.key):j!==null&&(j.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Nv(ke)===j.type)?(j=g(j,X.props),Wl(j,X),j.return=V,j):(j=bu(X.type,X.key,X.props,null,V.mode,de),Wl(j,X),j.return=V,j)}function J(V,j,X,de){return j===null||j.tag!==4||j.stateNode.containerInfo!==X.containerInfo||j.stateNode.implementation!==X.implementation?(j=Zh(X,V.mode,de),j.return=V,j):(j=g(j,X.children||[]),j.return=V,j)}function ce(V,j,X,de,ke){return j===null||j.tag!==7?(j=Ei(X,V.mode,de,ke),j.return=V,j):(j=g(j,X),j.return=V,j)}function me(V,j,X){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Gh(""+j,V.mode,X),j.return=V,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return X=bu(j.type,j.key,j.props,null,V.mode,X),Wl(X,j),X.return=V,X;case _:return j=Zh(j,V.mode,X),j.return=V,j;case Y:var de=j._init;return j=de(j._payload),me(V,j,X)}if(z(j)||ie(j))return j=Ei(j,V.mode,X,null),j.return=V,j;if(typeof j.then=="function")return me(V,Pu(j),X);if(j.$$typeof===A)return me(V,Su(V,j),X);Bu(V,j)}return null}function ee(V,j,X,de){var ke=j!==null?j.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return ke!==null?null:T(V,j,""+X,de);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===ke?B(V,j,X,de):null;case _:return X.key===ke?J(V,j,X,de):null;case Y:return ke=X._init,X=ke(X._payload),ee(V,j,X,de)}if(z(X)||ie(X))return ke!==null?null:ce(V,j,X,de,null);if(typeof X.then=="function")return ee(V,j,Pu(X),de);if(X.$$typeof===A)return ee(V,j,Su(V,X),de);Bu(V,X)}return null}function te(V,j,X,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return V=V.get(X)||null,T(j,V,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return V=V.get(de.key===null?X:de.key)||null,B(j,V,de,ke);case _:return V=V.get(de.key===null?X:de.key)||null,J(j,V,de,ke);case Y:var ct=de._init;return de=ct(de._payload),te(V,j,X,de,ke)}if(z(de)||ie(de))return V=V.get(X)||null,ce(j,V,de,ke,null);if(typeof de.then=="function")return te(V,j,X,Pu(de),ke);if(de.$$typeof===A)return te(V,j,X,Su(j,de),ke);Bu(j,de)}return null}function Ze(V,j,X,de){for(var ke=null,ct=null,ze=j,We=j=0,An=null;ze!==null&&We<X.length;We++){ze.index>We?(An=ze,ze=null):An=ze.sibling;var _t=ee(V,ze,X[We],de);if(_t===null){ze===null&&(ze=An);break}r&&ze&&_t.alternate===null&&i(V,ze),j=y(_t,j,We),ct===null?ke=_t:ct.sibling=_t,ct=_t,ze=An}if(We===X.length)return c(V,ze),xt&&Ii(V,We),ke;if(ze===null){for(;We<X.length;We++)ze=me(V,X[We],de),ze!==null&&(j=y(ze,j,We),ct===null?ke=ze:ct.sibling=ze,ct=ze);return xt&&Ii(V,We),ke}for(ze=d(ze);We<X.length;We++)An=te(ze,V,We,X[We],de),An!==null&&(r&&An.alternate!==null&&ze.delete(An.key===null?We:An.key),j=y(An,j,We),ct===null?ke=An:ct.sibling=An,ct=An);return r&&ze.forEach(function(Ks){return i(V,Ks)}),xt&&Ii(V,We),ke}function Fe(V,j,X,de){if(X==null)throw Error(n(151));for(var ke=null,ct=null,ze=j,We=j=0,An=null,_t=X.next();ze!==null&&!_t.done;We++,_t=X.next()){ze.index>We?(An=ze,ze=null):An=ze.sibling;var Ks=ee(V,ze,_t.value,de);if(Ks===null){ze===null&&(ze=An);break}r&&ze&&Ks.alternate===null&&i(V,ze),j=y(Ks,j,We),ct===null?ke=Ks:ct.sibling=Ks,ct=Ks,ze=An}if(_t.done)return c(V,ze),xt&&Ii(V,We),ke;if(ze===null){for(;!_t.done;We++,_t=X.next())_t=me(V,_t.value,de),_t!==null&&(j=y(_t,j,We),ct===null?ke=_t:ct.sibling=_t,ct=_t);return xt&&Ii(V,We),ke}for(ze=d(ze);!_t.done;We++,_t=X.next())_t=te(ze,V,We,_t.value,de),_t!==null&&(r&&_t.alternate!==null&&ze.delete(_t.key===null?We:_t.key),j=y(_t,j,We),ct===null?ke=_t:ct.sibling=_t,ct=_t);return r&&ze.forEach(function(j2){return i(V,j2)}),xt&&Ii(V,We),ke}function Pt(V,j,X,de){if(typeof X=="object"&&X!==null&&X.type===C&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:e:{for(var ke=X.key;j!==null;){if(j.key===ke){if(ke=X.type,ke===C){if(j.tag===7){c(V,j.sibling),de=g(j,X.props.children),de.return=V,V=de;break e}}else if(j.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Nv(ke)===j.type){c(V,j.sibling),de=g(j,X.props),Wl(de,X),de.return=V,V=de;break e}c(V,j);break}else i(V,j);j=j.sibling}X.type===C?(de=Ei(X.props.children,V.mode,de,X.key),de.return=V,V=de):(de=bu(X.type,X.key,X.props,null,V.mode,de),Wl(de,X),de.return=V,V=de)}return x(V);case _:e:{for(ke=X.key;j!==null;){if(j.key===ke)if(j.tag===4&&j.stateNode.containerInfo===X.containerInfo&&j.stateNode.implementation===X.implementation){c(V,j.sibling),de=g(j,X.children||[]),de.return=V,V=de;break e}else{c(V,j);break}else i(V,j);j=j.sibling}de=Zh(X,V.mode,de),de.return=V,V=de}return x(V);case Y:return ke=X._init,X=ke(X._payload),Pt(V,j,X,de)}if(z(X))return Ze(V,j,X,de);if(ie(X)){if(ke=ie(X),typeof ke!="function")throw Error(n(150));return X=ke.call(X),Fe(V,j,X,de)}if(typeof X.then=="function")return Pt(V,j,Pu(X),de);if(X.$$typeof===A)return Pt(V,j,Su(V,X),de);Bu(V,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,j!==null&&j.tag===6?(c(V,j.sibling),de=g(j,X),de.return=V,V=de):(c(V,j),de=Gh(X,V.mode,de),de.return=V,V=de),x(V)):c(V,j)}return function(V,j,X,de){try{jl=0;var ke=Pt(V,j,X,de);return xo=null,ke}catch(ze){if(ze===Ll||ze===xu)throw ze;var ct=Ea(29,ze,null,V.mode);return ct.lanes=de,ct.return=V,ct}finally{}}}var Io=Rv(!0),kv=Rv(!1),Wa=P(null),xr=null;function Bs(r){var i=r.alternate;Q(Sn,Sn.current&1),Q(Wa,r),xr===null&&(i===null||Co.current!==null||i.memoizedState!==null)&&(xr=r)}function Lv(r){if(r.tag===22){if(Q(Sn,Sn.current),Q(Wa,r),xr===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(xr=r)}}else Us()}function Us(){Q(Sn,Sn.current),Q(Wa,Wa.current)}function ss(r){G(Wa),xr===r&&(xr=null),G(Sn)}var Sn=P(0);function Uu(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||mp(c)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function xm(r,i,c,d){i=r.memoizedState,c=c(d,i),c=c==null?i:p({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Im={enqueueSetState:function(r,i,c){r=r._reactInternals;var d=Ma(),g=Ls(d);g.payload=i,c!=null&&(g.callback=c),i=Os(r,g,d),i!==null&&(Aa(i,r,d),Pl(i,r,d))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var d=Ma(),g=Ls(d);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=Os(r,g,d),i!==null&&(Aa(i,r,d),Pl(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=Ma(),d=Ls(c);d.tag=2,i!=null&&(d.callback=i),i=Os(r,d,c),i!==null&&(Aa(i,r,c),Pl(i,r,c))}};function Ov(r,i,c,d,g,y,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,x):i.prototype&&i.prototype.isPureReactComponent?!Il(c,d)||!Il(g,y):!0}function Pv(r,i,c,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==r&&Im.enqueueReplaceState(i,i.state,null)}function ki(r,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(r=r.defaultProps){c===i&&(c=p({},c));for(var g in r)c[g]===void 0&&(c[g]=r[g])}return c}var zu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Bv(r){zu(r)}function Uv(r){console.error(r)}function zv(r){zu(r)}function Hu(r,i){try{var c=r.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Hv(r,i,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Dm(r,i,c){return c=Ls(c),c.tag=3,c.payload={element:null},c.callback=function(){Hu(r,i)},c}function Yv(r){return r=Ls(r),r.tag=3,r}function Fv(r,i,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;r.payload=function(){return g(y)},r.callback=function(){Hv(i,c,d)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){Hv(i,c,d),typeof g!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var T=d.stack;this.componentDidCatch(d.value,{componentStack:T!==null?T:""})})}function jx(r,i,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Nl(i,c,g,!0),c=Wa.current,c!==null){switch(c.tag){case 13:return xr===null?Xm():c.alternate===null&&nn===0&&(nn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===nm?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),Jm(r,d,g)),!1;case 22:return c.flags|=65536,d===nm?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),Jm(r,d,g)),!1}throw Error(n(435,c.tag))}return Jm(r,d,g),Xm(),!1}if(xt)return i=Wa.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==Qh&&(r=Error(n(422),{cause:d}),Tl(Ha(r,c)))):(d!==Qh&&(i=Error(n(423),{cause:d}),Tl(Ha(i,c))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,d=Ha(d,c),g=Dm(r.stateNode,d,g),sm(r,g),nn!==4&&(nn=2)),!1;var y=Error(n(520),{cause:d});if(y=Ha(y,c),Xl===null?Xl=[y]:Xl.push(y),nn!==4&&(nn=2),i===null)return!0;d=Ha(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,r=g&-g,c.lanes|=r,r=Dm(c.stateNode,d,r),sm(c,r),!1;case 1:if(i=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ws===null||!Ws.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Yv(g),Fv(g,r,c,d),sm(c,g),!1}c=c.return}while(c!==null);return!1}var jv=Error(n(461)),Dn=!1;function Ln(r,i,c,d){i.child=r===null?kv(i,null,c,d):Io(i,r.child,c,d)}function Wv(r,i,c,d,g){c=c.render;var y=i.ref;if("ref"in d){var x={};for(var T in d)T!=="ref"&&(x[T]=d[T])}else x=d;return Ti(i),d=um(r,i,c,x,y,g),T=dm(),r!==null&&!Dn?(fm(r,i,g),is(r,i,g)):(xt&&T&&$h(i),i.flags|=1,Ln(r,i,d,g),i.child)}function Gv(r,i,c,d,g){if(r===null){var y=c.type;return typeof y=="function"&&!Wh(y)&&y.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=y,Zv(r,i,y,d,g)):(r=bu(c.type,null,d,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Om(r,g)){var x=y.memoizedProps;if(c=c.compare,c=c!==null?c:Il,c(x,d)&&r.ref===i.ref)return is(r,i,g)}return i.flags|=1,r=Jr(y,d),r.ref=i.ref,r.return=i,i.child=r}function Zv(r,i,c,d,g){if(r!==null){var y=r.memoizedProps;if(Il(y,d)&&r.ref===i.ref)if(Dn=!1,i.pendingProps=d=y,Om(r,g))(r.flags&131072)!==0&&(Dn=!0);else return i.lanes=r.lanes,is(r,i,g)}return Mm(r,i,c,d,g)}function $v(r,i,c){var d=i.pendingProps,g=d.children,y=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((i.flags&128)!==0){if(d=y!==null?y.baseLanes|c:c,r!==null){for(g=i.child=r.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~d}else i.childLanes=0,i.child=null;return qv(r,i,d,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&Eu(i,y!==null?y.cachePool:null),y!==null?Z0(i,y):om(),Lv(i);else return i.lanes=i.childLanes=536870912,qv(r,i,y!==null?y.baseLanes|c:c,c)}else y!==null?(Eu(i,y.cachePool),Z0(i,y),Us(),i.memoizedState=null):(r!==null&&Eu(i,null),om(),Us());return Ln(r,i,g,c),i.child}function qv(r,i,c,d){var g=tm();return g=g===null?null:{parent:_n._currentValue,pool:g},i.memoizedState={baseLanes:c,cachePool:g},r!==null&&Eu(i,null),om(),Lv(i),r!==null&&Nl(r,i,d,!0),null}function Yu(r,i){var c=i.ref;if(c===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(r===null||r.ref!==c)&&(i.flags|=4194816)}}function Mm(r,i,c,d,g){return Ti(i),c=um(r,i,c,d,void 0,g),d=dm(),r!==null&&!Dn?(fm(r,i,g),is(r,i,g)):(xt&&d&&$h(i),i.flags|=1,Ln(r,i,c,g),i.child)}function Qv(r,i,c,d,g,y){return Ti(i),i.updateQueue=null,c=q0(i,d,c,g),$0(r),d=dm(),r!==null&&!Dn?(fm(r,i,y),is(r,i,y)):(xt&&d&&$h(i),i.flags|=1,Ln(r,i,c,y),i.child)}function Vv(r,i,c,d,g){if(Ti(i),i.stateNode===null){var y=go,x=c.contextType;typeof x=="object"&&x!==null&&(y=Fn(x)),y=new c(d,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Im,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=d,y.state=i.memoizedState,y.refs={},am(i),x=c.contextType,y.context=typeof x=="object"&&x!==null?Fn(x):go,y.state=i.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(xm(i,c,x,d),y.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Im.enqueueReplaceState(y,y.state,null),Ul(i,d,y,g),Bl(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){y=i.stateNode;var T=i.memoizedProps,B=ki(c,T);y.props=B;var J=y.context,ce=c.contextType;x=go,typeof ce=="object"&&ce!==null&&(x=Fn(ce));var me=c.getDerivedStateFromProps;ce=typeof me=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ce||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||J!==x)&&Pv(i,y,d,x),ks=!1;var ee=i.memoizedState;y.state=ee,Ul(i,d,y,g),Bl(),J=i.memoizedState,T||ee!==J||ks?(typeof me=="function"&&(xm(i,c,me,d),J=i.memoizedState),(B=ks||Ov(i,c,B,d,ee,J,x))?(ce||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=J),y.props=d,y.state=J,y.context=x,d=B):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{y=i.stateNode,rm(r,i),x=i.memoizedProps,ce=ki(c,x),y.props=ce,me=i.pendingProps,ee=y.context,J=c.contextType,B=go,typeof J=="object"&&J!==null&&(B=Fn(J)),T=c.getDerivedStateFromProps,(J=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==me||ee!==B)&&Pv(i,y,d,B),ks=!1,ee=i.memoizedState,y.state=ee,Ul(i,d,y,g),Bl();var te=i.memoizedState;x!==me||ee!==te||ks||r!==null&&r.dependencies!==null&&_u(r.dependencies)?(typeof T=="function"&&(xm(i,c,T,d),te=i.memoizedState),(ce=ks||Ov(i,c,ce,d,ee,te,B)||r!==null&&r.dependencies!==null&&_u(r.dependencies))?(J||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,te,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,te,B)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=te),y.props=d,y.state=te,y.context=B,d=ce):(typeof y.componentDidUpdate!="function"||x===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),d=!1)}return y=d,Yu(r,i),d=(i.flags&128)!==0,y||d?(y=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&d?(i.child=Io(i,r.child,null,g),i.child=Io(i,null,c,g)):Ln(r,i,c,g),i.memoizedState=y.state,r=i.child):r=is(r,i,g),r}function Xv(r,i,c,d){return Al(),i.flags|=256,Ln(r,i,c,d),i.child}var Am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tm(r){return{baseLanes:r,cachePool:U0()}}function Nm(r,i,c){return r=r!==null?r.childLanes&~c:0,i&&(r|=Ga),r}function Kv(r,i,c){var d=i.pendingProps,g=!1,y=(i.flags&128)!==0,x;if((x=y)||(x=r!==null&&r.memoizedState===null?!1:(Sn.current&2)!==0),x&&(g=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,r===null){if(xt){if(g?Bs(i):Us(),xt){var T=tn,B;if(B=T){e:{for(B=T,T=Er;B.nodeType!==8;){if(!T){T=null;break e}if(B=cr(B.nextSibling),B===null){T=null;break e}}T=B}T!==null?(i.memoizedState={dehydrated:T,treeContext:xi!==null?{id:es,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},B=Ea(18,null,null,0),B.stateNode=T,B.return=i,i.child=B,na=i,tn=null,B=!0):B=!1}B||Mi(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return mp(T)?i.lanes=32:i.lanes=536870912,null;ss(i)}return T=d.children,d=d.fallback,g?(Us(),g=i.mode,T=Fu({mode:"hidden",children:T},g),d=Ei(d,g,c,null),T.return=i,d.return=i,T.sibling=d,i.child=T,g=i.child,g.memoizedState=Tm(c),g.childLanes=Nm(r,x,c),i.memoizedState=Am,d):(Bs(i),Rm(i,T))}if(B=r.memoizedState,B!==null&&(T=B.dehydrated,T!==null)){if(y)i.flags&256?(Bs(i),i.flags&=-257,i=km(r,i,c)):i.memoizedState!==null?(Us(),i.child=r.child,i.flags|=128,i=null):(Us(),g=d.fallback,T=i.mode,d=Fu({mode:"visible",children:d.children},T),g=Ei(g,T,c,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,Io(i,r.child,null,c),d=i.child,d.memoizedState=Tm(c),d.childLanes=Nm(r,x,c),i.memoizedState=Am,i=g);else if(Bs(i),mp(T)){if(x=T.nextSibling&&T.nextSibling.dataset,x)var J=x.dgst;x=J,d=Error(n(419)),d.stack="",d.digest=x,Tl({value:d,source:null,stack:null}),i=km(r,i,c)}else if(Dn||Nl(r,i,c,!1),x=(c&r.childLanes)!==0,Dn||x){if(x=Yt,x!==null&&(d=c&-c,d=(d&42)!==0?1:rr(d),d=(d&(x.suspendedLanes|c))!==0?0:d,d!==0&&d!==B.retryLane))throw B.retryLane=d,po(r,d),Aa(x,r,d),jv;T.data==="$?"||Xm(),i=km(r,i,c)}else T.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=B.treeContext,tn=cr(T.nextSibling),na=i,xt=!0,Di=null,Er=!1,r!==null&&(Fa[ja++]=es,Fa[ja++]=ts,Fa[ja++]=xi,es=r.id,ts=r.overflow,xi=i),i=Rm(i,d.children),i.flags|=4096);return i}return g?(Us(),g=d.fallback,T=i.mode,B=r.child,J=B.sibling,d=Jr(B,{mode:"hidden",children:d.children}),d.subtreeFlags=B.subtreeFlags&65011712,J!==null?g=Jr(J,g):(g=Ei(g,T,c,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,T=r.child.memoizedState,T===null?T=Tm(c):(B=T.cachePool,B!==null?(J=_n._currentValue,B=B.parent!==J?{parent:J,pool:J}:B):B=U0(),T={baseLanes:T.baseLanes|c,cachePool:B}),g.memoizedState=T,g.childLanes=Nm(r,x,c),i.memoizedState=Am,d):(Bs(i),c=r.child,r=c.sibling,c=Jr(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,r!==null&&(x=i.deletions,x===null?(i.deletions=[r],i.flags|=16):x.push(r)),i.child=c,i.memoizedState=null,c)}function Rm(r,i){return i=Fu({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Fu(r,i){return r=Ea(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function km(r,i,c){return Io(i,r.child,null,c),r=Rm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Jv(r,i,c){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),Xh(r.return,i,c)}function Lm(r,i,c,d,g){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=g)}function eb(r,i,c){var d=i.pendingProps,g=d.revealOrder,y=d.tail;if(Ln(r,i,d.children,c),d=Sn.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jv(r,c,i);else if(r.tag===19)Jv(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(Q(Sn,d),g){case"forwards":for(c=i.child,g=null;c!==null;)r=c.alternate,r!==null&&Uu(r)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),Lm(i,!1,g,c,y);break;case"backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Uu(r)===null){i.child=g;break}r=g.sibling,g.sibling=c,c=g,g=r}Lm(i,!0,c,null,y);break;case"together":Lm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function is(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),js|=i.lanes,(c&i.childLanes)===0)if(r!==null){if(Nl(r,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,c=Jr(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=Jr(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function Om(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&_u(r)))}function Wx(r,i,c){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),Rs(i,_n,r.memoizedState.cache),Al();break;case 27:case 5:ot(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:Rs(i,i.type,i.memoizedProps.value);break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Bs(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Kv(r,i,c):(Bs(i),r=is(r,i,c),r!==null?r.sibling:null);Bs(i);break;case 19:var g=(r.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Nl(r,i,c,!1),d=(c&i.childLanes)!==0),g){if(d)return eb(r,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(Sn,Sn.current),d)break;return null;case 22:case 23:return i.lanes=0,$v(r,i,c);case 24:Rs(i,_n,r.memoizedState.cache)}return is(r,i,c)}function tb(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps)Dn=!0;else{if(!Om(r,c)&&(i.flags&128)===0)return Dn=!1,Wx(r,i,c);Dn=(r.flags&131072)!==0}else Dn=!1,xt&&(i.flags&1048576)!==0&&N0(i,Cu,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var d=i.elementType,g=d._init;if(d=g(d._payload),i.type=d,typeof d=="function")Wh(d)?(r=ki(d,r),i.tag=1,i=Vv(null,i,d,r,c)):(i.tag=0,i=Mm(null,i,d,r,c));else{if(d!=null){if(g=d.$$typeof,g===k){i.tag=11,i=Wv(null,i,d,r,c);break e}else if(g===q){i.tag=14,i=Gv(null,i,d,r,c);break e}}throw i=se(d)||d,Error(n(306,i,""))}}return i;case 0:return Mm(r,i,i.type,i.pendingProps,c);case 1:return d=i.type,g=ki(d,i.pendingProps),Vv(r,i,d,g,c);case 3:e:{if(ve(i,i.stateNode.containerInfo),r===null)throw Error(n(387));d=i.pendingProps;var y=i.memoizedState;g=y.element,rm(r,i),Ul(i,d,null,c);var x=i.memoizedState;if(d=x.cache,Rs(i,_n,d),d!==y.cache&&Kh(i,[_n],c,!0),Bl(),d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Xv(r,i,d,c);break e}else if(d!==g){g=Ha(Error(n(424)),i),Tl(g),i=Xv(r,i,d,c);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(tn=cr(r.firstChild),na=i,xt=!0,Di=null,Er=!0,c=kv(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Al(),d===g){i=is(r,i,c);break e}Ln(r,i,d,c)}i=i.child}return i;case 26:return Yu(r,i),r===null?(c=sw(i.type,null,i.pendingProps,null))?i.memoizedState=c:xt||(c=i.type,r=i.pendingProps,d=nd(ye.current).createElement(c),d[ln]=i,d[cn]=r,Pn(d,c,r),jt(d),i.stateNode=d):i.memoizedState=sw(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ot(i),r===null&&xt&&(d=i.stateNode=nw(i.type,i.pendingProps,ye.current),na=i,Er=!0,g=tn,$s(i.type)?(pp=g,tn=cr(d.firstChild)):tn=g),Ln(r,i,i.pendingProps.children,c),Yu(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&xt&&((g=d=tn)&&(d=v2(d,i.type,i.pendingProps,Er),d!==null?(i.stateNode=d,na=i,tn=cr(d.firstChild),Er=!1,g=!0):g=!1),g||Mi(i)),ot(i),g=i.type,y=i.pendingProps,x=r!==null?r.memoizedProps:null,d=y.children,dp(g,y)?d=null:x!==null&&dp(g,x)&&(i.flags|=32),i.memoizedState!==null&&(g=um(r,i,Px,null,null,c),ic._currentValue=g),Yu(r,i),Ln(r,i,d,c),i.child;case 6:return r===null&&xt&&((r=c=tn)&&(c=b2(c,i.pendingProps,Er),c!==null?(i.stateNode=c,na=i,tn=null,r=!0):r=!1),r||Mi(i)),null;case 13:return Kv(r,i,c);case 4:return ve(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=Io(i,null,d,c):Ln(r,i,d,c),i.child;case 11:return Wv(r,i,i.type,i.pendingProps,c);case 7:return Ln(r,i,i.pendingProps,c),i.child;case 8:return Ln(r,i,i.pendingProps.children,c),i.child;case 12:return Ln(r,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Rs(i,i.type,d.value),Ln(r,i,d.children,c),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,Ti(i),g=Fn(g),d=d(g),i.flags|=1,Ln(r,i,d,c),i.child;case 14:return Gv(r,i,i.type,i.pendingProps,c);case 15:return Zv(r,i,i.type,i.pendingProps,c);case 19:return eb(r,i,c);case 31:return d=i.pendingProps,c=i.mode,d={mode:d.mode,children:d.children},r===null?(c=Fu(d,c),c.ref=i.ref,i.child=c,c.return=i,i=c):(c=Jr(r.child,d),c.ref=i.ref,i.child=c,c.return=i,i=c),i;case 22:return $v(r,i,c);case 24:return Ti(i),d=Fn(_n),r===null?(g=tm(),g===null&&(g=Yt,y=Jh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),i.memoizedState={parent:d,cache:g},am(i),Rs(i,_n,g)):((r.lanes&c)!==0&&(rm(r,i),Ul(i,null,null,c),Bl()),g=r.memoizedState,y=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Rs(i,_n,d)):(d=y.cache,Rs(i,_n,d),d!==g.cache&&Kh(i,[_n],c,!0))),Ln(r,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function os(r){r.flags|=4}function nb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!uw(i)){if(i=Wa.current,i!==null&&((yt&4194048)===yt?xr!==null:(yt&62914560)!==yt&&(yt&536870912)===0||i!==xr))throw Ol=nm,z0;r.flags|=8192}}function ju(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?pa():536870912,r.lanes|=i,To|=i)}function Gl(r,i){if(!xt)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Qt(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(i)for(var g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=d,r.childLanes=c,i}function Gx(r,i,c){var d=i.pendingProps;switch(qh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(i),null;case 1:return Qt(i),null;case 3:return c=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),as(_n),Ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Ml(i)?os(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,L0())),Qt(i),null;case 26:return c=i.memoizedState,r===null?(os(i),c!==null?(Qt(i),nb(i,c)):(Qt(i),i.flags&=-16777217)):c?c!==r.memoizedState?(os(i),Qt(i),nb(i,c)):(Qt(i),i.flags&=-16777217):(r.memoizedProps!==d&&os(i),Qt(i),i.flags&=-16777217),null;case 27:St(i),c=ye.current;var g=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==d&&os(i);else{if(!d){if(i.stateNode===null)throw Error(n(166));return Qt(i),null}r=re.current,Ml(i)?R0(i):(r=nw(g,d,c),i.stateNode=r,os(i))}return Qt(i),null;case 5:if(St(i),c=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&os(i);else{if(!d){if(i.stateNode===null)throw Error(n(166));return Qt(i),null}if(r=re.current,Ml(i))R0(i);else{switch(g=nd(ye.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}r[ln]=i,r[cn]=d;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=r;e:switch(Pn(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&os(i)}}return Qt(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&os(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(n(166));if(r=ye.current,Ml(i)){if(r=i.stateNode,c=i.memoizedProps,d=null,g=na,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}r[ln]=i,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Qb(r.nodeValue,c)),r||Mi(i)}else r=nd(r).createTextNode(d),r[ln]=i,i.stateNode=r}return Qt(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=Ml(i),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(n(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[ln]=i}else Al(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qt(i),g=!1}else g=L0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(ss(i),i):(ss(i),null)}if(ss(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var y=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)}return c!==r&&c&&(i.child.flags|=8192),ju(i,i.updateQueue),Qt(i),null;case 4:return Ve(),r===null&&ip(i.stateNode.containerInfo),Qt(i),null;case 10:return as(i.type),Qt(i),null;case 19:if(G(Sn),g=i.memoizedState,g===null)return Qt(i),null;if(d=(i.flags&128)!==0,y=g.rendering,y===null)if(d)Gl(g,!1);else{if(nn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=Uu(r),y!==null){for(i.flags|=128,Gl(g,!1),r=y.updateQueue,i.updateQueue=r,ju(i,r),i.subtreeFlags=0,r=c,c=i.child;c!==null;)T0(c,r),c=c.sibling;return Q(Sn,Sn.current&1|2),i.child}r=r.sibling}g.tail!==null&&on()>Zu&&(i.flags|=128,d=!0,Gl(g,!1),i.lanes=4194304)}else{if(!d)if(r=Uu(y),r!==null){if(i.flags|=128,d=!0,r=r.updateQueue,i.updateQueue=r,ju(i,r),Gl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!xt)return Qt(i),null}else 2*on()-g.renderingStartTime>Zu&&c!==536870912&&(i.flags|=128,d=!0,Gl(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(r=g.last,r!==null?r.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=on(),i.sibling=null,r=Sn.current,Q(Sn,d?r&1|2:r&1),i):(Qt(i),null);case 22:case 23:return ss(i),lm(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(Qt(i),i.subtreeFlags&6&&(i.flags|=8192)):Qt(i),c=i.updateQueue,c!==null&&ju(i,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),r!==null&&G(Ni),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),as(_n),Qt(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function Zx(r,i){switch(qh(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return as(_n),Ve(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return St(i),null;case 13:if(ss(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Al()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return G(Sn),null;case 4:return Ve(),null;case 10:return as(i.type),null;case 22:case 23:return ss(i),lm(),r!==null&&G(Ni),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return as(_n),null;case 25:return null;default:return null}}function ab(r,i){switch(qh(i),i.tag){case 3:as(_n),Ve();break;case 26:case 27:case 5:St(i);break;case 4:Ve();break;case 13:ss(i);break;case 19:G(Sn);break;case 10:as(i.type);break;case 22:case 23:ss(i),lm(),r!==null&&G(Ni);break;case 24:as(_n)}}function Zl(r,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&r)===r){d=void 0;var y=c.create,x=c.inst;d=y(),x.destroy=d}c=c.next}while(c!==g)}}catch(T){zt(i,i.return,T)}}function zs(r,i,c){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&r)===r){var x=d.inst,T=x.destroy;if(T!==void 0){x.destroy=void 0,g=i;var B=c,J=T;try{J()}catch(ce){zt(g,B,ce)}}}d=d.next}while(d!==y)}}catch(ce){zt(i,i.return,ce)}}function rb(r){var i=r.updateQueue;if(i!==null){var c=r.stateNode;try{G0(i,c)}catch(d){zt(r,r.return,d)}}}function sb(r,i,c){c.props=ki(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){zt(r,i,d)}}function $l(r,i){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof c=="function"?r.refCleanup=c(d):c.current=d}}catch(g){zt(r,i,g)}}function Ir(r,i){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){zt(r,i,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){zt(r,i,g)}else c.current=null}function ib(r){var i=r.type,c=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){zt(r,r.return,g)}}function Pm(r,i,c){try{var d=r.stateNode;h2(d,r.type,c,i),d[cn]=i}catch(g){zt(r,r.return,g)}}function ob(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$s(r.type)||r.tag===4}function Bm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ob(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$s(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Um(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(r),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=td));else if(d!==4&&(d===27&&$s(r.type)&&(c=r.stateNode,i=null),r=r.child,r!==null))for(Um(r,i,c),r=r.sibling;r!==null;)Um(r,i,c),r=r.sibling}function Wu(r,i,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(d!==4&&(d===27&&$s(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Wu(r,i,c),r=r.sibling;r!==null;)Wu(r,i,c),r=r.sibling}function lb(r){var i=r.stateNode,c=r.memoizedProps;try{for(var d=r.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Pn(i,d,c),i[ln]=r,i[cn]=c}catch(y){zt(r,r.return,y)}}var ls=!1,dn=!1,zm=!1,cb=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function $x(r,i){if(r=r.containerInfo,cp=ld,r=w0(r),Bh(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var x=0,T=-1,B=-1,J=0,ce=0,me=r,ee=null;t:for(;;){for(var te;me!==c||g!==0&&me.nodeType!==3||(T=x+g),me!==y||d!==0&&me.nodeType!==3||(B=x+d),me.nodeType===3&&(x+=me.nodeValue.length),(te=me.firstChild)!==null;)ee=me,me=te;for(;;){if(me===r)break t;if(ee===c&&++J===g&&(T=x),ee===y&&++ce===d&&(B=x),(te=me.nextSibling)!==null)break;me=ee,ee=me.parentNode}me=te}c=T===-1||B===-1?null:{start:T,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(up={focusedElem:r,selectionRange:c},ld=!1,Mn=i;Mn!==null;)if(i=Mn,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Mn=r;else for(;Mn!==null;){switch(i=Mn,y=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=i,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var Ze=ki(c.type,g,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(Ze,y),d.__reactInternalSnapshotBeforeUpdate=r}catch(Fe){zt(c,c.return,Fe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,c=r.nodeType,c===9)hp(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=i.sibling,r!==null){r.return=i.return,Mn=r;break}Mn=i.return}}function ub(r,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Hs(r,c),d&4&&Zl(5,c);break;case 1:if(Hs(r,c),d&4)if(r=c.stateNode,i===null)try{r.componentDidMount()}catch(x){zt(c,c.return,x)}else{var g=ki(c.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(g,i,r.__reactInternalSnapshotBeforeUpdate)}catch(x){zt(c,c.return,x)}}d&64&&rb(c),d&512&&$l(c,c.return);break;case 3:if(Hs(r,c),d&64&&(r=c.updateQueue,r!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{G0(r,i)}catch(x){zt(c,c.return,x)}}break;case 27:i===null&&d&4&&lb(c);case 26:case 5:Hs(r,c),i===null&&d&4&&ib(c),d&512&&$l(c,c.return);break;case 12:Hs(r,c);break;case 13:Hs(r,c),d&4&&hb(r,c),d&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=n2.bind(null,c),w2(r,c))));break;case 22:if(d=c.memoizedState!==null||ls,!d){i=i!==null&&i.memoizedState!==null||dn,g=ls;var y=dn;ls=d,(dn=i)&&!y?Ys(r,c,(c.subtreeFlags&8772)!==0):Hs(r,c),ls=g,dn=y}break;case 30:break;default:Hs(r,c)}}function db(r){var i=r.alternate;i!==null&&(r.alternate=null,db(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&gi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Gt=null,ua=!1;function cs(r,i,c){for(c=c.child;c!==null;)fb(r,i,c),c=c.sibling}function fb(r,i,c){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Rn,c)}catch{}switch(c.tag){case 26:dn||Ir(c,i),cs(r,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:dn||Ir(c,i);var d=Gt,g=ua;$s(c.type)&&(Gt=c.stateNode,ua=!1),cs(r,i,c),nc(c.stateNode),Gt=d,ua=g;break;case 5:dn||Ir(c,i);case 6:if(d=Gt,g=ua,Gt=null,cs(r,i,c),Gt=d,ua=g,Gt!==null)if(ua)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(c.stateNode)}catch(y){zt(c,i,y)}else try{Gt.removeChild(c.stateNode)}catch(y){zt(c,i,y)}break;case 18:Gt!==null&&(ua?(r=Gt,ew(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),uc(r)):ew(Gt,c.stateNode));break;case 4:d=Gt,g=ua,Gt=c.stateNode.containerInfo,ua=!0,cs(r,i,c),Gt=d,ua=g;break;case 0:case 11:case 14:case 15:dn||zs(2,c,i),dn||zs(4,c,i),cs(r,i,c);break;case 1:dn||(Ir(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&sb(c,i,d)),cs(r,i,c);break;case 21:cs(r,i,c);break;case 22:dn=(d=dn)||c.memoizedState!==null,cs(r,i,c),dn=d;break;default:cs(r,i,c)}}function hb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{uc(r)}catch(c){zt(i,i.return,c)}}function qx(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new cb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new cb),i;default:throw Error(n(435,r.tag))}}function Hm(r,i){var c=qx(r);i.forEach(function(d){var g=a2.bind(null,r,d);c.has(d)||(c.add(d),d.then(g,g))})}function xa(r,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=r,x=i,T=x;e:for(;T!==null;){switch(T.tag){case 27:if($s(T.type)){Gt=T.stateNode,ua=!1;break e}break;case 5:Gt=T.stateNode,ua=!1;break e;case 3:case 4:Gt=T.stateNode.containerInfo,ua=!0;break e}T=T.return}if(Gt===null)throw Error(n(160));fb(y,x,g),Gt=null,ua=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)mb(i,r),i=i.sibling}var lr=null;function mb(r,i){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:xa(i,r),Ia(r),d&4&&(zs(3,r,r.return),Zl(3,r),zs(5,r,r.return));break;case 1:xa(i,r),Ia(r),d&512&&(dn||c===null||Ir(c,c.return)),d&64&&ls&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=lr;if(xa(i,r),Ia(r),d&512&&(dn||c===null||Ir(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){e:{d=r.type,c=r.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Zr]||y[ln]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Pn(y,d,c),y[ln]=r,jt(y),d=y;break e;case"link":var x=lw("link","href",g).get(d+(c.href||""));if(x){for(var T=0;T<x.length;T++)if(y=x[T],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(T,1);break t}}y=g.createElement(d),Pn(y,d,c),g.head.appendChild(y);break;case"meta":if(x=lw("meta","content",g).get(d+(c.content||""))){for(T=0;T<x.length;T++)if(y=x[T],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(T,1);break t}}y=g.createElement(d),Pn(y,d,c),g.head.appendChild(y);break;default:throw Error(n(468,d))}y[ln]=r,jt(y),d=y}r.stateNode=d}else cw(g,r.type,r.stateNode);else r.stateNode=ow(g,d,r.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?cw(g,r.type,r.stateNode):ow(g,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Pm(r,r.memoizedProps,c.memoizedProps)}break;case 27:xa(i,r),Ia(r),d&512&&(dn||c===null||Ir(c,c.return)),c!==null&&d&4&&Pm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(xa(i,r),Ia(r),d&512&&(dn||c===null||Ir(c,c.return)),r.flags&32){g=r.stateNode;try{Me(g,"")}catch(te){zt(r,r.return,te)}}d&4&&r.stateNode!=null&&(g=r.memoizedProps,Pm(r,g,c!==null?c.memoizedProps:g)),d&1024&&(zm=!0);break;case 6:if(xa(i,r),Ia(r),d&4){if(r.stateNode===null)throw Error(n(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(te){zt(r,r.return,te)}}break;case 3:if(sd=null,g=lr,lr=ad(i.containerInfo),xa(i,r),lr=g,Ia(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{uc(i.containerInfo)}catch(te){zt(r,r.return,te)}zm&&(zm=!1,pb(r));break;case 4:d=lr,lr=ad(r.stateNode.containerInfo),xa(i,r),Ia(r),lr=d;break;case 12:xa(i,r),Ia(r);break;case 13:xa(i,r),Ia(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Zm=on()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Hm(r,d)));break;case 22:g=r.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,J=ls,ce=dn;if(ls=J||g,dn=ce||B,xa(i,r),dn=ce,ls=J,Ia(r),d&8192)e:for(i=r.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(c===null||B||ls||dn||Li(r)),c=null,i=r;;){if(i.tag===5||i.tag===26){if(c===null){B=c=i;try{if(y=B.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=B.stateNode;var me=B.memoizedProps.style,ee=me!=null&&me.hasOwnProperty("display")?me.display:null;T.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){zt(B,B.return,te)}}}else if(i.tag===6){if(c===null){B=i;try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(te){zt(B,B.return,te)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Hm(r,c))));break;case 19:xa(i,r),Ia(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Hm(r,d)));break;case 30:break;case 21:break;default:xa(i,r),Ia(r)}}function Ia(r){var i=r.flags;if(i&2){try{for(var c,d=r.return;d!==null;){if(ob(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,y=Bm(r);Wu(r,y,g);break;case 5:var x=c.stateNode;c.flags&32&&(Me(x,""),c.flags&=-33);var T=Bm(r);Wu(r,T,x);break;case 3:case 4:var B=c.stateNode.containerInfo,J=Bm(r);Um(r,J,B);break;default:throw Error(n(161))}}catch(ce){zt(r,r.return,ce)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function pb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;pb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Hs(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ub(r,i.alternate,i),i=i.sibling}function Li(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:zs(4,i,i.return),Li(i);break;case 1:Ir(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&sb(i,i.return,c),Li(i);break;case 27:nc(i.stateNode);case 26:case 5:Ir(i,i.return),Li(i);break;case 22:i.memoizedState===null&&Li(i);break;case 30:Li(i);break;default:Li(i)}r=r.sibling}}function Ys(r,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=r,y=i,x=y.flags;switch(y.tag){case 0:case 11:case 15:Ys(g,y,c),Zl(4,y);break;case 1:if(Ys(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){zt(d,d.return,J)}if(d=y,g=d.updateQueue,g!==null){var T=d.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)W0(B[g],T)}catch(J){zt(d,d.return,J)}}c&&x&64&&rb(y),$l(y,y.return);break;case 27:lb(y);case 26:case 5:Ys(g,y,c),c&&d===null&&x&4&&ib(y),$l(y,y.return);break;case 12:Ys(g,y,c);break;case 13:Ys(g,y,c),c&&x&4&&hb(g,y);break;case 22:y.memoizedState===null&&Ys(g,y,c),$l(y,y.return);break;case 30:break;default:Ys(g,y,c)}i=i.sibling}}function Ym(r,i){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Rl(c))}function Fm(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Rl(r))}function Dr(r,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)gb(r,i,c,d),i=i.sibling}function gb(r,i,c,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Dr(r,i,c,d),g&2048&&Zl(9,i);break;case 1:Dr(r,i,c,d);break;case 3:Dr(r,i,c,d),g&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Rl(r)));break;case 12:if(g&2048){Dr(r,i,c,d),r=i.stateNode;try{var y=i.memoizedProps,x=y.id,T=y.onPostCommit;typeof T=="function"&&T(x,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){zt(i,i.return,B)}}else Dr(r,i,c,d);break;case 13:Dr(r,i,c,d);break;case 23:break;case 22:y=i.stateNode,x=i.alternate,i.memoizedState!==null?y._visibility&2?Dr(r,i,c,d):ql(r,i):y._visibility&2?Dr(r,i,c,d):(y._visibility|=2,Do(r,i,c,d,(i.subtreeFlags&10256)!==0)),g&2048&&Ym(x,i);break;case 24:Dr(r,i,c,d),g&2048&&Fm(i.alternate,i);break;default:Dr(r,i,c,d)}}function Do(r,i,c,d,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=r,x=i,T=c,B=d,J=x.flags;switch(x.tag){case 0:case 11:case 15:Do(y,x,T,B,g),Zl(8,x);break;case 23:break;case 22:var ce=x.stateNode;x.memoizedState!==null?ce._visibility&2?Do(y,x,T,B,g):ql(y,x):(ce._visibility|=2,Do(y,x,T,B,g)),g&&J&2048&&Ym(x.alternate,x);break;case 24:Do(y,x,T,B,g),g&&J&2048&&Fm(x.alternate,x);break;default:Do(y,x,T,B,g)}i=i.sibling}}function ql(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=r,d=i,g=d.flags;switch(d.tag){case 22:ql(c,d),g&2048&&Ym(d.alternate,d);break;case 24:ql(c,d),g&2048&&Fm(d.alternate,d);break;default:ql(c,d)}i=i.sibling}}var Ql=8192;function Mo(r){if(r.subtreeFlags&Ql)for(r=r.child;r!==null;)yb(r),r=r.sibling}function yb(r){switch(r.tag){case 26:Mo(r),r.flags&Ql&&r.memoizedState!==null&&k2(lr,r.memoizedState,r.memoizedProps);break;case 5:Mo(r);break;case 3:case 4:var i=lr;lr=ad(r.stateNode.containerInfo),Mo(r),lr=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Ql,Ql=16777216,Mo(r),Ql=i):Mo(r));break;default:Mo(r)}}function vb(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Vl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Mn=d,wb(d,r)}vb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bb(r),r=r.sibling}function bb(r){switch(r.tag){case 0:case 11:case 15:Vl(r),r.flags&2048&&zs(9,r,r.return);break;case 3:Vl(r);break;case 12:Vl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Gu(r)):Vl(r);break;default:Vl(r)}}function Gu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];Mn=d,wb(d,r)}vb(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:zs(8,i,i.return),Gu(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Gu(i));break;default:Gu(i)}r=r.sibling}}function wb(r,i){for(;Mn!==null;){var c=Mn;switch(c.tag){case 0:case 11:case 15:zs(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Rl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Mn=d;else e:for(c=r;Mn!==null;){d=Mn;var g=d.sibling,y=d.return;if(db(d),d===c){Mn=null;break e}if(g!==null){g.return=y,Mn=g;break e}Mn=y}}}var Qx={getCacheForType:function(r){var i=Fn(_n),c=i.data.get(r);return c===void 0&&(c=r(),i.data.set(r,c)),c}},Vx=typeof WeakMap=="function"?WeakMap:Map,At=0,Yt=null,dt=null,yt=0,Tt=0,Da=null,Fs=!1,Ao=!1,jm=!1,us=0,nn=0,js=0,Oi=0,Wm=0,Ga=0,To=0,Xl=null,da=null,Gm=!1,Zm=0,Zu=1/0,$u=null,Ws=null,On=0,Gs=null,No=null,Ro=0,$m=0,qm=null,Cb=null,Kl=0,Qm=null;function Ma(){if((At&2)!==0&&yt!==0)return yt&-yt;if(D.T!==null){var r=bo;return r!==0?r:np()}return pi()}function _b(){Ga===0&&(Ga=(yt&536870912)===0||xt?yr():536870912);var r=Wa.current;return r!==null&&(r.flags|=32),Ga}function Aa(r,i,c){(r===Yt&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)&&(ko(r,0),Zs(r,yt,Ga,!1)),kn(r,c),((At&2)===0||r!==Yt)&&(r===Yt&&((At&2)===0&&(Oi|=c),nn===4&&Zs(r,yt,Ga,!1)),Mr(r))}function Sb(r,i,c){if((At&6)!==0)throw Error(n(327));var d=!c&&(i&124)===0&&(i&r.expiredLanes)===0||xn(r,i),g=d?Jx(r,i):Km(r,i,!0),y=d;do{if(g===0){Ao&&!d&&Zs(r,i,0,!1);break}else{if(c=r.current.alternate,y&&!Xx(c)){g=Km(r,i,!1),y=!1;continue}if(g===2){if(y=i,r.errorRecoveryDisabledLanes&y)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;e:{var T=r;g=Xl;var B=T.current.memoizedState.isDehydrated;if(B&&(ko(T,x).flags|=256),x=Km(T,x,!1),x!==2){if(jm&&!B){T.errorRecoveryDisabledLanes|=y,Oi|=y,g=4;break e}y=da,da=g,y!==null&&(da===null?da=y:da.push.apply(da,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){ko(r,0),Zs(r,i,0,!0);break}e:{switch(d=r,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:Zs(d,i,Ga,!Fs);break e;case 2:da=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(g=Zm+300-on(),10<g)){if(Zs(d,i,Ga,!Fs),ut(d,0,!0)!==0)break e;d.timeoutHandle=Kb(Eb.bind(null,d,c,da,$u,Gm,i,Ga,Oi,To,Fs,y,2,-0,0),g);break e}Eb(d,c,da,$u,Gm,i,Ga,Oi,To,Fs,y,0,-0,0)}}break}while(!0);Mr(r)}function Eb(r,i,c,d,g,y,x,T,B,J,ce,me,ee,te){if(r.timeoutHandle=-1,me=i.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(sc={stylesheets:null,count:0,unsuspend:R2},yb(i),me=L2(),me!==null)){r.cancelPendingCommit=me(Nb.bind(null,r,i,y,c,d,g,x,T,B,ce,1,ee,te)),Zs(r,y,x,!J);return}Nb(r,i,y,c,d,g,x,T,B)}function Xx(r){for(var i=r;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!Sa(y(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zs(r,i,c,d){i&=~Wm,i&=~Oi,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var g=i;0<g;){var y=31-gn(g),x=1<<y;d[y]=-1,g&=~x}c!==0&&Ba(r,c,i)}function qu(){return(At&6)===0?(Jl(0),!1):!0}function Vm(){if(dt!==null){if(Tt===0)var r=dt.return;else r=dt,ns=Ai=null,hm(r),xo=null,jl=0,r=dt;for(;r!==null;)ab(r.alternate,r),r=r.return;dt=null}}function ko(r,i){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,p2(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Vm(),Yt=r,dt=c=Jr(r.current,null),yt=i,Tt=0,Da=null,Fs=!1,Ao=xn(r,i),jm=!1,To=Ga=Wm=Oi=js=nn=0,da=Xl=null,Gm=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var g=31-gn(d),y=1<<g;i|=r[g],d&=~y}return us=i,gu(),c}function xb(r,i){st=null,D.H=Ou,i===Ll||i===xu?(i=F0(),Tt=3):i===z0?(i=F0(),Tt=4):Tt=i===jv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Da=i,dt===null&&(nn=1,Hu(r,Ha(i,r.current)))}function Ib(){var r=D.H;return D.H=Ou,r===null?Ou:r}function Db(){var r=D.A;return D.A=Qx,r}function Xm(){nn=4,Fs||(yt&4194048)!==yt&&Wa.current!==null||(Ao=!0),(js&134217727)===0&&(Oi&134217727)===0||Yt===null||Zs(Yt,yt,Ga,!1)}function Km(r,i,c){var d=At;At|=2;var g=Ib(),y=Db();(Yt!==r||yt!==i)&&($u=null,ko(r,i)),i=!1;var x=nn;e:do try{if(Tt!==0&&dt!==null){var T=dt,B=Da;switch(Tt){case 8:Vm(),x=6;break e;case 3:case 2:case 9:case 6:Wa.current===null&&(i=!0);var J=Tt;if(Tt=0,Da=null,Lo(r,T,B,J),c&&Ao){x=0;break e}break;default:J=Tt,Tt=0,Da=null,Lo(r,T,B,J)}}Kx(),x=nn;break}catch(ce){xb(r,ce)}while(!0);return i&&r.shellSuspendCounter++,ns=Ai=null,At=d,D.H=g,D.A=y,dt===null&&(Yt=null,yt=0,gu()),x}function Kx(){for(;dt!==null;)Mb(dt)}function Jx(r,i){var c=At;At|=2;var d=Ib(),g=Db();Yt!==r||yt!==i?($u=null,Zu=on()+500,ko(r,i)):Ao=xn(r,i);e:do try{if(Tt!==0&&dt!==null){i=dt;var y=Da;t:switch(Tt){case 1:Tt=0,Da=null,Lo(r,i,y,1);break;case 2:case 9:if(H0(y)){Tt=0,Da=null,Ab(i);break}i=function(){Tt!==2&&Tt!==9||Yt!==r||(Tt=7),Mr(r)},y.then(i,i);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:H0(y)?(Tt=0,Da=null,Ab(i)):(Tt=0,Da=null,Lo(r,i,y,7));break;case 5:var x=null;switch(dt.tag){case 26:x=dt.memoizedState;case 5:case 27:var T=dt;if(!x||uw(x)){Tt=0,Da=null;var B=T.sibling;if(B!==null)dt=B;else{var J=T.return;J!==null?(dt=J,Qu(J)):dt=null}break t}}Tt=0,Da=null,Lo(r,i,y,5);break;case 6:Tt=0,Da=null,Lo(r,i,y,6);break;case 8:Vm(),nn=6;break e;default:throw Error(n(462))}}e2();break}catch(ce){xb(r,ce)}while(!0);return ns=Ai=null,D.H=d,D.A=g,At=c,dt!==null?0:(Yt=null,yt=0,gu(),nn)}function e2(){for(;dt!==null&&!Nn();)Mb(dt)}function Mb(r){var i=tb(r.alternate,r,us);r.memoizedProps=r.pendingProps,i===null?Qu(r):dt=i}function Ab(r){var i=r,c=i.alternate;switch(i.tag){case 15:case 0:i=Qv(c,i,i.pendingProps,i.type,void 0,yt);break;case 11:i=Qv(c,i,i.pendingProps,i.type.render,i.ref,yt);break;case 5:hm(i);default:ab(c,i),i=dt=T0(i,us),i=tb(c,i,us)}r.memoizedProps=r.pendingProps,i===null?Qu(r):dt=i}function Lo(r,i,c,d){ns=Ai=null,hm(i),xo=null,jl=0;var g=i.return;try{if(jx(r,g,i,c,yt)){nn=1,Hu(r,Ha(c,r.current)),dt=null;return}}catch(y){if(g!==null)throw dt=g,y;nn=1,Hu(r,Ha(c,r.current)),dt=null;return}i.flags&32768?(xt||d===1?r=!0:Ao||(yt&536870912)!==0?r=!1:(Fs=r=!0,(d===2||d===9||d===3||d===6)&&(d=Wa.current,d!==null&&d.tag===13&&(d.flags|=16384))),Tb(i,r)):Qu(i)}function Qu(r){var i=r;do{if((i.flags&32768)!==0){Tb(i,Fs);return}r=i.return;var c=Gx(i.alternate,i,us);if(c!==null){dt=c;return}if(i=i.sibling,i!==null){dt=i;return}dt=i=r}while(i!==null);nn===0&&(nn=5)}function Tb(r,i){do{var c=Zx(r.alternate,r);if(c!==null){c.flags&=32767,dt=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(r=r.sibling,r!==null)){dt=r;return}dt=r=c}while(r!==null);nn=6,dt=null}function Nb(r,i,c,d,g,y,x,T,B){r.cancelPendingCommit=null;do Vu();while(On!==0);if((At&6)!==0)throw Error(n(327));if(i!==null){if(i===r.current)throw Error(n(177));if(y=i.lanes|i.childLanes,y|=Fh,ga(r,c,y,x,T,B),r===Yt&&(dt=Yt=null,yt=0),No=i,Gs=r,Ro=c,$m=y,qm=g,Cb=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,r2(Vn,function(){return Pb(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=D.T,D.T=null,g=H.p,H.p=2,x=At,At|=4;try{$x(r,i,c)}finally{At=x,H.p=g,D.T=d}}On=1,Rb(),kb(),Lb()}}function Rb(){if(On===1){On=0;var r=Gs,i=No,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=D.T,D.T=null;var d=H.p;H.p=2;var g=At;At|=4;try{mb(i,r);var y=up,x=w0(r.containerInfo),T=y.focusedElem,B=y.selectionRange;if(x!==T&&T&&T.ownerDocument&&b0(T.ownerDocument.documentElement,T)){if(B!==null&&Bh(T)){var J=B.start,ce=B.end;if(ce===void 0&&(ce=J),"selectionStart"in T)T.selectionStart=J,T.selectionEnd=Math.min(ce,T.value.length);else{var me=T.ownerDocument||document,ee=me&&me.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),Ze=T.textContent.length,Fe=Math.min(B.start,Ze),Pt=B.end===void 0?Fe:Math.min(B.end,Ze);!te.extend&&Fe>Pt&&(x=Pt,Pt=Fe,Fe=x);var V=v0(T,Fe),j=v0(T,Pt);if(V&&j&&(te.rangeCount!==1||te.anchorNode!==V.node||te.anchorOffset!==V.offset||te.focusNode!==j.node||te.focusOffset!==j.offset)){var X=me.createRange();X.setStart(V.node,V.offset),te.removeAllRanges(),Fe>Pt?(te.addRange(X),te.extend(j.node,j.offset)):(X.setEnd(j.node,j.offset),te.addRange(X))}}}}for(me=[],te=T;te=te.parentNode;)te.nodeType===1&&me.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<me.length;T++){var de=me[T];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}ld=!!cp,up=cp=null}finally{At=g,H.p=d,D.T=c}}r.current=i,On=2}}function kb(){if(On===2){On=0;var r=Gs,i=No,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=D.T,D.T=null;var d=H.p;H.p=2;var g=At;At|=4;try{ub(r,i.alternate,i)}finally{At=g,H.p=d,D.T=c}}On=3}}function Lb(){if(On===4||On===3){On=0,La();var r=Gs,i=No,c=Ro,d=Cb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?On=5:(On=0,No=Gs=null,Ob(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(Ws=null),Ua(c),i=i.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Rn,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=D.T,g=H.p,H.p=2,D.T=null;try{for(var y=r.onRecoverableError,x=0;x<d.length;x++){var T=d[x];y(T.value,{componentStack:T.stack})}}finally{D.T=i,H.p=g}}(Ro&3)!==0&&Vu(),Mr(r),g=r.pendingLanes,(c&4194090)!==0&&(g&42)!==0?r===Qm?Kl++:(Kl=0,Qm=r):Kl=0,Jl(0)}}function Ob(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Rl(i)))}function Vu(r){return Rb(),kb(),Lb(),Pb()}function Pb(){if(On!==5)return!1;var r=Gs,i=$m;$m=0;var c=Ua(Ro),d=D.T,g=H.p;try{H.p=32>c?32:c,D.T=null,c=qm,qm=null;var y=Gs,x=Ro;if(On=0,No=Gs=null,Ro=0,(At&6)!==0)throw Error(n(331));var T=At;if(At|=4,bb(y.current),gb(y,y.current,x,c),At=T,Jl(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Rn,y)}catch{}return!0}finally{H.p=g,D.T=d,Ob(r,i)}}function Bb(r,i,c){i=Ha(c,i),i=Dm(r.stateNode,i,2),r=Os(r,i,2),r!==null&&(kn(r,2),Mr(r))}function zt(r,i,c){if(r.tag===3)Bb(r,r,c);else for(;i!==null;){if(i.tag===3){Bb(i,r,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ws===null||!Ws.has(d))){r=Ha(c,r),c=Yv(2),d=Os(i,c,2),d!==null&&(Fv(c,d,i,r),kn(d,2),Mr(d));break}}i=i.return}}function Jm(r,i,c){var d=r.pingCache;if(d===null){d=r.pingCache=new Vx;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(c)||(jm=!0,g.add(c),r=t2.bind(null,r,i,c),i.then(r,r))}function t2(r,i,c){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Yt===r&&(yt&c)===c&&(nn===4||nn===3&&(yt&62914560)===yt&&300>on()-Zm?(At&2)===0&&ko(r,0):Wm|=c,To===yt&&(To=0)),Mr(r)}function Ub(r,i){i===0&&(i=pa()),r=po(r,i),r!==null&&(kn(r,i),Mr(r))}function n2(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),Ub(r,c)}function a2(r,i){var c=0;switch(r.tag){case 13:var d=r.stateNode,g=r.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(i),Ub(r,c)}function r2(r,i){return vt(r,i)}var Xu=null,Oo=null,ep=!1,Ku=!1,tp=!1,Pi=0;function Mr(r){r!==Oo&&r.next===null&&(Oo===null?Xu=Oo=r:Oo=Oo.next=r),Ku=!0,ep||(ep=!0,i2())}function Jl(r,i){if(!tp&&Ku){tp=!0;do for(var c=!1,d=Xu;d!==null;){if(r!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var x=d.suspendedLanes,T=d.pingedLanes;y=(1<<31-gn(42|r)+1)-1,y&=g&~(x&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Fb(d,y))}else y=yt,y=ut(d,d===Yt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||xn(d,y)||(c=!0,Fb(d,y));d=d.next}while(c);tp=!1}}function s2(){zb()}function zb(){Ku=ep=!1;var r=0;Pi!==0&&(m2()&&(r=Pi),Pi=0);for(var i=on(),c=null,d=Xu;d!==null;){var g=d.next,y=Hb(d,i);y===0?(d.next=null,c===null?Xu=g:c.next=g,g===null&&(Oo=c)):(c=d,(r!==0||(y&3)!==0)&&(Ku=!0)),d=g}Jl(r)}function Hb(r,i){for(var c=r.suspendedLanes,d=r.pingedLanes,g=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var x=31-gn(y),T=1<<x,B=g[x];B===-1?((T&c)===0||(T&d)!==0)&&(g[x]=gr(T,i)):B<=i&&(r.expiredLanes|=T),y&=~T}if(i=Yt,c=yt,c=ut(r,r===i?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,c===0||r===i&&(Tt===2||Tt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&En(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||xn(r,c)){if(i=c&-c,i===r.callbackPriority)return i;switch(d!==null&&En(d),Ua(c)){case 2:case 8:c=mt;break;case 32:c=Vn;break;case 268435456:c=pn;break;default:c=Vn}return d=Yb.bind(null,r),c=vt(c,d),r.callbackPriority=i,r.callbackNode=c,i}return d!==null&&d!==null&&En(d),r.callbackPriority=2,r.callbackNode=null,2}function Yb(r,i){if(On!==0&&On!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Vu()&&r.callbackNode!==c)return null;var d=yt;return d=ut(r,r===Yt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Sb(r,d,i),Hb(r,on()),r.callbackNode!=null&&r.callbackNode===c?Yb.bind(null,r):null)}function Fb(r,i){if(Vu())return null;Sb(r,i,!0)}function i2(){g2(function(){(At&6)!==0?vt(Oa,s2):zb()})}function np(){return Pi===0&&(Pi=yr()),Pi}function jb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:la(""+r)}function Wb(r,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,r.id&&c.setAttribute("form",r.id),i.parentNode.insertBefore(c,i),r=new FormData(r),c.parentNode.removeChild(c),r}function o2(r,i,c,d,g){if(i==="submit"&&c&&c.stateNode===g){var y=jb((g[cn]||null).action),x=d.submitter;x&&(i=(i=x[cn]||null)?jb(i.formAction):x.getAttribute("formAction"),i!==null&&(y=i,x=null));var T=new co("action","action",null,d,g);r.push({event:T,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pi!==0){var B=x?Wb(g,x):new FormData(g);_m(c,{pending:!0,data:B,method:g.method,action:y},null,B)}}else typeof y=="function"&&(T.preventDefault(),B=x?Wb(g,x):new FormData(g),_m(c,{pending:!0,data:B,method:g.method,action:y},y,B))},currentTarget:g}]})}}for(var ap=0;ap<Yh.length;ap++){var rp=Yh[ap],l2=rp.toLowerCase(),c2=rp[0].toUpperCase()+rp.slice(1);or(l2,"on"+c2)}or(S0,"onAnimationEnd"),or(E0,"onAnimationIteration"),or(x0,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(Ix,"onTransitionRun"),or(Dx,"onTransitionStart"),or(Mx,"onTransitionCancel"),or(I0,"onTransitionEnd"),oa("onMouseEnter",["mouseout","mouseover"]),oa("onMouseLeave",["mouseout","mouseover"]),oa("onPointerEnter",["pointerout","pointerover"]),oa("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function Gb(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],g=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var x=d.length-1;0<=x;x--){var T=d[x],B=T.instance,J=T.currentTarget;if(T=T.listener,B!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=J;try{y(g)}catch(ce){zu(ce)}g.currentTarget=null,y=B}else for(x=0;x<d.length;x++){if(T=d[x],B=T.instance,J=T.currentTarget,T=T.listener,B!==y&&g.isPropagationStopped())break e;y=T,g.currentTarget=J;try{y(g)}catch(ce){zu(ce)}g.currentTarget=null,y=B}}}}function ft(r,i){var c=i[Gr];c===void 0&&(c=i[Gr]=new Set);var d=r+"__bubble";c.has(d)||(Zb(i,r,2,!1),c.add(d))}function sp(r,i,c){var d=0;i&&(d|=4),Zb(c,r,d,i)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function ip(r){if(!r[Ju]){r[Ju]=!0,yi.forEach(function(c){c!=="selectionchange"&&(u2.has(c)||sp(c,!1,r),sp(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ju]||(i[Ju]=!0,sp("selectionchange",!1,i))}}function Zb(r,i,c,d){switch(gw(i)){case 2:var g=B2;break;case 8:g=U2;break;default:g=wp}c=g.bind(null,i,c,r),g=void 0,!Ye||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?r.addEventListener(i,c,{capture:!0,passive:g}):r.addEventListener(i,c,!0):g!==void 0?r.addEventListener(i,c,{passive:g}):r.addEventListener(i,c,!1)}function op(r,i,c,d,g){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var T=d.stateNode.containerInfo;if(T===g)break;if(x===4)for(x=d.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;T!==null;){if(x=br(T),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){d=y=x;continue e}T=T.parentNode}}d=d.return}He(function(){var J=y,ce=gt(c),me=[];e:{var ee=D0.get(r);if(ee!==void 0){var te=co,Ze=r;switch(r){case"keypress":if(_a(c)===0)break e;case"keydown":case"keyup":te=rx;break;case"focusin":Ze="focus",te=Rh;break;case"focusout":Ze="blur",te=Rh;break;case"beforeblur":case"afterblur":te=Rh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=ZE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=ox;break;case S0:case E0:case x0:te=QE;break;case I0:te=cx;break;case"scroll":case"scrollend":te=Ah;break;case"wheel":te=dx;break;case"copy":case"cut":case"paste":te=XE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=r0;break;case"toggle":case"beforetoggle":te=hx}var Fe=(i&4)!==0,Pt=!Fe&&(r==="scroll"||r==="scrollend"),V=Fe?ee!==null?ee+"Capture":null:ee;Fe=[];for(var j=J,X;j!==null;){var de=j;if(X=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||X===null||V===null||(de=Ue(j,V),de!=null&&Fe.push(tc(j,de,X))),Pt)break;j=j.return}0<Fe.length&&(ee=new te(ee,Ze,null,c,ce),me.push({event:ee,listeners:Fe}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",te=r==="mouseout"||r==="pointerout",ee&&c!==Sr&&(Ze=c.relatedTarget||c.fromElement)&&(br(Ze)||Ze[ta]))break e;if((te||ee)&&(ee=ce.window===ce?ce:(ee=ce.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(Ze=c.relatedTarget||c.toElement,te=J,Ze=Ze?br(Ze):null,Ze!==null&&(Pt=o(Ze),Fe=Ze.tag,Ze!==Pt||Fe!==5&&Fe!==27&&Fe!==6)&&(Ze=null)):(te=null,Ze=J),te!==Ze)){if(Fe=n0,de="onMouseLeave",V="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(Fe=r0,de="onPointerLeave",V="onPointerEnter",j="pointer"),Pt=te==null?ee:qr(te),X=Ze==null?ee:qr(Ze),ee=new Fe(de,j+"leave",te,c,ce),ee.target=Pt,ee.relatedTarget=X,de=null,br(ce)===J&&(Fe=new Fe(V,j+"enter",Ze,c,ce),Fe.target=X,Fe.relatedTarget=Pt,de=Fe),Pt=de,te&&Ze)t:{for(Fe=te,V=Ze,j=0,X=Fe;X;X=Po(X))j++;for(X=0,de=V;de;de=Po(de))X++;for(;0<j-X;)Fe=Po(Fe),j--;for(;0<X-j;)V=Po(V),X--;for(;j--;){if(Fe===V||V!==null&&Fe===V.alternate)break t;Fe=Po(Fe),V=Po(V)}Fe=null}else Fe=null;te!==null&&$b(me,ee,te,Fe,!1),Ze!==null&&Pt!==null&&$b(me,Pt,Ze,Fe,!0)}}e:{if(ee=J?qr(J):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var ke=f0;else if(u0(ee))if(h0)ke=Sx;else{ke=Cx;var ct=wx}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&Pe(J.elementType)&&(ke=f0):ke=_x;if(ke&&(ke=ke(r,J))){d0(me,ke,c,ce);break e}ct&&ct(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Qe(ee,"number",ee.value)}switch(ct=J?qr(J):window,r){case"focusin":(u0(ct)||ct.contentEditable==="true")&&(fo=ct,Uh=J,Dl=null);break;case"focusout":Dl=Uh=fo=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,C0(me,c,ce);break;case"selectionchange":if(xx)break;case"keydown":case"keyup":C0(me,c,ce)}var ze;if(Lh)e:{switch(r){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else uo?l0(r,c)&&(We="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(We="onCompositionStart");We&&(s0&&c.locale!=="ko"&&(uo||We!=="onCompositionStart"?We==="onCompositionEnd"&&uo&&(ze=Ca()):(rt=ce,Ht="value"in rt?rt.value:rt.textContent,uo=!0)),ct=ed(J,We),0<ct.length&&(We=new a0(We,r,null,c,ce),me.push({event:We,listeners:ct}),ze?We.data=ze:(ze=c0(c),ze!==null&&(We.data=ze)))),(ze=px?gx(r,c):yx(r,c))&&(We=ed(J,"onBeforeInput"),0<We.length&&(ct=new a0("onBeforeInput","beforeinput",null,c,ce),me.push({event:ct,listeners:We}),ct.data=ze)),o2(me,r,J,c,ce)}Gb(me,i)})}function tc(r,i,c){return{instance:r,listener:i,currentTarget:c}}function ed(r,i){for(var c=i+"Capture",d=[];r!==null;){var g=r,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Ue(r,c),g!=null&&d.unshift(tc(r,g,y)),g=Ue(r,i),g!=null&&d.push(tc(r,g,y))),r.tag===3)return d;r=r.return}return[]}function Po(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $b(r,i,c,d,g){for(var y=i._reactName,x=[];c!==null&&c!==d;){var T=c,B=T.alternate,J=T.stateNode;if(T=T.tag,B!==null&&B===d)break;T!==5&&T!==26&&T!==27||J===null||(B=J,g?(J=Ue(c,y),J!=null&&x.unshift(tc(c,J,B))):g||(J=Ue(c,y),J!=null&&x.push(tc(c,J,B)))),c=c.return}x.length!==0&&r.push({event:i,listeners:x})}var d2=/\r\n?/g,f2=/\u0000|\uFFFD/g;function qb(r){return(typeof r=="string"?r:""+r).replace(d2,`
`).replace(f2,"")}function Qb(r,i){return i=qb(i),qb(r)===i}function td(){}function Ot(r,i,c,d,g,y){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Me(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Me(r,""+d);break;case"className":_r(r,"class",d);break;case"tabIndex":_r(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(r,c,d);break;case"style":Te(r,d,y);break;case"data":if(i!=="object"){_r(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=la(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(i!=="input"&&Ot(r,i,"name",g.name,g,null),Ot(r,i,"formEncType",g.formEncType,g,null),Ot(r,i,"formMethod",g.formMethod,g,null),Ot(r,i,"formTarget",g.formTarget,g,null)):(Ot(r,i,"encType",g.encType,g,null),Ot(r,i,"method",g.method,g,null),Ot(r,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=la(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=td);break;case"onScroll":d!=null&&ft("scroll",r);break;case"onScrollEnd":d!=null&&ft("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=la(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":ft("beforetoggle",r),ft("toggle",r),Ts(r,"popover",d);break;case"xlinkActuate":ba(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ba(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ba(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ba(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ba(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ba(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ba(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ba(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ba(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ts(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=pt.get(c)||c,Ts(r,c,d))}}function lp(r,i,c,d,g,y){switch(c){case"style":Te(r,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"children":typeof d=="string"?Me(r,d):(typeof d=="number"||typeof d=="bigint")&&Me(r,""+d);break;case"onScroll":d!=null&&ft("scroll",r);break;case"onScrollEnd":d!=null&&ft("scrollend",r);break;case"onClick":d!=null&&(r.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vi.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),y=r[cn]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(i,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(i,d,g);break e}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Ts(r,c,d)}}}function Pn(r,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",r),ft("load",r);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var x=c[y];if(x!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:Ot(r,i,y,x,c,null)}}g&&Ot(r,i,"srcSet",c.srcSet,c,null),d&&Ot(r,i,"src",c.src,c,null);return;case"input":ft("invalid",r);var T=y=x=g=null,B=null,J=null;for(d in c)if(c.hasOwnProperty(d)){var ce=c[d];if(ce!=null)switch(d){case"name":g=ce;break;case"type":x=ce;break;case"checked":B=ce;break;case"defaultChecked":J=ce;break;case"value":y=ce;break;case"defaultValue":T=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(137,i));break;default:Ot(r,i,d,ce,c,null)}}Re(r,y,T,B,J,x,g,!1),N(r);return;case"select":ft("invalid",r),d=x=y=null;for(g in c)if(c.hasOwnProperty(g)&&(T=c[g],T!=null))switch(g){case"value":y=T;break;case"defaultValue":x=T;break;case"multiple":d=T;default:Ot(r,i,g,T,c,null)}i=y,c=x,r.multiple=!!d,i!=null?Be(r,!!d,i,!1):c!=null&&Be(r,!!d,c,!0);return;case"textarea":ft("invalid",r),y=g=d=null;for(x in c)if(c.hasOwnProperty(x)&&(T=c[x],T!=null))switch(x){case"value":d=T;break;case"defaultValue":g=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:Ot(r,i,x,T,c,null)}Oe(r,d,g,y),N(r);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(d=c[B],d!=null))switch(B){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ot(r,i,B,d,c,null)}return;case"dialog":ft("beforetoggle",r),ft("toggle",r),ft("cancel",r),ft("close",r);break;case"iframe":case"object":ft("load",r);break;case"video":case"audio":for(d=0;d<ec.length;d++)ft(ec[d],r);break;case"image":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"embed":case"source":case"link":ft("error",r),ft("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in c)if(c.hasOwnProperty(J)&&(d=c[J],d!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:Ot(r,i,J,d,c,null)}return;default:if(Pe(i)){for(ce in c)c.hasOwnProperty(ce)&&(d=c[ce],d!==void 0&&lp(r,i,ce,d,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(d=c[T],d!=null&&Ot(r,i,T,d,c,null))}function h2(r,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,T=null,B=null,J=null,ce=null;for(te in c){var me=c[te];if(c.hasOwnProperty(te)&&me!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":B=me;default:d.hasOwnProperty(te)||Ot(r,i,te,null,d,me)}}for(var ee in d){var te=d[ee];if(me=c[ee],d.hasOwnProperty(ee)&&(te!=null||me!=null))switch(ee){case"type":y=te;break;case"name":g=te;break;case"checked":J=te;break;case"defaultChecked":ce=te;break;case"value":x=te;break;case"defaultValue":T=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,i));break;default:te!==me&&Ot(r,i,ee,te,d,me)}}Ie(r,x,T,B,J,ce,y,g);return;case"select":te=x=T=ee=null;for(y in c)if(B=c[y],c.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":te=B;default:d.hasOwnProperty(y)||Ot(r,i,y,null,d,B)}for(g in d)if(y=d[g],B=c[g],d.hasOwnProperty(g)&&(y!=null||B!=null))switch(g){case"value":ee=y;break;case"defaultValue":T=y;break;case"multiple":x=y;default:y!==B&&Ot(r,i,g,y,d,B)}i=T,c=x,d=te,ee!=null?Be(r,!!c,ee,!1):!!d!=!!c&&(i!=null?Be(r,!!c,i,!0):Be(r,!!c,c?[]:"",!1));return;case"textarea":te=ee=null;for(T in c)if(g=c[T],c.hasOwnProperty(T)&&g!=null&&!d.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ot(r,i,T,null,d,g)}for(x in d)if(g=d[x],y=c[x],d.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":ee=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&Ot(r,i,x,g,d,y)}Xe(r,ee,te);return;case"option":for(var Ze in c)if(ee=c[Ze],c.hasOwnProperty(Ze)&&ee!=null&&!d.hasOwnProperty(Ze))switch(Ze){case"selected":r.selected=!1;break;default:Ot(r,i,Ze,null,d,ee)}for(B in d)if(ee=d[B],te=c[B],d.hasOwnProperty(B)&&ee!==te&&(ee!=null||te!=null))switch(B){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Ot(r,i,B,ee,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in c)ee=c[Fe],c.hasOwnProperty(Fe)&&ee!=null&&!d.hasOwnProperty(Fe)&&Ot(r,i,Fe,null,d,ee);for(J in d)if(ee=d[J],te=c[J],d.hasOwnProperty(J)&&ee!==te&&(ee!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,i));break;default:Ot(r,i,J,ee,d,te)}return;default:if(Pe(i)){for(var Pt in c)ee=c[Pt],c.hasOwnProperty(Pt)&&ee!==void 0&&!d.hasOwnProperty(Pt)&&lp(r,i,Pt,void 0,d,ee);for(ce in d)ee=d[ce],te=c[ce],!d.hasOwnProperty(ce)||ee===te||ee===void 0&&te===void 0||lp(r,i,ce,ee,d,te);return}}for(var V in c)ee=c[V],c.hasOwnProperty(V)&&ee!=null&&!d.hasOwnProperty(V)&&Ot(r,i,V,null,d,ee);for(me in d)ee=d[me],te=c[me],!d.hasOwnProperty(me)||ee===te||ee==null&&te==null||Ot(r,i,me,ee,d,te)}var cp=null,up=null;function nd(r){return r.nodeType===9?r:r.ownerDocument}function Vb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xb(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function dp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fp=null;function m2(){var r=window.event;return r&&r.type==="popstate"?r===fp?!1:(fp=r,!0):(fp=null,!1)}var Kb=typeof setTimeout=="function"?setTimeout:void 0,p2=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,g2=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(r){return Jb.resolve(null).then(r).catch(y2)}:Kb;function y2(r){setTimeout(function(){throw r})}function $s(r){return r==="head"}function ew(r,i){var c=i,d=0,g=0;do{var y=c.nextSibling;if(r.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<d&&8>d){c=d;var x=r.ownerDocument;if(c&1&&nc(x.documentElement),c&2&&nc(x.body),c&4)for(c=x.head,nc(c),x=c.firstChild;x;){var T=x.nextSibling,B=x.nodeName;x[Zr]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||c.removeChild(x),x=T}}if(g===0){r.removeChild(y),uc(i);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=y}while(c);uc(i)}function hp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":hp(c),gi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function v2(r,i,c,d){for(;r.nodeType===1;){var g=c;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Zr])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=cr(r.nextSibling),r===null)break}return null}function b2(r,i,c){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=cr(r.nextSibling),r===null))return null;return r}function mp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function w2(r,i){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function cr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var pp=null;function tw(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}function nw(r,i,c){switch(i=nd(c),r){case"html":if(r=i.documentElement,!r)throw Error(n(452));return r;case"head":if(r=i.head,!r)throw Error(n(453));return r;case"body":if(r=i.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function nc(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);gi(r)}var Za=new Map,aw=new Set;function ad(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=H.d;H.d={f:C2,r:_2,D:S2,C:E2,L:x2,m:I2,X:M2,S:D2,M:A2};function C2(){var r=ds.f(),i=qu();return r||i}function _2(r){var i=$r(r);i!==null&&i.tag===5&&i.type==="form"?Sv(i):ds.r(r)}var Bo=typeof document>"u"?null:document;function rw(r,i,c){var d=Bo;if(d&&typeof i=="string"&&i){var g=De(i);g='link[rel="'+r+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),aw.has(g)||(aw.add(g),r={rel:r,crossOrigin:c,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),Pn(i,"link",r),jt(i),d.head.appendChild(i)))}}function S2(r){ds.D(r),rw("dns-prefetch",r,null)}function E2(r,i){ds.C(r,i),rw("preconnect",r,i)}function x2(r,i,c){ds.L(r,i,c);var d=Bo;if(d&&r&&i){var g='link[rel="preload"][as="'+De(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+De(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+De(c.imageSizes)+'"]')):g+='[href="'+De(r)+'"]';var y=g;switch(i){case"style":y=Uo(r);break;case"script":y=zo(r)}Za.has(y)||(r=p({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:r,as:i},c),Za.set(y,r),d.querySelector(g)!==null||i==="style"&&d.querySelector(ac(y))||i==="script"&&d.querySelector(rc(y))||(i=d.createElement("link"),Pn(i,"link",r),jt(i),d.head.appendChild(i)))}}function I2(r,i){ds.m(r,i);var c=Bo;if(c&&r){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+De(d)+'"][href="'+De(r)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=zo(r)}if(!Za.has(y)&&(r=p({rel:"modulepreload",href:r},i),Za.set(y,r),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(rc(y)))return}d=c.createElement("link"),Pn(d,"link",r),jt(d),c.head.appendChild(d)}}}function D2(r,i,c){ds.S(r,i,c);var d=Bo;if(d&&r){var g=va(d).hoistableStyles,y=Uo(r);i=i||"default";var x=g.get(y);if(!x){var T={loading:0,preload:null};if(x=d.querySelector(ac(y)))T.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":i},c),(c=Za.get(y))&&gp(r,c);var B=x=d.createElement("link");jt(B),Pn(B,"link",r),B._p=new Promise(function(J,ce){B.onload=J,B.onerror=ce}),B.addEventListener("load",function(){T.loading|=1}),B.addEventListener("error",function(){T.loading|=2}),T.loading|=4,rd(x,i,d)}x={type:"stylesheet",instance:x,count:1,state:T},g.set(y,x)}}}function M2(r,i){ds.X(r,i);var c=Bo;if(c&&r){var d=va(c).hoistableScripts,g=zo(r),y=d.get(g);y||(y=c.querySelector(rc(g)),y||(r=p({src:r,async:!0},i),(i=Za.get(g))&&yp(r,i),y=c.createElement("script"),jt(y),Pn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function A2(r,i){ds.M(r,i);var c=Bo;if(c&&r){var d=va(c).hoistableScripts,g=zo(r),y=d.get(g);y||(y=c.querySelector(rc(g)),y||(r=p({src:r,async:!0,type:"module"},i),(i=Za.get(g))&&yp(r,i),y=c.createElement("script"),jt(y),Pn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function sw(r,i,c,d){var g=(g=ye.current)?ad(g):null;if(!g)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Uo(c.href),c=va(g).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Uo(c.href);var y=va(g).hoistableStyles,x=y.get(r);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,x),(y=g.querySelector(ac(r)))&&!y._p&&(x.instance=y,x.state.loading=5),Za.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Za.set(r,c),y||T2(g,r,c,x.state))),i&&d===null)throw Error(n(528,""));return x}if(i&&d!==null)throw Error(n(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=zo(c),c=va(g).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Uo(r){return'href="'+De(r)+'"'}function ac(r){return'link[rel="stylesheet"]['+r+"]"}function iw(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function T2(r,i,c,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Pn(i,"link",c),jt(i),r.head.appendChild(i))}function zo(r){return'[src="'+De(r)+'"]'}function rc(r){return"script[async]"+r}function ow(r,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+De(c.href)+'"]');if(d)return i.instance=d,jt(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),jt(d),Pn(d,"style",g),rd(d,c.precedence,r),i.instance=d;case"stylesheet":g=Uo(c.href);var y=r.querySelector(ac(g));if(y)return i.state.loading|=4,i.instance=y,jt(y),y;d=iw(c),(g=Za.get(g))&&gp(d,g),y=(r.ownerDocument||r).createElement("link"),jt(y);var x=y;return x._p=new Promise(function(T,B){x.onload=T,x.onerror=B}),Pn(y,"link",d),i.state.loading|=4,rd(y,c.precedence,r),i.instance=y;case"script":return y=zo(c.src),(g=r.querySelector(rc(y)))?(i.instance=g,jt(g),g):(d=c,(g=Za.get(y))&&(d=p({},c),yp(d,g)),r=r.ownerDocument||r,g=r.createElement("script"),jt(g),Pn(g,"link",d),r.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,rd(d,c.precedence,r));return i.instance}function rd(r,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,x=0;x<d.length;x++){var T=d[x];if(T.dataset.precedence===i)y=T;else if(y!==g)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(r,i.firstChild))}function gp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function yp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var sd=null;function lw(r,i,c){if(sd===null){var d=new Map,g=sd=new Map;g.set(c,d)}else g=sd,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),g=0;g<c.length;g++){var y=c[g];if(!(y[Zr]||y[ln]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(i)||"";x=r+x;var T=d.get(x);T?T.push(y):d.set(x,[y])}}return d}function cw(r,i,c){r=r.ownerDocument||r,r.head.insertBefore(c,i==="title"?r.querySelector("head > title"):null)}function N2(r,i,c){if(c===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function uw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var sc=null;function R2(){}function k2(r,i,c){if(sc===null)throw Error(n(475));var d=sc;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=Uo(c.href),y=r.querySelector(ac(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=id.bind(d),r.then(d,d)),i.state.loading|=4,i.instance=y,jt(y);return}y=r.ownerDocument||r,c=iw(c),(g=Za.get(g))&&gp(c,g),y=y.createElement("link"),jt(y);var x=y;x._p=new Promise(function(T,B){x.onload=T,x.onerror=B}),Pn(y,"link",c),i.instance=y}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(d.count++,i=id.bind(d),r.addEventListener("load",i),r.addEventListener("error",i))}}function L2(){if(sc===null)throw Error(n(475));var r=sc;return r.stylesheets&&r.count===0&&vp(r,r.stylesheets),0<r.count?function(i){var c=setTimeout(function(){if(r.stylesheets&&vp(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(c)}}:null}function id(){if(this.count--,this.count===0){if(this.stylesheets)vp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var od=null;function vp(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,od=new Map,i.forEach(O2,r),od=null,id.call(r))}function O2(r,i){if(!(i.state.loading&4)){var c=od.get(r);if(c)var d=c.get(null);else{c=new Map,od.set(r,c);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),d=x)}d&&c.set(null,d)}g=i.instance,x=g.getAttribute("data-precedence"),y=c.get(x)||d,y===d&&c.set(null,g),c.set(x,g),this.count++,d=id.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),i.state.loading|=4}}var ic={$$typeof:A,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function P2(r,i,c,d,g,y,x,T){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lt(0),this.hiddenUpdates=lt(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function dw(r,i,c,d,g,y,x,T,B,J,ce,me){return r=new P2(r,i,c,x,T,B,J,me),i=1,y===!0&&(i|=24),y=Ea(3,null,null,i),r.current=y,y.stateNode=r,i=Jh(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:i},am(y),r}function fw(r){return r?(r=go,r):go}function hw(r,i,c,d,g,y){g=fw(g),d.context===null?d.context=g:d.pendingContext=g,d=Ls(i),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Os(r,d,i),c!==null&&(Aa(c,r,i),Pl(c,r,i))}function mw(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function bp(r,i){mw(r,i),(r=r.alternate)&&mw(r,i)}function pw(r){if(r.tag===13){var i=po(r,67108864);i!==null&&Aa(i,r,67108864),bp(r,67108864)}}var ld=!0;function B2(r,i,c,d){var g=D.T;D.T=null;var y=H.p;try{H.p=2,wp(r,i,c,d)}finally{H.p=y,D.T=g}}function U2(r,i,c,d){var g=D.T;D.T=null;var y=H.p;try{H.p=8,wp(r,i,c,d)}finally{H.p=y,D.T=g}}function wp(r,i,c,d){if(ld){var g=Cp(d);if(g===null)op(r,i,d,cd,c),yw(r,d);else if(H2(g,r,i,c,d))d.stopPropagation();else if(yw(r,d),i&4&&-1<z2.indexOf(r)){for(;g!==null;){var y=$r(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Pa(y.pendingLanes);if(x!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;x;){var B=1<<31-gn(x);T.entanglements[1]|=B,x&=~B}Mr(y),(At&6)===0&&(Zu=on()+500,Jl(0))}}break;case 13:T=po(y,2),T!==null&&Aa(T,y,2),qu(),bp(y,2)}if(y=Cp(d),y===null&&op(r,i,d,cd,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else op(r,i,d,null,c)}}function Cp(r){return r=gt(r),_p(r)}var cd=null;function _p(r){if(cd=null,r=br(r),r!==null){var i=o(r);if(i===null)r=null;else{var c=i.tag;if(c===13){if(r=l(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return cd=r,null}function gw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qn()){case Oa:return 2;case mt:return 8;case Vn:case ia:return 32;case pn:return 268435456;default:return 32}default:return 32}}var Sp=!1,qs=null,Qs=null,Vs=null,oc=new Map,lc=new Map,Xs=[],z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yw(r,i){switch(r){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(i.pointerId)}}function cc(r,i,c,d,g,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},i!==null&&(i=$r(i),i!==null&&pw(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function H2(r,i,c,d,g){switch(i){case"focusin":return qs=cc(qs,r,i,c,d,g),!0;case"dragenter":return Qs=cc(Qs,r,i,c,d,g),!0;case"mouseover":return Vs=cc(Vs,r,i,c,d,g),!0;case"pointerover":var y=g.pointerId;return oc.set(y,cc(oc.get(y)||null,r,i,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,lc.set(y,cc(lc.get(y)||null,r,i,c,d,g)),!0}return!1}function vw(r){var i=br(r.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=l(c),i!==null){r.blockedOn=i,wl(r.priority,function(){if(c.tag===13){var d=Ma();d=rr(d);var g=po(c,d);g!==null&&Aa(g,c,d),bp(c,d)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ud(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=Cp(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);Sr=d,c.target.dispatchEvent(d),Sr=null}else return i=$r(c),i!==null&&pw(i),r.blockedOn=c,!1;i.shift()}return!0}function bw(r,i,c){ud(r)&&c.delete(i)}function Y2(){Sp=!1,qs!==null&&ud(qs)&&(qs=null),Qs!==null&&ud(Qs)&&(Qs=null),Vs!==null&&ud(Vs)&&(Vs=null),oc.forEach(bw),lc.forEach(bw)}function dd(r,i){r.blockedOn===i&&(r.blockedOn=null,Sp||(Sp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y2)))}var fd=null;function ww(r){fd!==r&&(fd=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fd===r&&(fd=null);for(var i=0;i<r.length;i+=3){var c=r[i],d=r[i+1],g=r[i+2];if(typeof d!="function"){if(_p(d||c)===null)continue;break}var y=$r(c);y!==null&&(r.splice(i,3),i-=3,_m(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function uc(r){function i(B){return dd(B,r)}qs!==null&&dd(qs,r),Qs!==null&&dd(Qs,r),Vs!==null&&dd(Vs,r),oc.forEach(i),lc.forEach(i);for(var c=0;c<Xs.length;c++){var d=Xs[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Xs.length&&(c=Xs[0],c.blockedOn===null);)vw(c),c.blockedOn===null&&Xs.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],x=g[cn]||null;if(typeof y=="function")x||ww(c);else if(x){var T=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[cn]||null)T=x.formAction;else if(_p(g)!==null)continue}else T=x.action;typeof T=="function"?c[d+1]=T:(c.splice(d,3),d-=3),ww(c)}}}function Ep(r){this._internalRoot=r}hd.prototype.render=Ep.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));var c=i.current,d=Ma();hw(c,d,r,i,null,null)},hd.prototype.unmount=Ep.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;hw(r.current,2,null,r,null,null),qu(),i[ta]=null}};function hd(r){this._internalRoot=r}hd.prototype.unstable_scheduleHydration=function(r){if(r){var i=pi();r={blockedOn:null,target:r,priority:i};for(var c=0;c<Xs.length&&i!==0&&i<Xs[c].priority;c++);Xs.splice(c,0,r),c===0&&vw(r)}};var Cw=a.version;if(Cw!=="19.1.0")throw Error(n(527,Cw,"19.1.0"));H.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=h(i),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var F2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Rn=md.inject(F2),en=md}catch{}}return dc.createRoot=function(r,i){if(!s(r))throw Error(n(299));var c=!1,d="",g=Bv,y=Uv,x=zv,T=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=dw(r,1,!1,null,null,c,d,g,y,x,T,null),r[ta]=i.current,ip(r),new Ep(i)},dc.hydrateRoot=function(r,i,c){if(!s(r))throw Error(n(299));var d=!1,g="",y=Bv,x=Uv,T=zv,B=null,J=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(B=c.unstable_transitionCallbacks),c.formState!==void 0&&(J=c.formState)),i=dw(r,1,!0,i,c??null,d,g,y,x,T,B,J),i.context=fw(null),c=i.current,d=Ma(),d=rr(d),g=Ls(d),g.callback=null,Os(c,g,d),c=d,i.current.lanes=c,kn(i,c),Mr(i),r[ta]=i.current,ip(r),new hd(i)},dc.version="19.1.0",dc}var Aw;function K2(){if(Aw)return Ip.exports;Aw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ip.exports=X2(),Ip.exports}var J2=K2();const eI=iy(J2);var fc={},Tw;function tI(){if(Tw)return fc;Tw=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.parse=l,fc.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function l(b,_){const C=new o,S=b.length;if(S<2)return C;const E=(_==null?void 0:_.decode)||p;let I=0;do{const M=b.indexOf("=",I);if(M===-1)break;const A=b.indexOf(";",I),k=A===-1?S:A;if(M>k){I=b.lastIndexOf(";",M-1)+1;continue}const O=u(b,I,M),U=h(b,M,O),q=b.slice(O,U);if(C[q]===void 0){let Y=u(b,M+1,k),$=h(b,k,Y);const K=E(b.slice(Y,$));C[q]=K}I=k+1}while(I<S);return C}function u(b,_,C){do{const S=b.charCodeAt(_);if(S!==32&&S!==9)return _}while(++_<C);return C}function h(b,_,C){for(;_>C;){const S=b.charCodeAt(--_);if(S!==32&&S!==9)return _+1}return C}function m(b,_,C){const S=(C==null?void 0:C.encode)||encodeURIComponent;if(!t.test(b))throw new TypeError(`argument name is invalid: ${b}`);const E=S(_);if(!a.test(E))throw new TypeError(`argument val is invalid: ${_}`);let I=b+"="+E;if(!C)return I;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);I+="; Max-Age="+C.maxAge}if(C.domain){if(!e.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);I+="; Domain="+C.domain}if(C.path){if(!n.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);I+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);I+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(I+="; HttpOnly"),C.secure&&(I+="; Secure"),C.partitioned&&(I+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return I}function p(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function v(b){return s.call(b)==="[object Date]"}return fc}tI();var Nw="popstate";function nI(t={}){function a(s,o){let{pathname:l="/",search:u="",hash:h=""}=no(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),bg("",{pathname:l,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(s,o){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let h=s.location.href,m=h.indexOf("#");u=m===-1?h:h.slice(0,m)}return u+"#"+(typeof o=="string"?o:Fc(o))}function n(s,o){ka(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return rI(a,e,n,t)}function qt(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function ka(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function aI(){return Math.random().toString(36).substring(2,10)}function Rw(t,a){return{usr:t.state,key:t.key,idx:a}}function bg(t,a,e=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?no(a):a,state:e,key:a&&a.key||n||aI()}}function Fc({pathname:t="/",search:a="",hash:e=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function no(t){let a={};if(t){let e=t.indexOf("#");e>=0&&(a.hash=t.substring(e),t=t.substring(0,e));let n=t.indexOf("?");n>=0&&(a.search=t.substring(n),t=t.substring(0,n)),t&&(a.pathname=t)}return a}function rI(t,a,e,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,l=s.history,u="POP",h=null,m=p();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function p(){return(l.state||{idx:null}).idx}function v(){u="POP";let E=p(),I=E==null?null:E-m;m=E,h&&h({action:u,location:S.location,delta:I})}function b(E,I){u="PUSH";let M=bg(S.location,E,I);e&&e(M,E),m=p()+1;let A=Rw(M,m),k=S.createHref(M);try{l.pushState(A,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(k)}o&&h&&h({action:u,location:S.location,delta:1})}function _(E,I){u="REPLACE";let M=bg(S.location,E,I);e&&e(M,E),m=p();let A=Rw(M,m),k=S.createHref(M);l.replaceState(A,"",k),o&&h&&h({action:u,location:S.location,delta:0})}function C(E){return sI(E)}let S={get action(){return u},get location(){return t(s,l)},listen(E){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Nw,v),h=E,()=>{s.removeEventListener(Nw,v),h=null}},createHref(E){return a(s,E)},createURL:C,encodeLocation(E){let I=C(E);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:b,replace:_,go(E){return l.go(E)}};return S}function sI(t,a=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),qt(e,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Fc(t);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function $C(t,a,e="/"){return iI(t,a,e,!1)}function iI(t,a,e,n){let s=typeof a=="string"?no(a):a,o=Ss(s.pathname||"/",e);if(o==null)return null;let l=qC(t);oI(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let m=vI(o);u=gI(l[h],m,n)}return u}function qC(t,a=[],e=[],n=""){let s=(o,l,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(qt(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let m=gs([n,h.relativePath]),p=e.concat(h);o.children&&o.children.length>0&&(qt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),qC(o.children,a,p,m)),!(o.path==null&&!o.index)&&a.push({path:m,score:mI(m,o.index),routesMeta:p})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let h of QC(o.path))s(o,l,h)}),a}function QC(t){let a=t.split("/");if(a.length===0)return[];let[e,...n]=a,s=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let l=QC(n.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&u.push(...l),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function oI(t){t.sort((a,e)=>a.score!==e.score?e.score-a.score:pI(a.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var lI=/^:[\w-]+$/,cI=3,uI=2,dI=1,fI=10,hI=-2,kw=t=>t==="*";function mI(t,a){let e=t.split("/"),n=e.length;return e.some(kw)&&(n+=hI),a&&(n+=uI),e.filter(s=>!kw(s)).reduce((s,o)=>s+(lI.test(o)?cI:o===""?dI:fI),n)}function pI(t,a){return t.length===a.length&&t.slice(0,-1).every((n,s)=>n===a[s])?t[t.length-1]-a[a.length-1]:0}function gI(t,a,e=!1){let{routesMeta:n}=t,s={},o="/",l=[];for(let u=0;u<n.length;++u){let h=n[u],m=u===n.length-1,p=o==="/"?a:a.slice(o.length)||"/",v=tf({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),b=h.route;if(!v&&m&&e&&!n[n.length-1].route.index&&(v=tf({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gs([o,v.pathname]),pathnameBase:_I(gs([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=gs([o,v.pathnameBase]))}return l}function tf(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,n]=yI(t.path,t.caseSensitive,t.end),s=a.match(e);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:p,isOptional:v},b)=>{if(p==="*"){let C=u[b]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const _=u[b];return v&&!_?m[p]=void 0:m[p]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:t}}function yI(t,a=!1,e=!0){ka(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,a?void 0:"i"),n]}function vI(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return ka(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Ss(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let e=a.endsWith("/")?a.length-1:a.length,n=t.charAt(e);return n&&n!=="/"?null:t.slice(e)||"/"}function bI(t,a="/"){let{pathname:e,search:n="",hash:s=""}=typeof t=="string"?no(t):t;return{pathname:e?e.startsWith("/")?e:wI(e,a):a,search:SI(n),hash:EI(s)}}function wI(t,a){let e=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Tp(t,a,e,n){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(t){return t.filter((a,e)=>e===0||a.route.path&&a.route.path.length>0)}function ly(t){let a=CI(t);return a.map((e,n)=>n===a.length-1?e.pathname:e.pathnameBase)}function cy(t,a,e,n=!1){let s;typeof t=="string"?s=no(t):(s={...t},qt(!s.pathname||!s.pathname.includes("?"),Tp("?","pathname","search",s)),qt(!s.pathname||!s.pathname.includes("#"),Tp("#","pathname","hash",s)),qt(!s.search||!s.search.includes("#"),Tp("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=e;else{let v=a.length-1;if(!n&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),v-=1;s.pathname=b.join("/")}u=v>=0?a[v]:"/"}let h=bI(s,u),m=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var gs=t=>t.join("/").replace(/\/\/+/g,"/"),_I=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var VC=["POST","PUT","PATCH","DELETE"];new Set(VC);var II=["GET",...VC];new Set(II);var ml=w.createContext(null);ml.displayName="DataRouter";var th=w.createContext(null);th.displayName="DataRouterState";var XC=w.createContext({isTransitioning:!1});XC.displayName="ViewTransition";var DI=w.createContext(new Map);DI.displayName="Fetchers";var MI=w.createContext(null);MI.displayName="Await";var hr=w.createContext(null);hr.displayName="Navigation";var Kc=w.createContext(null);Kc.displayName="Location";var Yr=w.createContext({outlet:null,matches:[],isDataRoute:!1});Yr.displayName="Route";var uy=w.createContext(null);uy.displayName="RouteError";function AI(t,{relative:a}={}){qt(pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=w.useContext(hr),{hash:s,pathname:o,search:l}=Jc(t,{relative:a}),u=o;return e!=="/"&&(u=o==="/"?e:gs([e,o])),n.createHref({pathname:u,search:l,hash:s})}function pl(){return w.useContext(Kc)!=null}function Is(){return qt(pl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Kc).location}var KC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JC(t){w.useContext(hr).static||w.useLayoutEffect(t)}function ao(){let{isDataRoute:t}=w.useContext(Yr);return t?FI():TI()}function TI(){qt(pl(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(ml),{basename:a,navigator:e}=w.useContext(hr),{matches:n}=w.useContext(Yr),{pathname:s}=Is(),o=JSON.stringify(ly(n)),l=w.useRef(!1);return JC(()=>{l.current=!0}),w.useCallback((h,m={})=>{if(ka(l.current,KC),!l.current)return;if(typeof h=="number"){e.go(h);return}let p=cy(h,JSON.parse(o),s,m.relative==="path");t==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:gs([a,p.pathname])),(m.replace?e.replace:e.push)(p,m.state,m)},[a,e,o,s,t])}w.createContext(null);function Jc(t,{relative:a}={}){let{matches:e}=w.useContext(Yr),{pathname:n}=Is(),s=JSON.stringify(ly(e));return w.useMemo(()=>cy(t,JSON.parse(s),n,a==="path"),[t,s,n,a])}function NI(t,a){return e_(t,a)}function e_(t,a,e,n){var I;qt(pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(hr),{matches:o}=w.useContext(Yr),l=o[o.length-1],u=l?l.params:{},h=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let M=p&&p.path||"";t_(h,!p||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let v=Is(),b;if(a){let M=typeof a=="string"?no(a):a;qt(m==="/"||((I=M.pathname)==null?void 0:I.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${M.pathname}" was given in the \`location\` prop.`),b=M}else b=v;let _=b.pathname||"/",C=_;if(m!=="/"){let M=m.replace(/^\//,"").split("/");C="/"+_.replace(/^\//,"").split("/").slice(M.length).join("/")}let S=$C(t,{pathname:C});ka(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ka(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=PI(S&&S.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:gs([m,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?m:gs([m,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,e,n);return a&&E?w.createElement(Kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},E):E}function RI(){let t=YI(),a=xI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},a),e?w.createElement("pre",{style:s},e):null,l)}var kI=w.createElement(RI,null),LI=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?w.createElement(Yr.Provider,{value:this.props.routeContext},w.createElement(uy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OI({routeContext:t,match:a,children:e}){let n=w.useContext(ml);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),w.createElement(Yr.Provider,{value:t},e)}function PI(t,a=[],e=null,n=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(a.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let s=t,o=e==null?void 0:e.errors;if(o!=null){let h=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);qt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,u=-1;if(e)for(let h=0;h<s.length;h++){let m=s[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:p,errors:v}=e,b=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((h,m,p)=>{let v,b=!1,_=null,C=null;e&&(v=o&&m.route.id?o[m.route.id]:void 0,_=m.route.errorElement||kI,l&&(u<0&&p===0?(t_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):u===p&&(b=!0,C=m.route.hydrateFallbackElement||null)));let S=a.concat(s.slice(0,p+1)),E=()=>{let I;return v?I=_:b?I=C:m.route.Component?I=w.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=h,w.createElement(OI,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:e!=null},children:I})};return e&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(LI,{location:e.location,revalidation:e.revalidation,component:_,error:v,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}function dy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BI(t){let a=w.useContext(ml);return qt(a,dy(t)),a}function UI(t){let a=w.useContext(th);return qt(a,dy(t)),a}function zI(t){let a=w.useContext(Yr);return qt(a,dy(t)),a}function fy(t){let a=zI(t),e=a.matches[a.matches.length-1];return qt(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function HI(){return fy("useRouteId")}function YI(){var n;let t=w.useContext(uy),a=UI("useRouteError"),e=fy("useRouteError");return t!==void 0?t:(n=a.errors)==null?void 0:n[e]}function FI(){let{router:t}=BI("useNavigate"),a=fy("useNavigate"),e=w.useRef(!1);return JC(()=>{e.current=!0}),w.useCallback(async(s,o={})=>{ka(e.current,KC),e.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:a,...o}))},[t,a])}var Lw={};function t_(t,a,e){!a&&!Lw[t]&&(Lw[t]=!0,ka(!1,e))}w.memo(jI);function jI({routes:t,future:a,state:e}){return e_(t,void 0,e,a)}function pd({to:t,replace:a,state:e,relative:n}){qt(pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(hr);ka(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(Yr),{pathname:l}=Is(),u=ao(),h=cy(t,ly(o),l,n==="path"),m=JSON.stringify(h);return w.useEffect(()=>{u(JSON.parse(m),{replace:a,state:e,relative:n})},[u,m,n,a,e]),null}function Tr(t){qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WI({basename:t="/",children:a=null,location:e,navigationType:n="POP",navigator:s,static:o=!1}){qt(!pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof e=="string"&&(e=no(e));let{pathname:h="/",search:m="",hash:p="",state:v=null,key:b="default"}=e,_=w.useMemo(()=>{let C=Ss(h,l);return C==null?null:{location:{pathname:C,search:m,hash:p,state:v,key:b},navigationType:n}},[l,h,m,p,v,b,n]);return ka(_!=null,`<Router basename="${l}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:w.createElement(hr.Provider,{value:u},w.createElement(Kc.Provider,{children:a,value:_}))}function Ow({children:t,location:a}){return NI(wg(t),a)}function wg(t,a=[]){let e=[];return w.Children.forEach(t,(n,s)=>{if(!w.isValidElement(n))return;let o=[...a,s];if(n.type===w.Fragment){e.push.apply(e,wg(n.props.children,o));return}qt(n.type===Tr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=wg(n.props.children,o)),e.push(l)}),e}var Ud="get",zd="application/x-www-form-urlencoded";function nh(t){return t!=null&&typeof t.tagName=="string"}function GI(t){return nh(t)&&t.tagName.toLowerCase()==="button"}function ZI(t){return nh(t)&&t.tagName.toLowerCase()==="form"}function $I(t){return nh(t)&&t.tagName.toLowerCase()==="input"}function qI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QI(t,a){return t.button===0&&(!a||a==="_self")&&!qI(t)}function Cg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,e)=>{let n=t[e];return a.concat(Array.isArray(n)?n.map(s=>[e,s]):[[e,n]])},[]))}function VI(t,a){let e=Cg(t);return a&&a.forEach((n,s)=>{e.has(s)||a.getAll(s).forEach(o=>{e.append(s,o)})}),e}var gd=null;function XI(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var KI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Np(t){return t!=null&&!KI.has(t)?(ka(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zd}"`),null):t}function JI(t,a){let e,n,s,o,l;if(ZI(t)){let u=t.getAttribute("action");n=u?Ss(u,a):null,e=t.getAttribute("method")||Ud,s=Np(t.getAttribute("enctype"))||zd,o=new FormData(t)}else if(GI(t)||$I(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||u.getAttribute("action");if(n=h?Ss(h,a):null,e=t.getAttribute("formmethod")||u.getAttribute("method")||Ud,s=Np(t.getAttribute("formenctype"))||Np(u.getAttribute("enctype"))||zd,o=new FormData(u,t),!XI()){let{name:m,type:p,value:v}=t;if(p==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,v)}}else{if(nh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Ud,n=null,s=zd,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:n,method:e.toLowerCase(),encType:s,formData:o,body:l}}function hy(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function eD(t,a){if(t.id in a)return a[t.id];try{let e=await import(t.module);return a[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function nD(t,a,e){let n=await Promise.all(t.map(async s=>{let o=a.routes[s.route.id];if(o){let l=await eD(o,e);return l.links?l.links():[]}return[]}));return iD(n.flat(1).filter(tD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pw(t,a,e,n,s,o){let l=(h,m)=>e[m]?h.route.id!==e[m].route.id:!0,u=(h,m)=>{var p;return e[m].pathname!==h.pathname||((p=e[m].route.path)==null?void 0:p.endsWith("*"))&&e[m].params["*"]!==h.params["*"]};return o==="assets"?a.filter((h,m)=>l(h,m)||u(h,m)):o==="data"?a.filter((h,m)=>{var v;let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,m)||u(h,m))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=e[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function aD(t,a,{includeHydrateFallback:e}={}){return rD(t.map(n=>{let s=a.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function rD(t){return[...new Set(t)]}function sD(t){let a={},e=Object.keys(t).sort();for(let n of e)a[n]=t[n];return a}function iD(t,a){let e=new Set;return new Set(a),t.reduce((n,s)=>{let o=JSON.stringify(sD(s));return e.has(o)||(e.add(o),n.push({key:o,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oD=new Set([100,101,204,205]);function lD(t,a){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":a&&Ss(e.pathname,a)==="/"?e.pathname=`${a.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function n_(){let t=w.useContext(ml);return hy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function cD(){let t=w.useContext(th);return hy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var my=w.createContext(void 0);my.displayName="FrameworkContext";function a_(){let t=w.useContext(my);return hy(t,"You must render this element inside a <HydratedRouter> element"),t}function uD(t,a){let e=w.useContext(my),[n,s]=w.useState(!1),[o,l]=w.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:v}=a,b=w.useRef(null);w.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=I=>{I.forEach(M=>{l(M.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[t]),w.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let _=()=>{s(!0)},C=()=>{s(!1),l(!1)};return e?t!=="intent"?[o,b,{}]:[o,b,{onFocus:hc(u,_),onBlur:hc(h,C),onMouseEnter:hc(m,_),onMouseLeave:hc(p,C),onTouchStart:hc(v,_)}]:[!1,b,{}]}function hc(t,a){return e=>{t&&t(e),e.defaultPrevented||a(e)}}function dD({page:t,...a}){let{router:e}=n_(),n=w.useMemo(()=>$C(e.routes,t,e.basename),[e.routes,t,e.basename]);return n?w.createElement(hD,{page:t,matches:n,...a}):null}function fD(t){let{manifest:a,routeModules:e}=a_(),[n,s]=w.useState([]);return w.useEffect(()=>{let o=!1;return nD(t,a,e).then(l=>{o||s(l)}),()=>{o=!0}},[t,a,e]),n}function hD({page:t,matches:a,...e}){let n=Is(),{manifest:s,routeModules:o}=a_(),{basename:l}=n_(),{loaderData:u,matches:h}=cD(),m=w.useMemo(()=>Pw(t,a,h,s,n,"data"),[t,a,h,s,n]),p=w.useMemo(()=>Pw(t,a,h,s,n,"assets"),[t,a,h,s,n]),v=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let C=new Set,S=!1;if(a.forEach(I=>{var A;let M=s.routes[I.route.id];!M||!M.hasLoader||(!m.some(k=>k.route.id===I.route.id)&&I.route.id in u&&((A=o[I.route.id])!=null&&A.shouldRevalidate)||M.hasClientLoader?S=!0:C.add(I.route.id))}),C.size===0)return[];let E=lD(t,l);return S&&C.size>0&&E.searchParams.set("_routes",a.filter(I=>C.has(I.route.id)).map(I=>I.route.id).join(",")),[E.pathname+E.search]},[l,u,n,s,m,a,t,o]),b=w.useMemo(()=>aD(p,s),[p,s]),_=fD(p);return w.createElement(w.Fragment,null,v.map(C=>w.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),b.map(C=>w.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),_.map(({key:C,link:S})=>w.createElement("link",{key:C,...S})))}function mD(...t){return a=>{t.forEach(e=>{typeof e=="function"?e(a):e!=null&&(e.current=a)})}}var r_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{r_&&(window.__reactRouterVersion="7.6.1")}catch{}function pD({basename:t,children:a,window:e}){let n=w.useRef();n.current==null&&(n.current=nI({window:e,v5Compat:!0}));let s=n.current,[o,l]=w.useState({action:s.action,location:s.location}),u=w.useCallback(h=>{w.startTransition(()=>l(h))},[l]);return w.useLayoutEffect(()=>s.listen(u),[s,u]),w.createElement(WI,{basename:t,children:a,location:o.location,navigationType:o.action,navigator:s})}var s_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i_=w.forwardRef(function({onClick:a,discover:e="render",prefetch:n="none",relative:s,reloadDocument:o,replace:l,state:u,target:h,to:m,preventScrollReset:p,viewTransition:v,...b},_){let{basename:C}=w.useContext(hr),S=typeof m=="string"&&s_.test(m),E,I=!1;if(typeof m=="string"&&S&&(E=m,r_))try{let $=new URL(window.location.href),K=m.startsWith("//")?new URL($.protocol+m):new URL(m),pe=Ss(K.pathname,C);K.origin===$.origin&&pe!=null?m=pe+K.search+K.hash:I=!0}catch{ka(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=AI(m,{relative:s}),[A,k,O]=uD(n,b),U=bD(m,{replace:l,state:u,target:h,preventScrollReset:p,relative:s,viewTransition:v});function q($){a&&a($),$.defaultPrevented||U($)}let Y=w.createElement("a",{...b,...O,href:E||M,onClick:I||o?a:q,ref:mD(_,k),target:h,"data-discover":!S&&e==="render"?"true":void 0});return A&&!S?w.createElement(w.Fragment,null,Y,w.createElement(dD,{page:M})):Y});i_.displayName="Link";var gD=w.forwardRef(function({"aria-current":a="page",caseSensitive:e=!1,className:n="",end:s=!1,style:o,to:l,viewTransition:u,children:h,...m},p){let v=Jc(l,{relative:m.relative}),b=Is(),_=w.useContext(th),{navigator:C,basename:S}=w.useContext(hr),E=_!=null&&xD(v)&&u===!0,I=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,M=b.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;e||(M=M.toLowerCase(),A=A?A.toLowerCase():null,I=I.toLowerCase()),A&&S&&(A=Ss(A,S)||A);const k=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let O=M===I||!s&&M.startsWith(I)&&M.charAt(k)==="/",U=A!=null&&(A===I||!s&&A.startsWith(I)&&A.charAt(I.length)==="/"),q={isActive:O,isPending:U,isTransitioning:E},Y=O?a:void 0,$;typeof n=="function"?$=n(q):$=[n,O?"active":null,U?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(q):o;return w.createElement(i_,{...m,"aria-current":Y,className:$,ref:p,style:K,to:l,viewTransition:u},typeof h=="function"?h(q):h)});gD.displayName="NavLink";var yD=w.forwardRef(({discover:t="render",fetcherKey:a,navigate:e,reloadDocument:n,replace:s,state:o,method:l=Ud,action:u,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:v,...b},_)=>{let C=SD(),S=ED(u,{relative:m}),E=l.toLowerCase()==="get"?"get":"post",I=typeof u=="string"&&s_.test(u),M=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let k=A.nativeEvent.submitter,O=(k==null?void 0:k.getAttribute("formmethod"))||l;C(k||A.currentTarget,{fetcherKey:a,method:O,navigate:e,replace:s,state:o,relative:m,preventScrollReset:p,viewTransition:v})};return w.createElement("form",{ref:_,method:E,action:S,onSubmit:n?h:M,...b,"data-discover":!I&&t==="render"?"true":void 0})});yD.displayName="Form";function vD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o_(t){let a=w.useContext(ml);return qt(a,vD(t)),a}function bD(t,{target:a,replace:e,state:n,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=ao(),h=Is(),m=Jc(t,{relative:o});return w.useCallback(p=>{if(QI(p,a)){p.preventDefault();let v=e!==void 0?e:Fc(h)===Fc(m);u(t,{replace:v,state:n,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,m,e,n,a,t,s,o,l])}function wD(t){ka(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=w.useRef(Cg(t)),e=w.useRef(!1),n=Is(),s=w.useMemo(()=>VI(n.search,e.current?null:a.current),[n.search]),o=ao(),l=w.useCallback((u,h)=>{const m=Cg(typeof u=="function"?u(s):u);e.current=!0,o("?"+m,h)},[o,s]);return[s,l]}var CD=0,_D=()=>`__${String(++CD)}__`;function SD(){let{router:t}=o_("useSubmit"),{basename:a}=w.useContext(hr),e=HI();return w.useCallback(async(n,s={})=>{let{action:o,method:l,encType:u,formData:h,body:m}=JI(n,a);if(s.navigate===!1){let p=s.fetcherKey||_D();await t.fetch(p,e,s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:h,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,a,e])}function ED(t,{relative:a}={}){let{basename:e}=w.useContext(hr),n=w.useContext(Yr);qt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Jc(t||".",{relative:a})},l=Is();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:gs([e,o.pathname])),Fc(o)}function xD(t,a={}){let e=w.useContext(XC);qt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=o_("useViewTransitionState"),s=Jc(t,{relative:a.relative});if(!e.isTransitioning)return!1;let o=Ss(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=Ss(e.nextLocation.pathname,n)||e.nextLocation.pathname;return tf(s.pathname,l)!=null||tf(s.pathname,o)!=null}[...oD];var l_=ZC();const eu=iy(l_);function ah({gameType:t,size:a=22}){const e={"8 Ball":{emoji:""},"9 Ball":{color:"#FFD700",number:9},"10 Ball":{color:"#2196F3",number:10}};if(t==="8 Ball")return f.createElement("span",{role:"img","aria-label":"8-ball",style:{fontSize:a,verticalAlign:"middle",marginRight:4}},e["8 Ball"].emoji);const{color:n,number:s}=e[t]||{};return!n||!s?null:f.createElement("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:a,height:a,borderRadius:"50%",background:n,color:"#222",fontWeight:"bold",fontSize:a*.65,border:"2px solid #fff",boxShadow:"0 1px 2px #0003",marginRight:4,verticalAlign:"middle"},"aria-label":`${s}-ball`},s)}function zn({open:t,onClose:a,children:e,title:n="Modal",maxWidth:s="500px",className:o=""}){const[l,u]=w.useState({x:0,y:0}),[h,m]=w.useState(!1),p=w.useRef({x:0,y:0});w.useEffect(()=>{t&&u({x:0,y:0})},[t]);const v=C=>{m(!0),p.current={x:C.clientX-l.x,y:C.clientY-l.y},document.body.style.userSelect="none"},b=C=>{h&&u({x:C.clientX-p.current.x,y:C.clientY-p.current.y})},_=()=>{m(!1),document.body.style.userSelect=""};return w.useEffect(()=>(h?(window.addEventListener("mousemove",b),window.addEventListener("mouseup",_)):(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",_)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",_)}),[h]),t?f.createElement("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},f.createElement("div",{className:`draggable-modal ${o}`,style:{transform:`translate(${l.x}px, ${l.y}px)`,cursor:h?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":s==="90vw"?"90vw":"auto",maxWidth:window.innerWidth<=400?"100vw":s,minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",height:window.innerWidth<=500?"95vh":"auto",maxHeight:window.innerWidth<=500?"95vh":"85vh",display:"flex",flexDirection:"column"},onClick:C=>C.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":n,tabIndex:-1},f.createElement("div",{className:"modal-header",onMouseDown:v,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"1.1rem 1.5rem 0.7rem 1.5rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",position:"relative",cursor:"grab",userSelect:"none",gap:"1rem"}},f.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),f.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=500?"1.1rem":"1.3rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},n),f.createElement("button",{className:"modal-close-btn",onClick:a,"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:"2em",fontWeight:"bold",cursor:"pointer",zIndex:10,lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"1rem"},onMouseEnter:C=>{C.target.style.color="#ffd6d6",C.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:C=>{C.target.style.color="#fff",C.target.style.transform="scale(1) rotate(0deg)"}},"")),f.createElement("div",{className:"modal-content",style:{...window.innerWidth<=500?{flex:"1 1 auto",minHeight:0,overflowY:"auto"}:{overflowY:"auto"},padding:window.innerWidth<=500?"1rem 1rem 0.8rem 1rem":"1.4rem 1.5rem 1.2rem 1.5rem",background:"none"}},e)),f.createElement("style",{jsx:!0},`
        @keyframes modalBounceIn {
          0% { opacity: 0; transform: scale(0.95) translateY(-40px);}
          70% { opacity: 1; transform: scale(1.02) translateY(8px);}
          100% { opacity: 1; transform: scale(1) translateY(0);}
        }
        
        @media (max-width: 500px) {
          .draggable-modal {
            max-width: 99vw !important;
            border-radius: 0.7rem !important;
          }
          .modal-header {
            padding: 0.7rem 0.7rem 0.5rem 0.7rem !important;
          }
          .modal-content {
            padding: 1rem 0.6rem 0.8rem 0.6rem !important;
          }
        }
        /* Custom scrollbar for modal-content */
        .modal-content::-webkit-scrollbar {
          width: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: #e53e3e;
          border-radius: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: #232323;
          border-radius: 6px;
        }
        .modal-content {
          scrollbar-width: thin;
          scrollbar-color: #e53e3e #232323;
        }
      `)):null}function ID(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function c_({open:t,message:a,gameType:e,raceLength:n,day:s,date:o,time:l,location:u,proposalNote:h,confirmationNote:m,phase:p,onClose:v}){if(!t)return null;const b=typeof window<"u"&&window.innerWidth<=500,_=b?"100%":"240px",C=b?"90vw":"240px",S=b?"100%":"220px";return f.createElement(zn,{open:t,onClose:v,title:"Proposal Sent!",maxWidth:C,width:_},f.createElement("div",{style:{textAlign:"center"}},f.createElement("div",{style:{background:"#222",color:"#fff",borderRadius:6,padding:"0.6rem 0.7rem 0.6rem 0.7rem",margin:"0 auto 0.7rem auto",fontWeight:600,fontSize:"0.97rem",textAlign:"center",maxWidth:"220px",width:"100%",wordBreak:"break-word",whiteSpace:"pre-line"}},a),f.createElement("div",{style:{background:"#f8f8f8",color:"#222",borderRadius:8,padding:b?"0.4rem 0.2rem":"0.5rem 0.5rem",margin:"0.7rem auto 0.7rem auto",textAlign:"center",fontSize:b?"0.92rem":"0.95rem",border:"1px solid #ff0000",maxWidth:S,width:"100%"}},f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Phase:")," ",p==="scheduled"?"Phase 1 (Scheduled)":p==="challenge"?"Phase 2 (challenge)":p),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Game Type:")," ",f.createElement(ah,{gameType:e,size:16})," ",e),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Race to:")," ",n),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Day:")," ",s),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Date:")," ",ID(o)),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Time:")," ",l),f.createElement("div",{style:{marginBottom:6}},f.createElement("strong",null,"Location:")," ",u),h&&f.createElement("div",{style:{marginTop:12,padding:"0.5rem 0.7rem",background:"#fffbe6",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#a36c00",fontSize:"0.97rem"}},f.createElement("strong",null,"Opponent's note:")," ",h),m&&f.createElement("div",{style:{marginTop:10,padding:"0.5rem 0.7rem",background:"#e6fff0",borderLeft:"3px solid #00b36b",borderRadius:4,color:"#006b3c",fontSize:"0.97rem"}},f.createElement("strong",null,"Your note:")," ",m)),f.createElement("button",{style:{marginTop:"1.8rem",background:"#ff0000",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer"},onClick:v},"Close")))}const jc={_origin:"https://api.emailjs.com"},DD=(t,a="https://api.emailjs.com")=>{jc._userID=t,jc._origin=a},u_=(t,a,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class Bw{constructor(a){this.status=a.status,this.text=a.responseText}}const d_=(t,a,e={})=>new Promise((n,s)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const u=new Bw(l);u.status===200||u.text==="OK"?n(u):s(u)}),o.addEventListener("error",({target:l})=>{s(new Bw(l))}),o.open("POST",jc._origin+t,!0),Object.keys(e).forEach(l=>{o.setRequestHeader(l,e[l])}),o.send(a)}),MD=(t,a,e,n)=>{const s=n||jc._userID;return u_(s,t,a),d_("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:t,template_id:a,template_params:e}),{"Content-type":"application/json"})},AD=t=>{let a;if(typeof t=="string"?a=document.querySelector(t):a=t,!a||a.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return a},TD=(t,a,e,n)=>{const s=n||jc._userID,o=AD(e);u_(s,t,a);const l=new FormData(o);return l.append("lib_version","3.2.0"),l.append("service_id",t),l.append("template_id",a),l.append("user_id",s),d_("/api/v1.0/email/send-form",l)},py={init:DD,send:MD,sendForm:TD},f_=6048e5,ND=864e5,rh=6e4,tu=36e5,RD=1e3,Uw=Symbol.for("constructDateFrom");function kt(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&Uw in t?t[Uw](a):t instanceof Date?new t.constructor(a):new Date(a)}function Le(t,a){return kt(a||t,t)}function dr(t,a,e){const n=Le(t,e==null?void 0:e.in);return isNaN(a)?kt((e==null?void 0:e.in)||t,NaN):(a&&n.setDate(n.getDate()+a),n)}function fr(t,a,e){const n=Le(t,e==null?void 0:e.in);if(isNaN(a))return kt(t,NaN);if(!a)return n;const s=n.getDate(),o=kt(t,n.getTime());o.setMonth(n.getMonth()+a+1,0);const l=o.getDate();return s>=l?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function h_(t,a,e){return kt(t,+Le(t)+a)}function kD(t,a,e){return h_(t,a*tu)}let LD={};function ro(){return LD}function Es(t,a){var u,h,m,p;const e=ro(),n=(a==null?void 0:a.weekStartsOn)??((h=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??e.weekStartsOn??((p=(m=e.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,s=Le(t,a==null?void 0:a.in),o=s.getDay(),l=(o<n?7:0)+o-n;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function nl(t,a){return Es(t,{...a,weekStartsOn:1})}function m_(t,a){const e=Le(t,a==null?void 0:a.in),n=e.getFullYear(),s=kt(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=nl(s),l=kt(e,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const u=nl(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function nf(t){const a=Le(t),e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),+t-+e}function Fr(t,...a){const e=kt.bind(null,a.find(n=>typeof n=="object"));return a.map(e)}function Xi(t,a){const e=Le(t,a==null?void 0:a.in);return e.setHours(0,0,0,0),e}function al(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a),o=Xi(n),l=Xi(s),u=+o-nf(o),h=+l-nf(l);return Math.round((u-h)/ND)}function OD(t,a){const e=m_(t,a),n=kt(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),nl(n)}function _g(t,a,e){const n=Le(t,e==null?void 0:e.in);return n.setTime(n.getTime()+a*rh),n}function gy(t,a,e){return fr(t,a*3,e)}function PD(t,a,e){return h_(t,a*1e3)}function af(t,a,e){return dr(t,a*7,e)}function ys(t,a,e){return fr(t,a*12,e)}function zw(t,a){let e,n=a==null?void 0:a.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=kt.bind(null,s));const o=Le(s,n);(!e||e<o||isNaN(+o))&&(e=o)}),kt(n,e||NaN)}function Hw(t,a){let e,n=a==null?void 0:a.in;return t.forEach(s=>{!n&&typeof s=="object"&&(n=kt.bind(null,s));const o=Le(s,n);(!e||e>o||isNaN(+o))&&(e=o)}),kt(n,e||NaN)}function BD(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a);return+Xi(n)==+Xi(s)}function vs(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function rf(t){return!(!vs(t)&&typeof t!="number"||isNaN(+Le(t)))}function sf(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a),o=n.getFullYear()-s.getFullYear(),l=n.getMonth()-s.getMonth();return o*12+l}function Zi(t,a){const e=Le(t,a==null?void 0:a.in);return Math.trunc(e.getMonth()/3)+1}function of(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a),o=n.getFullYear()-s.getFullYear(),l=Zi(n)-Zi(s);return o*4+l}function lf(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a);return n.getFullYear()-s.getFullYear()}function p_(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a),o=Yw(n,s),l=Math.abs(al(n,s));n.setDate(n.getDate()-o*l);const u=+(Yw(n,s)===-o),h=o*(l-u);return h===0?0:h}function Yw(t,a){const e=t.getFullYear()-a.getFullYear()||t.getMonth()-a.getMonth()||t.getDate()-a.getDate()||t.getHours()-a.getHours()||t.getMinutes()-a.getMinutes()||t.getSeconds()-a.getSeconds()||t.getMilliseconds()-a.getMilliseconds();return e<0?-1:e>0?1:e}function UD(t){return a=>{const e=Math.trunc,n=e(a);return n===0?0:n}}function zD(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a),o=(+n-+s)/tu;return UD()(o)}function g_(t,a){const e=Le(t,a==null?void 0:a.in);return e.setHours(23,59,59,999),e}function y_(t,a){const e=Le(t,a==null?void 0:a.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Sg(t,a){const e=Le(t,a==null?void 0:a.in),n=e.getMonth(),s=n-n%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function v_(t,a){const e=Le(t,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function b_(t,a){const e=Le(t,a==null?void 0:a.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function sh(t,a){const e=Le(t,a==null?void 0:a.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function HD(t,a){var u,h;const e=ro(),n=e.weekStartsOn??((h=(u=e.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=Le(t,a==null?void 0:a.in),o=s.getDay(),l=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}const YD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},FD=(t,a,e)=>{let n;const s=YD[t];return typeof s=="string"?n=s:a===1?n=s.one:n=s.other.replace("{{count}}",a.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function Rp(t){return(a={})=>{const e=a.width?String(a.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const jD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},GD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZD={date:Rp({formats:jD,defaultWidth:"full"}),time:Rp({formats:WD,defaultWidth:"full"}),dateTime:Rp({formats:GD,defaultWidth:"full"})},$D={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qD=(t,a,e,n)=>$D[t];function mc(t){return(a,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=e!=null&&e.width?String(e.width):l;s=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=e!=null&&e.width?String(e.width):t.defaultWidth;s=t.values[u]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(a):a;return s[o]}}const QD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},KD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tM=(t,a)=>{const e=Number(t),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},nM={ordinalNumber:tM,era:mc({values:QD,defaultWidth:"wide"}),quarter:mc({values:VD,defaultWidth:"wide",argumentCallback:t=>t-1}),month:mc({values:XD,defaultWidth:"wide"}),day:mc({values:KD,defaultWidth:"wide"}),dayPeriod:mc({values:JD,defaultWidth:"wide",formattingValues:eM,defaultFormattingWidth:"wide"})};function pc(t){return(a,e={})=>{const n=e.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=a.match(s);if(!o)return null;const l=o[0],u=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?rM(u,v=>v.test(l)):aM(u,v=>v.test(l));let m;m=t.valueCallback?t.valueCallback(h):h,m=e.valueCallback?e.valueCallback(m):m;const p=a.slice(l.length);return{value:m,rest:p}}}function aM(t,a){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&a(t[e]))return e}function rM(t,a){for(let e=0;e<t.length;e++)if(a(t[e]))return e}function sM(t){return(a,e={})=>{const n=a.match(t.matchPattern);if(!n)return null;const s=n[0],o=a.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=e.valueCallback?e.valueCallback(l):l;const u=a.slice(s.length);return{value:l,rest:u}}}const iM=/^(\d+)(th|st|nd|rd)?/i,oM=/\d+/i,lM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cM={any:[/^b/i,/^(a|c)/i]},uM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dM={any:[/1/i,/2/i,/3/i,/4/i]},fM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vM={ordinalNumber:sM({matchPattern:iM,parsePattern:oM,valueCallback:t=>parseInt(t,10)}),era:pc({matchPatterns:lM,defaultMatchWidth:"wide",parsePatterns:cM,defaultParseWidth:"any"}),quarter:pc({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pc({matchPatterns:fM,defaultMatchWidth:"wide",parsePatterns:hM,defaultParseWidth:"any"}),day:pc({matchPatterns:mM,defaultMatchWidth:"wide",parsePatterns:pM,defaultParseWidth:"any"}),dayPeriod:pc({matchPatterns:gM,defaultMatchWidth:"any",parsePatterns:yM,defaultParseWidth:"any"})},w_={code:"en-US",formatDistance:FD,formatLong:ZD,formatRelative:qD,localize:nM,match:vM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bM(t,a){const e=Le(t,a==null?void 0:a.in);return al(e,sh(e))+1}function yy(t,a){const e=Le(t,a==null?void 0:a.in),n=+nl(e)-+OD(e);return Math.round(n/f_)+1}function vy(t,a){var p,v,b,_;const e=Le(t,a==null?void 0:a.in),n=e.getFullYear(),s=ro(),o=(a==null?void 0:a.firstWeekContainsDate)??((v=(p=a==null?void 0:a.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((_=(b=s.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??1,l=kt((a==null?void 0:a.in)||t,0);l.setFullYear(n+1,0,o),l.setHours(0,0,0,0);const u=Es(l,a),h=kt((a==null?void 0:a.in)||t,0);h.setFullYear(n,0,o),h.setHours(0,0,0,0);const m=Es(h,a);return+e>=+u?n+1:+e>=+m?n:n-1}function wM(t,a){var u,h,m,p;const e=ro(),n=(a==null?void 0:a.firstWeekContainsDate)??((h=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??e.firstWeekContainsDate??((p=(m=e.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,s=vy(t,a),o=kt((a==null?void 0:a.in)||t,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Es(o,a)}function C_(t,a){const e=Le(t,a==null?void 0:a.in),n=+Es(e,a)-+wM(e,a);return Math.round(n/f_)+1}function Nt(t,a){const e=t<0?"-":"",n=Math.abs(t).toString().padStart(a,"0");return e+n}const Js={y(t,a){const e=t.getFullYear(),n=e>0?e:1-e;return Nt(a==="yy"?n%100:n,a.length)},M(t,a){const e=t.getMonth();return a==="M"?String(e+1):Nt(e+1,2)},d(t,a){return Nt(t.getDate(),a.length)},a(t,a){const e=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,a){return Nt(t.getHours()%12||12,a.length)},H(t,a){return Nt(t.getHours(),a.length)},m(t,a){return Nt(t.getMinutes(),a.length)},s(t,a){return Nt(t.getSeconds(),a.length)},S(t,a){const e=a.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,e-3));return Nt(s,a.length)}},Ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fw={G:function(t,a,e){const n=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(t,a,e){if(a==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return e.ordinalNumber(s,{unit:"year"})}return Js.y(t,a)},Y:function(t,a,e,n){const s=vy(t,n),o=s>0?s:1-s;if(a==="YY"){const l=o%100;return Nt(l,2)}return a==="Yo"?e.ordinalNumber(o,{unit:"year"}):Nt(o,a.length)},R:function(t,a){const e=m_(t);return Nt(e,a.length)},u:function(t,a){const e=t.getFullYear();return Nt(e,a.length)},Q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return Nt(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return Nt(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,a,e){const n=t.getMonth();switch(a){case"M":case"MM":return Js.M(t,a);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(t,a,e){const n=t.getMonth();switch(a){case"L":return String(n+1);case"LL":return Nt(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(t,a,e,n){const s=C_(t,n);return a==="wo"?e.ordinalNumber(s,{unit:"week"}):Nt(s,a.length)},I:function(t,a,e){const n=yy(t);return a==="Io"?e.ordinalNumber(n,{unit:"week"}):Nt(n,a.length)},d:function(t,a,e){return a==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):Js.d(t,a)},D:function(t,a,e){const n=bM(t);return a==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):Nt(n,a.length)},E:function(t,a,e){const n=t.getDay();switch(a){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(t,a,e,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(o);case"ee":return Nt(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(t,a,e,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(o);case"cc":return Nt(o,a.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(t,a,e){const n=t.getDay(),s=n===0?7:n;switch(a){case"i":return String(s);case"ii":return Nt(s,a.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(t,a,e){const s=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,a,e){const n=t.getHours();let s;switch(n===12?s=Ho.noon:n===0?s=Ho.midnight:s=n/12>=1?"pm":"am",a){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,a,e){const n=t.getHours();let s;switch(n>=17?s=Ho.evening:n>=12?s=Ho.afternoon:n>=4?s=Ho.morning:s=Ho.night,a){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,a,e){if(a==="ho"){let n=t.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return Js.h(t,a)},H:function(t,a,e){return a==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):Js.H(t,a)},K:function(t,a,e){const n=t.getHours()%12;return a==="Ko"?e.ordinalNumber(n,{unit:"hour"}):Nt(n,a.length)},k:function(t,a,e){let n=t.getHours();return n===0&&(n=24),a==="ko"?e.ordinalNumber(n,{unit:"hour"}):Nt(n,a.length)},m:function(t,a,e){return a==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):Js.m(t,a)},s:function(t,a,e){return a==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):Js.s(t,a)},S:function(t,a){return Js.S(t,a)},X:function(t,a,e){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return Ww(n);case"XXXX":case"XX":return Ui(n);case"XXXXX":case"XXX":default:return Ui(n,":")}},x:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"x":return Ww(n);case"xxxx":case"xx":return Ui(n);case"xxxxx":case"xxx":default:return Ui(n,":")}},O:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+jw(n,":");case"OOOO":default:return"GMT"+Ui(n,":")}},z:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+jw(n,":");case"zzzz":default:return"GMT"+Ui(n,":")}},t:function(t,a,e){const n=Math.trunc(+t/1e3);return Nt(n,a.length)},T:function(t,a,e){return Nt(+t,a.length)}};function jw(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),o=n%60;return o===0?e+String(s):e+String(s)+a+Nt(o,2)}function Ww(t,a){return t%60===0?(t>0?"-":"+")+Nt(Math.abs(t)/60,2):Ui(t,a)}function Ui(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),s=Nt(Math.trunc(n/60),2),o=Nt(n%60,2);return e+s+a+o}const Gw=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},__=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},CM=(t,a)=>{const e=t.match(/(P+)(p+)?/)||[],n=e[1],s=e[2];if(!s)return Gw(t,a);let o;switch(n){case"P":o=a.dateTime({width:"short"});break;case"PP":o=a.dateTime({width:"medium"});break;case"PPP":o=a.dateTime({width:"long"});break;case"PPPP":default:o=a.dateTime({width:"full"});break}return o.replace("{{date}}",Gw(n,a)).replace("{{time}}",__(s,a))},Eg={p:__,P:CM},_M=/^D+$/,SM=/^Y+$/,EM=["D","DD","YY","YYYY"];function xM(t){return _M.test(t)}function IM(t){return SM.test(t)}function DM(t,a,e){const n=MM(t,a,e);if(console.warn(n),EM.includes(t))throw new RangeError(n)}function MM(t,a,e){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NM=/^'([^]*?)'?$/,RM=/''/g,kM=/[a-zA-Z]/;function Wc(t,a,e){var p,v,b,_,C,S,E,I;const n=ro(),s=(e==null?void 0:e.locale)??n.locale??w_,o=(e==null?void 0:e.firstWeekContainsDate)??((v=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??n.firstWeekContainsDate??((_=(b=n.locale)==null?void 0:b.options)==null?void 0:_.firstWeekContainsDate)??1,l=(e==null?void 0:e.weekStartsOn)??((S=(C=e==null?void 0:e.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??n.weekStartsOn??((I=(E=n.locale)==null?void 0:E.options)==null?void 0:I.weekStartsOn)??0,u=Le(t,e==null?void 0:e.in);if(!rf(u))throw new RangeError("Invalid time value");let h=a.match(TM).map(M=>{const A=M[0];if(A==="p"||A==="P"){const k=Eg[A];return k(M,s.formatLong)}return M}).join("").match(AM).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const A=M[0];if(A==="'")return{isToken:!1,value:LM(M)};if(Fw[A])return{isToken:!0,value:M};if(A.match(kM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:M}});s.localize.preprocessor&&(h=s.localize.preprocessor(u,h));const m={firstWeekContainsDate:o,weekStartsOn:l,locale:s};return h.map(M=>{if(!M.isToken)return M.value;const A=M.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&IM(A)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&xM(A))&&DM(A,a,String(t));const k=Fw[A[0]];return k(u,A,s.localize,m)}).join("")}function LM(t){const a=t.match(NM);return a?a[1].replace(RM,"'"):t}function Zw(t,a){return Le(t,a==null?void 0:a.in).getDate()}function OM(t,a){return Le(t,a==null?void 0:a.in).getDay()}function PM(t,a){const e=Le(t,a==null?void 0:a.in),n=e.getFullYear(),s=e.getMonth(),o=kt(e,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function BM(){return Object.assign({},ro())}function bs(t,a){return Le(t,a==null?void 0:a.in).getHours()}function UM(t,a){const e=Le(t,a==null?void 0:a.in).getDay();return e===0?7:e}function ws(t,a){return Le(t,a==null?void 0:a.in).getMinutes()}function $n(t,a){return Le(t,a==null?void 0:a.in).getMonth()}function ui(t){return Le(t).getSeconds()}function xg(t){return+Le(t)}function it(t,a){return Le(t,a==null?void 0:a.in).getFullYear()}function xs(t,a){return+Le(t)>+Le(a)}function Ki(t,a){return+Le(t)<+Le(a)}function zM(t,a){return+Le(t)==+Le(a)}function HM(t,a){const e=YM(a)?new a(0):kt(a,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}function YM(t){var a;return typeof t=="function"&&((a=t.prototype)==null?void 0:a.constructor)===t}const FM=10;class S_{constructor(){Ne(this,"subPriority",0)}validate(a,e){return!0}}class jM extends S_{constructor(a,e,n,s,o){super(),this.value=a,this.validateValue=e,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,n){return this.setValue(a,e,this.value,n)}}class WM extends S_{constructor(e,n){super();Ne(this,"priority",FM);Ne(this,"subPriority",-1);this.context=e||(s=>kt(n,s))}set(e,n){return n.timestampIsSet?e:kt(e,HM(e,this.context))}}class It{run(a,e,n,s){const o=this.parse(a,e,n,s);return o?{setter:new jM(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(a,e,n){return!0}}class GM extends It{constructor(){super(...arguments);Ne(this,"priority",140);Ne(this,"incompatibleTokens",["R","u","t","T"])}parse(e,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,n,s){return n.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}const fn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Or={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function hn(t,a){return t&&{value:a(t.value),rest:t.rest}}function Jt(t,a){const e=a.match(t);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function Pr(t,a){const e=a.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const n=e[1]==="+"?1:-1,s=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,l=e[5]?parseInt(e[5],10):0;return{value:n*(s*tu+o*rh+l*RD),rest:a.slice(e[0].length)}}function E_(t){return Jt(fn.anyDigitsSigned,t)}function sn(t,a){switch(t){case 1:return Jt(fn.singleDigit,a);case 2:return Jt(fn.twoDigits,a);case 3:return Jt(fn.threeDigits,a);case 4:return Jt(fn.fourDigits,a);default:return Jt(new RegExp("^\\d{1,"+t+"}"),a)}}function cf(t,a){switch(t){case 1:return Jt(fn.singleDigitSigned,a);case 2:return Jt(fn.twoDigitsSigned,a);case 3:return Jt(fn.threeDigitsSigned,a);case 4:return Jt(fn.fourDigitsSigned,a);default:return Jt(new RegExp("^-?\\d{1,"+t+"}"),a)}}function by(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function x_(t,a){const e=a>0,n=e?a:1-a;let s;if(n<=50)s=t||100;else{const o=n+50,l=Math.trunc(o/100)*100,u=t>=o%100;s=t+l-(u?100:0)}return e?s:1-s}function I_(t){return t%400===0||t%4===0&&t%100!==0}class ZM extends It{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,n,s){const o=l=>({year:l,isTwoDigitYear:n==="yy"});switch(n){case"y":return hn(sn(4,e),o);case"yo":return hn(s.ordinalNumber(e,{unit:"year"}),o);default:return hn(sn(n.length,e),o)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s){const o=e.getFullYear();if(s.isTwoDigitYear){const u=x_(s.year,o);return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}const l=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}}class $M extends It{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,n,s){const o=l=>({year:l,isTwoDigitYear:n==="YY"});switch(n){case"Y":return hn(sn(4,e),o);case"Yo":return hn(s.ordinalNumber(e,{unit:"year"}),o);default:return hn(sn(n.length,e),o)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s,o){const l=vy(e,o);if(s.isTwoDigitYear){const h=x_(s.year,l);return e.setFullYear(h,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),Es(e,o)}const u=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(u,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),Es(e,o)}}class qM extends It{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,n){return cf(n==="R"?4:n.length,e)}set(e,n,s){const o=kt(e,0);return o.setFullYear(s,0,4),o.setHours(0,0,0,0),nl(o)}}class QM extends It{constructor(){super(...arguments);Ne(this,"priority",130);Ne(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,n){return cf(n==="u"?4:n.length,e)}set(e,n,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class VM extends It{constructor(){super(...arguments);Ne(this,"priority",120);Ne(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"Q":case"QQ":return sn(n.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class XM extends It{constructor(){super(...arguments);Ne(this,"priority",120);Ne(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"q":case"qq":return sn(n.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class KM extends It{constructor(){super(...arguments);Ne(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ne(this,"priority",110)}parse(e,n,s){const o=l=>l-1;switch(n){case"M":return hn(Jt(fn.month,e),o);case"MM":return hn(sn(2,e),o);case"Mo":return hn(s.ordinalNumber(e,{unit:"month"}),o);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class JM extends It{constructor(){super(...arguments);Ne(this,"priority",110);Ne(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,n,s){const o=l=>l-1;switch(n){case"L":return hn(Jt(fn.month,e),o);case"LL":return hn(sn(2,e),o);case"Lo":return hn(s.ordinalNumber(e,{unit:"month"}),o);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}function eA(t,a,e){const n=Le(t,e==null?void 0:e.in),s=C_(n,e)-a;return n.setDate(n.getDate()-s*7),Le(n,e==null?void 0:e.in)}class tA extends It{constructor(){super(...arguments);Ne(this,"priority",100);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,n,s){switch(n){case"w":return Jt(fn.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return sn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s,o){return Es(eA(e,s,o),o)}}function nA(t,a,e){const n=Le(t,e==null?void 0:e.in),s=yy(n,e)-a;return n.setDate(n.getDate()-s*7),n}class aA extends It{constructor(){super(...arguments);Ne(this,"priority",100);Ne(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,n,s){switch(n){case"I":return Jt(fn.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return sn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s){return nl(nA(e,s))}}const rA=[31,28,31,30,31,30,31,31,30,31,30,31],sA=[31,29,31,30,31,30,31,31,30,31,30,31];class iA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"subPriority",1);Ne(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"d":return Jt(fn.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return sn(n.length,e)}}validate(e,n){const s=e.getFullYear(),o=I_(s),l=e.getMonth();return o?n>=1&&n<=sA[l]:n>=1&&n<=rA[l]}set(e,n,s){return e.setDate(s),e.setHours(0,0,0,0),e}}class oA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"subpriority",1);Ne(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,n,s){switch(n){case"D":case"DD":return Jt(fn.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return sn(n.length,e)}}validate(e,n){const s=e.getFullYear();return I_(s)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}}function wy(t,a,e){var v,b,_,C;const n=ro(),s=(e==null?void 0:e.weekStartsOn)??((b=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((C=(_=n.locale)==null?void 0:_.options)==null?void 0:C.weekStartsOn)??0,o=Le(t,e==null?void 0:e.in),l=o.getDay(),h=(a%7+7)%7,m=7-s,p=a<0||a>6?a-(l+m)%7:(h+m)%7-(l+m)%7;return dr(o,p,e)}class lA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,o){return e=wy(e,s,o),e.setHours(0,0,0,0),e}}class cA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,n,s,o){const l=u=>{const h=Math.floor((u-1)/7)*7;return(u+o.weekStartsOn+6)%7+h};switch(n){case"e":case"ee":return hn(sn(n.length,e),l);case"eo":return hn(s.ordinalNumber(e,{unit:"day"}),l);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,o){return e=wy(e,s,o),e.setHours(0,0,0,0),e}}class uA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,n,s,o){const l=u=>{const h=Math.floor((u-1)/7)*7;return(u+o.weekStartsOn+6)%7+h};switch(n){case"c":case"cc":return hn(sn(n.length,e),l);case"co":return hn(s.ordinalNumber(e,{unit:"day"}),l);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,o){return e=wy(e,s,o),e.setHours(0,0,0,0),e}}function dA(t,a,e){const n=Le(t,e==null?void 0:e.in),s=UM(n,e),o=a-s;return dr(n,o,e)}class fA extends It{constructor(){super(...arguments);Ne(this,"priority",90);Ne(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,n,s){const o=l=>l===0?7:l;switch(n){case"i":case"ii":return sn(n.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return hn(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return hn(s.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return hn(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return hn(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,n){return n>=1&&n<=7}set(e,n,s){return e=dA(e,s),e.setHours(0,0,0,0),e}}class hA extends It{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(by(s),0,0,0),e}}class mA extends It{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(by(s),0,0,0),e}}class pA extends It{constructor(){super(...arguments);Ne(this,"priority",80);Ne(this,"incompatibleTokens",["a","b","t","T"])}parse(e,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(by(s),0,0,0),e}}class gA extends It{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,n,s){switch(n){case"h":return Jt(fn.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return sn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,s){const o=e.getHours()>=12;return o&&s<12?e.setHours(s+12,0,0,0):!o&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}}class yA extends It{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,n,s){switch(n){case"H":return Jt(fn.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return sn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,s){return e.setHours(s,0,0,0),e}}class vA extends It{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,n,s){switch(n){case"K":return Jt(fn.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return sn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}}class bA extends It{constructor(){super(...arguments);Ne(this,"priority",70);Ne(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,n,s){switch(n){case"k":return Jt(fn.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return sn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,s){const o=s<=24?s%24:s;return e.setHours(o,0,0,0),e}}class wA extends It{constructor(){super(...arguments);Ne(this,"priority",60);Ne(this,"incompatibleTokens",["t","T"])}parse(e,n,s){switch(n){case"m":return Jt(fn.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return sn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setMinutes(s,0,0),e}}class CA extends It{constructor(){super(...arguments);Ne(this,"priority",50);Ne(this,"incompatibleTokens",["t","T"])}parse(e,n,s){switch(n){case"s":return Jt(fn.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return sn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setSeconds(s,0),e}}class _A extends It{constructor(){super(...arguments);Ne(this,"priority",30);Ne(this,"incompatibleTokens",["t","T"])}parse(e,n){const s=o=>Math.trunc(o*Math.pow(10,-n.length+3));return hn(sn(n.length,e),s)}set(e,n,s){return e.setMilliseconds(s),e}}class SA extends It{constructor(){super(...arguments);Ne(this,"priority",10);Ne(this,"incompatibleTokens",["t","T","x"])}parse(e,n){switch(n){case"X":return Pr(Or.basicOptionalMinutes,e);case"XX":return Pr(Or.basic,e);case"XXXX":return Pr(Or.basicOptionalSeconds,e);case"XXXXX":return Pr(Or.extendedOptionalSeconds,e);case"XXX":default:return Pr(Or.extended,e)}}set(e,n,s){return n.timestampIsSet?e:kt(e,e.getTime()-nf(e)-s)}}class EA extends It{constructor(){super(...arguments);Ne(this,"priority",10);Ne(this,"incompatibleTokens",["t","T","X"])}parse(e,n){switch(n){case"x":return Pr(Or.basicOptionalMinutes,e);case"xx":return Pr(Or.basic,e);case"xxxx":return Pr(Or.basicOptionalSeconds,e);case"xxxxx":return Pr(Or.extendedOptionalSeconds,e);case"xxx":default:return Pr(Or.extended,e)}}set(e,n,s){return n.timestampIsSet?e:kt(e,e.getTime()-nf(e)-s)}}class xA extends It{constructor(){super(...arguments);Ne(this,"priority",40);Ne(this,"incompatibleTokens","*")}parse(e){return E_(e)}set(e,n,s){return[kt(e,s*1e3),{timestampIsSet:!0}]}}class IA extends It{constructor(){super(...arguments);Ne(this,"priority",20);Ne(this,"incompatibleTokens","*")}parse(e){return E_(e)}set(e,n,s){return[kt(e,s),{timestampIsSet:!0}]}}const DA={G:new GM,y:new ZM,Y:new $M,R:new qM,u:new QM,Q:new VM,q:new XM,M:new KM,L:new JM,w:new tA,I:new aA,d:new iA,D:new oA,E:new lA,e:new cA,c:new uA,i:new fA,a:new hA,b:new mA,B:new pA,h:new gA,H:new yA,K:new vA,k:new bA,m:new wA,s:new CA,S:new _A,X:new SA,x:new EA,t:new xA,T:new IA},MA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,TA=/^'([^]*?)'?$/,NA=/''/g,RA=/\S/,kA=/[a-zA-Z]/;function LA(t,a,e,n){var E,I,M,A,k,O,U,q;const s=()=>kt((n==null?void 0:n.in)||e,NaN),o=BM(),l=(n==null?void 0:n.locale)??o.locale??w_,u=(n==null?void 0:n.firstWeekContainsDate)??((I=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:I.firstWeekContainsDate)??o.firstWeekContainsDate??((A=(M=o.locale)==null?void 0:M.options)==null?void 0:A.firstWeekContainsDate)??1,h=(n==null?void 0:n.weekStartsOn)??((O=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:O.weekStartsOn)??o.weekStartsOn??((q=(U=o.locale)==null?void 0:U.options)==null?void 0:q.weekStartsOn)??0;if(!a)return t?s():Le(e,n==null?void 0:n.in);const m={firstWeekContainsDate:u,weekStartsOn:h,locale:l},p=[new WM(n==null?void 0:n.in,e)],v=a.match(AA).map(Y=>{const $=Y[0];if($ in Eg){const K=Eg[$];return K(Y,l.formatLong)}return Y}).join("").match(MA),b=[];for(let Y of v){const $=Y[0],K=DA[$];if(K){const{incompatibleTokens:pe}=K;if(Array.isArray(pe)){const ne=b.find(se=>pe.includes(se.token)||se.token===$);if(ne)throw new RangeError(`The format string mustn't contain \`${ne.fullToken}\` and \`${Y}\` at the same time`)}else if(K.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${Y}\` and any other token at the same time`);b.push({token:$,fullToken:Y});const ie=K.run(t,Y,l.match,m);if(!ie)return s();p.push(ie.setter),t=ie.rest}else{if($.match(kA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");if(Y==="''"?Y="'":$==="'"&&(Y=OA(Y)),t.indexOf(Y)===0)t=t.slice(Y.length);else return s()}}if(t.length>0&&RA.test(t))return s();const _=p.map(Y=>Y.priority).sort((Y,$)=>$-Y).filter((Y,$,K)=>K.indexOf(Y)===$).map(Y=>p.filter($=>$.priority===Y).sort(($,K)=>K.subPriority-$.subPriority)).map(Y=>Y[0]);let C=Le(e,n==null?void 0:n.in);if(isNaN(+C))return s();const S={};for(const Y of _){if(!Y.validate(C,m))return s();const $=Y.set(C,S,m);Array.isArray($)?(C=$[0],Object.assign(S,$[1])):C=$}return C}function OA(t){return t.match(TA)[1].replace(NA,"'")}function PA(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function BA(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a);return+Sg(n)==+Sg(s)}function UA(t,a,e){const[n,s]=Fr(e==null?void 0:e.in,t,a);return n.getFullYear()===s.getFullYear()}function Gc(t,a,e){const n=+Le(t,e==null?void 0:e.in),[s,o]=[+Le(a.start,e==null?void 0:e.in),+Le(a.end,e==null?void 0:e.in)].sort((l,u)=>l-u);return n>=s&&n<=o}function zA(t,a,e){return dr(t,-1,e)}function D_(t,a){const e=()=>kt(a==null?void 0:a.in,NaN),s=jA(t);let o;if(s.date){const m=WA(s.date,2);o=GA(m.restDateString,m.year)}if(!o||isNaN(+o))return e();const l=+o;let u=0,h;if(s.time&&(u=ZA(s.time),isNaN(u)))return e();if(s.timezone){if(h=$A(s.timezone),isNaN(h))return e()}else{const m=new Date(l+u),p=Le(0,a==null?void 0:a.in);return p.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),p.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),p}return Le(l+u+h,a==null?void 0:a.in)}const yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},HA=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,FA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function jA(t){const a={},e=t.split(yd.dateTimeDelimiter);let n;if(e.length>2)return a;if(/:/.test(e[0])?n=e[0]:(a.date=e[0],n=e[1],yd.timeZoneDelimiter.test(a.date)&&(a.date=t.split(yd.timeZoneDelimiter)[0],n=t.substr(a.date.length,t.length))),n){const s=yd.timezone.exec(n);s?(a.time=n.replace(s[1],""),a.timezone=s[1]):a.time=n}return a}function WA(t,a){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),n=t.match(e);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:t.slice((n[1]||n[2]).length)}}function GA(t,a){if(a===null)return new Date(NaN);const e=t.match(HA);if(!e)return new Date(NaN);const n=!!e[4],s=gc(e[1]),o=gc(e[2])-1,l=gc(e[3]),u=gc(e[4]),h=gc(e[5])-1;if(n)return KA(a,u,h)?qA(a,u,h):new Date(NaN);{const m=new Date(0);return!VA(a,o,l)||!XA(a,s)?new Date(NaN):(m.setUTCFullYear(a,o,Math.max(s,l)),m)}}function gc(t){return t?parseInt(t):1}function ZA(t){const a=t.match(YA);if(!a)return NaN;const e=kp(a[1]),n=kp(a[2]),s=kp(a[3]);return JA(e,n,s)?e*tu+n*rh+s*1e3:NaN}function kp(t){return t&&parseFloat(t.replace(",","."))||0}function $A(t){if(t==="Z")return 0;const a=t.match(FA);if(!a)return 0;const e=a[1]==="+"?-1:1,n=parseInt(a[2]),s=a[3]&&parseInt(a[3])||0;return eT(n,s)?e*(n*tu+s*rh):NaN}function qA(t,a,e){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,o=(a-1)*7+e+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const QA=[31,null,31,30,31,30,31,31,30,31,30,31];function M_(t){return t%400===0||t%4===0&&t%100!==0}function VA(t,a,e){return a>=0&&a<=11&&e>=1&&e<=(QA[a]||(M_(t)?29:28))}function XA(t,a){return a>=1&&a<=(M_(t)?366:365)}function KA(t,a,e){return a>=1&&a<=53&&e>=0&&e<=6}function JA(t,a,e){return t===24?a===0&&e===0:e>=0&&e<60&&a>=0&&a<60&&t>=0&&t<25}function eT(t,a){return a>=0&&a<=59}function Ja(t,a,e){const n=Le(t,e==null?void 0:e.in),s=n.getFullYear(),o=n.getDate(),l=kt(t,0);l.setFullYear(s,a,15),l.setHours(0,0,0,0);const u=PM(l);return n.setMonth(a,Math.min(o,u)),n}function Hd(t,a,e){const n=Le(t,e==null?void 0:e.in);return n.setHours(a),n}function Yd(t,a,e){const n=Le(t,e==null?void 0:e.in);return n.setMinutes(a),n}function Zo(t,a,e){const n=Le(t,e==null?void 0:e.in),s=Math.trunc(n.getMonth()/3)+1,o=a-s;return Ja(n,n.getMonth()+o*3)}function Fd(t,a,e){const n=Le(t,e==null?void 0:e.in);return n.setSeconds(a),n}function kr(t,a,e){const n=Le(t,e==null?void 0:e.in);return isNaN(+n)?kt(t,NaN):(n.setFullYear(a),n)}function $i(t,a,e){return fr(t,-a,e)}function A_(t,a,e){return gy(t,-1,e)}function $w(t,a,e){return af(t,-1,e)}function rl(t,a,e){return ys(t,-a,e)}function tT({to_email:t,to_name:a,from_name:e,from_email:n,day:s,date:o,time:l,location:u,note:h,gameType:m,raceLength:p}){if(!t||t==="undefined")return alert("Recipient email is missing. Cannot send proposal."),Promise.reject(new Error("Recipient email is missing."));if(!n||n==="undefined")return alert("Your email is missing. Cannot send proposal."),Promise.reject(new Error("Sender email is missing."));const v=Wc(D_(o),"MM-dd-yyyy"),C=`https://frbcapl.github.io/NEWAPP/#/confirm-match?${Object.entries({from:e,to:a,day:s,date:v,time:l,location:u,note:h,proposerEmail:n,gameType:m,raceLength:p}).map(([S,E])=>`${S}=${encodeURIComponent(E)}`).join("&")}`;return py.send("service_l5q2047","template_xu0tl3i",{to_email:t,to_name:a,from_name:e,day:s,date:v,time:l,location:u,note:h,gameType:m,raceLength:p,confirm_link:C},"g6vqrOs_Jb6LL1VCZ")}function nT({to_email:t,to_name:a,day:e,date:n,time:s,location:o,proposal_note:l,confirmation_note:u,confirmed_by:h,gameType:m,raceLength:p}){return py.send("service_l5q2047","template_dtc43h8",{to_email:t,to_name:a,day:e,date:n,time:s,location:o,proposal_note:l,confirmation_note:u,confirmed_by:h,gameType:m,raceLength:p},"g6vqrOs_Jb6LL1VCZ")}function aT({to_email:t,to_name:a,division:e,daysUntilDeadline:n,completedMatches:s,totalRequiredMatches:o,deadlineDate:l,remainingMatches:u}){if(!t||t==="undefined")return console.error("Recipient email is missing. Cannot send deadline reminder."),Promise.reject(new Error("Recipient email is missing."));const h=Math.round(s/o*100),m=n<=1?"CRITICAL":n<=3?"URGENT":n<=7?"WARNING":"REMINDER";return py.send("service_l5q2047","template_xbpnbge",{to_email:t,to_name:a,division:e,days_until_deadline:n,completed_matches:s,total_required_matches:o,progress_percentage:h,deadline_date:l,remaining_matches:u,urgency_level:m,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}const rT="_confirmMatchCard_7heot_7",sT="_confirmMatchTitle_7heot_31",iT="_redTitle_7heot_45",oT="_confirmMatchDetails_7heot_55",lT="_detailRow_7heot_65",cT="_proposalNote_7heot_85",uT="_noteSection_7heot_109",dT="_noteLabel_7heot_119",fT="_noteTextarea_7heot_133",hT="_confirmBtn_7heot_173",Je={confirmMatchCard:rT,confirmMatchTitle:sT,redTitle:iT,confirmMatchDetails:oT,detailRow:lT,proposalNote:cT,noteSection:uT,noteLabel:dT,noteTextarea:fT,confirmBtn:hT};function mT({text:t,query:a}){return a?t.split(new RegExp(`(${a})`,"gi")).map((n,s)=>n.toLowerCase()===a.toLowerCase()?f.createElement("mark",{key:s},n):n):f.createElement(f.Fragment,null,t)}const ht="https://atlasbackend-bnng.onrender.com";console.log("BACKEND_URL in use:",ht);console.log("Current origin:",window.location.origin);console.log("User agent:",navigator.userAgent);fetch(`${ht}/health`).then(t=>{console.log(" Backend health check successful:",t.status)}).catch(t=>{console.error(" Backend health check failed:",t)});function pT(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function gT(t){if(!t)return"";const[a,e]=t.split(" ");let[n,s]=a.split(":");return n==="12"&&(n="00"),e==="PM"&&n!=="00"&&(n=String(parseInt(n,10)+12)),`${n.padStart(2,"0")}:${s}`}function yT(){const[t]=wD(),[a,e]=w.useState(!1),[n,s]=w.useState(""),o=t.get("from"),l=t.get("to"),u=t.get("day"),h=t.get("date"),m=t.get("time"),p=t.get("location"),v=t.get("proposerEmail"),b=t.get("note"),_=t.get("gameType"),C=t.get("raceLength"),S=()=>{console.log("CONFIRM BUTTON CLICKED"),nT({to_email:v,to_name:o,day:u,date:h,time:m,location:p,confirmed_by:l,proposal_note:b||"",confirmation_note:n||"",gameType:_||"",raceLength:C||""}),fetch(`${ht}/api/matches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opponent:o?o.trim():"",player:l?l.trim():"",day:u,date:h,time:gT(m),location:p,gameType:_,raceLength:C})}).then(()=>e(!0)).catch(I=>{alert("Failed to save match to server."),console.error(I)})};return f.createElement("div",{className:Je.confirmMatchBg},f.createElement("div",{className:Je.confirmMatchCard},f.createElement("h1",{className:Je.confirmMatchTitle}," Front Range ",f.createElement("br",null),"Pool League ",f.createElement("br",null),"Confirm Match"),f.createElement("p",{className:Je.confirmMatchNotice},"You are about to confirm this match. ",f.createElement("br",null),"Your opponent will be notified by email!"),f.createElement("div",{className:Je.confirmMatchDetails},f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"you"},"")," ",f.createElement("strong",null,"You:")," ",l||"N/A"),f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"opponent"},"")," ",f.createElement("strong",null,"Opponent:")," ",o||"N/A"),f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"calendar"},"")," ",f.createElement("strong",null,"Day:")," ",u||"N/A"),f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"date"},"")," ",f.createElement("strong",null,"Date:")," ",pT(h)),f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"clock"},"")," ",f.createElement("strong",null,"Time:")," ",m||"N/A"),_&&f.createElement("div",{className:Je.detailRow},f.createElement(ah,{gameType:_,size:16})," ",f.createElement("strong",null,"Game Type:")," ",_),C&&f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"race"},"")," ",f.createElement("strong",null,"Race to:")," ",C),f.createElement("div",{className:Je.detailRow},f.createElement("span",{role:"img","aria-label":"location"},"")," ",f.createElement("strong",null,"Location:")," ",p||"N/A")),b&&f.createElement("div",{className:Je.proposalNote},f.createElement("span",{role:"img","aria-label":"note"},"")," ",f.createElement("strong",null,"Note from opponent:"),f.createElement("br",null),b),f.createElement("div",{className:Je.noteSection},f.createElement("label",{htmlFor:"note",className:Je.noteLabel}," Add a note (optional):"),f.createElement("textarea",{id:"note",value:n,onChange:E=>s(E.target.value),rows:3,placeholder:"Write a message to your opponent",className:Je.noteTextarea})),f.createElement("button",{className:Je.confirmBtn,onMouseDown:E=>E.currentTarget.style.transform="scale(0.97)",onMouseUp:E=>E.currentTarget.style.transform="scale(1)",onMouseLeave:E=>E.currentTarget.style.transform="scale(1)",onClick:S}," Confirm Match"),f.createElement(c_,{open:a,message:"Match confirmed! The opponent has been notified.",proposalNote:b,confirmationNote:n,gameType:_,raceLength:C,day:u,date:h,time:m,location:p,onClose:()=>e(!1)})))}const vT="_dashboardBg_14lgb_18",bT="_dashboardFrame_14lgb_36",wT="_dashboardCard_14lgb_52",CT="_dashboardTitle_14lgb_82",_T="_dashboardUserName_14lgb_90",ST="_dashboardSection_14lgb_100",ET="_dashboardSectionBox_14lgb_111",xT="_dashboardSectionTitle_14lgb_123",IT="_dashboardHelperText_14lgb_132",DT="_matchesSection_14lgb_140",MT="_dashboardList_14lgb_152",AT="_matchCard_14lgb_163",TT="_matchCardButton_14lgb_186",NT="_matchCardOpponentLabel_14lgb_212",RT="_matchCardOpponentName_14lgb_213",kT="_matchCardDetail_14lgb_214",LT="_dashboardBtn_14lgb_266",OT="_errorBox_14lgb_299",PT="_dashboardAdminBtn_14lgb_309",BT="_dashboardLogoutBtn_14lgb_327",UT="_dashboardNoteItem_14lgb_346",zT="_simulationContainer_14lgb_365",HT="_modalOverlay_14lgb_386",YT="_proposalAlertButton_14lgb_593",FT="_proposalAlertRow_14lgb_600",jT="_newsUpdatesHeader_14lgb_703",WT="_modalDetailRowSnazzy_14lgb_806",GT="_proposalModalContent_14lgb_843",ZT="_matchCardContentWrapper_14lgb_1042",$T="_matchCardDoneBtn_14lgb_1049",qT="_inputField_14lgb_1151",QT="_proposalModalHeaderBar_14lgb_1175",VT="_phasePill_14lgb_1184",XT="_divisionPill_14lgb_1194",KT="_proposalModalToRow_14lgb_1202",JT="_toOpponentLabel_14lgb_1209",eN="_toOpponentName_14lgb_1215",tN="_proposalModalDayRow_14lgb_1220",nN="_dayLabel_14lgb_1227",aN="_dayValue_14lgb_1233",rN="_proposalModalFieldRow_14lgb_1238",sN="_fieldLabel_14lgb_1243",iN="_proposalModalButtonRow_14lgb_1265",oN="_countersRow_14lgb_1621",lN="_poolTableContainer_14lgb_1718",fe={dashboardBg:vT,dashboardFrame:bT,dashboardCard:wT,dashboardTitle:CT,dashboardUserName:_T,dashboardSection:ST,dashboardSectionBox:ET,dashboardSectionTitle:xT,dashboardHelperText:IT,matchesSection:DT,dashboardList:MT,matchCard:AT,matchCardButton:TT,matchCardOpponentLabel:NT,matchCardOpponentName:RT,matchCardDetail:kT,dashboardBtn:LT,errorBox:OT,dashboardAdminBtn:PT,dashboardLogoutBtn:BT,dashboardNoteItem:UT,simulationContainer:zT,modalOverlay:HT,proposalAlertButton:YT,proposalAlertRow:FT,newsUpdatesHeader:jT,modalDetailRowSnazzy:WT,proposalModalContent:GT,matchCardContentWrapper:ZT,matchCardDoneBtn:$T,inputField:qT,proposalModalHeaderBar:QT,phasePill:VT,divisionPill:XT,proposalModalToRow:KT,toOpponentLabel:JT,toOpponentName:eN,proposalModalDayRow:tN,dayLabel:nN,dayValue:aN,proposalModalFieldRow:rN,fieldLabel:sN,proposalModalButtonRow:iN,countersRow:oN,poolTableContainer:lN},ih=""+new URL("tenball-I4UPjCSs.svg",import.meta.url).href,T_=""+new URL("PredatorTable-CE1I7Bce.png",import.meta.url).href,N_=""+new URL("nineball-5ZBjRXm5.svg",import.meta.url).href,uf=""+new URL("8ball-COe24mO4.svg",import.meta.url).href,R_="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c!--%20Main%20ball%20gradient%20with%20realistic%20lighting%20--%3e%3cradialGradient%20id='cueMain'%20cx='25%25'%20cy='25%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='30%25'%20stop-color='%23f5f5f5'/%3e%3cstop%20offset='60%25'%20stop-color='%23e8e8e8'/%3e%3cstop%20offset='100%25'%20stop-color='%23d0d0d0'/%3e%3c/radialGradient%3e%3c!--%20Secondary%20highlight%20for%20depth%20--%3e%3cradialGradient%20id='cueHighlight'%20cx='20%25'%20cy='20%25'%20r='40%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'%20stop-opacity='0.9'/%3e%3cstop%20offset='60%25'%20stop-color='%23ffffff'%20stop-opacity='0.3'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Specular%20highlight%20--%3e%3cradialGradient%20id='cueSpecular'%20cx='35%25'%20cy='35%25'%20r='15%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Shadow%20gradient%20--%3e%3cradialGradient%20id='cueShadow'%20cx='75%25'%20cy='75%25'%20r='25%25'%3e%3cstop%20offset='0%25'%20stop-color='%23000000'%20stop-opacity='0.2'/%3e%3cstop%20offset='100%25'%20stop-color='%23000000'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c/defs%3e%3c!--%20Main%20ball%20--%3e%3ccircle%20cx='8'%20cy='8'%20r='7.5'%20fill='url(%23cueMain)'%20stroke='%23c0c0c0'%20stroke-width='0.3'/%3e%3c!--%20Primary%20highlight%20--%3e%3ccircle%20cx='6'%20cy='6'%20r='2.5'%20fill='url(%23cueHighlight)'/%3e%3c!--%20Specular%20highlight%20--%3e%3ccircle%20cx='7'%20cy='7'%20r='1.2'%20fill='url(%23cueSpecular)'/%3e%3c!--%20Subtle%20shadow%20for%20depth%20--%3e%3ccircle%20cx='9'%20cy='9'%20r='7.5'%20fill='url(%23cueShadow)'/%3e%3c/svg%3e",cN="_pinLoginBg_1hrzk_8",uN="_pinLoginFrame_1hrzk_21",dN="_pinLoginCard_1hrzk_43",fN="_simulationContainer_1hrzk_67",hN="_pinLoginSubtitle_1hrzk_111",mN="_pinLoginLock_1hrzk_118",pN="_pinInput_1hrzk_124",gN="_pinLoginBtn_1hrzk_148",yN="_signupBtn_1hrzk_174",vN="_pinLoginError_1hrzk_200",bN="_pinBallImg_1hrzk_212",Va={pinLoginBg:cN,pinLoginFrame:uN,pinLoginCard:dN,simulationContainer:fN,pinLoginSubtitle:hN,pinLoginLock:mN,pinInput:pN,pinLoginBtn:gN,signupBtn:yN,pinLoginError:vN,pinBallImg:bN},Cy=""+new URL("logo-CyezyYO7.png",import.meta.url).href,wN=[{key:"cue",src:R_,alt:"Cue Ball"},{key:"8",src:uf,alt:"8 Ball"},{key:"9",src:N_,alt:"9 Ball"},{key:"10",src:ih,alt:"10 Ball"}],Fi=600,Vo=300,Un=15,Wn=Un/2,Yo=0,Fo=0,vd=3,qw=1.8;function CN(t,a=1){const e=Un*a,n=Wn*a,s=[{x:Yo,y:Fo,margin:e*vd},{x:Yo+Fi,y:Fo,margin:e*vd},{x:Yo,y:Fo+Vo,margin:e*vd},{x:Yo+Fi,y:Fo+Vo,margin:e*vd},{x:Yo+Fi/2,y:Fo,margin:e*qw},{x:Yo+Fi/2,y:Fo+Vo,margin:e*qw}],o=t.x,l=t.y;return s.some(u=>Math.hypot(o-u.x,l-u.y)<u.margin+n*.85)}function _N(t,a,e,n=1){const s=e*n,o=a.x-t.x,l=a.y-t.y,u=Math.sqrt(o*o+l*l);if(u===0||u>=s)return;const h=s-u+.01,m=o/u,p=l/u;t.x-=m*(h/2),t.y-=p*(h/2),a.x+=m*(h/2),a.y+=p*(h/2);const v=t.vx-a.vx,b=t.vy-a.vy,C=-(v*m+b*p)||.01;t.vx+=C*m,t.vy+=C*p,a.vx-=C*m,a.vy-=C*p,t.isMoving=!0,a.isMoving=!0}function Lp(t,a,e,n,s,o,l=1){if(!s.visible||s.key===o)return!1;const u={x:t,y:a},h={x:e,y:n},m={x:s.x,y:s.y},p={x:h.x-u.x,y:h.y-u.y},v={x:m.x-u.x,y:m.y-u.y},b=p.x*p.x+p.y*p.y,_=Math.max(0,Math.min(1,(v.x*p.x+v.y*p.y)/b)),C={x:u.x+p.x*_,y:u.y+p.y*_};return Math.hypot(C.x-m.x,C.y-m.y)<Un*l*.95}function SN(t=Fi,a=Vo,e=1){const n=t/e,s=a/e;return[{x:0,y:0},{x:n,y:0},{x:0,y:s},{x:n,y:s},{x:n/2,y:0},{x:n/2,y:s}]}function Qw(t,a){const e=Un*.6,n=t.x-a.x,s=t.y-a.y,o=Math.hypot(n,s);return{x:t.x-n/o*e,y:t.y-s/o*e}}function df(){const t=w.useRef(null),a=w.useRef(null),e=w.useRef({cue:f.createRef(),8:f.createRef(),9:f.createRef(),10:f.createRef()}),n=w.useRef({}),s=w.useRef({}),o=w.useRef(null),l=w.useRef(null),u=w.useRef(0),h=w.useRef(1),[m,p]=w.useState(!1);function v(){Object.keys(n.current).forEach(I=>{s.current[I]={x:n.current[I].x,y:n.current[I].y}})}function b(){const I=t.current;if(!I)return;const M=I.offsetWidth,A=I.offsetHeight,k=M/h.current,O=A/h.current,U=k*.3,q=O/2,Y=Un*.87,$=Un/2;function K(){return(Math.random()-.5)*2.5}n.current={8:{ref:e.current[8],x:U+K(),y:q+K(),vx:0,vy:0,isMoving:!1,visible:!0},9:{ref:e.current[9],x:U-Y+K(),y:q-$+K(),vx:0,vy:0,isMoving:!1,visible:!0},10:{ref:e.current[10],x:U-Y+K(),y:q+$+K(),vx:0,vy:0,isMoving:!1,visible:!0},cue:{ref:e.current.cue,x:k*.8+K(),y:O/2+K(),vx:0,vy:0,isMoving:!1,visible:!0}},Object.values(n.current).forEach(pe=>{pe.ref.current&&(pe.ref.current.style.opacity=1)}),v()}function _(){b(),u.current=0,setTimeout(()=>{C()},1e3)}w.useEffect(()=>{if(t.current&&!m){const I=t.current,M=I.offsetWidth,A=I.offsetHeight;if(M<400||A<200)h.current=.55;else{const k=M/Fi,O=A/Vo;h.current=Math.min(k,O)}b(),setTimeout(()=>{C()},1e3),p(!0)}return()=>{cancelAnimationFrame(o.current),clearTimeout(l.current)}},[m]);function C(){if(!n.current.cue||n.current.cue.isMoving)return;const I=n.current.cue;if(u.current+=1,u.current===1){const M=n.current[8],A=M.x-I.x,k=M.y-I.y,O=Math.atan2(k,A)+(Math.random()-.5)*(Math.PI/36),U=15+Math.random()*2;I.vx=Math.cos(O)*U,I.vy=Math.sin(O)*U,I.isMoving=!0,E();return}S()}function S(){var z,D,H;const I=["8","9","10"],M=I.find(W=>{var F;return(F=n.current[W])==null?void 0:F.visible});if(!M)return;const A=n.current.cue,k=n.current[M],O=t.current;if(!O)return;const U=O.offsetWidth,q=O.offsetHeight,Y=SN(U,q,h.current);let $=null,K=1/0;for(const W of Y){const F=Qw(W,k),R=F.x-k.x,P=F.y-k.y,G=Math.hypot(R,P),Q=k.x-R/G*Un,re=k.y-P/G*Un;let Ee=!1;for(const vt of I)if(vt!==M&&(z=n.current[vt])!=null&&z.visible&&Lp(A.x,A.y,Q,re,{...n.current[vt],key:vt},M)){Ee=!0;break}let ye=!1;for(const vt of I.concat("cue"))if(vt!==M&&(D=n.current[vt])!=null&&D.visible&&Lp(k.x,k.y,F.x,F.y,{...n.current[vt],key:vt},M)){ye=!0;break}let qe=0;for(const vt of Y)Math.hypot(Q-vt.x,re-vt.y)<Un*1.8&&(qe+=1);const ve=Fi/2,Ve=Vo/2,ot=Math.hypot(A.x-Q,A.y-re),St=Math.hypot(Q-ve,re-Ve),Ct=(Ee?1e3:0)+(ye?1e3:0)+qe*150+ot*.7+St*.3;Ct<K&&(K=Ct,$={ghostX:Q,ghostY:re})}if(!$||K>999)for(const W of Y){const F=U/h.current,R=q/h.current,P=[{x:Math.max(k.x,2*Wn),y:0},{x:Math.max(k.x,2*Wn),y:R},{x:0,y:Math.max(k.y,2*Wn)},{x:F,y:Math.max(k.y,2*Wn)}];for(const G of P){const Q=Qw(W,k);let re=Q.x,Ee=Q.y;G.x===0&&(re=-Q.x),G.x===F&&(re=2*F-Q.x),G.y===0&&(Ee=-Q.y),G.y===R&&(Ee=2*R-Q.y);const ye=re-k.x,qe=Ee-k.y,ve=Math.hypot(ye,qe),Ve=k.x-ye/ve*Un,ot=k.y-qe/ve*Un;let St=!1;for(const En of I)if(En!==M&&(H=n.current[En])!=null&&H.visible&&Lp(A.x,A.y,Ve,ot,{...n.current[En],key:En},M)){St=!0;break}const Ct=Math.hypot(A.x-Ve,A.y-ot),vt=(St?2e3:0)+Ct*1.2+500;vt<K&&(K=vt,$={ghostX:Ve,ghostY:ot})}}if(!$||K>1999){const W=U/h.current,F=q/h.current,R=[{x:A.x,y:0},{x:A.x,y:F},{x:0,y:A.y},{x:W,y:A.y}];for(const P of R){let G=k.x,Q=k.y;P.x===0&&(G=-k.x),P.x===W&&(G=2*W-k.x),P.y===0&&(Q=-k.y),P.y===F&&(Q=2*F-k.y);const re=G-A.x,Ee=Q-A.y,ye=Math.hypot(re,Ee),qe=A.x+re/ye*(ye*.9),ve=A.y+Ee/ye*(ye*.9),ot=Math.hypot(A.x-qe,A.y-ve)*2+2e3;ot<K&&(K=ot,$={ghostX:qe,ghostY:ve})}}if(!$){const W=Math.atan2(k.y-A.y,k.x-A.x)+(Math.random()-.5)*.2,F=Math.hypot(k.x-A.x,k.y-A.y);$={ghostX:A.x+Math.cos(W)*F*.8,ghostY:A.y+Math.sin(W)*F*.8}}const pe=$.ghostX-A.x,ie=$.ghostY-A.y,ne=Math.hypot(pe,ie),se=7;A.vx=pe/ne*se,A.vy=ie/ne*se,A.isMoving=!0,E()}function E(){const A=t.current;if(!A)return;const k=A.offsetWidth,O=A.offsetHeight,U=Wn*3.5,q=U,Y=k/h.current-U,$=U,K=O/h.current-U;function pe(){for(let ie=0;ie<16;ie++){Object.entries(n.current).forEach(([se,z])=>{if(!z.visible)return;let D=z.x+z.vx/16,H=z.y+z.vy/16;D<q+Wn?(z.x=q+Wn,z.vx=Math.abs(z.vx)*.75):D>Y-Wn?(z.x=Y-Wn,z.vx=-Math.abs(z.vx)*.75):z.x=D,H<$+Wn?(z.y=$+Wn,z.vy=Math.abs(z.vy)*.75):H>K-Wn?(z.y=K-Wn,z.vy=-Math.abs(z.vy)*.75):z.y=H,z.vx*=Math.pow(.99,1/16),z.vy*=Math.pow(.99,1/16),CN(z,h.current)&&(z.isMoving=!1,z.visible=!1,z.ref.current&&(z.ref.current.style.opacity=0)),z.isMoving&&Math.abs(z.vx)<.03&&Math.abs(z.vy)<.03&&(z.vx=0,z.vy=0,z.isMoving=!1)});const ne=Object.keys(n.current);for(let se=0;se<ne.length;se++)for(let z=se+1;z<ne.length;z++){const D=n.current[ne[se]],H=n.current[ne[z]];!D.visible||!H.visible||_N(D,H,Un,h.current)}}if(Object.entries(n.current).forEach(([ie,ne])=>{if(ne.ref.current&&ne.visible){const se=ne.x*h.current-Wn*h.current,z=ne.y*h.current-Wn*h.current,D=Un*h.current,H=k-D,W=O-D;ne.ref.current.style.left=Math.max(0,Math.min(se,H))+"px",ne.ref.current.style.top=Math.max(0,Math.min(z,W))+"px",ne.ref.current.style.width=D+"px",ne.ref.current.style.height=D+"px",ne.ref.current.style.opacity=1}}),!n.current.cue.visible){setTimeout(()=>{const ie=s.current.cue;ie&&(n.current.cue.x=ie.x,n.current.cue.y=ie.y),n.current.cue.vx=0,n.current.cue.vy=0,n.current.cue.isMoving=!1,n.current.cue.visible=!0,n.current.cue.ref.current&&(n.current.cue.ref.current.style.opacity=1),setTimeout(()=>{S()},500)},800);return}if(!n.current[10].visible){setTimeout(()=>{_()},1200);return}Object.values(n.current).some(ie=>ie.isMoving)?o.current=requestAnimationFrame(pe):l.current||(l.current=setTimeout(()=>{l.current=null,S()},1200))}o.current=requestAnimationFrame(pe)}return f.createElement("div",{ref:t,style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(180deg, #1a1a1a 0%, #000000 100%)",zIndex:0,boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)"}},f.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(ellipse 1200px 800px at center 60px, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 20%, rgba(255,255,255,0.02) 40%, rgba(255,255,255,0.01) 60%, transparent 80%)",zIndex:3,pointerEvents:"none"}}),f.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),f.createElement("div",{style:{position:"absolute",top:"10%",left:"5%",width:"90%",height:"80%",background:"linear-gradient(90deg, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0.10) 30%, rgba(0,0,0,0.06) 60%, rgba(0,0,0,0.02) 85%, transparent 100%)",zIndex:3,pointerEvents:"none",borderRadius:"10%"}}),f.createElement("img",{ref:a,src:T_,alt:"Pool Table",style:{width:"100%",height:"100%",display:"block",objectFit:"fill",position:"absolute",top:1,left:0,zIndex:1,pointerEvents:"none",opacity:1,filter:"opacity(1) contrast(1.3) brightness(1.25) saturate(1.1)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.3)"}}),f.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",zIndex:2}},f.createElement("img",{src:Cy,alt:"League Logo",style:{position:"absolute",left:"50%",top:"50%",width:"30.5%",height:"auto",transform:"translate(-50%, -50%)",objectFit:"contain",zIndex:2,opacity:.25,filter:"drop-shadow(0 1px 4px rgba(0,0,0,0.3))",pointerEvents:"none",userSelect:"none"}})),wN.map(I=>{var M,A;return f.createElement(f.Fragment,{key:I.key},f.createElement("img",{src:I.src,alt:I.alt,ref:e.current[I.key],className:Va.pinBallImg,style:{position:"absolute",left:0,top:0,width:Un,height:Un,zIndex:10,opacity:((M=n.current[I.key])==null?void 0:M.visible)===!1?0:1,transition:"none",pointerEvents:"none",filter:"opacity(1) contrast(1.3) brightness(1.2) saturate(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%"}}),f.createElement("div",{style:{position:"absolute",left:3,top:3,width:Un-6,height:Un-6,borderRadius:"50%",background:"radial-gradient(ellipse 8px 4px at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, transparent 100%)",zIndex:11,opacity:((A=n.current[I.key])==null?void 0:A.visible)===!1?0:.8,pointerEvents:"none"}}))}))}function k_({aspectWidth:t,aspectHeight:a,children:e}){const n=w.useRef(null),[s,o]=w.useState(1);return w.useLayoutEffect(()=>{function l(){if(!n.current)return;const{width:h,height:m}=n.current.getBoundingClientRect();o(Math.min(h/t,m/a))}l();const u=new window.ResizeObserver(l);return u.observe(n.current),()=>u.disconnect()},[t,a]),f.createElement("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",overflow:"visible"}},f.createElement("div",{style:{width:t,height:a,transform:`scale(${s})`,transformOrigin:"top left",position:"absolute",top:0,left:0}},e))}function EN({open:t,onClose:a,standingsUrl:e}){const[n,s]=w.useState(!0);return t?f.createElement(zn,{open:t,onClose:a,title:" League Standings",maxWidth:"90vw",className:"standings-modal"},f.createElement("div",{style:{height:"70vh",width:"100%",position:"relative"}},n&&f.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,color:"#e53e3e",fontSize:"1.2rem",fontWeight:"bold"}},"Loading standings..."),f.createElement("iframe",{src:e,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",background:"#fff"},title:"League Standings",onLoad:()=>s(!1)})),f.createElement("div",{style:{marginTop:"1rem",textAlign:"center",color:"#888",fontSize:"0.9rem"}},"Front Range Pool League")):null}const xN="_modalOverlay_1l7ua_7",IN="_modalContentSnazzy_1l7ua_33",DN="_modalHeaderSnazzy_1l7ua_69",MN="_modalAccentBar_1l7ua_89",AN="_modalTitleSnazzy_1l7ua_107",TN="_modalCloseBtnSnazzy_1l7ua_131",NN="_modalDetailsSnazzy_1l7ua_173",RN="_modalDetailRowSnazzy_1l7ua_189",kN="_modalDetailIcon_1l7ua_217",LN="_modalDetailLabelSnazzy_1l7ua_229",ON="_modalDetailValueSnazzy_1l7ua_243",PN="_modalOpponentName_1l7ua_263",BN="_modalVs_1l7ua_277",UN="_gameTypeIcon_1l7ua_293",zN="_modalActionBtn_1l7ua_397",Ke={modalOverlay:xN,modalContentSnazzy:IN,modalHeaderSnazzy:DN,modalAccentBar:MN,modalTitleSnazzy:AN,modalCloseBtnSnazzy:TN,modalDetailsSnazzy:NN,modalDetailRowSnazzy:RN,modalDetailIcon:kN,modalDetailLabelSnazzy:LN,modalDetailValueSnazzy:ON,modalOpponentName:PN,modalVs:BN,gameTypeIcon:UN,modalActionBtn:zN},Vw=""+new URL("ball9-U9rUK9VA.jpg",import.meta.url).href,Xw=""+new URL("ball10-pPX9kWaM.jpg",import.meta.url).href;function _y({open:t,onClose:a,player1:e,player2:n,onSelect:s}){return t?f.createElement(zn,{open:t,onClose:a,title:"Who won?",maxWidth:"340px"},f.createElement("div",{style:{textAlign:"center",marginBottom:18,color:"#fff",fontSize:"1.1em"}},"Please select the winner:"),f.createElement("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"}},f.createElement("button",{style:{background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>s(e)},e),f.createElement("button",{style:{background:"#23232a",color:"#e53e3e",border:"2px solid #e53e3e",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>s(n)},n)),f.createElement("button",{style:{marginTop:24,background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:a},"Cancel")):null}const HN=ht;class Kt{static async request(a,e={}){const n=`${HN}${a}`,s={headers:{"Content-Type":"application/json",Accept:"application/json",...e.headers},signal:AbortSignal.timeout(3e4),credentials:"include",mode:"cors",...e},o=3;let l;for(let u=1;u<=o;u++)try{console.log(`API Request (attempt ${u}): ${n}`);const h=await fetch(n,s);if(!h.ok)throw new Error(`API Error: ${h.status} - ${h.statusText}`);const m=await h.json();return console.log(`API Success: ${n}`),m}catch(h){if(l=h,console.warn(`API Request failed (attempt ${u}/${o}): ${n}`,h),h.message.includes("400")||h.message.includes("401")||h.message.includes("403")||h.message.includes("404"))break;if(u<o){const m=Math.min(1e3*Math.pow(2,u-1),5e3);await new Promise(p=>setTimeout(p,m))}}throw console.error(`API Request failed after ${o} attempts: ${n}`,l),l}static get(a){return this.request(a)}static post(a,e){return this.request(a,{method:"POST",body:JSON.stringify(e)})}static patch(a,e){return this.request(a,{method:"PATCH",body:JSON.stringify(e)})}static delete(a){return this.request(a,{method:"DELETE"})}static async testConnection(){try{const a=await this.get("/health");return console.log("Backend connection test successful:",a),!0}catch(a){return console.error("Backend connection test failed:",a),!1}}}const di={async getPendingProposals(t,a){return Kt.get(`/api/proposals/by-name?receiverName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async getSentProposals(t,a){return Kt.get(`/api/proposals/by-sender?senderName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async updateProposalStatus(t,a,e){return Kt.patch(`/api/proposals/${t}/status`,{status:a,note:e})},async createProposal(t){return Kt.post("/api/proposals",t)},async counterProposal(t,a){return Kt.patch(`/api/proposals/${t}/counter`,a)},async markCompleted(t,a,e,n){return Kt.patch(`/api/matches/completed/${t}`,{winner:a,markedByName:e,markedByEmail:n})},async cancelProposal(t){return Kt.post(`/api/proposals/${t}/cancel`)}};function YN(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function FN({open:t,onClose:a,match:e,onCompleted:n,userPin:s,onMatchUpdated:o,senderName:l,senderEmail:u}){const[h,m]=w.useState({x:0,y:0}),[p,v]=w.useState(!1),b=w.useRef({x:0,y:0}),_=ne=>{v(!0),b.current={x:ne.clientX-h.x,y:ne.clientY-h.y},document.body.style.userSelect="none"},C=ne=>{p&&m({x:ne.clientX-b.current.x,y:ne.clientY-b.current.y})},S=()=>{v(!1),document.body.style.userSelect=""};w.useEffect(()=>(p?(window.addEventListener("mousemove",C),window.addEventListener("mouseup",S)):(window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",S)),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",S)}),[p]);const[E,I]=w.useState(!1),[M,A]=w.useState(!1),[k,O]=w.useState({player1:"",player2:""}),[U,q]=w.useState(e);w.useEffect(()=>{q(e)},[e]);const Y=()=>{let ne=e.player||e.senderName,se=e.opponent||e.receiverName;O({player1:ne,player2:se}),A(!0)},$=async ne=>{A(!1),I(!0);const se=l&&l.trim()?l:U.player||U.senderName||"Unknown",z=u&&u.trim()?u:U.senderEmail||"unknown@example.com";console.log("Marking winner with:",{winner:ne,markedByName:se,markedByEmail:z});try{const D=await di.markCompleted(U._id,ne,se,z);D&&D.proposal?(q(D.proposal),o&&o(D.proposal)):(q({...U,winner:ne}),o&&o({...U,winner:ne})),n&&n(U._id)}catch{alert("Failed to mark as completed.")}I(!1)};if(!t||!U)return null;let K=new Date,pe="",ie="";if(U.date&&U.time){const[ne,se,z]=U.date.split("-"),D=`${ne}-${se.padStart(2,"0")}-${z.padStart(2,"0")}`;let H=U.time.trim().toUpperCase(),[W,F]=H.split(" "),[R,P]=W.split(":").map(Number);F==="PM"&&R<12&&(R+=12),F==="AM"&&R===12&&(R=0);const G=R.toString().padStart(2,"0"),Q=(P||0).toString().padStart(2,"0"),re=`${G}:${Q}`;K=new Date(`${D}T${re}:00`),pe=YN(U.date),ie=K.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}return f.createElement("div",{className:Ke.modalOverlay,onClick:a},f.createElement("div",{className:Ke.modalContentSnazzy,style:{transform:`translate(${h.x}px, ${h.y}px)`,cursor:p?"grabbing":"default"},onClick:ne=>ne.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Match Details",tabIndex:-1},f.createElement("button",{className:Ke.modalCloseBtnSnazzy,onClick:a,"aria-label":"Close"},""),f.createElement("div",{className:Ke.modalHeaderSnazzy,onMouseDown:_,style:{cursor:"grab",userSelect:"none"}},f.createElement("span",{className:Ke.modalAccentBar}),f.createElement("h2",{className:Ke.modalTitleSnazzy}," Match Details")),f.createElement("div",{className:Ke.modalDetailsSnazzy},f.createElement("div",{className:Ke.modalDetailRowSnazzy},f.createElement("span",{className:Ke.modalDetailIcon},""),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Players:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},f.createElement("span",{className:Ke.modalOpponentName},U.player||U.senderName),f.createElement("span",{className:Ke.modalVs},"vs"),f.createElement("span",{className:Ke.modalOpponentName},U.opponent||U.receiverName))),f.createElement("div",{className:Ke.modalDetailRowSnazzy},f.createElement("span",{className:Ke.modalDetailIcon},""),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Date:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},pe)),f.createElement("div",{className:Ke.modalDetailRowSnazzy},f.createElement("span",{className:Ke.modalDetailIcon},""),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Time:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},ie)),f.createElement("div",{className:Ke.modalDetailRowSnazzy},f.createElement("span",{className:Ke.modalDetailIcon},""),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Location:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},U.location)),U.gameType&&f.createElement("div",{className:Ke.modalDetailRowSnazzy},jN(U.gameType),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Game Type:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},U.gameType)),U.raceLength&&f.createElement("div",{className:Ke.modalDetailRowSnazzy},f.createElement("span",{className:Ke.modalDetailIcon},""),f.createElement("span",{className:Ke.modalDetailLabelSnazzy},"Race to:"),f.createElement("span",{className:Ke.modalDetailValueSnazzy},U.raceLength)),U.winner&&f.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}}," Winner: ",U.winner,s==="777777"&&U.winnerChangedByName&&f.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",U.winnerChangedByName,U.winnerChangedAt?` on ${new Date(U.winnerChangedAt).toLocaleString()}`:"",")"))),!U.completed&&f.createElement(f.Fragment,null,f.createElement("button",{className:Ke.modalActionBtn,onClick:Y,disabled:E,style:{marginTop:16,minWidth:180},type:"button"},E?"Marking...":"Mark as Completed"),f.createElement(_y,{open:M,onClose:()=>A(!1),player1:k.player1,player2:k.player2,onSelect:$}))))}function jN(t){if(!t)return f.createElement("span",{className:Ke.modalDetailIcon},"");const a=t.trim().toLowerCase();return a==="8 ball"||a==="8-ball"||a==="8ball"?f.createElement("img",{src:uf,alt:"8 Ball",className:Ke.gameTypeIcon}):a==="9 ball"||a==="9-ball"||a==="9ball"?f.createElement("img",{src:Vw,alt:"9 Ball",className:Ke.gameTypeIcon}):a==="10 ball"||a==="10-ball"||a==="10ball"?f.createElement("img",{src:Xw,alt:"10 Ball",className:Ke.gameTypeIcon}):a==="mixed"||a==="mixed games"?f.createElement(f.Fragment,null,f.createElement("img",{src:uf,alt:"8 Ball",className:Ke.gameTypeIcon}),f.createElement("img",{src:Vw,alt:"9 Ball",className:Ke.gameTypeIcon}),f.createElement("img",{src:Xw,alt:"10 Ball",className:Ke.gameTypeIcon})):f.createElement("span",{className:Ke.modalDetailIcon},"")}const WN="_proposalList_1gl2k_39",GN="_proposalCardButton_1gl2k_169",ZN="_proposalCardLabel_1gl2k_211",$N="_proposalCardMessage_1gl2k_223",qN="_modalContent_1gl2k_277",QN="_confirmDialogBox_1gl2k_345",Bn={proposalList:WN,proposalCardButton:GN,proposalCardLabel:ZN,proposalCardMessage:$N,modalContent:qN,confirmDialogBox:QN};function Kw(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function VN(t){if(!t)return"N/A";if(t.includes(":")&&t.length===5){const[a,e]=t.split(":"),n=parseInt(a),s=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${e} ${s}`}return t}function Op({proposals:t,onSelect:a,onClose:e,type:n="received",isAdmin:s=!1,senderEmail:o,senderName:l,onProposalUpdated:u}){console.log("Proposals:",t);const[h,m]=w.useState(null),[p,v]=w.useState(!1),[b,_]=w.useState(""),[C,S]=w.useState(t),[E,I]=w.useState("all"),M=t.filter(z=>z.isCounter),A=t.filter(z=>!z.isCounter),k=E==="counter"?M:A,[O,U]=w.useState(!1),[q,Y]=w.useState(null),[$,K]=w.useState({player1:"",player2:""}),[pe,ie]=w.useState(!1),ne=async z=>{v(!0),_("");try{await di.cancelProposal(z),S(D=>D.filter(H=>H._id!==z)),m(null)}catch{_("Failed to cancel proposal. Please try again.")}finally{v(!1)}},se=n==="completed"?C:t;return f.createElement(zn,{open:!0,onClose:e,title:n==="completed"?"Completed Matches":n==="sent"?"Matches You Proposed":"Pending Match Proposals",maxWidth:"600px"},f.createElement("div",{className:Bn.modalContent,style:{position:"relative",maxHeight:"none",overflowY:"visible"}},n!=="completed"&&f.createElement("div",{style:{display:"flex",gap:8,marginBottom:16}},f.createElement("button",{onClick:()=>I("all"),style:{background:E==="all"?"#e53e3e":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:E==="all"?"0 2px 8px #e53e3e44":"none",position:"relative"}},"All Proposals (",A.length,")",A.length>0&&f.createElement("span",{style:{background:"#fff",color:"#e53e3e",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},A.length)),f.createElement("button",{onClick:()=>I("counter"),style:{background:E==="counter"?"#ff9800":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:E==="counter"?"0 2px 8px #ff980044":"none",position:"relative"}},"Counter Proposals (",M.length,")",M.length>0&&f.createElement("span",{style:{background:"#fff",color:"#ff9800",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},M.length))),f.createElement("ul",{className:Bn.proposalList,style:{listStyle:"none",padding:0,margin:0}},n==="completed"?se.map(z=>f.createElement("li",{key:z._id,style:{position:"relative",marginBottom:12}},f.createElement("div",{className:Bn.proposalCardButton,style:{cursor:"default",background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"1rem",fontWeight:600}},f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Opponent:")," ",z.opponent||z.receiverName||z.senderName),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Date:")," ",Kw(z.date),"  ",f.createElement("span",{className:Bn.proposalCardLabel},"Time:")," ",z.time),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Location:")," ",z.location),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Game Type:")," ",z.gameType),z.winner&&f.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}}," Winner: ",z.winner,s&&z.winnerChangedByName&&f.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",z.winnerChangedByName,z.winnerChangedAt?` on ${new Date(z.winnerChangedAt).toLocaleString()}`:"",")")),s&&f.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"1px solid #ffd700",borderRadius:6,padding:"4px 12px",fontWeight:600,cursor:"pointer",fontSize:"0.95em",display:"inline-block"},disabled:pe,onClick:()=>{const D=z.player||z.senderName,H=z.opponent||z.receiverName;Y(z),K({player1:D,player2:H}),U(!0)},type:"button"},pe?"Saving...":z.winner?"Edit Winner":"Set Winner")))):k.map(z=>f.createElement("li",{key:z._id,style:{position:"relative"}},f.createElement("button",{onClick:()=>a(z),className:Bn.proposalCardButton},f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},n==="sent"?"To:":"From:"),n==="sent"?z.receiverName:z.senderName,z.isCounter&&f.createElement("span",{style:{background:"#ff9800",color:"#fff",borderRadius:"6px",padding:"2px 8px",fontSize:"0.85em",marginLeft:"8px",fontWeight:"bold",display:"inline-block"}},"Counter Proposal")),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Date:")," ",Kw(z.date),"  ",f.createElement("span",{className:Bn.proposalCardLabel},"Time:")," ",VN(z.time)),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Location:")," ",z.location),f.createElement("div",{className:Bn.proposalCardMessage},z.message),f.createElement("div",null,f.createElement("span",{className:Bn.proposalCardLabel},"Status:"),f.createElement("span",{style:{color:z.status==="pending"?"#d32f2f":z.status==="countered"?"#fbc02d":"#388e3c"}},z.status))),n==="sent"&&z.status==="pending"&&f.createElement("button",{className:Bn.cancelProposalBtn,style:{position:"absolute",top:10,right:10},onClick:D=>{D.stopPropagation(),m(z._id)},disabled:p},"Cancel")))),k.length===0&&f.createElement("div",{style:{color:"#ffecb3",textAlign:"center",marginTop:16}},"Nothing to see here."),h&&f.createElement("div",{className:Bn.confirmDialogBox,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1001,background:"#222",color:"#fff",borderRadius:"10px",padding:"2rem 2.5rem",boxShadow:"0 4px 32px #000a",maxWidth:"90vw",minWidth:"260px",textAlign:"center",border:"2px solid #e53e3e"}},f.createElement("p",null,"Are you sure you want to cancel this proposal?"),f.createElement("button",{onClick:()=>ne(h),disabled:p,style:{marginRight:12}},p?"Cancelling...":"Yes, Cancel"),f.createElement("button",{onClick:()=>m(null),disabled:p},"No, Go Back"),b&&f.createElement("div",{style:{color:"red",marginTop:8}},b))),f.createElement(_y,{open:O,onClose:()=>U(!1),player1:$.player1,player2:$.player2,onSelect:async z=>{if(q){ie(!0);try{const D=await di.markCompleted(q._id,z,l,o),H=D&&D.proposal?D.proposal:{...q,winner:z,winnerChangedByName:l,winnerChangedByEmail:o,winnerChangedAt:new Date().toISOString()};S(W=>W.map(F=>F._id===q._id?H:F)),u&&u(H),U(!1)}catch{alert("Failed to update winner.")}ie(!1)}}}))}function XN(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function KN({proposal:t,phase:a,userNote:e,setUserNote:n,onConfirm:s,onClose:o,onCounterPropose:l,showNote:u=!0,confirmLabel:h=" Confirm Match",currentUserName:m,currentUserEmail:p}){if(!t)return null;const{senderName:v,receiverName:b,senderEmail:_,receiverEmail:C,day:S,date:E,time:I,location:M,gameType:A,raceLength:k,message:O,proposalNote:U}=t,q=p&&_&&p.toLowerCase()===_.toLowerCase()||m&&v&&m.toLowerCase()===v.toLowerCase();return f.createElement("div",{className:Je.confirmMatchCard},f.createElement("h1",{className:Je.confirmMatchTitle},f.createElement("span",{className:Je.redTitle}," Confirm Match")),f.createElement("div",{className:Je.confirmMatchDetails},f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"You:")," ",b||t.to||"N/A"),f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Opponent:")," ",v||t.from||"N/A"),S&&f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Day:")," ",S),f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Date:")," ",XN(E)),f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Time:")," ",I||"N/A"),f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Location:")," ",M||"N/A"),A&&f.createElement("div",{className:Je.detailRow},f.createElement(ah,{gameType:A,size:16}),f.createElement("strong",{className:Je.redTitle},"Game Type:")," ",A),k&&f.createElement("div",{className:Je.detailRow},f.createElement("strong",{className:Je.redTitle},"Race to:")," ",k),f.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:18,justifyContent:"center",paddingBottom:8,width:"100%",boxSizing:"border-box"}},q?f.createElement(f.Fragment,null,f.createElement("span",{style:{color:"#888",fontWeight:500,fontSize:"1.1em"}},"You proposed this match. You can edit or message, but only your opponent can confirm/counter/cancel."),f.createElement("button",{className:Je.confirmBtn,style:{background:"#aaa",minWidth:120,marginLeft:16},onClick:o},"OK")):f.createElement(f.Fragment,null,f.createElement("button",{className:Je.confirmBtn,style:{minWidth:120},onClick:s},h),l&&f.createElement("button",{className:Je.confirmBtn,style:{background:"#fff",color:"#d32f2f",border:"1.5px solid #d32f2f",minWidth:120},onClick:l,type:"button"},"Counter-Propose"),f.createElement("button",{className:Je.confirmBtn,style:{background:"#aaa",minWidth:120},onClick:o},"Close")))))}function L_(t){var a,e,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(a=0;a<s;a++)t[a]&&(e=L_(t[a]))&&(n&&(n+=" "),n+=e)}else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Hn(){for(var t,a,e=0,n="",s=arguments.length;e<s;e++)(t=arguments[e])&&(a=L_(t))&&(n&&(n+=" "),n+=a);return n}function oh(){return typeof window<"u"}function gl(t){return O_(t)?(t.nodeName||"").toLowerCase():"#document"}function Ra(t){var a;return(t==null||(a=t.ownerDocument)==null?void 0:a.defaultView)||window}function jr(t){var a;return(a=(O_(t)?t.ownerDocument:t.document)||window.document)==null?void 0:a.documentElement}function O_(t){return oh()?t instanceof Node||t instanceof Ra(t).Node:!1}function ra(t){return oh()?t instanceof Element||t instanceof Ra(t).Element:!1}function Hr(t){return oh()?t instanceof HTMLElement||t instanceof Ra(t).HTMLElement:!1}function Jw(t){return!oh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ra(t).ShadowRoot}function nu(t){const{overflow:a,overflowX:e,overflowY:n,display:s}=nr(t);return/auto|scroll|overlay|hidden|clip/.test(a+n+e)&&!["inline","contents"].includes(s)}function JN(t){return["table","td","th"].includes(gl(t))}function lh(t){return[":popover-open",":modal"].some(a=>{try{return t.matches(a)}catch{return!1}})}function Sy(t){const a=Ey(),e=ra(t)?nr(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!a&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!a&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function eR(t){let a=mi(t);for(;Hr(a)&&!sl(a);){if(Sy(a))return a;if(lh(a))return null;a=mi(a)}return null}function Ey(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sl(t){return["html","body","#document"].includes(gl(t))}function nr(t){return Ra(t).getComputedStyle(t)}function ch(t){return ra(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mi(t){if(gl(t)==="html")return t;const a=t.assignedSlot||t.parentNode||Jw(t)&&t.host||jr(t);return Jw(a)?a.host:a}function P_(t){const a=mi(t);return sl(a)?t.ownerDocument?t.ownerDocument.body:t.body:Hr(a)&&nu(a)?a:P_(a)}function Zc(t,a,e){var n;a===void 0&&(a=[]),e===void 0&&(e=!0);const s=P_(t),o=s===((n=t.ownerDocument)==null?void 0:n.body),l=Ra(s);if(o){const u=Ig(l);return a.concat(l,l.visualViewport||[],nu(s)?s:[],u&&e?Zc(u):[])}return a.concat(s,Zc(s,[],e))}function Ig(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const il=Math.min,qi=Math.max,ff=Math.round,bd=Math.floor,zr=t=>({x:t,y:t}),tR={left:"right",right:"left",bottom:"top",top:"bottom"},nR={start:"end",end:"start"};function aR(t,a,e){return qi(t,il(a,e))}function uh(t,a){return typeof t=="function"?t(a):t}function ol(t){return t.split("-")[0]}function au(t){return t.split("-")[1]}function rR(t){return t==="x"?"y":"x"}function xy(t){return t==="y"?"height":"width"}function Xo(t){return["top","bottom"].includes(ol(t))?"y":"x"}function Iy(t){return rR(Xo(t))}function sR(t,a,e){e===void 0&&(e=!1);const n=au(t),s=Iy(t),o=xy(s);let l=s==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return a.reference[o]>a.floating[o]&&(l=hf(l)),[l,hf(l)]}function iR(t){const a=hf(t);return[Dg(t),a,Dg(a)]}function Dg(t){return t.replace(/start|end/g,a=>nR[a])}function oR(t,a,e){const n=["left","right"],s=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return e?a?s:n:a?n:s;case"left":case"right":return a?o:l;default:return[]}}function lR(t,a,e,n){const s=au(t);let o=oR(ol(t),e==="start",n);return s&&(o=o.map(l=>l+"-"+s),a&&(o=o.concat(o.map(Dg)))),o}function hf(t){return t.replace(/left|right|bottom|top/g,a=>tR[a])}function cR(t){return{top:0,right:0,bottom:0,left:0,...t}}function B_(t){return typeof t!="number"?cR(t):{top:t,right:t,bottom:t,left:t}}function mf(t){const{x:a,y:e,width:n,height:s}=t;return{width:n,height:s,top:e,left:a,right:a+n,bottom:e+s,x:a,y:e}}var pf=typeof document<"u"?w.useLayoutEffect:w.useEffect;const uR={...GC},dR=uR.useInsertionEffect,fR=dR||(t=>t());function hR(t){const a=w.useRef(()=>{});return fR(()=>{a.current=t}),w.useCallback(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return a.current==null?void 0:a.current(...n)},[])}var Pp={exports:{}},yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function mR(){if(e1)return yc;e1=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function e(n,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:t,type:n,key:l,ref:s!==void 0?s:null,props:o}}return yc.Fragment=a,yc.jsx=e,yc.jsxs=e,yc}var t1;function pR(){return t1||(t1=1,Pp.exports=mR()),Pp.exports}var vc=pR();function n1(t,a,e){let{reference:n,floating:s}=t;const o=Xo(a),l=Iy(a),u=xy(l),h=ol(a),m=o==="y",p=n.x+n.width/2-s.width/2,v=n.y+n.height/2-s.height/2,b=n[u]/2-s[u]/2;let _;switch(h){case"top":_={x:p,y:n.y-s.height};break;case"bottom":_={x:p,y:n.y+n.height};break;case"right":_={x:n.x+n.width,y:v};break;case"left":_={x:n.x-s.width,y:v};break;default:_={x:n.x,y:n.y}}switch(au(a)){case"start":_[l]-=b*(e&&m?-1:1);break;case"end":_[l]+=b*(e&&m?-1:1);break}return _}const gR=async(t,a,e)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:l}=e,u=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(a));let m=await l.getElementRects({reference:t,floating:a,strategy:s}),{x:p,y:v}=n1(m,n,h),b=n,_={},C=0;for(let S=0;S<u.length;S++){const{name:E,fn:I}=u[S],{x:M,y:A,data:k,reset:O}=await I({x:p,y:v,initialPlacement:n,placement:b,strategy:s,middlewareData:_,rects:m,platform:l,elements:{reference:t,floating:a}});p=M??p,v=A??v,_={..._,[E]:{..._[E],...k}},O&&C<=50&&(C++,typeof O=="object"&&(O.placement&&(b=O.placement),O.rects&&(m=O.rects===!0?await l.getElementRects({reference:t,floating:a,strategy:s}):O.rects),{x:p,y:v}=n1(m,b,h)),S=-1)}return{x:p,y:v,placement:b,strategy:s,middlewareData:_}};async function yR(t,a){var e;a===void 0&&(a={});const{x:n,y:s,platform:o,rects:l,elements:u,strategy:h}=t,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:v="floating",altBoundary:b=!1,padding:_=0}=uh(a,t),C=B_(_),E=u[b?v==="floating"?"reference":"floating":v],I=mf(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(E)))==null||e?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:m,rootBoundary:p,strategy:h})),M=v==="floating"?{x:n,y:s,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),k=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},O=mf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:M,offsetParent:A,strategy:h}):M);return{top:(I.top-O.top+C.top)/k.y,bottom:(O.bottom-I.bottom+C.bottom)/k.y,left:(I.left-O.left+C.left)/k.x,right:(O.right-I.right+C.right)/k.x}}const vR=t=>({name:"arrow",options:t,async fn(a){const{x:e,y:n,placement:s,rects:o,platform:l,elements:u,middlewareData:h}=a,{element:m,padding:p=0}=uh(t,a)||{};if(m==null)return{};const v=B_(p),b={x:e,y:n},_=Iy(s),C=xy(_),S=await l.getDimensions(m),E=_==="y",I=E?"top":"left",M=E?"bottom":"right",A=E?"clientHeight":"clientWidth",k=o.reference[C]+o.reference[_]-b[_]-o.floating[C],O=b[_]-o.reference[_],U=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let q=U?U[A]:0;(!q||!await(l.isElement==null?void 0:l.isElement(U)))&&(q=u.floating[A]||o.floating[C]);const Y=k/2-O/2,$=q/2-S[C]/2-1,K=il(v[I],$),pe=il(v[M],$),ie=K,ne=q-S[C]-pe,se=q/2-S[C]/2+Y,z=aR(ie,se,ne),D=!h.arrow&&au(s)!=null&&se!==z&&o.reference[C]/2-(se<ie?K:pe)-S[C]/2<0,H=D?se<ie?se-ie:se-ne:0;return{[_]:b[_]+H,data:{[_]:z,centerOffset:se-z-H,...D&&{alignmentOffset:H}},reset:D}}}),bR=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(a){var e,n;const{placement:s,middlewareData:o,rects:l,initialPlacement:u,platform:h,elements:m}=a,{mainAxis:p=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:S=!0,...E}=uh(t,a);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const I=ol(s),M=Xo(u),A=ol(u)===u,k=await(h.isRTL==null?void 0:h.isRTL(m.floating)),O=b||(A||!S?[hf(u)]:iR(u)),U=C!=="none";!b&&U&&O.push(...lR(u,S,C,k));const q=[u,...O],Y=await yR(a,E),$=[];let K=((n=o.flip)==null?void 0:n.overflows)||[];if(p&&$.push(Y[I]),v){const z=sR(s,l,k);$.push(Y[z[0]],Y[z[1]])}if(K=[...K,{placement:s,overflows:$}],!$.every(z=>z<=0)){var pe,ie;const z=(((pe=o.flip)==null?void 0:pe.index)||0)+1,D=q[z];if(D){var ne;const W=v==="alignment"?M!==Xo(D):!1,F=((ne=K[0])==null?void 0:ne.overflows[0])>0;if(!W||F)return{data:{index:z,overflows:K},reset:{placement:D}}}let H=(ie=K.filter(W=>W.overflows[0]<=0).sort((W,F)=>W.overflows[1]-F.overflows[1])[0])==null?void 0:ie.placement;if(!H)switch(_){case"bestFit":{var se;const W=(se=K.filter(F=>{if(U){const R=Xo(F.placement);return R===M||R==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(R=>R>0).reduce((R,P)=>R+P,0)]).sort((F,R)=>F[1]-R[1])[0])==null?void 0:se[0];W&&(H=W);break}case"initialPlacement":H=u;break}if(s!==H)return{reset:{placement:H}}}return{}}}};async function wR(t,a){const{placement:e,platform:n,elements:s}=t,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),l=ol(e),u=au(e),h=Xo(e)==="y",m=["left","top"].includes(l)?-1:1,p=o&&h?-1:1,v=uh(a,t);let{mainAxis:b,crossAxis:_,alignmentAxis:C}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof C=="number"&&(_=u==="end"?C*-1:C),h?{x:_*p,y:b*m}:{x:b*m,y:_*p}}const CR=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(a){var e,n;const{x:s,y:o,placement:l,middlewareData:u}=a,h=await wR(a,t);return l===((e=u.offset)==null?void 0:e.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:s+h.x,y:o+h.y,data:{...h,placement:l}}}}};function U_(t){const a=nr(t);let e=parseFloat(a.width)||0,n=parseFloat(a.height)||0;const s=Hr(t),o=s?t.offsetWidth:e,l=s?t.offsetHeight:n,u=ff(e)!==o||ff(n)!==l;return u&&(e=o,n=l),{width:e,height:n,$:u}}function Dy(t){return ra(t)?t:t.contextElement}function Ko(t){const a=Dy(t);if(!Hr(a))return zr(1);const e=a.getBoundingClientRect(),{width:n,height:s,$:o}=U_(a);let l=(o?ff(e.width):e.width)/n,u=(o?ff(e.height):e.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const _R=zr(0);function z_(t){const a=Ra(t);return!Ey()||!a.visualViewport?_R:{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}}function SR(t,a,e){return a===void 0&&(a=!1),!e||a&&e!==Ra(t)?!1:a}function Ji(t,a,e,n){a===void 0&&(a=!1),e===void 0&&(e=!1);const s=t.getBoundingClientRect(),o=Dy(t);let l=zr(1);a&&(n?ra(n)&&(l=Ko(n)):l=Ko(t));const u=SR(o,e,n)?z_(o):zr(0);let h=(s.left+u.x)/l.x,m=(s.top+u.y)/l.y,p=s.width/l.x,v=s.height/l.y;if(o){const b=Ra(o),_=n&&ra(n)?Ra(n):n;let C=b,S=Ig(C);for(;S&&n&&_!==C;){const E=Ko(S),I=S.getBoundingClientRect(),M=nr(S),A=I.left+(S.clientLeft+parseFloat(M.paddingLeft))*E.x,k=I.top+(S.clientTop+parseFloat(M.paddingTop))*E.y;h*=E.x,m*=E.y,p*=E.x,v*=E.y,h+=A,m+=k,C=Ra(S),S=Ig(C)}}return mf({width:p,height:v,x:h,y:m})}function My(t,a){const e=ch(t).scrollLeft;return a?a.left+e:Ji(jr(t)).left+e}function H_(t,a,e){e===void 0&&(e=!1);const n=t.getBoundingClientRect(),s=n.left+a.scrollLeft-(e?0:My(t,n)),o=n.top+a.scrollTop;return{x:s,y:o}}function ER(t){let{elements:a,rect:e,offsetParent:n,strategy:s}=t;const o=s==="fixed",l=jr(n),u=a?lh(a.floating):!1;if(n===l||u&&o)return e;let h={scrollLeft:0,scrollTop:0},m=zr(1);const p=zr(0),v=Hr(n);if((v||!v&&!o)&&((gl(n)!=="body"||nu(l))&&(h=ch(n)),Hr(n))){const _=Ji(n);m=Ko(n),p.x=_.x+n.clientLeft,p.y=_.y+n.clientTop}const b=l&&!v&&!o?H_(l,h,!0):zr(0);return{width:e.width*m.x,height:e.height*m.y,x:e.x*m.x-h.scrollLeft*m.x+p.x+b.x,y:e.y*m.y-h.scrollTop*m.y+p.y+b.y}}function xR(t){return Array.from(t.getClientRects())}function IR(t){const a=jr(t),e=ch(t),n=t.ownerDocument.body,s=qi(a.scrollWidth,a.clientWidth,n.scrollWidth,n.clientWidth),o=qi(a.scrollHeight,a.clientHeight,n.scrollHeight,n.clientHeight);let l=-e.scrollLeft+My(t);const u=-e.scrollTop;return nr(n).direction==="rtl"&&(l+=qi(a.clientWidth,n.clientWidth)-s),{width:s,height:o,x:l,y:u}}function DR(t,a){const e=Ra(t),n=jr(t),s=e.visualViewport;let o=n.clientWidth,l=n.clientHeight,u=0,h=0;if(s){o=s.width,l=s.height;const m=Ey();(!m||m&&a==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:o,height:l,x:u,y:h}}function MR(t,a){const e=Ji(t,!0,a==="fixed"),n=e.top+t.clientTop,s=e.left+t.clientLeft,o=Hr(t)?Ko(t):zr(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,h=s*o.x,m=n*o.y;return{width:l,height:u,x:h,y:m}}function a1(t,a,e){let n;if(a==="viewport")n=DR(t,e);else if(a==="document")n=IR(jr(t));else if(ra(a))n=MR(a,e);else{const s=z_(t);n={x:a.x-s.x,y:a.y-s.y,width:a.width,height:a.height}}return mf(n)}function Y_(t,a){const e=mi(t);return e===a||!ra(e)||sl(e)?!1:nr(e).position==="fixed"||Y_(e,a)}function AR(t,a){const e=a.get(t);if(e)return e;let n=Zc(t,[],!1).filter(u=>ra(u)&&gl(u)!=="body"),s=null;const o=nr(t).position==="fixed";let l=o?mi(t):t;for(;ra(l)&&!sl(l);){const u=nr(l),h=Sy(l);!h&&u.position==="fixed"&&(s=null),(o?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nu(l)&&!h&&Y_(t,l))?n=n.filter(p=>p!==l):s=u,l=mi(l)}return a.set(t,n),n}function TR(t){let{element:a,boundary:e,rootBoundary:n,strategy:s}=t;const l=[...e==="clippingAncestors"?lh(a)?[]:AR(a,this._c):[].concat(e),n],u=l[0],h=l.reduce((m,p)=>{const v=a1(a,p,s);return m.top=qi(v.top,m.top),m.right=il(v.right,m.right),m.bottom=il(v.bottom,m.bottom),m.left=qi(v.left,m.left),m},a1(a,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function NR(t){const{width:a,height:e}=U_(t);return{width:a,height:e}}function RR(t,a,e){const n=Hr(a),s=jr(a),o=e==="fixed",l=Ji(t,!0,o,a);let u={scrollLeft:0,scrollTop:0};const h=zr(0);function m(){h.x=My(s)}if(n||!n&&!o)if((gl(a)!=="body"||nu(s))&&(u=ch(a)),n){const _=Ji(a,!0,o,a);h.x=_.x+a.clientLeft,h.y=_.y+a.clientTop}else s&&m();o&&!n&&s&&m();const p=s&&!n&&!o?H_(s,u):zr(0),v=l.left+u.scrollLeft-h.x-p.x,b=l.top+u.scrollTop-h.y-p.y;return{x:v,y:b,width:l.width,height:l.height}}function Bp(t){return nr(t).position==="static"}function r1(t,a){if(!Hr(t)||nr(t).position==="fixed")return null;if(a)return a(t);let e=t.offsetParent;return jr(t)===e&&(e=e.ownerDocument.body),e}function F_(t,a){const e=Ra(t);if(lh(t))return e;if(!Hr(t)){let s=mi(t);for(;s&&!sl(s);){if(ra(s)&&!Bp(s))return s;s=mi(s)}return e}let n=r1(t,a);for(;n&&JN(n)&&Bp(n);)n=r1(n,a);return n&&sl(n)&&Bp(n)&&!Sy(n)?e:n||eR(t)||e}const kR=async function(t){const a=this.getOffsetParent||F_,e=this.getDimensions,n=await e(t.floating);return{reference:RR(t.reference,await a(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function LR(t){return nr(t).direction==="rtl"}const OR={convertOffsetParentRelativeRectToViewportRelativeRect:ER,getDocumentElement:jr,getClippingRect:TR,getOffsetParent:F_,getElementRects:kR,getClientRects:xR,getDimensions:NR,getScale:Ko,isElement:ra,isRTL:LR};function j_(t,a){return t.x===a.x&&t.y===a.y&&t.width===a.width&&t.height===a.height}function PR(t,a){let e=null,n;const s=jr(t);function o(){var u;clearTimeout(n),(u=e)==null||u.disconnect(),e=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const m=t.getBoundingClientRect(),{left:p,top:v,width:b,height:_}=m;if(u||a(),!b||!_)return;const C=bd(v),S=bd(s.clientWidth-(p+b)),E=bd(s.clientHeight-(v+_)),I=bd(p),A={rootMargin:-C+"px "+-S+"px "+-E+"px "+-I+"px",threshold:qi(0,il(1,h))||1};let k=!0;function O(U){const q=U[0].intersectionRatio;if(q!==h){if(!k)return l();q?l(!1,q):n=setTimeout(()=>{l(!1,1e-7)},1e3)}q===1&&!j_(m,t.getBoundingClientRect())&&l(),k=!1}try{e=new IntersectionObserver(O,{...A,root:s.ownerDocument})}catch{e=new IntersectionObserver(O,A)}e.observe(t)}return l(!0),o}function BR(t,a,e,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,m=Dy(t),p=s||o?[...m?Zc(m):[],...Zc(a)]:[];p.forEach(I=>{s&&I.addEventListener("scroll",e,{passive:!0}),o&&I.addEventListener("resize",e)});const v=m&&u?PR(m,e):null;let b=-1,_=null;l&&(_=new ResizeObserver(I=>{let[M]=I;M&&M.target===m&&_&&(_.unobserve(a),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var A;(A=_)==null||A.observe(a)})),e()}),m&&!h&&_.observe(m),_.observe(a));let C,S=h?Ji(t):null;h&&E();function E(){const I=Ji(t);S&&!j_(S,I)&&e(),S=I,C=requestAnimationFrame(E)}return e(),()=>{var I;p.forEach(M=>{s&&M.removeEventListener("scroll",e),o&&M.removeEventListener("resize",e)}),v==null||v(),(I=_)==null||I.disconnect(),_=null,h&&cancelAnimationFrame(C)}}const UR=CR,zR=bR,s1=vR,HR=(t,a,e)=>{const n=new Map,s={platform:OR,...e},o={...s.platform,_c:n};return gR(t,a,{...s,platform:o})};var jd=typeof document<"u"?w.useLayoutEffect:w.useEffect;function gf(t,a){if(t===a)return!0;if(typeof t!=typeof a)return!1;if(typeof t=="function"&&t.toString()===a.toString())return!0;let e,n,s;if(t&&a&&typeof t=="object"){if(Array.isArray(t)){if(e=t.length,e!==a.length)return!1;for(n=e;n--!==0;)if(!gf(t[n],a[n]))return!1;return!0}if(s=Object.keys(t),e=s.length,e!==Object.keys(a).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(a,s[n]))return!1;for(n=e;n--!==0;){const o=s[n];if(!(o==="_owner"&&t.$$typeof)&&!gf(t[o],a[o]))return!1}return!0}return t!==t&&a!==a}function W_(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function i1(t,a){const e=W_(t);return Math.round(a*e)/e}function Up(t){const a=w.useRef(t);return jd(()=>{a.current=t}),a}function YR(t){t===void 0&&(t={});const{placement:a="bottom",strategy:e="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:h,open:m}=t,[p,v]=w.useState({x:0,y:0,strategy:e,placement:a,middlewareData:{},isPositioned:!1}),[b,_]=w.useState(n);gf(b,n)||_(n);const[C,S]=w.useState(null),[E,I]=w.useState(null),M=w.useCallback(W=>{W!==U.current&&(U.current=W,S(W))},[]),A=w.useCallback(W=>{W!==q.current&&(q.current=W,I(W))},[]),k=o||C,O=l||E,U=w.useRef(null),q=w.useRef(null),Y=w.useRef(p),$=h!=null,K=Up(h),pe=Up(s),ie=Up(m),ne=w.useCallback(()=>{if(!U.current||!q.current)return;const W={placement:a,strategy:e,middleware:b};pe.current&&(W.platform=pe.current),HR(U.current,q.current,W).then(F=>{const R={...F,isPositioned:ie.current!==!1};se.current&&!gf(Y.current,R)&&(Y.current=R,l_.flushSync(()=>{v(R)}))})},[b,a,e,pe,ie]);jd(()=>{m===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,v(W=>({...W,isPositioned:!1})))},[m]);const se=w.useRef(!1);jd(()=>(se.current=!0,()=>{se.current=!1}),[]),jd(()=>{if(k&&(U.current=k),O&&(q.current=O),k&&O){if(K.current)return K.current(k,O,ne);ne()}},[k,O,ne,K,$]);const z=w.useMemo(()=>({reference:U,floating:q,setReference:M,setFloating:A}),[M,A]),D=w.useMemo(()=>({reference:k,floating:O}),[k,O]),H=w.useMemo(()=>{const W={position:e,left:0,top:0};if(!D.floating)return W;const F=i1(D.floating,p.x),R=i1(D.floating,p.y);return u?{...W,transform:"translate("+F+"px, "+R+"px)",...W_(D.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:F,top:R}},[e,u,D.floating,p.x,p.y]);return w.useMemo(()=>({...p,update:ne,refs:z,elements:D,floatingStyles:H}),[p,ne,z,D,H])}const FR=t=>{function a(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:t,fn(e){const{element:n,padding:s}=typeof t=="function"?t(e):t;return n&&a(n)?n.current!=null?s1({element:n.current,padding:s}).fn(e):{}:n?s1({element:n,padding:s}).fn(e):{}}}},jR=(t,a)=>({...UR(t),options:[t,a]}),WR=(t,a)=>({...zR(t),options:[t,a]}),GR=(t,a)=>({...FR(t),options:[t,a]}),ZR={...GC};let o1=!1,$R=0;const l1=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+$R++;function qR(){const[t,a]=w.useState(()=>o1?l1():void 0);return pf(()=>{t==null&&a(l1())},[]),w.useEffect(()=>{o1=!0},[]),t}const QR=ZR.useId,G_=QR||qR,VR=w.forwardRef(function(a,e){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:l}},width:u=14,height:h=7,tipRadius:m=0,strokeWidth:p=0,staticOffset:v,stroke:b,d:_,style:{transform:C,...S}={},...E}=a,I=G_(),[M,A]=w.useState(!1);if(pf(()=>{if(!s)return;nr(s).direction==="rtl"&&A(!0)},[s]),!s)return null;const[k,O]=n.split("-"),U=k==="top"||k==="bottom";let q=v;(U&&l!=null&&l.x||!U&&l!=null&&l.y)&&(q=null);const Y=p*2,$=Y/2,K=u/2*(m/-8+1),pe=h/2*m/4,ie=!!_,ne=q&&O==="end"?"bottom":"top";let se=q&&O==="end"?"right":"left";q&&M&&(se=O==="end"?"left":"right");const z=(o==null?void 0:o.x)!=null?q||o.x:"",D=(o==null?void 0:o.y)!=null?q||o.y:"",H=_||"M0,0"+(" H"+u)+(" L"+(u-K)+","+(h-pe))+(" Q"+u/2+","+h+" "+K+","+(h-pe))+" Z",W={top:ie?"rotate(180deg)":"",left:ie?"rotate(90deg)":"rotate(-90deg)",bottom:ie?"":"rotate(180deg)",right:ie?"rotate(-90deg)":"rotate(90deg)"}[k];return vc.jsxs("svg",{...E,"aria-hidden":!0,ref:e,width:ie?u:u+Y,height:u,viewBox:"0 0 "+u+" "+(h>u?h:u),style:{position:"absolute",pointerEvents:"none",[se]:z,[ne]:D,[k]:U||ie?"100%":"calc(100% - "+Y/2+"px)",transform:[W,C].filter(F=>!!F).join(" "),...S},children:[Y>0&&vc.jsx("path",{clipPath:"url(#"+I+")",fill:"none",stroke:b,strokeWidth:Y+(_?0:1),d:H}),vc.jsx("path",{stroke:Y&&!_?E.fill:"none",d:H}),vc.jsx("clipPath",{id:I,children:vc.jsx("rect",{x:-$,y:$*(ie?-1:1),width:u+Y,height:u})})]})});function XR(){const t=new Map;return{emit(a,e){var n;(n=t.get(a))==null||n.forEach(s=>s(e))},on(a,e){t.has(a)||t.set(a,new Set),t.get(a).add(e)},off(a,e){var n;(n=t.get(a))==null||n.delete(e)}}}const KR=w.createContext(null),JR=w.createContext(null),e3=()=>{var t;return((t=w.useContext(KR))==null?void 0:t.id)||null},t3=()=>w.useContext(JR);function n3(t){const{open:a=!1,onOpenChange:e,elements:n}=t,s=G_(),o=w.useRef({}),[l]=w.useState(()=>XR()),u=e3()!=null,[h,m]=w.useState(n.reference),p=hR((_,C,S)=>{o.current.openEvent=_?C:void 0,l.emit("openchange",{open:_,event:C,reason:S,nested:u}),e==null||e(_,C,S)}),v=w.useMemo(()=>({setPositionReference:m}),[]),b=w.useMemo(()=>({reference:h||n.reference||null,floating:n.floating||null,domReference:n.reference}),[h,n.reference,n.floating]);return w.useMemo(()=>({dataRef:o,open:a,onOpenChange:p,elements:b,events:l,floatingId:s,refs:v}),[a,p,b,l,s,v])}function a3(t){t===void 0&&(t={});const{nodeId:a}=t,e=n3({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||e,s=n.elements,[o,l]=w.useState(null),[u,h]=w.useState(null),p=(s==null?void 0:s.domReference)||o,v=w.useRef(null),b=t3();pf(()=>{p&&(v.current=p)},[p]);const _=YR({...t,elements:{...s,...u&&{reference:u}}}),C=w.useCallback(A=>{const k=ra(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),getClientRects:()=>A.getClientRects(),contextElement:A}:A;h(k),_.refs.setReference(k)},[_.refs]),S=w.useCallback(A=>{(ra(A)||A===null)&&(v.current=A,l(A)),(ra(_.refs.reference.current)||_.refs.reference.current===null||A!==null&&!ra(A))&&_.refs.setReference(A)},[_.refs]),E=w.useMemo(()=>({..._.refs,setReference:S,setPositionReference:C,domReference:v}),[_.refs,S,C]),I=w.useMemo(()=>({..._.elements,domReference:p}),[_.elements,p]),M=w.useMemo(()=>({..._,...n,refs:E,elements:I,nodeId:a}),[_,E,I,a,n]);return pf(()=>{n.dataRef.current.floatingContext=M;const A=b==null?void 0:b.nodesRef.current.find(k=>k.id===a);A&&(A.context=M)}),w.useMemo(()=>({..._,context:M,refs:E,elements:I}),[_,E,I,M])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Mg=function(a,e){return Mg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},Mg(a,e)};function Tn(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Mg(t,a);function e(){this.constructor=t}t.prototype=a===null?Object.create(a):(e.prototype=a.prototype,new e)}var wt=function(){return wt=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},wt.apply(this,arguments)};function Br(t,a,e){if(e||arguments.length===2)for(var n=0,s=a.length,o;n<s;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))}var r3=function(t){var a=t.showTimeSelectOnly,e=a===void 0?!1:a,n=t.showTime,s=n===void 0?!1:n,o=t.className,l=t.children,u=e?"Choose Time":"Choose Date".concat(s?" and Time":"");return f.createElement("div",{className:o,role:"dialog","aria-label":u,"aria-modal":"true"},l)},s3=function(t,a){var e=w.useRef(null),n=w.useRef(t);n.current=t;var s=w.useCallback(function(o){var l,u=o.composed&&o.composedPath&&o.composedPath().find(function(h){return h instanceof Node})||o.target;e.current&&!e.current.contains(u)&&(a&&u instanceof HTMLElement&&u.classList.contains(a)||(l=n.current)===null||l===void 0||l.call(n,o))},[a]);return w.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),e},dh=function(t){var a=t.children,e=t.onClickOutside,n=t.className,s=t.containerRef,o=t.style,l=t.ignoreClass,u=s3(e,l);return f.createElement("div",{className:n,style:o,ref:function(h){u.current=h,s&&(s.current=h)}},a)},Ae;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(Ae||(Ae={}));function Z_(){var t=typeof window<"u"?window:globalThis;return t}var ru=12;function Mt(t){if(t==null)return new Date;var a=typeof t=="string"?D_(t):Le(t);return fh(a)?a:new Date}function zp(t,a,e,n,s){s===void 0&&(s=Mt());for(var o=ll(e)||ll(Ay()),l=Array.isArray(a)?a:[a],u=0,h=l;u<h.length;u++){var m=h[u],p=LA(t,m,s,{locale:o});if(fh(p)&&(!n||t===$t(p,m,e)))return p}return null}function fh(t,a){return rf(t)&&!Ki(t,new Date("1/1/1800"))}function $t(t,a,e){if(e==="en")return Wc(t,a,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=e?ll(e):void 0;return e&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(e,'"].')),n=n||ll(Ay()),Wc(t,a,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ka(t,a){var e=a.dateFormat,n=a.locale,s=Array.isArray(e)&&e.length>0?e[0]:e;return t&&$t(t,s,n)||""}var $_=" - ";function i3(t,a,e){if(!t)return"";var n=Ka(t,e),s=a?Ka(a,e):"";return"".concat(n).concat($_).concat(s)}function o3(t,a){if(!(t!=null&&t.length))return"";var e=t[0]?Ka(t[0],a):"";if(t.length===1)return e;if(t.length===2&&t[1]){var n=Ka(t[1],a);return"".concat(e,", ").concat(n)}var s=t.length-1;return"".concat(e," (+").concat(s,")")}function Hp(t,a){var e=a.hour,n=e===void 0?0:e,s=a.minute,o=s===void 0?0:s,l=a.second,u=l===void 0?0:l;return Hd(Yd(Fd(t,u),o),n)}function l3(t){return yy(t)}function c3(t,a){return $t(t,"ddd",a)}function Wd(t){return Xi(t)}function fi(t,a,e){var n=ll(a||Ay());return Es(t,{locale:n,weekStartsOn:e})}function Cs(t){return v_(t)}function Mc(t){return sh(t)}function c1(t){return Sg(t)}function u1(){return Xi(Mt())}function d1(t){return g_(t)}function u3(t){return HD(t)}function d3(t){return y_(t)}function Lr(t,a){return t&&a?UA(t,a):!t&&!a}function aa(t,a){return t&&a?PA(t,a):!t&&!a}function yf(t,a){return t&&a?BA(t,a):!t&&!a}function bt(t,a){return t&&a?BD(t,a):!t&&!a}function ji(t,a){return t&&a?zM(t,a):!t&&!a}function Ac(t,a,e){var n,s=Xi(a),o=g_(e);try{n=Gc(t,{start:s,end:o})}catch{n=!1}return n}function Ay(){var t=Z_();return t.__localeId__}function ll(t){if(typeof t=="string"){var a=Z_();return a.__localeData__?a.__localeData__[t]:void 0}else return t}function f3(t,a,e){return a($t(t,"EEEE",e))}function h3(t,a){return $t(t,"EEEEEE",a)}function m3(t,a){return $t(t,"EEE",a)}function Ty(t,a){return $t(Ja(Mt(),t),"LLLL",a)}function q_(t,a){return $t(Ja(Mt(),t),"LLL",a)}function p3(t,a){return $t(Zo(Mt(),t),"QQQ",a)}function er(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,o=e.excludeDates,l=e.excludeDateIntervals,u=e.includeDates,h=e.includeDateIntervals,m=e.filterDate;return su(t,{minDate:n,maxDate:s})||o&&o.some(function(p){return p instanceof Date?bt(t,p):bt(t,p.date)})||l&&l.some(function(p){var v=p.start,b=p.end;return Gc(t,{start:v,end:b})})||u&&!u.some(function(p){return bt(t,p)})||h&&!h.some(function(p){var v=p.start,b=p.end;return Gc(t,{start:v,end:b})})||m&&!m(Mt(t))||!1}function Ny(t,a){var e=a===void 0?{}:a,n=e.excludeDates,s=e.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var l=o.start,u=o.end;return Gc(t,{start:l,end:u})}):n&&n.some(function(o){var l;return o instanceof Date?bt(t,o):bt(t,(l=o.date)!==null&&l!==void 0?l:new Date)})||!1}function Q_(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,o=e.excludeDates,l=e.includeDates,u=e.filterDate;return su(t,{minDate:n?v_(n):void 0,maxDate:s?y_(s):void 0})||(o==null?void 0:o.some(function(h){return aa(t,h instanceof Date?h:h.date)}))||l&&!l.some(function(h){return aa(t,h)})||u&&!u(Mt(t))||!1}function wd(t,a,e,n){var s=it(t),o=$n(t),l=it(a),u=$n(a),h=it(n);return s===l&&s===h?o<=e&&e<=u:s<l?h===s&&o<=e||h===l&&u>=e||h<l&&h>s:!1}function g3(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,o=e.excludeDates,l=e.includeDates;return su(t,{minDate:n,maxDate:s})||o&&o.some(function(u){return aa(u instanceof Date?u:u.date,t)})||l&&!l.some(function(u){return aa(u,t)})||!1}function Cd(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,o=e.excludeDates,l=e.includeDates,u=e.filterDate;return su(t,{minDate:n,maxDate:s})||(o==null?void 0:o.some(function(h){return yf(t,h instanceof Date?h:h.date)}))||l&&!l.some(function(h){return yf(t,h)})||u&&!u(Mt(t))||!1}function _d(t,a,e){if(!a||!e||!rf(a)||!rf(e))return!1;var n=it(a),s=it(e);return n<=t&&s>=t}function Gd(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.maxDate,o=e.excludeDates,l=e.includeDates,u=e.filterDate,h=new Date(t,0,1);return su(h,{minDate:n?sh(n):void 0,maxDate:s?b_(s):void 0})||(o==null?void 0:o.some(function(m){return Lr(h,m instanceof Date?m:m.date)}))||l&&!l.some(function(m){return Lr(h,m)})||u&&!u(Mt(h))||!1}function Sd(t,a,e,n){var s=it(t),o=Zi(t),l=it(a),u=Zi(a),h=it(n);return s===l&&s===h?o<=e&&e<=u:s<l?h===s&&o<=e||h===l&&u>=e||h<l&&h>s:!1}function su(t,a){var e,n=a===void 0?{}:a,s=n.minDate,o=n.maxDate;return(e=s&&al(t,s)<0||o&&al(t,o)>0)!==null&&e!==void 0?e:!1}function f1(t,a){return a.some(function(e){return bs(e)===bs(t)&&ws(e)===ws(t)&&ui(e)===ui(t)})}function h1(t,a){var e=a===void 0?{}:a,n=e.excludeTimes,s=e.includeTimes,o=e.filterTime;return n&&f1(t,n)||s&&!f1(t,s)||o&&!o(t)||!1}function m1(t,a){var e=a.minTime,n=a.maxTime;if(!e||!n)throw new Error("Both minTime and maxTime props required");var s=Mt();s=Hd(s,bs(t)),s=Yd(s,ws(t)),s=Fd(s,ui(t));var o=Mt();o=Hd(o,bs(e)),o=Yd(o,ws(e)),o=Fd(o,ui(e));var l=Mt();l=Hd(l,bs(n)),l=Yd(l,ws(n)),l=Fd(l,ui(n));var u;try{u=!Gc(s,{start:o,end:l})}catch{u=!1}return u}function p1(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,o=$i(t,1);return n&&sf(n,o)>0||s&&s.every(function(l){return sf(l,o)>0})||!1}function g1(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,o=fr(t,1);return n&&sf(o,n)>0||s&&s.every(function(l){return sf(o,l)>0})||!1}function y3(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,o=sh(t),l=A_(o);return n&&of(n,l)>0||s&&s.every(function(u){return of(u,l)>0})||!1}function v3(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,o=b_(t),l=gy(o,1);return n&&of(l,n)>0||s&&s.every(function(u){return of(l,u)>0})||!1}function y1(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.includeDates,o=rl(t,1);return n&&lf(n,o)>0||s&&s.every(function(l){return lf(l,o)>0})||!1}function b3(t,a){var e=a===void 0?{}:a,n=e.minDate,s=e.yearItemNumber,o=s===void 0?ru:s,l=Mc(rl(t,o)),u=ci(l,o).endPeriod,h=n&&it(n);return h&&h>u||!1}function v1(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.includeDates,o=ys(t,1);return n&&lf(o,n)>0||s&&s.every(function(l){return lf(o,l)>0})||!1}function w3(t,a){var e=a===void 0?{}:a,n=e.maxDate,s=e.yearItemNumber,o=s===void 0?ru:s,l=ys(t,o),u=ci(l,o).startPeriod,h=n&&it(n);return h&&h<u||!1}function V_(t){var a=t.minDate,e=t.includeDates;if(e&&a){var n=e.filter(function(s){return al(s,a)>=0});return Hw(n)}else return e?Hw(e):a}function X_(t){var a=t.maxDate,e=t.includeDates;if(e&&a){var n=e.filter(function(s){return al(s,a)<=0});return zw(n)}else return e?zw(e):a}function b1(t,a){var e;t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=t.length;s<o;s++){var l=t[s];if(vs(l)){var u=$t(l,"MM.dd.yyyy"),h=n.get(u)||[];h.includes(a)||(h.push(a),n.set(u,h))}else if(typeof l=="object"){var m=Object.keys(l),p=(e=m[0])!==null&&e!==void 0?e:"",v=l[p];if(typeof p=="string"&&Array.isArray(v))for(var b=0,_=v.length;b<_;b++){var C=v[b];if(C){var u=$t(C,"MM.dd.yyyy"),h=n.get(u)||[];h.includes(p)||(h.push(p),n.set(u,h))}}}}return n}function C3(t,a){return t.length!==a.length?!1:t.every(function(e,n){return e===a[n]})}function _3(t,a){t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--holidays");var e=new Map;return t.forEach(function(n){var s=n.date,o=n.holidayName;if(vs(s)){var l=$t(s,"MM.dd.yyyy"),u=e.get(l)||{className:"",holidayNames:[]};if(!("className"in u&&u.className===a&&C3(u.holidayNames,[o]))){u.className=a;var h=u.holidayNames;u.holidayNames=h?Br(Br([],h,!0),[o],!1):[o],e.set(l,u)}}}),e}function S3(t,a,e,n,s){for(var o=s.length,l=[],u=0;u<o;u++){var h=t,m=s[u];m&&(h=kD(h,bs(m)),h=_g(h,ws(m)),h=PD(h,ui(m)));var p=_g(t,(e+1)*n);xs(h,a)&&Ki(h,p)&&m!=null&&l.push(m)}return l}function w1(t){return t<10?"0".concat(t):"".concat(t)}function ci(t,a){a===void 0&&(a=ru);var e=Math.ceil(it(t)/a)*a,n=e-(a-1);return{startPeriod:n,endPeriod:e}}function E3(t){var a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+e-+a)/36e5)}function C1(t){var a=t.getSeconds(),e=t.getMilliseconds();return Le(t.getTime()-a*1e3-e)}function x3(t,a){return C1(t).getTime()===C1(a).getTime()}function _1(t){if(!vs(t))throw new Error("Invalid date");var a=new Date(t);return a.setHours(0,0,0,0),a}function S1(t,a){if(!vs(t)||!vs(a))throw new Error("Invalid date received");var e=_1(t),n=_1(a);return Ki(e,n)}function K_(t){return t.key===Ae.Space}var I3=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.inputRef=f.createRef(),n.onTimeChange=function(s){var o,l;n.setState({time:s});var u=n.props.date,h=u instanceof Date&&!isNaN(+u),m=h?u:new Date;if(s!=null&&s.includes(":")){var p=s.split(":"),v=p[0],b=p[1];m.setHours(Number(v)),m.setMinutes(Number(b))}(l=(o=n.props).onChange)===null||l===void 0||l.call(o,m)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,l=o.date,u=o.timeString,h=o.customTimeInput;return h?w.cloneElement(h,{date:l,value:s,onChange:n.onTimeChange}):f.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var m;(m=n.inputRef.current)===null||m===void 0||m.focus()},required:!0,value:s,onChange:function(m){n.onTimeChange(m.target.value||u)}})},n.state={time:n.props.timeString},n}return a.getDerivedStateFromProps=function(e,n){return e.timeString!==n.time?{time:e.timeString}:null},a.prototype.render=function(){return f.createElement("div",{className:"react-datepicker__input-time-container"},f.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),f.createElement("div",{className:"react-datepicker-time__input-container"},f.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},a}(w.Component),D3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.dayEl=w.createRef(),e.handleClick=function(n){!e.isDisabled()&&e.props.onClick&&e.props.onClick(n)},e.handleMouseEnter=function(n){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(n)},e.handleOnKeyDown=function(n){var s,o,l=n.key;l===Ae.Space&&(n.preventDefault(),n.key=Ae.Enter),(o=(s=e.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},e.isSameDay=function(n){return bt(e.props.day,n)},e.isKeyboardSelected=function(){var n;if(e.props.disabledKeyboardNavigation)return!1;var s=e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(l){return e.isSameDayOrWeek(l)}):e.isSameDayOrWeek(e.props.selected),o=e.props.preSelection&&e.isDisabled(e.props.preSelection);return!s&&e.isSameDayOrWeek(e.props.preSelection)&&!o},e.isDisabled=function(n){return n===void 0&&(n=e.props.day),er(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(){return Ny(e.props.day,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.isStartOfWeek=function(){return bt(e.props.day,fi(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameWeek=function(n){return e.props.showWeekPicker&&bt(n,fi(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameDayOrWeek=function(n){return e.isSameDay(n)||e.isSameWeek(n)},e.getHighLightedClass=function(){var n=e.props,s=n.day,o=n.highlightDates;if(!o)return!1;var l=$t(s,"MM.dd.yyyy");return o.get(l)},e.getHolidaysClass=function(){var n,s=e.props,o=s.day,l=s.holidays;if(!l)return[void 0];var u=$t(o,"MM.dd.yyyy");return l.has(u)?[(n=l.get(u))===null||n===void 0?void 0:n.className]:[void 0]},e.isInRange=function(){var n=e.props,s=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:Ac(s,o,l)},e.isInSelectingRange=function(){var n,s=e.props,o=s.day,l=s.selectsStart,u=s.selectsEnd,h=s.selectsRange,m=s.selectsDisabledDaysInRange,p=s.startDate,v=s.endDate,b=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return!(l||u||h)||!b||!m&&e.isDisabled()?!1:l&&v&&(Ki(b,v)||ji(b,v))?Ac(o,b,v):u&&p&&(xs(b,p)||ji(b,p))||h&&p&&!v&&(xs(b,p)||ji(b,p))?Ac(o,p,b):!1},e.isSelectingRangeStart=function(){var n;if(!e.isInSelectingRange())return!1;var s=e.props,o=s.day,l=s.startDate,u=s.selectsStart,h=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return u?bt(o,h):bt(o,l)},e.isSelectingRangeEnd=function(){var n;if(!e.isInSelectingRange())return!1;var s=e.props,o=s.day,l=s.endDate,u=s.selectsEnd,h=s.selectsRange,m=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return u||h?bt(o,m):bt(o,l)},e.isRangeStart=function(){var n=e.props,s=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:bt(o,s)},e.isRangeEnd=function(){var n=e.props,s=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:bt(l,s)},e.isWeekend=function(){var n=OM(e.props.day);return n===0||n===6},e.isAfterMonth=function(){return e.props.month!==void 0&&(e.props.month+1)%12===$n(e.props.day)},e.isBeforeMonth=function(){return e.props.month!==void 0&&($n(e.props.day)+1)%12===e.props.month},e.isCurrentDay=function(){return e.isSameDay(Mt())},e.isSelected=function(){var n;return e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return e.isSameDayOrWeek(s)}):e.isSameDayOrWeek(e.props.selected)},e.getClassNames=function(n){var s=e.props.dayClassName?e.props.dayClassName(n):void 0;return Hn("react-datepicker__day",s,"react-datepicker__day--"+c3(e.props.day),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass(),e.getHolidaysClass())},e.getAriaLabel=function(){var n=e.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,l=o===void 0?"Choose":o,u=n.ariaLabelPrefixWhenDisabled,h=u===void 0?"Not available":u,m=e.isDisabled()||e.isExcluded()?h:l;return"".concat(m," ").concat($t(s,"PPPP",e.props.locale))},e.getTitle=function(){var n=e.props,s=n.day,o=n.holidays,l=o===void 0?new Map:o,u=n.excludeDates,h=$t(s,"MM.dd.yyyy"),m=[];return l.has(h)&&m.push.apply(m,l.get(h).holidayNames),e.isExcluded()&&m.push(u==null?void 0:u.filter(function(p){return p instanceof Date?bt(p,s):bt(p==null?void 0:p.date,s)}).map(function(p){if(!(p instanceof Date))return p==null?void 0:p.message})),m.join(", ")},e.getTabIndex=function(){var n=e.props.selected,s=e.props.preSelection,o=!(e.props.showWeekPicker&&(e.props.showWeekNumber||!e.isStartOfWeek()))&&(e.isKeyboardSelected()||e.isSameDay(n)&&bt(s,n))?0:-1;return o},e.handleFocusDay=function(){var n;e.shouldFocusDay()&&((n=e.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},e.renderDayContents=function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(Zw(e.props.day),e.props.day):Zw(e.props.day)},e.render=function(){return f.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.props.usePointerEvent?void 0:e.handleMouseEnter,onPointerEnter:e.props.usePointerEvent?e.handleMouseEnter:void 0,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),e.getTitle()!==""&&f.createElement("span",{className:"overlay"},e.getTitle()))},e}return a.prototype.componentDidMount=function(){this.handleFocusDay()},a.prototype.componentDidUpdate=function(){this.handleFocusDay()},a.prototype.shouldFocusDay=function(){var e=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},a.prototype.isDayActiveElement=function(){var e,n,s;return((n=(e=this.props.containerRef)===null||e===void 0?void 0:e.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},a.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},a}(w.Component),M3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.weekNumberEl=w.createRef(),e.handleClick=function(n){e.props.onClick&&e.props.onClick(n)},e.handleOnKeyDown=function(n){var s,o,l=n.key;l===Ae.Space&&(n.preventDefault(),n.key=Ae.Enter),(o=(s=e.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!bt(e.props.date,e.props.selected)&&bt(e.props.date,e.props.preSelection)},e.getTabIndex=function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||bt(e.props.date,e.props.selected)&&bt(e.props.preSelection,e.props.selected))?0:-1},e.handleFocusWeekNumber=function(n){var s=!1;e.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&bt(e.props.date,e.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(s=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},a.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},a.prototype.render=function(){var e=this.props,n=e.weekNumber,s=e.isWeekDisabled,o=e.ariaLabelPrefix,l=o===void 0?a.defaultProps.ariaLabelPrefix:o,u=e.onClick,h={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!u&&!s,"react-datepicker__week-number--selected":!!u&&bt(this.props.date,this.props.selected)};return f.createElement("div",{ref:this.weekNumberEl,className:Hn(h),"aria-label":"".concat(l," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},a}(w.Component),A3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isDisabled=function(n){return er(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.handleDayClick=function(n,s){e.props.onDayClick&&e.props.onDayClick(n,s)},e.handleDayMouseEnter=function(n){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(n)},e.handleWeekClick=function(n,s,o){for(var l,u,h,m=new Date(n),p=0;p<7;p++){var v=new Date(n);v.setDate(v.getDate()+p);var b=!e.isDisabled(v);if(b){m=v;break}}typeof e.props.onWeekSelect=="function"&&e.props.onWeekSelect(m,s,o),e.props.showWeekPicker&&e.handleDayClick(m,o),((l=e.props.shouldCloseOnSelect)!==null&&l!==void 0?l:a.defaultProps.shouldCloseOnSelect)&&((h=(u=e.props).setOpen)===null||h===void 0||h.call(u,!1))},e.formatWeekNumber=function(n){return e.props.formatWeekNumber?e.props.formatWeekNumber(n):l3(n)},e.isWeekDisabled=function(){for(var n=e.startOfWeek(),s=dr(n,6),o=new Date(n);o<=s;){if(!e.isDisabled(o))return!1;o=dr(o,1)}return!0},e.renderDays=function(){var n=e.startOfWeek(),s=[],o=e.formatWeekNumber(n);if(e.props.showWeekNumber){var l=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(e,n,o):void 0;s.push(f.createElement(M3,wt({key:"W"},a.defaultProps,e.props,{weekNumber:o,isWeekDisabled:e.isWeekDisabled(),date:n,onClick:l})))}return s.concat([0,1,2,3,4,5,6].map(function(u){var h=dr(n,u);return f.createElement(D3,wt({},a.defaultProps,e.props,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:h.valueOf(),day:h,onClick:e.handleDayClick.bind(e,h),onMouseEnter:e.handleDayMouseEnter.bind(e,h)}))}))},e.startOfWeek=function(){return fi(e.props.day,e.props.locale,e.props.calendarStartDay)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!bt(e.startOfWeek(),e.props.selected)&&bt(e.startOfWeek(),e.props.preSelection)},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":bt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return f.createElement("div",{className:Hn(e)},this.renderDays())},a}(w.Component),bc,T3=6,Jo={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Yp=(bc={},bc[Jo.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},bc[Jo.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},bc[Jo.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},bc),Ed=1;function E1(t,a){return t?Jo.FOUR_COLUMNS:a?Jo.TWO_COLUMNS:Jo.THREE_COLUMNS}var N3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.MONTH_REFS=Br([],Array(12),!0).map(function(){return w.createRef()}),e.QUARTER_REFS=Br([],Array(4),!0).map(function(){return w.createRef()}),e.isDisabled=function(n){return er(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(n){return Ny(n,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.handleDayClick=function(n,s){var o,l;(l=(o=e.props).onDayClick)===null||l===void 0||l.call(o,n,s,e.props.orderInDisplay)},e.handleDayMouseEnter=function(n){var s,o;(o=(s=e.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},e.handleMouseLeave=function(){var n,s;(s=(n=e.props).onMouseLeave)===null||s===void 0||s.call(n)},e.isRangeStartMonth=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:aa(Ja(o,n),l)},e.isRangeStartQuarter=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:yf(Zo(o,n),l)},e.isRangeEndMonth=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:aa(Ja(o,n),u)},e.isRangeEndQuarter=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:yf(Zo(o,n),u)},e.isInSelectingRangeMonth=function(n){var s,o=e.props,l=o.day,u=o.selectsStart,h=o.selectsEnd,m=o.selectsRange,p=o.startDate,v=o.endDate,b=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return!(u||h||m)||!b?!1:u&&v?wd(b,v,n,l):h&&p||m&&p&&!v?wd(p,b,n,l):!1},e.isSelectingMonthRangeStart=function(n){var s;if(!e.isInSelectingRangeMonth(n))return!1;var o=e.props,l=o.day,u=o.startDate,h=o.selectsStart,m=Ja(l,n),p=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return h?aa(m,p):aa(m,u)},e.isSelectingMonthRangeEnd=function(n){var s;if(!e.isInSelectingRangeMonth(n))return!1;var o=e.props,l=o.day,u=o.endDate,h=o.selectsEnd,m=o.selectsRange,p=Ja(l,n),v=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return h||m?aa(p,v):aa(p,u)},e.isInSelectingRangeQuarter=function(n){var s,o=e.props,l=o.day,u=o.selectsStart,h=o.selectsEnd,m=o.selectsRange,p=o.startDate,v=o.endDate,b=(s=e.props.selectingDate)!==null&&s!==void 0?s:e.props.preSelection;return!(u||h||m)||!b?!1:u&&v?Sd(b,v,n,l):h&&p||m&&p&&!v?Sd(p,b,n,l):!1},e.isWeekInMonth=function(n){var s=e.props.day,o=dr(n,6);return aa(n,s)||aa(o,s)},e.isCurrentMonth=function(n,s){return it(n)===it(Mt())&&s===$n(Mt())},e.isCurrentQuarter=function(n,s){return it(n)===it(Mt())&&s===Zi(Mt())},e.isSelectedMonth=function(n,s,o){return $n(o)===s&&it(n)===it(o)},e.isSelectMonthInList=function(n,s,o){return o.some(function(l){return e.isSelectedMonth(n,s,l)})},e.isSelectedQuarter=function(n,s,o){return Zi(n)===s&&it(n)===it(o)},e.isMonthSelected=function(){var n=e.props,s=n.day,o=n.selected,l=n.selectedDates,u=n.selectsMultiple,h=$n(s);return u?l==null?void 0:l.some(function(m){return e.isSelectedMonth(s,h,m)}):!!o&&e.isSelectedMonth(s,h,o)},e.renderWeeks=function(){for(var n=[],s=e.props.fixedHeight,o=0,l=!1,u=fi(Cs(e.props.day),e.props.locale,e.props.calendarStartDay),h=function(C){return e.props.showWeekPicker?fi(C,e.props.locale,e.props.calendarStartDay):e.props.preSelection},m=function(C){return e.props.showWeekPicker?fi(C,e.props.locale,e.props.calendarStartDay):e.props.selected},p=e.props.selected?m(e.props.selected):void 0,v=e.props.preSelection?h(e.props.preSelection):void 0;n.push(f.createElement(A3,wt({},e.props,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,key:o,day:u,month:$n(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,selected:p,preSelection:v,showWeekNumber:e.props.showWeekNumbers}))),!l;){o++,u=af(u,1);var b=s&&o>=T3,_=!s&&!e.isWeekInMonth(u);if(b||_)if(e.props.peekNextMonth)l=!0;else break}return n},e.onMonthClick=function(n,s){var o=e.isMonthDisabledForLabelDate(s),l=o.isDisabled,u=o.labelDate;l||e.handleDayClick(Cs(u),n)},e.onMonthMouseEnter=function(n){var s=e.isMonthDisabledForLabelDate(n),o=s.isDisabled,l=s.labelDate;o||e.handleDayMouseEnter(Cs(l))},e.handleMonthNavigation=function(n,s){var o,l,u,h;(l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,s),(h=(u=e.MONTH_REFS[n])===null||u===void 0?void 0:u.current)===null||h===void 0||h.focus()},e.handleKeyboardNavigation=function(n,s,o){var l,u=e.props,h=u.selected,m=u.preSelection,p=u.setPreSelection,v=u.minDate,b=u.maxDate,_=u.showFourColumnMonthYearPicker,C=u.showTwoColumnMonthYearPicker;if(m){var S=E1(_,C),E=e.getVerticalOffset(S),I=(l=Yp[S])===null||l===void 0?void 0:l.grid,M=function(q,Y,$){var K,pe,ie=Y,ne=$;switch(q){case Ae.ArrowRight:ie=fr(Y,Ed),ne=$===11?0:$+Ed;break;case Ae.ArrowLeft:ie=$i(Y,Ed),ne=$===0?11:$-Ed;break;case Ae.ArrowUp:ie=$i(Y,E),ne=!((K=I==null?void 0:I[0])===null||K===void 0)&&K.includes($)?$+12-E:$-E;break;case Ae.ArrowDown:ie=fr(Y,E),ne=!((pe=I==null?void 0:I[I.length-1])===null||pe===void 0)&&pe.includes($)?$-12+E:$+E;break}return{newCalculatedDate:ie,newCalculatedMonth:ne}},A=function(q,Y,$){for(var K=40,pe=q,ie=!1,ne=0,se=M(pe,Y,$),z=se.newCalculatedDate,D=se.newCalculatedMonth;!ie;){if(ne>=K){z=Y,D=$;break}if(v&&z<v){pe=Ae.ArrowRight;var H=M(pe,z,D);z=H.newCalculatedDate,D=H.newCalculatedMonth}if(b&&z>b){pe=Ae.ArrowLeft;var H=M(pe,z,D);z=H.newCalculatedDate,D=H.newCalculatedMonth}if(g3(z,e.props)){var H=M(pe,z,D);z=H.newCalculatedDate,D=H.newCalculatedMonth}else ie=!0;ne++}return{newCalculatedDate:z,newCalculatedMonth:D}};if(s===Ae.Enter){e.isMonthDisabled(o)||(e.onMonthClick(n,o),p==null||p(h));return}var k=A(s,m,o),O=k.newCalculatedDate,U=k.newCalculatedMonth;switch(s){case Ae.ArrowRight:case Ae.ArrowLeft:case Ae.ArrowUp:case Ae.ArrowDown:e.handleMonthNavigation(U,O);break}}},e.getVerticalOffset=function(n){var s,o;return(o=(s=Yp[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},e.onMonthKeyDown=function(n,s){var o=e.props,l=o.disabledKeyboardNavigation,u=o.handleOnMonthKeyDown,h=n.key;h!==Ae.Tab&&n.preventDefault(),l||e.handleKeyboardNavigation(n,h,s),u&&u(n)},e.onQuarterClick=function(n,s){var o=Zo(e.props.day,s);Cd(o,e.props)||e.handleDayClick(c1(o),n)},e.onQuarterMouseEnter=function(n){var s=Zo(e.props.day,n);Cd(s,e.props)||e.handleDayMouseEnter(c1(s))},e.handleQuarterNavigation=function(n,s){var o,l,u,h;e.isDisabled(s)||e.isExcluded(s)||((l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,s),(h=(u=e.QUARTER_REFS[n-1])===null||u===void 0?void 0:u.current)===null||h===void 0||h.focus())},e.onQuarterKeyDown=function(n,s){var o,l,u=n.key;if(!e.props.disabledKeyboardNavigation)switch(u){case Ae.Enter:e.onQuarterClick(n,s),(l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,e.props.selected);break;case Ae.ArrowRight:if(!e.props.preSelection)break;e.handleQuarterNavigation(s===4?1:s+1,gy(e.props.preSelection,1));break;case Ae.ArrowLeft:if(!e.props.preSelection)break;e.handleQuarterNavigation(s===1?4:s-1,A_(e.props.preSelection));break}},e.isMonthDisabledForLabelDate=function(n){var s,o=e.props,l=o.day,u=o.minDate,h=o.maxDate,m=o.excludeDates,p=o.includeDates,v=Ja(l,n);return{isDisabled:(s=(u||h||m||p)&&Q_(v,e.props))!==null&&s!==void 0?s:!1,labelDate:v}},e.isMonthDisabled=function(n){var s=e.isMonthDisabledForLabelDate(n).isDisabled;return s},e.getMonthClassNames=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate,h=s.preSelection,m=s.monthClassName,p=m?m(Ja(o,n)):void 0,v=e.getSelection();return Hn("react-datepicker__month-text","react-datepicker__month-".concat(n),p,{"react-datepicker__month-text--disabled":e.isMonthDisabled(n),"react-datepicker__month-text--selected":v?e.isSelectMonthInList(o,n,v):void 0,"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&h&&e.isSelectedMonth(o,n,h)&&!e.isMonthSelected()&&!e.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":l&&u?wd(l,u,n,o):void 0,"react-datepicker__month-text--range-start":e.isRangeStartMonth(n),"react-datepicker__month-text--range-end":e.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":e.isCurrentMonth(o,n)})},e.getTabIndex=function(n){if(e.props.preSelection==null)return"-1";var s=$n(e.props.preSelection),o=e.isMonthDisabledForLabelDate(s).isDisabled,l=n===s&&!(o||e.props.disabledKeyboardNavigation)?"0":"-1";return l},e.getQuarterTabIndex=function(n){if(e.props.preSelection==null)return"-1";var s=Zi(e.props.preSelection),o=Cd(e.props.day,e.props),l=n===s&&!(o||e.props.disabledKeyboardNavigation)?"0":"-1";return l},e.getAriaLabel=function(n){var s=e.props,o=s.chooseDayAriaLabelPrefix,l=o===void 0?"Choose":o,u=s.disabledDayAriaLabelPrefix,h=u===void 0?"Not available":u,m=s.day,p=s.locale,v=Ja(m,n),b=e.isDisabled(v)||e.isExcluded(v)?h:l;return"".concat(b," ").concat($t(v,"MMMM yyyy",p))},e.getQuarterClassNames=function(n){var s=e.props,o=s.day,l=s.startDate,u=s.endDate,h=s.selected,m=s.minDate,p=s.maxDate,v=s.excludeDates,b=s.includeDates,_=s.filterDate,C=s.preSelection,S=s.disabledKeyboardNavigation,E=(m||p||v||b||_)&&Cd(Zo(o,n),e.props);return Hn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":E,"react-datepicker__quarter-text--selected":h?e.isSelectedQuarter(o,n,h):void 0,"react-datepicker__quarter-text--keyboard-selected":!S&&C&&e.isSelectedQuarter(o,n,C)&&!E,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":l&&u?Sd(l,u,n,o):void 0,"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":e.isCurrentQuarter(o,n)})},e.getMonthContent=function(n){var s=e.props,o=s.showFullMonthYearPicker,l=s.renderMonthContent,u=s.locale,h=s.day,m=q_(n,u),p=Ty(n,u);return l?l(n,m,p,h):o?p:m},e.getQuarterContent=function(n){var s,o=e.props,l=o.renderQuarterContent,u=o.locale,h=p3(n,u);return(s=l==null?void 0:l(n,h))!==null&&s!==void 0?s:h},e.renderMonths=function(){var n,s=e.props,o=s.showTwoColumnMonthYearPicker,l=s.showFourColumnMonthYearPicker,u=s.day,h=s.selected,m=(n=Yp[E1(l,o)])===null||n===void 0?void 0:n.grid;return m==null?void 0:m.map(function(p,v){return f.createElement("div",{className:"react-datepicker__month-wrapper",key:v},p.map(function(b,_){return f.createElement("div",{ref:e.MONTH_REFS[b],key:_,onClick:function(C){e.onMonthClick(C,b)},onKeyDown:function(C){K_(C)&&(C.preventDefault(),C.key=Ae.Enter),e.onMonthKeyDown(C,b)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onMonthMouseEnter(b)},onPointerEnter:e.props.usePointerEvent?function(){return e.onMonthMouseEnter(b)}:void 0,tabIndex:Number(e.getTabIndex(b)),className:e.getMonthClassNames(b),"aria-disabled":e.isMonthDisabled(b),role:"option","aria-label":e.getAriaLabel(b),"aria-current":e.isCurrentMonth(u,b)?"date":void 0,"aria-selected":h?e.isSelectedMonth(u,b,h):void 0},e.getMonthContent(b))}))})},e.renderQuarters=function(){var n=e.props,s=n.day,o=n.selected,l=[1,2,3,4];return f.createElement("div",{className:"react-datepicker__quarter-wrapper"},l.map(function(u,h){return f.createElement("div",{key:h,ref:e.QUARTER_REFS[h],role:"option",onClick:function(m){e.onQuarterClick(m,u)},onKeyDown:function(m){e.onQuarterKeyDown(m,u)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onQuarterMouseEnter(u)},onPointerEnter:e.props.usePointerEvent?function(){return e.onQuarterMouseEnter(u)}:void 0,className:e.getQuarterClassNames(u),"aria-selected":o?e.isSelectedQuarter(s,u,o):void 0,tabIndex:Number(e.getQuarterTabIndex(u)),"aria-current":e.isCurrentQuarter(s,u)?"date":void 0},e.getQuarterContent(u))}))},e.getClassNames=function(){var n=e.props,s=n.selectingDate,o=n.selectsStart,l=n.selectsEnd,u=n.showMonthYearPicker,h=n.showQuarterYearPicker,m=n.showWeekPicker;return Hn("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||l)},{"react-datepicker__monthPicker":u},{"react-datepicker__quarterPicker":h},{"react-datepicker__weekPicker":m})},e}return a.prototype.getSelection=function(){var e=this.props,n=e.selected,s=e.selectedDates,o=e.selectsMultiple;if(o)return s;if(n)return[n]},a.prototype.render=function(){var e=this.props,n=e.showMonthYearPicker,s=e.showQuarterYearPicker,o=e.day,l=e.ariaLabelPrefix,u=l===void 0?"Month ":l,h=u?u.trim()+" ":"";return f.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(h).concat($t(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},a}(w.Component),R3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isSelectedMonth=function(n){return e.props.month===n},e.renderOptions=function(){return e.props.monthNames.map(function(n,s){return f.createElement("div",{className:e.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:e.onChange.bind(e,s),"aria-selected":e.isSelectedMonth(s)?"true":void 0},e.isSelectedMonth(s)?f.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},e.onChange=function(n){return e.props.onChange(n)},e.handleClickOutside=function(){return e.props.onCancel()},e}return a.prototype.render=function(){return f.createElement(dh,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),k3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(n){return n.map(function(s,o){return f.createElement("option",{key:s,value:o},s)})},e.renderSelectMode=function(n){return f.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(s){return e.onChange(parseInt(s.target.value))}},e.renderSelectOptions(n))},e.renderReadView=function(n,s){return f.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},f.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),f.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[e.props.month]))},e.renderDropdown=function(n){return f.createElement(R3,wt({key:"dropdown"},e.props,{monthNames:n,onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(n){var s=e.state.dropdownVisible,o=[e.renderReadView(!s,n)];return s&&o.unshift(e.renderDropdown(n)),o},e.onChange=function(n){e.toggleDropdown(),n!==e.props.month&&e.props.onChange(n)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return q_(o,e.props.locale)}:function(o){return Ty(o,e.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return f.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},a}(w.Component);function L3(t,a){for(var e=[],n=Cs(t),s=Cs(a);!xs(n,s);)e.push(Mt(n)),n=fr(n,1);return e}var O3=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=xg(s),l=Lr(n.props.date,s)&&aa(n.props.date,s);return f.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":l?"true":void 0},l?f.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",$t(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:L3(n.props.minDate,n.props.maxDate)},n}return a.prototype.render=function(){var e=Hn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return f.createElement(dh,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),P3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=Cs(e.props.minDate),s=Cs(e.props.maxDate),o=[];!xs(n,s);){var l=xg(n);o.push(f.createElement("option",{key:l,value:l},$t(n,e.props.dateFormat,e.props.locale))),n=fr(n,1)}return o},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return f.createElement("select",{value:xg(Cs(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){var s=$t(e.props.date,e.props.dateFormat,e.props.locale);return f.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:e.toggleDropdown},f.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),f.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},e.renderDropdown=function(){return f.createElement(O3,wt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,s=[e.renderReadView(!n)];return n&&s.unshift(e.renderDropdown()),s},e.onChange=function(n){e.toggleDropdown();var s=Mt(n);Lr(e.props.date,s)&&aa(e.props.date,s)||e.props.onChange(s)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return f.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(w.Component),B3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={height:null},e.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;e.list&&(e.list.scrollTop=(o=e.centerLi&&a.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-((s=(n=e.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):e.list.clientHeight,e.centerLi))!==null&&o!==void 0?o:0)})},e.handleClick=function(n){var s,o;(e.props.minTime||e.props.maxTime)&&m1(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&h1(n,e.props)||(o=(s=e.props).onChange)===null||o===void 0||o.call(s,n)},e.isSelectedTime=function(n){return e.props.selected&&x3(e.props.selected,n)},e.isDisabledTime=function(n){return(e.props.minTime||e.props.maxTime)&&m1(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&h1(n,e.props)},e.liClasses=function(n){var s,o=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(n):void 0];return e.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(bs(n)*3600+ws(n)*60+ui(n))%(((s=e.props.intervals)!==null&&s!==void 0?s:a.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},e.handleOnKeyDown=function(n,s){var o,l;n.key===Ae.Space&&(n.preventDefault(),n.key=Ae.Enter),(n.key===Ae.ArrowUp||n.key===Ae.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Ae.ArrowDown||n.key===Ae.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Ae.Enter&&e.handleClick(s),(l=(o=e.props).handleOnKeyDown)===null||l===void 0||l.call(o,n)},e.renderTimes=function(){for(var n,s=[],o=typeof e.props.format=="string"?e.props.format:"p",l=(n=e.props.intervals)!==null&&n!==void 0?n:a.defaultProps.intervals,u=e.props.selected||e.props.openToDate||Mt(),h=Wd(u),m=e.props.injectTimes&&e.props.injectTimes.sort(function(E,I){return E.getTime()-I.getTime()}),p=60*E3(u),v=p/l,b=0;b<v;b++){var _=_g(h,b*l);if(s.push(_),m){var C=S3(h,_,b,l,m);s=s.concat(C)}}var S=s.reduce(function(E,I){return I.getTime()<=u.getTime()?I:E},s[0]);return s.map(function(E){return f.createElement("li",{key:E.valueOf(),onClick:e.handleClick.bind(e,E),className:e.liClasses(E),ref:function(I){E===S&&(e.centerLi=I)},onKeyDown:function(I){e.handleOnKeyDown(I,E)},tabIndex:E===S?0:-1,role:"option","aria-selected":e.isSelectedTime(E)?"true":void 0,"aria-disabled":e.isDisabledTime(E)?"true":void 0},$t(E,o,e.props.locale))})},e.renderTimeCaption=function(){return e.props.showTimeCaption===!1?f.createElement(f.Fragment,null):f.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(e.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){e.header=n}},f.createElement("div",{className:"react-datepicker-time__header"},e.props.timeCaption))},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},a.prototype.componentWillUnmount=function(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()},a.prototype.observeDatePickerHeightChanges=function(){var e=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(n))},a.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},a.prototype.render=function(){var e=this,n,s=this.state.height;return f.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:a.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),f.createElement("div",{className:"react-datepicker__time"},f.createElement("div",{className:"react-datepicker__time-box"},f.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){e.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},a.calcCenterPosition=function(e,n){return n.offsetTop-(e/2-n.clientHeight/2)},a}(w.Component),x1=3,U3=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.YEAR_REFS=Br([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(s){return er(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return Ny(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var l,u;(u=(l=n.YEAR_REFS[s])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var l,u,h,m,p=n.props,v=p.date,b=p.yearItemNumber;if(!(v===void 0||b===void 0)){var _=ci(v,b).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((u=(l=n.props).setPreSelection)===null||u===void 0||u.call(l,o),s-_<0?n.updateFocusOnPaginate(b-(_-s)):s-_>=b?n.updateFocusOnPaginate(Math.abs(b-(s-_))):(m=(h=n.YEAR_REFS[s-_])===null||h===void 0?void 0:h.current)===null||m===void 0||m.focus())}},n.isSameDay=function(s,o){return bt(s,o)},n.isCurrentYear=function(s){return s===it(Mt())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&Lr(kr(Mt(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&Lr(kr(Mt(),s),n.props.endDate)},n.isInRange=function(s){return _d(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,l=o.selectsStart,u=o.selectsEnd,h=o.selectsRange,m=o.startDate,p=o.endDate;return!(l||u||h)||!n.selectingDate()?!1:l&&p?_d(s,n.selectingDate(),p):u&&m||h&&m&&!p?_d(s,m,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var l=n.props,u=l.startDate,h=l.selectsStart,m=kr(Mt(),s);return h?Lr(m,(o=n.selectingDate())!==null&&o!==void 0?o:null):Lr(m,u??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var l=n.props,u=l.endDate,h=l.selectsEnd,m=l.selectsRange,p=kr(Mt(),s);return h||m?Lr(p,(o=n.selectingDate())!==null&&o!==void 0?o:null):Lr(p,u??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var o=n.props,l=o.minDate,u=o.maxDate,h=o.excludeDates,m=o.includeDates,p=o.filterDate,v=Mc(kr(n.props.date,s)),b=(l||u||h||m||p)&&Gd(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!bt(v,Mc(n.props.selected))&&bt(v,Mc(n.props.preSelection))&&!b}},n.isSelectedYear=function(s){var o=n.props,l=o.selectsMultiple,u=o.selected,h=o.selectedDates;return l?h==null?void 0:h.some(function(m){return s===it(m)}):!!u&&s===it(u)},n.onYearClick=function(s,o){var l=n.props.date;l!==void 0&&n.handleYearClick(Mc(kr(l,o)),s)},n.onYearKeyDown=function(s,o){var l,u,h=s.key,m=n.props,p=m.date,v=m.yearItemNumber,b=m.handleOnKeyDown;if(h!==Ae.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(h){case Ae.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(u=(l=n.props).setPreSelection)===null||u===void 0||u.call(l,n.props.selected);break;case Ae.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,ys(n.props.preSelection,1));break;case Ae.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,rl(n.props.preSelection,1));break;case Ae.ArrowUp:{if(p===void 0||v===void 0||n.props.preSelection==null)break;var _=ci(p,v).startPeriod,C=x1,S=o-C;if(S<_){var E=v%C;o>=_&&o<_+E?C=E:C+=E,S=o-C}n.handleYearNavigation(S,rl(n.props.preSelection,C));break}case Ae.ArrowDown:{if(p===void 0||v===void 0||n.props.preSelection==null)break;var I=ci(p,v).endPeriod,C=x1,S=o+C;if(S>I){var E=v%C;o<=I&&o>I-E?C=E:C+=E,S=o+C}n.handleYearNavigation(S,ys(n.props.preSelection,C));break}}b&&b(s)},n.getYearClassNames=function(s){var o=n.props,l=o.date,u=o.minDate,h=o.maxDate,m=o.excludeDates,p=o.includeDates,v=o.filterDate,b=o.yearClassName;return Hn("react-datepicker__year-text","react-datepicker__year-".concat(s),l?b==null?void 0:b(kr(l,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(u||h||m||p||v)&&Gd(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=it(n.props.preSelection),l=Gd(s,n.props);return s===o&&!l?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return a.prototype.render=function(){var e=this,n=[],s=this.props,o=s.date,l=s.yearItemNumber,u=s.onYearMouseEnter,h=s.onYearMouseLeave;if(o===void 0)return null;for(var m=ci(o,l),p=m.startPeriod,v=m.endPeriod,b=function(S){n.push(f.createElement("div",{ref:_.YEAR_REFS[S-p],onClick:function(E){e.onYearClick(E,S)},onKeyDown:function(E){K_(E)&&(E.preventDefault(),E.key=Ae.Enter),e.onYearKeyDown(E,S)},tabIndex:Number(_.getYearTabIndex(S)),className:_.getYearClassNames(S),onMouseEnter:_.props.usePointerEvent?void 0:function(E){return u(E,S)},onPointerEnter:_.props.usePointerEvent?function(E){return u(E,S)}:void 0,onMouseLeave:_.props.usePointerEvent?void 0:function(E){return h(E,S)},onPointerLeave:_.props.usePointerEvent?function(E){return h(E,S)}:void 0,key:S,"aria-current":_.isCurrentYear(S)?"date":void 0},_.getYearContent(S)))},_=this,C=p;C<=v;C++)b(C);return f.createElement("div",{className:"react-datepicker__year"},f.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},a}(w.Component);function z3(t,a,e,n){for(var s=[],o=0;o<2*a+1;o++){var l=t+a-o,u=!0;e&&(u=it(e)<=l),n&&u&&(u=it(n)>=l),u&&s.push(l)}return s}var H3=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;n.renderOptions=function(){var u=n.props.year,h=n.state.yearsList.map(function(v){return f.createElement("div",{className:u===v?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:v,onClick:n.onChange.bind(n,v),"aria-selected":u===v?"true":void 0},u===v?f.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",v)}),m=n.props.minDate?it(n.props.minDate):null,p=n.props.maxDate?it(n.props.maxDate):null;return(!p||!n.state.yearsList.find(function(v){return v===p}))&&h.unshift(f.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},f.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!m||!n.state.yearsList.find(function(v){return v===m}))&&h.push(f.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},f.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),h},n.onChange=function(u){n.props.onChange(u)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(u){var h=n.state.yearsList.map(function(m){return m+u});n.setState({yearsList:h})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=e.yearDropdownItemNumber,o=e.scrollableYearDropdown,l=s||(o?10:5);return n.state={yearsList:z3(n.props.year,l,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return a.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var n=e.children?Array.from(e.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;e.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},a.prototype.render=function(){var e=Hn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return f.createElement(dh,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),Y3=function(t){Tn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=e.props.minDate?it(e.props.minDate):1900,s=e.props.maxDate?it(e.props.maxDate):2100,o=[],l=n;l<=s;l++)o.push(f.createElement("option",{key:l,value:l},l));return o},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return f.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){return f.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return e.toggleDropdown(s)}},f.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),f.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))},e.renderDropdown=function(){return f.createElement(H3,wt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,s=[e.renderReadView(!n)];return n&&s.unshift(e.renderDropdown()),s},e.onChange=function(n){e.toggleDropdown(),n!==e.props.year&&e.props.onChange(n)},e.toggleDropdown=function(n){e.setState({dropdownVisible:!e.state.dropdownVisible},function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,n)})},e.handleYearChange=function(n,s){var o;(o=e.onSelect)===null||o===void 0||o.call(e,n,s),e.setOpen()},e.onSelect=function(n,s){var o,l;(l=(o=e.props).onSelect)===null||l===void 0||l.call(o,n,s)},e.setOpen=function(){var n,s;(s=(n=e.props).setOpen)===null||s===void 0||s.call(n,!0)},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return f.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(w.Component),F3=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],j3=function(t){var a=(t.className||"").split(/\s+/);return F3.some(function(e){return a.indexOf(e)>=0})},W3=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,l;j3(s.target)&&((l=(o=n.props).onDropdownFocus)===null||l===void 0||l.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,l=s.selected,u=s.openToDate,h=V_(n.props),m=X_(n.props),p=Mt(),v=u||l||o;return v||(h&&Ki(p,h)?h:m&&xs(p,m)?m:p)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:fr(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:$i(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,l){n.props.onSelect(s,o,l),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:kr(Mt(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,l,u,h;(l=(o=n.props).onYearChange)===null||l===void 0||l.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(h=(u=n.props).setOpen)===null||h===void 0||h.call(u,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!er(s,n.props))return s;for(var o=Cs(s),l=d3(s),u=p_(l,o),h=null,m=0;m<=u;m++){var p=dr(o,m);if(!er(p,n.props)){h=p;break}}return h},n.handleMonthChange=function(s){var o,l,u,h=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(h),n.props.adjustDateOnChange&&(n.props.onSelect(h),(u=(l=n.props).setOpen)===null||u===void 0||u.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(h)},n.handleCustomMonthChange=function(s){var o,l;(l=(o=n.props).onMonthChange)===null||l===void 0||l.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var l=o.date;return{date:kr(l,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var l=o.date;return{date:Ja(l,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var l=o.date;return{date:kr(Ja(l,$n(s)),it(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=fi(s,n.props.locale,n.props.calendarStartDay),l=[];return n.props.showWeekNumbers&&l.push(f.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),l.concat([0,1,2,3,4,5,6].map(function(u){var h=dr(o,u),m=n.formatWeekday(h,n.props.locale),p=n.props.weekDayClassName?n.props.weekDayClassName(h):void 0;return f.createElement("div",{key:u,"aria-label":$t(h,"EEEE",n.props.locale),className:Hn("react-datepicker__day-name",p)},m)}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?f3(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?m3(s,o):h3(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,l=s.date;return{date:rl(l,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,l;if(!n.props.renderCustomHeader){var u=(s=n.props.monthsShown)!==null&&s!==void 0?s:a.defaultProps.monthsShown,h=n.props.showPreviousMonths?u-1:0,m=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:h,p=$i(n.state.date,m),v;switch(!0){case n.props.showMonthYearPicker:v=y1(n.state.date,n.props);break;case n.props.showYearPicker:v=b3(n.state.date,n.props);break;case n.props.showQuarterYearPicker:v=y3(n.state.date,n.props);break;default:v=p1(p,n.props);break}if(!(!((l=n.props.forceShowMonthNavigation)!==null&&l!==void 0?l:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&v||n.props.showTimeSelectOnly)){var b=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],_=["react-datepicker__navigation","react-datepicker__navigation--previous"],C=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(C=n.decreaseYear),v&&n.props.showDisabledMonthNavigation&&(_.push("react-datepicker__navigation--previous--disabled"),C=void 0);var S=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,E=n.props,I=E.previousMonthButtonLabel,M=I===void 0?a.defaultProps.previousMonthButtonLabel:I,A=E.previousYearButtonLabel,k=A===void 0?a.defaultProps.previousYearButtonLabel:A,O=n.props,U=O.previousMonthAriaLabel,q=U===void 0?typeof M=="string"?M:"Previous Month":U,Y=O.previousYearAriaLabel,$=Y===void 0?typeof k=="string"?k:"Previous Year":Y;return f.createElement("button",{type:"button",className:_.join(" "),onClick:C,onKeyDown:n.props.handleOnKeyDown,"aria-label":S?$:q},f.createElement("span",{className:b.join(" ")},S?k:M))}}},n.increaseYear=function(){n.setState(function(s){var o,l=s.date;return{date:ys(l,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.showMonthYearPicker:o=v1(n.state.date,n.props);break;case n.props.showYearPicker:o=w3(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=v3(n.state.date,n.props);break;default:o=g1(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var l=["react-datepicker__navigation","react-datepicker__navigation--next"],u=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&l.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&l.push("react-datepicker__navigation--next--with-today-button");var h=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(h=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(l.push("react-datepicker__navigation--next--disabled"),h=void 0);var m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,p=n.props,v=p.nextMonthButtonLabel,b=v===void 0?a.defaultProps.nextMonthButtonLabel:v,_=p.nextYearButtonLabel,C=_===void 0?a.defaultProps.nextYearButtonLabel:_,S=n.props,E=S.nextMonthAriaLabel,I=E===void 0?typeof b=="string"?b:"Next Month":E,M=S.nextYearAriaLabel,A=M===void 0?typeof C=="string"?C:"Next Year":M;return f.createElement("button",{type:"button",className:l.join(" "),onClick:h,onKeyDown:n.props.handleOnKeyDown,"aria-label":m?A:I},f.createElement("span",{className:u.join(" ")},m?C:b))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),f.createElement("h2",{className:o.join(" ")},$t(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return f.createElement(Y3,wt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:it(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return f.createElement(k3,wt({},a.defaultProps,n.props,{month:$n(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return f.createElement(P3,wt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(u1(),s),n.props.setPreSelection&&n.props.setPreSelection(u1())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return f.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var o=s.monthDate,l=s.i;return f.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),f.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(l!==0),n.renderMonthYearDropdown(l!==0),n.renderYearDropdown(l!==0)),f.createElement("div",{className:"react-datepicker__day-names"},n.header(o)))},n.renderCustomHeader=function(s){var o,l,u=s.monthDate,h=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var m=p1(n.state.date,n.props),p=g1(n.state.date,n.props),v=y1(n.state.date,n.props),b=v1(n.state.date,n.props),_=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return f.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(l=(o=n.props).renderCustomHeader)===null||l===void 0?void 0:l.call(o,wt(wt({},n.state),{customHeaderCount:h,monthDate:u,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:m,nextMonthButtonDisabled:p,prevYearButtonDisabled:v,nextYearButtonDisabled:b})),_&&f.createElement("div",{className:"react-datepicker__day-names"},n.header(u)))},n.renderYearHeader=function(s){var o=s.monthDate,l=n.props,u=l.showYearPicker,h=l.yearItemNumber,m=h===void 0?a.defaultProps.yearItemNumber:h,p=ci(o,m),v=p.startPeriod,b=p.endPeriod;return f.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},u?"".concat(v," - ").concat(b):it(o))},n.renderHeader=function(s){var o=s.monthDate,l=s.i,u=l===void 0?0:l,h={monthDate:o,i:u};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(h);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(h);default:return n.renderDefaultHeader(h)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var l=[],u=(s=n.props.monthsShown)!==null&&s!==void 0?s:a.defaultProps.monthsShown,h=n.props.showPreviousMonths?u-1:0,m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ys(n.state.date,h):$i(n.state.date,h),p=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:h,v=0;v<u;++v){var b=v-p+h,_=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ys(m,b):fr(m,b),C="month-".concat(v),S=v<u-1,E=v>0;l.push(f.createElement("div",{key:C,ref:function(I){n.monthContainer=I??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:_,i:v}),f.createElement(N3,wt({},a.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:_,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:v,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:S,monthShowsDuplicateDaysStart:E}))))}return l}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return f.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),f.createElement(U3,wt({},a.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return f.createElement(B3,wt({},a.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&fh(s)&&!!n.props.selected,l=o?"".concat(w1(s.getHours()),":").concat(w1(s.getMinutes())):"";if(n.props.showTimeInput)return f.createElement(I3,wt({},a.defaultProps,n.props,{date:s,timeString:l,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=ci(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:a.defaultProps.yearItemNumber),l=o.startPeriod,u=o.endPeriod,h;return n.props.showYearPicker?h="".concat(l," - ").concat(u):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?h=it(n.state.date):h="".concat(Ty($n(n.state.date),n.props.locale)," ").concat(it(n.state.date)),f.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&h)},n.renderChildren=function(){if(n.props.children)return f.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(a,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:ru}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){e.setState({monthContainer:e.monthContainer})}())},a.prototype.componentDidUpdate=function(e){var n=this;if(this.props.preSelection&&(!bt(this.props.preSelection,e.preSelection)||this.props.monthSelectedIn!==e.monthSelectedIn)){var s=!aa(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!bt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})},a.prototype.render=function(){var e=this.props.container||r3;return f.createElement(dh,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},f.createElement("div",{style:{display:"contents"},ref:this.containerRef},f.createElement(e,{className:Hn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},a}(w.Component),G3=function(t){var a=t.icon,e=t.className,n=e===void 0?"":e,s=t.onClick,o="react-datepicker__calendar-icon";if(typeof a=="string")return f.createElement("i",{className:"".concat(o," ").concat(a," ").concat(n),"aria-hidden":"true",onClick:s});if(f.isValidElement(a)){var l=a;return f.cloneElement(l,{className:"".concat(l.props.className||""," ").concat(o," ").concat(n),onClick:function(u){typeof l.props.onClick=="function"&&l.props.onClick(u),typeof s=="function"&&s(u)}})}return f.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},f.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},J_=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return a.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},a.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},a.prototype.render=function(){return eu.createPortal(this.props.children,this.el)},a}(w.Component),Z3="[tabindex], a, button, input, select, textarea",$3=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},eS=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(Z3),1,-1).filter($3)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=w.createRef(),n}return a.prototype.render=function(){var e;return((e=this.props.enableTabLoop)!==null&&e!==void 0?e:a.defaultProps.enableTabLoop)?f.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},f.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,f.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},a.defaultProps={enableTabLoop:!0},a}(w.Component);function q3(t){var a=function(e){var n,s=typeof e.hidePopper=="boolean"?e.hidePopper:!0,o=w.useRef(null),l=a3(wt({open:!s,whileElementsMounted:BR,placement:e.popperPlacement,middleware:Br([WR({padding:15}),jR(10),GR({element:o})],(n=e.popperModifiers)!==null&&n!==void 0?n:[],!0)},e.popperProps)),u=wt(wt({},e),{hidePopper:s,popperProps:wt(wt({},l),{arrowRef:o})});return f.createElement(t,wt({},u))};return a}var Q3=function(t){Tn(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(a,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e=this.props,n=e.className,s=e.wrapperClassName,o=e.hidePopper,l=o===void 0?a.defaultProps.hidePopper:o,u=e.popperComponent,h=e.targetComponent,m=e.enableTabLoop,p=e.popperOnKeyDown,v=e.portalId,b=e.portalHost,_=e.popperProps,C=e.showArrow,S=void 0;if(!l){var E=Hn("react-datepicker-popper",n);S=f.createElement(eS,{enableTabLoop:m},f.createElement("div",{ref:_.refs.setFloating,style:_.floatingStyles,className:E,"data-placement":_.placement,onKeyDown:p},u,C&&f.createElement(VR,{ref:_.arrowRef,context:_.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(S=w.createElement(this.props.popperContainer,{},S)),v&&!l&&(S=f.createElement(J_,{portalId:v,portalHost:b},S));var I=Hn("react-datepicker-wrapper",s);return f.createElement(f.Fragment,null,f.createElement("div",{ref:_.refs.setReference,className:I},h),S)},a}(w.Component),V3=q3(Q3),I1="react-datepicker-ignore-onclickoutside";function X3(t,a){return t&&a?$n(t)!==$n(a)||it(t)!==it(a):t!==a}var Fp="Date input not valid.",tS=function(t){Tn(a,t);function a(e){var n=t.call(this,e)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Mt()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,l){var u=new Date(l.date);return fh(u)?Br(Br([],o,!0),[wt(wt({},l),{date:u})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),l=V_(n.props),u=X_(n.props),h=l&&Ki(o,Wd(l))?l:u&&xs(o,d1(u))?u:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:h,highlightDates:b1(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(wt(wt({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(wt(wt({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:jp},function(){s||n.setState(function(l){return{focused:o?l.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return vs(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,l,u=n.state.wasHidden,h=u?n.state.open:!0;u&&n.resetHiddenStatus(),n.state.preventFocus||((l=(o=n.props).onFocus)===null||l===void 0||l.call(o,s),h&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var o,l;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((l=(o=n.props).onBlur)===null||l===void 0||l.call(o,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,l;n.props.inline||n.setOpen(!1),(l=(o=n.props).onClickOutside)===null||l===void 0||l.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,l,u,h,m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];var v=m[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,m),!v||typeof v.isDefaultPrevented!="function"||v.isDefaultPrevented()))){n.setState({inputValue:(v==null?void 0:v.target)instanceof HTMLInputElement?v.target.value:null,lastPreSelectChange:K3});var b=n.props,_=b.selectsRange,C=b.startDate,S=b.endDate,E=(s=n.props.dateFormat)!==null&&s!==void 0?s:a.defaultProps.dateFormat,I=(o=n.props.strictParsing)!==null&&o!==void 0?o:a.defaultProps.strictParsing,M=(v==null?void 0:v.target)instanceof HTMLInputElement?v.target.value:"";if(_){var A=M.split(E.includes("-")?$_:"-",2).map(function(pe){return pe.trim()}),k=A[0],O=A[1],U=zp(k??"",E,n.props.locale,I),q=zp(O??"",E,n.props.locale,I),Y=(C==null?void 0:C.getTime())!==(U==null?void 0:U.getTime()),$=(S==null?void 0:S.getTime())!==(q==null?void 0:q.getTime());if(!Y&&!$||U&&er(U,n.props)||q&&er(q,n.props))return;(u=(l=n.props).onChange)===null||u===void 0||u.call(l,[U,q],v)}else{var K=zp(M,E,n.props.locale,I,(h=n.props.selected)!==null&&h!==void 0?h:void 0);(K||!M)&&n.setSelected(K,v,!0)}}},n.handleSelect=function(s,o,l){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(o),n.setSelected(s,o,!1,l),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var u=n.props,h=u.startDate,m=u.endDate;h&&!m&&(n.props.swapRange||!S1(s,h))&&n.setOpen(!1)}}},n.setSelected=function(s,o,l,u){var h,m,p=s;if(n.props.showYearPicker){if(p!==null&&Gd(it(p),n.props))return}else if(n.props.showMonthYearPicker){if(p!==null&&Q_(p,n.props))return}else if(p!==null&&er(p,n.props))return;var v=n.props,b=v.onChange,_=v.selectsRange,C=v.startDate,S=v.endDate,E=v.selectsMultiple,I=v.selectedDates,M=v.minTime,A=v.swapRange;if(!ji(n.props.selected,p)||n.props.allowSameDay||_||E)if(p!==null&&(n.props.selected&&(!l||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(p=Hp(p,{hour:bs(n.props.selected),minute:ws(n.props.selected),second:ui(n.props.selected)})),!l&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&M&&(p=Hp(p,{hour:M.getHours(),minute:M.getMinutes(),second:M.getSeconds()})),n.props.inline||n.setState({preSelection:p}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:u})),_){var k=!C&&!S,O=C&&!S,U=C&&S;k?b==null||b([p,null],o):O&&(p===null?b==null||b([null,null],o):S1(p,C)?A?b==null||b([p,C],o):b==null||b([p,null],o):b==null||b([C,p],o)),U&&(b==null||b([p,null],o))}else if(E){if(p!==null)if(!(I!=null&&I.length))b==null||b([p],o);else{var q=I.some(function($){return bt($,p)});if(q){var Y=I.filter(function($){return!bt($,p)});b==null||b(Y,o)}else b==null||b(Br(Br([],I,!0),[p],!1),o)}}else b==null||b(p,o);l||((m=(h=n.props).onSelect)===null||m===void 0||m.call(h,p,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=vs(n.props.minDate),l=vs(n.props.maxDate),u=!0;if(s){var h=Wd(s);if(o&&l)u=Ac(s,n.props.minDate,n.props.maxDate);else if(o){var m=Wd(n.props.minDate);u=xs(s,m)||ji(h,m)}else if(l){var p=d1(n.props.maxDate);u=Ki(s,p)||ji(h,p)}}u&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,l;if(!(n.props.selectsRange||n.props.selectsMultiple)){var u=n.props.selected?n.props.selected:n.getPreSelection(),h=n.props.selected?s:Hp(u,{hour:bs(s),minute:ws(s)});n.setState({preSelection:h}),(l=(o=n.props).onChange)===null||l===void 0||l.call(o,h),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,l,u,h,m,p;(l=(o=n.props).onKeyDown)===null||l===void 0||l.call(o,s);var v=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(v===Ae.ArrowDown||v===Ae.ArrowUp||v===Ae.Enter)&&((u=n.onInputClick)===null||u===void 0||u.call(n));return}if(n.state.open){if(v===Ae.ArrowDown||v===Ae.ArrowUp){s.preventDefault();var b=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',_=((h=n.calendar)===null||h===void 0?void 0:h.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(b);_ instanceof HTMLElement&&_.focus({preventScroll:!0});return}var C=Mt(n.state.preSelection);v===Ae.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===jp?(n.handleSelect(C,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(C)):n.setOpen(!1)):v===Ae.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):v===Ae.Tab&&n.setOpen(!1),n.inputOk()||(p=(m=n.props).onInputError)===null||p===void 0||p.call(m,{code:1,msg:Fp})}},n.onPortalKeyDown=function(s){var o=s.key;o===Ae.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,l,u,h,m,p,v=n.props,b=v.minDate,_=v.maxDate,C=v.disabledKeyboardNavigation,S=v.showWeekPicker,E=v.shouldCloseOnSelect,I=v.locale,M=v.calendarStartDay,A=v.adjustDateOnChange,k=v.inline;if((l=(o=n.props).onKeyDown)===null||l===void 0||l.call(o,s),!C){var O=s.key,U=s.shiftKey,q=Mt(n.state.preSelection),Y=function(z,D){var H=D;switch(z){case Ae.ArrowRight:H=S?af(D,1):dr(D,1);break;case Ae.ArrowLeft:H=S?$w(D):zA(D);break;case Ae.ArrowUp:H=$w(D);break;case Ae.ArrowDown:H=af(D,1);break;case Ae.PageUp:H=U?rl(D,1):$i(D,1);break;case Ae.PageDown:H=U?ys(D,1):fr(D,1);break;case Ae.Home:H=fi(D,I,M);break;case Ae.End:H=u3(D);break}return H},$=function(z,D){for(var H=40,W=z,F=!1,R=0,P=Y(z,D);!F;){if(R>=H){P=D;break}b&&P<b&&(W=Ae.ArrowRight,P=er(b,n.props)?Y(W,P):b),_&&P>_&&(W=Ae.ArrowLeft,P=er(_,n.props)?Y(W,P):_),er(P,n.props)?((W===Ae.PageUp||W===Ae.Home)&&(W=Ae.ArrowRight),(W===Ae.PageDown||W===Ae.End)&&(W=Ae.ArrowLeft),P=Y(W,P)):F=!0,R++}return P};if(O===Ae.Enter){s.preventDefault(),n.handleSelect(q,s),!E&&n.setPreSelection(q);return}else if(O===Ae.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(h=(u=n.props).onInputError)===null||h===void 0||h.call(u,{code:1,msg:Fp});return}var K=null;switch(O){case Ae.ArrowLeft:case Ae.ArrowRight:case Ae.ArrowUp:case Ae.ArrowDown:case Ae.PageUp:case Ae.PageDown:case Ae.Home:case Ae.End:K=$(O,q);break}if(!K){(p=(m=n.props).onInputError)===null||p===void 0||p.call(m,{code:1,msg:Fp});return}if(s.preventDefault(),n.setState({lastPreSelectChange:jp}),A&&n.setSelected(K),n.setPreSelection(K),k){var pe=$n(q),ie=$n(K),ne=it(q),se=it(K);pe!==ie||ne!==se?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===Ae.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,l=o.selectsRange,u=o.onChange;l?u==null||u([null,null],s):u==null||u(null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:f.createElement(W3,wt({showMonthYearDropdown:void 0,ref:function(l){n.calendar=l}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:a.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:_3(n.modifyHolidays()),outsideClickIgnoreClass:I1,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:a.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,o=s.dateFormat,l=o===void 0?a.defaultProps.dateFormat:o,u=s.locale,h=n.props.showTimeInput||n.props.showTimeSelect,m=h?"PPPPp":"PPPP",p;return n.props.selectsRange?p="Selected start date: ".concat(Ka(n.props.startDate,{dateFormat:m,locale:u}),". ").concat(n.props.endDate?"End date: "+Ka(n.props.endDate,{dateFormat:m,locale:u}):""):n.props.showTimeSelectOnly?p="Selected time: ".concat(Ka(n.props.selected,{dateFormat:l,locale:u})):n.props.showYearPicker?p="Selected year: ".concat(Ka(n.props.selected,{dateFormat:"yyyy",locale:u})):n.props.showMonthYearPicker?p="Selected month: ".concat(Ka(n.props.selected,{dateFormat:"MMMM yyyy",locale:u})):n.props.showQuarterYearPicker?p="Selected quarter: ".concat(Ka(n.props.selected,{dateFormat:"yyyy, QQQ",locale:u})):p="Selected date: ".concat(Ka(n.props.selected,{dateFormat:m,locale:u})),f.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},p)},n.renderDateInput=function(){var s,o,l,u=Hn(n.props.className,(s={},s[I1]=n.state.open,s)),h=n.props.customInput||f.createElement("input",{type:"text"}),m=n.props.customInputRef||"ref",p=n.props,v=p.dateFormat,b=v===void 0?a.defaultProps.dateFormat:v,_=p.locale,C=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?i3(n.props.startDate,n.props.endDate,{dateFormat:b,locale:_}):n.props.selectsMultiple?o3((l=n.props.selectedDates)!==null&&l!==void 0?l:[],{dateFormat:b,locale:_}):Ka(n.props.selected,{dateFormat:b,locale:_});return w.cloneElement(h,(o={},o[m]=function(S){n.input=S},o.value=C,o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Hn(h.props.className,u),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,l=s.disabled,u=s.selected,h=s.startDate,m=s.endDate,p=s.clearButtonTitle,v=s.clearButtonClassName,b=v===void 0?"":v,_=s.ariaLabelClose,C=_===void 0?"Close":_,S=s.selectedDates,E=s.readOnly;return o&&!E&&(u!=null||h!=null||m!=null||S!=null&&S.length)?f.createElement("button",{type:"button",className:Hn("react-datepicker__close-icon",b,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":C,onClick:n.onClearClick,title:p,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(a,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:ru,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.componentDidUpdate=function(e,n){var s,o,l,u;e.inline&&X3(e.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:b1(this.props.highlightDates)}),!n.focused&&!ji(e.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((u=(l=this.props).onCalendarClose)===null||u===void 0||u.call(l)))},a.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.renderInputContainer=function(){var e=this.props,n=e.showIcon,s=e.icon,o=e.calendarIconClassname,l=e.calendarIconClassName,u=e.toggleCalendarOnIconClick,h=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),f.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&f.createElement(G3,wt({icon:s,className:Hn(l,!l&&o,h&&"react-datepicker-ignore-onclickoutside")},u?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},a.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var n=this.state.open?f.createElement(eS,{enableTabLoop:this.props.enableTabLoop},f.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(n=f.createElement(J_,wt({portalId:this.props.portalId},this.props),n)),f.createElement("div",null,this.renderInputContainer(),n)}return f.createElement(V3,wt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},a}(w.Component),K3="input",jp="navigate";function D1(t){if(!t||typeof t!="string"||!t.match(/\d/))return{h:0,m:0};const[a,e]=t.trim().split(/\s+/);let[n,s]=a.split(":").map(Number);return e&&e.toLowerCase()==="pm"&&n!==12&&(n+=12),e&&e.toLowerCase()==="am"&&n===12&&(n=0),{h:n,m:s}}function Ry(t,a,e=30){const n=D1(t),s=D1(a),o=[];let l=new Date(0,0,0,n.h,n.m);const u=new Date(0,0,0,s.h,s.m);for(;l<=u;){const h=l.getHours(),m=l.getMinutes();let p=(h%12||12)+":"+(m<10?"0":"")+m+(h<12?" AM":" PM");o.push(p),l=new Date(l.getTime()+e*6e4)}return o}function J3(t){const a={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},e=new Date,n=e.getDay();let o=(a[t]-n+7)%7;o===0&&(o=7);const l=new Date(e);return l.setDate(e.getDate()+o),l}function ek({proposal:t,open:a,onClose:e,onSubmit:n,senderPlayer:s,phase:o,selectedDivision:l}){var W;const[u,h]=w.useState(new Date),[m,p]=w.useState(""),[v,b]=w.useState(""),[_,C]=w.useState(""),[S,E]=w.useState(""),[I,M]=w.useState(""),[A,k]=w.useState(""),[O,U]=w.useState("");w.useEffect(()=>{if(t&&a){if(t.date){const[F,R,P]=t.date.split("-");h(new Date(parseInt(F),parseInt(R)-1,parseInt(P)))}p(""),b(""),C(t.location||""),E(t.gameType||"8 Ball"),M(t.raceLength||(o==="scheduled"||o==="challenge"?5:7)),k("")}},[t,a,o]),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()];const $=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],K=((W=s==null?void 0:s.availability)==null?void 0:W[$])||[],pe=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],ie=K.length>0?K:pe,ne=s!=null&&s.locations?s.locations.split(/\r?\n/).map(F=>F.trim()).filter(Boolean):[],se=w.useMemo(()=>{if(!m)return[];const F=m.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();if(!F.includes(" - "))return[];let[R,P]=F.split(" - ").map(G=>z(G.trim()));return!R||!P?[]:Ry(R,P,30)},[m]);function z(F){let R=F.trim();R=R.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(G,Q,re,Ee)=>`${parseInt(Q,10)}:${re} ${Ee.toUpperCase()}`),R=R.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(G,Q,re,Ee)=>`${parseInt(Q,10)}:${re} ${Ee.toUpperCase()}`),R=R.replace(/^(\d{1,2})(am|pm)$/i,(G,Q,re)=>`${parseInt(Q,10)}:00 ${re.toUpperCase()}`),R=R.replace(/(am|pm)$/i," $1"),R=R.replace(/(am|pm)$/i,G=>G.toUpperCase());const P=R.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(P){const G=P[1],Q=P[2],re=P[3].toUpperCase();return`${G}:${Q} ${re}`}return R}function D(F){if(!F)return"";const R=new Date(F),P=String(R.getMonth()+1).padStart(2,"0"),G=String(R.getDate()).padStart(2,"0"),Q=R.getFullYear();return`${P}-${G}-${Q}`}const H=F=>{if(F.preventDefault(),!u||!v||!_){U("Please fill in all required fields.");return}U(""),n({date:D(u),time:v,location:_,gameType:S,raceLength:I,note:A})};return!a||!t?null:f.createElement(zn,{open:a,onClose:e,title:" Counter Proposal",maxWidth:"500px"},f.createElement("form",{onSubmit:H,style:{textAlign:"left"}},f.createElement("div",{style:{fontWeight:"bold",fontSize:"1.15rem",margin:"0 0 1rem 0",color:"#fff",textAlign:"center"}},"To: ",t.senderName||"Opponent"),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Date:"),f.createElement(tS,{selected:u,onChange:F=>h(F),dateFormat:"MM-dd-yyyy",className:"counter-proposal-date-input",required:!0})),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Time Block:"),f.createElement("select",{value:m,onChange:F=>{p(F.target.value),b("")},required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},f.createElement("option",{value:""},"Select time block"),ie.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Start Time:"),f.createElement("select",{value:v,onChange:F=>b(F.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},f.createElement("option",{value:""},"Select..."),se.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Location:"),f.createElement("select",{value:_,onChange:F=>C(F.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},f.createElement("option",{value:""},"Select location"),ne.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Game Type:"),f.createElement("select",{value:S,onChange:F=>E(F.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},f.createElement("option",{value:"8 Ball"},"8 Ball"),f.createElement("option",{value:"9 Ball"},"9 Ball"),f.createElement("option",{value:"10 Ball"},"10 Ball"),f.createElement("option",{value:"Mixed"},"Mixed"))),f.createElement("div",{style:{marginBottom:"1rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Race Length:"),f.createElement("select",{value:I,onChange:F=>M(Number(F.target.value)),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},o==="scheduled"||o==="challenge"?f.createElement("option",{value:5},"5"):[...Array(13)].map((F,R)=>{const P=R+3;return f.createElement("option",{key:P,value:P},P)}))),f.createElement("div",{style:{marginBottom:"1.5rem"}},f.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Note (optional):"),f.createElement("textarea",{value:A,onChange:F=>k(F.target.value),placeholder:"Add a note explaining your counter proposal...",rows:3,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",resize:"vertical"}})),O&&f.createElement("div",{style:{color:"#e53e3e",marginBottom:"1rem"}},O),f.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},f.createElement("button",{type:"submit",style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Submit Counter"),f.createElement("button",{type:"button",onClick:e,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Cancel"))))}function nS({open:t,onClose:a,opponents:e,onOpponentClick:n,phase:s}){return t?f.createElement(zn,{open:t,onClose:a,title:` Select Opponent - ${s==="scheduled"||s==="offseason"?"Phase 1":"Phase 2"}`,maxWidth:"500px"},f.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},e.length===0?f.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No opponents available for scheduling at this time."):f.createElement("div",{style:{display:"grid",gap:"8px"}},e.map((o,l)=>f.createElement("button",{key:o.player&&o.player.email||`${o.opponentName}-${l}`||`opponent-${l}`,onClick:()=>n(o.player&&o.player.name?o.player.name:o.opponentName),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:u=>{u.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",u.target.style.transform="translateY(-2px)",u.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:u=>{u.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",u.target.style.transform="translateY(0)",u.target.style.boxShadow="none"}},o.player&&o.player.name?o.player.name:o.opponentName))))):null}function ky({player:t,onClose:a,senderEmail:e,onProposeMatch:n,selectedDivision:s,phase:o}){if(!t)return null;const[l,u]=w.useState(!1),[h,m]=w.useState(10);return w.useEffect(()=>{let p;return l&&(m(10),p=setInterval(()=>{m(v=>v<=1?(clearInterval(p),u(!1),10):v-1)},1e3)),()=>clearInterval(p)},[l]),f.createElement(zn,{open:!0,onClose:a,title:` ${t.name||`${t.firstName} ${t.lastName}`}`,maxWidth:"600px"},f.createElement("div",{style:{textAlign:"left"}},f.createElement("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"1.5rem",textAlign:"center"}},o==="scheduled"?"Phase 1 (Scheduled)":o==="challenge"?"Phase 2 (Challenge)":o),f.createElement("div",{style:{marginBottom:"1.5rem"}},f.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Preferred Locations:"),f.createElement("div",{style:{color:"#fff",textAlign:"center"}},t.locations?(()=>{const p=t.locations.split(/\r?\n/).filter(Boolean),v=[];for(let b=0;b<p.length;b+=5)v.push(p.slice(b,b+5));return v.map((b,_)=>f.createElement("div",{key:_,style:{display:"flex",justifyContent:"center",marginBottom:"0.5em",flexWrap:"wrap",gap:"0.2em"}},b.map((C,S)=>f.createElement("span",{key:C+S,style:{textAlign:"center"}},C,S<b.length-1&&f.createElement("span",{style:{color:"#e53e3e",margin:"0 0.3em"}},"  ")))))})():"No locations specified")),f.createElement("div",{style:{marginBottom:"1.5rem"}},f.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Availability:"),f.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center",fontStyle:"italic"}},"Pick a timeblock within a day to schedule a match with this opponent."),f.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},f.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Mon","Tue","Wed"].map(p=>f.createElement("div",{key:p,style:{textAlign:"center"}},f.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},p),!t.availability||!t.availability[p]||t.availability[p].length===0?f.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},""):(t.availability[p]||[]).map((v,b)=>f.createElement("div",{key:b,onClick:()=>{n&&n(p,v,o,s)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:_=>{_.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",_.target.style.transform="translateY(-1px)",_.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:_=>{_.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",_.target.style.transform="translateY(0)",_.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${p} at ${v}`,onKeyPress:_=>{(_.key==="Enter"||_.key===" ")&&n&&n(p,v,o,s)}},v))))),f.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Thu","Fri","Sat"].map(p=>f.createElement("div",{key:p,style:{textAlign:"center"}},f.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},p),!t.availability||!t.availability[p]||t.availability[p].length===0?f.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},""):(t.availability[p]||[]).map((v,b)=>f.createElement("div",{key:b,onClick:()=>{n&&n(p,v,o,s)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:_=>{_.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",_.target.style.transform="translateY(-1px)",_.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:_=>{_.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",_.target.style.transform="translateY(0)",_.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${p} at ${v}`,onKeyPress:_=>{(_.key==="Enter"||_.key===" ")&&n&&n(p,v,o,s)}},v))))))),f.createElement("div",{style:{marginBottom:"1.5rem",textAlign:"center"}},f.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Contact Information:"),f.createElement("div",{style:{color:"#fff",textAlign:"center"}},l?f.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem"}},f.createElement("div",{style:{marginBottom:"0.5rem"}},f.createElement("strong",null,"Email:")," ",t.email||"Not provided"),t.phone&&f.createElement("div",{style:{marginBottom:"0.5rem"}},f.createElement("strong",null,"Phone:")," ",t.phone),t.text&&f.createElement("div",{style:{marginBottom:"0.5rem"}},f.createElement("strong",null,"Text:")," ",t.text),t.preferredContacts&&t.preferredContacts.length>0&&f.createElement("div",null,f.createElement("strong",null,"Preferred Contact:")," ",t.preferredContacts.join(", ")),f.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"0.5rem"}},"Auto-hiding in ",h," seconds...")):f.createElement("button",{onClick:()=>u(!0),style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"}},"Show Contact Info")))))}const tk="_opponentName_1wgqu_479",Zt={"match-proposal-content":"_match-proposal-content_1wgqu_49","match-proposal-title":"_match-proposal-title_1wgqu_135","match-proposal-row":"_match-proposal-row_1wgqu_155","match-proposal-select":"_match-proposal-select_1wgqu_177","match-proposal-location-select":"_match-proposal-location-select_1wgqu_179","match-proposal-textarea":"_match-proposal-textarea_1wgqu_225","match-proposal-date-input":"_match-proposal-date-input_1wgqu_339","match-proposal-send-btn":"_match-proposal-send-btn_1wgqu_365","match-proposal-day-value":"_match-proposal-day-value_1wgqu_449",opponentName:tk,"match-proposal-division":"_match-proposal-division_1wgqu_493","match-proposal-phase":"_match-proposal-phase_1wgqu_493","match-proposal-label-red":"_match-proposal-label-red_1wgqu_501"};var Wp={},nk=Object.create,aS=Object.defineProperty,ak=Object.getOwnPropertyDescriptor,rS=Object.getOwnPropertyNames,rk=Object.getPrototypeOf,sk=Object.prototype.hasOwnProperty,iu=(t,a)=>function(){return a||(0,t[rS(t)[0]])((a={exports:{}}).exports,a),a.exports},ik=(t,a,e,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let s of rS(a))!sk.call(t,s)&&s!==e&&aS(t,s,{get:()=>a[s],enumerable:!(n=ak(a,s))||n.enumerable});return t},ou=(t,a,e)=>(e=t!=null?nk(rk(t)):{},ik(!t||!t.__esModule?aS(e,"default",{value:t,enumerable:!0}):e,t)),ok=iu({"node_modules/base64-js/index.js"(t){t.byteLength=h,t.toByteArray=p,t.fromByteArray=_;var a=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,l=s.length;o<l;++o)a[o]=s[o],e[s.charCodeAt(o)]=o;var o,l;e[45]=62,e[95]=63;function u(C){var S=C.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=C.indexOf("=");E===-1&&(E=S);var I=E===S?0:4-E%4;return[E,I]}function h(C){var S=u(C),E=S[0],I=S[1];return(E+I)*3/4-I}function m(C,S,E){return(S+E)*3/4-E}function p(C){var S,E=u(C),I=E[0],M=E[1],A=new n(m(C,I,M)),k=0,O=M>0?I-4:I,U;for(U=0;U<O;U+=4)S=e[C.charCodeAt(U)]<<18|e[C.charCodeAt(U+1)]<<12|e[C.charCodeAt(U+2)]<<6|e[C.charCodeAt(U+3)],A[k++]=S>>16&255,A[k++]=S>>8&255,A[k++]=S&255;return M===2&&(S=e[C.charCodeAt(U)]<<2|e[C.charCodeAt(U+1)]>>4,A[k++]=S&255),M===1&&(S=e[C.charCodeAt(U)]<<10|e[C.charCodeAt(U+1)]<<4|e[C.charCodeAt(U+2)]>>2,A[k++]=S>>8&255,A[k++]=S&255),A}function v(C){return a[C>>18&63]+a[C>>12&63]+a[C>>6&63]+a[C&63]}function b(C,S,E){for(var I,M=[],A=S;A<E;A+=3)I=(C[A]<<16&16711680)+(C[A+1]<<8&65280)+(C[A+2]&255),M.push(v(I));return M.join("")}function _(C){for(var S,E=C.length,I=E%3,M=[],A=16383,k=0,O=E-I;k<O;k+=A)M.push(b(C,k,k+A>O?O:k+A));return I===1?(S=C[E-1],M.push(a[S>>2]+a[S<<4&63]+"==")):I===2&&(S=(C[E-2]<<8)+C[E-1],M.push(a[S>>10]+a[S>>4&63]+a[S<<2&63]+"=")),M.join("")}}}),lk=iu({"(disabled):https"(){}}),ck=iu({"node_modules/form-data/lib/browser.js"(t,a){a.exports=typeof self=="object"?self.FormData:window.FormData}}),uk=iu({"(disabled):node_modules/jsonwebtoken/index.js"(){}}),dk=iu({"(disabled):crypto"(){}}),fk=ou(ok());function Ag(t){return typeof t=="string"}function M1(t,a){return!!a&&Ag(t)}function hk(t,a){const e=[];if(Ag(t)&&M1(t,a)){for(let n=0,s=t.length;n<s;n++)if(t.charAt(n)){const o=t.charAt(n),l=a(o,n,t);e[n]=l}}else if(!Ag(t)&&!M1(t,a)){for(let n=0,s=t.length;n<s;n++)if(n in t){const o=t[n],l=a(o,n,t);e[n]=l}}return e}var mk=t=>(0,fk.fromByteArray)(new Uint8Array(hk(t,a=>a.charCodeAt(0)))),pk=t=>{const a={},e=String.fromCharCode,n=t.length;let s,o=0,l,u,h=0,m,p="";const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0;s<64;s++)a[v.charAt(s)]=s;for(u=0;u<n;u++)for(l=a[t.charAt(u)],o=(o<<6)+l,h+=6;h>=8;)((m=o>>>(h-=8)&255)||u<n-2)&&(p+=e(m));return p},A1=class{constructor(t,a,e){this.client=t,this.id=a,this.data=e}async create(){var e,n,s,o,l,u,h,m,p,v,b,_;const t={id:this.id,message_template:(e=this.data)==null?void 0:e.message_template,segment_ids:(n=this.data)==null?void 0:n.segment_ids,sender_id:(s=this.data)==null?void 0:s.sender_id,sender_mode:(o=this.data)==null?void 0:o.sender_mode,channel_template:(l=this.data)==null?void 0:l.channel_template,create_channels:(u=this.data)==null?void 0:u.create_channels,show_channels:(h=this.data)==null?void 0:h.show_channels,description:(m=this.data)==null?void 0:m.description,name:(p=this.data)==null?void 0:p.name,skip_push:(v=this.data)==null?void 0:v.skip_push,skip_webhook:(b=this.data)==null?void 0:b.skip_webhook,user_ids:(_=this.data)==null?void 0:_.user_ids},a=await this.client.createCampaign(t);return this.id=a.campaign.id,this.data=a.campaign,a}verifyCampaignId(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}async start(t){return this.verifyCampaignId(),await this.client.startCampaign(this.id,t)}update(t){return this.verifyCampaignId(),this.client.updateCampaign(this.id,t)}async delete(){return this.verifyCampaignId(),await this.client.deleteCampaign(this.id)}stop(){return this.verifyCampaignId(),this.client.stopCampaign(this.id)}get(t){return this.verifyCampaignId(),this.client.getCampaign(this.id,t)}};function sS(t,a){return function(){return t.apply(a,arguments)}}var{toString:gk}=Object.prototype,{getPrototypeOf:Ly}=Object,hh=(t=>a=>{const e=gk.call(a);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Wr=t=>(t=t.toLowerCase(),a=>hh(a)===t),mh=t=>a=>typeof a===t,{isArray:yl}=Array,$c=mh("undefined");function yk(t){return t!==null&&!$c(t)&&t.constructor!==null&&!$c(t.constructor)&&tr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var iS=Wr("ArrayBuffer");function vk(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&iS(t.buffer),a}var bk=mh("string"),tr=mh("function"),oS=mh("number"),ph=t=>t!==null&&typeof t=="object",wk=t=>t===!0||t===!1,Zd=t=>{if(hh(t)!=="object")return!1;const a=Ly(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ck=Wr("Date"),_k=Wr("File"),Sk=Wr("Blob"),Ek=Wr("FileList"),xk=t=>ph(t)&&tr(t.pipe),Ik=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||tr(t.append)&&((a=hh(t))==="formdata"||a==="object"&&tr(t.toString)&&t.toString()==="[object FormData]"))},Dk=Wr("URLSearchParams"),Mk=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lu(t,a,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),yl(t))for(n=0,s=t.length;n<s;n++)a.call(null,t[n],n,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let u;for(n=0;n<l;n++)u=o[n],a.call(null,t[u],u,t)}}function lS(t,a){a=a.toLowerCase();const e=Object.keys(t);let n=e.length,s;for(;n-- >0;)if(s=e[n],a===s.toLowerCase())return s;return null}var cS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uS=t=>!$c(t)&&t!==cS;function Tg(){const{caseless:t}=uS(this)&&this||{},a={},e=(n,s)=>{const o=t&&lS(a,s)||s;Zd(a[o])&&Zd(n)?a[o]=Tg(a[o],n):Zd(n)?a[o]=Tg({},n):yl(n)?a[o]=n.slice():a[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&lu(arguments[n],e);return a}var Ak=(t,a,e,{allOwnKeys:n}={})=>(lu(a,(s,o)=>{e&&tr(s)?t[o]=sS(s,e):t[o]=s},{allOwnKeys:n}),t),Tk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Nk=(t,a,e,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),e&&Object.assign(t.prototype,e)},Rk=(t,a,e,n)=>{let s,o,l;const u={};if(a=a||{},t==null)return a;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)l=s[o],(!n||n(l,t,a))&&!u[l]&&(a[l]=t[l],u[l]=!0);t=e!==!1&&Ly(t)}while(t&&(!e||e(t,a))&&t!==Object.prototype);return a},kk=(t,a,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=a.length;const n=t.indexOf(a,e);return n!==-1&&n===e},Lk=t=>{if(!t)return null;if(yl(t))return t;let a=t.length;if(!oS(a))return null;const e=new Array(a);for(;a-- >0;)e[a]=t[a];return e},Ok=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Ly(Uint8Array)),Pk=(t,a)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;a.call(t,o[0],o[1])}},Bk=(t,a)=>{let e;const n=[];for(;(e=t.exec(a))!==null;)n.push(e);return n},Uk=Wr("HTMLFormElement"),zk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),T1=(({hasOwnProperty:t})=>(a,e)=>t.call(a,e))(Object.prototype),Hk=Wr("RegExp"),dS=(t,a)=>{const e=Object.getOwnPropertyDescriptors(t),n={};lu(e,(s,o)=>{let l;(l=a(s,o,t))!==!1&&(n[o]=l||s)}),Object.defineProperties(t,n)},Yk=t=>{dS(t,(a,e)=>{if(tr(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(tr(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Fk=(t,a)=>{const e={},n=s=>{s.forEach(o=>{e[o]=!0})};return yl(t)?n(t):n(String(t).split(a)),e},jk=()=>{},Wk=(t,a)=>(t=+t,Number.isFinite(t)?t:a),Gp="abcdefghijklmnopqrstuvwxyz",N1="0123456789",fS={DIGIT:N1,ALPHA:Gp,ALPHA_DIGIT:Gp+Gp.toUpperCase()+N1},Gk=(t=16,a=fS.ALPHA_DIGIT)=>{let e="";const{length:n}=a;for(;t--;)e+=a[Math.random()*n|0];return e};function Zk(t){return!!(t&&tr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var $k=t=>{const a=new Array(10),e=(n,s)=>{if(ph(n)){if(a.indexOf(n)>=0)return;if(!("toJSON"in n)){a[s]=n;const o=yl(n)?[]:{};return lu(n,(l,u)=>{const h=e(l,s+1);!$c(h)&&(o[u]=h)}),a[s]=void 0,o}}return n};return e(t,0)},qk=Wr("AsyncFunction"),Qk=t=>t&&(ph(t)||tr(t))&&tr(t.then)&&tr(t.catch),he={isArray:yl,isArrayBuffer:iS,isBuffer:yk,isFormData:Ik,isArrayBufferView:vk,isString:bk,isNumber:oS,isBoolean:wk,isObject:ph,isPlainObject:Zd,isUndefined:$c,isDate:Ck,isFile:_k,isBlob:Sk,isRegExp:Hk,isFunction:tr,isStream:xk,isURLSearchParams:Dk,isTypedArray:Ok,isFileList:Ek,forEach:lu,merge:Tg,extend:Ak,trim:Mk,stripBOM:Tk,inherits:Nk,toFlatObject:Rk,kindOf:hh,kindOfTest:Wr,endsWith:kk,toArray:Lk,forEachEntry:Pk,matchAll:Bk,isHTMLForm:Uk,hasOwnProperty:T1,hasOwnProp:T1,reduceDescriptors:dS,freezeMethods:Yk,toObjectSet:Fk,toCamelCase:zk,noop:jk,toFiniteNumber:Wk,findKey:lS,global:cS,isContextDefined:uS,ALPHABET:fS,generateString:Gk,isSpecCompliantForm:Zk,toJSONObject:$k,isAsyncFn:qk,isThenable:Qk};function cl(t,a,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s)}he.inherits(cl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var hS=cl.prototype,mS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mS[t]={value:t}});Object.defineProperties(cl,mS);Object.defineProperty(hS,"isAxiosError",{value:!0});cl.from=(t,a,e,n,s,o)=>{const l=Object.create(hS);return he.toFlatObject(t,l,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),cl.call(l,t.message,a,e,n,s),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};var Rt=cl,Vk=null;function Ng(t){return he.isPlainObject(t)||he.isArray(t)}function pS(t){return he.endsWith(t,"[]")?t.slice(0,-2):t}function R1(t,a,e){return t?t.concat(a).map(function(s,o){return s=pS(s),!e&&o?"["+s+"]":s}).join(e?".":""):a}function Xk(t){return he.isArray(t)&&!t.some(Ng)}var Kk=he.toFlatObject(he,{},null,function(a){return/^is[A-Z]/.test(a)});function Jk(t,a,e){if(!he.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,e=he.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,E){return!he.isUndefined(E[S])});const n=e.metaTokens,s=e.visitor||p,o=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(a);if(!he.isFunction(s))throw new TypeError("visitor must be a function");function m(C){if(C===null)return"";if(he.isDate(C))return C.toISOString();if(!h&&he.isBlob(C))throw new Rt("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(C)||he.isTypedArray(C)?h&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function p(C,S,E){let I=C;if(C&&!E&&typeof C=="object"){if(he.endsWith(S,"{}"))S=n?S:S.slice(0,-2),C=JSON.stringify(C);else if(he.isArray(C)&&Xk(C)||(he.isFileList(C)||he.endsWith(S,"[]"))&&(I=he.toArray(C)))return S=pS(S),I.forEach(function(A,k){!(he.isUndefined(A)||A===null)&&a.append(l===!0?R1([S],k,o):l===null?S:S+"[]",m(A))}),!1}return Ng(C)?!0:(a.append(R1(E,S,o),m(C)),!1)}const v=[],b=Object.assign(Kk,{defaultVisitor:p,convertValue:m,isVisitable:Ng});function _(C,S){if(!he.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(C),he.forEach(C,function(I,M){(!(he.isUndefined(I)||I===null)&&s.call(a,I,he.isString(M)?M.trim():M,S,b))===!0&&_(I,S?S.concat(M):[M])}),v.pop()}}if(!he.isObject(t))throw new TypeError("data must be an object");return _(t),a}var gh=Jk;function k1(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function gS(t,a){this._pairs=[],t&&gh(t,this,a)}var yS=gS.prototype;yS.append=function(a,e){this._pairs.push([a,e])};yS.toString=function(a){const e=a?function(n){return a.call(this,n,k1)}:k1;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};var vS=gS;function eL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bS(t,a,e){if(!a)return t;const n=e&&e.encode||eL,s=e&&e.serialize;let o;if(s?o=s(a,e):o=he.isURLSearchParams(a)?a.toString():new vS(a,e).toString(n),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}var tL=class{constructor(){this.handlers=[]}use(a,e,n){return this.handlers.push({fulfilled:a,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){he.forEach(this.handlers,function(n){n!==null&&a(n)})}},L1=tL,wS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nL=typeof URLSearchParams<"u"?URLSearchParams:vS,aL=typeof FormData<"u"?FormData:null,rL=typeof Blob<"u"?Blob:null,sL=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),iL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ur={classes:{URLSearchParams:nL,FormData:aL,Blob:rL},isStandardBrowserEnv:sL,isStandardBrowserWebWorkerEnv:iL,protocols:["http","https","file","blob","url","data"]};function oL(t,a){return gh(t,new Ur.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,o){return Ur.isNode&&he.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},a))}function lL(t){return he.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function cL(t){const a={},e=Object.keys(t);let n;const s=e.length;let o;for(n=0;n<s;n++)o=e[n],a[o]=t[o];return a}function uL(t){function a(e,n,s,o){let l=e[o++];const u=Number.isFinite(+l),h=o>=e.length;return l=!l&&he.isArray(s)?s.length:l,h?(he.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!u):((!s[l]||!he.isObject(s[l]))&&(s[l]=[]),a(e,n,s[l],o)&&he.isArray(s[l])&&(s[l]=cL(s[l])),!u)}if(he.isFormData(t)&&he.isFunction(t.entries)){const e={};return he.forEachEntry(t,(n,s)=>{a(lL(n),s,e,0)}),e}return null}var CS=uL;function dL(t,a,e){if(he.isString(t))try{return(a||JSON.parse)(t),he.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}var Oy={transitional:wS,adapter:["xhr","http"],transformRequest:[function(a,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,o=he.isObject(a);if(o&&he.isHTMLForm(a)&&(a=new FormData(a)),he.isFormData(a))return s&&s?JSON.stringify(CS(a)):a;if(he.isArrayBuffer(a)||he.isBuffer(a)||he.isStream(a)||he.isFile(a)||he.isBlob(a))return a;if(he.isArrayBufferView(a))return a.buffer;if(he.isURLSearchParams(a))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return oL(a,this.formSerializer).toString();if((u=he.isFileList(a))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return gh(u?{"files[]":a}:a,h&&new h,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),dL(a)):a}],transformResponse:[function(a){const e=this.transitional||Oy.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(a&&he.isString(a)&&(n&&!this.responseType||s)){const l=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(a)}catch(u){if(l)throw u.name==="SyntaxError"?Rt.from(u,Rt.ERR_BAD_RESPONSE,this,null,this.response):u}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ur.classes.FormData,Blob:Ur.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],t=>{Oy.headers[t]={}});var Py=Oy,fL=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hL=t=>{const a={};let e,n,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),e=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!e||a[e]&&fL[e])&&(e==="set-cookie"?a[e]?a[e].push(n):a[e]=[n]:a[e]=a[e]?a[e]+", "+n:n)}),a},O1=Symbol("internals");function wc(t){return t&&String(t).trim().toLowerCase()}function $d(t){return t===!1||t==null?t:he.isArray(t)?t.map($d):String(t)}function mL(t){const a=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)a[n[1]]=n[2];return a}var pL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zp(t,a,e,n,s){if(he.isFunction(n))return n.call(this,a,e);if(s&&(a=e),!!he.isString(a)){if(he.isString(n))return a.indexOf(n)!==-1;if(he.isRegExp(n))return n.test(a)}}function gL(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,e,n)=>e.toUpperCase()+n)}function yL(t,a){const e=he.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(s,o,l){return this[n].call(this,a,s,o,l)},configurable:!0})})}var yh=class{constructor(a){a&&this.set(a)}set(a,e,n){const s=this;function o(u,h,m){const p=wc(h);if(!p)throw new Error("header name must be a non-empty string");const v=he.findKey(s,p);(!v||s[v]===void 0||m===!0||m===void 0&&s[v]!==!1)&&(s[v||h]=$d(u))}const l=(u,h)=>he.forEach(u,(m,p)=>o(m,p,h));return he.isPlainObject(a)||a instanceof this.constructor?l(a,e):he.isString(a)&&(a=a.trim())&&!pL(a)?l(hL(a),e):a!=null&&o(e,a,n),this}get(a,e){if(a=wc(a),a){const n=he.findKey(this,a);if(n){const s=this[n];if(!e)return s;if(e===!0)return mL(s);if(he.isFunction(e))return e.call(this,s,n);if(he.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,e){if(a=wc(a),a){const n=he.findKey(this,a);return!!(n&&this[n]!==void 0&&(!e||Zp(this,this[n],n,e)))}return!1}delete(a,e){const n=this;let s=!1;function o(l){if(l=wc(l),l){const u=he.findKey(n,l);u&&(!e||Zp(n,n[u],u,e))&&(delete n[u],s=!0)}}return he.isArray(a)?a.forEach(o):o(a),s}clear(a){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const o=e[n];(!a||Zp(this,this[o],o,a,!0))&&(delete this[o],s=!0)}return s}normalize(a){const e=this,n={};return he.forEach(this,(s,o)=>{const l=he.findKey(n,o);if(l){e[l]=$d(s),delete e[o];return}const u=a?gL(o):String(o).trim();u!==o&&delete e[o],e[u]=$d(s),n[u]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const e=Object.create(null);return he.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=a&&he.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,e])=>a+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...e){const n=new this(a);return e.forEach(s=>n.set(s)),n}static accessor(a){const n=(this[O1]=this[O1]={accessors:{}}).accessors,s=this.prototype;function o(l){const u=wc(l);n[u]||(yL(s,l),n[u]=!0)}return he.isArray(a)?a.forEach(o):o(a),this}};yh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(yh.prototype,({value:t},a)=>{let e=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[e]=n}}});he.freezeMethods(yh);var _s=yh;function $p(t,a){const e=this||Py,n=a||e,s=_s.from(n.headers);let o=n.data;return he.forEach(t,function(u){o=u.call(e,o,s.normalize(),a?a.status:void 0)}),s.normalize(),o}function _S(t){return!!(t&&t.__CANCEL__)}function SS(t,a,e){Rt.call(this,t??"canceled",Rt.ERR_CANCELED,a,e),this.name="CanceledError"}he.inherits(SS,Rt,{__CANCEL__:!0});var vh=SS;function vL(t,a,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):a(new Rt("Request failed with status code "+e.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}var bL=Ur.isStandardBrowserEnv?function(){return{write:function(e,n,s,o,l,u){const h=[];h.push(e+"="+encodeURIComponent(n)),he.isNumber(s)&&h.push("expires="+new Date(s).toGMTString()),he.isString(o)&&h.push("path="+o),he.isString(l)&&h.push("domain="+l),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function wL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function CL(t,a){return a?t.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):t}function ES(t,a){return t&&!wL(a)?CL(t,a):a}var _L=Ur.isStandardBrowserEnv?function(){const a=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function s(o){let l=o;return a&&(e.setAttribute("href",l),l=e.href),e.setAttribute("href",l),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=s(window.location.href),function(l){const u=he.isString(l)?s(l):l;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function SL(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function EL(t,a){t=t||10;const e=new Array(t),n=new Array(t);let s=0,o=0,l;return a=a!==void 0?a:1e3,function(h){const m=Date.now(),p=n[o];l||(l=m),e[s]=h,n[s]=m;let v=o,b=0;for(;v!==s;)b+=e[v++],v=v%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),m-l<a)return;const _=p&&m-p;return _?Math.round(b*1e3/_):void 0}}var xL=EL;function P1(t,a){let e=0;const n=xL(50,250);return s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-e,h=n(u),m=o<=l;e=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&m?(l-o)/h:void 0,event:s};p[a?"download":"upload"]=!0,t(p)}}var IL=typeof XMLHttpRequest<"u",DL=IL&&function(t){return new Promise(function(e,n){let s=t.data;const o=_s.from(t.headers).normalize(),l=t.responseType;let u;function h(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let m;he.isFormData(s)&&(Ur.isStandardBrowserEnv||Ur.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.getContentType(/^\s*multipart\/form-data/)?he.isString(m=o.getContentType())&&o.setContentType(m.replace(/^\s*(multipart\/form-data);+/,"$1")):o.setContentType("multipart/form-data"));let p=new XMLHttpRequest;if(t.auth){const C=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(C+":"+S))}const v=ES(t.baseURL,t.url);p.open(t.method.toUpperCase(),bS(v,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function b(){if(!p)return;const C=_s.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),E={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:C,config:t,request:p};vL(function(M){e(M),h()},function(M){n(M),h()},E),p=null}if("onloadend"in p?p.onloadend=b:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(b)},p.onabort=function(){p&&(n(new Rt("Request aborted",Rt.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new Rt("Network Error",Rt.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let S=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const E=t.transitional||wS;t.timeoutErrorMessage&&(S=t.timeoutErrorMessage),n(new Rt(S,E.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,t,p)),p=null},Ur.isStandardBrowserEnv){const C=_L(v)&&t.xsrfCookieName&&bL.read(t.xsrfCookieName);C&&o.set(t.xsrfHeaderName,C)}s===void 0&&o.setContentType(null),"setRequestHeader"in p&&he.forEach(o.toJSON(),function(S,E){p.setRequestHeader(E,S)}),he.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),l&&l!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",P1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",P1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=C=>{p&&(n(!C||C.type?new vh(null,t,p):C),p.abort(),p=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const _=SL(v);if(_&&Ur.protocols.indexOf(_)===-1){n(new Rt("Unsupported protocol "+_+":",Rt.ERR_BAD_REQUEST,t));return}p.send(s||null)})},Rg={http:Vk,xhr:DL};he.forEach(Rg,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});var B1=t=>`- ${t}`,ML=t=>he.isFunction(t)||t===null||t===!1,xS={getAdapter:t=>{t=he.isArray(t)?t:[t];const{length:a}=t;let e,n;const s={};for(let o=0;o<a;o++){e=t[o];let l;if(n=e,!ML(e)&&(n=Rg[(l=String(e)).toLowerCase()],n===void 0))throw new Rt(`Unknown adapter '${l}'`);if(n)break;s[l||"#"+o]=n}if(!n){const o=Object.entries(s).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(B1).join(`
`):" "+B1(o[0]):"as no adapter specified";throw new Rt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Rg};function qp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new vh(null,t)}function U1(t){return qp(t),t.headers=_s.from(t.headers),t.data=$p.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xS.getAdapter(t.adapter||Py.adapter)(t).then(function(n){return qp(t),n.data=$p.call(t,t.transformResponse,n),n.headers=_s.from(n.headers),n},function(n){return _S(n)||(qp(t),n&&n.response&&(n.response.data=$p.call(t,t.transformResponse,n.response),n.response.headers=_s.from(n.response.headers))),Promise.reject(n)})}var z1=t=>t instanceof _s?t.toJSON():t;function ul(t,a){a=a||{};const e={};function n(m,p,v){return he.isPlainObject(m)&&he.isPlainObject(p)?he.merge.call({caseless:v},m,p):he.isPlainObject(p)?he.merge({},p):he.isArray(p)?p.slice():p}function s(m,p,v){if(he.isUndefined(p)){if(!he.isUndefined(m))return n(void 0,m,v)}else return n(m,p,v)}function o(m,p){if(!he.isUndefined(p))return n(void 0,p)}function l(m,p){if(he.isUndefined(p)){if(!he.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function u(m,p,v){if(v in a)return n(m,p);if(v in t)return n(void 0,m)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(m,p)=>s(z1(m),z1(p),!0)};return he.forEach(Object.keys(Object.assign({},t,a)),function(p){const v=h[p]||s,b=v(t[p],a[p],p);he.isUndefined(b)&&v!==u||(e[p]=b)}),e}var IS="1.6.0",By={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{By[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});var H1={};By.transitional=function(a,e,n){function s(o,l){return"[Axios v"+IS+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,u)=>{if(a===!1)throw new Rt(s(l," has been removed"+(e?" in "+e:"")),Rt.ERR_DEPRECATED);return e&&!H1[l]&&(H1[l]=!0,console.warn(s(l," has been deprecated since v"+e+" and will be removed in the near future"))),a?a(o,l,u):!0}};function AL(t,a,e){if(typeof t!="object")throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],l=a[o];if(l){const u=t[o],h=u===void 0||l(u,o,t);if(h!==!0)throw new Rt("option "+o+" must be "+h,Rt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Rt("Unknown option "+o,Rt.ERR_BAD_OPTION)}}var kg={assertOptions:AL,validators:By},ei=kg.validators,vf=class{constructor(a){this.defaults=a,this.interceptors={request:new L1,response:new L1}}request(a,e){typeof a=="string"?(e=e||{},e.url=a):e=a||{},e=ul(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:o}=e;n!==void 0&&kg.assertOptions(n,{silentJSONParsing:ei.transitional(ei.boolean),forcedJSONParsing:ei.transitional(ei.boolean),clarifyTimeoutError:ei.transitional(ei.boolean)},!1),s!=null&&(he.isFunction(s)?e.paramsSerializer={serialize:s}:kg.assertOptions(s,{encode:ei.function,serialize:ei.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&he.merge(o.common,o[e.method]);o&&he.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),e.headers=_s.concat(l,o);const u=[];let h=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(h=h&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let p,v=0,b;if(!h){const C=[U1.bind(this),void 0];for(C.unshift.apply(C,u),C.push.apply(C,m),b=C.length,p=Promise.resolve(e);v<b;)p=p.then(C[v++],C[v++]);return p}b=u.length;let _=e;for(v=0;v<b;){const C=u[v++],S=u[v++];try{_=C(_)}catch(E){S.call(this,E);break}}try{p=U1.call(this,_)}catch(C){return Promise.reject(C)}for(v=0,b=m.length;v<b;)p=p.then(m[v++],m[v++]);return p}getUri(a){a=ul(this.defaults,a);const e=ES(a.baseURL,a.url);return bS(e,a.params,a.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(a){vf.prototype[a]=function(e,n){return this.request(ul(n||{},{method:a,url:e,data:(n||{}).data}))}});he.forEach(["post","put","patch"],function(a){function e(n){return function(o,l,u){return this.request(ul(u||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}vf.prototype[a]=e(),vf.prototype[a+"Form"]=e(!0)});var qd=vf,TL=class DS{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(u=>{n.subscribe(u),o=u}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},a(function(o,l,u){n.reason||(n.reason=new vh(o,l,u),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const e=this._listeners.indexOf(a);e!==-1&&this._listeners.splice(e,1)}static source(){let a;return{token:new DS(function(s){a=s}),cancel:a}}},NL=TL;function RL(t){return function(e){return t.apply(null,e)}}function kL(t){return he.isObject(t)&&t.isAxiosError===!0}var Lg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lg).forEach(([t,a])=>{Lg[a]=t});var LL=Lg;function MS(t){const a=new qd(t),e=sS(qd.prototype.request,a);return he.extend(e,qd.prototype,a,{allOwnKeys:!0}),he.extend(e,a,null,{allOwnKeys:!0}),e.create=function(s){return MS(ul(t,s))},e}var bn=MS(Py);bn.Axios=qd;bn.CanceledError=vh;bn.CancelToken=NL;bn.isCancel=_S;bn.VERSION=IS;bn.toFormData=gh;bn.AxiosError=Rt;bn.Cancel=bn.CanceledError;bn.all=function(a){return Promise.all(a)};bn.spread=RL;bn.isAxiosError=kL;bn.mergeConfig=ul;bn.AxiosHeaders=_s;bn.formToJSON=t=>CS(he.isHTMLForm(t)?new FormData(t):t);bn.getAdapter=xS.getAdapter;bn.HttpStatusCode=LL;bn.default=bn;var qc=bn,{Axios:qz,AxiosError:Qz,CanceledError:Vz,isCancel:Xz,CancelToken:Kz,VERSION:Jz,all:eH,Cancel:tH,isAxiosError:nH,spread:aH,toFormData:rH,AxiosHeaders:sH,HttpStatusCode:iH,formToJSON:oH,getAdapter:lH,mergeConfig:cH}=qc,OL=ou(lk()),PL=ou(ck()),BL=25,UL=100,Qp={hasNext:!1,hasPrev:!1},zL=100*1024*1024,HL=10,YL=100,FL={created_at:!0,deleted_at:!0,pinned_at:!0,updated_at:!0,command:!0,mentioned_users:!0,quoted_message:!0,latest_reactions:!0,own_reactions:!0,reaction_counts:!0,reply_count:!0,i18n:!0,type:!0,html:!0,__html:!0,user:!0},jL={error:!0},WL=3,GL=1e3;function AS(t,a){t.then().catch(e=>{console.warn(`failed to do ${a}, ran into error: `,e)})}var hi=t=>new Promise(a=>setTimeout(a,t));function Og(t){return typeof t=="function"||t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}var Tc={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function ZL(t){return t!==null&&typeof t=="object"&&(t.readable||typeof t._read=="function")}function $L(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function qL(t){return typeof window<"u"&&"File"in window&&t instanceof File}function QL(t){return typeof window<"u"&&"Blob"in window&&t instanceof Blob}function VL(t){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[t]}function XL(t,a,e){const n=new PL.default;return ZL(t)||$L(t)||qL(t)||QL(t)?a?n.append("file",t,a):n.append("file",t):n.append("file",{uri:t,name:a||t.split("/").reverse()[0],contentType:e,type:e}),n}function Zn(t){const a=[],e=Array.isArray(t)?t:[t];for(const n of e){const s=Object.entries(n);s.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[o,l]of s)a.push({field:o,direction:l})}return a}function bf(t){const a=Math.min(500+t*2e3,25e3),e=Math.min(Math.max(250,(t-1)*2e3),25e3);return Math.floor(Math.random()*(a-e)+e)}function Qo(){return ar()}function Cc(t){let a="";for(let e=0;e<t.length;e++)a+=t[e].toString(16).padStart(2,"0");return a}function ar(){const t=eO(16);return t[6]=t[6]&15|64,t[8]=t[8]&191|128,Cc(t.subarray(0,4))+"-"+Cc(t.subarray(4,6))+"-"+Cc(t.subarray(6,8))+"-"+Cc(t.subarray(8,10))+"-"+Cc(t.subarray(10,16))}function KL(t){const a=Math.pow(2,8*t.byteLength/t.length);for(let e=0;e<t.length;e++)t[e]=Math.random()*a}var JL=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):KL;function eO(t){const a=new Uint8Array(t);return JL(a),a}function tO(t){const a={};if(!t)return a;try{Object.getOwnPropertyNames(t).forEach(e=>{a[e]=Object.getOwnPropertyDescriptor(t,e)})}catch{return{error:"failed to serialize the error"}}return a}function nO(){const t=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return t?typeof t.onLine!="boolean"?!0:t.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function TS(t){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",t),window.addEventListener("online",t))}function NS(t){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}var aO=t=>{const a=[];for(const e in t)t[e]!==void 0&&(Array.isArray(t[e])||typeof t[e]=="object"?a.push(`${e}=${encodeURIComponent(JSON.stringify(t[e]))}`):a.push(`${e}=${encodeURIComponent(t[e])}`));return a.join("&")};function Ta(t){const a=e=>e?{...e,created_at:t.created_at?new Date(t.created_at):new Date,deleted_at:t.deleted_at?new Date(t.deleted_at):null,pinned_at:t.pinned_at?new Date(t.pinned_at):null,reaction_groups:rO(t.reaction_groups,t.reaction_counts,t.reaction_scores),status:t.status||"received",updated_at:t.updated_at?new Date(t.updated_at):new Date}:null;return{...a(t),error:t.error??null,quoted_message:a(t.quoted_message)}}var RS=t=>{var n;const a={...FL,...jL};return{...Object.fromEntries(Object.entries(t).filter(([s])=>!a[s])),pinned:!!t.pinned_at,mentioned_users:(n=t.mentioned_users)==null?void 0:n.map(s=>typeof s=="string"?s:s.id)}},kS=({needle:t,sortedArray:a,selectKey:e,selectValueToCompare:n=o=>o,sortDirection:s="ascending"})=>{if(!a.length)return 0;let o=0,l=a.length-1,u=0;const h=()=>{u=Math.round((o+l)/2)},m=n(t);for(;o<=l;){h();const p=n(a[u]);s==="ascending"&&m<p||s==="descending"&&m>=p?l=u-1:o=u+1}if(e){const p=e(t),v=s==="ascending"?-1:1;for(let b=o+v;0<=b&&b<a.length&&n(a[b])===m;b+=v)if(e(a[b])===p)return b}return o};function LS(t,a,e=!1,n="created_at",s=!0){const o=s||e;let l=[...t];if(e&&(l=l.filter(p=>!(p.id&&a.id===p.id))),l.length===0&&o)return l.concat(a);if(l.length===0)return l;const u=a[n].getTime(),h=l.at(-1)[n].getTime()<u;if(h&&o)return l.concat(a);if(h)return l;const m=kS({needle:a,sortedArray:l,sortDirection:"ascending",selectValueToCompare:p=>p[n].getTime(),selectKey:p=>p.id});return!e&&a.id&&l[m]&&a.id===l[m].id?(l[m]=a,l):(o&&l.splice(m,0,a),l)}function rO(t,a,e){if(t)return t;if(a&&e){const n={};for(const s of Object.keys(a))n[s]={count:a[s],sum_scores:e[s]};return n}return null}var Pg=(t,a=0,{leading:e=!1,trailing:n=!0}={})=>{let s=null,o=null,l;const u=(...h)=>(s?clearTimeout(s):e&&(l=t(...h)),n&&(o=h),s=setTimeout(()=>{o&&(l=t(...o),o=null),s=null},a),l);return u.cancel=()=>{s&&clearTimeout(s)},u.flush=()=>(s&&(clearTimeout(s),s=null,o&&(l=t(...o))),l),u},OS=(t,a=200,{leading:e=!0,trailing:n=!1}={})=>{let s=null,o=null;return(...l)=>{if(s){n&&(o=l);return}e&&t(...l);const u=()=>{if(o){t(...o),o=null,s=setTimeout(u,a);return}s=null};s=setTimeout(u,a)}},sO=(t,a)=>a.split(".").reduce((e,n)=>{if(e&&typeof e=="object"&&n in e)return e[n]},t),iO=(t,a)=>{if(!Array.isArray(t))return[];const e=new Set;return t.filter(n=>{const s=sO(n,a);return e.has(s)?!1:(e.add(s),!0)})};function oO(t,a){let e=0,n=t.length-1;for(;e<=n;){const s=Math.floor((e+n)/2),o=t[s].created_at;if(!o){e+=1;continue}const l=new Date(o);if(l.getTime()===a.getTime())return s;l.getTime()<a.getTime()?e=s+1:n=s-1}return e}var lO=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var E,I;const s={...t.pagination};if(!(n!=null&&n.created_at_around))return s;let o,l,u,h;const m=new Date(n.created_at_around),[p,v]=[e[0],e.slice(-1)[0]],b=!!(p!=null&&p.created_at)&&new Date(p.created_at)>m,_=!!(v!=null&&v.created_at)&&new Date(v.created_at)<m,C=a>t.messages.length&&a>e.length,S=(a>t.messages.length||t.messages.length>=e.length)&&a>e.length;if(b)o=!1,u=!0,C&&(l=!1,h=!0);else if(_)l=!1,h=!0,C&&(o=!1,u=!0);else if(S)l=o=!1,u=h=!0;else{const[M,A]=[(p==null?void 0:p.id)&&p.id===((E=t.messages[0])==null?void 0:E.id),(v==null?void 0:v.id)&&v.id===((I=t.messages.slice(-1)[0])==null?void 0:I.id)];u=M,h=A;const k=Math.floor(e.length/2),O=oO(e,m);O!==-1&&(o=k<=O,l=k>=O)}return u&&typeof o<"u"&&(s.hasPrev=o),h&&typeof l<"u"&&(s.hasNext=l),s},cO=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var E,I;const s={...t.pagination},{id_around:o}=n||{};if(!o)return s;let l,u;const[h,m]=[e[0],e.slice(-1)[0]],[p,v]=[(h==null?void 0:h.id)===((E=t.messages[0])==null?void 0:E.id),(m==null?void 0:m.id)===((I=t.messages.slice(-1)[0])==null?void 0:I.id)];let b=p,_=v;const C=Math.floor(e.length/2);if((a>t.messages.length||t.messages.length>=e.length)&&a>e.length)u=l=!1,b=_=!0;else if(e[C])if(e[C].id===o)l=u=!0;else{let M;const A=[e.slice(0,C),e.slice(C)];l=u=!0;for(let k=0;k<A.length;k++)M=A[k].find(O=>O.id===o),M&&k===0&&(l=!1),M&&k===1&&(u=!1)}else return s;return b&&typeof l<"u"&&(s.hasPrev=l),_&&typeof u<"u"&&(s.hasNext=u),s},uO=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var E,I;const s={...t.pagination};let o,l;const[u,h]=[e[0],e.slice(-1)[0]],[m,p]=[(u==null?void 0:u.id)&&u.id===((E=t.messages[0])==null?void 0:E.id),(h==null?void 0:h.id)&&h.id===((I=t.messages.slice(-1)[0])==null?void 0:I.id)],v=n&&(n.created_at_after_or_equal||n.created_at_after||n.id_gt||n.id_gte),b=typeof n>"u"?!0:n.created_at_before_or_equal||n.created_at_before||n.id_lt||n.id_lte||n.offset,_=!v&&!b&&!(n!=null&&n.id_around)&&!(n!=null&&n.created_at_around),C=e.length>=a;(typeof b<"u"||_)&&(o=C),typeof v<"u"&&(l=C);const S=e.length===0;return(m||S)&&typeof o<"u"&&(s.hasPrev=o),(p||S)&&typeof l<"u"&&(s.hasNext=l),s},PS=t=>{var a,e,n;return t.parentSet.messages.length<t.returnedPage.length?((a=t.logger)==null||a.call(t,"error","Corrupted message set state: parent set size < returned page size"),t.parentSet.pagination):(e=t.messagePaginationOptions)!=null&&e.created_at_around?lO(t):(n=t.messagePaginationOptions)!=null&&n.id_around?cO(t):uO(t)},xd={},Vp=async({channel:t,client:a,id:e,members:n,options:s,type:o})=>{if(!t&&!o)throw new Error("Channel or channel type have to be provided to query a channel.");const l=t||a.channel(o,e,{members:n}),u=l.id?l.cid:n&&n.length?Uy(l.type,n):void 0;if(!u)throw new Error("Channel ID or channel members array have to be provided to query a channel.");const h=xd[u];if(h)await h;else try{xd[u]=l.watch(s),await xd[u]}finally{delete xd[u]}return l},Uy=(t,a)=>{if(!a)return;const e=[...a].sort().join(",");if(e)return`${t}:!members-${e}`},wf=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.pinned_at)},Id=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.archived_at)},Dd=t=>t?typeof t.archived=="boolean":!1,BS=({atIndex:t,sort:a,targetKey:e})=>{if(!a)return null;let n=null;if(Array.isArray(a))n=a[t]??null;else for(const s in a){if(s!==e)return null;n=a;break}return(n==null?void 0:n[e])??null},Bg=t=>{const a=dO({sort:t});return typeof a!="number"?!1:Math.abs(a)===1},dO=({sort:t})=>BS({atIndex:0,sort:t,targetKey:"pinned_at"}),US=({channels:t})=>{let a=null;for(const e of t){if(!wf(e))break;typeof a=="number"?a++:a=0}return a},Md=({channels:t,channelToMove:a,channelToMoveIndexWithinChannels:e,sort:n})=>{const s=e??t.findIndex(v=>v.cid===a.cid),o=s>=0,l=s===0,u=Bg(n),h=wf(a);if(l||u&&h)return t;const m=[...t];o&&m.splice(s,1);let p=null;return u&&(p=US({channels:m})),m.splice(typeof p=="number"?p+1:0,0,a),m},fO=t=>!!t.getTime,zS=t=>fO(t.created_at),hO=class{constructor(t){var a;this.messageSets=[],this.formatMessage=e=>Ta(e),this.setIsUpToDate=e=>{this.isUpToDate=e},this.removeMessageFromArray=(e,n)=>{const s=e.filter(o=>!(o.id&&n.id&&o.id===n.id));return{removed:s.length<e.length,result:s}},this.updateUserMessages=e=>{const n=(s,o)=>{var l;for(let u=0;u<s.length;u++){const h=s[u];((l=h.user)==null?void 0:l.id)===o.id&&(s[u]={...h,user:o})}};this.messageSets.forEach(s=>n(s.messages,e));for(const s in this.threads)n(this.threads[s],e);n(this.pinnedMessages,e)},this.deleteUserMessages=(e,n=!1)=>{const s=(o,l,u=!1)=>{var h;for(let m=0;m<o.length;m++){const p=o[m];((h=p.user)==null?void 0:h.id)===l.id&&(u?o[m]={cid:p.cid,created_at:p.created_at,deleted_at:l.deleted_at,id:p.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:p.parent_id,reply_count:p.reply_count,status:p.status,thread_participants:p.thread_participants,type:"deleted",updated_at:p.updated_at,user:p.user}:o[m]={...p,type:"deleted",deleted_at:l.deleted_at?new Date(l.deleted_at):null})}};this.messageSets.forEach(o=>s(o.messages,e,n));for(const o in this.threads)s(this.threads[o],e,n);s(this.pinnedMessages,e,n)},this._channel=t,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=((a=t==null?void 0:t.state)==null?void 0:a.last_message_at)!=null?new Date(t.state.last_message_at):null}get messages(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.messages)||[]}set messages(t){const a=this.messageSets.findIndex(e=>e.isCurrent);this.messageSets[a].messages=t}get latestMessages(){var t;return((t=this.messageSets.find(a=>a.isLatest))==null?void 0:t.messages)||[]}set latestMessages(t){const a=this.messageSets.findIndex(e=>e.isLatest);this.messageSets[a].messages=t}get messagePagination(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.pagination)||Qp}addMessageSorted(t,a=!1,e=!0,n="latest"){return this.addMessagesSorted([t],a,!1,e,n)}addMessagesSorted(t,a=!1,e=!1,n=!0,s="current"){var u;const{messagesToAdd:o,targetMessageSetIndex:l}=this.findTargetMessageSet(t,n,s);for(let h=0;h<o.length;h+=1){if(o[h].shadowed)continue;const p=o[h].created_at instanceof Date;let v;p?v=o[h]:(v=this.formatMessage(o[h]),v.user&&((u=this._channel)!=null&&u.cid)&&this._channel.getClient().state.updateUserReference(v.user,this._channel.cid),e&&v.id&&this.threads[v.id]&&delete this.threads[v.id],this.last_message_at||(this.last_message_at=new Date(v.created_at.getTime())),v.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(v.created_at.getTime())));const b=v.parent_id;if((!b||v.show_in_channel)&&l!==-1&&(this.messageSets[l].messages=this._addToMessageList(this.messageSets[l].messages,v,a,"created_at",n)),b&&!e){const _=this.threads[b]||[];this.threads[b]=this._addToMessageList(_,v,a,"created_at",n)}}return{messageSet:this.messageSets[l]}}addPinnedMessages(t){for(let a=0;a<t.length;a+=1)this.addPinnedMessage(t[a])}addPinnedMessage(t){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(t),!1,"pinned_at")}removePinnedMessage(t){const{result:a}=this.removeMessageFromArray(this.pinnedMessages,t);this.pinnedMessages=a}addReaction(t,a,e){const n=a;let s;if(n||(s=this.findMessage(t.message_id)),!n&&!s)return;const o=n??s,l={id:o==null?void 0:o.id,parent_id:o==null?void 0:o.parent_id,pinned:o==null?void 0:o.pinned,show_in_channel:o==null?void 0:o.show_in_channel};return this._updateMessage(l,u=>{if(n){const h={...n};return n.own_reactions=this._addOwnReactionToMessage(u.own_reactions,t,e),h.own_reactions=this._channel.getClient().userID===t.user_id?n.own_reactions:u.own_reactions,this.formatMessage(h)}return s?this._addReactionToState(s,t,e):u}),n??s}_addReactionToState(t,a,e){if(t.reaction_groups||(t.reaction_groups={}),e)for(const u of t.own_reactions??[]){const h=t.reaction_groups[u.type];t.reaction_groups[u.type]={...h,count:h.count-1,sum_scores:h.sum_scores-(u.score??1)},t.reaction_groups[u.type].count<1&&delete t.reaction_groups[u.type]}const s=t.reaction_groups[a.type],o=a.score??1;t.reaction_groups[a.type]=s?{...s,count:s.count+1,sum_scores:s.sum_scores+o,last_reaction_at:a.created_at}:{count:1,first_reaction_at:a.created_at,last_reaction_at:a.created_at,sum_scores:o},t.own_reactions=this._addOwnReactionToMessage(t.own_reactions,a,e);const l=this._channel.getClient().userID;return t.latest_reactions=e?[...(t.latest_reactions||[]).filter(u=>u.user_id!==l),a]:[...t.latest_reactions||[],a],t}_addOwnReactionToMessage(t,a,e){return e?t=[]:t=this._removeOwnReactionFromMessage(t,a),t=t||[],this._channel.getClient().userID===a.user_id&&t.push(a),t}_removeOwnReactionFromMessage(t,a){return t&&t.filter(e=>e.user_id!==a.user_id||e.type!==a.type)}removeReaction(t,a){const e=a;let n;if(e||(n=this.findMessage(t.message_id)),!e&&!n)return;const s=e??n,o={id:s==null?void 0:s.id,parent_id:s==null?void 0:s.parent_id,pinned:s==null?void 0:s.pinned,show_in_channel:s==null?void 0:s.show_in_channel};return this._updateMessage(o,l=>e?(e.own_reactions=this._removeOwnReactionFromMessage(l.own_reactions,t),this.formatMessage(e)):n?this._removeReactionFromState(n,t):l),e}_removeReactionFromState(t,a){var s,o,l,u;const e=(s=t.own_reactions)==null?void 0:s.find(h=>h.type===a.type);if(e&&((o=t.reaction_groups)!=null&&o[e.type])){const h=t.reaction_groups[e.type];t.reaction_groups[e.type]={...h,count:h.count-1,sum_scores:h.sum_scores-(e.score??1)},t.reaction_groups[e.type].count<1&&delete t.reaction_groups[e.type]}t.own_reactions=(l=t.own_reactions)==null?void 0:l.filter(h=>h.type!==a.type);const n=this._channel.getClient().userID;return t.latest_reactions=(u=t.latest_reactions)==null?void 0:u.filter(h=>!(h.user_id===n&&h.type===a.type)),t}_updateQuotedMessageReferences({message:t,remove:a}){const e=s=>{var o,l;return{...s,created_at:s.created_at.toISOString(),pinned_at:(o=s.pinned_at)==null?void 0:o.toISOString(),updated_at:(l=s.updated_at)==null?void 0:l.toISOString()}},n=s=>{const o=s.reduce((l,u)=>(u.quoted_message_id===t.id&&l.push({...e(u),quoted_message:a?{...t,attachments:[]}:t}),l),[]);this.addMessagesSorted(o,!0)};t.parent_id?t.parent_id&&this.threads[t.parent_id]&&n(this.threads[t.parent_id]):this.messageSets.forEach(s=>n(s.messages))}removeQuotedMessageReferences(t){this._updateQuotedMessageReferences({message:t,remove:!0})}_updateMessage(t,a){const{parent_id:e,show_in_channel:n,pinned:s}=t;if(e&&this.threads[e]){const o=this.threads[e],l=o.findIndex(u=>u.id===t.id);l!==-1&&(o[l]=a(o[l]),this.threads[e]=o)}if(!n&&!e||n){const o=this.findMessageSetIndex(t);if(o!==-1){const l=this.messageSets[o].messages.findIndex(u=>u.id===t.id);if(l!==-1){const u=a(this.messageSets[o].messages[l]);this.messageSets[o].messages[l]=u}}}if(s){const o=this.pinnedMessages.findIndex(l=>l.id===t.id);o!==-1&&(this.pinnedMessages[o]=a(this.pinnedMessages[o]))}}_addToMessageList(t,a,e=!1,n="created_at",s=!0){return LS(t,a,e,n,s)}removeMessage(t){let a=!1;if(t.parent_id&&this.threads[t.parent_id]){const{removed:e,result:n}=this.removeMessageFromArray(this.threads[t.parent_id],t);this.threads[t.parent_id]=n,a=e}else{const e=t.messageSetIndex??this.findMessageSetIndex(t);if(e!==-1){const{removed:n,result:s}=this.removeMessageFromArray(this.messageSets[e].messages,t);this.messageSets[e].messages=s,a=n}}return a}filterErrorMessages(){const t=this.latestMessages.filter(a=>a.type!=="error");this.latestMessages=t}clean(){const t=new Date;for(const[a,e]of Object.entries(this.typing)){const n=typeof e.received_at=="string"?new Date(e.received_at):e.received_at||new Date;t.getTime()-n.getTime()>7e3&&(delete this.typing[a],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:a}}))}}clearMessages(){this.initMessages(),this.pinnedMessages=[]}initMessages(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0,pagination:Qp}]}async loadMessageIntoState(t,a,e=25){var u;let n,s=!1,o=!1;const l=a||t;if(t==="latest"){if(this.messages===this.latestMessages)return;n=this.messageSets.findIndex(h=>h.isLatest)}else n=this.findMessageSetIndex({id:l});n!==-1&&(this.switchToMessageSet(n),s=!0),o=!a||!!((u=this.threads[a])!=null&&u.find(h=>h.id===t)),!(s&&o)&&(s||await this._channel.query({messages:{id_around:l,limit:e}},"new"),!o&&a&&await this._channel.getReplies(a,{id_around:t,limit:e}),n=this.findMessageSetIndex({id:l}),n!==-1&&this.switchToMessageSet(n))}findMessage(t,a){if(a){const n=this.threads[a];return n?n.find(s=>s.id===t):void 0}const e=this.findMessageSetIndex({id:t});if(e!==-1)return this.messageSets[e].messages.find(n=>n.id===t)}switchToMessageSet(t){const a=this.messageSets.find(e=>e.isCurrent);a&&(a.isCurrent=!1,this.messageSets[t].isCurrent=!0)}areMessageSetsOverlap(t,a){return t.some(e=>a.find(n=>e.id===n.id))}findMessageSetIndex(t){return this.messageSets.findIndex(a=>!!a.messages.find(e=>e.id===t.id))}findTargetMessageSet(t,a=!0,e="current"){let n=t,s;if(a){const o=this.messageSets.map((h,m)=>m).filter(h=>this.areMessageSetsOverlap(this.messageSets[h].messages,t));switch(e){case"new":o.length>0?s=o[0]:t.some(h=>!h.parent_id)&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1,pagination:Qp}),s=this.messageSets.length-1);break;case"current":s=this.messageSets.findIndex(h=>h.isCurrent);break;case"latest":s=this.messageSets.findIndex(h=>h.isLatest);break;default:s=-1}const l=o.splice(0,1)[0],u=[...o];if(l!==void 0&&l!==s&&u.push(s),u.length>0){const h=this.messageSets[l],m=this.messageSets.filter((v,b)=>u.indexOf(b)!==-1);m.forEach(v=>{h.isLatest=h.isLatest||v.isLatest,h.isCurrent=h.isCurrent||v.isCurrent,h.pagination.hasPrev=v.messages[0].created_at<h.messages[0].created_at?v.pagination.hasPrev:h.pagination.hasPrev,h.pagination.hasNext=h.messages.slice(-1)[0].created_at<v.messages.slice(-1)[0].created_at?v.pagination.hasNext:h.pagination.hasNext,n=[...n,...v.messages]}),m.forEach(v=>this.messageSets.splice(this.messageSets.indexOf(v),1)),s=this.messageSets.findIndex(v=>this.areMessageSetsOverlap(v.messages,t))}}else s=this.findMessageSetIndex(t[0]);return{targetMessageSetIndex:s,messagesToAdd:n}}},mO=t=>!!(t!=null&&t.og_scrape_url)||!!(t!=null&&t.title_link),HS=t=>{var a;return!!((a=t==null?void 0:t.localMetadata)!=null&&a.id)},pO=(t,a=[])=>t.type==="file"||!!(t.mime_type&&a.indexOf(t.mime_type)===-1&&t.type!=="video"),YS=t=>t.type==="image"&&!mO(t),gO=t=>YS(t)&&HS(t),yO=t=>t.type==="audio",vO=t=>t.type==="voiceRecording",bO=(t,a=[])=>t.type==="video"||!!(t.mime_type&&a.indexOf(t.mime_type)!==-1),wO=t=>yO(t)||pO(t)||YS(t)||bO(t)||vO(t),Qd=t=>!!t.lastModified&&!("uri"in t),CO=t=>t==null||typeof t!="object"?!1:typeof FileList<"u"&&t instanceof FileList||"item"in t&&"length"in t&&!Array.isArray(t),_O=t=>t instanceof Blob&&!(t instanceof File),jo=t=>t!==null&&typeof t=="object"&&!Qd(t)&&!_O(t)&&typeof t.name=="string"&&typeof t.uri=="string"&&typeof t.size=="number"&&typeof t.type=="string",Y1=({blobsArray:t,fileName:a,mimeType:e})=>{const n=new Blob(t,{type:e});return new File([n],a,{type:n.type})},SO=t=>{const a=t.match(/\/([^/;]+)/);return a==null?void 0:a[1]},F1=t=>{const a=SO(t);return`file_${new Date().toISOString()}${a?"."+a:""}`},_c=t=>{const a=t.type;return a.startsWith("image/")&&!a.endsWith(".photoshop")},EO=t=>t.startsWith("image/")&&!t.endsWith(".photoshop")?"image":t.includes("video/")?"video":t.includes("audio/")?"audio":"file",j1=t=>{if(!t)return null;if(HS(t))return t;const{localMetadata:a,...e}=t;return{localMetadata:{...a??{},id:(a==null?void 0:a.id)||ar()},...e}},FS=t=>typeof t=="function",sa=class{constructor(t){this.value=t,this.handlerSet=new Set,this.next=a=>{const e=FS(a)?a(this.value):a;if(e===this.value)return;const n=this.value;this.value=e,this.handlerSet.forEach(s=>s(this.value,n))},this.partialNext=a=>this.next(e=>({...e,...a})),this.getLatestValue=()=>this.value,this.subscribe=a=>(a(this.value,void 0),this.handlerSet.add(a),()=>{this.handlerSet.delete(a)}),this.subscribeWithSelector=(a,e)=>{let n;const s=o=>{const l=a(o);let u=typeof n>"u";for(const m in n)if(n[m]!==l[m]){u=!0;break}if(!u)return;const h=n;n=l,e(l,h)};return this.subscribe(s)}}},Qi=t=>{if(!t||typeof t!="object"||Array.isArray(t))return!1;const a=Object.getPrototypeOf(t);return a===null||a===Object.prototype?!1:t.constructor&&t.constructor!==Object},Ug=(t,a,e=new Set,n=new WeakSet,s=new WeakSet)=>{if(t===a)return!0;if(t==null||a==null)return!1;const o=typeof t;if(o!==typeof a)return!1;if(o!=="object")return t!==t&&a!==a?!0:t===a;const u=t,h=a;if(n.has(u)||s.has(h))return n.has(u)&&s.has(h);if(n.add(u),s.add(h),t instanceof Date&&a instanceof Date)return n.delete(u),s.delete(h),t.getTime()===a.getTime();if(t instanceof RegExp&&a instanceof RegExp)return n.delete(u),s.delete(h),t.toString()===a.toString();if(Qi(t)||Qi(a))return n.delete(u),s.delete(h),!1;const m=Array.isArray(t),p=Array.isArray(a);if(m!==p)return n.delete(u),s.delete(h),!1;if(m&&p){const E=t,I=a;if(E.length!==I.length)return n.delete(u),s.delete(h),!1;const M=[t,a];if(e.has(M))return n.delete(u),s.delete(h),!0;e.add(M);for(let A=0;A<E.length;A++)if(!Ug(E[A],I[A],e,n,s))return e.delete(M),n.delete(u),s.delete(h),!1;return e.delete(M),n.delete(u),s.delete(h),!0}const v=t,b=a,_=Object.keys(v),C=Object.keys(b);if(_.length!==C.length)return n.delete(u),s.delete(h),!1;for(const E of C)if(!Object.prototype.hasOwnProperty.call(v,E))return n.delete(u),s.delete(h),!1;const S=[t,a];if(e.has(S))return n.delete(u),s.delete(h),!0;e.add(S);for(const E of _)if(!Ug(v[E],b[E],e,n,s))return e.delete(S),n.delete(u),s.delete(h),!1;return e.delete(S),n.delete(u),s.delete(h),!0};function xO(t,a){const e={children:{}};return jS(t,a,e),zy(e)}function jS(t,a,e,n,s=new Set,o=new Set){if(Ug(t,a,new Set(s)))return;if(t==null){n!==void 0&&(e.children[String(n)]={type:"added",value:a,children:{}});return}if(typeof t=="object"&&t!==null){if(o.has(t)){n!==void 0&&(e.children[String(n)]={type:"circular",value:a,oldValue:t,children:{}});return}o.add(t)}if(typeof t!="object"||typeof a!="object"||t===null||a===null||Array.isArray(t)!==Array.isArray(a)||Qi(t)||Qi(a)){n!==void 0&&(e.children[String(n)]={type:"updated",value:a,oldValue:t,children:{}}),typeof t=="object"&&t!==null&&o.delete(t);return}const u=t,h=a,m=n!==void 0?{type:"updated",children:{},oldValue:t,value:a}:e;n!==void 0&&(e.children[String(n)]=m);const p=[t,a];if(s.has(p)){typeof t=="object"&&t!==null&&o.delete(t);return}s.add(p);const v=new Set([...Object.keys(u),...Object.getOwnPropertySymbols(u),...Object.keys(h),...Object.getOwnPropertySymbols(h)]);for(const b of v){const _=u[b],C=h[b];if(b in h){if(!(b in u)){m.children[String(b)]={type:"added",value:C,children:{}};continue}jS(_,C,m,b,s,o)}}s.delete(p),typeof t=="object"&&t!==null&&o.delete(t)}function WS(t={}){const{trackDiff:a=!1}=t;return function({target:n,source:s,customizer:o}){const l=Array.isArray(s)?s:[s],u=a?structuredClone(n):void 0;function h(E,I,M,A,k,O){const U=o==null?void 0:o(E,I,M,A,k,O);return U!==void 0?(Object.defineProperty(A,M,{value:U,enumerable:!0,writable:!0,configurable:!0}),!0):!1}function m(E,I){if(E&&typeof E=="object"){const M=Qi(E),A=Qi(I);return M||A?A?I:E:Array.isArray(E)?[...E]:{...E}}return Array.isArray(I)?[]:{}}function p(E,I,M,A,k){const O=I[M],U=E[M];if(!h(U,O,M,E,I,A))if(O&&typeof O=="object"){if(!A.has(O)){const q=m(U,O);if(Object.defineProperty(E,M,{value:q,enumerable:!0,writable:!0,configurable:!0}),Qi(q))return;k.push({target:q,source:O,sourceKey:M,parentTarget:E})}}else O!==void 0&&(E[M]=O)}function v(E,I,M,A){const k=[...Object.keys(I),...Object.getOwnPropertySymbols(I)];for(const O of k)p(E,I,O,M,A)}function b({target:E,source:I,sourceKey:M,parentTarget:A},k,O){if(k.has(I)){a&&M&&A&&Object.defineProperty(A,M,{value:E,enumerable:!0,writable:!0,configurable:!0});return}!k.has(E)&&!k.has(I)&&(k.add(E),k.add(I),v(E,I,k,O),k.delete(I),k.delete(E))}function _(E,I,M=new Set){if(M.has(E)||M.has(I))return{...E};const A={...E},k=[];for(M.add(A),M.add(I),v(A,I,M,k);k.length;)b(k.pop(),M,k);return M.delete(I),M.delete(A),A}const C=l.reduce((E,I)=>_(E,I),{...n}),S=a&&u?xO(u,C):null;return{result:C,diff:S}}}function zy(t){const a={};let e=!1;for(const n in t.children){const s=zy(t.children[n]);s&&(a[n]=s,e=!0)}return t.type||e?{...t,children:a}:null}function Cf(t,a,e){return WS()({target:t,source:a,customizer:e}).result}function GS(t,a,e){const n=WS({trackDiff:!0}),{result:s,diff:o}=n({target:t,source:a,customizer:e});return{result:s,diff:zy(o??{children:{}})||{children:{}}}}var W1=({message:t})=>{var a;return{attachments:(a=(t==null?void 0:t.attachments)??[])==null?void 0:a.filter(({og_scrape_url:e})=>!e).map(e=>{const n=wO(e)?{id:ar(),uploadState:"finished"}:{id:ar()};return{...e,localMetadata:n}})}},IO=class{constructor({composer:t,message:a}){this.setCustomUploadFn=e=>{this.composer.updateConfig({attachments:{doUploadRequest:e}})},this.initState=({message:e}={})=>{this.state.next(W1({message:e}))},this.getAttachmentIndex=e=>{const n=this.attachmentsById;return this.attachments.indexOf(n[e])},this.prepareAttachmentUpdate=e=>{const n=this.attachments,s=[...this.attachments],o=this.getAttachmentIndex(e.localMetadata.id);if(o===-1)return null;const l=GS(n[o],e);if(l.diff&&Object.keys(l.diff.children).length){const h=j1(l.result);if(h)return s.splice(o,1,h),s}return null},this.updateAttachment=e=>{const n=this.prepareAttachmentUpdate(e);n&&this.state.partialNext({attachments:n})},this.upsertAttachments=e=>{if(!e.length)return;let n=[...this.attachments],s=!1;e.forEach(o=>{const l=this.prepareAttachmentUpdate(o);if(l)n=l,s=!0;else{const u=j1(o);u&&(n.push(u),s=!0)}}),s&&this.state.partialNext({attachments:n})},this.removeAttachments=e=>{this.state.partialNext({attachments:this.attachments.filter(n=>{var s;return!e.includes((s=n.localMetadata)==null?void 0:s.id)})})},this.getUploadConfigCheck=async e=>{var _,C;const n=this.channel.getClient();let s;n.appSettingsPromise?s=await n.appSettingsPromise:s=await n.getAppSettings();const o=_c(e)?(_=s==null?void 0:s.app)==null?void 0:_.image_upload_config:(C=s==null?void 0:s.app)==null?void 0:C.file_upload_config;if(!o)return{uploadBlocked:!1};const{allowed_file_extensions:l,allowed_mime_types:u,blocked_file_extensions:h,blocked_mime_types:m,size_limit:p}=o,v=p||zL,b=e.type;if(Qd(e)||jo(e)){if(l!=null&&l.length&&!l.some(S=>e.name.toLowerCase().endsWith(S.toLowerCase())))return{uploadBlocked:!0,reason:"allowed_file_extensions"};if(h!=null&&h.length&&h.some(S=>e.name.toLowerCase().endsWith(S.toLowerCase())))return{uploadBlocked:!0,reason:"blocked_file_extensions"}}return u!=null&&u.length&&!u.some(S=>S.toLowerCase()===(b==null?void 0:b.toLowerCase()))?{uploadBlocked:!0,reason:"allowed_mime_types"}:m!=null&&m.length&&m.some(S=>S.toLowerCase()===(b==null?void 0:b.toLowerCase()))?{uploadBlocked:!0,reason:"blocked_mime_types"}:e.size&&e.size>v?{uploadBlocked:!0,reason:"size_limit"}:{uploadBlocked:!1}},this.fileToLocalUploadAttachment=async e=>{var l;const n=jo(e)||Qd(e)?e:Y1({blobsArray:[e],fileName:F1(e.type),mimeType:e.type}),s=await this.getUploadConfigCheck(n),o={file_size:n.size,mime_type:n.type,localMetadata:{file:n,id:ar(),uploadPermissionCheck:s,uploadState:s.uploadBlocked?"blocked":"pending"},type:EO(n.type)};return o[_c(n)?"fallback":"title"]=n.name,_c(n)&&(o.localMetadata.previewUri=jo(e)?e.uri:(l=URL.createObjectURL)==null?void 0:l.call(URL,e),jo(e)&&e.height&&e.width&&(o.original_height=e.height,o.original_width=e.width)),jo(e)&&e.thumb_url&&(o.thumb_url=e.thumb_url),o},this.ensureLocalUploadAttachment=async e=>{var s;if(!((s=e.localMetadata)!=null&&s.file)||!e.localMetadata.id){this.client.notifications.addError({message:"File is required for upload attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}});return}if(!this.fileUploadFilter(e))return;const n=await this.fileToLocalUploadAttachment(e.localMetadata.file);return e.localMetadata.id&&(n.localMetadata.id=e.localMetadata.id),n},this.doDefaultUploadRequest=async e=>{if(jo(e))return this.channel[_c(e)?"sendImage":"sendFile"](e.uri,e.name,e.type);const n=Qd(e)?e:Y1({blobsArray:[e],fileName:F1(e.type),mimeType:e.type}),{duration:s,...o}=await this.channel[_c(e)?"sendImage":"sendFile"](n);return o},this.doUploadRequest=async e=>{const n=this.config.doUploadRequest;return n?await n(e):this.doDefaultUploadRequest(e)},this.uploadAttachment=async e=>{if(!this.isUploadEnabled)return;const n=await this.ensureLocalUploadAttachment(e);if(typeof n>"u")return;if(n.localMetadata.uploadState==="blocked")return this.upsertAttachments([n]),this.client.notifications.addError({message:"Error uploading attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}}),n;this.upsertAttachments([{...e,localMetadata:{...e.localMetadata,uploadState:"uploading"}}]);let s;try{s=await this.doUploadRequest(n.localMetadata.file)}catch(l){let u={message:"Error uploading attachment",name:"Error"};typeof l.message=="string"?u=l:typeof l=="object"&&(u=Object.assign(u,l)),this.client.notifications.addError({message:u.message,origin:{emitter:"AttachmentManager",context:{attachment:e}}});const h={...e,localMetadata:{...e.localMetadata,uploadState:"failed"}};return this.updateAttachment(h),h}if(!s){this.removeAttachments([e.localMetadata.id]);return}const o={...e,localMetadata:{...e.localMetadata,uploadState:"finished"}};return gO(o)?(o.localMetadata.previewUri&&(URL.revokeObjectURL(o.localMetadata.previewUri),delete o.localMetadata.previewUri),o.image_url=s.file):o.asset_url=s.file,s.thumb_url&&(o.thumb_url=s.thumb_url),this.updateAttachment(o),o},this.uploadFiles=async e=>{if(!this.isUploadEnabled)return;const n=CO(e)?Array.from(e):e,s=await Promise.all(n.map(this.fileToLocalUploadAttachment));return Promise.all(s.filter(this.fileUploadFilter).slice(0,this.availableUploadSlots).map(this.uploadAttachment))},this.composer=t,this.state=new sa(W1({message:a})),this.attachmentsByIdGetterCache={attachmentsById:{},attachments:[]}}get attachmentsById(){const{attachments:t}=this.state.getLatestValue();return t!==this.attachmentsByIdGetterCache.attachments&&(this.attachmentsByIdGetterCache.attachments=t,this.attachmentsByIdGetterCache.attachmentsById=t.reduce((a,e)=>{var n;return e.localMetadata.id&&(a[n=e.localMetadata.id]??(a[n]=e)),a},{})),this.attachmentsByIdGetterCache.attachmentsById}get client(){return this.composer.client}get channel(){return this.composer.channel}get config(){return this.composer.config.attachments}get acceptedFiles(){return this.config.acceptedFiles}set acceptedFiles(t){this.composer.updateConfig({attachments:{acceptedFiles:t}})}get fileUploadFilter(){return this.config.fileUploadFilter}set fileUploadFilter(t){this.composer.updateConfig({attachments:{fileUploadFilter:t}})}get maxNumberOfFilesPerMessage(){return this.config.maxNumberOfFilesPerMessage}set maxNumberOfFilesPerMessage(t){t!==this.maxNumberOfFilesPerMessage&&this.composer.updateConfig({attachments:{maxNumberOfFilesPerMessage:t}})}get attachments(){return this.state.getLatestValue().attachments}get hasUploadPermission(){var t,a;return!!((a=(t=this.channel.data)==null?void 0:t.own_capabilities)!=null&&a.includes("upload-file"))}get isUploadEnabled(){return this.hasUploadPermission&&this.availableUploadSlots>0}get successfulUploads(){return this.getUploadsByState("finished")}get successfulUploadsCount(){return this.successfulUploads.length}get uploadsInProgressCount(){return this.getUploadsByState("uploading").length}get failedUploadsCount(){return this.getUploadsByState("failed").length}get blockedUploadsCount(){return this.getUploadsByState("blocked").length}get pendingUploadsCount(){return this.getUploadsByState("pending").length}get availableUploadSlots(){return this.config.maxNumberOfFilesPerMessage-this.successfulUploadsCount-this.uploadsInProgressCount}getUploadsByState(t){return Object.values(this.attachments).filter(({localMetadata:a})=>a.uploadState===t)}},DO="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",MO="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",dl=(t,a)=>{for(const e in a)t[e]=a[e];return t},zg="numeric",Hg="ascii",Yg="alpha",kc="asciinumeric",Nc="alphanumeric",Fg="domain",ZS="emoji",AO="scheme",TO="slashscheme",Xp="whitespace";function NO(t,a){return t in a||(a[t]=[]),a[t]}function Wi(t,a,e){a[zg]&&(a[kc]=!0,a[Nc]=!0),a[Hg]&&(a[kc]=!0,a[Yg]=!0),a[kc]&&(a[Nc]=!0),a[Yg]&&(a[Nc]=!0),a[Nc]&&(a[Fg]=!0),a[ZS]&&(a[Fg]=!0);for(const n in a){const s=NO(n,e);s.indexOf(t)<0&&s.push(t)}}function RO(t,a){const e={};for(const n in a)a[n].indexOf(t)>=0&&(e[n]=!0);return e}function Na(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Na.groups={};Na.prototype={accepts(){return!!this.t},go(t){const a=this,e=a.j[t];if(e)return e;for(let n=0;n<a.jr.length;n++){const s=a.jr[n][0],o=a.jr[n][1];if(o&&s.test(t))return o}return a.jd},has(t,a=!1){return a?t in this.j:!!this.go(t)},ta(t,a,e,n){for(let s=0;s<t.length;s++)this.tt(t[s],a,e,n)},tr(t,a,e,n){n=n||Na.groups;let s;return a&&a.j?s=a:(s=new Na(a),e&&n&&Wi(a,e,n)),this.jr.push([t,s]),s},ts(t,a,e,n){let s=this;const o=t.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(t[l]);return s.tt(t[o-1],a,e,n)},tt(t,a,e,n){n=n||Na.groups;const s=this;if(a&&a.j)return s.j[t]=a,a;const o=a;let l,u=s.go(t);if(u?(l=new Na,dl(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new Na,o){if(n)if(l.t&&typeof l.t=="string"){const h=dl(RO(l.t,n),e);Wi(o,h,n)}else e&&Wi(o,e,n);l.t=o}return s.j[t]=l,l}};var nt=(t,a,e,n,s)=>t.ta(a,e,n,s),an=(t,a,e,n,s)=>t.tr(a,e,n,s),G1=(t,a,e,n,s)=>t.ts(a,e,n,s),Ce=(t,a,e,n,s)=>t.tt(a,e,n,s),ps="WORD",jg="UWORD",$S="ASCIINUMERICAL",qS="ALPHANUMERICAL",Qc="LOCALHOST",Wg="TLD",Gg="UTLD",Vd="SCHEME",$o="SLASH_SCHEME",Hy="NUM",Zg="WS",Yy="NL",Lc="OPENBRACE",Oc="CLOSEBRACE",_f="OPENBRACKET",Sf="CLOSEBRACKET",Ef="OPENPAREN",xf="CLOSEPAREN",If="OPENANGLEBRACKET",Df="CLOSEANGLEBRACKET",Mf="FULLWIDTHLEFTPAREN",Af="FULLWIDTHRIGHTPAREN",Tf="LEFTCORNERBRACKET",Nf="RIGHTCORNERBRACKET",Rf="LEFTWHITECORNERBRACKET",kf="RIGHTWHITECORNERBRACKET",Lf="FULLWIDTHLESSTHAN",Of="FULLWIDTHGREATERTHAN",Pf="AMPERSAND",Fy="APOSTROPHE",Bf="ASTERISK",oi="AT",Uf="BACKSLASH",zf="BACKTICK",Hf="CARET",li="COLON",jy="COMMA",Yf="DOLLAR",Nr="DOT",Ff="EQUALS",Wy="EXCLAMATION",Xa="HYPHEN",Pc="PERCENT",jf="PIPE",Wf="PLUS",Gf="POUND",Bc="QUERY",Gy="QUOTE",QS="FULLWIDTHMIDDLEDOT",Zy="SEMI",Rr="SLASH",Uc="TILDE",Zf="UNDERSCORE",VS="EMOJI",$f="SYM",XS=Object.freeze({__proto__:null,WORD:ps,UWORD:jg,ASCIINUMERICAL:$S,ALPHANUMERICAL:qS,LOCALHOST:Qc,TLD:Wg,UTLD:Gg,SCHEME:Vd,SLASH_SCHEME:$o,NUM:Hy,WS:Zg,NL:Yy,OPENBRACE:Lc,CLOSEBRACE:Oc,OPENBRACKET:_f,CLOSEBRACKET:Sf,OPENPAREN:Ef,CLOSEPAREN:xf,OPENANGLEBRACKET:If,CLOSEANGLEBRACKET:Df,FULLWIDTHLEFTPAREN:Mf,FULLWIDTHRIGHTPAREN:Af,LEFTCORNERBRACKET:Tf,RIGHTCORNERBRACKET:Nf,LEFTWHITECORNERBRACKET:Rf,RIGHTWHITECORNERBRACKET:kf,FULLWIDTHLESSTHAN:Lf,FULLWIDTHGREATERTHAN:Of,AMPERSAND:Pf,APOSTROPHE:Fy,ASTERISK:Bf,AT:oi,BACKSLASH:Uf,BACKTICK:zf,CARET:Hf,COLON:li,COMMA:jy,DOLLAR:Yf,DOT:Nr,EQUALS:Ff,EXCLAMATION:Wy,HYPHEN:Xa,PERCENT:Pc,PIPE:jf,PLUS:Wf,POUND:Gf,QUERY:Bc,QUOTE:Gy,FULLWIDTHMIDDLEDOT:QS,SEMI:Zy,SLASH:Rr,TILDE:Uc,UNDERSCORE:Zf,EMOJI:VS,SYM:$f}),fs=/[a-z]/,Sc=new RegExp("\\p{L}","u"),Kp=new RegExp("\\p{Emoji}","u"),hs=/\d/,Jp=/\s/,Z1="\r",eg=`
`,kO="",LO="",tg="",Ad=null,Td=null;function OO(t=[]){const a={};Na.groups=a;const e=new Na;Ad==null&&(Ad=$1(DO)),Td==null&&(Td=$1(MO)),Ce(e,"'",Fy),Ce(e,"{",Lc),Ce(e,"}",Oc),Ce(e,"[",_f),Ce(e,"]",Sf),Ce(e,"(",Ef),Ce(e,")",xf),Ce(e,"<",If),Ce(e,">",Df),Ce(e,"",Mf),Ce(e,"",Af),Ce(e,"",Tf),Ce(e,"",Nf),Ce(e,"",Rf),Ce(e,"",kf),Ce(e,"",Lf),Ce(e,"",Of),Ce(e,"&",Pf),Ce(e,"*",Bf),Ce(e,"@",oi),Ce(e,"`",zf),Ce(e,"^",Hf),Ce(e,":",li),Ce(e,",",jy),Ce(e,"$",Yf),Ce(e,".",Nr),Ce(e,"=",Ff),Ce(e,"!",Wy),Ce(e,"-",Xa),Ce(e,"%",Pc),Ce(e,"|",jf),Ce(e,"+",Wf),Ce(e,"#",Gf),Ce(e,"?",Bc),Ce(e,'"',Gy),Ce(e,"/",Rr),Ce(e,";",Zy),Ce(e,"~",Uc),Ce(e,"_",Zf),Ce(e,"\\",Uf),Ce(e,"",QS);const n=an(e,hs,Hy,{[zg]:!0});an(n,hs,n);const s=an(n,fs,$S,{[kc]:!0}),o=an(n,Sc,qS,{[Nc]:!0}),l=an(e,fs,ps,{[Hg]:!0});an(l,hs,s),an(l,fs,l),an(s,hs,s),an(s,fs,s);const u=an(e,Sc,jg,{[Yg]:!0});an(u,fs),an(u,hs,o),an(u,Sc,u),an(o,hs,o),an(o,fs),an(o,Sc,o);const h=Ce(e,eg,Yy,{[Xp]:!0}),m=Ce(e,Z1,Zg,{[Xp]:!0}),p=an(e,Jp,Zg,{[Xp]:!0});Ce(e,tg,p),Ce(m,eg,h),Ce(m,tg,p),an(m,Jp,p),Ce(p,Z1),Ce(p,eg),an(p,Jp,p),Ce(p,tg,p);const v=an(e,Kp,VS,{[ZS]:!0});Ce(v,"#"),an(v,Kp,v),Ce(v,kO,v);const b=Ce(v,LO);Ce(b,"#"),an(b,Kp,v);const _=[[fs,l],[hs,s]],C=[[fs,null],[Sc,u],[hs,o]];for(let S=0;S<Ad.length;S++)ti(e,Ad[S],Wg,ps,_);for(let S=0;S<Td.length;S++)ti(e,Td[S],Gg,jg,C);Wi(Wg,{tld:!0,ascii:!0},a),Wi(Gg,{utld:!0,alpha:!0},a),ti(e,"file",Vd,ps,_),ti(e,"mailto",Vd,ps,_),ti(e,"http",$o,ps,_),ti(e,"https",$o,ps,_),ti(e,"ftp",$o,ps,_),ti(e,"ftps",$o,ps,_),Wi(Vd,{scheme:!0,ascii:!0},a),Wi($o,{slashscheme:!0,ascii:!0},a),t=t.sort((S,E)=>S[0]>E[0]?1:-1);for(let S=0;S<t.length;S++){const E=t[S][0],M=t[S][1]?{[AO]:!0}:{[TO]:!0};E.indexOf("-")>=0?M[Fg]=!0:fs.test(E)?hs.test(E)?M[kc]=!0:M[Hg]=!0:M[zg]=!0,G1(e,E,E,M)}return G1(e,"localhost",Qc,{ascii:!0}),e.jd=new Na($f),{start:e,tokens:dl({groups:a},XS)}}function KS(t,a){const e=PO(a.replace(/[A-Z]/g,u=>u.toLowerCase())),n=e.length,s=[];let o=0,l=0;for(;l<n;){let u=t,h=null,m=0,p=null,v=-1,b=-1;for(;l<n&&(h=u.go(e[l]));)u=h,u.accepts()?(v=0,b=0,p=u):v>=0&&(v+=e[l].length,b++),m+=e[l].length,o+=e[l].length,l++;o-=v,l-=b,m-=v,s.push({t:p.t,v:a.slice(o-m,o),s:o-m,e:o})}return s}function PO(t){const a=[],e=t.length;let n=0;for(;n<e;){let s=t.charCodeAt(n),o,l=s<55296||s>56319||n+1===e||(o=t.charCodeAt(n+1))<56320||o>57343?t[n]:t.slice(n,n+2);a.push(l),n+=l.length}return a}function ti(t,a,e,n,s){let o;const l=a.length;for(let u=0;u<l-1;u++){const h=a[u];t.j[h]?o=t.j[h]:(o=new Na(n),o.jr=s.slice(),t.j[h]=o),t=o}return o=new Na(e),o.jr=s.slice(),t.j[a[l-1]]=o,o}function $1(t){const a=[],e=[];let n=0,s="0123456789";for(;n<t.length;){let o=0;for(;s.indexOf(t[n+o])>=0;)o++;if(o>0){a.push(e.join(""));for(let l=parseInt(t.substring(n,n+o),10);l>0;l--)e.pop();n+=o}else e.push(t[n]),n++}return a}var Vc={defaultProtocol:"http",events:null,format:q1,formatHref:q1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $y(t,a=null){let e=dl({},Vc);t&&(e=dl(e,t instanceof $y?t.o:t));const n=e.ignoreTags,s=[];for(let o=0;o<n.length;o++)s.push(n[o].toUpperCase());this.o=e,a&&(this.defaultRender=a),this.ignoreTags=s}$y.prototype={o:Vc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,a,e){const n=a!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=e.t in s?s[e.t]:Vc[t],typeof s=="function"&&n&&(s=s(a,e))):typeof s=="function"&&n&&(s=s(a,e.t,e)),s)},getObj(t,a,e){let n=this.o[t];return typeof n=="function"&&a!=null&&(n=n(a,e.t,e)),n},render(t){const a=t.render(this);return(this.get("render",null,t)||this.defaultRender)(a,t.t,t)}};function q1(t){return t}function JS(t,a){this.t="token",this.v=t,this.tk=a}JS.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const a=this.toString(),e=t.get("truncate",a,this),n=t.get("format",a,this);return e&&n.length>e?n.substring(0,e)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Vc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const a=this,e=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",e,this),s=t.get("tagName",e,a),o=this.toFormattedString(t),l={},u=t.get("className",e,a),h=t.get("target",e,a),m=t.get("rel",e,a),p=t.getObj("attributes",e,a),v=t.getObj("events",e,a);return l.href=n,u&&(l.class=u),h&&(l.target=h),m&&(l.rel=m),p&&dl(l,p),{tagName:s,attributes:l,content:o,eventListeners:v}}};function bh(t,a){class e extends JS{constructor(s,o){super(s,o),this.t=t}}for(const n in a)e.prototype[n]=a[n];return e.t=t,e}var Q1=bh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),V1=bh("text"),BO=bh("nl"),Nd=bh("url",{isLink:!0,toHref(t=Vc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Qc&&t[1].t===li}}),$a=t=>new Na(t);function UO({groups:t}){const a=t.domain.concat([Pf,Bf,oi,Uf,zf,Hf,Yf,Ff,Xa,Hy,Pc,jf,Wf,Gf,Rr,$f,Uc,Zf]),e=[li,jy,Nr,Wy,Pc,Bc,Gy,Zy,If,Df,Lc,Oc,Sf,_f,Ef,xf,Mf,Af,Tf,Nf,Rf,kf,Lf,Of],n=[Pf,Fy,Bf,Uf,zf,Hf,Yf,Ff,Xa,Lc,Oc,Pc,jf,Wf,Gf,Bc,Rr,$f,Uc,Zf],s=$a(),o=Ce(s,Uc);nt(o,n,o),nt(o,t.domain,o);const l=$a(),u=$a(),h=$a();nt(s,t.domain,l),nt(s,t.scheme,u),nt(s,t.slashscheme,h),nt(l,n,o),nt(l,t.domain,l);const m=Ce(l,oi);Ce(o,oi,m),Ce(u,oi,m),Ce(h,oi,m);const p=Ce(o,Nr);nt(p,n,o),nt(p,t.domain,o);const v=$a();nt(m,t.domain,v),nt(v,t.domain,v);const b=Ce(v,Nr);nt(b,t.domain,v);const _=$a(Q1);nt(b,t.tld,_),nt(b,t.utld,_),Ce(m,Qc,_);const C=Ce(v,Xa);Ce(C,Xa,C),nt(C,t.domain,v),nt(_,t.domain,v),Ce(_,Nr,b),Ce(_,Xa,C);const S=Ce(_,li);nt(S,t.numeric,Q1);const E=Ce(l,Xa),I=Ce(l,Nr);Ce(E,Xa,E),nt(E,t.domain,l),nt(I,n,o),nt(I,t.domain,l);const M=$a(Nd);nt(I,t.tld,M),nt(I,t.utld,M),nt(M,t.domain,l),nt(M,n,o),Ce(M,Nr,I),Ce(M,Xa,E),Ce(M,oi,m);const A=Ce(M,li),k=$a(Nd);nt(A,t.numeric,k);const O=$a(Nd),U=$a();nt(O,a,O),nt(O,e,U),nt(U,a,O),nt(U,e,U),Ce(M,Rr,O),Ce(k,Rr,O);const q=Ce(u,li),Y=Ce(h,li),$=Ce(Y,Rr),K=Ce($,Rr);nt(u,t.domain,l),Ce(u,Nr,I),Ce(u,Xa,E),nt(h,t.domain,l),Ce(h,Nr,I),Ce(h,Xa,E),nt(q,t.domain,O),Ce(q,Rr,O),Ce(q,Bc,O),nt(K,t.domain,O),nt(K,a,O),Ce(K,Rr,O);const pe=[[Lc,Oc],[_f,Sf],[Ef,xf],[If,Df],[Mf,Af],[Tf,Nf],[Rf,kf],[Lf,Of]];for(let ie=0;ie<pe.length;ie++){const[ne,se]=pe[ie],z=Ce(O,ne);Ce(U,ne,z),Ce(z,se,O);const D=$a(Nd);nt(z,a,D);const H=$a();nt(z,e),nt(D,a,D),nt(D,e,H),nt(H,a,D),nt(H,e,H),Ce(D,se,O),Ce(H,se,O)}return Ce(s,Qc,M),Ce(s,Yy,BO),{start:s,tokens:XS}}function zO(t,a,e){let n=e.length,s=0,o=[],l=[];for(;s<n;){let u=t,h=null,m=null,p=0,v=null,b=-1;for(;s<n&&!(h=u.go(e[s].t));)l.push(e[s++]);for(;s<n&&(m=h||u.go(e[s].t));)h=null,u=m,u.accepts()?(b=0,v=u):b>=0&&b++,s++,p++;if(b<0)s-=p,s<n&&(l.push(e[s]),s++);else{l.length>0&&(o.push(ng(V1,a,l)),l=[]),s-=b,p-=b;const _=v.t,C=e.slice(s-p,s);o.push(ng(_,a,C))}}return l.length>0&&o.push(ng(V1,a,l)),o}function ng(t,a,e){const n=e[0].s,s=e[e.length-1].e,o=a.slice(n,s);return new t(o,e)}var Gn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function HO(){Gn.scanner=OO(Gn.customSchemes);for(let t=0;t<Gn.tokenQueue.length;t++)Gn.tokenQueue[t][1]({scanner:Gn.scanner});Gn.parser=UO(Gn.scanner.tokens);for(let t=0;t<Gn.pluginQueue.length;t++)Gn.pluginQueue[t][1]({scanner:Gn.scanner,parser:Gn.parser});return Gn.initialized=!0,Gn}function eE(t){return Gn.initialized||HO(),zO(Gn.parser.start,t,KS(Gn.scanner.start,t))}eE.scan=KS;function YO(t,a=null,e=null){if(a&&typeof a=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${a}; must be a string`);e=a,a=null}const n=new $y(e),s=eE(t),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!a||u.t===a)&&n.check(u)&&o.push(u.toFormattedObject(n))}return o}var FO={debounceURLEnrichmentMs:1500,enabled:!1,findURLFn:t=>YO(t,"url",{defaultProtocol:"https"}).reduce((a,e)=>{try{const n=new URL(e.href);e.isLink&&/^[a-zA-Z0-9-.]+\.[a-zA-Z]{2,}$/.test(n.hostname)&&a.push(e.href)}catch{}return a},[])},jO={acceptedFiles:[],fileUploadFilter:()=>!0,maxNumberOfFilesPerMessage:HL},WO={enabled:!0,publishTypingEvents:!0},GO={attachments:jO,drafts:{enabled:!1},linkPreviews:FO,text:WO},X1=t=>t?{message:{},custom:{}}:{message:{},custom:{}},ZO=class{constructor({composer:t,message:a}){this.isMessageDataEqual=(e,n)=>JSON.stringify(e.message)===JSON.stringify(n==null?void 0:n.message),this.initState=({message:e}={})=>{this.state.next(X1({composer:this.composer}))},this.composer=t,this.state=new sa(X1({}))}get customMessageData(){return this.state.getLatestValue().message}get customComposerData(){return this.state.getLatestValue().custom}setMessageData(t){this.state.partialNext({message:{...this.state.getLatestValue().message,...t}})}setCustomData(t){this.state.partialNext({custom:{...this.state.getLatestValue().custom,...t}})}},$O=t=>new Map(t.map(a=>[a.og_scrape_url,a])),K1=({message:t})=>{var a;return t?{previews:((a=t.attachments)==null?void 0:a.reduce((e,n)=>(n.og_scrape_url&&e.set(n.og_scrape_url,{...n,status:"loaded"}),e),new Map))??new Map}:{previews:new Map}},so=class zi{constructor({composer:a,message:e}){this.shouldDiscardEnrichQueries=!1,this.initState=({message:n}={})=>{this.state.next(K1({message:this.enabled?n:void 0}))},this._findAndEnrichUrls=async n=>{if(!this.enabled)return;const s=this.config.findURLFn(n);if(this.shouldDiscardEnrichQueries=!s.length,this.shouldDiscardEnrichQueries){this.state.next({previews:new Map});return}const o=new Map(Array.from(this.previews).filter(([u])=>s.includes(u)||s.includes(u+"/"))),l=s.filter(u=>{const h=this.previews;return!(h.get(u)||h.get(u+"/"))}).map(u=>({og_scrape_url:u.trim(),status:"loading"}));l.length&&(this.state.partialNext({previews:new Map([...o,...$O(l)])}),await Promise.all(l.map(async u=>{try{const{duration:h,...m}=await this.client.enrichURL(u.og_scrape_url);if(this.shouldDiscardEnrichQueries)return;this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"loaded",...m})}catch{this.previews.has(u.og_scrape_url)&&this.updatePreview(u.og_scrape_url,{status:"failed"})}return u})))},this.cancelURLEnrichment=()=>{this.findAndEnrichUrls.cancel(),this.findAndEnrichUrls.flush()},this.clearPreviews=()=>{const n=this.previews,s=new Map;n.forEach((o,l)=>{zi.previewIsDismissed(o)&&s.set(l,o)}),this.state.partialNext({previews:s})},this.updatePreview=(n,s)=>{var h;if(!n)return;const o=this.previews.get(n),l=s.status??((h=this.previews.get(n))==null?void 0:h.status)??"pending";let u=s;if(o){const m=GS(o,s);if(!m.diff||Object.keys(m.diff).length===0)return;u=m.result}this.state.partialNext({previews:new Map(this.previews).set(n,{...u,og_scrape_url:n,status:l})})},this.dismissPreview=n=>{var o;const s=this.previews.get(n);s&&((o=this.onLinkPreviewDismissed)==null||o.call(this,s),this.updatePreview(n,{status:"dismissed"}))},this.composer=a,this.state=new sa(K1({message:this.enabled?e:void 0})),this.findAndEnrichUrls=Pg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs)}get client(){return this.composer.client}get channel(){return this.composer.channel}get previews(){return this.state.getLatestValue().previews}get loadingPreviews(){return Array.from(this.previews.values()).filter(a=>zi.previewIsLoading(a))}get loadedPreviews(){return Array.from(this.previews.values()).filter(a=>zi.previewIsLoaded(a))}get dismissedPreviews(){return Array.from(this.previews.values()).filter(a=>zi.previewIsDismissed(a))}get failedPreviews(){return Array.from(this.previews.values()).filter(a=>zi.previewIsFailed(a))}get pendingPreviews(){return Array.from(this.previews.values()).filter(a=>zi.previewIsPending(a))}get config(){return this.composer.config.linkPreviews}get debounceURLEnrichmentMs(){return this.config.debounceURLEnrichmentMs}set debounceURLEnrichmentMs(a){this.cancelURLEnrichment(),this.findAndEnrichUrls=Pg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs),this.composer.updateConfig({linkPreviews:{debounceURLEnrichmentMs:a}})}get enabled(){var a;return!!((a=this.channel.getConfig())!=null&&a.url_enrichment)&&this.composer.config.linkPreviews.enabled}set enabled(a){a!==this.enabled&&this.composer.updateConfig({linkPreviews:{enabled:a}})}get findURLFn(){return this.config.findURLFn}set findURLFn(a){this.composer.updateConfig({linkPreviews:{findURLFn:a}})}get onLinkPreviewDismissed(){return this.config.onLinkPreviewDismissed}set onLinkPreviewDismissed(a){this.composer.updateConfig({linkPreviews:{onLinkPreviewDismissed:a}})}};so.previewIsLoading=t=>t.status==="loading";so.previewIsLoaded=t=>t.status==="loaded";so.previewIsDismissed=t=>t.status==="dismissed";so.previewIsFailed=t=>t.status==="failed";so.previewIsPending=t=>t.status==="pending";so.getPreviewData=t=>{const{status:a,...e}=t;return e};var qy=so,qO=QO(VO),$g=new Map;function QO(t){return function(e,n){const{cb:s,onContinued:o}=t(e,n),l=$g.get(e);l==null||l.onContinued();const u=l?l.promise.then(s,s):s();return $g.set(e,{promise:u,onContinued:o}),u}}function VO(t,a){const e=new AbortController;return{cb:()=>e.signal.aborted?Promise.resolve("canceled"):a(e.signal).finally(()=>{e.signal.aborted||$g.delete(t)}),onContinued:()=>e.abort()}}var cu=class{constructor(){this.middleware=[],this.id=ar()}use(t){return this.middleware=this.middleware.concat(t),this}replace(t){const a=[...this.middleware];return t.forEach(e=>{const n=this.middleware.findIndex(s=>s.id===e.id);n>=0?a.splice(n,1,e):a.push(e)}),this.middleware=a,this}insert({middleware:t,position:a,unique:e}){e&&t.forEach(l=>{const u=this.middleware.findIndex(h=>h.id===l.id);u>=0&&this.middleware.splice(u,1)});const n=a.after||a.before,s=this.middleware.findIndex(l=>l.id===n),o=a.after?s+1:s;return this.middleware.splice(o,0,...t),this}setOrder(t){this.middleware=t.map(a=>this.middleware.find(e=>e.id===a)).filter(Boolean)}async executeMiddlewareChain({eventName:t,initialValue:a}){let e=-1;const n=async(o,l,u)=>{if(o<=e)throw new Error("next() called multiple times");if(e=o,o===this.middleware.length||u&&["complete","discard"].includes(u))return{state:l,status:u};const p=this.middleware[o].handlers[t];return p?await p({state:l,next:S=>n(o+1,S),complete:S=>n(o+1,S,"complete"),discard:()=>n(o+1,l,"discard"),forward:()=>n(o+1,l)}):n(o+1,l,u)},s=await qO(`middleware-execution-${this.id}-${t}`,async o=>{const l=await n(0,a);return o.aborted?"canceled":l});return s==="canceled"?{state:a,status:"discard"}:s}async execute({eventName:t,initialValue:a}){return await this.executeMiddlewareChain({eventName:t,initialValue:a})}},Qy=/^([2-9]|10)$/,XO=100,J1=t=>!t.trim(),zc={enforce_unique_vote:()=>({max_votes_allowed:void 0}),max_votes_allowed:({data:t,value:a})=>t.enforce_unique_vote&&a?{max_votes_allowed:"Enforce unique vote is enabled"}:!a.match(/^[0-9]+$/)&&a?{max_votes_allowed:"Only numbers are allowed"}:(a==null?void 0:a.length)>1&&!a.match(Qy)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},options:({value:t})=>{const a={},e=new Set;return t.forEach(n=>{const s=n.text.trim();e.has(s)?a[n.id]="Option already exists":e.add(s)}),Object.keys(a).length>0?{options:a}:{options:void 0}}},KO={name:({currentError:t,value:a})=>a&&t?{name:void 0}:{name:typeof t=="string"?t:void 0}},JO={max_votes_allowed:({value:t})=>t&&!t.match(Qy)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},name:({value:t})=>J1(t)?{name:"Question is required"}:{name:void 0},options:t=>{var n;const a=(n=zc.options)==null?void 0:n.call(zc,t),e=(a==null?void 0:a.options)??{};return t.value.forEach((s,o)=>{const l=o===t.value.length-1;J1(s.text)&&!l&&(e[s.id]="Option is empty")}),Object.keys(e).length>0?{options:e}:{options:void 0}}},eP=t=>!Array.isArray(t)&&typeof(t==null?void 0:t.index)=="number"&&typeof(t==null?void 0:t.text)=="string",tP={enforce_unique_vote:({value:t})=>({enforce_unique_vote:t,max_votes_allowed:""}),options:({value:t,data:a})=>{if(Array.isArray(t))return{options:t.map(p=>({id:p.id,text:p.text.trim()}))};const{index:e,text:n}=t,s=a.options||[],o=s&&s.slice(e+1).length>0&&!n,l=s.slice(0,e),u=s.slice(e+1),h=[...l,...o?[]:[{...s[e],text:n}],...u];return s.length<XO&&!h.some(p=>!p.text.trim())&&h.push({id:ar(),text:""}),{options:h}}},nP=({processors:t,validators:a}={})=>{const e=({state:n,validators:s,processors:o})=>{const{previousState:l,targetFields:u}=n;let h;if(!o&&eP(u.options)){const p=[...l.data.options],v=l.data.options[u.options.index];v&&(v.text=u.options.text,p.splice(u.options.index,1,v)),h={...u,options:p}}else o?h=Object.entries(u).reduce((p,[v,b])=>{const _=o[v];return p={...p,..._?_({data:l.data,value:b}):{[v]:b}},p},{}):h=u;const m=Object.keys(u).reduce((p,v)=>{const b=s[v];if(b){const _=b({currentError:l.errors[v],data:l.data,value:h[v]});p={...p,..._}}return p},{});return{newData:h,newErrors:m}};return{id:"stream-io/poll-composer-state-processing",handlers:{handleFieldChange:({state:n,next:s,forward:o})=>{if(!n.targetFields)return o();const{previousState:l,injectedFieldErrors:u}=n,{newData:h,newErrors:m}=e({processors:{...tP,...t==null?void 0:t.handleFieldChange},state:n,validators:{...zc,...KO,...a==null?void 0:a.handleFieldChange}});return s({...n,nextState:{...l,data:{...l.data,...h},errors:{...l.errors,...m,...u}}})},handleFieldBlur:({state:n,next:s,forward:o})=>{if(!n.targetFields)return o();const{previousState:l}=n,{newData:u,newErrors:h}=e({processors:t==null?void 0:t.handleFieldBlur,state:n,validators:{...zc,...JO,...a==null?void 0:a.handleFieldBlur}});return s({...n,nextState:{...l,data:{...l.data,...u},errors:{...l.errors,...h,...n.injectedFieldErrors}}})}}}},aP=t=>({id:"stream-io/poll-composer-composition",handlers:{compose:({discard:a,forward:e})=>t.pollComposer.canCreatePoll?e():a()}}),rP=class extends cu{constructor({composer:t}){super(),this.use([aP(t)])}},sP=class extends cu{constructor(){super(),this.use([nP()])}},iP=class extends Error{constructor(t,{code:a,status:e,response:n}){super(t),this.name="ErrorFromResponse",this.code=a,this.response=n,this.status=e}toJSON(){const t=[["status",this.status],["code",this.code]],a=[];for(const[e,n]of t)typeof n<"u"&&n!==null&&a.push(`${e}: ${n}`);return{message:`(${a.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}},oP=class{constructor({composer:t}){this.initState=()=>{this.state.next(this.initialState)},this.updateFields=async(a,e)=>{const{state:n,status:s}=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldChange",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:a,injectedFieldErrors:e}});s!=="discard"&&this.state.next(n.nextState)},this.handleFieldBlur=async a=>{const e=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldBlur",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:{[a]:this.state.getLatestValue().data[a]}}});e.status!=="discard"&&this.state.next(e.state.nextState)},this.compose=async()=>{var s;const{data:a,errors:e}=this.state.getLatestValue(),n=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{data:{...a,max_votes_allowed:a.max_votes_allowed?parseInt(a.max_votes_allowed):void 0,options:(s=a.options)==null?void 0:s.filter(o=>o.text.trim()).map(o=>({text:o.text}))},errors:e}});if(n.status!=="discard")return n.state},this.composer=t,this.state=new sa(this.initialState),this.compositionMiddlewareExecutor=new rP({composer:t}),this.stateMiddlewareExecutor=new sP}get initialState(){var t;return{data:{allow_answers:!1,allow_user_suggested_options:!1,description:"",enforce_unique_vote:!0,id:ar(),max_votes_allowed:"",name:"",options:[{id:ar(),text:""}],user_id:(t=this.composer.client.user)==null?void 0:t.id,voting_visibility:"public"},errors:{}}}get allow_answers(){return this.state.getLatestValue().data.allow_answers}get allow_user_suggested_options(){return this.state.getLatestValue().data.allow_user_suggested_options}get description(){return this.state.getLatestValue().data.description}get enforce_unique_vote(){return this.state.getLatestValue().data.enforce_unique_vote}get id(){return this.state.getLatestValue().data.id}get max_votes_allowed(){return this.state.getLatestValue().data.max_votes_allowed}get name(){return this.state.getLatestValue().data.name}get options(){return this.state.getLatestValue().data.options}get user_id(){return this.state.getLatestValue().data.user_id}get voting_visibility(){return this.state.getLatestValue().data.voting_visibility}get canCreatePoll(){var l,u;const{data:t,errors:a}=this.state.getLatestValue(),e=t.options.filter(h=>!!h.text).length>0,n=!!t.name,s=parseInt(((u=(l=t.max_votes_allowed)==null?void 0:l.match(Qy))==null?void 0:u[0])||""),o=t.max_votes_allowed===""||!!s&&(2<=s||s<=10);return e&&n&&o&&Object.values(a).filter(h=>!!h).length===0}},tE=t=>{const{localMetadata:a,...e}=t;return e},lP=t=>({id:"stream-io/message-composer-middleware/attachments",handlers:{compose:({state:a,next:e,discard:n,forward:s})=>{const{attachmentManager:o}=t;if(!o)return s();if(o.uploadsInProgressCount>0)return t.client.notifications.addWarning({message:"Wait until all attachments have uploaded",origin:{emitter:"MessageComposer",context:{composer:t}}}),n();const l=(a.message.attachments??[]).concat(o.successfulUploads.map(tE));return l.length?e({...a,localMessage:{...a.localMessage,attachments:l},message:{...a.message,attachments:l}}):s()}}}),cP=t=>({id:"stream-io/message-composer-middleware/draft-attachments",handlers:{compose:({state:a,next:e,forward:n})=>{const{attachmentManager:s}=t;if(!s)return n();const o=s.successfulUploads,l=o.length?(a.draft.attachments??[]).concat(o.map(tE)):void 0;return e({...a,draft:{...a.draft,attachments:l}})}}}),uP=t=>({id:"stream-io/message-composer-middleware/data-cleanup",handlers:{compose:({state:a,next:e})=>{var o,l,u;const n={type:((o=t.editedMessage)==null?void 0:o.type)??"regular"},s=t.editedMessage?RS(t.editedMessage):void 0;return e({...a,localMessage:Ta({...t.editedMessage,...a.localMessage,...n,user:t.client.user}),message:{...s,...a.message,...n},sendOptions:t.editedMessage&&((l=a.sendOptions)!=null&&l.skip_enrich_url)?{skip_enrich_url:(u=a.sendOptions)==null?void 0:u.skip_enrich_url}:a.sendOptions})}}}),dP=t=>({id:"stream-io/message-composer-middleware/custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const s=t.customDataManager.customMessageData;return s?e({...a,localMessage:{...a.localMessage,...s},message:{...a.message,...s}}):n()}}}),fP=t=>({id:"stream-io/message-composer-middleware/draft-custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const s=t.customDataManager.customMessageData;return s?e({...a,draft:{...a.draft,...s}}):n()}}}),hP=t=>({id:"stream-io/message-composer-middleware/data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var m;const{maxLengthOnSend:s}=t.config.text??{},o=a.message.text??"",l=Vy(o)&&!((m=a.message.attachments)!=null&&m.length)&&!a.message.poll_id,u=typeof s=="number"&&o.length>s,h=t.editedMessage&&!t.lastChangeOriginIsLocal;return l||h||u?await e():await n()}}}),mP=t=>({id:"stream-io/message-composer-middleware/draft-data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var l;const s=!Vy(a.draft.text??"")||((l=a.draft.attachments)==null?void 0:l.length)||a.draft.poll_id||a.draft.quoted_message_id;return t.lastChangeOriginIsLocal&&s?await n():await e()}}}),pP=t=>({id:"stream-io/message-composer-middleware/link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:s}=t;if(!s)return n();s.cancelURLEnrichment();const o=s.loadingPreviews.length>0,l=s.dismissedPreviews.length>0,u=s.loadingPreviews.length>0?[]:s.loadedPreviews.map(v=>qy.getPreviewData(v)),h=(a.message.attachments??[]).concat(u);if(!h.length)return n();const m={...a.sendOptions};return(!o&&u.length>0||l)&&(m.skip_enrich_url=!0),e({...a,message:{...a.message,attachments:h},localMessage:{...a.localMessage,attachments:h},sendOptions:m})}}}),gP=t=>({id:"stream-io/message-composer-middleware/draft-link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:s}=t;if(!s)return n();s.cancelURLEnrichment();const o=s.loadedPreviews.map(l=>qy.getPreviewData(l));return o.length?e({...a,draft:{...a.draft,attachments:(a.draft.attachments??[]).concat(o)}}):n()}}}),yP=t=>({id:"stream-io/message-composer-middleware/text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{mentionedUsers:s,text:o}=t.textComposer,l=Array.from(new Set(s.filter(({id:u,name:h})=>o.includes(`@${u}`)||o.includes(`@${h}`))));return!o&&l.length===0?n():e({...a,localMessage:{...a.localMessage,mentioned_users:l,text:o},message:{...a.message,mentioned_users:l.map(u=>u.id),text:o}})}}}),vP=t=>({id:"stream-io/message-composer-middleware/draft-text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{maxLengthOnSend:s}=t.config.text??{},{mentionedUsers:o,text:l}=t.textComposer,u=o.length?Array.from(new Set(o.filter(({id:m,name:p})=>l.includes(`@${m}`)||l.includes(`@${p}`)))):void 0,h=typeof s=="number"&&l.length>s?l.slice(0,s):l;return e({...a,draft:{...a.draft,mentioned_users:u==null?void 0:u.map(m=>m.id),text:h}})}}}),bP=t=>({id:"stream-io/message-composer-middleware/own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,localMessage:{...a.localMessage,...n,quoted_message:t.quotedMessage??void 0},message:{...a.message,...n}})}}}),wP=t=>({id:"stream-io/message-composer-middleware/draft-own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,draft:{...a.draft,...n}})}}}),CP={attachments:[],mentioned_users:[],parent_id:void 0,quoted_message:void 0,text:""},_P=t=>({id:"stream-io/message-composer-middleware/poll-only",handlers:{compose:({state:a,complete:e,forward:n})=>{const s=t.pollId,o=!!t.editedMessage,l=!!t.threadId;return!s||l||o?n():e({...a,localMessage:{...a.localMessage,...CP,poll_id:s},message:{id:a.localMessage.id,poll_id:s}})}}}),SP=class extends cu{constructor({composer:t}){super(),this.use([_P(t),yP(t),lP(t),pP(t),bP(t),dP(t),hP(t),uP(t)])}},EP=class extends cu{constructor({composer:t}){super(),this.use([vP(t),cP(t),gP(t),wP(t),fP(t),mP(t)])}},xP={debounceMs:300,pageSize:10},nE=class{constructor(t){this.setDebounceOptions=({debounceMs:n})=>{this.searchDebounced=Pg(this.executeQuery.bind(this),n)},this.activate=()=>{this.isActive||this.state.partialNext({isActive:!0})},this.deactivate=()=>{this.isActive&&this.state.partialNext({isActive:!1})},this.canExecuteQuery=n=>{const s=typeof n<"u",o=n??this.searchQuery;return!!(this.isActive&&!this.isLoading&&(this.hasNext||s)&&o)},this.search=n=>this.searchDebounced(n);const{debounceMs:a,pageSize:e}={...xP,...t};this.pageSize=e,this.state=new sa(this.initialState),this.setDebounceOptions({debounceMs:a})}get lastQueryError(){return this.state.getLatestValue().lastQueryError}get hasNext(){return this.state.getLatestValue().hasNext}get hasResults(){return Array.isArray(this.state.getLatestValue().items)}get isActive(){return this.state.getLatestValue().isActive}get isLoading(){return this.state.getLatestValue().isLoading}get initialState(){return{hasNext:!0,isActive:!1,isLoading:!1,items:void 0,lastQueryError:void 0,next:void 0,offset:0,searchQuery:""}}get items(){return this.state.getLatestValue().items}get next(){return this.state.getLatestValue().next}get offset(){return this.state.getLatestValue().offset}get searchQuery(){return this.state.getLatestValue().searchQuery}getStateBeforeFirstQuery(t){return{...this.initialState,isActive:this.isActive,isLoading:!0,searchQuery:t}}getStateAfterQuery(t,a){return{...this.state.getLatestValue(),lastQueryError:void 0,...t,isLoading:!1,items:a?t.items:[...this.items??[],...t.items||[]]}}async executeQuery(t){if(!this.canExecuteQuery(t))return;const a=typeof t<"u",e=t??this.searchQuery;a?this.state.next(this.getStateBeforeFirstQuery(t??"")):this.state.partialNext({isLoading:!0});const n={};try{const s=await this.query(e);if(!s)return;const{items:o,next:l}=s;l||l===null?(n.next=l,n.hasNext=!!l):(n.offset=(this.offset??0)+o.length,n.hasNext=o.length===this.pageSize),n.items=await this.filterQueryResults(o)}catch(s){n.lastQueryError=s}finally{this.state.next(this.getStateAfterQuery(n,a))}}cancelScheduledQuery(){this.searchDebounced.cancel()}resetState(){this.state.next(this.initialState)}resetStateAndActivate(){this.resetState(),this.activate()}},aE=({trigger:t,text:a,isCommand:e=!1,acceptTrailingSpaces:n=!0})=>{const s=`[^\\s${t}]*`,o=a.match(new RegExp(e?`^[${t}]${s}$`:n?`(?!^|\\W)?[${t}]${s}\\s?${s}$`:`(?!^|\\W)?[${t}]${s}$`,"g"));return o&&o[o.length-1].trim()},rE=({insertText:t,selection:a,text:e,trigger:n})=>{const s=e.slice(0,a.end),o=e.slice(a.end),l=s.lastIndexOf(n);return{text:s.slice(0,l)+t+o,selection:{start:l+t.length,end:l+t.length}}};function IP(t){return t.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}var DP=({displayName:t,searchToken:a})=>({tokenizedDisplayName:{token:a,parts:a?t.split(new RegExp(`(${IP(a)})`,"gi")).filter(Boolean):[t]}}),MP=class extends nE{constructor(t,a){super(a),this.type="commands",this.canExecuteQuery=e=>{const n=typeof e<"u";return this.isActive&&!this.isLoading&&(this.hasNext||n)},this.channel=t}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}query(t){const a=this.channel.getConfig(),n=((a==null?void 0:a.commands)||[]).filter(s=>!!(s.name&&s.name.toLowerCase().indexOf(t.toLowerCase())!==-1));return n.sort((s,o)=>{var h,m;let l=(h=s.name)==null?void 0:h.toLowerCase(),u=(m=o.name)==null?void 0:m.toLowerCase();if((l==null?void 0:l.indexOf(t))===0&&(l=`0${l}`),(u==null?void 0:u.indexOf(t))===0&&(u=`0${u}`),l!=null&&u!=null){if(l<u)return-1;if(l>u)return 1}return 0}),Promise.resolve({items:n.map(s=>({...s,id:s.name})),next:null})}filterQueryResults(t){return t}},AP={minChars:1,trigger:"/"},TP=(t,a)=>{const e=Cf(AP,{});let n=new MP(t);return n.activate(),{id:"stream-io/text-composer/commands-middleware",handlers:{onChange:({state:s,next:o,complete:l,forward:u})=>{var v;if(!s.selection)return u();const h=aE({trigger:e.trigger,text:s.text.slice(0,s.selection.end),acceptTrailingSpaces:!1,isCommand:!0});if(h&&h.length===e.minChars&&n.resetStateAndActivate(),!h||h.length<e.minChars){const b=((v=s.suggestions)==null?void 0:v.trigger)===e.trigger,_={...s};return b&&delete _.suggestions,o(_)}return l({...s,suggestions:{query:h.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:s,complete:o,forward:l})=>{var h;const{selectedSuggestion:u}=s.change??{};return!u||((h=s.suggestions)==null?void 0:h.trigger)!==e.trigger?l():(n.resetStateAndActivate(),o({...s,...rE({insertText:`/${u.name} `,selection:s.selection,text:s.text,trigger:e.trigger}),suggestions:void 0}))}}}},eC={a:"|||||||",c:"|",e:"|||||",i:"|||||",n:"|",o:"||||||||",u:"|||||||"},ag=t=>t?Object.keys(eC).reduce((a,e)=>a.replace(new RegExp(eC[e],"g"),e),t):"",tC=(t,a)=>{if(t.length===0)return a.length;if(a.length===0)return t.length;const e=[];let n;for(n=0;n<=a.length;n++)e[n]=[n];let s;for(s=0;s<=t.length;s++)e[0][s]=s;for(n=1;n<=a.length;n++)for(s=1;s<=t.length;s++)a.charAt(n-1)===t.charAt(s-1)?e[n][s]=e[n-1][s-1]:e[n][s]=Math.min(e[n-1][s-1]+1,Math.min(e[n][s-1]+1,e[n-1][s]+1));return e[a.length][t.length]},NP=class extends nE{constructor(t,a){const{mentionAllAppUsers:e,textComposerText:n,transliterate:s,...o}=a||{};super(o),this.type="mentions",this.canExecuteQuery=l=>{const u=typeof l<"u";return this.isActive&&!this.isLoading&&(u||this.hasNext)},this.transliterate=l=>l,this.getMembersAndWatchers=()=>{const l=Object.values(this.channel.state.members??{}).map(({user:p})=>p),u=Object.values(this.channel.state.watchers??{}),h=[...l,...u],m={};return h.forEach(p=>{p&&!m[p.id]&&(m[p.id]=p)}),Object.values(m)},this.searchMembersLocally=l=>{const{textComposerText:u}=this.config;return u?this.getMembersAndWatchers().filter(h=>{if(h.id===this.client.userID)return!1;if(!l)return!0;const m=this.transliterate(ag(h.id)).toLowerCase(),p=this.transliterate(ag(h.name)).toLowerCase(),v=this.transliterate(ag(l)).toLowerCase(),b=3,_=u.slice(-4).includes("@");if(p){const S=tC(v,p);if(p.includes(v)||S<=b&&_)return!0}const C=tC(v,m);return m.includes(v)||C<=b&&_}).sort((h,m)=>{if(!this.memberSort)return(h.name||"").localeCompare(m.name||"");for(const[p,v]of Object.entries(this.memberSort)){const b=h[p],_=m[p];if(b!==_)return v===1?String(b||"").localeCompare(String(_||"")):String(_||"").localeCompare(String(b||""))}return 0}):[]},this.prepareQueryUsersParams=l=>({filters:{$or:[{id:{$autocomplete:l}},{name:{$autocomplete:l}}],...this.userFilters},sort:this.userSort??[{name:1},{id:1}],options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}),this.prepareQueryMembersParams=l=>{let h=[{user_id:1}];return this.memberSort?Array.isArray(this.memberSort)?h=this.memberSort[0]:Object.keys(this.memberSort).length===1&&(h=this.memberSort):h=[{user_id:1}],{filters:this.memberFilters??{name:{$autocomplete:l}},sort:h,options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}},this.queryUsers=async l=>{const{filters:u,sort:h,options:m}=this.prepareQueryUsersParams(l),{users:p}=await this.client.queryUsers(u,h,m);return p},this.queryMembers=async l=>{const{filters:u,sort:h,options:m}=this.prepareQueryMembersParams(l);return(await this.channel.queryMembers(u,h,m)).members.map(v=>v.user)},this.filterMutes=l=>{const{textComposerText:u}=this.config;if(!u)return[];const{mutedUsers:h}=this.client;return u.includes("/unmute")&&!h.length?[]:h.length?u.includes("/unmute")?l.filter(m=>h.some(p=>p.target.id===m.id)):l.filter(m=>h.every(p=>p.target.id!==m.id)):l},this.client=t.getClient(),this.channel=t,this.config={mentionAllAppUsers:e,textComposerText:n},s&&(this.transliterate=s)}get allMembersLoadedWithInitialChannelQuery(){return Object.keys(this.channel.state.members||{}).length<YL}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}async query(t){let a;const e=this.allMembersLoadedWithInitialChannelQuery||!t;return this.config.mentionAllAppUsers?a=await this.queryUsers(t):e?a=this.searchMembersLocally(t):a=await this.queryMembers(t),{items:a.map(n=>({...n,...DP({displayName:n.name||n.id,searchToken:this.searchQuery})}))}}filterQueryResults(t){return this.filterMutes(t)}},RP={minChars:1,trigger:"@"},kP=t=>{const{tokenizedDisplayName:a,...e}=t;return e},LP=(t,a)=>{const e=Cf(RP,{});let n;return n=new NP(t),n.activate(),{id:"stream-io/text-composer/mentions-middleware",handlers:{onChange:({state:s,next:o,complete:l,forward:u})=>{var v;if(!s.selection)return u();const h=aE({trigger:e.trigger,text:s.text.slice(0,s.selection.end)});if(h&&h.length===e.minChars&&n.resetStateAndActivate(),!h||h.length<e.minChars){const b=((v=s.suggestions)==null?void 0:v.trigger)===e.trigger,_={...s};return b&&delete _.suggestions,o(_)}return n.config.textComposerText=s.text,l({...s,suggestions:{query:h.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:s,complete:o,forward:l})=>{var h;const{selectedSuggestion:u}=s.change??{};return!u||((h=s.suggestions)==null?void 0:h.trigger)!==e.trigger?l():(n.resetStateAndActivate(),o({...s,...rE({insertText:`@${u.name||u.id} `,selection:s.selection,text:s.text,trigger:e.trigger}),mentionedUsers:s.mentionedUsers.concat(kP(u)),suggestions:void 0}))}}}},OP=t=>({id:"stream-io/text-composer/pre-validation-middleware",handlers:{onChange:({state:a,next:e,forward:n})=>{const{maxLengthOnEdit:s}=t.config.text??{};return typeof s=="number"&&a.text.length>s?(a.text=a.text.slice(0,s),e({...a,text:a.text})):n()},onSuggestionItemSelect:({forward:a})=>a()}}),PP=class extends cu{constructor({composer:t}){super(),this.use([OP(t),LP(t.channel),TP(t.channel)])}async execute({eventName:t,initialValue:a}){var o;const e=await this.executeMiddlewareChain({eventName:t,initialValue:a}),{query:n,searchSource:s}=e.state.suggestions??{};return(o=s==null?void 0:s.search(n))==null||o.catch(console.error),e}},Vy=t=>{const a=t.trim();return a===""||a===">"||a==="``````"||a==="``"||a==="**"||a==="____"||a==="__"||a==="****"},nC=({composer:t,message:a})=>{if(!a){const n=t.config.text.defaultValue??"";return{mentionedUsers:[],text:n,selection:{start:n.length,end:n.length}}}const e=a.text??"";return{mentionedUsers:(a.mentioned_users??[]).map(n=>typeof n=="string"?{id:n}:n),text:e,selection:{start:e.length,end:e.length}}},BP=class{constructor({composer:t,message:a}){this.initState=({message:e}={})=>{this.state.next(nC({composer:this.composer,message:e}))},this.upsertMentionedUser=e=>{const n=[...this.mentionedUsers],s=n.findIndex(o=>o.id===e.id);s>=0?(n.splice(s,1,e),this.state.partialNext({mentionedUsers:n})):(n.push(e),this.state.partialNext({mentionedUsers:n}))},this.getMentionedUser=e=>this.state.getLatestValue().mentionedUsers.find(n=>n.id===e),this.removeMentionedUser=e=>{const n=this.mentionedUsers.findIndex(o=>o.id===e);if(n===-1)return;const s=[...this.mentionedUsers];s.splice(n,1),this.state.partialNext({mentionedUsers:s})},this.setText=e=>{!this.enabled||e===this.text||this.state.partialNext({text:e})},this.setSelection=e=>{const n=e.start!==this.selection.start||e.end!==this.selection.end;!this.enabled||!n||this.state.partialNext({selection:e})},this.insertText=({text:e,selection:n})=>{if(!this.enabled)return;const s=n??this.selection,{maxLengthOnEdit:o}=this.composer.config.text??{},l=this.text,u=[l.slice(0,s.start),e,l.slice(s.end)].join(""),h=u.slice(0,typeof o=="number"?o:u.length),m=l.slice(0,s.start).length+e.length,p=m>=h.length?h.length:l.slice(0,m).length;this.state.partialNext({text:h,selection:{start:p,end:p}})},this.wrapSelection=({head:e="",selection:n,tail:s=""})=>{if(!this.enabled)return;const o=n??this.selection,l=this.text.slice(0,o.start),u=this.text.slice(o.start,o.end),h=this.text.slice(o.end),m={start:l.length+e.length,end:l.length+e.length+u.length};this.state.partialNext({text:[l,e,u,s,h].join(""),selection:m})},this.setSuggestions=e=>{this.state.partialNext({suggestions:e})},this.closeSuggestions=()=>{const{suggestions:e}=this.state.getLatestValue();e&&this.state.partialNext({suggestions:void 0})},this.handleChange=async({text:e,selection:n})=>{if(!this.enabled)return;const s=await this.middlewareExecutor.execute({eventName:"onChange",initialValue:{...this.state.getLatestValue(),text:e,selection:n}});s.status!=="discard"&&(this.state.next(s.state),this.config.publishTypingEvents&&e&&AS(this.channel.keystroke(this.composer.threadId??void 0),"start typing event"))},this.handleSelect=async e=>{if(!this.enabled)return;const n=await this.middlewareExecutor.execute({eventName:"onSuggestionItemSelect",initialValue:{...this.state.getLatestValue(),change:{selectedSuggestion:e}}});(n==null?void 0:n.status)!=="discard"&&this.state.next(n.state)},this.composer=t,this.state=new sa(nC({composer:t,message:a})),this.middlewareExecutor=new PP({composer:t})}get channel(){return this.composer.channel}get config(){return this.composer.config.text}get enabled(){return this.composer.config.text.enabled}set enabled(t){t!==this.enabled&&this.composer.updateConfig({text:{enabled:t}})}get defaultValue(){return this.composer.config.text.defaultValue}set defaultValue(t){t!==this.defaultValue&&this.composer.updateConfig({text:{defaultValue:t}})}get maxLengthOnEdit(){return this.composer.config.text.maxLengthOnEdit}set maxLengthOnEdit(t){t!==this.maxLengthOnEdit&&this.composer.updateConfig({text:{maxLengthOnEdit:t}})}get maxLengthOnSend(){return this.composer.config.text.maxLengthOnSend}set maxLengthOnSend(t){t!==this.maxLengthOnSend&&this.composer.updateConfig({text:{maxLengthOnSend:t}})}get publishTypingEvents(){return this.composer.config.text.publishTypingEvents}set publishTypingEvents(t){t!==this.publishTypingEvents&&this.composer.updateConfig({text:{publishTypingEvents:t}})}get mentionedUsers(){return this.state.getLatestValue().mentionedUsers}get selection(){return this.state.getLatestValue().selection}get suggestions(){return this.state.getLatestValue().suggestions}get text(){return this.state.getLatestValue().text}get textIsEmpty(){return Vy(this.text)}setMentionedUsers(t){this.state.partialNext({mentionedUsers:t})}},qg=class sE{constructor(){this.unsubscribeFunctions=new Set}get hasSubscriptions(){return this.unsubscribeFunctions.size>0}addUnsubscribeFunction(a){this.unsubscribeFunctions.add(a)}unregisterSubscriptions(){return this.unsubscribeFunctions.forEach(a=>a()),this.unsubscribeFunctions.clear(),sE.symbol}};qg.symbol=Symbol(qg.name);var uu=qg,rg=50,UP=[{created_at:-1}],zP=1e3,HP={active_participant_count:!0,channel:!0,channel_cid:!0,created_at:!0,created_by:!0,created_by_user_id:!0,deleted_at:!0,draft:!0,last_message_at:!0,latest_replies:!0,parent_message:!0,parent_message_id:!0,participant_count:!0,read:!0,reply_count:!0,thread_participants:!0,title:!0,updated_at:!0},aC=t=>{const a={};for(const e in t){if(HP[e])continue;const n=e;a[n]=t[n]}return a},Hc=class extends uu{constructor({client:t,threadData:a}){super(),this.failedRepliesMap=new Map,this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.reload=async()=>{if(!this.state.getLatestValue().isLoading){this.state.partialNext({isLoading:!0});try{const s=await this.client.getThread(this.id,{watch:!0});this.hydrateState(s)}finally{this.state.partialNext({isLoading:!1})}}},this.hydrateState=s=>{if(s===this)return;if(s.id!==this.id)throw new Error("Cannot hydrate thread's state using thread with different threadId");const{createdAt:o,custom:l,title:u,deletedAt:h,parentMessage:m,participants:p,read:v,replyCount:b,replies:_,updatedAt:C}=s.state.getLatestValue(),S=Array.from(this.failedRepliesMap.values());this.state.partialNext({title:u,createdAt:o,custom:l,deletedAt:h,parentMessage:m,participants:p,read:v,replyCount:b,replies:S.length?_.concat(S):_,updatedAt:C,isStateStale:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeThreadUpdated()),this.addUnsubscribeFunction(this.subscribeMarkActiveThreadRead()),this.addUnsubscribeFunction(this.subscribeReloadActiveStaleThread()),this.addUnsubscribeFunction(this.subscribeMarkThreadStale()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRepliesRead()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()))},this.subscribeThreadUpdated=()=>this.client.on("thread.updated",s=>{if(!s.thread||s.thread.parent_message_id!==this.id)return;const o=s.thread;this.state.partialNext({title:o.title,updatedAt:new Date(o.updated_at),deletedAt:o.deleted_at?new Date(o.deleted_at):null,custom:aC(o)})}).unsubscribe,this.subscribeMarkActiveThreadRead=()=>this.state.subscribeWithSelector(s=>({active:s.active,unreadMessageCount:rC(this.client.userID)(s)}),({active:s,unreadMessageCount:o})=>{!s||!o||this.throttledMarkAsRead()}),this.subscribeReloadActiveStaleThread=()=>this.state.subscribeWithSelector(s=>({active:s.active,isStateStale:s.isStateStale}),({active:s,isStateStale:o})=>{s&&o&&this.reload()}),this.subscribeMarkThreadStale=()=>this.client.on("user.watching.stop",s=>{var l,u;const{channel:o}=this.state.getLatestValue();!this.client.userID||this.client.userID!==((l=s.user)==null?void 0:l.id)||((u=s.channel)==null?void 0:u.cid)!==o.cid||this.state.partialNext({isStateStale:!0})}).unsubscribe,this.subscribeNewReplies=()=>this.client.on("message.new",s=>{var m,p,v;if(!this.client.userID||((m=s.message)==null?void 0:m.parent_id)!==this.id)return;const o=((p=s.message.user)==null?void 0:p.id)===this.client.userID,{active:l,read:u}=this.state.getLatestValue();this.upsertReplyLocally({message:s.message,timestampChanged:o}),l&&this.throttledMarkAsRead();const h={};for(const b of Object.keys(u)){const _=u[b];if(_){let C=_;b===((v=s.user)==null?void 0:v.id)?C={...C,lastReadAt:s.created_at?new Date(s.created_at):new Date,user:s.user,unreadMessageCount:0}:l&&b===this.client.userID||(C={...C,unreadMessageCount:_.unreadMessageCount+1}),h[b]=C}}this.state.partialNext({read:h})}).unsubscribe,this.subscribeRepliesRead=()=>this.client.on("message.read",s=>{if(!s.user||!s.created_at||!s.thread||s.thread.parent_message_id!==this.id)return;const o=s.user.id,l=s.created_at,u=s.user;this.state.next(h=>({...h,read:{...h.read,[o]:{lastReadAt:new Date(l),user:u,lastReadMessageId:s.last_read_message_id,unreadMessageCount:0}}}))}).unsubscribe,this.subscribeMessageDeleted=()=>this.client.on("message.deleted",s=>{s.message&&(s.message.parent_id===this.id&&(s.hard_delete?this.deleteReplyLocally({message:s.message}):this.upsertReplyLocally({message:s.message})),s.message.id===this.id&&this.updateParentMessageLocally({message:s.message}))}).unsubscribe,this.subscribeMessageUpdated=()=>{const o=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(l=>this.client.on(l,u=>{u.message&&this.updateParentMessageOrReplyLocally(u.message)}).unsubscribe);return()=>o.forEach(l=>l())},this.unregisterSubscriptions=()=>{const s=super.unregisterSubscriptions();return this.state.partialNext({isStateStale:!0}),s},this.deleteReplyLocally=({message:s})=>{var h;const{replies:o}=this.state.getLatestValue(),l=kS({needle:Ta(s),sortedArray:o,sortDirection:"ascending",selectValueToCompare:m=>m.created_at.getTime(),selectKey:m=>m.id});if(((h=o[l])==null?void 0:h.id)!==s.id)return;const u=[...o];u.splice(l,1),this.state.partialNext({replies:u})},this.upsertReplyLocally=({message:s,timestampChanged:o=!1})=>{if(s.parent_id!==this.id)throw new Error("Reply does not belong to this thread");const l=Ta(s);s.status==="failed"?this.failedRepliesMap.set(l.id,l):this.failedRepliesMap.has(s.id)&&this.failedRepliesMap.delete(s.id),this.state.next(u=>({...u,replies:LS(u.replies,l,o)}))},this.updateParentMessageLocally=({message:s})=>{if(s.id!==this.id)throw new Error("Message does not belong to this thread");this.state.next(o=>{const l=Ta(s);return{...o,deletedAt:l.deleted_at,parentMessage:l,replyCount:s.reply_count??o.replyCount}})},this.updateParentMessageOrReplyLocally=s=>{s.parent_id===this.id&&this.upsertReplyLocally({message:s}),!s.parent_id&&s.id===this.id&&this.updateParentMessageLocally({message:s})},this.markAsRead=async({force:s=!1}={})=>this.ownUnreadCount===0&&!s?null:await this.channel.markRead({thread_id:this.id}),this.throttledMarkAsRead=OS(()=>this.markAsRead(),zP,{trailing:!0}),this.queryReplies=({limit:s=rg,sort:o=UP,...l}={})=>this.channel.getReplies(this.id,{limit:s,...l},o),this.loadNextPage=({limit:s=rg}={})=>this.loadPage(s),this.loadPrevPage=({limit:s=rg}={})=>this.loadPage(-s),this.loadPage=async s=>{var v;const{pagination:o}=this.state.getLatestValue(),[l,u,h]=s>0?["isLoadingNext","nextCursor","push"]:["isLoadingPrev","prevCursor","unshift"];if(o[l]||o[u]===null)return;const m={[s>0?"id_gt":"id_lt"]:o[u]},p=Math.abs(s);this.state.partialNext({pagination:{...o,[l]:!0}});try{const b=await this.queryReplies({...m,limit:p}),_=b.messages.map(Ta),C=((v=_.at(s>0?-1:0))==null?void 0:v.id)??null;this.state.next(S=>{let E=S.replies;return _.length>0&&(E=[...S.replies],E[h](..._)),{...S,replies:E,pagination:{...S.pagination,[u]:b.messages.length<p?null:C,[l]:!1}}})}catch(b){this.client.logger("error",b.message),this.state.next(_=>({..._,pagination:{..._.pagination,[l]:!1}}))}};const e=t.channel(a.channel.type,a.channel.id,{name:a.channel.name});e._hydrateMembers({members:a.channel.members??[],overrideCurrentState:!1});const n=t.userID?[{user:{id:t.userID},unread_messages:0,last_read:new Date().toISOString()}]:[];this.state=new sa({active:!1,isLoading:!1,isStateStale:!1,channel:e,createdAt:new Date(a.created_at),deletedAt:a.deleted_at?new Date(a.deleted_at):null,pagination:FP(a),parentMessage:Ta(a.parent_message),participants:a.thread_participants,read:YP(!a.read||a.read.length===0?n:a.read),replies:a.latest_replies.map(Ta),replyCount:a.reply_count??0,updatedAt:a.updated_at?new Date(a.updated_at):null,title:a.title,custom:aC(a)}),this.id=a.parent_message_id,this.client=t,this.messageComposer=new qf({client:t,composition:a.draft,compositionContext:this})}get channel(){return this.state.getLatestValue().channel}get hasStaleState(){return this.state.getLatestValue().isStateStale}get ownUnreadCount(){return rC(this.client.userID)(this.state.getLatestValue())}},YP=t=>t.reduce((a,e)=>(a[e.user.id]={user:e.user,lastReadMessageId:e.last_read_message_id,unreadMessageCount:e.unread_messages??0,lastReadAt:new Date(e.last_read)},a),{}),FP=t=>{var e;return{nextCursor:null,prevCursor:t.latest_replies.length===t.reply_count?null:((e=t.latest_replies.at(0))==null?void 0:e.id)??null,isLoadingNext:!1,isLoadingPrev:!1}},rC=t=>a=>{var e;return t&&((e=a.read[t])==null?void 0:e.unreadMessageCount)||0},Yc=t=>!!(t!=null&&t.message),jP=t=>{let a=null,e=new Date().getTime();return Yc(t)?e=a=new Date(t.created_at).getTime():t&&zS(t)&&(e=new Date(t.updated_at).getTime()),{lastChange:{draftUpdate:a,stateUpdate:e}}},sC=t=>{if(!t)return{id:qf.generateId(),quotedMessage:null,pollId:null,draftId:null};const a=t.quoted_message;let e,n=null,s=qf.generateId();return Yc(t)?(e=t.message,n=t.message.id):(e=t,s=t.id),{draftId:n,id:s,quotedMessage:a?Ta(a):null,pollId:e.poll_id??null}},WP=()=>{},iE=class Qg extends uu{constructor({composition:a,config:e,compositionContext:n,client:s}){if(super(),this.initState=({composition:l}={})=>{this.editingAuditState.partialNext(this.initEditingAuditState(l));const u=typeof l>"u"?l:Yc(l)?l.message:Ta(l);this.attachmentManager.initState({message:u}),this.linkPreviewsManager.initState({message:u}),this.textComposer.initState({message:u}),this.pollComposer.initState(),this.customDataManager.initState({message:u}),this.state.next(sC(l)),l&&!Yc(l)&&u&&zS(u)&&(this.editedMessage=u)},this.initEditingAuditState=l=>jP(l),this.registerSubscriptions=()=>this.hasSubscriptions?WP:(this.addUnsubscribeFunction(this.subscribeMessageComposerSetupStateChange()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeTextComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeAttachmentManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeLinkPreviewsManagerStateChanged()),this.addUnsubscribeFunction(this.subscribePollComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeCustomDataManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerConfigStateChanged()),this.unregisterSubscriptions.bind(this)),this.subscribeMessageUpdated=()=>{const u=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(h=>this.client.on(h,m=>{var p;m.message&&(m.message.id===this.id&&this.initState({composition:m.message}),(p=this.quotedMessage)!=null&&p.id&&m.message.id===this.quotedMessage.id&&this.setQuotedMessage(Ta(m.message)))}).unsubscribe);return()=>u.forEach(h=>h())},this.subscribeMessageComposerSetupStateChange=()=>{let l=null;const u=this.client._messageComposerSetupState.subscribeWithSelector(({setupFunction:h})=>({setup:h}),({setup:h})=>{l==null||l(),l=(h==null?void 0:h({composer:this}))??null});return()=>{l==null||l(),u()}},this.subscribeMessageDeleted=()=>this.client.on("message.deleted",l=>{l.message&&(l.message.id===this.id?this.clear():this.quotedMessage&&l.message.id===this.quotedMessage.id&&this.setQuotedMessage(null))}).unsubscribe,this.subscribeDraftUpdated=()=>this.client.on("draft.updated",l=>{const u=l.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||this.initState({composition:u})}).unsubscribe,this.subscribeDraftDeleted=()=>this.client.on("draft.deleted",l=>{const u=l.draft;!u||!!u.parent_id!=!!this.threadId||u.channel_cid!==this.channel.cid||(this.logDraftUpdateTimestamp(),!this.compositionIsEmpty&&this.clear())}).unsubscribe,this.subscribeTextComposerStateChanged=()=>this.textComposer.state.subscribeWithSelector(({text:l})=>[l],([l],u)=>{if(!(typeof u>"u")){if(this.logStateUpdateTimestamp(),this.compositionIsEmpty){this.deleteDraft();return}this.linkPreviewsManager.enabled&&(l?this.linkPreviewsManager.findAndEnrichUrls(l):this.linkPreviewsManager.clearPreviews())}}),this.subscribeAttachmentManagerStateChanged=()=>this.attachmentManager.state.subscribe((l,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeLinkPreviewsManagerStateChanged=()=>this.linkPreviewsManager.state.subscribe((l,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribePollComposerStateChanged=()=>this.pollComposer.state.subscribe((l,u)=>{if(!(typeof u>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeCustomDataManagerStateChanged=()=>this.customDataManager.state.subscribe((l,u)=>{typeof u<"u"&&!this.customDataManager.isMessageDataEqual(l,u)&&this.logStateUpdateTimestamp()}),this.subscribeMessageComposerStateChanged=()=>this.state.subscribe((l,u)=>{typeof u>"u"||(this.logStateUpdateTimestamp(),this.compositionIsEmpty&&this.deleteDraft())}),this.subscribeMessageComposerConfigStateChanged=()=>{let l;const u=this.configState.subscribeWithSelector(h=>({textDefaultValue:h.text.defaultValue,draftsEnabled:h.drafts.enabled}),({textDefaultValue:h,draftsEnabled:m})=>{this.textComposer.text===""&&h&&this.textComposer.insertText({text:h,selection:{start:0,end:0}}),m&&!l?l=[this.subscribeDraftUpdated(),this.subscribeDraftDeleted()]:!m&&l&&(l.forEach(p=>p()),l=null)});return()=>{l==null||l.forEach(h=>h()),u()}},this.setQuotedMessage=l=>{this.state.partialNext({quotedMessage:l})},this.clear=()=>{this.initState()},this.restore=()=>{const{editedMessage:l}=this;if(l){this.initState({composition:l});return}this.clear()},this.compose=async()=>{var m;const l=((m=this.editedMessage)==null?void 0:m.created_at)??new Date,h=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{message:{id:this.id,parent_id:this.threadId??void 0,type:"regular"},localMessage:{attachments:[],created_at:l,deleted_at:null,error:void 0,id:this.id,mentioned_users:[],parent_id:this.threadId??void 0,pinned_at:null,reaction_groups:null,status:this.editedMessage?this.editedMessage.status:"sending",text:"",type:"regular",updated_at:l},sendOptions:{}}});if(h.status!=="discard")return h.state},this.composeDraft=async()=>{const{state:l,status:u}=await this.draftCompositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{draft:{id:this.id,parent_id:this.threadId??void 0,text:""}}});if(u!=="discard")return l},this.createDraft=async()=>{if(this.editedMessage||!this.config.drafts.enabled)return;const l=await this.composeDraft();if(!l)return;const{draft:u}=l;this.state.partialNext({draftId:u.id}),this.logDraftUpdateTimestamp(),await this.channel.createDraft(u)},this.deleteDraft=async()=>{this.editedMessage||!this.config.drafts.enabled||!this.draftId||(this.state.partialNext({draftId:null}),this.logDraftUpdateTimestamp(),await this.channel.deleteDraft({parent_id:this.threadId??void 0}))},this.createPoll=async()=>{const l=await this.pollComposer.compose();if(!(!l||!l.data.id))try{const{poll:u}=await this.client.createPoll(l.data);this.state.partialNext({pollId:u.id}),this.pollComposer.initState()}catch(u){throw this.client.notifications.add({message:"Failed to create the poll",origin:{emitter:"MessageComposer",context:{composer:this}}}),u}},this.compositionContext=n,this.configState=new sa(Cf(GO,e??{})),n instanceof el)this.channel=n;else if(n instanceof Hc)this.channel=n.channel;else if(n.cid){const[l,u]=n.cid.split(":");this.channel=s.channel(l,u)}else throw new Error("MessageComposer requires composition context pointing to channel (channel or context.cid)");let o;Yc(a)?o=a.message:a&&(o=Ta(a),this.editedMessage=o),this.attachmentManager=new IO({composer:this,message:o}),this.linkPreviewsManager=new qy({composer:this,message:o}),this.textComposer=new BP({composer:this,message:o}),this.pollComposer=new oP({composer:this}),this.customDataManager=new ZO({composer:this,message:o}),this.editingAuditState=new sa(this.initEditingAuditState(a)),this.state=new sa(sC(a)),this.compositionMiddlewareExecutor=new SP({composer:this}),this.draftCompositionMiddlewareExecutor=new EP({composer:this})}static evaluateContextType(a){return a instanceof el?"channel":a instanceof Hc?"thread":typeof a.legacyThreadId=="string"?"legacy_thread":"message"}static constructTag(a){return`${this.evaluateContextType(a)}_${a.id}`}get config(){return this.configState.getLatestValue()}updateConfig(a){this.configState.partialNext(Cf(this.config,a))}get contextType(){return Qg.evaluateContextType(this.compositionContext)}get tag(){return Qg.constructTag(this.compositionContext)}get threadId(){return this.compositionContext instanceof el?null:this.compositionContext instanceof Hc?this.compositionContext.id:typeof this.compositionContext.legacyThreadId=="string"?this.compositionContext.legacyThreadId:typeof this.compositionContext.parent_id=="string"?this.compositionContext.parent_id:null}get client(){return this.channel.getClient()}get id(){return this.state.getLatestValue().id}get draftId(){return this.state.getLatestValue().draftId}get lastChange(){return this.editingAuditState.getLatestValue().lastChange}get quotedMessage(){return this.state.getLatestValue().quotedMessage}get pollId(){return this.state.getLatestValue().pollId}get hasSendableData(){return!!(!this.attachmentManager.uploadsInProgressCount&&(!this.textComposer.textIsEmpty||this.attachmentManager.successfulUploadsCount>0)||this.pollId)}get compositionIsEmpty(){return!this.quotedMessage&&this.textComposer.textIsEmpty&&!this.attachmentManager.attachments.length&&!this.pollId}get lastChangeOriginIsLocal(){var o;const e=this.lastChange.draftUpdate===null&&!this.editedMessage,n=!!((o=this.editedMessage)!=null&&o.updated_at)&&new Date(this.editedMessage.updated_at).getTime()<this.lastChange.stateUpdate,s=!!this.lastChange.draftUpdate&&this.lastChange.draftUpdate<this.lastChange.stateUpdate;return n||s||e}logStateUpdateTimestamp(){this.editingAuditState.partialNext({lastChange:{...this.lastChange,stateUpdate:new Date().getTime()}})}logDraftUpdateTimestamp(){if(!this.config.drafts.enabled)return;const a=new Date().getTime();this.editingAuditState.partialNext({lastChange:{draftUpdate:a,stateUpdate:a}})}};iE.generateId=ar;var qf=iE,el=class{constructor(t,a,e,n){this.create=async l=>{const u={...l,watch:!1,state:!1,presence:!1};return await this.query(u,"latest")},this._callChannelListeners=l=>{const u=this,h=[];u.listeners.all&&h.push(...u.listeners.all),u.listeners[l.type]&&h.push(...u.listeners[l.type]);for(const m of h)typeof m!="string"&&m(l)},this._channelURL=()=>{if(!this.id)throw new Error("channel id is not defined");return`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}/${encodeURIComponent(this.id)}`};const s=/^[\w_-]+$/,o=/^[\w!_-]+$/;if(!s.test(a))throw new Error(`Invalid chat type ${a}, letters, numbers and "_-" are allowed`);if(typeof e=="string"&&!o.test(e))throw new Error(`Invalid chat id ${e}, letters, numbers and "!-_" are allowed`);this._client=t,this.type=a,this.id=e,this.data=n,this._data={...n},this.cid=`${a}:${e}`,this.listeners={},this.state=new hO(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1,this.messageComposer=new qf({client:this._client,compositionContext:this})}getClient(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}getConfig(){return this.getClient().configs[this.cid]}async _sendMessage(t,a){return await this.getClient().post(this._channelURL()+"/message",{message:t,...a})}async sendMessage(t,a){try{const e=this.getClient().offlineDb;if(e){const n=t.id;if(n)return await e.queueTask({task:{channelId:this.id,channelType:this.type,messageId:n,payload:[t,a],type:"send-message"}})}}catch(e){this._client.logger("error","offlineDb:send-message",{tags:["channel","offlineDb"],error:e})}return await this._sendMessage(t,a)}sendFile(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/file`,t,a,e,n)}sendImage(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/image`,t,a,e,n)}deleteFile(t){return this.getClient().delete(`${this._channelURL()}/file`,{url:t})}deleteImage(t){return this.getClient().delete(`${this._channelURL()}/image`,{url:t})}async sendEvent(t){return this._checkInitialized(),await this.getClient().post(this._channelURL()+"/event",{event:t})}async search(t,a={}){if(a.offset&&a.next)throw Error("Cannot specify offset with next");const e={filter_conditions:{cid:this.cid},...a,sort:a.sort?Zn(a.sort):void 0};if(typeof t=="string")e.query=t;else if(typeof t=="object")e.message_filter_conditions=t;else throw Error(`Invalid type ${typeof t} for query parameter`);return await this.getClient().wsPromise,await this.getClient().get(this.getClient().baseURL+"/search",{payload:e})}async queryMembers(t,a=[],e={}){var l;let n;const s=this.type;let o;return this.id?n=this.id:(l=this.data)!=null&&l.members&&Array.isArray(this.data.members)&&(o=this.data.members),await this.getClient().get(this.getClient().baseURL+"/members",{payload:{type:s,id:n,members:o,sort:Zn(a),filter_conditions:t,...e}})}async updateMemberPartial(t,a){const e=new URL(`${this._channelURL()}/member`);return a!=null&&a.userId&&e.searchParams.append("user_id",a.userId),await this.getClient().patch(e.toString(),t)}async partialUpdateMember(t,a){if(!t)throw Error("Please specify the user id");return await this.getClient().patch(this._channelURL()+`/member/${encodeURIComponent(t)}`,a)}async sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");try{const n=this.getClient().offlineDb;if(n)return await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a,e],type:"send-reaction"}})}catch(n){this._client.logger("error","offlineDb:send-reaction",{tags:["channel","offlineDb"],error:n})}return this._sendReaction(t,a,e)}async _sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");return await this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction`,{reaction:a,...e})}async deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");try{const n=this.getClient().offlineDb;if(n){const s=this.state.messages.find(({id:l})=>l===t),o={created_at:"",updated_at:"",message_id:t,type:a,user_id:this.getClient().userID??e};return s&&await n.deleteReaction({message:s,reaction:o}),await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a],type:"delete-reaction"}})}}catch(n){this._client.logger("error","offlineDb:delete-reaction",{tags:["channel","offlineDb"],error:n})}return await this._deleteReaction(t,a,e)}async _deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");const n=this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction/${encodeURIComponent(a)}`;return e?await this.getClient().delete(n,{user_id:e}):await this.getClient().delete(n,{})}async update(t={},a,e){return["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(s=>{delete t[s]}),await this._update({message:a,data:t,...e})}async updatePartial(t){var n,s;const a=await this.getClient().patch(this._channelURL(),t),e=[...a.channel.own_capabilities||[]].sort().join()!==[...Array.isArray((n=this.data)==null?void 0:n.own_capabilities)?(s=this.data)==null?void 0:s.own_capabilities:[]].sort().join();return this.data=a.channel,e&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:a.channel.own_capabilities}),a}async enableSlowMode(t){const a=await this.getClient().post(this._channelURL(),{cooldown:t});return this.data=a.channel,a}async disableSlowMode(){const t=await this.getClient().post(this._channelURL(),{cooldown:0});return this.data=t.channel,t}async delete(t={}){return await this.getClient().delete(this._channelURL(),{...t})}async truncate(t={}){return await this.getClient().post(this._channelURL()+"/truncate",t)}async acceptInvite(t={}){return await this._update({accept_invite:!0,...t})}async rejectInvite(t={}){return await this._update({reject_invite:!0,...t})}async addMembers(t,a,e={}){return await this._update({add_members:t,message:a,...e})}async addModerators(t,a,e={}){return await this._update({add_moderators:t,message:a,...e})}async assignRoles(t,a,e={}){return await this._update({assign_roles:t,message:a,...e})}async inviteMembers(t,a,e={}){return await this._update({invites:t,message:a,...e})}async removeMembers(t,a,e={}){return await this._update({remove_members:t,message:a,...e})}async demoteModerators(t,a,e={}){return await this._update({demote_moderators:t,message:a,...e})}async _update(t){const a=await this.getClient().post(this._channelURL(),t);return this.data=a.channel,a}async mute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",{channel_cid:this.cid,...t})}async unmute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",{channel_cid:this.cid,...t})}async archive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for archiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!0}})).channel_member}async unarchive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for unarchiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!1}})).channel_member}async pin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for pinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!0}})).channel_member}async unpin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for unpinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!1}})).channel_member}muteStatus(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}sendAction(t,a){if(this._checkInitialized(),!t)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/action`,{message_id:t,form_data:a,id:this.id,type:this.type})}async keystroke(t,a){if(!this._isTypingIndicatorsEnabled())return;const e=new Date,n=this.lastTypingEvent&&e.getTime()-this.lastTypingEvent.getTime();this.lastKeyStroke=e,this.isTyping=!0,(n===null||n>2e3)&&(this.lastTypingEvent=new Date,await this.sendEvent({type:"typing.start",parent_id:t,...a||{}}))}async updateAIState(t,a,e={}){await this.sendEvent({...e,type:"ai_indicator.update",message_id:t,ai_state:a})}async clearAIIndicator(){await this.sendEvent({type:"ai_indicator.clear"})}async stopAIResponse(){await this.sendEvent({type:"ai_indicator.stop"})}async stopTyping(t,a){this._isTypingIndicatorsEnabled()&&(this.lastTypingEvent=null,this.isTyping=!1,await this.sendEvent({type:"typing.stop",parent_id:t,...a||{}}))}_isTypingIndicatorsEnabled(){var t,a,e,n,s;return!((t=this.getConfig())!=null&&t.typing_events)||!((a=this.getClient().wsConnection)!=null&&a.isHealthy)?!1:((s=(n=(e=this.getClient().user)==null?void 0:e.privacy_settings)==null?void 0:n.typing_indicators)==null?void 0:s.enabled)??!0}lastMessage(){let t=this.state.latestMessages.length-5;t<0&&(t=0);const a=this.state.latestMessages.length+1,e=this.state.latestMessages.slice(t,a);return e.sort((n,s)=>s.created_at.getTime()-n.created_at.getTime()),e[0]}async markRead(t={}){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/read",{...t})}async markUnread(t){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/unread",{...t})}clean(){this.lastKeyStroke&&new Date().getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&AS(this.stopTyping(),"stop typing event"),this.state.clean()}async watch(t){const a={state:!0,watch:!0,presence:!1};await this.getClient().wsPromise,this.getClient()._hasConnectionID()||(a.watch=!1);const e={...a,...t},n=await this.query(e,"latest");return this.initialized=!0,this.data=n.channel,this._client.logger("info",`channel:watch() - started watching channel ${this.cid}`,{tags:["channel"],channel:this}),n}async stopWatching(){const t=await this.getClient().post(this._channelURL()+"/stop-watching",{});return this._client.logger("info",`channel:watch() - stopped watching channel ${this.cid}`,{tags:["channel"],channel:this}),t}async getReplies(t,a,e){const n=e?Zn(e):void 0,s=await this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/replies`,{sort:n,...a});return s.messages&&this.state.addMessagesSorted(s.messages),s}async getPinnedMessages(t,a=[]){return await this.getClient().get(this._channelURL()+"/pinned_messages",{payload:{...t,sort:Zn(a)}})}getReactions(t,a){return this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reactions`,{...a})}getMessagesById(t){return this.getClient().get(this._channelURL()+"/messages",{ids:t.join(",")})}lastRead(){const{userID:t}=this.getClient();if(t)return this.state.read[t]?this.state.read[t].last_read:null}_countMessageAsUnread(t){var a,e,n,s;return!(t.shadowed||t.silent||t.parent_id&&!t.show_in_channel||((a=t.user)==null?void 0:a.id)===this.getClient().userID||(e=t.user)!=null&&e.id&&this.getClient().userMuteStatus(t.user.id)||Array.isArray((n=this.data)==null?void 0:n.own_capabilities)&&!((s=this.data)!=null&&s.own_capabilities.includes("read-events"))||this.muteStatus().muted)}countUnread(t){if(!t)return this.state.unreadCount;let a=0;for(let e=0;e<this.state.latestMessages.length;e+=1){const n=this.state.latestMessages[e];n.created_at>t&&this._countMessageAsUnread(n)&&a++}return a}countUnreadMentions(){var n;const t=this.lastRead(),a=this.getClient().userID;let e=0;for(let s=0;s<this.state.latestMessages.length;s+=1){const o=this.state.latestMessages[s];this._countMessageAsUnread(o)&&(!t||o.created_at>t)&&((n=o.mentioned_users)!=null&&n.some(l=>l.id===a))&&e++}return e}async query(t={},a="current"){var u,h,m,p,v,b,_;await this.getClient().wsPromise;const e=((u=t.created_by)==null?void 0:u.id)??t.created_by_id??((m=(h=this._data)==null?void 0:h.created_by)==null?void 0:m.id)??((p=this._data)==null?void 0:p.created_by_id);this.getClient()._isUsingServerAuth()&&typeof e!="string"&&this.getClient().logger("warn","Either `created_by` (with `id` property) or `created_by_id` are missing from both `Channel._data` and `options` parameter");let n=`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}`;this.id&&(n+=`/${encodeURIComponent(this.id)}`);const s=await this.getClient().post(n+"/query",{data:this._data,state:!0,...t});if(!this.id){this.id=s.channel.id,this.cid=s.channel.cid;const C=Uy(this.type,s.members.map(S=>{var E;return S.user_id||((E=S.user)==null?void 0:E.id)||""}));C&&C in this.getClient().activeChannels&&delete this.getClient().activeChannels[C],!(this.cid in this.getClient().activeChannels)&&this.getClient()._cacheEnabled()&&(this.getClient().activeChannels[this.cid]=this)}this.getClient()._addChannelConfig(s.channel);const{messageSet:o}=this._initializeState(s,a);o.pagination={...o.pagination,...PS({parentSet:o,messagePaginationOptions:t==null?void 0:t.messages,requestedPageSize:((v=t==null?void 0:t.messages)==null?void 0:v.limit)??UL,returnedPage:s.messages,logger:this.getClient().logger})},this.getClient().polls.hydratePollCache(s.messages,!0),s.draft&&this.messageComposer.initState({composition:s.draft});const l=[...s.channel.own_capabilities||[]].sort().join()!==[...this.data&&Array.isArray((b=this.data)==null?void 0:b.own_capabilities)?this.data.own_capabilities:[]].sort().join();return this.data=s.channel,this.offlineMode=!1,l&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:s.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[s],isLatestMessageSet:o.isLatest}}),(_=this.getClient().offlineDb)==null||_.executeQuerySafely(C=>{var S;return(S=C.upsertChannels)==null?void 0:S.call(C,{channels:[s],isLatestMessagesSet:o.isLatest})},{method:"upsertChannels"}),s}async banUser(t,a){return this._checkInitialized(),await this.getClient().banUser(t,{...a,type:this.type,id:this.id})}async hide(t=null,a=!1){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/hide`,{user_id:t,clear_history:a})}async show(t=null){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/show`,{user_id:t})}async unbanUser(t){return this._checkInitialized(),await this.getClient().unbanUser(t,{type:this.type,id:this.id})}async shadowBan(t,a){return this._checkInitialized(),await this.getClient().shadowBan(t,{...a,type:this.type,id:this.id})}async removeShadowBan(t){return this._checkInitialized(),await this.getClient().removeShadowBan(t,{type:this.type,id:this.id})}async vote(t,a,e){return await this.getClient().castPollVote(t,a,e)}async removeVote(t,a,e){return await this.getClient().removePollVote(t,a,e)}async createDraft(t){return await this.getClient().post(this._channelURL()+"/draft",{message:t})}async deleteDraft({parent_id:t}={}){return await this.getClient().delete(this._channelURL()+"/draft",{parent_id:t})}async getDraft({parent_id:t}={}){return await this.getClient().get(this._channelURL()+"/draft",{parent_id:t})}on(t,a){const e=a?t:"all",n=a||t;return e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Attaching listener for ${e} event on channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e].push(n),{unsubscribe:()=>{this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(s=>s!==n)}}}off(t,a){const e=a?t:"all",n=a||t;e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(s=>s!==n)}_handleChannelEvent(t){var n,s,o,l,u,h,m,p,v,b,_,C,S,E,I,M,A,k,O,U,q,Y,$,K,pe,ie,ne,se;const a=this;this._client.logger("info",`channel:_handleChannelEvent - Received event of type { ${t.type} } on ${this.cid}`,{tags:["event","channel"],channel:this});const e=a.state;switch(t.type){case"typing.start":(n=t.user)!=null&&n.id&&(e.typing[t.user.id]=t);break;case"typing.stop":(s=t.user)!=null&&s.id&&delete e.typing[t.user.id];break;case"message.read":(o=t.user)!=null&&o.id&&t.created_at&&(e.read[t.user.id]={last_read:new Date(t.created_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:0},((l=t.user)==null?void 0:l.id)===((u=this.getClient().user)==null?void 0:u.id)&&(e.unreadCount=0));break;case"user.watching.start":case"user.updated":(h=t.user)!=null&&h.id&&(e.watchers[t.user.id]=t.user);break;case"user.watching.stop":(m=t.user)!=null&&m.id&&delete e.watchers[t.user.id];break;case"message.deleted":t.message&&(this._extendEventWithOwnReactions(t),t.hard_delete?e.removeMessage(t.message):e.addMessageSorted(t.message,!1,!1),e.removeQuotedMessageReferences(t.message),t.message.pinned&&e.removePinnedMessage(t.message));break;case"message.new":if(t.message){const z=((p=t.user)==null?void 0:p.id)===((v=this.getClient().user)==null?void 0:v.id),D=t.message.parent_id&&!t.message.show_in_channel;if((this.state.isUpToDate||D)&&e.addMessageSorted(t.message,z),t.message.pinned&&e.addPinnedMessage(t.message),z||D)break;if((b=t.user)!=null&&b.id)for(const W in e.read)W===t.user.id?e.read[t.user.id]={last_read:new Date(t.created_at),user:t.user,unread_messages:0}:e.read[W].unread_messages+=1;this._countMessageAsUnread(t.message)&&(e.unreadCount=e.unreadCount+1)}break;case"message.updated":case"message.undeleted":t.message&&(this._extendEventWithOwnReactions(t),e.addMessageSorted(t.message,!1,!1),e._updateQuotedMessageReferences({message:t.message}),t.message.pinned?e.addPinnedMessage(t.message):e.removePinnedMessage(t.message));break;case"channel.truncated":if((_=t.channel)!=null&&_.truncated_at){const z=+new Date(t.channel.truncated_at);e.messageSets.forEach((D,H)=>{D.messages.forEach(({created_at:W,id:F})=>{z>+W&&e.removeMessage({id:F,messageSetIndex:H})})}),e.pinnedMessages.forEach(({id:D,created_at:H})=>{z>+H&&e.removePinnedMessage({id:D})}),e.unreadCount=this.countUnread(new Date(t.channel.truncated_at))}else e.clearMessages(),e.unreadCount=0;t.message&&(e.addMessageSorted(t.message),t.message.pinned&&e.addPinnedMessage(t.message));break;case"member.added":case"member.updated":{const z={...t.member};z.pinned_at===null&&delete z.pinned_at,z.archived_at===null&&delete z.archived_at,z!=null&&z.user&&(e.members={...e.members,[z.user.id]:z},(C=a.data)!=null&&C.member_count&&t.type==="member.added"&&(a.data.member_count+=1));const D=this.getClient().userID;typeof D=="string"&&typeof((S=z==null?void 0:z.user)==null?void 0:S.id)=="string"&&z.user.id===D&&(e.membership=z);break}case"member.removed":if((E=t.user)!=null&&E.id){const z={...e.members};delete z[t.user.id],e.members=z,(I=a.data)!=null&&I.member_count&&(a.data.member_count=Math.max(a.data.member_count-1,0))}break;case"notification.mark_unread":{if(!(((M=t.user)==null?void 0:M.id)===((A=this.getClient().user)==null?void 0:A.id)&&t.user))break;const D=t.unread_messages??0;e.read[t.user.id]={first_unread_message_id:t.first_unread_message_id,last_read:new Date(t.last_read_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:D},e.unreadCount=D;break}case"channel.updated":if(t.channel){((k=t.channel)==null?void 0:k.frozen)!==void 0&&t.channel.frozen!==((O=a.data)==null?void 0:O.frozen)&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}});const D={...t.channel,hidden:((U=t.channel)==null?void 0:U.hidden)??((q=a.data)==null?void 0:q.hidden),own_capabilities:((Y=t.channel)==null?void 0:Y.own_capabilities)??(($=a.data)==null?void 0:$.own_capabilities)};a.data=D}break;case"reaction.new":if(t.message&&t.reaction){const{message:z,reaction:D}=t;t.message=e.addReaction(D,z)}break;case"reaction.deleted":if(t.message&&t.reaction){const{message:z,reaction:D}=t;t.message=e.removeReaction(D,z)}break;case"reaction.updated":if(t.message&&t.reaction){const{message:z,reaction:D}=t;t.message=e.addReaction(D,z,!0)}break;case"channel.hidden":a.data={...a.data,hidden:!0},t.clear_history&&e.clearMessages();break;case"channel.visible":a.data={...a.data,hidden:!1},(K=this.getClient().offlineDb)==null||K.handleChannelVisibilityEvent({event:t});break;case"user.banned":if(!((pe=t.user)!=null&&pe.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!!t.shadow,banned:!t.shadow,user:{...((ie=e.members[t.user.id])==null?void 0:ie.user)||{},...t.user}};break;case"user.unbanned":if(!((ne=t.user)!=null&&ne.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!1,banned:!1,user:{...((se=e.members[t.user.id])==null?void 0:se.user)||{},...t.user}};break}t.watcher_count!==void 0&&(a.state.watcher_count=t.watcher_count)}_checkInitialized(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error(`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`)}_initializeState(t,a="latest"){const{state:e,user:n,userID:s}=this.getClient();if(t.members){this._hydrateMembers({members:t.members});for(const u of t.members)u.user&&e.updateUserReference(u.user,this.cid)}this.state.membership=t.membership||{};const o=t.messages||[];this.state.messages||this.state.initMessages();const{messageSet:l}=this.state.addMessagesSorted(o,!1,!0,!0,a);if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(t.pinned_messages||[]),t.pending_messages&&(this.state.pending_messages=t.pending_messages),t.watcher_count!==void 0&&(this.state.watcher_count=t.watcher_count),t.watchers)for(const u of t.watchers)u&&(e.updateUserReference(u,this.cid),this.state.watchers[u.id]=u);if(s!=null){const u=this.state.last_message_at||new Date;n&&(this.state.read[n.id]={user:n,last_read:u,unread_messages:0})}if(t.read)for(const u of t.read)this.state.read[u.user.id]={last_read:new Date(u.last_read),last_read_message_id:u.last_read_message_id,unread_messages:u.unread_messages??0,user:u.user},u.user.id===(n==null?void 0:n.id)&&(this.state.unreadCount=this.state.read[u.user.id].unread_messages);return{messageSet:l}}_extendEventWithOwnReactions(t){if(!t.message)return;const a=this.state.findMessage(t.message.id,t.message.parent_id);a&&(t.message.own_reactions=a.own_reactions)}_hydrateMembers({members:t,overrideCurrentState:a=!0}){const e=t.reduce((n,s)=>(s.user&&(n[s.user.id]=s),n),{});a?this.state.members=e:!a&&t.length&&(this.state.members={...this.state.members,...e})}_disconnect(){this._client.logger("info",`channel:disconnect() - Disconnecting the channel ${this.cid}`,{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}},iC=class{constructor({client:t}){this.client=t,this.users={},this.userChannelReferences={}}updateUsers(t){for(const a of t)this.updateUser(a)}updateUser(t){t!=null&&this.client._cacheEnabled()&&(this.users[t.id]=t)}updateUserReference(t,a){t==null||!this.client._cacheEnabled()||(this.updateUser(t),this.userChannelReferences[t.id]||(this.userChannelReferences[t.id]={}),this.userChannelReferences[t.id][a]=!0)}deleteAllChannelReference(t){for(const a in this.userChannelReferences)delete this.userChannelReferences[a][t]}},qo=null;typeof WebSocket<"u"?qo=WebSocket:typeof MozWebSocket<"u"?qo=MozWebSocket:typeof global<"u"?qo=global.WebSocket||global.MozWebSocket:typeof window<"u"?qo=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(qo=self.WebSocket||self.MozWebSocket);var GP=qo,ZP=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=Qo()}},Rc=async(t,a)=>{for(let n=0;n<3;n++){try{await qc.post(`https://chat-insights.getstream.io/insights/${t}`,a)}catch{await hi((n+1)*3e3);continue}break}};function $P(t,a){return{...a,...oE(t)}}function oE(t){var e;const{client:a}=t;return{ready_state:(e=t.ws)==null?void 0:e.readyState,url:t._buildUrl(),api_key:a.key,start_ts:a.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:a.getAuthType(),token:a.tokenManager.token,user_id:a.userID,user_details:a._user,device:a.options.device,client_id:t.connectionID,ws_details:t.ws,ws_consecutive_failures:a.insightMetrics.wsConsecutiveFailures,ws_total_failures:a.insightMetrics.wsTotalFailures,request_id:t.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:a.insightMetrics.instanceClientId}}function qP(t){return oE(t)}var QP=t=>t.code!==void 0,VP=t=>t.error!==void 0,XP=class{constructor({client:t}){this._buildUrl=()=>{const a=this.client._buildWSPayload(this.requestID),e=this.client.tokenManager.getToken(),n=this.client.options.wsUrlParams,s=new URLSearchParams(n);return s.set("json",a),s.set("api_key",this.client.key),s.set("authorization",`${e}`),s.set("stream-auth-type",this.client.getAuthType()),s.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${s.toString()}`},this.onlineStatusChanged=a=>{a.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1)):a.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=a=>{this.wsID===a&&this._log("onopen() - onopen callback",{wsID:a})},this.onmessage=(a,e)=>{var s,o;if(this.wsID!==a)return;this._log("onmessage() - onmessage callback",{event:e,wsID:a});const n=typeof e.data=="string"?JSON.parse(e.data):null;if(!this.isResolved&&n){if(this.isResolved=!0,n.error){(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(n,!1));return}(o=this.resolvePromise)==null||o.call(this,n),this._setHealth(!0)}this.lastEvent=new Date,n&&n.type==="health.check"&&this.scheduleNextPing(),this.client.handleEvent(e),this.scheduleConnectionCheck()},this.onclose=(a,e)=>{var n,s;if(this.wsID===a)if(this._log("onclose() - onclose callback - "+e.code,{event:e,wsID:a}),e.code===Tc.WS_CLOSED_SUCCESS){const o=new Error(`WS connection reject with error ${e.reason}`);o.reason=e.reason,o.code=e.code,o.wasClean=e.wasClean,o.target=e.target,(n=this.rejectPromise)==null||n.call(this,o),this._log(`onclose() - WS connection reject with error ${e.reason}`,{event:e})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(e)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:e}),this._reconnect()},this.onerror=(a,e)=>{var n;this.wsID===a&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(n=this.rejectPromise)==null||n.call(this,this._errorFromWSEvent(e)),this._log("onerror() - WS connection resulted into error",{event:e}),this._reconnect())},this._setHealth=a=>{if(a!==this.isHealthy){if(this.isHealthy=a,this.isHealthy){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(a,e=!0)=>{let n,s,o;QP(a)&&(n=a.code,s="unknown",o=a.reason),VP(a)&&(n=a.error.code,s=a.error.StatusCode,o=a.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${n}`,{event:a},"warn");const l=new Error(`WS failed with code ${n} and reason - ${o}`);return l.code=n,l.StatusCode=s,l.isWSFailure=e,l},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((a,e)=>{this.resolvePromise=a,this.rejectPromise=e})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var e;const a=[{type:"health.check",client_id:this.client.clientID}];try{(e=this.ws)==null||e.send(JSON.stringify(a))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const a=new Date;this.lastEvent&&a.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,TS(this.onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"connection:"+t,{tags:["connection"],...a})}setClient(t){this.client=t}async connect(t=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const a=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${a}`)}catch(a){this.isHealthy=!1,this.consecutiveFailures+=1;const e=a;if(e.code===Tc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!e.isWSFailure)throw new Error(JSON.stringify({code:e.code,StatusCode:e.StatusCode,message:e.message,isWSFailure:e.isWSFailure}))}return await this._waitForHealthy(t)}_waitForHealthy(t=15e3){return Promise.race([(async()=>{for(let e=0;e<=t;e+=50)try{return await this.connectionOpen}catch(n){if(e===t)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}));await hi(50)}})(),(async()=>{throw await hi(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),NS(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let a;const{ws:e}=this;return e&&e.close&&e.readyState===e.OPEN?(a=new Promise(n=>{const s=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),n()};e.onclose=s,setTimeout(s,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),e.close(Tc.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),a=Promise.resolve()),delete this.ws,a}async _connect(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=Qo(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let t=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this._setupConnectionPromise();const a=this._buildUrl();this._log(`_connect() - Connecting to ${a}`,{wsURL:a,requestID:this.requestID}),this.ws=new GP(a),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const e=await this.connectionOpen;if(this.isConnecting=!1,e)return this.connectionID=e.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Rc("ws_success_after_failure",qP(this)),this.client.insightMetrics.wsConsecutiveFailures=0),e}catch(a){if(this.isConnecting=!1,this._log("_connect() - Error - ",a),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const e=$P(this,tO(a));Rc==null||Rc("ws_fatal",e)}throw a}}async _reconnect(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let a=t.interval;if(a||(a=bf(this.consecutiveFailures)),await hi(a),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),await this.client.recoverState(),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(e){if(this.isHealthy=!1,this.consecutiveFailures+=1,e.code===Tc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});e.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var t,a;this.wsID+=1;try{(t=this==null?void 0:this.ws)==null||t.removeAllListeners(),(a=this==null?void 0:this.ws)==null||a.close()}catch{}}},Xd=ou(uk()),oC=ou(dk());function lE(t,a,e={},n={}){if(typeof a!="string")throw new TypeError("userId should be a string");const s={user_id:a,...e};if(Xd.default==null||Xd.default.sign==null)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const o=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return s.iat&&(o.noTimestamp=!1),Xd.default.sign(s,t,o)}function lC(t,a={}){const e={server:!0},n=Object.assign({algorithm:"HS256",noTimestamp:!0},a);return Xd.default.sign(e,t,n)}function KP(t){const a=t.split(".");if(a.length!==3)return"";const e=a[1],n=pk(e);return JSON.parse(n).user_id}function JP(t){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",mk(JSON.stringify({user_id:t})),"devtoken"].join(".")}function e5(t,a,e){const n=Buffer.from(a,"utf8"),s=oC.default.createHmac("sha256",n).update(t).digest("hex");try{return oC.default.timingSafeEqual(Buffer.from(s),Buffer.from(e))}catch{return!1}}var t5=class{constructor(t){this.setTokenOrProvider=async(a,e)=>{this.validateToken(a,e),this.user=e,Og(a)&&(this.tokenProvider=a,this.type="provider"),typeof a=="string"&&(this.token=a,this.type="static"),!a&&this.user&&this.secret&&(this.token=lE(this.secret,e.id,{},{}),this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(a,e)=>{if(!(e&&e.anon&&!a)){if(!this.secret&&!a)throw new Error("User token can not be empty");if(a&&typeof a!="string"&&!Og(a))throw new Error("user token should either be a string or a function");if(typeof a=="string"){if(e.anon&&a==="")return;const n=KP(a);if(a!=null&&(n==null||n===""||n!==e.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(a,e)=>{if(this.type==="static")return a(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(n){return e(new Error(`Call to tokenProvider failed with message: ${n}`))}a(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&this.user.anon&&!this.token)return this.token;if(this.secret)return lC(this.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,t&&(this.secret=t),this.type="static",this.secret&&(this.token=lC(this.secret))}},n5={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function a5(t){return t.code!==void 0}function cC(t){if(!t.code)return!1;const a=n5[`${t.code}`];return a?a.retryable:!1}function r5(t){return t.code===46}function s5(t){if(typeof t.isWSFailure=="boolean")return t.isWSFailure;try{return JSON.parse(t.message).isWSFailure}catch{return!1}}function i5(t){return!t.status||t.status<200||300<=t.status}var o5=class{constructor({client:t}){this._onlineStatusChanged=a=>{var e;if(this._log(`_onlineStatusChanged() - ${a.type}`),a.type==="offline"){this._setState("CLOSED"),(e=this.cancelToken)==null||e.cancel("disconnect() is called"),this.cancelToken=void 0;return}a.type==="online"&&this.state==="CLOSED"&&this.connect(!0)},this._req=async(a,e,n)=>{var s;!this.cancelToken&&!a.close&&(this.cancelToken=qc.CancelToken.source());try{const o=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...e,cancelToken:(s=this.cancelToken)==null?void 0:s.token},params:a});return this.consecutiveFailures=0,o}catch(o){if(this.consecutiveFailures+=1,n&&cC(o))return this._log("_req() - Retryable error, retrying request"),await hi(bf(this.consecutiveFailures)),this._req(a,e,n);throw o}},this._poll=async()=>{var a;for(;this.state==="CONNECTED";)try{const e=await this._req({},{timeout:3e4},!0);if((a=e.events)!=null&&a.length)for(let n=0;n<e.events.length;n++)this.client.dispatchEvent(e.events[n])}catch(e){if(qc.isCancel(e)){this._log("_poll() - axios canceled request");return}if(r5(e)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState("DISCONNECTED"),this.connect(!0);return}if(a5(e)&&!cC(e)){this._setState("CLOSED");return}await hi(bf(this.consecutiveFailures))}},this.connect=async(a=!1)=>{if(this.state==="CONNECTING"){this._log("connect() - connecting already in progress",{reconnect:a},"warn");return}if(this.state==="CONNECTED"){this._log("connect() - already connected and polling",{reconnect:a},"warn");return}this._setState("CONNECTING"),this.connectionID=void 0;try{const{event:e}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},a);return this._setState("CONNECTED"),this.connectionID=e.connection_id,this.client.dispatchEvent(e),this._poll(),a&&this.client.recoverState(),e}catch(e){throw this._setState("CLOSED"),e}},this.isHealthy=()=>!!this.connectionID&&this.state==="CONNECTED",this.disconnect=async(a=2e3)=>{var n;NS(this._onlineStatusChanged),this._setState("DISCONNECTED"),(n=this.cancelToken)==null||n.cancel("disconnect() is called"),this.cancelToken=void 0;const e=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:e},{timeout:a},!1),this._log("disconnect() - Closed connectionID")}catch(s){this._log("disconnect() - Failed",{err:s},"error")}},this.client=t,this.state="INIT",this.consecutiveFailures=0,TS(this._onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"WSConnectionFallback:"+t,{tags:["connection_fallback","connection"],...a})}_setState(t){this._log(`_setState() - ${t}`),this.state==="CONNECTING"&&t==="CONNECTED"&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t==="CLOSED"||t==="DISCONNECTED")&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}},uC=class{constructor(t,a,e,n){this.client=t,this.type=a,this.id=e,this.data=n}create(){var a,e,n,s,o;const t={name:(a=this.data)==null?void 0:a.name,filter:(e=this.data)==null?void 0:e.filter,description:(n=this.data)==null?void 0:n.description,all_sender_channels:(s=this.data)==null?void 0:s.all_sender_channels,all_users:(o=this.data)==null?void 0:o.all_users};return this.client.createSegment(this.type,this.id,t)}verifySegmentId(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}get(){return this.verifySegmentId(),this.client.getSegment(this.id)}update(t){return this.verifySegmentId(),this.client.updateSegment(this.id,t)}addTargets(t){return this.verifySegmentId(),this.client.addSegmentTargets(this.id,t)}removeTargets(t){return this.verifySegmentId(),this.client.removeSegmentTargets(this.id,t)}delete(){return this.verifySegmentId(),this.client.deleteSegment(this.id)}targetExists(t){return this.verifySegmentId(),this.client.segmentTargetExists(this.id,t)}queryTargets(t={},a=[],e={}){return this.verifySegmentId(),this.client.querySegmentTargets(this.id,t,a,e)}},Rd={user:"stream:user",message:"stream:chat:v1:message",userprofile:"stream:v1:user_profile"},l5=class{constructor(t){this.client=t}flagUser(t,a,e={}){return this.flag(Rd.user,t,"",a,e)}flagMessage(t,a,e={}){return this.flag(Rd.message,t,"",a,e)}async flag(t,a,e,n,s={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/flag",{entity_type:t,entity_id:a,entity_creator_id:e,reason:n,...s})}async muteUser(t,a={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/mute",{target_ids:[t],...a})}async unmuteUser(t,a){return await this.client.post(this.client.baseURL+"/api/v2/moderation/unmute",{target_ids:[t],...a})}async getUserModerationReport(t,a={}){return await this.client.get(this.client.baseURL+"/api/v2/moderation/user_report",{user_id:t,...a})}async queryReviewQueue(t={},a=[],e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/review_queue",{filter:t,sort:Zn(a),...e})}async upsertConfig(t){return await this.client.post(this.client.baseURL+"/api/v2/moderation/config",t)}async getConfig(t,a){return await this.client.get(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async deleteConfig(t,a){return await this.client.delete(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async queryConfigs(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/configs",{filter:t,sort:a,...e})}async submitAction(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/submit_action",{action_type:t,item_id:a,...e})}async check(t,a,e,n,s,o){return await this.client.post(this.client.baseURL+"/api/v2/moderation/check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,config_key:s,options:o})}async checkUserProfile(t,a){if(!a.username&&!a.image)throw new Error("Either username or image must be provided");const e={};return a.username&&(e.texts=[a.username]),a.image&&(e.images=[a.image]),await this.check(Rd.userprofile,t,t,e,"user_profile:default",{force_sync:!0,test_mode:!0})}async addCustomFlags(t,a,e,n,s){return await this.client.post(this.client.baseURL+"/api/v2/moderation/custom_check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,flags:s})}async addCustomMessageFlags(t,a){return await this.addCustomFlags(Rd.message,t,"",{},a)}},c5=1e3,dC=25,fC={active:!1,isThreadOrderStale:!1,threads:[],unreadThreadCount:0,unseenThreadIds:[],lastConnectionDropAt:null,pagination:{isLoading:!1,isLoadingNext:!1,nextCursor:null},ready:!1},u5=class extends uu{constructor({client:t}){super(),this.resetState=()=>{this.state.next(fC)},this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeUnreadThreadsCountChange()),this.addUnsubscribeFunction(this.subscribeManageThreadSubscriptions()),this.addUnsubscribeFunction(this.subscribeReloadOnActivation()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRecoverAfterConnectionDrop()),this.addUnsubscribeFunction(this.subscribeChannelDeleted()))},this.subscribeUnreadThreadsCountChange=()=>{const{unread_threads:a=0}=this.client.user??{};this.state.partialNext({unreadThreadCount:a});const e=["health.check","notification.mark_read","notification.thread_message_new","notification.channel_deleted"].map(n=>this.client.on(n,s=>{const{unread_threads:o}=s.me??s;typeof o=="number"&&this.state.partialNext({unreadThreadCount:o})}).unsubscribe);return()=>e.forEach(n=>n())},this.subscribeChannelDeleted=()=>this.client.on("notification.channel_deleted",a=>{const{cid:e}=a,{threads:n}=this.state.getLatestValue(),s=n.filter(o=>o.channel.cid!==e);this.state.partialNext({threads:s})}).unsubscribe,this.subscribeManageThreadSubscriptions=()=>this.state.subscribeWithSelector(a=>({threads:a.threads}),({threads:a},e)=>{const{threads:n=[]}=e??{},s=n.filter(o=>o!==this.threadsById[o.id]);a.forEach(o=>o.registerSubscriptions()),s.forEach(o=>o.unregisterSubscriptions())}),this.subscribeReloadOnActivation=()=>this.state.subscribeWithSelector(a=>({active:a.active}),({active:a})=>{a&&this.reload()}),this.subscribeNewReplies=()=>this.client.on("notification.thread_message_new",a=>{var o;const e=(o=a.message)==null?void 0:o.parent_id;if(!e)return;const{unseenThreadIds:n,ready:s}=this.state.getLatestValue();s&&(this.threadsById[e]?this.state.partialNext({isThreadOrderStale:!0}):n.includes(e)||this.state.partialNext({unseenThreadIds:n.concat(e)}))}).unsubscribe,this.subscribeRecoverAfterConnectionDrop=()=>{const a=this.client.on("connection.changed",s=>{s.online===!1&&this.state.next(o=>o.lastConnectionDropAt?o:{...o,lastConnectionDropAt:new Date})}).unsubscribe,e=OS(()=>{const{lastConnectionDropAt:s}=this.state.getLatestValue();s&&this.reload({force:!0})},c5,{trailing:!0}),n=this.client.on("connection.recovered",e).unsubscribe;return()=>{a(),n()}},this.unregisterSubscriptions=()=>(this.state.getLatestValue().threads.forEach(a=>a.unregisterSubscriptions()),super.unregisterSubscriptions()),this.reload=async({force:a=!1}={})=>{const{threads:e,unseenThreadIds:n,isThreadOrderStale:s,pagination:o,ready:l}=this.state.getLatestValue();if(o.isLoading||!a&&l&&!n.length&&!s)return;const u=e.length+n.length;try{this.state.next(p=>({...p,pagination:{...p.pagination,isLoading:!0}}));const h=await this.queryThreads({limit:Math.min(u,dC)||dC}),m=[];for(const p of h.threads){const v=this.threadsById[p.id];v?(m.push(v),v.hasStaleState&&v.hydrateState(p)):m.push(p)}this.state.next(p=>({...p,threads:m,unseenThreadIds:[],isThreadOrderStale:!1,pagination:{...p.pagination,isLoading:!1,nextCursor:h.next??null},ready:!0}))}catch(h){this.client.logger("error",h.message),this.state.next(m=>({...m,pagination:{...m.pagination,isLoading:!1}}))}},this.queryThreads=(a={})=>this.client.queryThreads({limit:25,participant_limit:10,reply_limit:10,watch:!0,...a}),this.loadNextPage=async(a={})=>{const{pagination:e}=this.state.getLatestValue();if(!(e.isLoadingNext||!e.nextCursor))try{this.state.partialNext({pagination:{...e,isLoadingNext:!0}});const n=await this.queryThreads({...a,next:e.nextCursor});this.state.next(s=>({...s,threads:n.threads.length?s.threads.concat(n.threads):s.threads,pagination:{...s.pagination,nextCursor:n.next??null,isLoadingNext:!1}}))}catch(n){this.client.logger("error",n.message),this.state.next(s=>({...s,pagination:{...s.pagination,isLoadingNext:!1}}))}},this.client=t,this.state=new sa(fC),this.threadsByIdGetterCache={threads:[],threadsById:{}}}get threadsById(){const{threads:t}=this.state.getLatestValue();if(t===this.threadsByIdGetterCache.threads)return this.threadsByIdGetterCache.threadsById;const a=t.reduce((e,n)=>(e[n.id]=n,e),{});return this.threadsByIdGetterCache.threads=t,this.threadsByIdGetterCache.threadsById=a,a}},d5=t=>t.type==="poll.updated",f5=t=>t.type==="poll.closed",h5=t=>t.type==="poll.vote_casted",m5=t=>t.type==="poll.vote_changed",p5=t=>t.type==="poll.vote_removed",Hi=t=>!!(t!=null&&t.answer_text),hC=class{constructor({client:t,poll:a}){this.getInitialStateFromPollResponse=e=>{const{own_votes:n,id:s,...o}=e,{ownAnswer:l,ownVotes:u}=(n==null?void 0:n.reduce((h,m)=>(Hi(m)?h.ownAnswer=m:h.ownVotes.push(m),h),{ownVotes:[]}))??{ownVotes:[]};return{...o,lastActivityAt:new Date,maxVotedOptionIds:Ec(o.vote_counts_by_option),ownAnswer:l,ownVotesByOptionId:g5(u)}},this.upsertOfflineDb=()=>{var e;(e=this.client.offlineDb)==null||e.executeQuerySafely(n=>n.upsertPoll({poll:v5(this)}),{method:"upsertPoll"})},this.reinitializeState=e=>{this.state.partialNext(this.getInitialStateFromPollResponse(e))},this.handlePollUpdated=e=>{var o;if((o=e.poll)!=null&&o.id&&e.poll.id!==this.id||!d5(e))return;const{id:n,...s}=y5(e.poll);this.state.partialNext({...s,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb()},this.handlePollClosed=e=>{var n;(n=e.poll)!=null&&n.id&&e.poll.id!==this.id||f5(e)&&(this.state.partialNext({is_closed:!0,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb())},this.handleVoteCasted=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!h5(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer;const u=n.ownVotesByOptionId;let h=n.maxVotedOptionIds;s&&(Hi(e.poll_vote)?l=e.poll_vote:e.poll_vote.option_id&&(u[e.poll_vote.option_id]=e.poll_vote)),Hi(e.poll_vote)?o=[e.poll_vote,...o]:h=Ec(e.poll.vote_counts_by_option);const m=sg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:u,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.handleVoteChanged=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!m5(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer,u=n.ownVotesByOptionId,h=n.maxVotedOptionIds;s?Hi(e.poll_vote)?(o=[e.poll_vote,...o.filter(v=>v.id!==e.poll_vote.id)],l=e.poll_vote):e.poll_vote.option_id&&(e.poll.enforce_unique_vote?u={[e.poll_vote.option_id]:e.poll_vote}:(u=Object.entries(u).reduce((v,[b,_])=>(b!==e.poll_vote.option_id&&_.id===e.poll_vote.id||(v[b]=_),v),{}),u[e.poll_vote.option_id]=e.poll_vote),(l==null?void 0:l.id)===e.poll_vote.id&&(l=void 0),h=Ec(e.poll.vote_counts_by_option)):Hi(e.poll_vote)?o=[e.poll_vote,...o]:h=Ec(e.poll.vote_counts_by_option);const m=sg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:u,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.handleVoteRemoved=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!p5(e))return;const n=this.data,s=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer;const u={...n.ownVotesByOptionId};let h=n.maxVotedOptionIds;Hi(e.poll_vote)?(o=o.filter(v=>v.id!==e.poll_vote.id),s&&(l=void 0)):(h=Ec(e.poll.vote_counts_by_option),s&&e.poll_vote.option_id&&delete u[e.poll_vote.option_id]);const m=sg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:u,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.query=async e=>{const{poll:n}=await this.client.getPoll(e);return this.state.partialNext({...n,lastActivityAt:new Date}),n},this.update=async e=>await this.client.updatePoll({...e,id:this.id}),this.partialUpdate=async e=>await this.client.partialUpdatePoll(this.id,e),this.close=async()=>await this.client.closePoll(this.id),this.delete=async()=>await this.client.deletePoll(this.id),this.createOption=async e=>await this.client.createPollOption(this.id,e),this.updateOption=async e=>await this.client.updatePollOption(this.id,e),this.deleteOption=async e=>await this.client.deletePollOption(this.id,e),this.castVote=async(e,n)=>{const{max_votes_allowed:s,ownVotesByOptionId:o}=this.data;if(s&&s===Object.keys(o).length){let u=Object.values(o)[0];Object.values(o).slice(1).forEach(h=>{(!(u!=null&&u.created_at)||new Date(h.created_at)<new Date(u.created_at))&&(u=h)}),u!=null&&u.id&&await this.removeVote(u.id,n)}return await this.client.castPollVote(n,this.id,{option_id:e})},this.removeVote=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.addAnswer=async(e,n)=>await this.client.addPollAnswer(n,this.id,e),this.removeAnswer=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.queryAnswers=async e=>await this.client.queryPollAnswers(this.id,e.filter,e.sort,e.options),this.queryOptionVotes=async e=>await this.client.queryPollVotes(this.id,e.filter,e.sort,e.options),this.client=t,this.id=a.id,this.state=new sa(this.getInitialStateFromPollResponse(a))}get data(){return this.state.getLatestValue()}};function Ec(t){let a=0,e=[];for(const[n,s]of Object.entries(t??{}))s>a?(e=[n],a=s):s===a&&e.push(n);return e}function g5(t){return t?t.reduce((a,e)=>(Hi(e)||!e.option_id||(a[e.option_id]=e),a),{}):{}}function y5(t){return{allow_answers:t.allow_answers,allow_user_suggested_options:t.allow_user_suggested_options,description:t.description,enforce_unique_vote:t.enforce_unique_vote,id:t.id,is_closed:t.is_closed,max_votes_allowed:t.max_votes_allowed,name:t.name,options:t.options,voting_visibility:t.voting_visibility}}function v5(t){const{lastActivityAt:a,maxVotedOptionIds:e,ownVotesByOptionId:n,ownAnswer:s,...o}=t.data,l=[...Object.values(n),...s?[s]:[]].sort((u,h)=>Date.parse(u.created_at)-Date.parse(h.created_at));return{...o,own_votes:l,id:t.id}}function sg(t){return{answers_count:t.answers_count,latest_votes_by_option:t.latest_votes_by_option,vote_count:t.vote_count,vote_counts_by_option:t.vote_counts_by_option}}var b5=class extends uu{constructor({client:t}){super(),this.pollCache=new Map,this.fromState=a=>this.pollCache.get(a),this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeMessageNew()),this.addUnsubscribeFunction(this.subscribePollUpdated()),this.addUnsubscribeFunction(this.subscribePollClosed()),this.addUnsubscribeFunction(this.subscribeVoteCasted()),this.addUnsubscribeFunction(this.subscribeVoteChanged()),this.addUnsubscribeFunction(this.subscribeVoteRemoved()))},this.createPoll=async a=>{const{poll:e}=await this.client.createPoll(a);return new hC({client:this.client,poll:e})},this.getPoll=async a=>{const e=this.fromState(a);if(e)return this.client.getPoll(a).then(({poll:s})=>this.setOrOverwriteInCache(s,!0)),e;const{poll:n}=await this.client.getPoll(a);return this.setOrOverwriteInCache(n),this.fromState(a)},this.queryPolls=async(a,e=[],n={})=>{const{polls:s,next:o}=await this.client.queryPolls(a,e,n);return{polls:s.map(u=>(this.setOrOverwriteInCache(u,!0),this.fromState(u.id))),next:o}},this.hydratePollCache=(a,e)=>{for(const n of a){if(!n.poll)continue;const s=n.poll;this.setOrOverwriteInCache(s,e)}},this.setOrOverwriteInCache=(a,e)=>{if(!this.client._cacheEnabled())return;const n=this.fromState(a.id);if(n)e&&n.reinitializeState(a);else{const s=new hC({client:this.client,poll:a});this.pollCache.set(s.id,s)}},this.subscribePollUpdated=()=>this.client.on("poll.updated",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollUpdated(a))}).unsubscribe,this.subscribePollClosed=()=>this.client.on("poll.closed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollClosed(a))}).unsubscribe,this.subscribeVoteCasted=()=>this.client.on("poll.vote_casted",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteCasted(a))}).unsubscribe,this.subscribeVoteChanged=()=>this.client.on("poll.vote_changed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteChanged(a))}).unsubscribe,this.subscribeVoteRemoved=()=>this.client.on("poll.vote_removed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteRemoved(a))}).unsubscribe,this.subscribeMessageNew=()=>this.client.on("message.new",a=>{const{message:e}=a;if(e){const n=Ta(e);this.hydratePollCache([n])}}).unsubscribe,this.client=t}get data(){return this.pollCache}},mC={"channel.deleted":"channelDeletedHandler","channel.hidden":"channelHiddenHandler","channel.truncated":"channelTruncatedHandler","channel.updated":"channelUpdatedHandler","channel.visible":"channelVisibleHandler","message.new":"newMessageHandler","member.updated":"memberUpdatedHandler","notification.added_to_channel":"notificationAddedToChannelHandler","notification.message_new":"notificationNewMessageHandler","notification.removed_from_channel":"notificationRemovedFromChannelHandler"},w5={abortInFlightQuery:!1,allowNotLoadedChannelPromotionForEvent:{"channel.visible":!0,"message.new":!0,"notification.added_to_channel":!0,"notification.message_new":!0},lockChannelOrder:!1},ig={limit:10,offset:0},C5=class extends uu{constructor({client:t,eventHandlerOverrides:a={},options:e={}}){super(),this.eventHandlers=new Map,this.eventHandlerOverrides=new Map,this.options={},this.stateOptions={},this.setChannels=n=>{var u;this.state.next(h=>{const{channels:m}=h,p=FS(n)?n(m):n;return m===p?h:{...h,channels:p}});const{channels:s,pagination:{filters:o,sort:l}}=this.state.getLatestValue();(u=this.client.offlineDb)==null||u.executeQuerySafely(h=>h.upsertCidsForQuery({cids:s.map(m=>m.cid),filters:o,sort:l}),{method:"upsertCidsForQuery"})},this.setEventHandlerOverrides=(n={})=>{const s=Object.entries(n).reduce((o,[l,u])=>(u&&(o[l]=u),o),{});this.eventHandlerOverrides=new Map(Object.entries(s))},this.setOptions=(n={})=>{this.options={...w5,...n}},this.executeChannelsQuery=async(n,s=0)=>{var v;const{filters:o,sort:l,options:u,stateOptions:h}=n,{offset:m,limit:p}={...ig,...u};try{const b=await this.client.queryChannels(o,l,u,h),_=m+((b==null?void 0:b.length)??0),C={...u,offset:_},{pagination:S}=this.state.getLatestValue();this.state.partialNext({channels:b,pagination:{...S,hasNext:((b==null?void 0:b.length)??0)>=p,isLoading:!1,options:C},initialized:!0,error:void 0}),(v=this.client.offlineDb)==null||v.executeQuerySafely(E=>E.upsertCidsForQuery({cids:b.map(I=>I.cid),filters:S.filters,sort:S.sort}),{method:"upsertCidsForQuery"})}catch(b){if(s>=WL){console.warn(b);const _=new Error(`Maximum number of retries reached in queryChannels. Last error message is: ${b}`);this.state.partialNext({error:_});return}return await hi(GL),this.executeChannelsQuery(n,s+1)}},this.queryChannels=async(n,s=[],o={},l={})=>{var v,b;const{pagination:{isLoading:u,filters:h},initialized:m}=this.state.getLatestValue();if(u&&!this.options.abortInFlightQuery&&JSON.stringify(h)===JSON.stringify(n))return;const p={filters:n,sort:s,options:o,stateOptions:l};try{if(this.stateOptions=l,this.state.next(_=>({..._,pagination:{..._.pagination,isLoading:!0,isLoadingNext:!1,filters:n,sort:s,options:o},error:void 0})),(v=this.client.offlineDb)!=null&&v.getChannelsForQuery&&((b=this.client.user)!=null&&b.id)){if(!m){const _=await this.client.offlineDb.getChannelsForQuery({userId:this.client.user.id,filters:n,sort:s});if(_){const C=this.client.hydrateActiveChannels(_,{offlineMode:!0,skipInitialization:[]});this.state.partialNext({channels:C})}}if(!this.client.offlineDb.syncManager.syncStatus){this.client.offlineDb.syncManager.scheduleSyncStatusChangeCallback(this.id,async()=>{await this.executeChannelsQuery(p)});return}}await this.executeChannelsQuery(p)}catch(_){throw this.client.logger("error",_.message),this.state.next(C=>({...C,pagination:{...C.pagination,isLoading:!1}})),_}},this.loadNext=async()=>{const{pagination:n,initialized:s}=this.state.getLatestValue(),{filters:o,sort:l,options:u,isLoadingNext:h,hasNext:m}=n;if(!(!s||h||!m))try{const{offset:p,limit:v}={...ig,...u};this.state.partialNext({pagination:{...n,isLoading:!1,isLoadingNext:!0}});const b=await this.client.queryChannels(o,l,u,this.stateOptions),{channels:_}=this.state.getLatestValue(),C=p+((b==null?void 0:b.length)??0),S={...u,offset:C};this.state.partialNext({channels:iO([..._||[],...b],"cid"),pagination:{...n,hasNext:((b==null?void 0:b.length)??0)>=v,isLoading:!1,isLoadingNext:!1,options:S}})}catch(p){throw this.client.logger("error",p.message),this.state.next(v=>({...v,pagination:{...v.pagination,isLoadingNext:!1}})),p}},this.notificationAddedToChannelHandler=async n=>{var v;const{id:s,type:o,members:l}=(n==null?void 0:n.channel)??{};if(!o||!((v=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&v["notification.added_to_channel"]))return;const u=await Vp({client:this.client,id:s,members:l==null?void 0:l.reduce((b,{user:_,user_id:C})=>{const S=C||(_==null?void 0:_.id);return S&&b.push(S),b},[]),type:o}),{pagination:h,channels:m}=this.state.getLatestValue();if(!m)return;const{sort:p}=h??{};this.setChannels(Md({channels:m,channelToMove:u,sort:p}))},this.channelDeletedHandler=n=>{const{channels:s}=this.state.getLatestValue();if(!s)return;const o=[...s],l=o.findIndex(u=>{var h;return u.cid===(n.cid||((h=n.channel)==null?void 0:h.cid))});l<0||(o.splice(l,1),this.setChannels(o))},this.channelHiddenHandler=this.channelDeletedHandler,this.newMessageHandler=n=>{var I;const{pagination:s,channels:o}=this.state.getLatestValue();if(!o)return;const{filters:l,sort:u}=s??{},h=n.channel_type,m=n.channel_id;if(!h||!m)return;const p=this.client.channel(h,m),v=o.indexOf(p),b=v>=0,_=wf(p),C=Id(p),S=Dd(l),E=Bg(u);S&&C&&!l.archived||S&&!C&&l.archived||E&&_||this.options.lockChannelOrder||!b&&!((I=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&I["message.new"])||this.setChannels(Md({channels:o,channelToMove:p,channelToMoveIndexWithinChannels:v,sort:u}))},this.notificationNewMessageHandler=async n=>{var _;const{id:s,type:o}=(n==null?void 0:n.channel)??{};if(!s||!o)return;const l=await Vp({client:this.client,id:s,type:o}),{channels:u,pagination:h}=this.state.getLatestValue(),{filters:m,sort:p}=h??{},v=Dd(m),b=Id(l);!u||v&&b&&!m.archived||v&&!b&&m.archived||!((_=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&_["notification.message_new"])||this.setChannels(Md({channels:u,channelToMove:l,sort:p}))},this.channelVisibleHandler=async n=>{var _;const{channel_type:s,channel_id:o}=n;if(!s||!o)return;const l=await Vp({client:this.client,id:n.channel_id,type:n.channel_type}),{channels:u,pagination:h}=this.state.getLatestValue(),{sort:m,filters:p}=h??{},v=Dd(p),b=Id(l);!u||v&&b&&!p.archived||v&&!b&&p.archived||!((_=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&_["channel.visible"])||this.setChannels(Md({channels:u,channelToMove:l,sort:m}))},this.notificationRemovedFromChannelHandler=this.channelDeletedHandler,this.memberUpdatedHandler=n=>{var O;const{pagination:s,channels:o}=this.state.getLatestValue(),{filters:l,sort:u}=s;if(!((O=n.member)!=null&&O.user)||n.member.user.id!==this.client.userID||!n.channel_type||!n.channel_id)return;const h=n.channel_type,m=n.channel_id,p=Bg(u),v=Dd(l),b=BS({atIndex:0,sort:u,targetKey:"pinned_at"});if(!o||!p&&!v||this.options.lockChannelOrder)return;const _=this.client.channel(h,m),C=o.indexOf(_),S=C>=0,E=wf(_),I=Id(_),M=[...o];if(S&&M.splice(C,1),v&&!I&&(l!=null&&l.archived)||v&&I&&!(l!=null&&l.archived)){this.setChannels(M);return}let A=null;(b===1||b===-1&&!E)&&(A=US({channels:M}));const k=typeof A=="number"?A+1:0;o[k]!==_&&(M.splice(k,0,_),this.setChannels(M))},this.subscriptionOrOverride=n=>{const s=mC[n.type],o=this.eventHandlers.get(s),l=this.eventHandlerOverrides.get(s);if(l&&typeof l=="function"){l(this.setChannels,n);return}o&&typeof o=="function"&&o(n)},this.registerSubscriptions=()=>{if(!this.hasSubscriptions)for(const n of Object.keys(mC))this.addUnsubscribeFunction(this.client.on(n,this.subscriptionOrOverride).unsubscribe)},this.id=`channel-manager-${ar()}`,this.client=t,this.state=new sa({channels:[],pagination:{isLoading:!1,isLoadingNext:!1,hasNext:!1,filters:{},sort:{},options:ig},initialized:!1,error:void 0}),this.setEventHandlerOverrides(a),this.setOptions(e),this.eventHandlers=new Map(Object.entries({channelDeletedHandler:this.channelDeletedHandler,channelHiddenHandler:this.channelHiddenHandler,channelVisibleHandler:this.channelVisibleHandler,memberUpdatedHandler:this.memberUpdatedHandler,newMessageHandler:this.newMessageHandler,notificationAddedToChannelHandler:this.notificationAddedToChannelHandler,notificationNewMessageHandler:this.notificationNewMessageHandler,notificationRemovedFromChannelHandler:this.notificationRemovedFromChannelHandler}))}},_5={error:1e4,warning:5e3,info:3e3,success:3e3},S5=class{constructor(t={}){this.timeouts=new Map,this.store=new sa({notifications:[]}),this.config={...t,durations:t.durations||_5}}get notifications(){return this.store.getLatestValue().notifications}get warning(){return this.notifications.filter(t=>t.severity==="warning")}get error(){return this.notifications.filter(t=>t.severity==="error")}get info(){return this.notifications.filter(t=>t.severity==="info")}get success(){return this.notifications.filter(t=>t.severity==="success")}add({message:t,origin:a,options:e={}}){const n=ar(),s=Date.now(),o={id:n,message:t,origin:a,severity:e.severity||"info",createdAt:s,expiresAt:e.duration?s+e.duration:void 0,autoClose:e.autoClose??!0,actions:e.actions,metadata:e.metadata};if(this.store.partialNext({notifications:[...this.store.getLatestValue().notifications,o]}),o.autoClose&&o.expiresAt){const l=setTimeout(()=>{this.remove(n)},e.duration||this.config.durations[o.severity]);this.timeouts.set(n,l)}return n}addError({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"error"}})}addWarning({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"warning"}})}addInfo({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"info"}})}addSuccess({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"success"}})}remove(t){const a=this.timeouts.get(t);a&&(clearTimeout(a),this.timeouts.delete(t)),this.store.partialNext({notifications:this.store.getLatestValue().notifications.filter(e=>e.id!==t)})}clear(){this.timeouts.forEach(t=>clearTimeout(t)),this.timeouts.clear(),this.store.partialNext({notifications:[]})}};function og(t){return typeof t=="string"||t instanceof String}var Xy=class Yi{constructor(a,e,n){var o;this.nextRequestAbortController=null,this._messageComposerSetupState=new sa({setupFunction:null}),this._getConnectionID=()=>{var l,u;return((l=this.wsConnection)==null?void 0:l.connectionID)||((u=this.wsFallback)==null?void 0:u.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(l,u)=>{if(!l.id)throw new Error('The "id" field on the user is missing');if(this.userID===l.id&&this.setUserPromise)return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=l.id,this.anonymous=!1;const h=this._setToken(l,u);this._setUser(l);const m=this.openConnection();this.setUserPromise=Promise.all([h,m]).then(p=>p[1]);try{return await this.setUserPromise}catch(p){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),p}},this.setUser=this.connectUser,this._setToken=(l,u)=>this.tokenManager.setTokenOrProvider(u,l),this.closeConnection=async l=>{var u,h,m;return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),await Promise.all([(u=this.wsConnection)==null?void 0:u.disconnect(l),(h=this.wsFallback)==null?void 0:h.disconnect(l)]),(m=this.offlineDb)==null||m.executeQuerySafely(async p=>{this.userID&&await p.upsertUserSyncStatus({userId:this.userID,lastSyncedAt:new Date().toString()})},{method:"upsertUserSyncStatus"}),Promise.resolve()},this.createChannelManager=({eventHandlerOverrides:l={},options:u={}})=>new C5({client:this,eventHandlerOverrides:l,options:u}),this.openConnection=()=>{var l,u,h;if(!this.userID)throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");if((l=this.wsConnection)!=null&&l.isConnecting&&this.wsPromise)return this.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),this.wsPromise;if(((u=this.wsConnection)!=null&&u.isHealthy||(h=this.wsFallback)!=null&&h.isHealthy())&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]});return}return this.clientID=`${this.userID}--${Qo()}`,this.wsPromise=this.connect(),this._startCleaning(),this.wsPromise},this._setupConnection=this.openConnection,this._normalizeDate=l=>{if(l instanceof Date&&(l=l.toISOString()),l==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return l},this.disconnectUser=l=>{this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,this.anonymous=!1;const u=this.closeConnection(l);for(const h of Object.values(this.activeChannels))h._disconnect();return this.activeChannels={},this.state=new iC({client:this}),this.threads.resetState(),setTimeout(this.tokenManager.reset),u},this.disconnect=this.disconnectUser,this.connectAnonymousUser=()=>{(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.anonymous=!0,this.userID=Qo();const l={id:this.userID,anon:!0};return this._setToken(l,""),this._setUser(l),this._setupConnection()},this.setAnonymousUser=this.connectAnonymousUser,this.doAxiosRequest=async(l,u,h,m={})=>{var v;await this.tokenManager.tokenReady();const p=this._enrichAxiosOptions(m);try{let b;switch(this._logApiRequest(l,u,h,p),l){case"get":b=await this.axiosInstance.get(u,p);break;case"delete":b=await this.axiosInstance.delete(u,p);break;case"post":b=await this.axiosInstance.post(u,h,p);break;case"postForm":b=await this.axiosInstance.postForm(u,h,p);break;case"put":b=await this.axiosInstance.put(u,h,p);break;case"patch":b=await this.axiosInstance.patch(u,h,p);break;case"options":b=await this.axiosInstance.options(u,p);break;default:throw new Error("Invalid request type")}return this._logApiResponse(l,u,b),this.consecutiveFailures=0,this.handleResponse(b)}catch(b){if(b.client_request_id=(v=p.headers)==null?void 0:v["x-client-request-id"],this._logApiError(l,u,b),this.consecutiveFailures+=1,b.response)return b.response.data.code===Tc.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await hi(bf(this.consecutiveFailures)),this.tokenManager.loadToken(),await this.doAxiosRequest(l,u,h,m)):this.handleResponse(b.response);throw b}},this.dispatchEvent=l=>{var p;l.received_at||(l.received_at=new Date);const u=this._handleClientEvent(l),h=l.cid,m=h?this.activeChannels[h]:void 0;m&&m._handleChannelEvent(l),this._callClientListeners(l),m&&m._callChannelListeners(l),u.forEach(v=>v()),(p=this.offlineDb)==null||p.executeQuerySafely(v=>v.handleEvent({event:l}),{method:`handleEvent;${l.type}`})},this.handleEvent=l=>{const u=l.data,h=JSON.parse(u);this.dispatchEvent(h)},this._updateMemberWatcherReferences=l=>{const u=this.state.userChannelReferences[l.id]||{};for(const h in u){const m=this.activeChannels[h];m!=null&&m.state&&(m.state.members[l.id]&&(m.state.members[l.id].user=l),m.state.watchers[l.id]&&(m.state.watchers[l.id]=l),m.state.read[l.id]&&(m.state.read[l.id].user=l))}},this._updateUserReferences=this._updateMemberWatcherReferences,this._updateUserMessageReferences=l=>{const u=this.state.userChannelReferences[l.id]||{};for(const h in u){const m=this.activeChannels[h];if(!m)continue;const p=m.state;p==null||p.updateUserMessages(l)}},this._deleteUserMessageReference=(l,u=!1)=>{const h=this.state.userChannelReferences[l.id]||{};for(const m in h){const p=this.activeChannels[m];if(p){const v=p.state;v==null||v.deleteUserMessages(l,u)}}},this._handleUserEvent=l=>{if(l.user){if(l.type==="user.presence.changed"||l.type==="user.updated"){if(l.user.id===this.userID){const u={...this.user},h={...this._user};for(const m in this.user){if(m in l.user||VL(m))continue;const p=m;delete u[p],delete h[p]}for(const m in h){const p=m;p in l.user&&(h[p]=l.user[p])}this._user=h,this.user={...u,...l.user}}this.state.updateUser(l.user),this._updateMemberWatcherReferences(l.user)}l.type==="user.updated"&&this._updateUserMessageReferences(l.user),l.type==="user.deleted"&&l.user.deleted_at&&(l.mark_messages_deleted||l.hard_delete)&&this._deleteUserMessageReference(l.user,l.hard_delete)}},this._callClientListeners=l=>{const u=this,h=[];u.listeners.all&&h.push(...u.listeners.all),u.listeners[l.type]&&h.push(...u.listeners[l.type]);for(const m of h)m(l)},this.recoverState=async()=>{this.logger("info",`client:recoverState() - Start of recoverState with connectionID ${this._getConnectionID()}`,{tags:["connection"]});const l=Object.keys(this.activeChannels);l.length&&this.recoverStateOnReconnect?(this.logger("info",`client:recoverState() - Start the querying of ${l.length} channels`,{tags:["connection","client"]}),await this.queryChannels({cid:{$in:l}},{last_message_at:-1},{limit:30}),this.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),this.dispatchEvent({type:"connection.recovered"})):this.dispatchEvent({type:"connection.recovered"}),this.wsPromise=Promise.resolve(),this.setUserPromise=Promise.resolve()},this.getChannelByMembers=(l,u)=>{const h=(u.members??[]).map(b=>typeof b=="string"?b:b.user_id??""),m=h.sort().join(","),p=Uy(l,h);if(!p)throw Error("Please specify atleast one member when creating unique conversation");for(const b in this.activeChannels){const _=this.activeChannels[b];if(!_.disconnected&&(b===p||b.indexOf(`${l}:!members-`)===0&&Object.keys(_.state.members).sort().join(",")===m))return _}const v=new el(this,l,void 0,u);return this._cacheEnabled()&&(this.activeChannels[p]=v),v},this.getChannelById=(l,u,h)=>{if(typeof u=="string"&&~u.indexOf(":"))throw Error(`Invalid channel id ${u}, can't contain the : character`);const m=`${l}:${u}`;if(m in this.activeChannels&&this.activeChannels[m]&&!this.activeChannels[m].disconnected){const v=this.activeChannels[m];return Object.keys(h).length>0&&(v.data={...v.data,...h},v._data={...v._data,...h}),v}const p=new el(this,l,u,h);return this._cacheEnabled()&&(this.activeChannels[p.cid]=p),p},this.updateUsers=this.upsertUsers,this.updateUser=this.upsertUser,this._unblockMessage=this.unblockMessage,this.markAllRead=this.markChannelsRead,this._isUsingServerAuth=()=>!!this.secret,this._cacheEnabled=()=>!this._isUsingServerAuth()||!this.options.disableCache,this._buildWSPayload=l=>JSON.stringify({user_id:this.userID,user_details:this._user,device:this.options.device,client_request_id:l}),this.setMessageComposerSetupFunction=l=>{this._messageComposerSetupState.partialNext({setupFunction:l})},this.key=a,this.listeners={},this.state=new iC({client:this}),this.mutedChannels=[],this.mutedUsers=[],this.moderation=new l5(this),this.notifications=(n==null?void 0:n.notifications)??new S5,e&&og(e)&&(this.secret=e);const s=n||(e&&!og(e)?e:{});this.browser=typeof s.browser<"u"?s.browser:typeof window<"u",this.node=!this.browser,this.options={timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0,disableCache:!1,wsUrlParams:new URLSearchParams({}),...s},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new OL.default.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=qc.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&"env"in process&&Wp.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&"env"in process&&Wp.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+Wp.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(o=this.options)==null?void 0:o.persistUserOnConnectionFailure,this.tokenManager=new t5(this.secret),this.consecutiveFailures=0,this.insightMetrics=new ZP,this.defaultWSTimeoutWithFallback=6*1e3,this.defaultWSTimeout=15*1e3,this.axiosInstance.defaults.paramsSerializer=aO,this.logger=Og(s.logger)?s.logger:()=>null,this.recoverStateOnReconnect=this.options.recoverStateOnReconnect,this.threads=new u5({client:this}),this.polls=new b5({client:this})}static getInstance(a,e,n){return Yi._instance||(typeof e=="string"?Yi._instance=new Yi(a,e,n):Yi._instance=new Yi(a,e)),Yi._instance}setOfflineDBApi(a){this.offlineDb||(this.offlineDb=a)}devToken(a){return JP(a)}getAuthType(){return this.anonymous?"anonymous":"jwt"}setBaseURL(a){this.baseURL=a,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}_setUser(a){this.user=a,this.userID=a.id,this._user={...a}}async updateAppSettings(a){const e=a.apn_config;return e!=null&&e.p12_cert&&(a={...a,apn_config:{...e,p12_cert:Buffer.from(e.p12_cert).toString("base64")}}),await this.patch(this.baseURL+"/app",a)}async revokeTokens(a){return await this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(a)})}async revokeUserToken(a,e){return await this.revokeUsersToken([a],e)}async revokeUsersToken(a,e){e===void 0?e=new Date().toISOString():e=this._normalizeDate(e);const n=[];for(const s of a)n.push({id:s,set:{revoke_tokens_issued_before:e}});return await this.partialUpdateUsers(n)}async getAppSettings(){return this.appSettingsPromise=this.get(this.baseURL+"/app"),await this.appSettingsPromise}async testPushSettings(a,e={}){return await this.post(this.baseURL+"/check_push",{user_id:a,...e.messageID?{message_id:e.messageID}:{},...e.apnTemplate?{apn_template:e.apnTemplate}:{},...e.firebaseTemplate?{firebase_template:e.firebaseTemplate}:{},...e.firebaseDataTemplate?{firebase_data_template:e.firebaseDataTemplate}:{},...e.skipDevices?{skip_devices:!0}:{},...e.pushProviderName?{push_provider_name:e.pushProviderName}:{},...e.pushProviderType?{push_provider_type:e.pushProviderType}:{}})}async testSQSSettings(a={}){return await this.post(this.baseURL+"/check_sqs",a)}async testSNSSettings(a={}){return await this.post(this.baseURL+"/check_sns",a)}async setGuestUser(a){let e;this.anonymous=!0;try{e=await this.post(this.baseURL+"/guest",{user:a})}catch(h){throw this.anonymous=!1,h}this.anonymous=!1;const{created_at:n,updated_at:s,last_active:o,online:l,...u}=e.user;return await this.connectUser(u,e.access_token)}createToken(a,e,n){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");const s={};return e&&(s.exp=e),n&&(s.iat=n),lE(this.secret,a,s,{})}on(a,e){const n=e?a:"all",s=e||a;return n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Attaching listener for ${n} event`,{tags:["event","client"]}),this.listeners[n].push(s),{unsubscribe:()=>{this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(o=>o!==s)}}}off(a,e){const n=e?a:"all",s=e||a;n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(o=>o!==s)}_logApiRequest(a,e,n,s){this.logger("info",`client: ${a} - Request - ${e}`,{tags:["api","api_request","client"],url:e,payload:n,config:s})}_logApiResponse(a,e,n){this.logger("info",`client:${a} - Response - url: ${e} > status ${n.status}`,{tags:["api","api_response","client"],url:e,response:n})}_logApiError(a,e,n){this.logger("error",`client:${a} - Error - url: ${e}`,{tags:["api","api_response","client"],url:e,error:n})}get(a,e){return this.doAxiosRequest("get",a,null,{params:e})}put(a,e){return this.doAxiosRequest("put",a,e)}post(a,e){return this.doAxiosRequest("post",a,e)}patch(a,e){return this.doAxiosRequest("patch",a,e)}delete(a,e){return this.doAxiosRequest("delete",a,null,{params:e})}sendFile(a,e,n,s,o){const l=XL(e,n,s||"multipart/form-data");return o!=null&&l.append("user",JSON.stringify(o)),this.doAxiosRequest("postForm",a,l,{headers:l.getHeaders?l.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}errorFromResponse(a){const e=typeof a.data.code<"u"?`StreamChat error code ${a.data.code}: ${a.data.message}`:`StreamChat error HTTP code: ${a.status}`;return new iP(e,{code:a.data.code??null,response:a,status:a.status})}handleResponse(a){const e=a.data;if(i5(a))throw this.errorFromResponse(a);return e}_handleClientEvent(a){var s,o,l;const e=this,n=[];if(this.logger("info",`client:_handleClientEvent - Received event of type { ${a.type} }`,{tags:["event","client"],event:a}),(a.type==="user.presence.changed"||a.type==="user.updated"||a.type==="user.deleted")&&this._handleUserEvent(a),a.type==="health.check"&&a.me&&(e.user=a.me,e.state.updateUser(a.me),e.mutedChannels=a.me.channel_mutes,e.mutedUsers=a.me.mutes),a.channel&&a.type==="notification.message_new"){const{channel:u}=a;this._addChannelConfig(u)}if(a.type==="notification.channel_mutes_updated"&&((s=a.me)!=null&&s.channel_mutes)&&(this.mutedChannels=a.me.channel_mutes),a.type==="notification.mutes_updated"&&((o=a.me)!=null&&o.mutes)&&(this.mutedUsers=a.me.mutes),a.type==="notification.mark_read"&&a.unread_channels===0&&Object.keys(this.activeChannels).forEach(h=>this.activeChannels[h].state.unreadCount=0),(a.type==="channel.deleted"||a.type==="notification.channel_deleted")&&a.cid){const{cid:u}=a;e.state.deleteAllChannelReference(u),(l=this.activeChannels[a.cid])==null||l._disconnect(),n.push(()=>{u&&delete this.activeChannels[u]})}return n}_muteStatus(a){var n;let e;for(let s=0;s<this.mutedChannels.length;s++){const o=this.mutedChannels[s];if(((n=o.channel)==null?void 0:n.cid)===a){e={muted:o.expires?new Date(o.expires).getTime()>new Date().getTime():!0,createdAt:o.created_at?new Date(o.created_at):new Date,expiresAt:o.expires?new Date(o.expires):null};break}}return e||{muted:!1,createdAt:null,expiresAt:null}}async connect(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new XP({client:this});try{return this.wsFallback?await this.wsFallback.connect():await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout)}catch(a){if(this.options.enableWSFallback&&s5(a)&&nO())return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new o5({client:this}),await this.wsFallback.connect();throw a}}_sayHi(){const a=Qo(),e={headers:{"x-client-request-id":a}};this.doAxiosRequest("get",this.baseURL+"/hi",null,e).catch(n=>{this.options.enableInsights&&Rc("http_hi_failed",{api_key:this.key,err:n,client_request_id:a})})}async queryUsers(a,e=[],n={}){const s={presence:!1};await this.wsPromise,this._hasConnectionID()||(s.presence=!1);const o=await this.get(this.baseURL+"/users",{payload:{filter_conditions:a,sort:Zn(e),...s,...n}});return this.state.updateUsers(o.users),o}async queryBannedUsers(a={},e=[],n={}){return await this.get(this.baseURL+"/query_banned_users",{payload:{filter_conditions:a,sort:Zn(e),...n}})}async queryMessageFlags(a={},e={}){return await this.get(this.baseURL+"/moderation/flags/message",{payload:{filter_conditions:a,...e}})}async queryChannelsRequest(a,e=[],n={}){const s={state:!0,watch:!0,presence:!1};await this.wsPromise,this._hasConnectionID()||(s.watch=!1);const o={filter_conditions:a,sort:Zn(e),...s,...n};return(await this.post(this.baseURL+"/channels",o)).channels}async queryChannels(a,e=[],n={},s={}){var l;const o=await this.queryChannelsRequest(a,e,n);return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:o,isLatestMessageSet:!0}}),o!=null&&o.length&&((l=this.offlineDb)!=null&&l.upsertChannels)&&await this.offlineDb.upsertChannels({channels:o,isLatestMessagesSet:!0}),this.hydrateActiveChannels(o,s,n)}async queryReactions(a,e,n=[],s={}){var l;const o={filter:e,sort:Zn(n),...s};if((l=this.offlineDb)!=null&&l.getReactions&&!s.next)try{const u=await this.offlineDb.getReactions({messageId:a,filters:e,sort:n,limit:s.limit});u&&this.dispatchEvent({type:"offline_reactions.queried",offlineReactions:u})}catch(u){this.logger("warn","An error has occurred while querying offline reactions",{error:u})}return await this.wsPromise,await this.post(this.baseURL+"/messages/"+encodeURIComponent(a)+"/reactions",o)}hydrateActiveChannels(a=[],e={},n){const{skipInitialization:s,offlineMode:o=!1}=e,l=[];for(const u of a){this._addChannelConfig(u.channel);const h=this.channel(u.channel.type,u.channel.id);h.data=u.channel,h.offlineMode=o,h.initialized=!o,h.push_preferences=u.push_preferences;let m;if(s===void 0){const{messageSet:p}=h._initializeState(u,"latest");m=p}else if(!s.includes(u.channel.id)){h.state.clearMessages();const{messageSet:p}=h._initializeState(u,"latest");m=p}m&&(m.pagination={...m.pagination,...PS({parentSet:m,requestedPageSize:(n==null?void 0:n.message_limit)||BL,returnedPage:u.messages,logger:this.logger})},this.polls.hydratePollCache(u.messages,!0)),u.draft&&h.messageComposer.initState({composition:u.draft}),l.push(h)}return l}async search(a,e,n={}){if(n.offset&&n.next)throw Error("Cannot specify offset with next");const s={filter_conditions:a,...n,sort:n.sort?Zn(n.sort):void 0};if(typeof e=="string")s.query=e;else if(typeof e=="object")s.message_filter_conditions=e;else throw Error(`Invalid type ${typeof e} for query parameter`);return await this.wsPromise,await this.get(this.baseURL+"/search",{payload:s})}setLocalDevice(a){var e,n,s;if((e=this.wsConnection)!=null&&e.isConnecting&&this.wsPromise||((n=this.wsConnection)!=null&&n.isHealthy||(s=this.wsFallback)!=null&&s.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=a}async addDevice(a,e,n,s){return await this.post(this.baseURL+"/devices",{id:a,push_provider:e,...n!=null?{user_id:n}:{},...s!=null?{push_provider_name:s}:{}})}async getDevices(a){return await this.get(this.baseURL+"/devices",a?{user_id:a}:{})}async getUnreadCount(a){return await this.get(this.baseURL+"/unread",a?{user_id:a}:{})}async getUnreadCountBatch(a){return await this.post(this.baseURL+"/unread_batch",{user_ids:a})}async setPushPreferences(a){return await this.post(this.baseURL+"/push_preferences",{preferences:a})}async removeDevice(a,e){return await this.delete(this.baseURL+"/devices",{id:a,...e?{user_id:e}:{}})}getRateLimits(a){const{serverSide:e,web:n,android:s,ios:o,endpoints:l}=a||{};return this.get(this.baseURL+"/rate_limits",{server_side:e,web:n,android:s,ios:o,endpoints:l?l.join(","):void 0})}_addChannelConfig({cid:a,config:e}){this._cacheEnabled()&&(this.configs[a]=e)}channel(a,e,n={}){var s;if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~a.indexOf(":"))throw new Error(`Invalid channel group ${a}, can't contain the : character`);return e&&typeof e=="object"?this.getChannelByMembers(a,e):!e&&typeof n=="object"&&((s=n.members)!=null&&s.length)?this.getChannelByMembers(a,n):e?this.getChannelById(a,e,n):new el(this,a,void 0,n)}async partialUpdateUser(a){return await this.partialUpdateUsers([a])}async upsertUsers(a){const e={};for(const n of a){if(!n.id)throw Error("User ID is required when updating a user");e[n.id]=n}return await this.post(this.baseURL+"/users",{users:e})}upsertUser(a){return this.upsertUsers([a])}async partialUpdateUsers(a){for(const e of a)if(!e.id)throw Error("User ID is required when updating a user");return await this.patch(this.baseURL+"/users",{users:a})}async deleteUser(a,e){return await this.delete(this.baseURL+`/users/${encodeURIComponent(a)}`,e)}async restoreUsers(a){return await this.post(this.baseURL+"/users/restore",{user_ids:a})}async reactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/reactivate`,{...e})}async reactivateUsers(a,e){return await this.post(this.baseURL+"/users/reactivate",{user_ids:a,...e})}async deactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/deactivate`,{...e})}async deactivateUsers(a,e){return await this.post(this.baseURL+"/users/deactivate",{user_ids:a,...e})}async exportUser(a,e){return await this.get(this.baseURL+`/users/${encodeURIComponent(a)}/export`,{...e})}async banUser(a,e){return await this.post(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async unbanUser(a,e){return await this.delete(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async shadowBan(a,e){return await this.banUser(a,{shadow:!0,...e})}async removeShadowBan(a,e){return await this.unbanUser(a,{shadow:!0,...e})}async blockUser(a,e){return await this.post(this.baseURL+"/users/block",{blocked_user_id:a,...e?{user_id:e}:{}})}async getBlockedUsers(a){return await this.get(this.baseURL+"/users/block",{...a?{user_id:a}:{}})}async unBlockUser(a,e){return await this.post(this.baseURL+"/users/unblock",{blocked_user_id:a,...e?{user_id:e}:{}})}async muteUser(a,e,n={}){return await this.post(this.baseURL+"/moderation/mute",{target_id:a,...e?{user_id:e}:{},...n})}async unmuteUser(a,e){return await this.post(this.baseURL+"/moderation/unmute",{target_id:a,...e?{user_id:e}:{}})}userMuteStatus(a){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(let e=0;e<this.mutedUsers.length;e+=1)if(this.mutedUsers[e].target.id===a)return!0;return!1}async flagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_message_id:a,...e})}async flagUser(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_user_id:a,...e})}async unflagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_message_id:a,...e})}async unflagUser(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_user_id:a,...e})}async _queryFlags(a={},e={}){return await this.post(this.baseURL+"/moderation/flags",{filter_conditions:a,...e})}async _queryFlagReports(a={},e={}){return await this.post(this.baseURL+"/moderation/reports",{filter_conditions:a,...e})}async _reviewFlagReport(a,e,n={}){return await this.patch(this.baseURL+`/moderation/reports/${encodeURIComponent(a)}`,{review_result:e,...n})}async unblockMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unblock_message",{target_message_id:a,...e})}async markChannelsRead(a={}){await this.post(this.baseURL+"/channels/read",{...a})}createCommand(a){return this.post(this.baseURL+"/commands",a)}getCommand(a){return this.get(this.baseURL+`/commands/${encodeURIComponent(a)}`)}updateCommand(a,e){return this.put(this.baseURL+`/commands/${encodeURIComponent(a)}`,e)}deleteCommand(a){return this.delete(this.baseURL+`/commands/${encodeURIComponent(a)}`)}listCommands(){return this.get(this.baseURL+"/commands")}createChannelType(a){const e=Object.assign({},{commands:["all"]},a);return this.post(this.baseURL+"/channeltypes",e)}getChannelType(a){return this.get(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}updateChannelType(a,e){return this.put(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`,e)}DBDeleteChannelType(a){return this.delete(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}listChannelTypes(){return this.get(this.baseURL+"/channeltypes")}async translateMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/translate`,{language:e})}async translate(a,e,n){return await this.post(this.baseURL+"/translate",{text:a,source_language:n,destination_language:e})}_normalizeExpiration(a){let e=null;if(typeof a=="number"){const n=new Date;n.setSeconds(n.getSeconds()+a),e=n.toISOString()}else og(a)?e=a:a instanceof Date&&(e=a.toISOString());return e}_validateAndGetMessageId(a,e){let n;if(typeof a=="string")n=a;else{if(!a.id)throw Error(e);n=a.id}return n}pinMessage(a,e,n,s){const o=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(o,{set:{pinned:!0,pin_expires:this._normalizeExpiration(e),pinned_at:this._normalizeExpiration(s)}},n)}unpinMessage(a,e){const n=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(n,{set:{pinned:!1}},e)}async updateMessage(a,e,n){if(!a.id)throw Error("Please specify the message.id when calling updateMessage");const s=RS(a);return typeof e=="string"?s.user_id=e:typeof(e==null?void 0:e.id)=="string"&&(s.user_id=e.id),await this.post(this.baseURL+`/messages/${encodeURIComponent(a.id)}`,{message:s,...n})}async partialUpdateMessage(a,e,n,s){if(!a)throw Error("Please specify the message.id when calling partialUpdateMessage");let o;return typeof n=="string"?o={id:n}:typeof(n==null?void 0:n.id)=="string"&&(o={id:n.id}),await this.put(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e,...s,user:o})}async deleteMessage(a,e){try{if(this.offlineDb)return e?await this.offlineDb.hardDeleteMessage({id:a}):await this.offlineDb.softDeleteMessage({id:a}),await this.offlineDb.queueTask({task:{messageId:a,payload:[a,e],type:"delete-message"}})}catch(n){this.logger("error","offlineDb:deleteMessage",{tags:["channel","offlineDb"],error:n})}return this._deleteMessage(a,e)}async _deleteMessage(a,e){let n={};return e&&(n={hard:!0}),await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}`,n)}async undeleteMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/undelete`,{undeleted_by:e})}async getMessage(a,e){return await this.get(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e})}async queryThreads(a={}){const e={limit:10,participant_limit:10,reply_limit:3,watch:!0,...a},n={...e};e.filter&&Object.keys(e.filter).length>0&&(n.filter=e.filter),e.sort&&(Array.isArray(e.sort)?e.sort.length>0:Object.keys(e.sort).length>0)&&(n.sort=Zn(e.sort));const s=await this.post(`${this.baseURL}/threads`,n);return{threads:s.threads.map(o=>new Hc({client:this,threadData:o})),next:s.next}}async getThread(a,e={}){if(!a)throw new Error("Please specify the messageId when calling getThread");const n={participant_limit:100,reply_limit:3,watch:!0,...e},s=await this.get(`${this.baseURL}/threads/${encodeURIComponent(a)}`,n);return new Hc({client:this,threadData:s.thread})}async partialUpdateThread(a,e){if(!a)throw Error("Please specify the message id when calling partialUpdateThread");const n=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel","custom"];for(const s in{...e.set,...e.unset})if(n.includes(s))throw Error(`You cannot set ${s} field on Thread object. ${s} is reserved for server-side use. Please omit ${s} from your set object.`);return await this.patch(`${this.baseURL}/threads/${encodeURIComponent(a)}`,e)}getUserAgent(){if(this.userAgent)return this.userAgent;const a="9.2.0",e="browser-esm";let n="";this.sdkIdentifier?n=`stream-chat-${this.sdkIdentifier.name}-v${this.sdkIdentifier.version}-llc-v${a}`:n=`stream-chat-js-v${a}-${this.node?"node":"browser"}`;const{os:s,model:o}=this.deviceIdentifier??{};return[["os",s],["device_model",o],["client_bundle",e]].reduce((l,[u,h])=>h&&h.length>0?l.concat(`|${u}=${h}`):l,n)}setUserAgent(a){this.userAgent=a}_enrichAxiosOptions(a={params:{},headers:{},config:{}}){var h;const e=this._getToken(),n=e?{Authorization:e}:void 0;let s=null;this.nextRequestAbortController!==null&&(s=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(h=a.headers)!=null&&h["x-client-request-id"]||(a.headers={...a.headers,"x-client-request-id":Qo()});const{params:o,headers:l,...u}=this.options.axiosRequestConfig||{};return{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...a.params,...o||{}},headers:{...n,"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...a.headers,...l||{}},...s?{signal:s}:{},...a.config,...u||{}}}_getToken(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}_startCleaning(){const a=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(()=>{for(const e of Object.values(a.activeChannels))e.clean()},500))}verifyWebhook(a,e){return!!this.secret&&e5(a,this.secret,e)}getPermission(a){return this.get(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}createPermission(a){return this.post(`${this.baseURL}/permissions`,{...a})}updatePermission(a,e){return this.put(`${this.baseURL}/permissions/${encodeURIComponent(a)}`,{...e})}deletePermission(a){return this.delete(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}listPermissions(){return this.get(`${this.baseURL}/permissions`)}createRole(a){return this.post(`${this.baseURL}/roles`,{name:a})}listRoles(){return this.get(`${this.baseURL}/roles`)}deleteRole(a){return this.delete(`${this.baseURL}/roles/${encodeURIComponent(a)}`)}sync(a,e,n={}){return this.post(`${this.baseURL}/sync`,{channel_cids:a,last_sync_at:e,...n})}async sendUserCustomEvent(a,e){return await this.post(`${this.baseURL}/users/${encodeURIComponent(a)}/event`,{event:e})}createBlockList(a){return this.post(`${this.baseURL}/blocklists`,a)}listBlockLists(a){return this.get(`${this.baseURL}/blocklists`,a)}getBlockList(a,e){return this.get(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}updateBlockList(a,e){return this.put(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}deleteBlockList(a,e){return this.delete(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}exportChannels(a,e={}){const n={channels:a,...e};return this.post(`${this.baseURL}/export_channels`,n)}exportUsers(a){return this.post(`${this.baseURL}/export/users`,a)}exportChannel(a,e){return this.exportChannels([a],e)}getExportChannelStatus(a){return this.get(`${this.baseURL}/export_channels/${encodeURIComponent(a)}`)}campaign(a,e){return a&&typeof a=="object"?new A1(this,null,a):new A1(this,a,e)}segment(a,e,n){return typeof e=="string"?new uC(this,a,e,n):new uC(this,a,null,e)}validateServerSideAuth(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}createSegment(a,e,n){this.validateServerSideAuth();const s={id:e,type:a,...n};return this.post(this.baseURL+"/segments",s)}createUserSegment(a,e){return this.validateServerSideAuth(),this.createSegment("user",a,e)}createChannelSegment(a,e){return this.validateServerSideAuth(),this.createSegment("channel",a,e)}getSegment(a){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}`)}updateSegment(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/segments/${encodeURIComponent(a)}`,e)}addSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/addtargets`,n)}querySegmentTargets(a,e={},n=[],s={}){return this.validateServerSideAuth(),this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/targets/query`,{filter:e||{},sort:n||[],...s})}removeSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/deletetargets`,n)}querySegments(a,e,n={}){return this.validateServerSideAuth(),this.post(this.baseURL+"/segments/query",{filter:a,sort:e,...n})}deleteSegment(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/segments/${encodeURIComponent(a)}`)}segmentTargetExists(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}/target/${encodeURIComponent(e)}`)}createCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+"/campaigns",{...a})}getCampaign(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,{...e==null?void 0:e.users})}startCampaign(a,e){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/start`,{scheduled_for:e==null?void 0:e.scheduledFor,stop_at:e==null?void 0:e.stopAt})}async queryCampaigns(a,e,n){return this.validateServerSideAuth(),await this.post(this.baseURL+"/campaigns/query",{filter:a,sort:e,...n||{}})}updateCampaign(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,e)}deleteCampaign(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/campaigns/${encodeURIComponent(a)}`)}stopCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/stop`)}enrichURL(a){return this.get(this.baseURL+"/og",{url:a})}getTask(a){return this.get(`${this.baseURL}/tasks/${encodeURIComponent(a)}`)}async deleteChannels(a,e={}){return await this.post(this.baseURL+"/channels/delete",{cids:a,...e})}async deleteUsers(a,e={}){if(typeof e.user<"u"&&!["soft","hard","pruning"].includes(e.user))throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");if(typeof e.conversations<"u"&&!["soft","hard"].includes(e.conversations))throw new Error("Invalid delete user options. conversations must be one of [soft hard]");if(typeof e.messages<"u"&&!["soft","hard","pruning"].includes(e.messages))throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");return await this.post(this.baseURL+"/users/delete",{user_ids:a,...e})}async _createImportURL(a){return await this.post(this.baseURL+"/import_urls",{filename:a})}async _createImport(a,e={mode:"upsert"}){return await this.post(this.baseURL+"/imports",{path:a,...e})}async _getImport(a){return await this.get(this.baseURL+`/imports/${encodeURIComponent(a)}`)}async _listImports(a){return await this.get(this.baseURL+"/imports",a)}async upsertPushProvider(a){return await this.post(this.baseURL+"/push_providers",{push_provider:a})}async deletePushProvider({type:a,name:e}){return await this.delete(this.baseURL+`/push_providers/${encodeURIComponent(a)}/${encodeURIComponent(e)}`)}async listPushProviders(){return await this.get(this.baseURL+"/push_providers")}createAbortControllerForNextRequest(){return this.nextRequestAbortController=new AbortController}async commitMessage(a){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/commit`)}async createPoll(a,e){return await this.post(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async getPoll(a,e){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}`,e?{user_id:e}:{})}async updatePoll(a,e){return await this.put(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async partialUpdatePoll(a,e,n){return await this.patch(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e,...n?{user_id:n}:{}})}async deletePoll(a,e){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e?{user_id:e}:{}})}closePoll(a,e){return this.partialUpdatePoll(a,{set:{is_closed:!0}},e)}async createPollOption(a,e,n){return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async getPollOption(a,e,n){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async updatePollOption(a,e,n){return await this.put(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async deletePollOption(a,e,n){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async castPollVote(a,e,n,s){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote`,{vote:n,...s?{user_id:s}:{}})}addPollAnswer(a,e,n,s){return this.castPollVote(a,e,{answer_text:n},s)}async removePollVote(a,e,n,s){return await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote/${encodeURIComponent(n)}`,{...s?{user_id:s}:{}})}async queryPolls(a={},e=[],n={},s){const o=s?`?user_id=${s}`:"";return await this.post(this.baseURL+`/polls/query${o}`,{filter:a,sort:Zn(e),...n})}async queryPollVotes(a,e={},n=[],s={},o){const l=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${l}`,{filter:e,sort:Zn(n),...s})}async queryPollAnswers(a,e={},n=[],s={},o){const l=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${l}`,{filter:{...e,is_answer:!0},sort:Zn(n),...s})}async queryMessageHistory(a={},e=[],n={}){return await this.post(this.baseURL+"/messages/history",{filter:a,sort:Zn(e),...n})}async updateFlags(a,e,n={}){return await this.post(this.baseURL+"/automod/v1/moderation/update_flags",{message_ids:a,reviewed_by:e,...n})}async queryDrafts(a={}){const e={...a,sort:a.sort?Zn(a.sort):void 0};return await this.post(this.baseURL+"/drafts/query",e)}};const cE=(t,a)=>{const[e,n]=w.useState([]),[s,o]=w.useState([]),[l,u]=w.useState(!0),[h,m]=w.useState(null),p=async()=>{try{u(!0);const[v,b]=await Promise.all([di.getPendingProposals(t,a),di.getSentProposals(t,a)]);n(v.filter(_=>_.status==="pending")),o(b.filter(_=>["pending","countered"].includes(_.status))),m(null)}catch(v){m(v.message),n([]),o([])}finally{u(!1)}};return w.useEffect(()=>{t&&a&&p()},[t,a]),{pendingProposals:e,sentProposals:s,loading:l,error:h,refetch:p}},E5="nbvut8j4y6se",x5="frbcaplgmailcom";function I5(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function kd(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${a.getFullYear()}-${e}-${n}`}function D5(t){let a=t.trim();a=a.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(n,s,o,l)=>`${parseInt(s,10)}:${o} ${l.toUpperCase()}`),a=a.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(n,s,o,l)=>`${parseInt(s,10)}:${o} ${l.toUpperCase()}`),a=a.replace(/^(\d{1,2})(am|pm)$/i,(n,s,o)=>`${parseInt(s,10)}:00 ${o.toUpperCase()}`),a=a.replace(/(am|pm)$/i," $1"),a=a.replace(/(am|pm)$/i,n=>n.toUpperCase());const e=a.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(e){const n=e[1],s=e[2],o=e[3].toUpperCase(),l=`${n}:${s} ${o}`;return console.log("normalizeTimeString final:",l),l}return console.log("normalizeTimeString fallback:",a),a}function Ld(t){return t.replace(/[^a-zA-Z0-9]/g,"")}async function M5({senderEmail:t,senderName:a,receiverEmail:e,receiverName:n,matchName:s}){try{const o=Xy.getInstance(E5),l=await fetch(`${ht}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Ld(t)})}),{token:u}=await l.json();if(!u)throw new Error("Could not get chat token");o.userID||await o.connectUser({id:Ld(t),name:a},u);const h=Array.from(new Set([Ld(t),Ld(e),x5])),m=o.channel("messaging",{members:h,name:s});await m.create(),await m.sendMessage({text:"Chat created for your match proposal!"})}catch(o){console.error("Failed to create chat channel:",o),alert("Failed to create chat channel: "+o.message)}}const lg=`This is a BETA test match. Matches that are created, scheduled, and confirmed will NOT be played.

`,A5=t=>t.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();function Ky({player:t,day:a,slot:e,onClose:n,senderName:s,senderEmail:o,onProposalComplete:l,selectedDivision:u,phase:h}){console.log("MatchProposalModal player prop:",t),console.log("MatchProposalModal phase prop:",h),console.log("MatchProposalModal slot prop:",e,JSON.stringify(e));const[m,p]=w.useState(e),[v,b]=w.useState(""),[_,C]=w.useState(""),[S,E]=w.useState(""),[I,M]=w.useState(!1),[A,k]=w.useState("8 Ball"),[O,U]=w.useState(h==="scheduled"||h==="challenge"?5:7),q=t.locations?t.locations.split(/\r?\n/).map(F=>F.trim()).filter(Boolean):[],Y=J3(a),[$,K]=w.useState(Y),pe=t.availability[a]||[],ne=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][$.getDay()],se=w.useMemo(()=>{if(!e)return[];const F=A5(e);if(console.log("DEBUG: normalized slot:",F),!F.includes(" - "))return[];let[R,P]=F.split(" - ").map(Q=>D5(Q.trim()));if(console.log("DEBUG: blockStart:",R,"blockEnd:",P),!R||!P)return[];const G=Ry(R,P,30);return console.log("DEBUG: generated times:",G),G},[e]);w.useEffect(()=>{b("")},[e]);const{sentProposals:z}=cE(s,u);function D(F){return z.some(R=>R.receiverName===(F.player?`${F.player.firstName} ${F.player.lastName}`:F.opponentName)&&R.date===kd($)&&R.time===v&&R.location===_&&R.phase===h&&R.divisions&&R.divisions.includes(u)&&["pending","countered"].includes(R.status))}t.opponents&&t.opponents.filter(F=>!D(F));const H=()=>{if(!o||!t.email||!v||!_||!$){alert("Please fill in all required fields.");return}if(h==="scheduled"){const R=new Date,P=new Date($),G=Math.ceil((P-R)/(1e3*60*60*24));if(G<0){alert(" You cannot schedule a match in the past.");return}if(G<=2&&!window.confirm(` WARNING: This match is scheduled for ${G} day(s) from now.

Phase 1 matches must be completed by the end of week 6. Scheduling this close to the deadline may not give enough time to complete the match.

Do you want to continue with this schedule?`))return}const F={senderEmail:o,senderName:s,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,date:kd($),time:v,location:_,message:S,gameType:A,raceLength:O,phase:h,divisions:[u]};console.log("Proposal data to send:",F),fetch(`${ht}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}).then(R=>R.json()).then(R=>{if(console.log("Backend response:",R),R.error)throw new Error(R.error);M5({senderEmail:o,senderName:s,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,matchName:`${s} vs ${t.firstName?`${t.firstName} ${t.lastName}`:t.name} - ${I5($)}`}),tT({to_email:t.email,to_name:t.firstName?`${t.firstName} ${t.lastName}`:t.name,from_name:s,from_email:o,day:ne,date:kd($),time:v,location:_,note:S,gameType:A,raceLength:O}),M(!0)}).catch(R=>{console.error("Failed to send proposal:",R),alert("Failed to send proposal: "+R.message)})},W=()=>{M(!1),n(),l&&l()};return f.createElement(f.Fragment,null,f.createElement(zn,{open:!0,onClose:n,title:f.createElement("span",{className:Zt["match-proposal-title"]},"Propose a Match - BETA"),maxWidth:"500px",className:"proposal-modal"},f.createElement("div",{className:Zt["match-proposal-content"]},f.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:12}},f.createElement("div",{className:Zt["match-proposal-phase"]},f.createElement("b",null,f.createElement("span",{style:{color:"#fff"}},h==="scheduled"?"Phase 1:":h==="challenge"?"Phase 2:":""),f.createElement("span",{className:Zt["match-proposal-label-red"],style:{marginLeft:4}},h==="scheduled"?"Scheduled Match Phase":h==="challenge"?"Challenge Phase":""))),f.createElement("div",{className:Zt["match-proposal-division"]},f.createElement("b",null,f.createElement("span",{style:{color:"#fff"}},"Division:"))," ",f.createElement("span",{className:Zt["match-proposal-label-red"]},u))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"To Opponent:"),f.createElement("div",{className:Zt.opponentName,style:{fontWeight:"bold",fontSize:"1.25rem",margin:"2px 0"}},t.firstName?`${t.firstName} ${t.lastName}`:t.name),f.createElement("span",{style:{color:"#fff",fontSize:"1rem"}},"Day: "),f.createElement("span",{className:Zt["match-proposal-day-value"],style:{color:"#e53e3e",fontWeight:600}},ne)),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Date:"),f.createElement(tS,{selected:$,onChange:F=>K(F),dateFormat:"MM-dd-yyyy",className:Zt["match-proposal-date-input"],required:!0})),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Time Block:"),f.createElement("select",{className:Zt["match-proposal-select"],value:m,onChange:F=>p(F.target.value)},f.createElement("option",{value:""},"Select time block"),pe.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Start Time:"),f.createElement("select",{className:Zt["match-proposal-select"],value:v,onChange:F=>b(F.target.value)},f.createElement("option",{value:""},"Select..."),se.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Game Type:"),f.createElement("select",{className:Zt["match-proposal-select"],value:A,onChange:F=>k(F.target.value)},f.createElement("option",{value:"8 Ball"},"8 Ball"),f.createElement("option",{value:"9 Ball"},"9 Ball"),f.createElement("option",{value:"10 Ball"},"10 Ball"),f.createElement("option",{value:"Mixed"},"Mixed"))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Race Length:"),f.createElement("select",{className:Zt["match-proposal-select"],value:O,onChange:F=>U(Number(F.target.value))},h==="scheduled"||h==="challenge"?f.createElement("option",{value:5},"5"):[...Array(13)].map((F,R)=>{const P=R+3;return f.createElement("option",{key:P,value:P},P)}))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Location:"),f.createElement("select",{className:Zt["match-proposal-location-select"],value:_,onChange:F=>C(F.target.value)},f.createElement("option",{value:""},"Select..."),q.map((F,R)=>f.createElement("option",{key:R,value:F},F)))),f.createElement("div",{className:Zt["match-proposal-row"],style:{marginBottom:10}},f.createElement("b",null,"Message to Opponent:"),f.createElement("textarea",{className:Zt["match-proposal-textarea"],value:lg+S,onChange:F=>{const R=F.target.value;R.startsWith(lg)?E(R.slice(lg.length)):E("")},placeholder:"Add a comment to your opponent...",rows:5})),f.createElement("button",{className:Zt["match-proposal-send-btn"],onClick:H,disabled:!v||!_},"Send Proposal"))),I&&f.createElement(c_,{open:I,onClose:W,message:`Your match proposal has been sent to ${t.firstName?`${t.firstName} ${t.lastName}`:t.name}.
          They will receive an email notification and can respond through the app.`,phase:h,gameType:A,raceLength:O,day:ne,date:kd($),time:v,location:_,proposalNote:S}))}function uE(t,a){return function(){return t.apply(a,arguments)}}const{toString:T5}=Object.prototype,{getPrototypeOf:Jy}=Object,{iterator:wh,toStringTag:dE}=Symbol,Ch=(t=>a=>{const e=T5.call(a);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),mr=t=>(t=t.toLowerCase(),a=>Ch(a)===t),_h=t=>a=>typeof a===t,{isArray:vl}=Array,Xc=_h("undefined");function N5(t){return t!==null&&!Xc(t)&&t.constructor!==null&&!Xc(t.constructor)&&ha(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const fE=mr("ArrayBuffer");function R5(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&fE(t.buffer),a}const k5=_h("string"),ha=_h("function"),hE=_h("number"),Sh=t=>t!==null&&typeof t=="object",L5=t=>t===!0||t===!1,Kd=t=>{if(Ch(t)!=="object")return!1;const a=Jy(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(dE in t)&&!(wh in t)},O5=mr("Date"),P5=mr("File"),B5=mr("Blob"),U5=mr("FileList"),z5=t=>Sh(t)&&ha(t.pipe),H5=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||ha(t.append)&&((a=Ch(t))==="formdata"||a==="object"&&ha(t.toString)&&t.toString()==="[object FormData]"))},Y5=mr("URLSearchParams"),[F5,j5,W5,G5]=["ReadableStream","Request","Response","Headers"].map(mr),Z5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function du(t,a,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),vl(t))for(n=0,s=t.length;n<s;n++)a.call(null,t[n],n,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let u;for(n=0;n<l;n++)u=o[n],a.call(null,t[u],u,t)}}function mE(t,a){a=a.toLowerCase();const e=Object.keys(t);let n=e.length,s;for(;n-- >0;)if(s=e[n],a===s.toLowerCase())return s;return null}const Gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pE=t=>!Xc(t)&&t!==Gi;function Vg(){const{caseless:t}=pE(this)&&this||{},a={},e=(n,s)=>{const o=t&&mE(a,s)||s;Kd(a[o])&&Kd(n)?a[o]=Vg(a[o],n):Kd(n)?a[o]=Vg({},n):vl(n)?a[o]=n.slice():a[o]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&du(arguments[n],e);return a}const $5=(t,a,e,{allOwnKeys:n}={})=>(du(a,(s,o)=>{e&&ha(s)?t[o]=uE(s,e):t[o]=s},{allOwnKeys:n}),t),q5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Q5=(t,a,e,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),e&&Object.assign(t.prototype,e)},V5=(t,a,e,n)=>{let s,o,l;const u={};if(a=a||{},t==null)return a;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)l=s[o],(!n||n(l,t,a))&&!u[l]&&(a[l]=t[l],u[l]=!0);t=e!==!1&&Jy(t)}while(t&&(!e||e(t,a))&&t!==Object.prototype);return a},X5=(t,a,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=a.length;const n=t.indexOf(a,e);return n!==-1&&n===e},K5=t=>{if(!t)return null;if(vl(t))return t;let a=t.length;if(!hE(a))return null;const e=new Array(a);for(;a-- >0;)e[a]=t[a];return e},J5=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Jy(Uint8Array)),e4=(t,a)=>{const n=(t&&t[wh]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;a.call(t,o[0],o[1])}},t4=(t,a)=>{let e;const n=[];for(;(e=t.exec(a))!==null;)n.push(e);return n},n4=mr("HTMLFormElement"),a4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,s){return n.toUpperCase()+s}),pC=(({hasOwnProperty:t})=>(a,e)=>t.call(a,e))(Object.prototype),r4=mr("RegExp"),gE=(t,a)=>{const e=Object.getOwnPropertyDescriptors(t),n={};du(e,(s,o)=>{let l;(l=a(s,o,t))!==!1&&(n[o]=l||s)}),Object.defineProperties(t,n)},s4=t=>{gE(t,(a,e)=>{if(ha(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(ha(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},i4=(t,a)=>{const e={},n=s=>{s.forEach(o=>{e[o]=!0})};return vl(t)?n(t):n(String(t).split(a)),e},o4=()=>{},l4=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function c4(t){return!!(t&&ha(t.append)&&t[dE]==="FormData"&&t[wh])}const u4=t=>{const a=new Array(10),e=(n,s)=>{if(Sh(n)){if(a.indexOf(n)>=0)return;if(!("toJSON"in n)){a[s]=n;const o=vl(n)?[]:{};return du(n,(l,u)=>{const h=e(l,s+1);!Xc(h)&&(o[u]=h)}),a[s]=void 0,o}}return n};return e(t,0)},d4=mr("AsyncFunction"),f4=t=>t&&(Sh(t)||ha(t))&&ha(t.then)&&ha(t.catch),yE=((t,a)=>t?setImmediate:a?((e,n)=>(Gi.addEventListener("message",({source:s,data:o})=>{s===Gi&&o===e&&n.length&&n.shift()()},!1),s=>{n.push(s),Gi.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",ha(Gi.postMessage)),h4=typeof queueMicrotask<"u"?queueMicrotask.bind(Gi):typeof process<"u"&&process.nextTick||yE,m4=t=>t!=null&&ha(t[wh]),ae={isArray:vl,isArrayBuffer:fE,isBuffer:N5,isFormData:H5,isArrayBufferView:R5,isString:k5,isNumber:hE,isBoolean:L5,isObject:Sh,isPlainObject:Kd,isReadableStream:F5,isRequest:j5,isResponse:W5,isHeaders:G5,isUndefined:Xc,isDate:O5,isFile:P5,isBlob:B5,isRegExp:r4,isFunction:ha,isStream:z5,isURLSearchParams:Y5,isTypedArray:J5,isFileList:U5,forEach:du,merge:Vg,extend:$5,trim:Z5,stripBOM:q5,inherits:Q5,toFlatObject:V5,kindOf:Ch,kindOfTest:mr,endsWith:X5,toArray:K5,forEachEntry:e4,matchAll:t4,isHTMLForm:n4,hasOwnProperty:pC,hasOwnProp:pC,reduceDescriptors:gE,freezeMethods:s4,toObjectSet:i4,toCamelCase:a4,noop:o4,toFiniteNumber:l4,findKey:mE,global:Gi,isContextDefined:pE,isSpecCompliantForm:c4,toJSONObject:u4,isAsyncFn:d4,isThenable:f4,setImmediate:yE,asap:h4,isIterable:m4};function et(t,a,e,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),e&&(this.config=e),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ae.inherits(et,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const vE=et.prototype,bE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bE[t]={value:t}});Object.defineProperties(et,bE);Object.defineProperty(vE,"isAxiosError",{value:!0});et.from=(t,a,e,n,s,o)=>{const l=Object.create(vE);return ae.toFlatObject(t,l,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),et.call(l,t.message,a,e,n,s),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const p4=null;function Xg(t){return ae.isPlainObject(t)||ae.isArray(t)}function wE(t){return ae.endsWith(t,"[]")?t.slice(0,-2):t}function gC(t,a,e){return t?t.concat(a).map(function(s,o){return s=wE(s),!e&&o?"["+s+"]":s}).join(e?".":""):a}function g4(t){return ae.isArray(t)&&!t.some(Xg)}const y4=ae.toFlatObject(ae,{},null,function(a){return/^is[A-Z]/.test(a)});function Eh(t,a,e){if(!ae.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,e=ae.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,E){return!ae.isUndefined(E[S])});const n=e.metaTokens,s=e.visitor||p,o=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(a);if(!ae.isFunction(s))throw new TypeError("visitor must be a function");function m(C){if(C===null)return"";if(ae.isDate(C))return C.toISOString();if(!h&&ae.isBlob(C))throw new et("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(C)||ae.isTypedArray(C)?h&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function p(C,S,E){let I=C;if(C&&!E&&typeof C=="object"){if(ae.endsWith(S,"{}"))S=n?S:S.slice(0,-2),C=JSON.stringify(C);else if(ae.isArray(C)&&g4(C)||(ae.isFileList(C)||ae.endsWith(S,"[]"))&&(I=ae.toArray(C)))return S=wE(S),I.forEach(function(A,k){!(ae.isUndefined(A)||A===null)&&a.append(l===!0?gC([S],k,o):l===null?S:S+"[]",m(A))}),!1}return Xg(C)?!0:(a.append(gC(E,S,o),m(C)),!1)}const v=[],b=Object.assign(y4,{defaultVisitor:p,convertValue:m,isVisitable:Xg});function _(C,S){if(!ae.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));v.push(C),ae.forEach(C,function(I,M){(!(ae.isUndefined(I)||I===null)&&s.call(a,I,ae.isString(M)?M.trim():M,S,b))===!0&&_(I,S?S.concat(M):[M])}),v.pop()}}if(!ae.isObject(t))throw new TypeError("data must be an object");return _(t),a}function yC(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function e0(t,a){this._pairs=[],t&&Eh(t,this,a)}const CE=e0.prototype;CE.append=function(a,e){this._pairs.push([a,e])};CE.toString=function(a){const e=a?function(n){return a.call(this,n,yC)}:yC;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function v4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _E(t,a,e){if(!a)return t;const n=e&&e.encode||v4;ae.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let o;if(s?o=s(a,e):o=ae.isURLSearchParams(a)?a.toString():new e0(a,e).toString(n),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class vC{constructor(){this.handlers=[]}use(a,e,n){return this.handlers.push({fulfilled:a,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ae.forEach(this.handlers,function(n){n!==null&&a(n)})}}const SE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},b4=typeof URLSearchParams<"u"?URLSearchParams:e0,w4=typeof FormData<"u"?FormData:null,C4=typeof Blob<"u"?Blob:null,_4={isBrowser:!0,classes:{URLSearchParams:b4,FormData:w4,Blob:C4},protocols:["http","https","file","blob","url","data"]},t0=typeof window<"u"&&typeof document<"u",Kg=typeof navigator=="object"&&navigator||void 0,S4=t0&&(!Kg||["ReactNative","NativeScript","NS"].indexOf(Kg.product)<0),E4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",x4=t0&&window.location.href||"http://localhost",I4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:t0,hasStandardBrowserEnv:S4,hasStandardBrowserWebWorkerEnv:E4,navigator:Kg,origin:x4},Symbol.toStringTag,{value:"Module"})),qn={...I4,..._4};function D4(t,a){return Eh(t,new qn.classes.URLSearchParams,Object.assign({visitor:function(e,n,s,o){return qn.isNode&&ae.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},a))}function M4(t){return ae.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function A4(t){const a={},e=Object.keys(t);let n;const s=e.length;let o;for(n=0;n<s;n++)o=e[n],a[o]=t[o];return a}function EE(t){function a(e,n,s,o){let l=e[o++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),h=o>=e.length;return l=!l&&ae.isArray(s)?s.length:l,h?(ae.hasOwnProp(s,l)?s[l]=[s[l],n]:s[l]=n,!u):((!s[l]||!ae.isObject(s[l]))&&(s[l]=[]),a(e,n,s[l],o)&&ae.isArray(s[l])&&(s[l]=A4(s[l])),!u)}if(ae.isFormData(t)&&ae.isFunction(t.entries)){const e={};return ae.forEachEntry(t,(n,s)=>{a(M4(n),s,e,0)}),e}return null}function T4(t,a,e){if(ae.isString(t))try{return(a||JSON.parse)(t),ae.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const fu={transitional:SE,adapter:["xhr","http","fetch"],transformRequest:[function(a,e){const n=e.getContentType()||"",s=n.indexOf("application/json")>-1,o=ae.isObject(a);if(o&&ae.isHTMLForm(a)&&(a=new FormData(a)),ae.isFormData(a))return s?JSON.stringify(EE(a)):a;if(ae.isArrayBuffer(a)||ae.isBuffer(a)||ae.isStream(a)||ae.isFile(a)||ae.isBlob(a)||ae.isReadableStream(a))return a;if(ae.isArrayBufferView(a))return a.buffer;if(ae.isURLSearchParams(a))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let u;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return D4(a,this.formSerializer).toString();if((u=ae.isFileList(a))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Eh(u?{"files[]":a}:a,h&&new h,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),T4(a)):a}],transformResponse:[function(a){const e=this.transitional||fu.transitional,n=e&&e.forcedJSONParsing,s=this.responseType==="json";if(ae.isResponse(a)||ae.isReadableStream(a))return a;if(a&&ae.isString(a)&&(n&&!this.responseType||s)){const l=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(a)}catch(u){if(l)throw u.name==="SyntaxError"?et.from(u,et.ERR_BAD_RESPONSE,this,null,this.response):u}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qn.classes.FormData,Blob:qn.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],t=>{fu.headers[t]={}});const N4=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),R4=t=>{const a={};let e,n,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),e=l.substring(0,s).trim().toLowerCase(),n=l.substring(s+1).trim(),!(!e||a[e]&&N4[e])&&(e==="set-cookie"?a[e]?a[e].push(n):a[e]=[n]:a[e]=a[e]?a[e]+", "+n:n)}),a},bC=Symbol("internals");function xc(t){return t&&String(t).trim().toLowerCase()}function Jd(t){return t===!1||t==null?t:ae.isArray(t)?t.map(Jd):String(t)}function k4(t){const a=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)a[n[1]]=n[2];return a}const L4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function cg(t,a,e,n,s){if(ae.isFunction(n))return n.call(this,a,e);if(s&&(a=e),!!ae.isString(a)){if(ae.isString(n))return a.indexOf(n)!==-1;if(ae.isRegExp(n))return n.test(a)}}function O4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,e,n)=>e.toUpperCase()+n)}function P4(t,a){const e=ae.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(s,o,l){return this[n].call(this,a,s,o,l)},configurable:!0})})}let ma=class{constructor(a){a&&this.set(a)}set(a,e,n){const s=this;function o(u,h,m){const p=xc(h);if(!p)throw new Error("header name must be a non-empty string");const v=ae.findKey(s,p);(!v||s[v]===void 0||m===!0||m===void 0&&s[v]!==!1)&&(s[v||h]=Jd(u))}const l=(u,h)=>ae.forEach(u,(m,p)=>o(m,p,h));if(ae.isPlainObject(a)||a instanceof this.constructor)l(a,e);else if(ae.isString(a)&&(a=a.trim())&&!L4(a))l(R4(a),e);else if(ae.isObject(a)&&ae.isIterable(a)){let u={},h,m;for(const p of a){if(!ae.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?ae.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(u,e)}else a!=null&&o(e,a,n);return this}get(a,e){if(a=xc(a),a){const n=ae.findKey(this,a);if(n){const s=this[n];if(!e)return s;if(e===!0)return k4(s);if(ae.isFunction(e))return e.call(this,s,n);if(ae.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,e){if(a=xc(a),a){const n=ae.findKey(this,a);return!!(n&&this[n]!==void 0&&(!e||cg(this,this[n],n,e)))}return!1}delete(a,e){const n=this;let s=!1;function o(l){if(l=xc(l),l){const u=ae.findKey(n,l);u&&(!e||cg(n,n[u],u,e))&&(delete n[u],s=!0)}}return ae.isArray(a)?a.forEach(o):o(a),s}clear(a){const e=Object.keys(this);let n=e.length,s=!1;for(;n--;){const o=e[n];(!a||cg(this,this[o],o,a,!0))&&(delete this[o],s=!0)}return s}normalize(a){const e=this,n={};return ae.forEach(this,(s,o)=>{const l=ae.findKey(n,o);if(l){e[l]=Jd(s),delete e[o];return}const u=a?O4(o):String(o).trim();u!==o&&delete e[o],e[u]=Jd(s),n[u]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const e=Object.create(null);return ae.forEach(this,(n,s)=>{n!=null&&n!==!1&&(e[s]=a&&ae.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,e])=>a+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...e){const n=new this(a);return e.forEach(s=>n.set(s)),n}static accessor(a){const n=(this[bC]=this[bC]={accessors:{}}).accessors,s=this.prototype;function o(l){const u=xc(l);n[u]||(P4(s,l),n[u]=!0)}return ae.isArray(a)?a.forEach(o):o(a),this}};ma.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(ma.prototype,({value:t},a)=>{let e=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[e]=n}}});ae.freezeMethods(ma);function ug(t,a){const e=this||fu,n=a||e,s=ma.from(n.headers);let o=n.data;return ae.forEach(t,function(u){o=u.call(e,o,s.normalize(),a?a.status:void 0)}),s.normalize(),o}function xE(t){return!!(t&&t.__CANCEL__)}function bl(t,a,e){et.call(this,t??"canceled",et.ERR_CANCELED,a,e),this.name="CanceledError"}ae.inherits(bl,et,{__CANCEL__:!0});function IE(t,a,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):a(new et("Request failed with status code "+e.status,[et.ERR_BAD_REQUEST,et.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function B4(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function U4(t,a){t=t||10;const e=new Array(t),n=new Array(t);let s=0,o=0,l;return a=a!==void 0?a:1e3,function(h){const m=Date.now(),p=n[o];l||(l=m),e[s]=h,n[s]=m;let v=o,b=0;for(;v!==s;)b+=e[v++],v=v%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),m-l<a)return;const _=p&&m-p;return _?Math.round(b*1e3/_):void 0}}function z4(t,a){let e=0,n=1e3/a,s,o;const l=(m,p=Date.now())=>{e=p,s=null,o&&(clearTimeout(o),o=null),t.apply(null,m)};return[(...m)=>{const p=Date.now(),v=p-e;v>=n?l(m,p):(s=m,o||(o=setTimeout(()=>{o=null,l(s)},n-v)))},()=>s&&l(s)]}const Qf=(t,a,e=3)=>{let n=0;const s=U4(50,250);return z4(o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,h=l-n,m=s(h),p=l<=u;n=l;const v={loaded:l,total:u,progress:u?l/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-l)/m:void 0,event:o,lengthComputable:u!=null,[a?"download":"upload"]:!0};t(v)},e)},wC=(t,a)=>{const e=t!=null;return[n=>a[0]({lengthComputable:e,total:t,loaded:n}),a[1]]},CC=t=>(...a)=>ae.asap(()=>t(...a)),H4=qn.hasStandardBrowserEnv?((t,a)=>e=>(e=new URL(e,qn.origin),t.protocol===e.protocol&&t.host===e.host&&(a||t.port===e.port)))(new URL(qn.origin),qn.navigator&&/(msie|trident)/i.test(qn.navigator.userAgent)):()=>!0,Y4=qn.hasStandardBrowserEnv?{write(t,a,e,n,s,o){const l=[t+"="+encodeURIComponent(a)];ae.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),ae.isString(n)&&l.push("path="+n),ae.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function F4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function j4(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function DE(t,a,e){let n=!F4(a);return t&&(n||e==!1)?j4(t,a):a}const _C=t=>t instanceof ma?{...t}:t;function eo(t,a){a=a||{};const e={};function n(m,p,v,b){return ae.isPlainObject(m)&&ae.isPlainObject(p)?ae.merge.call({caseless:b},m,p):ae.isPlainObject(p)?ae.merge({},p):ae.isArray(p)?p.slice():p}function s(m,p,v,b){if(ae.isUndefined(p)){if(!ae.isUndefined(m))return n(void 0,m,v,b)}else return n(m,p,v,b)}function o(m,p){if(!ae.isUndefined(p))return n(void 0,p)}function l(m,p){if(ae.isUndefined(p)){if(!ae.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function u(m,p,v){if(v in a)return n(m,p);if(v in t)return n(void 0,m)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(m,p,v)=>s(_C(m),_C(p),v,!0)};return ae.forEach(Object.keys(Object.assign({},t,a)),function(p){const v=h[p]||s,b=v(t[p],a[p],p);ae.isUndefined(b)&&v!==u||(e[p]=b)}),e}const ME=t=>{const a=eo({},t);let{data:e,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:u}=a;a.headers=l=ma.from(l),a.url=_E(DE(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(ae.isFormData(e)){if(qn.hasStandardBrowserEnv||qn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[m,...p]=h?h.split(";").map(v=>v.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...p].join("; "))}}if(qn.hasStandardBrowserEnv&&(n&&ae.isFunction(n)&&(n=n(a)),n||n!==!1&&H4(a.url))){const m=s&&o&&Y4.read(o);m&&l.set(s,m)}return a},W4=typeof XMLHttpRequest<"u",G4=W4&&function(t){return new Promise(function(e,n){const s=ME(t);let o=s.data;const l=ma.from(s.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=s,p,v,b,_,C;function S(){_&&_(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let E=new XMLHttpRequest;E.open(s.method.toUpperCase(),s.url,!0),E.timeout=s.timeout;function I(){if(!E)return;const A=ma.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),O={data:!u||u==="text"||u==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:A,config:t,request:E};IE(function(q){e(q),S()},function(q){n(q),S()},O),E=null}"onloadend"in E?E.onloadend=I:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(I)},E.onabort=function(){E&&(n(new et("Request aborted",et.ECONNABORTED,t,E)),E=null)},E.onerror=function(){n(new et("Network Error",et.ERR_NETWORK,t,E)),E=null},E.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||SE;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new et(k,O.clarifyTimeoutError?et.ETIMEDOUT:et.ECONNABORTED,t,E)),E=null},o===void 0&&l.setContentType(null),"setRequestHeader"in E&&ae.forEach(l.toJSON(),function(k,O){E.setRequestHeader(O,k)}),ae.isUndefined(s.withCredentials)||(E.withCredentials=!!s.withCredentials),u&&u!=="json"&&(E.responseType=s.responseType),m&&([b,C]=Qf(m,!0),E.addEventListener("progress",b)),h&&E.upload&&([v,_]=Qf(h),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",_)),(s.cancelToken||s.signal)&&(p=A=>{E&&(n(!A||A.type?new bl(null,t,E):A),E.abort(),E=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const M=B4(s.url);if(M&&qn.protocols.indexOf(M)===-1){n(new et("Unsupported protocol "+M+":",et.ERR_BAD_REQUEST,t));return}E.send(o||null)})},Z4=(t,a)=>{const{length:e}=t=t?t.filter(Boolean):[];if(a||e){let n=new AbortController,s;const o=function(m){if(!s){s=!0,u();const p=m instanceof Error?m:this.reason;n.abort(p instanceof et?p:new bl(p instanceof Error?p.message:p))}};let l=a&&setTimeout(()=>{l=null,o(new et(`timeout ${a} of ms exceeded`,et.ETIMEDOUT))},a);const u=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),t=null)};t.forEach(m=>m.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>ae.asap(u),h}},$4=function*(t,a){let e=t.byteLength;if(e<a){yield t;return}let n=0,s;for(;n<e;)s=n+a,yield t.slice(n,s),n=s},q4=async function*(t,a){for await(const e of Q4(t))yield*$4(e,a)},Q4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:e,value:n}=await a.read();if(e)break;yield n}}finally{await a.cancel()}},SC=(t,a,e,n)=>{const s=q4(t,a);let o=0,l,u=h=>{l||(l=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await s.next();if(m){u(),h.close();return}let v=p.byteLength;if(e){let b=o+=v;e(b)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),s.return()}},{highWaterMark:2})},xh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",AE=xh&&typeof ReadableStream=="function",V4=xh&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),TE=(t,...a)=>{try{return!!t(...a)}catch{return!1}},X4=AE&&TE(()=>{let t=!1;const a=new Request(qn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),EC=64*1024,Jg=AE&&TE(()=>ae.isReadableStream(new Response("").body)),Vf={stream:Jg&&(t=>t.body)};xh&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Vf[a]&&(Vf[a]=ae.isFunction(t[a])?e=>e[a]():(e,n)=>{throw new et(`Response type '${a}' is not supported`,et.ERR_NOT_SUPPORT,n)})})})(new Response);const K4=async t=>{if(t==null)return 0;if(ae.isBlob(t))return t.size;if(ae.isSpecCompliantForm(t))return(await new Request(qn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(t)||ae.isArrayBuffer(t))return t.byteLength;if(ae.isURLSearchParams(t)&&(t=t+""),ae.isString(t))return(await V4(t)).byteLength},J4=async(t,a)=>{const e=ae.toFiniteNumber(t.getContentLength());return e??K4(a)},eB=xh&&(async t=>{let{url:a,method:e,data:n,signal:s,cancelToken:o,timeout:l,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:v="same-origin",fetchOptions:b}=ME(t);m=m?(m+"").toLowerCase():"text";let _=Z4([s,o&&o.toAbortSignal()],l),C;const S=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let E;try{if(h&&X4&&e!=="get"&&e!=="head"&&(E=await J4(p,n))!==0){let O=new Request(a,{method:"POST",body:n,duplex:"half"}),U;if(ae.isFormData(n)&&(U=O.headers.get("content-type"))&&p.setContentType(U),O.body){const[q,Y]=wC(E,Qf(CC(h)));n=SC(O.body,EC,q,Y)}}ae.isString(v)||(v=v?"include":"omit");const I="credentials"in Request.prototype;C=new Request(a,{...b,signal:_,method:e.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:I?v:void 0});let M=await fetch(C);const A=Jg&&(m==="stream"||m==="response");if(Jg&&(u||A&&S)){const O={};["status","statusText","headers"].forEach($=>{O[$]=M[$]});const U=ae.toFiniteNumber(M.headers.get("content-length")),[q,Y]=u&&wC(U,Qf(CC(u),!0))||[];M=new Response(SC(M.body,EC,q,()=>{Y&&Y(),S&&S()}),O)}m=m||"text";let k=await Vf[ae.findKey(Vf,m)||"text"](M,t);return!A&&S&&S(),await new Promise((O,U)=>{IE(O,U,{data:k,headers:ma.from(M.headers),status:M.status,statusText:M.statusText,config:t,request:C})})}catch(I){throw S&&S(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new et("Network Error",et.ERR_NETWORK,t,C),{cause:I.cause||I}):et.from(I,I&&I.code,t,C)}}),ey={http:p4,xhr:G4,fetch:eB};ae.forEach(ey,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const xC=t=>`- ${t}`,tB=t=>ae.isFunction(t)||t===null||t===!1,NE={getAdapter:t=>{t=ae.isArray(t)?t:[t];const{length:a}=t;let e,n;const s={};for(let o=0;o<a;o++){e=t[o];let l;if(n=e,!tB(e)&&(n=ey[(l=String(e)).toLowerCase()],n===void 0))throw new et(`Unknown adapter '${l}'`);if(n)break;s[l||"#"+o]=n}if(!n){const o=Object.entries(s).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(xC).join(`
`):" "+xC(o[0]):"as no adapter specified";throw new et("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:ey};function dg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bl(null,t)}function IC(t){return dg(t),t.headers=ma.from(t.headers),t.data=ug.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NE.getAdapter(t.adapter||fu.adapter)(t).then(function(n){return dg(t),n.data=ug.call(t,t.transformResponse,n),n.headers=ma.from(n.headers),n},function(n){return xE(n)||(dg(t),n&&n.response&&(n.response.data=ug.call(t,t.transformResponse,n.response),n.response.headers=ma.from(n.response.headers))),Promise.reject(n)})}const RE="1.9.0",Ih={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{Ih[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});const DC={};Ih.transitional=function(a,e,n){function s(o,l){return"[Axios v"+RE+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,u)=>{if(a===!1)throw new et(s(l," has been removed"+(e?" in "+e:"")),et.ERR_DEPRECATED);return e&&!DC[l]&&(DC[l]=!0,console.warn(s(l," has been deprecated since v"+e+" and will be removed in the near future"))),a?a(o,l,u):!0}};Ih.spelling=function(a){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${a}`),!0)};function nB(t,a,e){if(typeof t!="object")throw new et("options must be an object",et.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],l=a[o];if(l){const u=t[o],h=u===void 0||l(u,o,t);if(h!==!0)throw new et("option "+o+" must be "+h,et.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new et("Unknown option "+o,et.ERR_BAD_OPTION)}}const ef={assertOptions:nB,validators:Ih},Ar=ef.validators;let Vi=class{constructor(a){this.defaults=a||{},this.interceptors={request:new vC,response:new vC}}async request(a,e){try{return await this._request(a,e)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(a,e){typeof a=="string"?(e=e||{},e.url=a):e=a||{},e=eo(this.defaults,e);const{transitional:n,paramsSerializer:s,headers:o}=e;n!==void 0&&ef.assertOptions(n,{silentJSONParsing:Ar.transitional(Ar.boolean),forcedJSONParsing:Ar.transitional(Ar.boolean),clarifyTimeoutError:Ar.transitional(Ar.boolean)},!1),s!=null&&(ae.isFunction(s)?e.paramsSerializer={serialize:s}:ef.assertOptions(s,{encode:Ar.function,serialize:Ar.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),ef.assertOptions(e,{baseUrl:Ar.spelling("baseURL"),withXsrfToken:Ar.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&ae.merge(o.common,o[e.method]);o&&ae.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),e.headers=ma.concat(l,o);const u=[];let h=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(e)===!1||(h=h&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const m=[];this.interceptors.response.forEach(function(S){m.push(S.fulfilled,S.rejected)});let p,v=0,b;if(!h){const C=[IC.bind(this),void 0];for(C.unshift.apply(C,u),C.push.apply(C,m),b=C.length,p=Promise.resolve(e);v<b;)p=p.then(C[v++],C[v++]);return p}b=u.length;let _=e;for(v=0;v<b;){const C=u[v++],S=u[v++];try{_=C(_)}catch(E){S.call(this,E);break}}try{p=IC.call(this,_)}catch(C){return Promise.reject(C)}for(v=0,b=m.length;v<b;)p=p.then(m[v++],m[v++]);return p}getUri(a){a=eo(this.defaults,a);const e=DE(a.baseURL,a.url,a.allowAbsoluteUrls);return _E(e,a.params,a.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(a){Vi.prototype[a]=function(e,n){return this.request(eo(n||{},{method:a,url:e,data:(n||{}).data}))}});ae.forEach(["post","put","patch"],function(a){function e(n){return function(o,l,u){return this.request(eo(u||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Vi.prototype[a]=e(),Vi.prototype[a+"Form"]=e(!0)});let aB=class kE{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(u=>{n.subscribe(u),o=u}).then(s);return l.cancel=function(){n.unsubscribe(o)},l},a(function(o,l,u){n.reason||(n.reason=new bl(o,l,u),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const e=this._listeners.indexOf(a);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const a=new AbortController,e=n=>{a.abort(n)};return this.subscribe(e),a.signal.unsubscribe=()=>this.unsubscribe(e),a.signal}static source(){let a;return{token:new kE(function(s){a=s}),cancel:a}}};function rB(t){return function(e){return t.apply(null,e)}}function sB(t){return ae.isObject(t)&&t.isAxiosError===!0}const ty={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ty).forEach(([t,a])=>{ty[a]=t});function LE(t){const a=new Vi(t),e=uE(Vi.prototype.request,a);return ae.extend(e,Vi.prototype,a,{allOwnKeys:!0}),ae.extend(e,a,null,{allOwnKeys:!0}),e.create=function(s){return LE(eo(t,s))},e}const mn=LE(fu);mn.Axios=Vi;mn.CanceledError=bl;mn.CancelToken=aB;mn.isCancel=xE;mn.VERSION=RE;mn.toFormData=Eh;mn.AxiosError=et;mn.Cancel=mn.CanceledError;mn.all=function(a){return Promise.all(a)};mn.spread=rB;mn.isAxiosError=sB;mn.mergeConfig=eo;mn.AxiosHeaders=ma;mn.formToJSON=t=>EE(ae.isHTMLForm(t)?new FormData(t):t);mn.getAdapter=NE.getAdapter;mn.HttpStatusCode=ty;mn.default=mn;const{Axios:fH,AxiosError:hH,CanceledError:mH,isCancel:pH,CancelToken:gH,VERSION:yH,all:vH,Cancel:bH,isAxiosError:wH,spread:CH,toFormData:_H,AxiosHeaders:SH,HttpStatusCode:EH,formToJSON:xH,getAdapter:IH,mergeConfig:DH}=mn,iB="AIzaSyCr05_9Bg1oZE7uJcGg48mWzOo4rLjxTQ8";async function Dh(t,a){const e=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/${encodeURIComponent(a)}?key=${iB}`;return(await mn.get(e)).data.values}const oB="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",lB="BCAPL SIGNUP";function MC(t){if(!t)return"";t=t.trim().toLowerCase().replace(/\s+/g,"");let a=t.match(/^(\d{1,2})(:?(\d{2}))?(am|pm)$/);if(!a)return t.toUpperCase();let[,e,,n,s]=a;return n||(n="00"),`${parseInt(e,10)}:${n} ${s.toUpperCase()}`}function cB(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const s=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(s){const[o,l,u,h]=s,m=a[l];if(m){const p=MC(u),v=MC(h);e[m].push(`${p} - ${v}`)}}}),e}async function uB(t){try{if(!t)return console.warn("No division selected for standings"),[];const a=t.replace(/[^A-Za-z0-9]/g,"_"),e=`${ht}/static/standings_${a}.json`,n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch standings: ${n.status}`);const s=await n.json();if(!Array.isArray(s))return console.error("Standings data is not an array:",s),[];const o=s.filter(l=>{if(!l||typeof l!="object")return console.warn("Invalid standings entry:",l),!1;if(!l.name||!l.rank)return console.warn("Standings entry missing name or rank:",l),!1;const u=parseInt(l.rank);return isNaN(u)||u<=0?(console.warn("Invalid rank in standings entry:",l),!1):!0});return console.log(`Loaded ${o.length} valid standings entries for division: ${t}`),o}catch(a){return console.error("Failed to load standings:",a),[]}}function fl(t,a){if(!a||typeof a!="string")return console.warn("getPlayerPosition: playerName is undefined or not a string:",a),null;const e=a.toLowerCase().trim(),n=t.find(s=>s.name&&s.name.toLowerCase().trim()===e);return n?parseInt(n.rank):null}function dB(t,a){return t.sort((e,n)=>{const s=e&&e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"",o=n&&n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:"",l=fl(a,s),u=fl(a,o);return l!==null&&u!==null?l-u:l!==null&&u===null?-1:l===null&&u!==null?1:s.localeCompare(o)})}function fB(t,a,e){if(!a||a.length===0)return console.warn("No standings data available for Phase 2 filtering"),t;console.log("=== PHASE 2 FILTERING DEBUG ==="),console.log("Current player name:",e),console.log("Standings data:",a),console.log("All players from sheet:",t.map(o=>`${o.firstName} ${o.lastName}`));const n=fl(a,e);if(n===null)return console.warn(`Player ${e} not found in standings`),console.log("Available standings names:",a.map(o=>o.name)),t;console.log(`Phase 2 filtering: ${e} is at position ${n}`);const s=t.filter(o=>{if(!o||!o.firstName||!o.lastName)return console.warn("Player data incomplete, excluding from Phase 2 filtering:",o),!1;const l=`${o.firstName} ${o.lastName}`,u=fl(a,l);if(u===null)return console.warn(`Opponent ${l} not found in standings - excluding from Phase 2`),!1;const h=u-n,m=h<0&&h>=-4;return console.log(`${l} (${u}) - difference: ${h}, eligible: ${m}`),m});return console.log(`Phase 2 filtering complete: ${s.length} eligible opponents out of ${t.length} total players`),console.log("Eligible players:",s.map(o=>`${o.firstName} ${o.lastName}`)),console.log("=== END PHASE 2 DEBUG ==="),s}function ny({onClose:t,excludeName:a,senderName:e,senderEmail:n,onProposalComplete:s,selectedDivision:o,phase:l}){const[u,h]=w.useState([]),[m,p]=w.useState(""),[v,b]=w.useState(!0),[_,C]=w.useState([]),[S,E]=w.useState("search"),[I,M]=w.useState(null),[A,k]=w.useState(null);w.useEffect(()=>{},[u]),w.useEffect(()=>{let Y=!0;async function $(){try{const K=await uB(o);Y&&C(K);const pe=await Dh(oB,`${lB}!A1:L1000`);if(!pe||pe.length===0){Y&&h([]),b(!1);return}let ie=pe.slice(1).map(ne=>({firstName:ne[0]||"",lastName:ne[1]||"",email:ne[2]||"",phone:ne[3]||"",locations:ne[8]||"",availability:cB(ne[7]||""),pin:ne[11]||"",preferredContacts:(ne[10]||"").split(/\r?\n/).map(se=>se.trim().toLowerCase()).filter(Boolean)})).filter(ne=>ne.email&&ne.firstName&&ne.lastName&&`${ne.firstName} ${ne.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase()));l==="challenge"&&K.length>0?(console.log(" Phase value:",l),console.log(" Standings data length:",K.length),console.log(" Sender name:",e),ie=fB(ie,K,e),ie=dB(ie,K)):(console.log("   - phase === 'challenge':",l==="challenge"),console.log("   - standingsData.length > 0:",K.length>0),console.log("   - phase value:",l),console.log("   - standingsData length:",K.length)),Y&&(h(ie),setTimeout(()=>{},2e3))}catch(K){console.error("Error loading data:",K),Y&&h([])}finally{Y&&b(!1)}}return $(),()=>{Y=!1}},[a,l,e,o]);const O=m.length>=3?u.filter(Y=>`${Y.firstName} ${Y.lastName}`.toLowerCase().includes(m.toLowerCase())&&`${Y.firstName} ${Y.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase())):[],U=fl(_,e),q=f.createElement(f.Fragment,null,S==="search"&&f.createElement(zn,{open:!0,onClose:t,title:" Player Search",maxWidth:"500px"},l==="challenge"?f.createElement(f.Fragment,null,f.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",color:"#fff"}},f.createElement("strong",null,"Phase 2 (Challenge):")," You can only challenge players ranked 4 spots above in the standings.",f.createElement("br",null),f.createElement("span",{style:{fontSize:"1rem",color:"#fff",marginTop:8,display:"block"}},f.createElement("b",null,"Your Position:")," #",U??"N/A"),u.length>0&&f.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",opacity:.9}},u.length," eligible opponent",u.length!==1?"s":""," available")),v?f.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):f.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},u.length===0?f.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No eligible opponents found within 4 spots above you in the standings."):f.createElement("div",{style:{display:"grid",gap:"8px"}},u.map((Y,$)=>{const K=`${Y.firstName} ${Y.lastName}`,pe=fl(_,K);return f.createElement("button",{key:$,onClick:()=>{M(Y),E("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:ie=>{ie.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",ie.target.style.transform="translateY(-2px)",ie.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:ie=>{ie.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",ie.target.style.transform="translateY(0)",ie.target.style.boxShadow="none"}},f.createElement("span",{style:{fontWeight:"bold",color:"#fff"}},"#",pe??"N/A"," ",K))})))):f.createElement(f.Fragment,null,m.length>=3&&O.length>0&&f.createElement("div",{style:{color:"#e53e3e",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center"}},"Click opponent's name to see availability."),f.createElement("input",{type:"text",placeholder:"Type at least 3 letters to search...",value:m,onChange:Y=>p(Y.target.value),autoFocus:!0,"aria-label":"Search for player",style:{width:"100%",padding:"0.75rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontSize:"1rem",marginBottom:"1rem"}}),v?f.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):f.createElement(f.Fragment,null,m.length<3?f.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"Please enter at least 3 letters to search for a player."):f.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},O.length===0?f.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No players found."):f.createElement("div",{style:{display:"grid",gap:"8px"}},O.map((Y,$)=>f.createElement("button",{key:$,onClick:()=>{M(Y),E("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:K=>{K.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",K.target.style.transform="translateY(-2px)",K.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:K=>{K.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",K.target.style.transform="translateY(0)",K.target.style.boxShadow="none"}},f.createElement(mT,{text:`${Y.firstName} ${Y.lastName}`,query:m})))))))),S==="availability"&&I&&f.createElement(ky,{player:I,onClose:t,onProposeMatch:(Y,$,K,pe)=>{k({player:I,day:Y,slot:$,phase:K,selectedDivision:pe||o}),E("proposal")},phase:l,selectedDivision:o}),S==="proposal"&&A&&f.createElement(f.Fragment,null,f.createElement(Ky,{player:A.player,day:A.day,slot:A.slot,onClose:t,senderName:e,senderEmail:n,onProposalComplete:()=>{E("search"),k(null),M(null),s&&s(),t()},phase:A.phase,selectedDivision:A.selectedDivision||o})));return eu.createPortal(q,document.body)}function ay({loading:t,children:a,loadingText:e="Loading...",disabled:n=!1,...s}){return f.createElement("button",{...s,disabled:t||n,style:{...s.style,position:"relative",opacity:t?.7:1,cursor:t?"not-allowed":"pointer"}},t?f.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},f.createElement("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTop:"2px solid #fff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e):a,f.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `))}function hB({lines:t=3,height:a="20px",width:e="100%",gap:n="8px"}){return f.createElement("div",{style:{display:"flex",flexDirection:"column",gap:n,padding:"16px"}},Array.from({length:t}).map((s,o)=>f.createElement("div",{key:o,style:{height:a,width:o===t-1?"60%":e,background:"linear-gradient(90deg, #333 25%, #444 50%, #333 75%)",backgroundSize:"200% 100%",borderRadius:"4px",animation:"shimmer 1.5s infinite"}})),f.createElement("style",null,`
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
      `))}function mB(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function pB({proposal:t,open:a,onClose:e,onEdit:n,onMessage:s}){if(w.useEffect(()=>{a&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)},[a]),!a||!t)return null;const{senderName:o,receiverName:l,day:u,date:h,time:m,location:p,gameType:v,raceLength:b,message:_,proposalNote:C}=t,S=window.innerWidth<=500,[E,I]=w.useState(!1),[M,A]=w.useState("");async function k(){I(!0),A("");try{if(!(await fetch(`${ht}/api/proposals/${t._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed"})})).ok)throw new Error("Failed to confirm proposal");e&&e()}catch(U){A(U.message||"Failed to confirm proposal")}finally{I(!1)}}const O=f.createElement(zn,{open:a,onClose:e,title:" Proposal Details",maxWidth:S?"99vw":"480px"},t.isCounter&&f.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:8,fontSize:"1.05em",textAlign:"center"}},"This is a counter proposal from ",t.counteredBy||"your opponent"),f.createElement("div",{style:{textAlign:"left",marginBottom:S?"0.7rem":"1.5rem",fontSize:S?"0.95rem":"1.05rem",padding:S?"0.2rem 0.2rem":void 0}},f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"You:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},o||"N/A")),f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Opponent:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},l||"N/A")),u&&f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Day:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},u)),f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Date:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},mB(h))),f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Time:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},m||"N/A")),f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Location:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},p||"N/A")),v&&f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement(ah,{gameType:v,size:S?12:16}),f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Game:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},v)),b&&f.createElement("div",{className:fe.modalDetailRowSnazzy,style:{padding:S?"0.2em 0.3em":void 0}},f.createElement("strong",{style:{color:"#e53e3e",minWidth:S?"80px":"120px",fontSize:S?"0.95em":void 0}},"Race:"),f.createElement("span",{style:{color:"#fff",marginLeft:S?"4px":"8px"}},b)),C&&f.createElement("div",{style:{margin:S?"8px 0 0 0":"16px 0 0 0",padding:S?"0.4rem 0.5rem":"0.8rem 1rem",background:"rgba(255, 193, 7, 0.1)",borderLeft:"3px solid #ffc107",borderRadius:"6px",color:"#ffc107",fontSize:S?"0.9rem":"0.95rem",textAlign:"left"}},f.createElement("span",{role:"img","aria-label":"note"},"")," ",f.createElement("strong",null,"Note:"),f.createElement("br",null),C)),f.createElement("div",{style:{display:"flex",gap:S?6:12,justifyContent:"center",marginTop:S?10:24,flexDirection:S?"column":"row",alignItems:S?"stretch":"center"}},n&&f.createElement("button",{className:fe.dashboardBtn,onClick:n,style:{background:"#e53e3e",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Edit"),s&&f.createElement("button",{className:fe.dashboardBtn,onClick:s,style:{background:"#007bff",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Msg"),t.isCounter&&t.status==="countered"&&f.createElement(ay,{className:fe.dashboardBtn,onClick:k,loading:E,loadingText:"Confirming...",disabled:E,style:{background:"#43a047",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Confirm"),f.createElement("button",{className:fe.dashboardBtn,onClick:e,style:{background:"#6c757d",color:"#fff",minWidth:S?"90px":"120px",fontSize:S?"0.95em":void 0,padding:S?"0.5em 0.7em":void 0}},"Close")),M&&f.createElement("div",{style:{color:"red",marginTop:8}},M));return eu.createPortal(O,document.body)}function fg(t){const a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}-${e}-${n}`}function gB(t){const e=t.trim().replace(/\s+/g,"").toLowerCase().match(/^(\d{1,2})(:\d{2})?(am|pm)$/);if(e){const s=e[1],o=e[2]?e[2]:":00",l=e[3].toUpperCase();return`${s}${o} ${l}`}const n=t.trim().match(/^(\d{1,2})(:\d{2})?\s?(am|pm)$/i);if(n){const s=n[1],o=n[2]?n[2]:":00",l=n[3].toUpperCase();return`${s}${o} ${l}`}return t.trim()}const yB=t=>t.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();function vB({proposal:t,open:a,onClose:e,onSave:n,selectedDivision:s,phase:o,receiverPlayer:l}){var R;const[u,h]=w.useState(new Date),[m,p]=w.useState(""),[v,b]=w.useState(""),[_,C]=w.useState(""),[S,E]=w.useState(""),[I,M]=w.useState(""),[A,k]=w.useState(""),[O,U]=w.useState(""),[q,Y]=w.useState(!1);w.useEffect(()=>{if(t&&a){if(t.date){const[P,G,Q]=t.date.split("-");h(new Date(parseInt(P),parseInt(G)-1,parseInt(Q)))}p(t.time||""),C(t.location||""),E(t.message||""),M(t.gameType||""),k(t.raceLength||"")}},[t,a]);const K=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][u.getDay()],ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()],ne=((R=l==null?void 0:l.availability)==null?void 0:R[ie])||[];console.log("EditProposalModal - Receiver player:",l),console.log("EditProposalModal - Selected day short:",ie),console.log("EditProposalModal - Opponent time blocks:",ne);const se=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],z=ne.length>0?ne:se;console.log("EditProposalModal - Available time blocks:",z);const D=!l&&a,H=f.useMemo(()=>{if(!m)return console.log("EditProposalModal - No time selected:",m),[];console.log("EditProposalModal - Selected time block:",m);const P=yB(m);if(console.log("EditProposalModal - Normalized slot:",P),!P.includes(" - "))return console.log("EditProposalModal - No dash found in normalized slot"),[];let[G,Q]=P.split(" - ").map(Ee=>gB(Ee.trim()));if(console.log("EditProposalModal - Normalized times:",{blockStart:G,blockEnd:Q}),!G||!Q)return console.log("EditProposalModal - Failed to normalize times"),[];const re=Ry(G,Q,30);return console.log("EditProposalModal - Generated start times:",re),console.log("EditProposalModal - Times array length:",re.length),re},[m]);w.useEffect(()=>{b("")},[m]);const W=async()=>{if(!v||!_){U("Please fill in all required fields.");return}Y(!0),U("");try{const P=await fetch(`${ht}/api/proposals/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:fg(u),time:v,location:_,message:S,gameType:I,raceLength:A,phase:o,divisions:[s]})}),G=await P.json();if(!P.ok)throw new Error(G.error||"Failed to update proposal");n&&n({...t,date:fg(u),time:v,location:_,message:S,gameType:I,raceLength:A}),e()}catch(P){U(P.message||"Failed to update proposal")}finally{Y(!1)}};if(!a||!t)return null;const F=f.createElement(zn,{open:a,onClose:e,title:" Edit Proposal",maxWidth:"400px"},f.createElement("div",{className:fe.proposalModalContent,style:{width:"100%",maxWidth:400,margin:"0 auto"}},f.createElement("div",{className:fe.proposalModalHeaderBar},f.createElement("span",{className:fe.phasePill},"Phase 1: Scheduled Match Phase"),f.createElement("span",{className:fe.divisionPill},"Division: ",s||"N/A")),f.createElement("div",{className:fe.proposalModalToRow},f.createElement("span",{className:fe.toOpponentLabel},"To Opponent:"),f.createElement("span",{className:fe.toOpponentName},t.receiverName)),f.createElement("div",{className:fe.proposalModalDayRow},f.createElement("span",{className:fe.dayLabel},"Day:"),f.createElement("span",{className:fe.dayValue},K)),f.createElement("div",{className:fe.formGroup,style:{display:"flex",flexDirection:"column",alignItems:"center"}},f.createElement("label",{htmlFor:"proposal-date",style:{marginBottom:4,textAlign:"center"}},"Date"),f.createElement("input",{id:"proposal-date",type:"date",value:fg(u),onChange:P=>{const[G,Q,re]=P.target.value.split("-");h(new Date(parseInt(G),parseInt(Q)-1,parseInt(re)))},className:fe.input,required:!0,style:{textAlign:"center"}})),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Time Block:"),D&&f.createElement("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",marginBottom:"0.5rem"}}," Opponent availability data not available. Using default time blocks."),l&&ne.length===0&&f.createElement("div",{style:{color:"#ffa500",fontSize:"0.9rem",marginBottom:"0.5rem"}}," No availability for ",K,". Using default time blocks."),f.createElement("select",{value:m,onChange:P=>p(P.target.value),className:fe.inputField},f.createElement("option",{value:""},"Select time block"),z.map(P=>f.createElement("option",{key:P,value:P},P)))),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Start Time:"),f.createElement("select",{value:v,onChange:P=>b(P.target.value),className:fe.inputField},f.createElement("option",{value:""},"Select start time"),H.map(P=>f.createElement("option",{key:P,value:P},P)))),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Game Type:"),f.createElement("select",{value:I,onChange:P=>M(P.target.value),className:fe.inputField},f.createElement("option",{value:""},"Select game type"),f.createElement("option",{value:"8 Ball"},"8 Ball"),f.createElement("option",{value:"9 Ball"},"9 Ball"),f.createElement("option",{value:"10 Ball"},"10 Ball"),f.createElement("option",{value:"Mixed"},"Mixed"))),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Race Length:"),f.createElement("select",{value:A,onChange:P=>k(P.target.value),className:fe.inputField},f.createElement("option",{value:""},"Select race length"),f.createElement("option",{value:"3"},"3"),f.createElement("option",{value:"5"},"5"),f.createElement("option",{value:"7"},"7"),f.createElement("option",{value:"9"},"9"))),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Location:"),f.createElement("input",{type:"text",value:_,onChange:P=>C(P.target.value),placeholder:"Enter location",className:fe.inputField})),f.createElement("div",{className:fe.proposalModalFieldRow},f.createElement("span",{className:fe.fieldLabel},"Message to Opponent:"),f.createElement("textarea",{value:S,onChange:P=>E(P.target.value),placeholder:"Message to opponent",rows:3,className:fe.inputField})),O&&f.createElement("div",{className:fe.errorBox},O),f.createElement("div",{className:fe.proposalModalButtonRow},f.createElement("button",{className:fe.dashboardBtn,onClick:W,disabled:q,style:{width:"48%"}},q?"Saving...":"Save Changes"),f.createElement("button",{className:fe.dashboardBtn,onClick:e,disabled:q,style:{width:"48%"}},"Cancel"))));return eu.createPortal(F,document.body)}const bB="_container_qqpwh_3",wB="_header_qqpwh_23",CB="_headerButtons_qqpwh_57",_B="_newChatButton_qqpwh_69",SB="_closeButton_qqpwh_101",EB="_content_qqpwh_133",xB="_conversationsList_qqpwh_147",IB="_loading_qqpwh_181",DB="_emptyState_qqpwh_193",MB="_startChatButton_qqpwh_215",AB="_conversationItems_qqpwh_245",TB="_conversationItem_qqpwh_245",NB="_active_qqpwh_283",RB="_conversationInfo_qqpwh_293",kB="_conversationName_qqpwh_303",LB="_lastMessage_qqpwh_321",OB="_conversationMeta_qqpwh_345",PB="_timestamp_qqpwh_361",BB="_unreadBadge_qqpwh_379",UB="_messagesArea_qqpwh_407",zB="_messagesHeader_qqpwh_421",HB="_messagesList_qqpwh_447",YB="_messageItem_qqpwh_465",FB="_myMessage_qqpwh_475",jB="_theirMessage_qqpwh_483",WB="_messageBubble_qqpwh_491",GB="_messageContent_qqpwh_527",ZB="_messageTime_qqpwh_539",$B="_readStatus_qqpwh_563",qB="_noConversation_qqpwh_571",QB="_messageInput_qqpwh_591",VB="_sendButton_qqpwh_647",XB="_playerList_qqpwh_769",KB="_playerItem_qqpwh_781",JB="_selected_qqpwh_807",eU="_playerName_qqpwh_817",tU="_modalActions_qqpwh_847",nU="_cancelButton_qqpwh_861",aU="_startButton_qqpwh_893",rU="_error_qqpwh_939",at={container:bB,header:wB,headerButtons:CB,newChatButton:_B,closeButton:SB,content:EB,conversationsList:xB,loading:IB,emptyState:DB,startChatButton:MB,conversationItems:AB,conversationItem:TB,active:NB,conversationInfo:RB,conversationName:kB,lastMessage:LB,conversationMeta:OB,timestamp:PB,unreadBadge:BB,messagesArea:UB,messagesHeader:zB,messagesList:HB,messageItem:YB,myMessage:FB,theirMessage:jB,messageBubble:WB,messageContent:GB,messageTime:ZB,readStatus:$B,noConversation:qB,messageInput:QB,sendButton:VB,playerList:XB,playerItem:KB,selected:JB,playerName:eU,modalActions:tU,cancelButton:nU,startButton:aU,error:rU};console.log("DirectMessagingModal BACKEND_URL in use:",ht);function sU({userName:t,userEmail:a,userPin:e,selectedDivision:n,opponentEmails:s=[],onClose:o}){console.log("Opponent Emails:",s);const[l,u]=w.useState([]),[h,m]=w.useState(null),[p,v]=w.useState([]),[b,_]=w.useState(""),[C,S]=w.useState(!1),[E,I]=w.useState(!1),[M,A]=w.useState(""),[k,O]=w.useState([]),[U,q]=w.useState(!1),[Y,$]=w.useState(null),K=w.useRef(null);w.useEffect(()=>{async function D(){try{const W=await(await fetch(`${ht}/api/users`)).json();Array.isArray(W)&&O(W.filter(F=>F.email!==a))}catch(H){console.error("Failed to load players:",H)}}D()},[a]),w.useEffect(()=>{async function D(){S(!0);try{const W=await(await fetch(`${ht}/api/messages/conversations?user=${encodeURIComponent(a)}`)).json();console.log("Conversations fetch data:",W),Array.isArray(W)&&u(W)}catch(H){console.error("Failed to load conversations:",H),A("Failed to load conversations")}finally{S(!1)}}D()},[a]),w.useEffect(()=>{if(!h){v([]);return}async function D(){try{const W=await(await fetch(`${ht}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(h.email)}`)).json();Array.isArray(W)&&(v(W),W.forEach(F=>{F.receiverEmail===a&&!F.read&&fetch(`${ht}/api/messages/${F._id}/read`,{method:"PUT"})}))}catch(H){console.error("Failed to load messages:",H),A("Failed to load messages")}}D()},[h,a]),w.useEffect(()=>{K.current&&K.current.scrollIntoView({behavior:"smooth"})},[p]);const pe=async()=>{if(!b.trim()||!h)return;I(!0),A("");let D=h.email;if(!D){const H=k.find(W=>W.name===h.name&&W.email);H&&(D=H.email)}if(console.log("Sending message to:",D),!D){A("No email found for selected opponent."),I(!1);return}try{const H=await fetch(`${ht}/api/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:a,receiverEmail:D,content:b})});if(console.log("Send response:",H),!H.ok)throw new Error("Failed to send message");_("");const F=await(await fetch(`${ht}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(D)}`)).json();Array.isArray(F)&&v(F)}catch(H){A(H.message||"Failed to send message")}finally{I(!1)}},ie=async()=>{Y&&(m(Y),q(!1),$(null))},ne=D=>D.unreadCount||0,se=D=>{const H=new Date(D),F=(new Date-H)/(1e3*60*60);return F<24?H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):F<48?"Yesterday":H.toLocaleDateString()},z=k.filter(D=>s.length>0?s.includes(D.name):n?Array.isArray(D.divisions)?D.divisions.includes(n):typeof D.divisions=="string"?D.divisions.split(",").map(H=>H.trim()).includes(n):!1:!0).sort((D,H)=>{const W=`${D.name||""}`.trim().toLowerCase(),F=`${H.name||""}`.trim().toLowerCase();return W.localeCompare(F)});return f.createElement("div",{className:at.container},f.createElement("div",{className:at.header},f.createElement("h2",null,"Direct Messages"),f.createElement("div",{className:at.headerButtons},f.createElement("button",{className:at.newChatButton,onClick:()=>q(!0),type:"button"}," New Chat"),f.createElement("button",{className:at.closeButton,onClick:o,type:"button"},""))),f.createElement("div",{className:at.content},f.createElement("div",{className:at.conversationsList},f.createElement("h3",null,"Conversations"),C?f.createElement("div",{className:at.loading},"Loading conversations..."):l.length===0?f.createElement("div",{className:at.emptyState},f.createElement("p",null,"No conversations yet"),f.createElement("button",{className:at.startChatButton,onClick:()=>q(!0),type:"button"},"Start a conversation")):f.createElement("div",{className:at.conversationItems},l.map(D=>f.createElement("div",{key:D.email,className:`${at.conversationItem} ${(h==null?void 0:h.email)===D.email?at.active:""}`,onClick:()=>m(D)},f.createElement("div",{className:at.conversationInfo},f.createElement("div",{className:at.conversationName},D.name||D.email),f.createElement("div",{className:at.lastMessage},D.lastMessage||"No messages yet")),f.createElement("div",{className:at.conversationMeta},f.createElement("div",{className:at.timestamp},D.lastMessageTime?se(D.lastMessageTime):""),ne(D)>0&&f.createElement("div",{className:at.unreadBadge},ne(D))))))),f.createElement("div",{className:at.messagesArea},h?f.createElement(f.Fragment,null,f.createElement("div",{className:at.messagesHeader},f.createElement("h3",null,"Chat with ",h.name||h.email)),f.createElement("div",{className:at.messagesList},p.map(D=>f.createElement("div",{key:D._id,className:`${at.messageItem} ${D.senderEmail===a?at.myMessage:at.theirMessage}`},f.createElement("div",{className:at.messageBubble},f.createElement("div",{className:at.messageContent},D.content),f.createElement("div",{className:at.messageTime},se(D.timestamp),D.senderEmail===a&&f.createElement("span",{className:at.readStatus},D.read?"":""))))),f.createElement("div",{ref:K})),f.createElement("div",{className:at.messageInput},f.createElement("input",{type:"text",value:b,onChange:D=>_(D.target.value),onKeyDown:D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),pe())},placeholder:"Type a message...",disabled:E}),f.createElement("button",{onClick:pe,disabled:E||!b.trim(),className:at.sendButton,type:"button"},"Send"))):f.createElement("div",{className:at.noConversation},f.createElement("p",null,"Select a conversation to start messaging")))),U&&f.createElement(zn,{open:U,onClose:()=>{q(!1),$(null)},title:"Start New Conversation",maxWidth:"400px"},f.createElement("button",{style:{position:"absolute",top:10,right:10,background:"none",border:"none",color:"#fff",fontSize:24,cursor:"pointer",zIndex:10001},onClick:()=>{q(!1),$(null)},"aria-label":"Close",type:"button"},""),f.createElement("div",{className:at.playerList},z.map(D=>f.createElement("div",{key:D._id||D.email,className:`${at.playerItem} ${(Y==null?void 0:Y.email)===D.email?at.selected:""}`,onClick:()=>$(D)},f.createElement("div",{className:at.playerName},D.name?D.name:D.email)))),f.createElement("div",{className:at.modalActions},f.createElement("button",{onClick:()=>{q(!1),$(null)},className:at.cancelButton,type:"button"},"Cancel"),f.createElement("button",{onClick:ie,disabled:!Y,className:at.startButton,type:"button"},"Start Chat"))),M&&f.createElement("div",{className:at.error},M))}class iU{async getCurrentSeason(a){try{const e=await fetch(`${ht}/api/seasons/current/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current season:",e),null}}async getCurrentPhaseAndWeek(a){try{const e=await fetch(`${ht}/api/seasons/phase/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current phase and week:",e),{currentWeek:null,phase:"offseason",isActive:!1,season:null}}}async getAllSeasons(a){try{const e=await fetch(`${ht}/api/seasons/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching all seasons:",e),[]}}isMatchWithinPhase1Deadline(a,e){if(!e||!e.phase1End)return!0;const n=new Date(a),s=new Date(e.phase1End);return n<=s}getDaysUntilPhase1Deadline(a){if(!a||!a.phase1End)return null;const e=new Date,s=new Date(a.phase1End)-e;return Math.ceil(s/(1e3*60*60*24))}hasPhase1DeadlinePassed(a){if(!a||!a.phase1End)return!1;const e=new Date,n=new Date(a.phase1End);return e>n}hasPhase2Started(a){if(!a||!a.phase2Start)return!1;const e=new Date,n=new Date(a.phase2Start);return e>=n}getCurrentPhaseFromDates(a){if(!a)return"offseason";const e=new Date,n=new Date(a.phase1Start),s=new Date(a.phase1End),o=new Date(a.phase2Start),l=new Date(a.phase2End);return e<n?"offseason":e>=n&&e<=s?"scheduled":e>=o&&e<=l?"challenge":e>l?"completed":"transition"}}const tl=new iU,oU=({currentPhase:t,seasonData:a,completedMatches:e,totalRequiredMatches:n,playerName:s,playerLastName:o,selectedDivision:l})=>{const[u,h]=w.useState(null),[m,p]=w.useState("normal"),[v,b]=w.useState(null),[_,C]=w.useState(null),[S,E]=w.useState([]),[I,M]=w.useState(!1),[A,k]=w.useState(null),[O,U]=w.useState(!1);w.useEffect(()=>{if(!l||t!=="scheduled"){h(null);return}const H=async()=>{try{const F=l.replace(/[^A-Za-z0-9]/g,"_"),R=`${ht}/static/schedule_${F}.json`,P=await fetch(R);if(!P.ok){console.warn(`Failed to fetch schedule: ${P.status} - ${P.statusText}`);return}const G=await P.json();if(!Array.isArray(G)||G.length===0){console.warn("No schedule data available");return}const Q=G.filter(ve=>ve.date).sort((ve,Ve)=>new Date(ve.date)-new Date(Ve.date));if(Q.length===0){console.warn("No valid matches found in schedule");return}const re=Math.min(47,Q.length-1),Ee=Q[re];if(!Ee||!Ee.date){console.warn("Could not determine Phase 1 end date from schedule");return}const ye=new Date(Ee.date);ye.setHours(23,59,59,999),k(ye);const qe=new Date;if(xs(qe,ye))h({days:0,hours:0,passed:!0}),p("passed");else{const ve=p_(ye,qe),Ve=zD(ye,qe)%24;h({days:ve,hours:Ve,passed:!1}),ve<=0&&Ve<=24?p("critical"):ve<=2?p("urgent"):ve<=7?p("warning"):p("normal")}}catch(F){console.error("Error calculating Phase 1 deadline from schedule:",F)}};H();const W=setInterval(H,6e4);return()=>clearInterval(W)},[l,t]),w.useEffect(()=>{t==="scheduled"&&l&&e&&($(),K())},[t,l,e,n]),w.useEffect(()=>{l&&t==="scheduled"&&q()},[l,t]);const q=async()=>{try{if(M(!0),!l){console.warn("No division selected for standings");return}const H=l.replace(/[^A-Za-z0-9]/g,"_"),W=`${ht}/static/standings_${H}.json`,F=await fetch(W);if(!F.ok){console.warn(`Failed to fetch standings: ${F.status} - ${F.statusText}`);return}const R=await F.json();if(!Array.isArray(R)){console.error("Standings data is not an array:",R);return}const P=R.filter(G=>{if(!G||typeof G!="object")return console.warn("Invalid standings entry:",G),!1;if(!G.name||!G.rank)return console.warn("Standings entry missing name or rank:",G),!1;const Q=parseInt(G.rank);return isNaN(Q)||Q<=0?(console.warn("Invalid rank in standings entry:",G),!1):!0});E(P)}catch(H){console.error("Failed to load standings:",H)}finally{M(!1)}},Y=(H,W)=>{if(!H||H.length===0)return null;const F=W.toLowerCase().trim(),R=H.find(P=>P.name.toLowerCase().trim()===F);return R?parseInt(R.rank):null},$=()=>{const H=e.length,W=n-H,F={completedCount:H,remainingCount:W,deadlinePassed:tl.hasPhase1DeadlinePassed(a)};b(F)},K=()=>{if(!e||e.length===0){C({wins:0,losses:0,winRate:0,position:"N/A"});return}let H=0,W=0;const F=`${s} ${o}`;e.forEach(Q=>{Q.winner===F?H++:W++});const R=Math.round(H/(H+W)*100),P=Y(S,F);let G="N/A";P!==null?G=`${P}${pe(P)}`:e.length>=1&&(R>=80?G="1st-3rd":R>=60?G="4th-6th":R>=40?G="7th-9th":G="10th+"),C({wins:H,losses:W,winRate:R,position:G,actualPosition:P})},pe=H=>{const W=H%10,F=H%100;return W===1&&F!==11?"st":W===2&&F!==12?"nd":W===3&&F!==13?"rd":"th"};if(!u||!v||t!=="scheduled")return null;const ie=()=>m==="passed"?"#e74c3c":m==="critical"?"#ff6b6b":m==="urgent"?"#ff8800":m==="warning"?"#ffaa00":"#00aa00",ne=()=>{const H=n-e.length;return m==="passed"?` PHASE 1 DEADLINE PASSED! You have ${H} incomplete matches.`:m==="critical"?` CRITICAL: Phase 1 ends in ${u.hours} hours! You have ${H} matches to complete.`:m==="urgent"?` URGENT: Phase 1 ends in ${u.days} days! You have ${H} matches to complete.`:m==="warning"?` WARNING: Phase 1 ends in ${u.days} days. You have ${H} matches to complete.`:` Phase 1 ends in ${u.days} days. You have ${H} matches to complete.`},se=()=>Math.round(e.length/n*100),z=ie(),D=window.innerWidth<=768;return f.createElement("div",{style:{background:`linear-gradient(135deg, ${z}15, ${z}25)`,border:`2px solid ${z}`,borderRadius:"12px",padding:D?"12px":"16px",margin:D?"12px 0":"16px 0",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",cursor:"pointer"},onClick:()=>U(!O)},f.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:D?"8px":"12px"}},f.createElement("h3",{style:{margin:0,color:z,fontSize:D?"1rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",flexWrap:"wrap"}},m==="critical"&&"",m==="urgent"&&"",m==="warning"&&"",m==="passed"&&"",m==="normal"&&"",f.createElement("span",{style:{fontSize:D?"0.9rem":"1.1rem"}},"Phase 1")),f.createElement("div",{style:{color:"#fff",fontSize:D?"0.85rem":"0.95rem",fontWeight:"bold",marginTop:"4px"}},e.length,"/",n," Complete"),f.createElement("div",{style:{fontSize:D?"0.8rem":"0.9rem",color:z,fontWeight:"bold",position:"absolute",bottom:"0",right:"0",fontSize:"0.8rem"}},O?"Hide Stats":"Show Stats")),f.createElement("div",{style:{color:"#fff",fontSize:D?"0.85rem":"0.95rem",lineHeight:"1.4",marginBottom:D?"8px":"12px"}},ne()),O&&f.createElement(f.Fragment,null,f.createElement("div",{style:{background:"#333",borderRadius:"8px",height:"8px",marginBottom:"12px",overflow:"hidden"}},f.createElement("div",{style:{background:`linear-gradient(90deg, ${z}, ${z}dd)`,height:"100%",width:`${se()}%`,transition:"width 0.3s ease",borderRadius:"8px"}})),f.createElement("div",{style:{display:"grid",gridTemplateColumns:D?"1fr 1fr":"1fr 1fr 1fr",gap:D?"8px":"12px",marginBottom:D?"8px":"12px"}},f.createElement("div",{style:{textAlign:"center",padding:D?"6px":"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"}},f.createElement("div",{style:{fontSize:D?"0.7rem":"0.8rem",color:"#ccc",marginBottom:"2px"}},"Progress"),f.createElement("div",{style:{fontSize:D?"0.8rem":"0.9rem",color:"#fff",fontWeight:"bold"}},e.length,"/",n),f.createElement("div",{style:{fontSize:D?"0.6rem":"0.7rem",color:"#999"}},se(),"% complete")),f.createElement("div",{style:{textAlign:"center",padding:D?"6px":"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"}},f.createElement("div",{style:{fontSize:D?"0.7rem":"0.8rem",color:"#ccc",marginBottom:"2px"}},"Record"),f.createElement("div",{style:{fontSize:D?"0.8rem":"0.9rem",color:"#fff",fontWeight:"bold"}},(_==null?void 0:_.wins)||0,"W - ",(_==null?void 0:_.losses)||0,"L"),f.createElement("div",{style:{fontSize:D?"0.6rem":"0.7rem",color:"#999"}},(_==null?void 0:_.winRate)||0,"% win rate")),f.createElement("div",{style:{textAlign:"center",padding:D?"6px":"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px",gridColumn:D?"1 / -1":"auto"}},f.createElement("div",{style:{fontSize:D?"0.7rem":"0.8rem",color:"#ccc",marginBottom:"2px"}},"Position"),f.createElement("div",{style:{fontSize:D?"0.8rem":"0.9rem",color:"#fff",fontWeight:"bold"}},I?"...":(_==null?void 0:_.position)||"N/A"),f.createElement("div",{style:{fontSize:D?"0.6rem":"0.7rem",color:"#999"}},I?"Loading...":(_==null?void 0:_.actualPosition)!==null?"Live standings":e.length>=1?"Est. rank":"No matches yet"))),f.createElement("div",{style:{fontSize:D?"0.7rem":"0.8rem",color:"#999",marginTop:D?"6px":"8px",textAlign:"center"}},"Phase 1 ends: ",A?Wc(A,D?"MMM d, yyyy":"EEEE, MMMM d, yyyy"):"Loading...")))},AC={async validateChallenge(t,a,e,n=!1,s=null){return Kt.post("/api/challenges/validate",{senderName:t,receiverName:a,division:e,isRematch:n,originalChallengeId:s})},async validateDefenseAcceptance(t,a,e){return Kt.post("/api/challenges/validate-defense",{defenderName:t,challengerName:a,division:e})},async getChallengeStats(t,a){return Kt.get(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getChallengeLimits(t,a){return Kt.get(`/api/challenges/limits/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getEligibleOpponents(t,a){return Kt.get(`/api/challenges/eligible-opponents/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getDivisionChallengeStats(t){return Kt.get(`/api/challenges/division-stats/${encodeURIComponent(t)}`)},async updateChallengeStats(t,a,e){return Kt.put(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`,e)},async resetDivisionChallengeStats(t){return Kt.delete(`/api/challenges/division-stats/${encodeURIComponent(t)}`)}};function lU({playerName:t,playerLastName:a,selectedDivision:e,phase:n}){const[s,o]=w.useState(null),[l,u]=w.useState(null),[h,m]=w.useState(!0),[p,v]=w.useState(null),[b,_]=w.useState(!1),C=`${t} ${a}`;if(w.useEffect(()=>{if(!t||!a||!e||n!=="challenge"){m(!1);return}async function q(){try{m(!0),v(null);const[Y,$]=await Promise.all([AC.getChallengeStats(C,e),AC.getChallengeLimits(C,e)]);o(Y),u($)}catch(Y){console.error("Error loading challenge data:",Y),v("Failed to load challenge statistics")}finally{m(!1)}}q()},[t,a,e,n,C]),n!=="challenge")return null;if(h)return f.createElement("div",{className:fe.phaseTrackerContainer,style:{padding:"1rem",marginBottom:"1rem"}},f.createElement("div",{style:{textAlign:"center",color:"#888"}},"Loading Phase 2 challenge statistics..."));if(p)return f.createElement("div",{className:fe.phaseTrackerContainer,style:{padding:"1rem",marginBottom:"1rem"}},f.createElement("div",{style:{textAlign:"center",color:"#e53e3e",background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem"}},p));if(!s||!l)return null;const S=()=>{const q=s.totalChallengeMatches;return l.limits.maxChallengeMatches,s.remainingChallenges,s.remainingDefenses,s.hasReachedChallengeLimit&&s.hasReachedDefenseLimit?"completed":s.hasReachedChallengeLimit||s.hasReachedDefenseLimit?"limit_reached":q>=3?"active":q>=1?"progressing":"ready"},E=q=>q?"#28a745":"#e53e3e",I=(q,Y)=>{const $=q/Y*100;return $>=90?"#e53e3e":$>=75?"#ffc107":"#28a745"},M=()=>{switch(S()){case"completed":return"#00aa00";case"limit_reached":return"#e53e3e";case"active":return"#28a745";case"progressing":return"#ffaa00";case"ready":return"#ffc107";default:return"#ffc107"}},A=()=>{const q=M();return{background:`linear-gradient(135deg, ${q}15, ${q}25)`,border:`2px solid ${q}`,borderRadius:"12px",padding:"16px",margin:"16px 0",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",cursor:"pointer"}},k=()=>{const q=S(),Y=s.remainingChallenges,$=s.remainingDefenses;switch(q){case"completed":return" Phase 2 Complete! You have played all your challenge matches.";case"limit_reached":return" Challenge limit reached. You can still defend if eligible.";case"active":return` Active in Phase 2! You have ${Y} challenges and ${$} defenses remaining.`;case"progressing":return` Phase 2 in progress! You have ${Y} challenges and ${$} defenses remaining.`;case"ready":return` Ready for Phase 2! You can challenge ${s.eligibleOpponentsCount} opponent${s.eligibleOpponentsCount!==1?"s":""} and have ${Y} challenges remaining.`;default:return"Phase 2 Challenge Status"}},O=M(),U=window.innerWidth<=768;return f.createElement("div",{style:{...A(),padding:U?"12px":"16px",margin:U?"12px 0":"16px 0"},onClick:()=>_(!b)},f.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:U?"8px":"12px"}},f.createElement("h3",{style:{margin:0,color:O,fontSize:U?"1rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",flexWrap:"wrap"}},S()==="completed"&&"",S()==="limit_reached"&&"",S()==="active"&&"",S()==="progressing"&&"",S()==="ready"&&"",f.createElement("span",{style:{fontSize:U?"0.9rem":"1.1rem"}},"Phase 2: Challenge Tracker")),f.createElement("div",{style:{fontSize:U?"0.8rem":"0.9rem",color:O,fontWeight:"bold",marginTop:"4px"}},"Phase 2, Week ",s.currentWeek,"  Rank #",s.currentStanding||"N/A"),f.createElement("div",{style:{fontSize:U?"0.8rem":"0.9rem",color:O,fontWeight:"bold",position:"absolute",bottom:"0",right:"0",fontSize:"0.8rem"}},b?"Hide Stats":"Show Stats")),f.createElement("div",{style:{color:"#fff",fontSize:U?"0.85rem":"0.95rem",lineHeight:"1.4",marginBottom:U?"8px":"12px"}},k()),b&&f.createElement(f.Fragment,null,f.createElement("div",{style:{display:"grid",gridTemplateColumns:U?"1fr":"repeat(auto-fit, minmax(250px, 1fr))",gap:U?"0.75rem":"1rem",marginBottom:U?"1rem":"1.5rem"}},f.createElement("div",{style:{padding:U?"0.75rem":"1rem",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"}},f.createElement("span",{style:{color:"#fff"}}," Challenge Matches"),f.createElement("span",{style:{color:E(s.isEligibleForChallenges),fontWeight:"bold",fontSize:"1.1rem"}},s.totalChallengeMatches,"/",l.limits.maxChallengeMatches)),f.createElement("div",{style:{height:"8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",marginBottom:"0.75rem"}},f.createElement("div",{style:{width:`${s.totalChallengeMatches/l.limits.maxChallengeMatches*100}%`,height:"100%",backgroundColor:I(s.totalChallengeMatches,l.limits.maxChallengeMatches),borderRadius:"4px",transition:"width 0.3s ease"}})),f.createElement("div",{style:{fontSize:"0.9rem",lineHeight:"1.4"}},f.createElement("div",{style:{marginBottom:"0.5rem",color:"#ccc"}},f.createElement("span",{style:{color:"#28a745"}},"Challenger:")," ",s.matchesAsChallenger," |",f.createElement("span",{style:{color:"#ffc107"}}," Defender:")," ",s.matchesAsDefender),f.createElement("div",{style:{color:s.remainingChallenges>0?"#28a745":"#e53e3e",fontWeight:"bold",fontSize:"1rem"}},s.remainingChallenges>0?"":""," Remaining: ",s.remainingChallenges))),f.createElement("div",{style:{padding:"1rem",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"}},f.createElement("span",{style:{color:"#fff"}}," Defense Status"),f.createElement("span",{style:{color:E(s.isEligibleForDefense),fontWeight:"bold",fontSize:"1.1rem"}},s.requiredDefenses,"/",l.limits.maxRequiredDefenses)),f.createElement("div",{style:{height:"8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",marginBottom:"0.75rem"}},f.createElement("div",{style:{width:`${s.requiredDefenses/l.limits.maxRequiredDefenses*100}%`,height:"100%",backgroundColor:I(s.requiredDefenses,l.limits.maxRequiredDefenses),borderRadius:"4px",transition:"width 0.3s ease"}})),f.createElement("div",{style:{fontSize:"0.9rem",lineHeight:"1.4"}},f.createElement("div",{style:{marginBottom:"0.5rem",color:"#ccc"}},f.createElement("span",{style:{color:"#e53e3e"}},"Required:")," ",s.requiredDefenses,"/2 |",f.createElement("span",{style:{color:"#ffc107"}}," Voluntary:")," ",s.voluntaryDefenses),f.createElement("div",{style:{color:s.requiredDefenses<2?"#28a745":"#ffc107",fontWeight:"bold",fontSize:"1rem"}},s.requiredDefenses<2?"":""," Required Defenses: ",s.requiredDefenses<2?`${2-s.requiredDefenses} left`:"Complete"))),f.createElement("div",{style:{padding:"1rem",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"}},f.createElement("span",{style:{color:"#fff"}}," This Week"),f.createElement("span",{style:{color:l.weeklyStatus.canChallengeThisWeek||l.weeklyStatus.canDefendThisWeek?"#28a745":"#e53e3e",fontWeight:"bold",fontSize:"1.1rem"}},l.weeklyStatus.canChallengeThisWeek||l.weeklyStatus.canDefendThisWeek?" Available":" Busy")),f.createElement("div",{style:{fontSize:"0.9rem",lineHeight:"1.4"}},f.createElement("div",{style:{marginBottom:"0.5rem",color:"#ccc"}},f.createElement("span",{style:{color:"#28a745"}},"Challenges:")," ",l.weeklyStatus.challengesThisWeek," |",f.createElement("span",{style:{color:"#ffc107"}}," Defenses:")," ",l.weeklyStatus.defensesThisWeek),f.createElement("div",{style:{color:l.weeklyStatus.canChallengeThisWeek?"#28a745":"#e53e3e",marginBottom:"0.25rem"}},l.weeklyStatus.canChallengeThisWeek?"":""," Can Challenge: ",l.weeklyStatus.canChallengeThisWeek?"Yes":"No"),f.createElement("div",{style:{color:l.weeklyStatus.canDefendThisWeek?"#28a745":"#ffc107"}},l.weeklyStatus.canDefendThisWeek?"":""," Must Defend: ",l.weeklyStatus.canDefendThisWeek?"If Challenged":"No")))),f.createElement("div",{style:{padding:"1rem",background:"rgba(0, 0, 0, 0.5)",border:`2px solid ${O}60`,borderRadius:"8px",fontSize:"0.95rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"}},f.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"}},f.createElement("strong",{style:{color:O,fontSize:"1rem"}},"Status:"),f.createElement("span",{style:{color:"#fff",fontSize:"1rem",fontWeight:"600",padding:"0.25rem 0.75rem",background:`${O}20`,borderRadius:"4px",border:`1px solid ${O}40`}},S().replace("_"," ").toUpperCase())),f.createElement("div",{style:{fontSize:"0.85rem",color:"#888",fontStyle:"italic"}},"Updated: ",new Date(s.lastUpdated).toLocaleDateString())),f.createElement("div",{style:{fontSize:"0.9rem",color:"#fff",lineHeight:"1.5",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.1)"}},s.eligibleOpponentsCount>0&&s.remainingChallenges>0&&l.weeklyStatus.canChallengeThisWeek?f.createElement("div",{style:{color:"#28a745",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"600"}},f.createElement("span",{style:{fontSize:"1.2rem"}},""),f.createElement("span",null,"You can challenge ",f.createElement("strong",null,s.eligibleOpponentsCount)," opponent",s.eligibleOpponentsCount!==1?"s":""," this week")):s.remainingDefenses>0&&l.weeklyStatus.canDefendThisWeek?f.createElement("div",{style:{color:"#28a745",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"600"}},f.createElement("span",{style:{fontSize:"1.2rem"}},""),f.createElement("span",null,"You can accept defense challenges this week")):l.weeklyStatus.canDefendThisWeek?f.createElement("div",{style:{color:"#ffc107",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"600"}},f.createElement("span",{style:{fontSize:"1.2rem"}},""),f.createElement("span",null,"You have no matches scheduled this week - you ",f.createElement("strong",null,"MUST")," accept defense challenges")):f.createElement("div",{style:{color:"#ffc107",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"600"}},f.createElement("span",{style:{fontSize:"1.2rem"}},""),f.createElement("span",null,"Waiting for next week or opponent selection"))))))}const cU=({isOpen:t,onClose:a,match:e,onValidate:n,onReject:s})=>{const[o,l]=w.useState({actualDate:"",actualTime:"",actualLocation:"",winner:"",score:"",notes:"",witnesses:"",photos:null}),[u,h]=w.useState(!1);if(!t||!e)return null;const m=async v=>{v.preventDefault(),h(!0);try{if(!o.actualDate||!o.winner||!o.score){alert("Please fill in all required fields: Date, Winner, and Score");return}await n({matchId:e._id,...o}),a()}catch(b){console.error("Error validating match:",b),alert("Error validating match. Please try again.")}finally{h(!1)}},p=async()=>{if(window.confirm("Are you sure you want to reject this match completion? This will require the match to be replayed.")){h(!0);try{await s(e._id),a()}catch(v){console.error("Error rejecting match:",v),alert("Error rejecting match. Please try again.")}finally{h(!1)}}};return f.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},f.createElement("div",{style:{background:"#222",border:"2px solid #444",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},f.createElement("h2",{style:{margin:0,color:"#fff"}}," Match Validation"),f.createElement("button",{onClick:a,style:{background:"none",border:"none",color:"#aaa",fontSize:"24px",cursor:"pointer"}},"")),f.createElement("div",{style:{background:"#333",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},f.createElement("h3",{style:{margin:"0 0 12px 0",color:"#fff"}},"Match Details"),f.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},f.createElement("div",null,f.createElement("strong",null,"Players:")," ",e.player1," vs ",e.player2),f.createElement("div",null,f.createElement("strong",null,"Scheduled Date:")," ",e.date),f.createElement("div",null,f.createElement("strong",null,"Location:")," ",e.location))),f.createElement("form",{onSubmit:m},f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Date Played * ",f.createElement("span",{style:{color:"#ff4444"}},"Required")),f.createElement("input",{type:"date",value:o.actualDate,onChange:v=>l({...o,actualDate:v.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Time Played"),f.createElement("input",{type:"time",value:o.actualTime,onChange:v=>l({...o,actualTime:v.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Location"),f.createElement("input",{type:"text",value:o.actualLocation,onChange:v=>l({...o,actualLocation:v.target.value}),placeholder:"Where was the match actually played?",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Winner * ",f.createElement("span",{style:{color:"#ff4444"}},"Required")),f.createElement("select",{value:o.winner,onChange:v=>l({...o,winner:v.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0},f.createElement("option",{value:""},"Select winner..."),f.createElement("option",{value:e.player1},e.player1),f.createElement("option",{value:e.player2},e.player2))),f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Final Score * ",f.createElement("span",{style:{color:"#ff4444"}},"Required")),f.createElement("input",{type:"text",value:o.score,onChange:v=>l({...o,score:v.target.value}),placeholder:"e.g., 7-3, 8-2, etc.",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),f.createElement("div",{style:{marginBottom:"16px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Witnesses (optional)"),f.createElement("input",{type:"text",value:o.witnesses,onChange:v=>l({...o,witnesses:v.target.value}),placeholder:"Names of people who witnessed the match",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),f.createElement("div",{style:{marginBottom:"20px"}},f.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Additional Notes"),f.createElement("textarea",{value:o.notes,onChange:v=>l({...o,notes:v.target.value}),placeholder:"Any additional details about the match...",rows:"3",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",resize:"vertical"}})),f.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},f.createElement("button",{type:"button",onClick:p,disabled:u,style:{padding:"10px 16px",background:"#ff4444",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Rejecting...":"Reject Match"),f.createElement("button",{type:"submit",disabled:u,style:{padding:"10px 16px",background:"#00aa00",border:"none",borderRadius:"6px",color:"#fff",cursor:u?"not-allowed":"pointer",opacity:u?.6:1}},u?"Validating...":"Validate Match")))))},uU={async getAllMatches(t,a,e){const n=new URLSearchParams({player:t,...a&&{division:a},...e&&{phase:e}});return Kt.get(`/api/matches/all-matches?${n}`)},async getCompletedMatches(t,a){const e=new URLSearchParams({player:t,...a&&{division:a}});return Kt.get(`/api/matches/completed-matches?${e}`)},async createMatch(t){return Kt.post("/api/matches",t)}},dU=(t,a,e)=>{const[n,s]=w.useState([]),[o,l]=w.useState([]),[u,h]=w.useState(!0),[m,p]=w.useState(null),v=async()=>{try{h(!0);const _=await uU.getAllMatches(t,a,e),C=_.filter(E=>E.status==="confirmed"&&(E.completed===!1||E.completed===void 0)),S=_.filter(E=>E.status==="confirmed"&&E.completed===!0);C.sort((E,I)=>b(E)-b(I)),S.sort((E,I)=>b(E)-b(I)),s(C),l(S),p(null)}catch(_){p(_.message),s([]),l([])}finally{h(!1)}},b=_=>{if(_.date&&_.time){const C=_.date.split("-");if(C.length===3){const S=C[0],E=C[1],I=C[2],M=`${S}-${E.padStart(2,"0")}-${I.padStart(2,"0")}`;let k=_.time.trim().toUpperCase().split(" "),O=k[0],U=k[1],q=O.split(":"),Y=parseInt(q[0],10),$=parseInt(q[1],10);U==="PM"&&Y<12&&(Y+=12),U==="AM"&&Y===12&&(Y=0);const K=Y.toString().padStart(2,"0"),pe=($||0).toString().padStart(2,"0"),ie=`${K}:${pe}`;return new Date(`${M}T${ie}:00`)}}return new Date(0)};return w.useEffect(()=>{t&&a&&v()},[t,a,e]),{matches:n,completedMatches:o,scheduledConfirmedMatches:n,loading:u,error:m,refetch:v,markMatchCompleted:_=>{s(C=>C.filter(S=>S._id!==_._id)),l(C=>{const S={..._,completed:!0};return[...C,S]})},updateCompletedMatch:_=>{l(C=>C.map(S=>S._id===_._id?_:S))}}},OE={async getUser(t){return Kt.get(`/api/users/${encodeURIComponent(t)}`)},async syncUsers(){return Kt.post("/admin/sync-users")}},Od={async getAllNotes(){return Kt.get("/api/notes")},async createNote(t){return Kt.post("/api/notes",{text:t})},async deleteNote(t){return Kt.delete(`/api/notes/${t}`)}};class fU{async checkAndSendDeadlineReminder(a,e,n){try{const s=await tl.getCurrentSeason(n);if(!(s!=null&&s.season)){console.log("No current season found for division:",n);return}const o=s.season,l=new Date,u=new Date(o.phase1End);if(l>u){console.log("Phase 1 deadline has passed, no reminder needed");return}const h=Math.ceil((u-l)/(1e3*60*60*24));if(!this.shouldSendReminder(h))return;const p=await this.getUserMatchStatus(e,n);await aT({to_email:a,to_name:e,division:n,daysUntilDeadline:h,completedMatches:p.completedCount,totalRequiredMatches:p.totalRequired,deadlineDate:Wc(u,"EEEE, MMMM d, yyyy"),remainingMatches:p.remainingCount}),console.log(`Deadline reminder sent to ${e} for ${n}`)}catch(s){console.error("Error sending deadline reminder:",s)}}shouldSendReminder(a){return[7,3,1,0].includes(a)}async getUserMatchStatus(a,e){try{return{completedCount:1,totalRequired:6,remainingCount:5}}catch(n){return console.error("Error getting user match status:",n),{completedCount:0,totalRequired:6,remainingCount:6}}}async sendBulkDeadlineReminders(a){try{console.log(`Sending bulk deadline reminders for ${a}`)}catch(e){console.error("Error sending bulk deadline reminders:",e)}}}const hU=new fU,mU="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",pU="BCAPL SIGNUP",gU={"FRBCAPL TEST":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=b345a437-3415-4765-b19a-b2f7014f2cfa","Singles Test":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=9058a0cc-3231-4118-bd91-b305006fe578"};function yU(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const s=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(s){const[o,l,u,h]=s,m=a[l];m&&e[m].push(`${u} - ${h}`)}}),e}function Wo(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function PE({playerName:t,playerLastName:a,onOpenChat:e,userPin:n,onGoToAdmin:s,onLogout:o,onScheduleMatch:l,senderEmail:u}){const[h,m]=w.useState([]),[p,v]=w.useState(""),[b,_]=w.useState(!1),[C,S]=w.useState(!1),[E,I]=w.useState(null),[M,A]=w.useState(""),[k,O]=w.useState(!1),[U,q]=w.useState(!1),[Y,$]=w.useState(null),[K,pe]=w.useState([]),[ie,ne]=w.useState(!0),[se,z]=w.useState(!1),[D,H]=w.useState(""),[W,F]=w.useState(""),[R,P]=w.useState(null),[G,Q]=w.useState(!1),[re,Ee]=w.useState(!1),[ye,qe]=w.useState(!1),[ve,Ve]=w.useState("scheduled"),[ot,St]=w.useState([]),[Ct,vt]=w.useState(!1),[En,Nn]=w.useState(!1),[La,on]=w.useState(!1),[Qn,Oa]=w.useState(null),[mt,Vn]=w.useState(!1),[ia,pn]=w.useState(null),[io,Ds]=w.useState(!1),[Rn,en]=w.useState(null),[Ft,gn]=w.useState([]),[hu,oo]=w.useState(0),[Ms,Xn]=w.useState(0),[Kn,Pa]=w.useState(0),ut=`${t} ${a}`.trim(),{pendingProposals:xn,sentProposals:gr,loading:yr,refetch:pa}=cE(ut,p),lt=Qn||ve,{matches:kn,completedMatches:ga,loading:Ba,refetch:Jn,markMatchCompleted:rr,updateCompletedMatch:Ua}=dU(ut,p,lt),[pi,wl]=w.useState(0),[ea,ln]=w.useState(0),[cn,ta]=w.useState(!1),[Gr,vr]=w.useState(!1),[ya,As]=w.useState(null),[Zr,gi]=w.useState(!1),[br,$r]=w.useState(!1),[qr,va]=w.useState(!1),[jt,yi]=w.useState(0),[vi,Yn]=w.useState(!1),[oa,Qr]=w.useState(null),[wr,Vr]=w.useState({player1:"",player2:""}),[Cr,Ts]=w.useState(null),[_r,ba]=w.useState(null),[bi,sr]=w.useState(!1),[za,Ns]=w.useState(null),wa=w.useRef(null),Cl=ao();w.useEffect(()=>{(async()=>{try{const ge=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);console.log("Device Info:",{userAgent:navigator.userAgent,isMobile:ge,backendUrl:ht,protocol:window.location.protocol,hostname:window.location.hostname}),console.log("Testing backend connection...");const we=await fetch(`${ht}/health`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"include"});we.ok?console.log(" Backend connection successful"):console.error(" Backend connection failed:",we.status,we.statusText)}catch(ge){console.error(" Backend connection error:",ge),console.error("Error details:",{name:ge.name,message:ge.message,stack:ge.stack})}})()},[]),w.useEffect(()=>{wl(xn.length)},[xn]),w.useEffect(()=>{ln(gr.length)},[gr]),w.useEffect(()=>{async function L(){if(p)try{const[ge,we]=await Promise.all([tl.getCurrentSeason(p),tl.getCurrentPhaseAndWeek(p)]);Ts((ge==null?void 0:ge.season)||null),ba(we)}catch(ge){console.error("Error fetching season data:",ge)}}L()},[p]),w.useEffect(()=>{async function L(){try{const we=await(await fetch(`${ht}/api/messages/unread?user=${encodeURIComponent(u)}`)).json();Array.isArray(we)&&yi(we.length)}catch(ge){console.error("Failed to fetch unread messages:",ge)}}if(u){L();const ge=setInterval(L,3e4);return()=>clearInterval(ge)}},[u]),w.useEffect(()=>{if(!t||!a||!p||Ba||yr)return;const L=lt==="challenge"?2:1,we=ot.filter(Ye=>Ye.division===p&&Ye.phase===L&&(Ye.player1&&Ye.player1.trim().toLowerCase()===ut.toLowerCase()||Ye.player2&&Ye.player2.trim().toLowerCase()===ut.toLowerCase())).length;Xn(ga.length);const Ue=kn.filter(Ye=>Ye.status==="confirmed"&&(Ye.completed===!1||Ye.completed===void 0)).length+ga.length,xe=Math.max(0,we-Ue);oo(xe),Pa(we)},[t,a,p,ot,ga,kn,Ba,yr]);const wi=(()=>{if(!t||!a||!p)return 0;const ge=ot.filter(we=>we.division===p&&(we.player1&&we.player1.trim().toLowerCase()===ut.toLowerCase()||we.player2&&we.player2.trim().toLowerCase()===ut.toLowerCase())).length;return ge===0&&lt==="scheduled"?(console.log("No schedule matches found, using fallback of 6 matches for Phase 1"),6):ge})();w.useEffect(()=>{let L=!0;async function ge(){try{const we=await Dh(mU,`${pU}!A1:L1000`);if(!we||we.length===0){L&&gn([]);return}const He=we.slice(1).map(Ue=>({firstName:Ue[0]||"",lastName:Ue[1]||"",email:Ue[2]||"",phone:Ue[3]||"",locations:Ue[8]||"",availability:yU(Ue[7]||""),pin:Ue[11]||"",preferredContacts:(Ue[10]||"").split(/\r?\n/).map(xe=>xe.trim().toLowerCase()).filter(Boolean)})).filter(Ue=>Ue.email&&Ue.firstName&&Ue.lastName);L&&gn(He)}catch{L&&gn([])}}return ge(),()=>{L=!1}},[]),w.useEffect(()=>{if(!p){St([]);return}let L;p==="FRBCAPL TEST"?L="schedule_FRBCAPL_TEST.json":p==="Singles Test"?L="schedule_Singles_Test.json":L=`schedule_${p.replace(/[^A-Za-z0-9]/g,"_")}.json`;const ge=`${ht}/static/${L}`;fetch(ge).then(we=>{if(!we.ok)throw new Error("Schedule not found");return we.json()}).then(we=>{console.log("Schedule loaded for",p,":",we.length,"matches"),St(we)}).catch(we=>{console.error("Failed to load schedule for",p,":",we),console.log("Schedule URL attempted:",ge),St([])})},[p]),w.useEffect(()=>{u&&OE.getUser(u).then(L=>{let ge=[];Array.isArray(L.divisions)?ge=L.divisions.map(we=>we.trim()).filter(Boolean):typeof L.divisions=="string"?ge=L.divisions.split(",").map(we=>we.trim()).filter(Boolean):ge=[],m(ge)}).catch(()=>{m([])})},[u]),w.useEffect(()=>{h.length>0?v(h[0]):v("")},[h]),w.useEffect(()=>{ne(!0),Od.getAllNotes().then(L=>{pe(L),ne(!1)}).catch(()=>{pe([]),ne(!1)})},[]),w.useEffect(()=>{if(!t||!a||!p)return;const L=setInterval(()=>{pa(),Jn()},2*60*1e3);return()=>clearInterval(L)},[t,a,p,pa,Jn]);const In=async()=>{F("");try{const L=await Od.createNote(D.trim());pe([L,...K]),H(""),z(!1)}catch{F("Failed to add note")}},lo=async L=>{if(window.confirm("Delete this note?"))try{await Od.deleteNote(L),pe(K.filter(ge=>ge._id!==L))}catch(ge){console.error("Failed to delete note:",ge)}},Z=async()=>{if(window.confirm("Are you sure you want to clear all notes?"))try{for(const L of K)await Od.deleteNote(L._id);pe([])}catch(L){console.error("Failed to clear notes:",L)}};async function N(L){if(Y)try{await di.counterProposal(Y._id,L),q(!1),$(null),Jn(),pa()}catch(ge){console.error("Failed to counter proposal:",ge)}}function le(){Q(!1),P(null)}const ue=lt==="challenge"?2:1,be=ot.filter(L=>L.division===p&&(!L.phase||L.phase===ue)&&(L.player1&&L.player1.trim().toLowerCase()===ut.toLowerCase()||L.player2&&L.player2.trim().toLowerCase()===ut.toLowerCase())),De=Array.from(new Set(be.map(L=>L.player1&&L.player1.trim().toLowerCase()===ut.toLowerCase()?L.player2Email||L.player2EmailAddress||L.player2Email||L.player2||null:L.player2&&L.player2.trim().toLowerCase()===ut.toLowerCase()&&(L.player1Email||L.player1EmailAddress||L.player1Email||L.player1)||null).filter(Boolean)));function Ie(){var we,He;const L=new Set,ge=[];for(const Ue of be){const xe=Ue.player1&&Ue.player1.trim().toLowerCase()===ut.toLowerCase()?Ue.player2:Ue.player1;if(ga.some(rt=>{var wn,Ca;const Ht=[(wn=rt.senderName)==null?void 0:wn.trim().toLowerCase(),(Ca=rt.receiverName)==null?void 0:Ca.trim().toLowerCase()];return Array.isArray(rt.divisions)&&rt.divisions.includes(p)&&Ht.includes(ut.toLowerCase())&&Ht.includes(xe==null?void 0:xe.trim().toLowerCase())}))continue;let Dt=!1;for(let rt=0;rt<kn.length;rt++){if(L.has(rt))continue;const Ht=kn[rt],wn=[(we=Ht.senderName)==null?void 0:we.trim().toLowerCase(),(He=Ht.receiverName)==null?void 0:He.trim().toLowerCase()];if(Array.isArray(Ht.divisions)&&Ht.divisions.includes(p)&&wn.includes(ut.toLowerCase())&&wn.includes(xe==null?void 0:xe.trim().toLowerCase())){L.add(rt),Dt=!0;break}}Dt||ge.push(Ue)}return ge}const Qe=Ie().map(L=>{var He,Ue;const ge=L.player1&&L.player1.trim().toLowerCase()===ut.toLowerCase()?(He=L.player2)==null?void 0:He.trim():(Ue=L.player1)==null?void 0:Ue.trim();if(!ge)return null;const we=Ft.find(xe=>`${xe.firstName} ${xe.lastName}`.trim().toLowerCase()===ge.toLowerCase());return{match:L,player:we,opponentName:ge}}).filter(Boolean);function Be(L){const ge=Ft.find(we=>`${we.firstName} ${we.lastName}`.trim().toLowerCase()===L.trim().toLowerCase());if(!ge){alert("Player data not found for: "+L);return}if(!ge.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}pn(ge),Vn(!0),vt(!1)}function Xe(){console.log("Schedule Match button clicked"),lt==="scheduled"?vt(!0):Nn(!0)}w.useEffect(()=>{if(!u||!t||!p||!Cr||lt!=="scheduled")return;const L=async()=>{try{await hU.checkAndSendDeadlineReminder(u,`${t} ${a}`,p)}catch(we){console.error("Error checking deadline reminders:",we)}};L();const ge=setInterval(L,60*60*1e3);return()=>clearInterval(ge)},[u,t,a,p,Cr,lt]);const Oe=kn.filter(L=>L.divisions&&p&&Array.isArray(L.divisions)&&L.divisions.includes(p));function Me(L){P(L),Q(!0)}const oe=ye&&f.createElement("div",{className:fe.modalOverlay},f.createElement("div",{className:fe.modalContent,style:{maxWidth:600,maxHeight:"80vh",overflowY:"auto"}},f.createElement("h2",{style:{color:"#fff",marginBottom:16}},"All Upcoming Matches"),f.createElement("ul",{className:fe.dashboardList,style:{width:"100%",maxWidth:520,margin:"0 auto"}},Oe.map((L,ge)=>{let we="",He="";if(L.type==="scheduled")if(L.player1&&L.player2&&(L.player1.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.player2:we=L.player1),L.date){const xe=L.date.split("/");if(xe.length===3){const[Ye,Dt,rt]=xe,Ht=new Date(`${rt}-${Ye.padStart(2,"0")}-${Dt.padStart(2,"0")}`);isNaN(Ht.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";else if(L.senderName&&L.receiverName&&(L.senderName.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.receiverName:we=L.senderName),L.date){const xe=L.date.split("-");if(xe.length===3){const[Ye,Dt,rt]=xe,Ht=new Date(`${Ye}-${Dt}-${rt}`);isNaN(Ht.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";L.completed;const Ue=!!L.completed;return f.createElement("li",{key:L._id||ge,className:fe.matchCard,style:{padding:"0.4rem 0.5rem",fontSize:"0.98em",marginBottom:8}},f.createElement("div",{className:fe.matchCardContentWrapper},f.createElement("button",{className:fe.matchCardButton,onClick:()=>Me(L),type:"button",style:{padding:0,margin:0,minHeight:0,fontSize:"0.98em",display:"flex",alignItems:"center",gap:8,width:"100%",background:"none",border:"none"}},f.createElement("span",{className:fe.matchCardOpponentLabel,style:{fontSize:"1em",marginRight:4}},"VS:"),f.createElement("span",{className:fe.matchCardOpponentName,style:{fontSize:"1em",marginRight:8}},we||"[Unknown Opponent]"),f.createElement("span",{className:fe.matchCardDetail,style:{fontSize:"0.97em",marginRight:8}},He),f.createElement("span",{className:fe.matchCardDetail,style:{fontSize:"0.97em"}},L.location||"[No Location]")),!Ue&&f.createElement(ay,{className:fe.dashboardBtn+" "+fe.matchCardDoneBtn,loading:ya===L._id,loadingText:"Completing...",style:{marginLeft:0,minWidth:70,padding:"4px 8px",fontSize:"0.75em",height:28,lineHeight:"20px",marginTop:6,opacity:.18,filter:"blur(0.5px) grayscale(0.2)",transition:"opacity 0.22s, filter 0.22s, background 0.22s"},onMouseEnter:xe=>{ya!==L._id&&(xe.target.style.opacity="1",xe.target.style.filter="none")},onMouseLeave:xe=>{ya!==L._id&&(xe.target.style.opacity="0.18",xe.target.style.filter="blur(0.5px) grayscale(0.2)")},onClick:()=>{let xe="",Ye="";L.type==="scheduled"?(xe=L.player1,Ye=L.player2):(xe=L.senderName,Ye=L.receiverName),Qr(L),Vr({player1:xe,player2:Ye}),Yn(!0)},type:"button"},"Complete")))})),f.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:16}},f.createElement("button",{className:fe.dashboardBtn,onClick:()=>qe(!1)},"Close")))),Se=lt==="challenge"?4:6,Te=[...kn.filter(L=>{var ge,we;return L.status==="confirmed"&&Array.isArray(L.divisions)&&L.divisions.includes(p)&&[(ge=L.senderName)==null?void 0:ge.trim().toLowerCase(),(we=L.receiverName)==null?void 0:we.trim().toLowerCase()].includes(ut.toLowerCase())}),...ga.filter(L=>{var ge,we;return Array.isArray(L.divisions)&&L.divisions.includes(p)&&[(ge=L.senderName)==null?void 0:ge.trim().toLowerCase(),(we=L.receiverName)==null?void 0:we.trim().toLowerCase()].includes(ut.toLowerCase())})],pt=Array.from(new Set(Te.map(L=>L._id))).map(L=>Te.find(ge=>ge._id===L)).length,Et=Math.max(0,Se-pt),[la,Sr]=w.useState(!1);[...xn.filter(L=>L.status==="pending"&&L.receiverName===ut),...gr.filter(L=>L.status==="countered"&&L.senderName===ut)],[...gr.filter(L=>L.status==="pending"&&L.senderName===ut),...xn.filter(L=>L.status==="countered"&&L.receiverName===ut)];const gt=Ct&&wa.current?eu.createPortal(f.createElement("div",{style:{position:"absolute",top:wa.current.getBoundingClientRect().top+window.scrollY,left:wa.current.getBoundingClientRect().left+window.scrollX,width:wa.current.offsetWidth,height:wa.current.offsetHeight,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",pointerEvents:"auto"}},f.createElement(nS,{open:Ct,onClose:()=>vt(!1),opponents:Qe,onOpponentClick:Be,phase:lt})),document.body):null,_e=window.innerWidth<=768;return f.createElement("div",{className:fe.dashboardBg,style:{position:"relative"}},f.createElement("div",{className:fe.dashboardFrame,style:{position:"relative",zIndex:1}},f.createElement("div",{className:fe.dashboardCard,style:{position:"relative",zIndex:1,padding:_e?"8px":"20px",margin:_e?"4px":"16px"}},f.createElement("h1",{className:fe.dashboardTitle,style:{fontSize:_e?"1.5rem":"2rem"}},"Welcome,",f.createElement("span",{className:fe.dashboardUserName,style:{fontSize:_e?"1.3rem":"1.8rem"}},t," ",a)),f.createElement("div",{className:fe.announcement,style:{fontSize:_e?"0.75rem":"1rem",marginBottom:_e?"8px":"16px"}},f.createElement("p",null,"This is the BETA version. "),"Matches that are created, scheduled, and confirmed will NOT be played.",f.createElement("br",null),"This is for testing purposes only."),n==="777777"&&f.createElement("div",{style:{marginBottom:_e?12:16,textAlign:"center"}},f.createElement("button",{onClick:()=>window.location.hash="#/tenball-tutorial",style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",color:"white",padding:_e?"10px 16px":"12px 20px",borderRadius:"25px",cursor:"pointer",fontSize:_e?"0.9rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"},onMouseEnter:L=>{L.target.style.transform="translateY(-2px)",L.target.style.boxShadow="0 6px 20px rgba(76, 175, 80, 0.4)"},onMouseLeave:L=>{L.target.style.transform="translateY(0)",L.target.style.boxShadow="0 4px 15px rgba(76, 175, 80, 0.3)"}},f.createElement("img",{src:ih,alt:"10-Ball",style:{width:"20px",height:"20px",marginRight:"8px",display:"inline-block",verticalAlign:"text-bottom"}}),"Play 10-Ball Tutorial & Learn Official CSI Rules")),!_e&&f.createElement("br",null),h.length>0&&f.createElement("div",{style:{marginBottom:_e?8:16,display:"flex",flexDirection:_e?"column":"row",alignItems:_e?"flex-start":"center",gap:_e?"8px":"12px"}},f.createElement("label",{style:{fontSize:_e?"0.9rem":"1rem"}},"Division:",h.length>1?f.createElement("select",{value:p,onChange:L=>v(L.target.value),style:{fontSize:_e?"0.9em":"1em",padding:_e?6:4,borderRadius:4}},h.map(L=>f.createElement("option",{key:L,value:L},L))):f.createElement("span",{style:{fontWeight:600}},h[0])),f.createElement("span",{style:{fontSize:_e?"0.8em":"0.9em",padding:_e?"3px 6px":"4px 8px",borderRadius:"4px",backgroundColor:lt==="challenge"?"#e53e3e":"#28a745",color:"white",fontWeight:"600"}},"Phase ",lt==="challenge"?"2":lt==="scheduled"?"1":"Complete")),lt==="scheduled"&&Cr&&f.createElement(oU,{currentPhase:lt,seasonData:Cr,completedMatches:ga,totalRequiredMatches:wi,playerName:t,playerLastName:a,selectedDivision:p}),f.createElement(lU,{playerName:t,playerLastName:a,selectedDivision:p,phase:lt}),f.createElement("section",{className:`${fe.dashboardSection} ${fe.dashboardSectionBox} ${fe.matchesSection}`,style:{position:"relative",overflow:"visible",backgroundColor:"rgba(0, 0, 0, .5)",minHeight:_e?"100px":"370px",marginBottom:_e?"12px":"36px",paddingBottom:_e?"16px":"20px"}},f.createElement("div",{style:{position:"relative",zIndex:2,marginBottom:"0.5rem",display:"flex",justifyContent:"center"}},f.createElement("div",{className:fe.proposalAlertRow},f.createElement("button",{className:fe.proposalAlertButton,onClick:()=>S(!0),"aria-label":"View pending match proposals"},"  ",pi," proposals waiting for you"),f.createElement("button",{className:fe.proposalAlertButton,onClick:()=>O(!0),"aria-label":"View matches you have proposed"}," ",ea," proposals waiting for opponent"))),f.createElement("div",{style:{textAlign:"center",margin:"2px 0 2px 0"}},f.createElement("h2",{className:fe.dashboardSectionTitle,style:{margin:0,fontWeight:600}},"Upcoming Confirmed Matches"),f.createElement("div",{className:fe.dashboardHelperText,style:{margin:0,marginBottom:6}},"Click Match For Details")),f.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},f.createElement("div",{className:fe.poolTableContainer,style:{marginBottom:_e?"8px":"24px",position:"relative",width:"100%",maxWidth:_e?"100%":"600px"}},_e?f.createElement("div",{className:fe.simulationContainer,ref:wa,style:{width:"100%",height:"120px",position:"relative"}},f.createElement(df,null),f.createElement("div",{style:{position:"absolute",left:"10%",width:"80%",bottom:"18px",height:"25px",maxHeight:"25px",zIndex:1e5,pointerEvents:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},f.createElement("ul",{className:fe.dashboardList,style:{minHeight:"auto",margin:0,pointerEvents:"auto",padding:0,width:"100%"}},Oe.length===0?f.createElement("div",{style:{color:"#fff",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontSize:"0.9rem",fontWeight:"bold"}},"No matches scheduled yet."):f.createElement(f.Fragment,null,(re?Oe:Oe.slice(0,3)).map((L,ge)=>{let we="",He="";if(L.type==="scheduled")if(L.player1&&L.player2&&(L.player1.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.player2:we=L.player1),L.date){const Ue=L.date.split("/");if(Ue.length===3){const[xe,Ye,Dt]=Ue,rt=new Date(`${Dt}-${xe.padStart(2,"0")}-${Ye.padStart(2,"0")}`);isNaN(rt.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";else if(L.senderName&&L.receiverName&&(L.senderName.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.receiverName:we=L.senderName),L.date){const Ue=L.date.split("-");if(Ue.length===3){const[xe,Ye,Dt]=Ue,rt=new Date(`${xe}-${Ye}-${Dt}`);isNaN(rt.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";return L.completed,L.completed,f.createElement("li",{key:L._id||ge,className:fe.matchCard,style:{padding:"0.02rem 0.05rem",fontSize:"0.5em",marginBottom:0}},f.createElement("div",{className:fe.matchCardContentWrapper},f.createElement("div",{style:{width:"100%",textAlign:"left",margin:"0px 0 0 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.9em",display:"flex",alignItems:"center",justifyContent:"space-between",gap:2,height:"28px",padding:"0 4px",cursor:"pointer"},onClick:()=>Me(L)},f.createElement("div",{style:{display:"flex",alignItems:"center",gap:2,flex:1,overflow:"hidden"}},f.createElement("span",{style:{fontSize:"0.9em",marginRight:2,color:"red",fontWeight:700}},"vs"),f.createElement("span",{style:{fontSize:"0.8em",marginRight:2,fontWeight:700}},we||"[Unknown]"),f.createElement("span",{style:{fontSize:"0.9em",marginRight:2}},He),f.createElement("span",{style:{fontSize:"0.9em",marginRight:2,maxWidth:"30px",overflow:"hidden",textOverflow:"ellipsis"}},L.location||"")),f.createElement("button",{onClick:Ue=>{Ue.stopPropagation();let xe="",Ye="";L.type==="scheduled"?(xe=L.player1,Ye=L.player2):(xe=L.senderName,Ye=L.receiverName),Qr(L),Vr({player1:xe,player2:Ye}),Yn(!0)},style:{minWidth:25,padding:"1px 2px",fontSize:"0.6em",height:10,lineHeight:"8px",margin:0,opacity:.9,background:"red",color:"white",border:"none",borderRadius:"2px"}},"Complete"))))}))))):f.createElement(k_,{aspectWidth:600,aspectHeight:300},f.createElement("div",{className:fe.simulationContainer,ref:wa,style:{width:"100%",height:"100%",position:"relative"}},f.createElement(df,null))),gt,!_e&&f.createElement("div",{style:{position:"absolute",left:"25%",width:"50%",bottom:"15%",height:"50px",zIndex:1e5,pointerEvents:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},f.createElement("ul",{className:fe.dashboardList,style:{minHeight:"auto",margin:0,pointerEvents:"auto",padding:0,width:"100%"}},Oe.length===0?f.createElement("div",{style:{color:"#fff",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontSize:"1.1rem",fontWeight:"bold"}},"No matches scheduled yet."):f.createElement(f.Fragment,null,(re?Oe:Oe.slice(0,3)).map((L,ge)=>{let we="",He="";if(L.type==="scheduled")if(L.player1&&L.player2&&(L.player1.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.player2:we=L.player1),L.date){const xe=L.date.split("/");if(xe.length===3){const[Ye,Dt,rt]=xe,Ht=new Date(`${rt}-${Ye.padStart(2,"0")}-${Dt.padStart(2,"0")}`);isNaN(Ht.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";else if(L.senderName&&L.receiverName&&(L.senderName.trim().toLowerCase()===ut.trim().toLowerCase()?we=L.receiverName:we=L.senderName),L.date){const xe=L.date.split("-");if(xe.length===3){const[Ye,Dt,rt]=xe,Ht=new Date(`${Ye}-${Dt}-${rt}`);isNaN(Ht.getTime())?He="[Invalid Date]":He=Wo(L.date)}else He="[Invalid Date]"}else He="[No Date]";L.completed;const Ue=!!L.completed;return f.createElement("li",{key:L._id||ge,className:fe.matchCard,style:{padding:"0.2rem 0.3rem",fontSize:"0.85em",marginBottom:4}},f.createElement("div",{className:fe.matchCardContentWrapper},f.createElement("button",{className:fe.matchCardButton,onClick:()=>Me(L),type:"button",style:{padding:0,margin:0,minHeight:0,fontSize:"0.85em",display:"flex",alignItems:"center",gap:4,width:"100%",background:"none",border:"none",justifyContent:"flex-start",textAlign:"left"}},f.createElement("span",{className:fe.matchCardOpponentLabel,style:{fontSize:"0.95em",marginRight:2}},"VS"),f.createElement("span",{className:fe.matchCardOpponentName,style:{fontSize:"1.25em",marginRight:4,fontWeight:700}},we||"[Unknown]"),f.createElement("span",{className:fe.matchCardDetail,style:{fontSize:"1.08em",marginLeft:4}},He)),f.createElement("div",{style:{width:"100%",textAlign:"center",margin:"2px 0 0 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.95em"}},f.createElement("span",{className:fe.matchCardDetail},L.location||"")),!Ue&&f.createElement(ay,{className:fe.dashboardBtn+" "+fe.matchCardDoneBtn,loading:ya===L._id,loadingText:"Completing...",style:{marginLeft:0,minWidth:70,padding:"4px 8px",fontSize:"0.75em",height:28,lineHeight:"20px",marginTop:6,opacity:.18,filter:"blur(0.5px) grayscale(0.2)",transition:"opacity 0.22s, filter 0.22s, background 0.22s"},onMouseEnter:xe=>{ya!==L._id&&(xe.target.style.opacity="1",xe.target.style.filter="none")},onMouseLeave:xe=>{ya!==L._id&&(xe.target.style.opacity="0.18",xe.target.style.filter="blur(0.5px) grayscale(0.2)")},onClick:()=>{let xe="",Ye="";L.type==="scheduled"?(xe=L.player1,Ye=L.player2):(xe=L.senderName,Ye=L.receiverName),Qr(L),Vr({player1:xe,player2:Ye}),Yn(!0)},type:"button"},"Complete")))})))))),f.createElement("div",{style:{textAlign:"center",marginBottom:8,color:"#aaa",fontSize:"0.98em"}},f.createElement("br",null)," Click to view or schedule matches."),f.createElement("div",{className:fe.countersRow,style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"20px 0 0 0",width:"100%",paddingBottom:"12px",position:"relative",zIndex:10}},f.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:16,width:"100%",marginBottom:"12px"}},f.createElement("button",{style:{background:"#23232a",color:"#28a745",borderRadius:6,padding:"4px 10px",fontWeight:600,fontSize:"0.92em",zIndex:9999,position:"relative",textAlign:"center",border:"2px solid #28a745",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:"0 4px"},onClick:()=>Sr(!0),title:"Click to view completed matches",type:"button"},lt==="challenge"?"Phase 2":lt==="scheduled"?"Phase 1":lt," Matches Completed: ",Ms),f.createElement("button",{style:{background:"#23232a",color:"#e53e3e",borderRadius:6,padding:"4px 10px",fontWeight:600,fontSize:"0.92em",zIndex:9999,position:"relative",textAlign:"center",border:"2px solid #e53e3e",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:"0 4px"},title:"Schedule a match",type:"button",onClick:()=>Xe()},lt==="challenge"?"Phase 2":lt==="scheduled"?"Phase 1":lt," Matches To Schedule: ",Et)))),f.createElement("section",{className:`${fe.dashboardSection} ${fe.dashboardSectionBox}`},f.createElement("div",{className:fe.newsUpdatesHeader},f.createElement("button",{className:fe.dashboardBtn,onClick:()=>va(!0),type:"button",style:{position:"relative"}}," Direct Messages",jt>0&&f.createElement("span",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#e53e3e",color:"#fff",borderRadius:"50%",width:"20px",height:"20px",fontSize:"0.75em",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}},jt>99?"99+":jt)),f.createElement("button",{className:fe.dashboardBtn,onClick:()=>Cl("/chat"),type:"button",style:{background:"#4ecdc4",borderColor:"#4ecdc4",color:"#fff"}}," League Chat"),f.createElement("h2",{className:fe.dashboardSectionTitle},"News & Updates"),f.createElement("button",{className:fe.dashboardBtn,type:"button",onClick:()=>_(!0)}," View Standings")),ie?f.createElement(hB,{lines:3,height:"16px"}):f.createElement("ul",{className:fe.dashboardList},K.length===0?f.createElement("li",{className:fe.dashboardNoteItem},"No news yet."):K.map((L,ge)=>f.createElement("li",{key:L._id||ge,className:fe.dashboardNoteItem},f.createElement("span",{style:{flex:1}},L.text),n==="777777"&&f.createElement("button",{onClick:()=>lo(L._id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:"0.95em"},"aria-label":"Delete note",title:"Delete note",type:"button"},"Delete")))),n==="777777"&&K.length>0&&f.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",cursor:"pointer",fontSize:"0.98em"},onClick:Z,type:"button"},"Clear All Notes")),f.createElement("button",{className:fe.dashboardLogoutBtn,onClick:o,type:"button"},"Logout"),n==="777777"&&f.createElement(f.Fragment,null,f.createElement("button",{className:fe.dashboardAdminBtn,onClick:()=>z(!0),type:"button"},"Add Note"),f.createElement("button",{className:fe.dashboardAdminBtn,onClick:s,type:"button"},"Admin"),f.createElement("button",{className:fe.dashboardAdminBtn,onClick:()=>Oa(Qn==="challenge"?"scheduled":"challenge"),type:"button"},Qn==="challenge"?"Switch to Phase 1 (Scheduled)":"Switch to Phase 2 (Challenge)"),Qn&&f.createElement("button",{className:fe.dashboardAdminBtn,onClick:()=>Oa(null),type:"button",style:{background:"#888"}},"Clear Phase Override")))),En&&f.createElement(f.Fragment,null,f.createElement(ny,{onClose:()=>Nn(!1),excludeName:ut,senderName:ut,senderEmail:u,selectedDivision:p,phase:lt,onProposalComplete:()=>Nn(!1)})),La&&f.createElement(ny,{onClose:()=>on(!1),excludeName:null,senderName:ut,senderEmail:u,phase:lt,onProposalComplete:()=>on(!1)}),mt&&ia&&f.createElement(ky,{onClose:()=>{Vn(!1),pn(null)},player:ia,onProposeMatch:(L,ge)=>{en({player:ia,day:L,slot:ge,selectedDivision:p,phase:lt}),Ds(!0),Vn(!1),pn(null)},selectedDivision:p,phase:lt}),io&&Rn&&f.createElement(Ky,{player:Rn.player,day:Rn.day,slot:Rn.slot,selectedDivision:Rn.selectedDivision,phase:Rn.phase||lt,onClose:()=>Ds(!1),senderName:`${t} ${a}`,senderEmail:u,onProposalComplete:()=>{Ds(!1),en(null),Jn(),pa()}}),f.createElement(EN,{open:b,onClose:()=>_(!1),standingsUrl:gU[p]}),f.createElement(FN,{open:G,onClose:le,match:R,onCompleted:L=>setUpcomingMatches(ge=>ge.filter(we=>we._id!==L)),userPin:n,onMatchUpdated:L=>P(L),senderName:`${t} ${a}`,senderEmail:u}),se&&f.createElement("div",{className:fe.modalOverlay,style:{zIndex:99999}},f.createElement("div",{className:fe.modalContent,style:{maxWidth:400,margin:"auto"}},f.createElement("h2",null,"Add News/Note"),f.createElement("textarea",{value:D,onChange:L=>H(L.target.value),rows:4,style:{width:"100%",marginBottom:12,borderRadius:6,padding:8},placeholder:"Enter your note..."}),W&&f.createElement("div",{style:{color:"red",marginBottom:8}},W),f.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},f.createElement("button",{className:fe.dashboardBtn,onClick:()=>z(!1),type:"button"},"Cancel"),f.createElement("button",{className:fe.dashboardBtn,disabled:!D.trim(),onClick:In,type:"button"},"Add Note")))),C&&f.createElement(Op,{proposals:xn,onSelect:L=>{const ge=u&&L.senderEmail&&u.toLowerCase()===L.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(L.senderName||"").toLowerCase();I(L),A(""),S(!1),ta(ge)},onClose:()=>S(!1),type:"received"}),k&&f.createElement(Op,{proposals:gr,onSelect:L=>{const ge=u&&L.senderEmail&&u.toLowerCase()===L.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(L.senderName||"").toLowerCase();I(L),A(""),O(!1),ta(ge)},onClose:()=>O(!1),type:"sent"}),E&&!cn&&f.createElement("div",{className:fe.modalOverlay},f.createElement("div",{className:fe.modalContent,style:{maxWidth:420,margin:"auto"}},f.createElement(KN,{proposal:E,userNote:M,setUserNote:A,onConfirm:async()=>{await di.updateProposalStatus(E._id,"confirmed",M),I(null),A(""),Jn(),pa()},onClose:()=>{I(null),A("")},onCounterPropose:()=>{$(E),q(!0),I(null)},phase:lt,currentUserName:`${t} ${a}`,currentUserEmail:u}))),f.createElement(ek,{proposal:Y,open:U,onClose:()=>{q(!1),$(null)},onSubmit:N,senderPlayer:Ft.find(L=>{var ge,we;return`${L.firstName} ${L.lastName}`.trim().toLowerCase()===((Y==null?void 0:Y.senderName)||"").trim().toLowerCase()||((ge=L.email)==null?void 0:ge.toLowerCase())===((we=Y==null?void 0:Y.senderEmail)==null?void 0:we.toLowerCase())}),phase:lt,selectedDivision:p}),E&&cn&&f.createElement(pB,{proposal:E,open:cn,onClose:()=>{ta(!1),I(null)},onEdit:()=>{E.isCounter?(ta(!1),setTimeout(()=>{I(null),$(E),q(!0)},0)):vr(!0)},onMessage:()=>{alert("Message opponent coming soon!")}}),E&&Gr&&f.createElement(vB,{proposal:E,open:Gr,onClose:()=>{vr(!1)},onSave:L=>{I(L),pa(),vr(!1)},selectedDivision:p,phase:lt,receiverPlayer:Ft.find(L=>{var ge,we;return`${L.firstName} ${L.lastName}`.trim().toLowerCase()===(E.receiverName||"").trim().toLowerCase()||((ge=L.email)==null?void 0:ge.toLowerCase())===((we=E.receiverEmail)==null?void 0:we.toLowerCase())})}),oe,qr&&f.createElement("div",{className:fe.modalOverlay,style:{zIndex:99999}},f.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"1400px",maxHeight:"900px",background:"#181818",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"}},f.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #333",background:"#222",borderRadius:"12px 12px 0 0"}},f.createElement("h2",{style:{margin:0,color:"#fff",fontSize:"1.2em"}},"League Chat"),f.createElement("button",{onClick:()=>va(!1),style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseOver:L=>L.target.style.background="#444",onMouseOut:L=>L.target.style.background="none",type:"button"},"")),f.createElement("div",{style:{flex:1,overflow:"hidden",position:"relative"}},f.createElement(sU,{userName:`${t} ${a}`,userEmail:u,userPin:n,selectedDivision:p,opponentEmails:De,onClose:()=>va(!1)})))),la&&f.createElement(Op,{proposals:ga,onSelect:()=>{},onClose:()=>Sr(!1),type:"completed",isAdmin:n==="777777",senderEmail:u,senderName:`${t} ${a}`,onProposalUpdated:L=>{Ua(L),pa()}}),f.createElement(_y,{open:vi,onClose:()=>Yn(!1),player1:wr.player1,player2:wr.player2,onSelect:async L=>{if(oa){if((_r==null?void 0:_r.phase)==="scheduled"&&Cr&&tl.hasPhase1DeadlinePassed(Cr)&&!window.confirm(` PHASE 1 DEADLINE HAS PASSED!

You are attempting to complete a match after the Phase 1 deadline. This may affect your standings or eligibility for Phase 2.

Do you want to continue marking this match as completed?`)){Yn(!1);return}Yn(!1),As(oa._id);try{await di.markCompleted(oa._id,L),rr({...oa,winner:L}),Jn(),pa()}catch{alert("Failed to mark as completed.")}As(null)}}}),f.createElement(cU,{isOpen:bi,onClose:()=>{sr(!1),Ns(null)},match:za,onValidate:async L=>{console.log("Validating match:",L),Jn()},onReject:async L=>{console.log("Rejecting match:",L),Jn()}}))}const vU="_customChannelHeader_1kvzt_1",bU="_customChannelHeaderIcon_1kvzt_51",wU="_customChannelHeaderTitle_1kvzt_61",CU="_customChannelHeaderDate_1kvzt_71",_U="_customChannelHeaderOnline_1kvzt_83",SU="_customChannelHeaderOnlineLabel_1kvzt_97",EU="_customChannelHeaderNone_1kvzt_109",xU="_customChannelHeaderAvatar_1kvzt_119",ni={customChannelHeader:vU,customChannelHeaderIcon:bU,customChannelHeaderTitle:wU,customChannelHeaderDate:CU,customChannelHeaderOnline:_U,customChannelHeaderOnlineLabel:SU,customChannelHeaderNone:EU,customChannelHeaderAvatar:xU};function IU(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}function DU(t){if(!t)return"";const a=t.trim().split(" ");if(a.length===1){const e=a[0].split(/[^a-zA-Z0-9]/).filter(Boolean);return e.length>1?(e[0][0]+e[1][0]).toUpperCase():a[0].slice(0,2).toUpperCase()}return(a[0][0]+a[a.length-1][0]).toUpperCase()}function MU({channel:t,currentUser:a}){var l,u,h;const e=((l=t==null?void 0:t.data)==null?void 0:l.name)||(t==null?void 0:t.id)||"General Chat",n=(u=t==null?void 0:t.data)==null?void 0:u.matchDate,s=a==null?void 0:a.id,o=(h=t==null?void 0:t.state)!=null&&h.members?Object.values(t.state.members).filter(m=>{var p,v;return((p=m.user)==null?void 0:p.online)||((v=m.user)==null?void 0:v.id)===s}).map(m=>{var p,v;return((p=m.user)==null?void 0:p.name)||((v=m.user)==null?void 0:v.id)}).filter(Boolean):[(a==null?void 0:a.name)||(a==null?void 0:a.id)].filter(Boolean);return f.createElement("div",{className:ni.customChannelHeader,style:{width:"100%",margin:"0",borderRadius:"0",marginTop:"0",marginBottom:"0"}},f.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%"}},f.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8em",fontSize:"1.1em",textAlign:"center",width:"100%"}},f.createElement("span",{className:ni.customChannelHeaderIcon},""),f.createElement("span",{style:{textAlign:"center"}},"You're in the"," ",f.createElement("span",{className:ni.customChannelHeaderTitle},'"',e,'"')," ","channel."),n&&f.createElement("span",{className:ni.customChannelHeaderDate},"Match Date: ",IU(n))),f.createElement("div",{className:ni.customChannelHeaderOnline},f.createElement("span",{className:ni.customChannelHeaderOnlineLabel},"Online:"),o.length===0&&f.createElement("span",{className:ni.customChannelHeaderNone},"No one online"),o.map(m=>f.createElement("span",{key:m,className:ni.customChannelHeaderAvatar,title:m},DU(m))))))}function AU(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const s=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(s){const[o,l,u,h]=s,m=a[l];m&&e[m].push(`${u} - ${h}`)}}),e}const TU="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",NU="BCAPL SIGNUP";function RU({userName:t,userEmail:a,userPin:e,onClose:n,fromChat:s=!1}){const[o,l]=w.useState([]),[u,h]=w.useState(!0),[m,p]=w.useState(""),[v,b]=w.useState("scheduled"),[_,C]=w.useState(!1),[S,E]=w.useState(!1),[I,M]=w.useState(!1),[A,k]=w.useState(!1),[O,U]=w.useState(null),[q,Y]=w.useState(null),[$,K]=w.useState([]),[pe,ie]=w.useState([]),[ne,se]=w.useState(!1);w.useEffect(()=>{a&&OE.getUser(a).then(P=>{let G=[];Array.isArray(P.divisions)?G=P.divisions.map(Q=>Q.trim()).filter(Boolean):typeof P.divisions=="string"?G=P.divisions.split(",").map(Q=>Q.trim()).filter(Boolean):G=[],l(G),h(!1)}).catch(()=>{l([]),h(!1)})},[a]);const z=async P=>{se(!0);try{const G=`schedule_${P.replace(/[^A-Za-z0-9]/g,"_")}.json`,Q=`${ht}/static/${G}`;console.log(" Fetching schedule from:",Q);const re=await fetch(Q);if(!re.ok)throw new Error("Schedule not found");const Ee=await re.json();console.log(" Schedule data loaded:",Ee.length,"matches"),K(Ee);const ye=await fetch(`${ht}/api/users`);if(!ye.ok)throw new Error("Players not found");const qe=await ye.json();console.log(" Players data loaded:",qe.length,"players"),ie(qe)}catch(G){console.error("Failed to load schedule data:",G),K([]),ie([])}finally{se(!1)}},D=async P=>{p(P);try{const G=await tl.getCurrentPhaseAndWeek(P),Q=(G==null?void 0:G.phase)||"scheduled";console.log(" DivisionSelectorModal - Phase detection:",{division:P,phase:Q,willShowOpponents:Q==="scheduled"||Q==="offseason"}),b(Q),Q==="scheduled"||Q==="offseason"?(console.log(" Opening OpponentsModal for phase:",Q),await z(P),C(!0)):(console.log(" Opening PlayerSearch for phase:",Q),E(!0))}catch(G){console.error("Error fetching phase data:",G),E(!0)}},H=()=>{if(!$.length||!pe.length)return[];const P=`${t}`,G=[];for(const re of $)if(re.player1&&re.player2&&!re.scheduled){const Ee=re.player1.trim(),ye=re.player2.trim();(Ee.toLowerCase()===P.toLowerCase()||ye.toLowerCase()===P.toLowerCase())&&G.push(re)}return G.map(re=>{var qe,ve;const Ee=re.player1&&re.player1.trim().toLowerCase()===P.toLowerCase()?(qe=re.player2)==null?void 0:qe.trim():(ve=re.player1)==null?void 0:ve.trim();if(!Ee)return null;const ye=pe.find(Ve=>Ve.name&&Ve.name.trim().toLowerCase()===Ee.toLowerCase());return{match:re,player:ye,opponentName:Ee}}).filter(Boolean)},W=async P=>{const G=pe.find(Q=>Q.name&&Q.name.trim().toLowerCase()===P.trim().toLowerCase());if(!G){alert("Player data not found for: "+P);return}if(!G.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}if(s){try{console.log("Fetching detailed player data for:",P);const Ee=(await Dh(TU,`${NU}!A1:L1000`)).slice(1).map(ye=>({firstName:ye[0]||"",lastName:ye[1]||"",email:ye[2]||"",phone:ye[3]||"",locations:ye[8]||"",availability:ye[7]||"",pin:ye[11]||"",preferredContacts:(ye[10]||"").split(/\r?\n/).map(qe=>qe.trim().toLowerCase()).filter(Boolean)})).filter(ye=>ye.email&&ye.firstName&&ye.lastName).find(ye=>`${ye.firstName} ${ye.lastName}`.trim().toLowerCase()===P.trim().toLowerCase());if(Ee){console.log("Raw availability data:",Ee.availability);const ye=AU(Ee.availability);console.log("Parsed availability:",ye);const qe={...Ee,availability:ye};console.log("Found detailed player data:",qe),U(qe)}else console.log("No detailed data found, using basic player data"),U(G)}catch(Q){console.error("Error fetching detailed player data:",Q),U(G)}C(!1),M(!0)}else C(!1),E(!0)},F=(P,G,Q,re)=>{console.log("Proposing match:",{day:P,slot:G,phase:Q,division:re,opponent:O}),Y({day:P,slot:G,phase:Q,division:re,opponent:O}),M(!1),k(!0)},R=()=>{C(!1),E(!1),M(!1),k(!1),U(null),Y(null),p(""),n()};return u?f.createElement(zn,{open:!0,onClose:n,title:"Loading Divisions...",maxWidth:"500px"},f.createElement("div",{style:{textAlign:"center",padding:"2rem"}},f.createElement("p",null,"Please wait while we load your divisions..."))):o.length===0?f.createElement(zn,{open:!0,onClose:n,title:"No Divisions Found",maxWidth:"500px"},f.createElement("div",{style:{textAlign:"center",padding:"2rem"}},f.createElement("p",null,"You are not registered for any divisions. Please contact an administrator."),f.createElement("button",{onClick:n,style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"0.8rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"1rem"},onMouseEnter:P=>{P.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",P.target.style.transform="translateY(-2px)",P.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:P=>{P.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",P.target.style.transform="translateY(0)",P.target.style.boxShadow="none"}},"Close"))):f.createElement(f.Fragment,null,!_&&!S&&f.createElement(zn,{open:!0,onClose:n,title:"Select Division",maxWidth:"500px"},f.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},f.createElement("p",{style:{color:"#fff",textAlign:"center",marginBottom:"1.5rem",fontSize:"1rem"}},"Choose a division to schedule a match:"),f.createElement("div",{style:{display:"grid",gap:"12px"}},o.map(P=>f.createElement("button",{key:P,onClick:()=>D(P),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:G=>{G.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",G.target.style.transform="translateY(-2px)",G.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:G=>{G.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",G.target.style.transform="translateY(0)",G.target.style.boxShadow="none"}}," ",P))))),_&&(ne?f.createElement(zn,{open:!0,onClose:R,title:"Loading Opponents...",maxWidth:"500px"},f.createElement("div",{style:{textAlign:"center",padding:"2rem"}},f.createElement("p",null,"Please wait while we load your scheduled opponents..."))):f.createElement(nS,{open:_,onClose:R,opponents:H(),onOpponentClick:W,phase:v})),S&&f.createElement(ny,{onClose:R,excludeName:t,senderName:t,senderEmail:a,onProposalComplete:()=>{console.log("Proposal sent successfully"),R()},selectedDivision:m,phase:v}),I&&O&&f.createElement(ky,{open:I,onClose:R,player:O,senderName:t,senderEmail:a,selectedDivision:m,onProposeMatch:F,phase:v}),A&&q&&f.createElement(Ky,{open:A,onClose:R,player:q.opponent,day:q.day,slot:q.slot,senderName:t,senderEmail:a,selectedDivision:q.division,phase:q.phase,onProposalComplete:()=>{console.log("Match proposal sent successfully"),R()}}))}const kU="_outerChatBg_fgaa6_29",LU="_chatContainer_fgaa6_85",OU="_topNavBar_fgaa6_125",PU="_chatGreeting_fgaa6_169",BU="_buttonRow_fgaa6_193",UU="_topChatButton_fgaa6_207",zU="_logoutWithTimer_fgaa6_297",HU="_timerBox_fgaa6_311",YU="_sectionHeader_fgaa6_339",FU="_channelListRow_fgaa6_411",jU="_announcements_fgaa6_411",WU="_divisions_fgaa6_421",GU="_gameButton_fgaa6_473",ZU="_mainChatArea_fgaa6_509",$U="_mainChatWindow_fgaa6_527",qU="_poolBackground_fgaa6_587",QU="_chatContent_fgaa6_653",VU="_sidebar_fgaa6_667",XU="_hamburgerButton_fgaa6_721",KU="_hamburgerIcon_fgaa6_769",JU="_sidebarBackdrop_fgaa6_779",e9="_closeSidebarButton_fgaa6_803",t9="_mobileNavButtons_fgaa6_813",n9="_mobileNavButton_fgaa6_813",a9="_mobileTimerBox_fgaa6_871",r9="_generalChannelRow_fgaa6_897",s9="_active_fgaa6_963",i9="_channelListName_fgaa6_975",o9="_pinIcon_fgaa6_987",l9="_pinned_fgaa6_1015",c9="_noPinnedChannels_fgaa6_1025",u9="_noChannelsFound_fgaa6_1027",d9="_sidebarSearch_fgaa6_1049",f9="_channelListWrapper_fgaa6_1129",h9="_customMessageUi_fgaa6_1173",m9="_onlineDot_fgaa6_1211",p9="_online_fgaa6_1211",g9="_messageContent_fgaa6_1267",y9="_messageUsername_fgaa6_1285",v9="_messageText_fgaa6_1305",b9="_loadingContainer_fgaa6_1325",w9="_spinner_fgaa6_1339",C9="_spin_fgaa6_1339",_9="_open_fgaa6_1481",S9="_messagesArea_fgaa6_1711",E9="_messageInputContainer_fgaa6_1719",x9="_messageInput_fgaa6_1719",I9="_sendButton_fgaa6_1741",D9="_messageItem_fgaa6_1821",M9="_messageListBackground_fgaa6_2203",A9="_poolTableImg_fgaa6_2233",T9="_poolTableSvg_fgaa6_2235",N9="_channelNamePreview_fgaa6_2263",R9="_messageItemLeft_fgaa6_3111",k9="_messageItemRight_fgaa6_3133",L9="_messageHeader_fgaa6_3207",O9="_messageAuthor_fgaa6_3221",P9="_messageTime_fgaa6_3235",je={outerChatBg:kU,chatContainer:LU,topNavBar:OU,chatGreeting:PU,buttonRow:BU,topChatButton:UU,logoutWithTimer:zU,timerBox:HU,sectionHeader:YU,channelListRow:FU,announcements:jU,divisions:WU,"game-rooms":"_game-rooms_fgaa6_431",gameButton:GU,mainChatArea:ZU,mainChatWindow:$U,poolBackground:qU,chatContent:QU,sidebar:VU,hamburgerButton:XU,hamburgerIcon:KU,sidebarBackdrop:JU,closeSidebarButton:e9,mobileNavButtons:t9,mobileNavButton:n9,mobileTimerBox:a9,generalChannelRow:r9,active:s9,channelListName:i9,pinIcon:o9,pinned:l9,noPinnedChannels:c9,noChannelsFound:u9,sidebarSearch:d9,channelListWrapper:f9,customMessageUi:h9,onlineDot:m9,online:p9,messageContent:g9,messageUsername:y9,messageText:v9,loadingContainer:b9,spinner:w9,spin:C9,"str-chat__send-button":"_str-chat__send-button_fgaa6_1371",open:_9,messagesArea:S9,messageInputContainer:E9,messageInput:x9,sendButton:I9,messageItem:D9,messageListBackground:M9,poolTableImg:A9,poolTableSvg:T9,"str-chat__main-panel":"_str-chat__main-panel_fgaa6_2251",channelNamePreview:N9,"str-chat":"_str-chat_fgaa6_1371","str-chat__container":"_str-chat__container_fgaa6_2315","str-chat__messenger":"_str-chat__messenger_fgaa6_2325","str-chat__messenger--main":"_str-chat__messenger--main_fgaa6_2335","str-chat__messenger--main-panel":"_str-chat__messenger--main-panel_fgaa6_2345","str-chat__messenger--main-panel-inner":"_str-chat__messenger--main-panel-inner_fgaa6_2355","str-chat__messenger--main-panel-inner-content":"_str-chat__messenger--main-panel-inner-content_fgaa6_2365","str-chat__messenger--main-panel-inner-content-inner":"_str-chat__messenger--main-panel-inner-content-inner_fgaa6_2375","str-chat__messenger--main-panel-inner-content-inner-inner":"_str-chat__messenger--main-panel-inner-content-inner-inner_fgaa6_2385","str-chat__message-list":"_str-chat__message-list_fgaa6_2397","str-chat__input-flat--wrapper":"_str-chat__input-flat--wrapper_fgaa6_2407","str-chat__input-flat":"_str-chat__input-flat_fgaa6_2407","str-chat__channel-header":"_str-chat__channel-header_fgaa6_2429","str-chat__thread":"_str-chat__thread_fgaa6_2441","str-chat__window":"_str-chat__window_fgaa6_2453","str-chat__channel":"_str-chat__channel_fgaa6_2429","str-chat__message":"_str-chat__message_fgaa6_2397","str-chat__message-text":"_str-chat__message-text_fgaa6_2527","str-chat__message-author":"_str-chat__message-author_fgaa6_2541","str-chat__message-timestamp":"_str-chat__message-timestamp_fgaa6_2557","str-chat__channel-header-title":"_str-chat__channel-header-title_fgaa6_2705","str-chat__channel-header-info":"_str-chat__channel-header-info_fgaa6_2727","str-chat__thread-header":"_str-chat__thread-header_fgaa6_2747","str-chat__thread-start":"_str-chat__thread-start_fgaa6_2759","str-chat__typing-indicator":"_str-chat__typing-indicator_fgaa6_2779","str-chat__avatar":"_str-chat__avatar_fgaa6_2797","str-chat__avatar-fallback":"_str-chat__avatar-fallback_fgaa6_2807","str-chat__channel-list":"_str-chat__channel-list_fgaa6_2841","str-chat__channel-list-messenger":"_str-chat__channel-list-messenger_fgaa6_2851","str-chat__channel-preview-messenger":"_str-chat__channel-preview-messenger_fgaa6_2859","str-chat__channel-preview-messenger--active":"_str-chat__channel-preview-messenger--active_fgaa6_2887","str-chat__channel-preview-messenger--title":"_str-chat__channel-preview-messenger--title_fgaa6_2899","str-chat__channel-preview-messenger--subtitle":"_str-chat__channel-preview-messenger--subtitle_fgaa6_2911",messageItemLeft:R9,messageItemRight:k9,messageHeader:L9,messageAuthor:O9,messageTime:P9},B9="nbvut8j4y6se",TC=ht,NC="general",U9="announcements";let Pd=!1;const z9=["FRBCAPL TEST","Singles Test"],RC={GENERAL:"general",DIVISIONS:"divisions",ANNOUNCEMENTS:"announcements",GAME_ROOMS:"game-rooms"};function kC(t){return t.toLowerCase().replace(/[^a-z0-9_-]/g,"")}const H9=({channel:t})=>{var a;return f.createElement("div",{className:je.channelNamePreview},((a=t.data)==null?void 0:a.name)||t.id)};function Y9(){return JSON.parse(localStorage.getItem("pinnedChannels")||"[]")}function F9(t){localStorage.setItem("pinnedChannels",JSON.stringify(t))}const j9=({pinned:t,onClick:a})=>f.createElement("span",{onClick:a,className:`${je.pinIcon}${t?" "+je.pinned:""}`,title:t?"Unpin channel":"Pin channel"},t?"":""),hg=({children:t,icon:a})=>f.createElement("div",{className:je.sectionHeader},a&&f.createElement("span",{style:{marginRight:"8px"}},a),t);function W9({userName:t,userEmail:a,userPin:e,channelId:n,onClose:s}){var qe;const o=ao(),[l,u]=w.useState(!1),[h,m]=w.useState(null),[p,v]=w.useState(null),[b,_]=w.useState(null),[C,S]=w.useState({}),[E,I]=w.useState([]),[M,A]=w.useState(null),[k,O]=w.useState(Y9()),[U,q]=w.useState(!1),[Y,$]=w.useState(!1),[K,pe]=w.useState(1800),[ie,ne]=w.useState(""),[se,z]=w.useState([]),[D,H]=w.useState(""),[W,F]=w.useState(!0);w.useEffect(()=>{if(K<=0){R();return}const ve=setInterval(()=>{pe(Ve=>Ve-1)},1e3);return()=>clearInterval(ve)},[K]),w.useEffect(()=>{if(Pd){console.log("Global connection already in progress, skipping...");return}Pd=!0;let ve=Xy.getInstance(B9),Ve=!1,ot=!0;async function St(){console.log("Starting chat initialization...");try{if(ve.userID){console.log("Already connected as:",ve.userID);try{await ve.disconnectUser(),console.log("Disconnected existing user")}catch(mt){console.log("Disconnect error (ignored):",mt.message)}}await new Promise(mt=>setTimeout(mt,300)),console.log("Delay completed, proceeding with token request...");const Ct=kC(a);console.log("Cleaned userId:",Ct),console.log("Making token request to:",`${TC}/token`);const vt=await fetch(`${TC}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Ct})});console.log("Token response status:",vt.status);const{token:En,userId:Nn}=await vt.json();if(console.log("Token received for userId:",Nn),console.log("Connecting user to Stream Chat..."),console.log("Using actualUserId for connection:",Nn),await ve.connectUser({id:Nn,name:t,email:a},En),console.log("User connected successfully!"),Ve=!0,!ot)return;console.log("Setting chat client..."),m(ve),console.log("Creating general channel...");const La=ve.channel("messaging",NC,{name:"General Chat",description:"General discussion for all players"});console.log("General channel object created, now watching..."),await La.watch({limit:30}),console.log("General channel created and watched"),console.log("Creating announcements channel...");const on=ve.channel("messaging",U9,{name:" Announcements",description:"Important announcements and updates"});try{await on.watch({limit:30}),console.log("Announcements channel created and watched")}catch(mt){console.log("Could not load announcements channel:",mt.message)}console.log("Creating division channels...");const Qn={};for(const mt of z9){const Vn=kC(mt),ia=ve.channel("messaging",`division-${Vn}`,{name:` ${mt}`,description:`Discussion for ${mt} players`,category:RC.DIVISIONS});try{await ia.watch({limit:30}),Qn[mt]=ia,console.log(`Division channel created: ${mt}`)}catch(pn){console.log(`Could not load division channel ${mt}:`,pn.message)}}console.log("Creating game room channels...");const Oa=[];for(let mt=1;mt<=5;mt++){const Vn=`game-room-${mt}`,ia=ve.channel("messaging",Vn,{name:` Game Room ${mt}`,description:`Multiplayer game room ${mt} - for future online play`,category:RC.GAME_ROOMS});try{await ia.watch({limit:30}),Oa.push(ia),console.log(`Game room ${mt} created`)}catch(pn){console.log(`Could not load game room ${mt}:`,pn.message)}}console.log("Setting up channel states..."),ot&&(v(La),_(on),S(Qn),I(Oa),A(La),console.log("Setting loading to false..."),F(!1),console.log("Chat initialization complete!"))}catch(Ct){console.error("Error initializing chat:",Ct),console.error("Error details:",{message:Ct.message,stack:Ct.stack,name:Ct.name}),ot&&F(!1)}finally{Pd=!1}}return St(),()=>{if(ot=!1,ve&&Ve)try{ve.disconnectUser()}catch(Ct){console.log("Error during cleanup disconnect:",Ct.message)}Pd=!1}},[a,t]),w.useEffect(()=>{F9(k)},[k]),w.useEffect(()=>{if(console.log("Channel changed:",M),M){const ve=M.state.messages||[];console.log("Channel messages:",ve),z(ve);const Ve=St=>{console.log("New message received:",St);const Ct=M.state.messages||[];console.log("Updated messages from new message:",Ct),z([...Ct])},ot=()=>{console.log("Channel state updated");const St=M.state.messages||[];console.log("Updated messages from state update:",St),z([...St])};return M.on("message.new",Ve),M.on("message.updated",ot),M.on("message.deleted",ot),()=>{M.off("message.new",Ve),M.off("message.updated",ot),M.off("message.deleted",ot)}}else console.log("No channel available"),z([])},[M]);function R(){h&&h.disconnectUser(),localStorage.clear(),s?s():(o("/"),window.location.reload())}function P(){console.log("Schedule Match button clicked"),$(!0)}const G=async()=>{if(console.log("Send message called with:",D),console.log("Channel:",M),!D.trim()){console.log("Message is empty, returning");return}if(!M){console.log("No channel available, returning");return}try{console.log("Sending message to channel...");const ve=await M.sendMessage({text:D});console.log("Message sent successfully:",ve),H("")}catch(ve){console.error("Error sending message:",ve)}},Q=ve=>{ve.key==="Enter"&&!ve.shiftKey&&(ve.preventDefault(),G())};if(W)return f.createElement("div",{className:je.loadingContainer},f.createElement("div",{className:je.spinner}),f.createElement("div",null,"Loading chat...Please wait"));(qe=h==null?void 0:h.user)==null||qe.id;const re=Math.floor(K/60),Ee=K%60,ye=(ve,Ve=null)=>!ve||!ve.cid?null:f.createElement("div",{key:ve.cid,className:`${je.channelListRow} ${Ve?je[Ve]:""} ${(M==null?void 0:M.id)===ve.id?je.active:""}`,onClick:()=>{A(ve),u(!1)}},f.createElement("div",{className:je.channelListName},f.createElement(H9,{channel:ve})),f.createElement(j9,{pinned:k.includes(ve.id),onClick:ot=>{ot.stopPropagation();let St;k.includes(ve.id)?St=k.filter(Ct=>Ct!==ve.id):St=[...k,ve.id],O(St)}}));return f.createElement("div",{className:je.outerChatBg},f.createElement("div",{className:je.chatContainer},f.createElement("button",{className:je.hamburgerButton,onClick:()=>u(!0),"aria-label":"Open channel list"},f.createElement("span",{className:je.hamburgerIcon},"")),l&&f.createElement("div",{className:je.sidebarBackdrop,onClick:()=>u(!1)}),f.createElement("div",{className:je.topNavBar},f.createElement("div",{className:je.buttonRow},f.createElement("button",{className:je.topChatButton,onClick:()=>{s?s():(o("/"),window.location.reload())}},"Dashboard"),f.createElement("button",{className:je.topChatButton,onClick:P},"Schedule a Match")),f.createElement("span",{className:je.chatGreeting},"Hello, ",t,"!"),f.createElement("div",{className:je.logoutWithTimer},f.createElement("button",{className:je.topChatButton,onClick:R},"Logout"),f.createElement("span",{className:je.timerBox},"Auto Logout: ",re,":",Ee.toString().padStart(2,"0")))),f.createElement("div",{className:je.mainChatArea},f.createElement("div",{className:`${je.sidebar} ${l?je.open:""}`},f.createElement("button",{className:je.closeSidebarButton,onClick:()=>u(!1),"aria-label":"Close channel list"},""),f.createElement("div",{className:je.mobileNavButtons},f.createElement("button",{className:je.mobileNavButton,onClick:()=>{s?s():(o("/"),window.location.reload()),u(!1)}}," Dashboard"),f.createElement("button",{className:je.mobileNavButton,onClick:()=>{P(),u(!1)}}," Schedule a Match"),f.createElement("button",{className:je.mobileNavButton,onClick:()=>{R(),u(!1)}}," Logout"),f.createElement("div",{className:je.mobileTimerBox},"Auto Logout: ",re,":",Ee.toString().padStart(2,"0"))),f.createElement("div",{className:`${je.generalChannelRow}${(M==null?void 0:M.id)===NC?" "+je.active:""}`,onClick:()=>{A(p),u(!1)}},f.createElement("span",{style:{marginRight:8}},"#")," General Chat"),f.createElement("div",{className:je.sidebarSearch},f.createElement("input",{type:"text",placeholder:"Search channels...",value:ie,onChange:ve=>ne(ve.target.value)})),f.createElement("div",{className:je.channelListWrapper},f.createElement(hg,{icon:""},"Announcements"),b&&ye(b,"announcements"),f.createElement(hg,{icon:""},"Division Channels"),Object.values(C).map(ve=>ye(ve,"divisions")),f.createElement(hg,{icon:""},"Game Rooms"),E.map(ve=>ye(ve,"game-rooms")),f.createElement("div",{className:`${je.channelListRow} ${je.gameButton}`,onClick:()=>{o("/tenball"),u(!1)}},f.createElement("span",{style:{marginRight:8}},""),"Play Pool Game"))),f.createElement("div",{className:je.mainChatWindow},f.createElement("div",{className:je.poolBackground},f.createElement(df,null)),M&&f.createElement(f.Fragment,null,f.createElement(MU,{channel:M,currentUser:h==null?void 0:h.user}),f.createElement("div",{className:je.messagesArea},se.map(ve=>{var Ct,vt,En,Nn;const Ve=(Ct=ve.user)==null?void 0:Ct.id,ot=(vt=h==null?void 0:h.user)==null?void 0:vt.id;let St=Ve===ot;if(!St&&Ve&&ot){const La=Ve.replace(/_\d+$/,"");St=ot.startsWith(La)}return f.createElement("div",{key:ve.id,className:`${je.messageItem} ${St?je.messageItemRight:je.messageItemLeft}`},f.createElement("div",{className:je.messageHeader},f.createElement("span",{className:je.messageAuthor},((En=ve.user)==null?void 0:En.name)||((Nn=ve.user)==null?void 0:Nn.id)),f.createElement("span",{className:je.messageTime},new Date(ve.created_at).toLocaleTimeString())),f.createElement("div",{className:je.messageText},ve.text))})),f.createElement("div",{className:je.messageInputContainer},f.createElement("input",{type:"text",value:D,onChange:ve=>H(ve.target.value),onKeyPress:Q,placeholder:"Type your message...",className:je.messageInput}),f.createElement("button",{onClick:G,className:je.sendButton,disabled:!D.trim()}," Send"))))),Y&&f.createElement(RU,{userName:t,userEmail:a,userPin:e,onClose:()=>$(!1),fromChat:!0})))}const G9="_adminDashboardRoot_1nn2q_21",Z9="_adminDashboardNav_1nn2q_51",$9="_adminDashboardMainColumn_1nn2q_125",q9="_adminActionButton_1nn2q_335",Q9="_adminChatWrapper_1nn2q_355",V9="_adminChannelList_1nn2q_379",X9="_adminChannelMessages_1nn2q_379",K9="_adminChannelListItem_1nn2q_425",J9="_selected_1nn2q_443",e6="_adminDeleteChannelBtn_1nn2q_451",t6="_adminChannelName_1nn2q_481",n6="_adminMessageItem_1nn2q_513",a6="_adminDeleteMessageBtn_1nn2q_537",r6="_adminCard_1nn2q_567",s6="_adminCardTitle_1nn2q_597",i6="_scrollableCardContent_1nn2q_617",Vt={adminDashboardRoot:G9,adminDashboardNav:Z9,adminDashboardMainColumn:$9,adminActionButton:q9,adminChatWrapper:Q9,adminChannelList:V9,adminChannelMessages:X9,adminChannelListItem:K9,selected:J9,adminDeleteChannelBtn:e6,adminChannelName:t6,adminMessageItem:n6,adminDeleteMessageBtn:a6,adminCard:r6,adminCardTitle:s6,scrollableCardContent:i6},o6="_searchContainer_1xrci_1",l6="_searchTitle_1xrci_23",c6="_searchForm_1xrci_33",u6="_searchInput_1xrci_49",d6="_searchButton_1xrci_73",f6="_resultsTable_1xrci_95",h6="_resultsHeader_1xrci_127",m6="_resultsCell_1xrci_137",p6="_divisionBadge_1xrci_149",g6="_removeBtn_1xrci_179",y6="_addBtn_1xrci_209",fa={searchContainer:o6,searchTitle:l6,searchForm:c6,searchInput:u6,searchButton:d6,resultsTable:f6,resultsHeader:h6,resultsCell:m6,divisionBadge:p6,removeBtn:g6,addBtn:y6};function v6(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,u]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(u)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),v=h.getFullYear();return`${m}-${p}-${v}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,u,h]=o;a=new Date(h,l-1,u)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),s=a.getFullYear();return`${e}-${n}-${s}`}const LC=ht;function b6({open:t,onClose:a}){const[e,n]=w.useState([]),[s,o]=w.useState(!0);w.useEffect(()=>{t&&(o(!0),fetch(`${LC}/admin/unentered-matches`).then(u=>u.json()).then(u=>{n(u),o(!1)}))},[t]);const l=u=>{fetch(`${LC}/admin/mark-lms-entered/${u}`,{method:"PATCH"}).then(h=>h.json()).then(()=>n(e.filter(h=>h._id!==u)))};return t?f.createElement(zn,{open:t,onClose:a,title:"Confirmed Challenge Matches Needing LMS Entry",maxWidth:"520px"},s?f.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"Loading unentered matches..."):e.length===0?f.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"All matches are entered!"):f.createElement("ul",{style:{padding:0,listStyle:"none"}},e.map(u=>f.createElement("li",{key:u._id,style:{marginBottom:12,background:"#222",borderRadius:8,padding:"12px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"4px solid #c00"}},f.createElement("span",null,f.createElement("span",{style:{color:"#fff"}},f.createElement("b",null,v6(u.date)),"  ",f.createElement("span",{style:{color:"#c00"}},u.senderName)," vs ",f.createElement("span",{style:{color:"#c00"}},u.receiverName),u.location&&f.createElement("span",{style:{color:"#fff"}}," @ ",u.location))),f.createElement("button",{style:{marginLeft:16,background:"#c00",color:"#fff",border:"none",borderRadius:5,padding:"7px 14px",fontWeight:"bold",cursor:"pointer",fontSize:"1em",transition:"background 0.2s"},onClick:()=>l(u._id)},"Mark as Entered"))))):null}var BE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OC=f.createContext&&f.createContext(BE),w6=["attr","size","title"];function C6(t,a){if(t==null)return{};var e=_6(t,a),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(a.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}function _6(t,a){if(t==null)return{};var e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(a.indexOf(n)>=0)continue;e[n]=t[n]}return e}function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Xf.apply(this,arguments)}function PC(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,n)}return e}function Kf(t){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?PC(Object(e),!0).forEach(function(n){S6(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):PC(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function S6(t,a,e){return a=E6(a),a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function E6(t){var a=x6(t,"string");return typeof a=="symbol"?a:a+""}function x6(t,a){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function UE(t){return t&&t.map((a,e)=>f.createElement(a.tag,Kf({key:e},a.attr),UE(a.child)))}function pr(t){return a=>f.createElement(I6,Xf({attr:Kf({},t.attr)},a),UE(t.child))}function I6(t){var a=e=>{var{attr:n,size:s,title:o}=t,l=C6(t,w6),u=s||e.size||"1em",h;return e.className&&(h=e.className),t.className&&(h=(h?h+" ":"")+t.className),f.createElement("svg",Xf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,l,{className:h,style:Kf(Kf({color:t.color||e.color},e.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&f.createElement("title",null,o),t.children)};return OC!==void 0?f.createElement(OC.Consumer,null,e=>a(e)):a(BE)}function D6(t){return pr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function M6(t){return pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function A6(t){return pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function T6(t){return pr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function N6(t){return pr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function R6(t){return pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function k6(t){return pr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function L6(t){return pr({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function O6(t){return pr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function P6(t){return pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(t)}function B6(t){return pr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const U6="nbvut8j4y6se",mg="frbcaplgmailcom";function z6({backendUrl:t}){const[a,e]=w.useState([]),[n,s]=w.useState(""),[o,l]=w.useState(!1),[u,h]=w.useState("");return w.useEffect(()=>{fetch(`${t}/admin/divisions`).then(m=>m.json()).then(m=>{const p=m.map(v=>v.name);e(p),s(p[0]||"")}).catch(()=>e([]))},[t]),f.createElement("div",{style:{margin:"12px 0"}},f.createElement("h3",null,"Update Schedule for Division"),f.createElement("select",{value:n,onChange:m=>s(m.target.value),style:{marginRight:8,padding:4,borderRadius:4}},a.map(m=>f.createElement("option",{key:m,value:m},m))),f.createElement("button",{onClick:async()=>{l(!0),h("");try{const p=await(await fetch(`${t}/admin/update-schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:n})})).text();h(" "+p)}catch(m){h(" "+m.message)}l(!1)},disabled:o||!n,style:{background:"#673ab7",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",fontWeight:"bold",cursor:o?"not-allowed":"pointer"}},o?"Updating...":"Update Schedule"),u&&f.createElement("div",{style:{marginTop:8}},u))}function H6({backendUrl:t}){const[a,e]=w.useState(!1),[n,s]=w.useState(""),o=async()=>{e(!0),s("");try{(await fetch(`${t}/admin/sync-users`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?s(" Users synced successfully!"):s(" Sync failed.")}catch{s(" Sync failed.")}e(!1)};return f.createElement("div",{style:{margin:"12px 0"}},f.createElement("button",{onClick:o,disabled:a,style:{background:"#007bff",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",cursor:a?"not-allowed":"pointer",fontWeight:"bold"}},a?"Adding...":"Add Players to Database"),n&&f.createElement("div",{style:{marginTop:8}},n))}function Y6({backendUrl:t}){const[a,e]=w.useState(!1),[n,s]=w.useState(""),[o,l]=w.useState(""),u=async()=>{e(!0),s(""),l("");try{const h=await fetch(`${t}/admin/update-standings`,{method:"POST",headers:{"Content-Type":"application/json"}}),m=await h.json();h.ok?(s(" All standings updated successfully!"),m.message&&m.message.includes("Scraping Summary")&&l(m.message)):(s(" Update failed: "+(m.error||"Unknown error")),m.error&&l(m.error))}catch(h){s(" Update failed: Network error"),l(h.message)}e(!1)};return f.createElement("div",{style:{margin:"12px 0"}},f.createElement("button",{onClick:u,disabled:a,style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",cursor:a?"not-allowed":"pointer",fontWeight:"bold"}},a?" Updating All Standings...":" Update All Standings"),n&&f.createElement("div",{style:{marginTop:8,fontWeight:"bold"}},n),o&&f.createElement("div",{style:{marginTop:8,padding:8,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"0.9em",whiteSpace:"pre-wrap",fontFamily:"monospace"}},o))}function F6({backendUrl:t,onDivisionCreated:a}){const[e,n]=w.useState(""),[s,o]=w.useState(""),[l,u]=w.useState(""),[h,m]=w.useState(""),[p,v]=w.useState(""),[b,_]=w.useState(""),C=async S=>{S.preventDefault(),_("");try{const E=await fetch(`${t}/api/seasons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,division:e,description:s,scheduleUrl:l,standingsUrl:h,seasonStart:p})}),I=await E.json();E.ok?(_(" Division/Season created!"),n(""),o(""),u(""),m(""),v(""),a&&a()):_(" "+(I.error||"Failed to create division/season."))}catch{_(" Failed to create division/season.")}};return f.createElement("form",{onSubmit:C,style:{marginBottom:16}},f.createElement("h3",null,"Create New Division/Season"),f.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},f.createElement("input",{type:"text",placeholder:"Division Name",value:e,onChange:S=>n(S.target.value),required:!0}),f.createElement("input",{type:"text",placeholder:"Description (optional)",value:s,onChange:S=>o(S.target.value)}),f.createElement("input",{type:"url",placeholder:"Schedule URL",value:l,onChange:S=>u(S.target.value),required:!0}),f.createElement("input",{type:"url",placeholder:"Standings URL",value:h,onChange:S=>m(S.target.value),required:!0}),f.createElement("input",{type:"date",placeholder:"Season Start",value:p,onChange:S=>v(S.target.value),required:!0}),f.createElement("div",{style:{fontSize:"0.95em",color:"#aaa",marginTop:4}},"Phase 1: 6 weeks  Phase 2: 4 weeks  Season: 10 weeks total (auto-calculated)"),f.createElement("button",{type:"submit"},"Create")),b&&f.createElement("div",{style:{marginTop:8}},b))}function j6({backendUrl:t}){const[a,e]=w.useState(""),[n,s]=w.useState([]),[o,l]=w.useState([]),[u,h]=w.useState("");w.useEffect(()=>{fetch(`${t}/admin/divisions`).then(b=>b.json()).then(b=>l(b.map(_=>_.name))).catch(()=>l([]))},[t]);const m=async b=>{if(b.preventDefault(),!!a.trim())try{const C=await(await fetch(`${t}/admin/search-users?query=${encodeURIComponent(a)}`)).json();s(C)}catch{s([]),alert("Search failed")}},p=async(b,_)=>{try{await fetch(`${t}/admin/user/${b}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:_})}),m({preventDefault:()=>{}})}catch{alert("Failed to add user to division")}},v=async(b,_)=>{try{await fetch(`${t}/admin/user/${b}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:_})}),m({preventDefault:()=>{}})}catch{alert("Failed to remove user from division")}};return f.createElement("div",{className:fa.searchContainer},f.createElement("h3",{className:fa.searchTitle},"Player Search & Quick Division Management"),f.createElement("form",{onSubmit:m,className:fa.searchForm},f.createElement("input",{type:"text",placeholder:"Search by name or email",value:a,onChange:b=>e(b.target.value),className:fa.searchInput}),f.createElement("button",{type:"submit",className:fa.searchButton},"Search")),n.length>0&&f.createElement("table",{className:fa.resultsTable},f.createElement("thead",null,f.createElement("tr",{className:fa.resultsHeader},f.createElement("th",null,"Name"),f.createElement("th",null,"Email"),f.createElement("th",null,"Divisions"),f.createElement("th",null,"Add to Division"))),f.createElement("tbody",null,n.map(b=>f.createElement("tr",{key:b.id},f.createElement("td",{className:fa.resultsCell},b.name||b.id),f.createElement("td",{className:fa.resultsCell},b.email),f.createElement("td",{className:fa.resultsCell},(b.divisions||[]).length>0?b.divisions.map(_=>f.createElement("span",{key:_,className:fa.divisionBadge},_,f.createElement("button",{className:fa.removeBtn,onClick:()=>v(b.id,_),title:`Remove from ${_}`},""))):f.createElement("span",{style:{color:"#888"}},"None")),f.createElement("td",{className:fa.resultsCell},f.createElement("select",{value:u,onChange:_=>h(_.target.value)},f.createElement("option",{value:""},"Select Division"),o.map(_=>f.createElement("option",{key:_,value:_},_))),f.createElement("button",{disabled:!u,onClick:()=>p(b.email,u),className:fa.addBtn},"Add")))))))}function W6({backendUrl:t}){const[a,e]=w.useState([]),[n,s]=w.useState(!1),[o,l]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(""),v=async()=>{const M=await(await fetch(`${t}/admin/divisions`)).json();h(M.map(A=>A.name).sort())},b=()=>{s(!0),fetch(`${t}/api/users`).then(I=>I.json()).then(I=>{e(I),s(!1)}).catch(()=>s(!1))};w.useEffect(()=>{b(),v()},[t]);const _=async(I,M)=>{l("");try{const k=await(await fetch(`${t}/admin/user/${I}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:M})})).json();k.success?(e(a.map(O=>O.id===I?k.user:O)),l(` Added to ${M}!`)):l(" "+(k.error||"Failed to add division"))}catch{l(" Network error")}},C=async(I,M)=>{l("");const k=await(await fetch(`${t}/admin/user/${I}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:M})})).json();k.success?(e(a.map(O=>O.id===I?k.user:O)),l(` Removed from ${M}!`)):l(" "+(k.error||"Failed to remove division"))},S=m?a.filter(I=>(I.divisions||[]).includes(m)):[],E=m?a.filter(I=>!(I.divisions||[]).includes(m)):[];return n?f.createElement("div",null,"Loading users..."):f.createElement("div",{style:{margin:"24px 0",padding:16,border:"1px solid #ccc",borderRadius:8}},f.createElement("h3",null,"Division Manager"),f.createElement("div",{style:{marginBottom:12}},f.createElement("label",null,f.createElement("b",null,"Select Division: "),f.createElement("select",{value:m,onChange:I=>p(I.target.value),style:{marginLeft:8,padding:4,borderRadius:4}},f.createElement("option",{value:""},"-- Select --"),u.map(I=>f.createElement("option",{key:I,value:I},I))))),o&&f.createElement("div",{style:{marginBottom:8}},o),m&&f.createElement(f.Fragment,null,f.createElement("h4",null,"Users in ",m),S.length===0?f.createElement("div",null,"No users found in this division."):f.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",null,"User"),f.createElement("th",null,"Email"),f.createElement("th",null,"Divisions"),f.createElement("th",null,"Remove"))),f.createElement("tbody",null,S.map(I=>f.createElement("tr",{key:I.id},f.createElement("td",null,I.name||I.id),f.createElement("td",null,I.email),f.createElement("td",null,(I.divisions||[]).join(", ")),f.createElement("td",null,f.createElement("button",{onClick:()=>C(I.email,m),style:{color:"red",border:"none",background:"none",cursor:"pointer"}},"Remove")))))),f.createElement("h4",{style:{marginTop:24}},"Add Users to ",m),E.length===0?f.createElement("div",null,"All users are already in this division."):f.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",null,"User"),f.createElement("th",null,"Email"),f.createElement("th",null,"Add"))),f.createElement("tbody",null,E.map(I=>f.createElement("tr",{key:I.id},f.createElement("td",null,I.name||I.id),f.createElement("td",null,I.email),f.createElement("td",null,f.createElement("button",{onClick:()=>_(I.email,m),style:{color:"green",border:"none",background:"none",cursor:"pointer"}},"Add"))))))))}function G6(){const[t,a]=w.useState(null),[e,n]=w.useState([]),[s,o]=w.useState(null),[l,u]=w.useState([]),[h,m]=w.useState(!1),[p,v]=w.useState(!1),[b,_]=w.useState("chat"),[C,S]=w.useState(null),E=ao();w.useEffect(()=>{const k=Xy.getInstance(U6);async function O(){try{console.log("Admin setup starting..."),console.log("Admin user ID:",mg),console.log("Backend URL:",ht),console.log("Requesting admin token...");const U=await fetch(`${ht}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:mg})});if(!U.ok){const pe=await U.text();throw console.error("Token request failed:",U.status,pe),new Error(`Token request failed: ${U.status} - ${pe}`)}const q=await U.json();if(console.log("Token response:",q),!q.token){console.error("No token in response:",q),alert("Failed to get admin token - no token in response");return}console.log("Connecting to Stream Chat..."),await k.connectUser({id:mg,name:"Admin"},q.token),a(k),console.log("Querying channels...");const Y={type:"messaging"},$=[{last_message_at:-1}],K=await k.queryChannels(Y,$,{watch:!1,state:!0});n(K),console.log("Admin setup completed successfully")}catch(U){console.error("Admin setup error:",U),alert("Admin setup error: "+U.message)}}return O(),()=>{k&&k.disconnectUser()}},[]),w.useEffect(()=>{if(!s)return;async function k(){m(!0),await s.watch(),u(s.state.messages),m(!1)}k()},[s]);async function I(k){if(window.confirm("Delete this message?"))try{await t.deleteMessage(k),u(O=>O.filter(U=>U.id!==k))}catch(O){alert("Failed to delete message: "+O.message)}}async function M(k){if(window.confirm(`Delete channel "${k.data.name||k.id}"? This cannot be undone.`))try{await k.delete(),n(O=>O.filter(U=>U.id!==k.id)),s&&s.id===k.id&&(o(null),u([]))}catch(O){alert("Failed to delete channel: "+O.message)}}const A=(k,O)=>{S({type:k,message:O}),setTimeout(()=>S(null),5e3)};return t?f.createElement("div",{className:Vt.adminDashboardRoot},f.createElement("div",{className:Vt.adminDashboardNav},f.createElement("button",{onClick:()=>{E("/"),window.location.reload()}}," User Dashboard"),f.createElement("button",{onClick:()=>E("/chat")}," Back to Chat"),f.createElement("button",{onClick:()=>{localStorage.clear(),E("/"),window.location.reload()}}," Logout")),f.createElement("div",{className:Vt.adminDashboardMainColumn},C&&f.createElement("div",{style:{background:C.type==="success"?"#d4edda":"#f8d7da",color:C.type==="success"?"#155724":"#721c24",border:`1px solid ${C.type==="success"?"#c3e6cb":"#f5c6cb"}`,borderRadius:6,padding:"10px 18px",marginBottom:18,fontWeight:600,display:"flex",alignItems:"center",gap:10}},C.type==="success"?f.createElement(A6,null):f.createElement(R6,null)," ",C.message),f.createElement("div",{className:Vt.adminCard},f.createElement("div",{className:Vt.adminCardTitle},f.createElement(P6,null)," Data Sync"),f.createElement("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"}},f.createElement(z6,{backendUrl:ht}),f.createElement(Y6,{backendUrl:ht}),f.createElement(H6,{backendUrl:ht}))),f.createElement("div",{className:Vt.adminCard},f.createElement("div",{className:Vt.adminCardTitle},f.createElement(B6,null)," Division Management"),f.createElement("div",{className:Vt.scrollableCardContent,style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"flex-start"}},f.createElement(F6,{backendUrl:ht,onDivisionCreated:()=>A("success","Division/Season created!")}),f.createElement(j6,{backendUrl:ht}),f.createElement(W6,{backendUrl:ht}))),f.createElement("div",{className:Vt.adminCard},f.createElement("div",{className:Vt.adminCardTitle},f.createElement(M6,null)," Reports & Monitoring"),f.createElement("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"}},f.createElement("button",{className:Vt.adminActionButton,onClick:()=>v(!0)},"View Unentered LMS Matches"),f.createElement(b6,{open:p,onClose:()=>v(!1)}))),f.createElement("div",{className:Vt.adminCard},f.createElement("div",{className:Vt.adminCardTitle},f.createElement(D6,null)," Chat Admin"),f.createElement("div",{className:Vt.scrollableCardContent+" "+Vt.adminChatWrapper},f.createElement("div",{className:Vt.adminChannelList},f.createElement("h3",null,"Channels"),f.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},e.map(k=>f.createElement("li",{key:k.id,className:Vt.adminChannelListItem+((s==null?void 0:s.id)===k.id?` ${Vt.selected}`:"")},f.createElement("button",{className:Vt.adminDeleteChannelBtn,onClick:async O=>{O.stopPropagation(),await M(k)},title:"Delete Channel"},""),f.createElement("span",{className:Vt.adminChannelName,onClick:()=>o(k),tabIndex:0,style:{outline:"none"},onKeyDown:O=>{O.key==="Enter"&&o(k)}},k.data.name||k.id))))),f.createElement("div",{className:Vt.adminChannelMessages},f.createElement("h3",null,s?`Messages in "${s.data.name||s.id}"`:"Select a channel"),h&&f.createElement("div",null,"Loading messages..."),!h&&s&&f.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},l.map(k=>{var O,U;return f.createElement("li",{key:k.id,className:Vt.adminMessageItem},f.createElement("b",null,((O=k.user)==null?void 0:O.name)||((U=k.user)==null?void 0:U.id),":")," ",k.text,f.createElement("button",{className:Vt.adminDeleteMessageBtn,onClick:()=>I(k.id),title:"Delete Message"},""))}))))))):f.createElement("div",null,"Loading admin chat client...")}const Z6="_simplePoolGame_1kwr6_1",$6="_tableContainer_1kwr6_11",q6="_tableCanvas_1kwr6_22",Q6="_aimingInstructions_1kwr6_35",V6="_instructions_1kwr6_47",X6="_controls_1kwr6_52",K6="_shootButton_1kwr6_70",J6="_buttonRow_1kwr6_105",e8="_resetAimButton_1kwr6_111",t8="_powerControl_1kwr6_145",n8="_gameInfo_1kwr6_274",a8="_resetButton_1kwr6_291",r8="_pushOutModal_1kwr6_710",s8="_pushOutContent_1kwr6_723",i8="_pushOutButtons_1kwr6_762",o8="_acceptButton_1kwr6_768",l8="_declineButton_1kwr6_769",Wt={simplePoolGame:Z6,tableContainer:$6,tableCanvas:q6,aimingInstructions:Q6,instructions:V6,controls:X6,shootButton:K6,buttonRow:J6,resetAimButton:e8,powerControl:t8,gameInfo:n8,resetButton:a8,pushOutModal:r8,pushOutContent:s8,pushOutButtons:i8,acceptButton:o8,declineButton:l8},to={BREAK:"break",PLAY:"play"};function Bi(t){return t===to.BREAK}function pg(t){return t===to.PLAY}function c8(t,a){return t===to.BREAK&&a?to.PLAY:t}function u8(t,a){return t===to.BREAK&&a}function BC(t,a){return t===to.PLAY&&a}const d8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwxTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDFIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwxSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsMVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+MTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwxU2hhZG93KSIvPg0KPC9zdmc+IA==",f8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsdWUgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMk1haW4iIGN4PSIzMCUiIGN5PSIzMCUiIHI9IjcwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzQyYTVmNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiMyMTk2ZjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjMTk3NmQyIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwZDQ3YTEiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gSGlnaGxpZ2h0IGZvciBkZXB0aCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwySGlnaGxpZ2h0IiBjeD0iMjUlIiBjeT0iMjUlIiByPSI0NSUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiZGVmYiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAuNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTcGVjdWxhciIgY3g9IjQwJSIgY3k9IjQwJSIgcj0iMjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAuOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU2hhZG93IGdyYWRpZW50IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTaGFkb3ciIGN4PSI3MCUiIGN5PSI3MCUiIHI9IjMwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICA8L2RlZnM+DQogIA0KICA8IS0tIE1haW4gYmFsbCAtLT4NCiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDJNYWluKSIgc3Ryb2tlPSIjMGQ0N2ExIiBzdHJva2Utd2lkdGg9IjAuNSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsMkhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDJTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDIgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiPjI8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMlNoYWRvdykiLz4NCjwvc3ZnPiA=",h8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHJlZCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwzTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjQ0MzM2Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2QzMmYyZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNiNzFjMWMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzhlMDAwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDNIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZlYmVlIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsM01haW4pIiBzdHJva2U9IiM4ZTAwMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwzSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsM1NwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMyAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+MzwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwzU2hhZG93KSIvPg0KPC9zdmc+IA==",m8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHB1cnBsZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw0TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjYWI0N2JjIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzljMjdiMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiM3YjFmYTIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzRhMTQ4YyIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDRIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjNlNWY1IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNE1haW4pIiBzdHJva2U9IiM0YTE0OGMiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw0SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNFNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNCAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+NDwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw0U2hhZG93KSIvPg0KPC9zdmc+IA==",p8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIG9yYW5nZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw1TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmY5ODAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Y1N2MwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNlZjZjMDAiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDVIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmM2UwIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw1SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+NTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw1U2hhZG93KSIvPg0KPC9zdmc+IA==",g8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGdyZWVuIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDZNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiM2NmJiNmEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNGNhZjUwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzM4OGUzYyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMWI1ZTIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNkhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlOGY1ZTgiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw2TWFpbikiIHN0cm9rZT0iIzFiNWUyMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDZIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw2U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA2IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj42PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDZTaGFkb3cpIi8+DQo8L3N2Zz4g",y8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJyb3duIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDdNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiNhMTg4N2YiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOGQ2ZTYzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzZkNGM0MSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2UyNzIzIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsN0hpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlZmViZTkiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw3TWFpbikiIHN0cm9rZT0iIzNlMjcyMyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDdIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw3U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA3IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj43PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDdTaGFkb3cpIi8+DQo8L3N2Zz4g",v8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsYWNrIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDhNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiMyMTIxMjEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOEhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM3NTc1NzUiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw4TWFpbikiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDhIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw4U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA4IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj44PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDhTaGFkb3cpIi8+DQo8L3N2Zz4g",b8="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw5TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDlIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBXaGl0ZSBzdHJpcGUgZ3JhZGllbnQgLS0+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiYWxsOVN0cmlwZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmOGY4ZjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFJlYWxpc3RpYyBjdXJ2ZWQgd2hpdGUgc3RyaXBlIC0tPg0KICA8cGF0aCBkPSJNIDQgOCBBIDggOCAwIDAgMSAxMiA4IEwgMTIgMjQgQSA4IDggMCAwIDEgNCAyNCBaIiBmaWxsPSJ1cmwoI2JhbGw5U3RyaXBlKSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsOUhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDlTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDkgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwMDAwMDAiPjk8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOVNoYWRvdykiLz4NCjwvc3ZnPiA=",Ut=600,Xt=300,Ge=15,$e=Ge/2,qa=1.3,Go=.9,Ic=30,gg=160,Dc=24.5,yg=270.18,UC=Ut*.75,zC=Xt/2,vg=$e*.1,HC=.7,YC=.45,FC=.05,Bd=.99,ai=.75,ri=.75,Qa=.95,si=.3,w8=.8,rn=(...t)=>{},ry=({onGameEnd:t})=>{const a=w.useRef(null),[e,n]=w.useState({balls:[],cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0},isAnimating:!1,currentPlayer:1,gamePhase:to.BREAK,ballInHand:!1,scratchOccurred:!1}),[s,o]=w.useState(!1),[l,u]=w.useState({x:0,y:0}),[h,m]=w.useState(0),[p,v]=w.useState(.5),[b,_]=w.useState(0),[C,S]=w.useState(0),[E,I]=w.useState(!0),[M,A]=w.useState(null),[k,O]=w.useState(null),[U,q]=w.useState(null),[Y,$]=w.useState(!1),[K,pe]=w.useState(!1),[ie,ne]=w.useState(0),[se,z]=w.useState(!1),[D,H]=w.useState(null),[W,F]=w.useState(null),[R,P]=w.useState(!1),[G,Q]=w.useState(!1),[re,Ee]=w.useState(!1),[ye,qe]=w.useState(!1),[ve,Ve]=w.useState(!1),[ot,St]=w.useState(!1),[Ct,vt]=w.useState(null),[En,Nn]=w.useState(!1),[La,on]=w.useState({1:0,2:0}),[Qn,Oa]=w.useState(null),[mt,Vn]=w.useState(null),[ia,pn]=w.useState(!1),[io,Ds]=w.useState(null),[Rn,en]=w.useState(!1),[Ft,gn]=w.useState(!1),[hu,oo]=w.useState(!1),[Ms,Xn]=w.useState(!1),[Kn,Pa]=w.useState(null),[ut,xn]=w.useState(0),[gr,yr]=w.useState([]),[pa,lt]=w.useState(!1),kn=w.useRef(null),ga={cue:R_,1:d8,2:f8,3:h8,4:m8,5:p8,6:g8,7:y8,8:v8,9:b8,10:ih},Ba=w.useRef({}),Jn=w.useRef(null),rr=w.useRef(null),Ua=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}],pi=w.useCallback(Z=>{if(!G)return;const N=a.current.getBoundingClientRect(),le=N.width/Ut,ue=(Z.clientX-N.left)/le,be=(Z.clientY-N.top)/le,De=e.balls.find(Re=>Re.visible&&!Re.pocketed&&Math.sqrt((Re.x-ue)**2+(Re.y-be)**2)<$e*1.5);if(De){H(De.id);return}const Ie=Ua.find(Re=>Math.sqrt((Re.x-ue)**2+(Re.y-be)**2)<60);if(Ie){F(Ie.id);return}},[G,e.balls,Ua]),wl=w.useCallback((Z,N)=>{const Re=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Qe=null,Be=1/0;return Re.forEach(Xe=>{const Oe=Math.hypot(Z-Xe.x,N-Xe.y);Oe<Be&&(Be=Oe,Qe=Xe)}),Qe?Qe.id:null},[]),ea=w.useCallback(Z=>{const Ie=[{x:30,y:24.5,margin:Ge*qa,type:"corner"},{x:570.77,y:24.5,margin:Ge*qa,type:"corner"},{x:30,y:270.18,margin:Ge*qa,type:"corner"},{x:570.77,y:270.18,margin:Ge*qa,type:"corner"},{x:300.385,y:24.5,margin:Ge*Go,type:"side"},{x:300.385,y:270.18,margin:Ge*Go,type:"side"}],Re=Z.x,Qe=Z.y,Be=Z.vx??0,Xe=Z.vy??0,Oe=Math.hypot(Be,Xe);return Ie.some(Me=>{const oe=Me.x-Re,Se=Me.y-Qe,Te=Math.hypot(oe,Se);if(Te>=Me.margin+vg)return!1;if(Oe>0){const Pe=(Be*oe+Xe*Se)/(Oe*(Te||1)),pt=Me.type==="side"?HC:YC,Et=(Be*oe+Xe*Se)/(Te||1);if(Pe<pt||Et<FC)return!1}return!0})},[]),ln=w.useCallback((Z,N)=>Z>=Ic&&Z<=gg&&N>=Dc&&N<=yg,[]);w.useCallback(()=>{n(Z=>({...Z,scratchOccurred:!0,ballInHand:!0,currentPlayer:Z.currentPlayer===1?2:1,cueBall:{...Z.cueBall,x:100,y:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0}}))},[]);const cn=w.useCallback(()=>{const Z=e.balls.filter(le=>le.visible&&!le.pocketed);if(rn("Visible balls on table:",Z.map(le=>le.id).sort((le,ue)=>le-ue)),Z.length===0)return null;const N=Z.reduce((le,ue)=>ue.id<le.id?ue:le);return rn("Lowest numbered ball:",N.id),N},[e.balls]),ta=w.useCallback(()=>{if(re)return null;const Z=io||cn();let N=null;if(e.cueBall.visible||(N="scratch"),e.gamePhase==="break"){mt&&mt!==1&&(N="break_wrong_ball_first");const le=e.balls.filter(be=>be.pocketed&&!be.wasPocketedBeforeShot),ue=ut;le.length===0&&ue<4&&(N="break_insufficient_cushions")}return!N&&mt&&Z&&mt!==Z.id&&(rn("Wrong ball first foul - Hit:",mt,"Lowest:",Z.id),rn("Visible balls on table:",e.balls.filter(le=>le.visible&&!le.pocketed).map(le=>le.id).sort((le,ue)=>le-ue)),N="wrong_ball_first"),!N&&!Ft&&!re&&e.gamePhase!=="break"&&(N="no_contact"),!N&&Ft&&!ia&&e.balls.filter(ue=>ue.pocketed&&!ue.wasPocketedBeforeShot).length===0&&(N="no_rail_contact"),rn("Current lowest ball:",Z?Z.id:"none"),N},[re,mt,ia,Ft,cn,e.balls,io,e.cueBall.visible,e.gamePhase,ut]),Gr=w.useCallback(()=>{if(e.gamePhase==="break"||re)return[];const Z=e.balls.filter(le=>le.pocketed&&!le.wasPocketedBeforeShot);if(Z.length===0)return[];const N=[];return Z.forEach(le=>{if(le.id===D)le.pocketedPocket!==W&&(rn("Illegally pocketed ball:",le.id,"- called ball went in wrong pocket"),N.push(le));else{const ue=Z.find(be=>be.id===D);(!ue||ue.pocketedPocket!==W)&&(rn("Illegally pocketed ball:",le.id,"- not called ball and called ball not legally pocketed"),N.push(le))}}),N},[e.gamePhase,re,D,W,e.balls]),vr=w.useCallback(Z=>{const N=Kn||e.currentPlayer;window.dispatchEvent(new CustomEvent("gameFoul",{detail:{foulType:Z,player:N}})),Z==="scratch"?window.dispatchEvent(new CustomEvent("scratchFoul",{detail:{player:N}})):Z==="wrong_ball_first"?window.dispatchEvent(new CustomEvent("wrongBallFoul",{detail:{player:N}})):Z==="no_rail_contact"&&window.dispatchEvent(new CustomEvent("noRailFoul",{detail:{player:N}})),window.dispatchEvent(new CustomEvent("ballInHand",{detail:{player:N}})),on(le=>{const ue={...le,[N]:le[N]+1};return ue[N]>=3&&(window.dispatchEvent(new CustomEvent("threeFoul",{detail:{player:N}})),alert(`Player ${N} loses due to 3 consecutive fouls!`)),ue}),n(le=>({...le,ballInHand:!0,currentPlayer:le.currentPlayer===1?2:1,scratchOccurred:Z==="scratch"})),Z==="scratch"&&n(le=>({...le,cueBall:{...le.cueBall,visible:!0,x:100,y:150,vx:0,vy:0}})),Oa(Z)},[e.currentPlayer,Kn]),ya=w.useCallback((Z,N)=>{const le=e.cueBall;return Math.hypot(Z-le.x,N-le.y)<=$e},[e.cueBall]),As=w.useCallback((Z,N)=>{(e.ballInHand||e.gamePhase==="break")&&ya(Z,N)&&(o(!0),u({x:Z-e.cueBall.x,y:N-e.cueBall.y}))},[e.ballInHand,e.gamePhase,e.cueBall,ya]),Zr=w.useCallback((Z,N)=>{if(s){const le=Z-l.x,ue=N-l.y;let be,De;e.gamePhase==="break"?(be=Math.max(Ic+$e,Math.min(gg-$e,le)),De=Math.max(Dc+$e,Math.min(yg-$e,ue))):(be=Math.max(30+$e,Math.min(570.77-$e,le)),De=Math.max(24.5+$e,Math.min(270.18-$e,ue))),n(Ie=>({...Ie,cueBall:{...Ie.cueBall,x:be,y:De}}))}},[s,l,e.gamePhase]),gi=w.useCallback(()=>{s&&o(!1)},[s]);w.useCallback((Z,N)=>{ln(Z,N)&&n(le=>({...le,cueBall:{...le.cueBall,x:Z,y:N,vx:0,vy:0,visible:!0,isMoving:!1},ballInHand:!1}))},[ln]),w.useCallback((Z,N)=>{let le=null,ue=1/0;return Ua.forEach(be=>{const De=Math.hypot(Z-be.x,N-be.y);De<ue&&(ue=De,le=be)}),le},[]);const br=w.useCallback((Z,N,le,ue)=>{const be=Z-le,De=N-ue,Ie=Math.sqrt(be*be+De*De);if(Ie<$e*2)return null;const Re=Z-be/Ie*($e*2),Qe=N-De/Ie*($e*2);return{x:Re,y:Qe}},[]);function $r(Z,N){return Z>=15&&Z<=30&&N>=Xt-75&&N<=Xt-60}function qr(Z,N,le,ue,be){BC(be,ue)&&(Z.fillStyle="rgba(255, 215, 0, 0.2)",Z.fillRect(10,N-80,200,25),Z.strokeStyle="rgba(255, 215, 0, 0.5)",Z.lineWidth=1,Z.strokeRect(10,N-80,200,25),Z.fillStyle="rgba(255, 215, 0, 0.9)",Z.font="12px Arial",Z.textAlign="left",Z.fillText("Push Out Available",15,N-65),Z.fillStyle=le?"rgba(255, 215, 0, 0.9)":"rgba(255, 255, 255, 0.3)",Z.fillRect(15,N-75,15,15),Z.strokeStyle="rgba(255, 215, 0, 0.8)",Z.lineWidth=2,Z.strokeRect(15,N-75,15,15),le&&(Z.fillStyle="rgba(255, 215, 0, 0.9)",Z.font="bold 16px Arial",Z.textAlign="center",Z.fillText("",22,N-65)))}function va(Z,N){Z.setLineDash([]),Z.beginPath(),Z.moveTo(N[0].x,N[0].y);for(let le=1;le<N.length;le++){const ue=N[le];Z.lineTo(ue.x,ue.y)}Z.stroke()}function jt(Z){let N="rgba(255, 255, 255, 0.8)";Y?N="rgba(0, 255, 0, 0.95)":K&&(N="rgba(255, 255, 0, 0.9)"),Math.abs(b)>.1&&(b>0?N="rgba(76, 175, 80, 0.9)":N="rgba(244, 67, 54, 0.9)"),Z.strokeStyle=N,Z.lineWidth=Y?4:K?2:3,Z.setLineDash([]),Z.globalAlpha=.9}function yi(Z){const N=Ut*.3,le=Ut*.5*Z;return N+le}function vi(Z,N){let le=Z-N;for(;le>Math.PI;)le-=Math.PI*2;for(;le<-Math.PI;)le+=Math.PI*2;return le}const Yn=w.useCallback((Z,N)=>{const Re=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let Qe=null,Be=1/0;if(Re.forEach(Xe=>{const Oe=Math.hypot(Z-Xe.x,N-Xe.y);Oe<Be&&(Be=Oe,Qe=Xe)}),Qe&&Be<80){const Xe=Math.max(0,(80-Be)/80),Oe=Z+(Qe.x-Z)*Xe*.3,Me=N+(Qe.y-N)*Xe*.3;return{x:Oe,y:Me,assisted:!0}}return{x:Z,y:N,assisted:!1}},[]),oa=w.useCallback((Z,N,le=null,ue={})=>{const{ignoreCuePocket:be=!0}=ue,De={},Ie=.99,Re=16,Qe=30.77,Be=570.77,Xe=24.5,Oe=270.18,Me={1:"#ffff00",2:"#0000ff",3:"#ff0000",4:"#800080",5:"#ffa500",6:"#008000",7:"#8b4513",8:"#000000",9:"#ffff00",10:"#ff0000"};return(()=>{const Se=new Map;e.balls.forEach(Pe=>{Pe.visible&&!Pe.pocketed&&Se.set(Pe.id,{id:Pe.id,x:Pe.x,y:Pe.y,vx:0,vy:0,visible:!0,isMoving:!1,trajectory:[{x:Pe.x,y:Pe.y}]})});const Te=le||e.cueBall;Se.set("cue",{id:"cue",x:Te.x,y:Te.y,vx:Z,vy:N,visible:!0,isMoving:!0,trajectory:[{x:Te.x,y:Te.y}]});for(let Pe=0;Pe<300;Pe++){const pt=Array.from(Se.values()).filter(gt=>gt.visible);for(let gt=0;gt<Re;gt++)pt.forEach(_e=>{if(Math.abs(_e.vx)<.03&&Math.abs(_e.vy)<.03){_e.vx=0,_e.vy=0;return}_e.vx*=Math.pow(Ie,1/Re),_e.vy*=Math.pow(Ie,1/Re);let L=_e.x+_e.vx/Re,ge=_e.y+_e.vy/Re,we=!1;L<Qe+$e?(_e.x=Qe+$e,_e.vx=Math.abs(_e.vx)*.85,we=!0):L>Be-$e?(_e.x=Be-$e,_e.vx=-Math.abs(_e.vx)*.8,we=!0):_e.x=L,ge<Xe+$e?(_e.y=Xe+$e,_e.vy=Math.abs(_e.vy)*.85,we=!0):ge>Oe-$e?(_e.y=Oe-$e,_e.vy=-Math.abs(_e.vy)*.8,we=!0):_e.y=ge;let He=!1;const Ue=(Qe+Be)/2,xe=[{x:Qe,y:Xe,margin:Ge*qa},{x:Be,y:Xe,margin:Ge*qa},{x:Qe,y:Oe,margin:Ge*qa},{x:Be,y:Oe,margin:Ge*qa},{x:Ue,y:Xe,margin:Ge*Go},{x:Ue,y:Oe,margin:Ge*Go}],Ye=_e.x,Dt=_e.y,rt=_e.vx??0,Ht=_e.vy??0,wn=Math.hypot(rt,Ht);let Ca=!1;if(be||(Ca=xe.some(_a=>{const ir=_a.x-Ye,Xr=_a.y-Dt,Cn=Math.hypot(ir,Xr),Kr=_a.margin+vg;if(Cn>=Kr)return!1;if(wn>0){const co=(rt*ir+Ht*Xr)/(wn*(Cn||1)),Ci=_a.x===Ue?HC:YC,Ah=(rt*ir+Ht*Xr)/(Cn||1);if(co<Ci||Ah<FC)return!1}return!0})),Ca&&!(be&&_e.id==="cue")&&(He=!0),!He&&_e.id!=="cue"){const _a=Yn(_e.x,_e.y);if(_a.assisted){const ir=_a.x-_e.x,Xr=_a.y-_e.y;Math.sqrt(ir*ir+Xr*Xr)<5&&(He=!0)}}if(He){_e.visible=!1,_e.trajectory.push({x:_e.x,y:_e.y,pocketed:!0});return}_e.isMoving&&Math.abs(_e.vx)<.03&&Math.abs(_e.vy)<.03&&(_e.vx=0,_e.vy=0,_e.isMoving=!1),_e.trajectory.push({x:_e.x,y:_e.y,bounced:we})});const Et=Se.get("cue");Et&&Et.visible&&Se.forEach((gt,_e)=>{if(_e!=="cue"&&gt.visible){const L=gt.x-Et.x,ge=gt.y-Et.y,we=Math.sqrt(L*L+ge*ge);if(we>0&&we<Ge+.5){const He=Ge-we+.01,Ue=L/we,xe=ge/we,Ye=Math.max(He/2,.1);Et.x-=Ue*Ye,Et.y-=xe*Ye,gt.x+=Ue*Ye,gt.y+=xe*Ye;const Dt=Et.vx-gt.vx,rt=Et.vy-gt.vy,wn=-(Dt*Ue+rt*xe)||.01;Et.vx+=wn*Ue,Et.vy+=wn*xe,gt.vx-=wn*Ue,gt.vy-=wn*xe,Et.trajectory.length>0&&(Et.trajectory[Et.trajectory.length-1].collision=!0),gt.trajectory.length>0&&(gt.trajectory[gt.trajectory.length-1].collision=!0)}}});const la=Array.from(Se.values()).filter(gt=>gt.id!=="cue"&&gt.visible);for(let gt=0;gt<la.length;gt++)for(let _e=gt+1;_e<la.length;_e++){const L=la[gt],ge=la[_e],we=ge.x-L.x,He=ge.y-L.y,Ue=Math.sqrt(we*we+He*He);if(Ue>0&&Ue<Ge){const xe=Ge-Ue+.01,Ye=we/Ue,Dt=He/Ue;L.x-=Ye*(xe/2),L.y-=Dt*(xe/2),ge.x+=Ye*(xe/2),ge.y+=Dt*(xe/2);const rt=L.vx-ge.vx,Ht=L.vy-ge.vy,Ca=-(rt*Ye+Ht*Dt)||.01;L.vx+=Ca*Ye,L.vy+=Ca*Dt,ge.vx-=Ca*Ye,ge.vy-=Ca*Dt,L.isMoving=!0,ge.isMoving=!0,L.trajectory.length>0&&(L.trajectory[L.trajectory.length-1].collision=!0),ge.trajectory.length>0&&(ge.trajectory[ge.trajectory.length-1].collision=!0)}}if(pt.every(gt=>Math.abs(gt.vx)<.028&&Math.abs(gt.vy)<.028))break}Se.forEach((Pe,pt)=>{Pe.trajectory.length>1&&(De[pt]={points:Pe.trajectory,color:Me[pt]||"#ffffff"})})})(),De},[e.balls,e.cueBall,ea]),Qr=w.useCallback((Z,N)=>{const le=N.x-Z.x,ue=N.y-Z.y,be=Math.sqrt(le*le+ue*ue);if(be===0||be>=Ge)return!1;const De=Ge-be+.01,Ie=le/be,Re=ue/be;Z.x-=Ie*(De/2),Z.y-=Re*(De/2),N.x+=Ie*(De/2),N.y+=Re*(De/2);const Qe=Z.vx-N.vx,Be=Z.vy-N.vy,Oe=-(Qe*Ie+Be*Re)||.01;Z.vx+=Oe*Ie,Z.vy+=Oe*Re,N.vx-=Oe*Ie,N.vy-=Oe*Re;const Me=w8,oe=Z.spinX||0,Se=Z.spinY||0,Te=N.spinX||0,Pe=N.spinY||0,pt=(oe-Te)*Me*Ie,Et=(Se-Pe)*Me*Re;return Z.spinX=(oe-pt)*.9,Z.spinY=(Se-Et)*.9,N.spinX=(Te+pt)*.9,N.spinY=(Pe+Et)*.9,Z.isMoving=!0,N.isMoving=!0,!0},[]),wr=w.useCallback(()=>{const Z=[],N=Ut*.75,le=Xt/2;function ue(){return(Math.random()-.5)*1.5}const be=[{x:N,y:le},{x:N+Ge*.95,y:le-Ge*.48},{x:N+Ge*.95,y:le+Ge*.48},{x:N+2*Ge*.95,y:le-Ge*.95},{x:N+2*Ge*.95,y:le},{x:N+2*Ge*.95,y:le+Ge*.95},{x:N+3*Ge*.95,y:le-Ge*1.43},{x:N+3*Ge*.95,y:le-Ge*.48},{x:N+3*Ge*.95,y:le+Ge*.48},{x:N+3*Ge*.95,y:le+Ge*1.43}],De=[{x:N+3*Ge*.95,y:le-Ge*1.43},{x:N+3*Ge*.95,y:le+Ge*1.43}],Re=[2,3].sort(()=>Math.random()-.5),Be=[4,5,6,7,8,9].sort(()=>Math.random()-.5);return[1,10,...Re,...Be].forEach((Oe,Me)=>{let oe;if(Me===0)oe=be[0];else if(Me===1)oe=be[4];else if(Me===2||Me===3){const Se=Me-2;oe=De[Se]}else oe=[be[1],be[2],be[3],be[5],be[7],be[8]][Me-4];oe&&Z.push({id:Oe,x:oe.x+ue(),y:oe.y+ue(),vx:0,vy:0,visible:!0,pocketed:!1,wasPocketedBeforeShot:!1,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0})}),Z},[]),Vr=w.useCallback(()=>{function De(){let Ie=[];for(let Me=0;Me<16;Me++){if(e.cueBall.visible){let oe=e.cueBall.x+e.cueBall.vx/16,Se=e.cueBall.y+e.cueBall.vy/16;oe<30+$e?(e.cueBall.x=30+$e,e.cueBall.vx=Math.abs(e.cueBall.vx)*ai*ri,e.cueBall.spinY*=Qa,Ft&&pn(!0)):oe>570.77-$e?(e.cueBall.x=570.77-$e,e.cueBall.vx=-Math.abs(e.cueBall.vx)*ai*ri,e.cueBall.spinY*=Qa,Ft&&pn(!0)):e.cueBall.x=oe,Se<24.5+$e?(e.cueBall.y=24.5+$e,e.cueBall.vy=Math.abs(e.cueBall.vy)*ai*ri,e.cueBall.spinX*=Qa,Ft&&pn(!0)):Se>270.18-$e?(e.cueBall.y=270.18-$e,e.cueBall.vy=-Math.abs(e.cueBall.vy)*ai*ri,e.cueBall.spinX*=Qa,Ft&&pn(!0)):e.cueBall.y=Se,e.cueBall.vx*=Math.pow(Bd,1/16),e.cueBall.vy*=Math.pow(Bd,1/16),e.cueBall.vx+=e.cueBall.spinX*si,e.cueBall.vy+=e.cueBall.spinY*si,e.cueBall.spinX*=Math.pow(Qa,1/16),e.cueBall.spinY*=Math.pow(Qa,1/16);const Te=Math.sqrt(e.cueBall.vx*e.cueBall.vx+e.cueBall.vy*e.cueBall.vy);Te>.01?(e.cueBall.rotationSpeed=Te/$e,Math.abs(e.cueBall.vx)>Math.abs(e.cueBall.vy)?e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vx):e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vy)):e.cueBall.rotationSpeed=0,ea(e.cueBall)&&(e.cueBall.isMoving=!1,e.cueBall.visible=!1),e.cueBall.isMoving&&Math.abs(e.cueBall.vx)<.03&&Math.abs(e.cueBall.vy)<.03&&(e.cueBall.vx=0,e.cueBall.vy=0,e.cueBall.isMoving=!1)}e.balls.forEach(oe=>{if(!oe.visible)return;let Se=oe.x+oe.vx/16,Te=oe.y+oe.vy/16;Se<30+$e?(oe.x=30+$e,oe.vx=Math.abs(oe.vx)*ai*ri,oe.spinY*=Qa,Ft&&(rn("Rail contact detected for ball:",oe.id),pn(!0)),e.gamePhase==="break"&&oe.id!=="cue"&&xn(pt=>pt+1)):Se>570.77-$e?(oe.x=570.77-$e,oe.vx=-Math.abs(oe.vx)*ai*ri,oe.spinY*=Qa,Ft&&pn(!0),e.gamePhase==="break"&&oe.id!=="cue"&&xn(pt=>pt+1)):oe.x=Se,Te<24.5+$e?(oe.y=24.5+$e,oe.vy=Math.abs(oe.vy)*ai*ri,oe.spinX*=Qa,Ft&&pn(!0),e.gamePhase==="break"&&oe.id!=="cue"&&xn(pt=>pt+1)):Te>270.18-$e?(oe.y=270.18-$e,oe.vy=-Math.abs(oe.vy)*ai*ri,oe.spinX*=Qa,Ft&&pn(!0),e.gamePhase==="break"&&oe.id!=="cue"&&xn(pt=>pt+1)):oe.y=Te,oe.vx*=Math.pow(Bd,1/16),oe.vy*=Math.pow(Bd,1/16),oe.vx+=oe.spinX*si,oe.vy+=oe.spinY*si,oe.spinX*=Math.pow(Qa,1/16),oe.spinY*=Math.pow(Qa,1/16);const Pe=Math.sqrt(oe.vx*oe.vx+oe.vy*oe.vy);Pe>.01?(oe.rotationSpeed=Pe/$e,Math.abs(oe.vx)>Math.abs(oe.vy)?oe.rotation+=oe.rotationSpeed/16*Math.sign(oe.vx):oe.rotation+=oe.rotationSpeed/16*Math.sign(oe.vy)):oe.rotationSpeed=0,ea(oe)&&(oe.isMoving=!1,oe.visible=!1,oe.pocketed=!0,oe.pocketedPocket=wl(oe.x,oe.y),Ie.includes(oe.id)||Ie.push(oe.id)),oe.isMoving&&Math.abs(oe.vx)<.03&&Math.abs(oe.vy)<.03&&(oe.vx=0,oe.vy=0,oe.isMoving=!1)}),e.cueBall.visible&&e.balls.forEach(oe=>{if(oe.visible){const Se=Qr(e.cueBall,oe);!hu&&Se&&e.cueBall.isMoving&&(rn("First contact made with ball:",oe.id),Vn(oe.id),gn(!0),oo(!0))}}),e.balls.forEach((oe,Se)=>{oe.visible&&e.balls.slice(Se+1).forEach(Te=>{Te.visible&&Qr(oe,Te)})})}const Re=e.balls.every(Me=>!Me.isMoving)&&!e.cueBall.isMoving;if(Re&&Ct&&(Nn(!0),vt(null)),Re&&re&&!Rn&&!Ms&&Kn===e.currentPlayer&&(rn("currentPlayer:",e.currentPlayer),rn("cueBall visible:",e.cueBall.visible),e.cueBall.visible?(Xn(!0),Ee(!1)):(en(!0),Xn(!0),Ee(!1),vr("scratch"))),Re&&!re&&e.gamePhase!=="break"&&!Rn&&!Ms&&Kn===e.currentPlayer&&Kn!==null&&!ot){rn("currentPlayer:",e.currentPlayer),rn("gamePhase:",e.gamePhase),rn("Checking for fouls - Current player:",e.currentPlayer,"First ball hit:",mt);const Me=ta();if(Me)rn("Foul detected:",Me,"by player:",e.currentPlayer),en(!0),Xn(!0),H(null),F(null),Ee(!1),vr(Me);else{if(!ot){const Se=Gr();if(Se.length>0){rn("Illegally pocketed balls detected:",Se.map(Te=>Te.id)),yr(Se),lt(!0),Xn(!0),H(null),F(null);return}}Xn(!0),H(null),F(null),Ee(!1),on(Se=>{const Te={...Se,[Kn]:0};return rn(`Resetting fouls for player ${Kn} only. Player 1 fouls: ${Te[1]}, Player 2 fouls: ${Te[2]}`),Te}),e.balls.filter(Se=>Se.pocketed&&!Se.wasPocketedBeforeShot).length===0&&n(Se=>({...Se,currentPlayer:Se.currentPlayer===1?2:1}))}}if(Re&&ot&&!Rn&&!Ms){Xn(!0),St(!1);const Me=ta();Me?(rn("Break foul detected:",Me,"by player:",e.currentPlayer),en(!0),vr(Me)):e.balls.filter(Se=>Se.pocketed&&!Se.wasPocketedBeforeShot).length===0&&n(Se=>({...Se,currentPlayer:Se.currentPlayer===1?2:1}))}const Qe=e.balls.find(Me=>Me.id===10&&Me.pocketed),Be=e.balls.filter(Me=>Me.visible&&!Me.pocketed),Xe=Be.length>0?Be.reduce((Me,oe)=>oe.id<Me.id?oe:Me):null;if(Re&&Xe&&Xe.id===10&&window.dispatchEvent(new CustomEvent("tenBallTarget",{detail:{player:e.currentPlayer}})),Re&&Xe&&pg(e.gamePhase)&&window.dispatchEvent(new CustomEvent("lowestBall",{detail:{player:e.currentPlayer,lowestBall:Xe.id}})),Re&&pg(e.gamePhase)&&Math.random()<.1&&window.dispatchEvent(new CustomEvent("safetyOpportunity",{detail:{player:e.currentPlayer}})),Re&&Qe){const Me=D===10,oe=W&&Qe.pocketedPocket===W;if(Me&&oe){const Se=Kn;t&&t(Se),window.dispatchEvent(new CustomEvent("gameWinning",{detail:{player:Se}})),setTimeout(()=>{n(Te=>({...Te,balls:wr(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1})),setIsDragging(!1),I(!0),on({1:0,2:0}),n(Te=>({...Te,_foulReset:Date.now()})),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()},2e3)}else{n(Te=>({...Te,balls:Te.balls.map(Pe=>Pe.id===10?{...Pe,pocketed:!1,visible:!0,x:UC,y:zC,vx:0,vy:0,isMoving:!1}:Pe)}));const Se=e.balls.find(Te=>Te.id===D&&Te.pocketed&&!Te.wasPocketedBeforeShot);Se&&Se.pocketedPocket===W||n(Te=>({...Te,currentPlayer:Te.currentPlayer===1?2:1})),H(null),F(null)}}const Oe=Bi(e.gamePhase);rn("Step function - wasBreakPhase:",Oe,"allStopped:",Re,"gamePhase:",e.gamePhase),n(Me=>({...Me,isAnimating:!Re,gamePhase:c8(Me.gamePhase,Re)})),u8(e.gamePhase,Re)&&(qe(!0),Ve(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutStrategy",{detail:{player:e.currentPlayer}}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutAvailable",{detail:{player:e.currentPlayer}}))},1e3)),Re||(kn.current=requestAnimationFrame(De))}kn.current=requestAnimationFrame(De)},[e,ea,Qr,mt,re,ta,vr,Ct,Rn,Kn,Ms,Gr,ot]),Cr=w.useCallback(()=>{if(e.isAnimating||!Y)return;if(!Bi(e.gamePhase)){if(!re){if(!D&&!W){Q(!0),$(!1);return}}}e.cueBall;const Z=p*18,N=C*Math.PI/180,le=Math.cos(N)*b*si*Z*.05,ue=Math.sin(N)*b*si*Z*.05;Vn(null),pn(!1),Oa(null),en(!1),gn(!1),oo(!1),Xn(!1),Pa(e.currentPlayer),xn(0);const be=e.balls.filter(Ie=>Ie.visible&&!Ie.pocketed),De=be.length>0?be.reduce((Ie,Re)=>Re.id<Ie.id?Re:Ie):null;Ds(De),n(Ie=>({...Ie,balls:Ie.balls.map(Re=>({...Re,wasPocketedBeforeShot:Re.pocketed}))})),n(Ie=>({...Ie,cueBall:{...Ie.cueBall,vx:Math.cos(h)*Z,vy:Math.sin(h)*Z,isMoving:!0,spinX:le,spinY:ue},isAnimating:!0,ballInHand:!1,gamePhase:Ie.gamePhase})),Bi(e.gamePhase)&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("callPocket",{detail:{player:e.currentPlayer}}))},500),Bi(e.gamePhase)&&St(!0),$(!1),I(!0),A(null),O(null),q(null),re&&vt({ballsPocketed:e.balls.filter(Ie=>Ie.pocketed).length,cueBallPosition:{x:e.cueBall.x,y:e.cueBall.y},player:e.currentPlayer}),Q(!1),ye&&!ve&&e.gamePhase!=="break"&&(Ve(!0),qe(!1)),re&&(qe(!1),Ve(!0))},[e.isAnimating,Y,e.cueBall,p,h,re,D,W,e.gamePhase,ye,ve]),Ts=w.useCallback(Z=>{if(e.isAnimating)return;if(Z.button===2){pe(!0);return}const N=a.current.getBoundingClientRect(),le=N.width/Ut,ue=(Z.clientX-N.left)/le,be=(Z.clientY-N.top)/le;if(ue>=0&&ue<=Ut&&be>=0&&be<=Xt){if(G){if(pg(e.gamePhase)&&ye&&$r(ue,be)){Ee(!re);return}if(D&&W||re){if(ue>=Ut/2-80&&ue<=Ut/2-10&&be>=Xt-30&&be<=Xt-5){Q(!1),$(!0);return}if(ue>=Ut/2+10&&ue<=Ut/2+80&&be>=Xt-30&&be<=Xt-5){Q(!1),H(null),F(null),Ee(!1),$(!0);return}}const Re=e.balls.find(Be=>Be.visible&&!Be.pocketed&&Math.sqrt((ue-Be.x)**2+(be-Be.y)**2)<$e),Qe=Ua.find(Be=>Math.sqrt((ue-Be.x)**2+(be-Be.y)**2)<50);if(Re||Qe){pi(Z);return}else{Q(!1),H(null),F(null),$(!1);return}}if((e.ballInHand||Bi(e.gamePhase))&&ya(ue,be)){As(ue,be);return}const Ie=!Y;$(Ie),Ie&&!Bi(e.gamePhase)&&!re&&Q(!0),Ie||(Q(!1),H(null),F(null))}},[e.isAnimating,e.ballInHand,e.gamePhase,ya,As,Y,G,D,W,pi,ye,re]),_r=w.useCallback(Z=>{s&&gi(),Z.button===2&&(pe(!1),!Y&&!e.isAnimating&&($(!0),e.gamePhase!=="break"&&!re&&Q(!0)))},[s,gi,Y,e.isAnimating,e.gamePhase,re]),ba=w.useCallback(Z=>{if(e.isAnimating)return;const N=a.current.getBoundingClientRect(),le=N.width/Ut,ue=(Z.clientX-N.left)/le,be=(Z.clientY-N.top)/le;if(s){Zr(ue,be);return}if(Y&&!(G&&(se||Z.altKey)))return;const De={x:e.cueBall.x,y:e.cueBall.y},Ie={x:Math.max(30,Math.min(570,De.x)),y:Math.max(24,Math.min(270,De.y))},Re=Math.atan2(be-Ie.y,ue-Ie.x);let Qe=!1,Be=null,Xe=1/0;e.balls.forEach(Se=>{if(Se.visible&&!Se.pocketed){const Te=Se.x-Ie.x,Pe=Se.y-Ie.y,pt=Math.sqrt(Te*Te+Pe*Pe),Et=Math.atan2(Pe,Te);Math.abs(Re-Et)<.25&&pt<Xe&&(Xe=pt,Be=Se,Qe=!0)}});let Oe=Re;if(K){let Se=2e-5;Qe&&Be&&(Se=1e-5*(Math.sqrt((Be.x-Ie.x)**2+(Be.y-Ie.y)**2)/100));const Te=Ie.x,Pe=Ie.y,pt=(ue-Te)*Se,Et=(be-Pe)*Se;Oe=Math.atan2(Et,pt)}else if(Qe){const Te=Ie.x,Pe=Ie.y,pt=(ue-Te)*.25,Et=(be-Pe)*.25;Oe=Math.atan2(Et,pt)}else{const Se=.9*Math.PI/180;Oe=Math.round(Re/Se)*Se}if(Y&&G&&(se||Z.altKey)){const Se=vi(Oe,ie),Pe=Math.max(-.001,Math.min(.001,Se));Oe=ie+Pe}if((Math.abs(vi(Oe,ie))>2e-4||!K)&&(m(Oe),ne(Oe)),Qe&&Be){const Se=br(Be.x,Be.y,Ie.x,Ie.y);A(Se),O(Be)}else A(null),O(null)},[e.isAnimating,s,Zr,e.cueBall,e.balls,br,Y,G]),bi=w.useCallback(()=>{},[]);w.useCallback(()=>{I(!0),v(.5),_(0),S(0),q(null),$(!1)},[]),w.useCallback(()=>{const Z=e.cueBall;let N=null,le=1/0;return e.balls.forEach(ue=>{ue.visible&&!ue.pocketed&&ue.id<le&&(le=ue.id,N=ue)}),N?Math.atan2(N.y-Z.y,N.x-Z.x):Math.atan2(Xt/2-Z.y,Ut/2-Z.x)},[e.cueBall,e.balls]),w.useEffect(()=>{n(Z=>({...Z,balls:wr()}))},[wr]),w.useEffect(()=>{if(e.isAnimating)return Vr(),()=>{kn.current&&cancelAnimationFrame(kn.current)}},[e.isAnimating,Vr]),w.useEffect(()=>{const Z=N=>{N.key==="Escape"&&G&&(Q(!1),H(null),F(null),$(!1))};return document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}},[G]);const sr=w.useCallback(()=>{const Z=a.current;if(!Z)return;const N=Z.getContext("2d");if(N.clearRect(0,0,Ut,Xt),Jn.current?N.drawImage(Jn.current,0,0,Ut,Xt):(N.fillStyle="#0d5c0d",N.fillRect(0,0,Ut,Xt)),rr.current){N.save(),N.globalAlpha=.25;const ue=Ut*.305,be=ue*(rr.current.height/rr.current.width),De=(Ut-ue)/2,Ie=(Xt-be)/2;N.shadowColor="rgba(0, 0, 0, 0.3)",N.shadowBlur=4,N.shadowOffsetX=0,N.shadowOffsetY=1,N.drawImage(rr.current,De,Ie,ue,be),N.restore()}Bi(e.gamePhase)&&!e.isAnimating&&(N.save(),N.strokeStyle="rgba(255, 0, 0, 0.5)",N.lineWidth=2,N.setLineDash([10,5]),N.strokeRect(Ic,Dc,gg-Ic,yg-Dc),N.fillStyle="rgba(255, 0, 0, 0.8)",N.font="12px Arial",N.fillText("KITCHEN",Ic+10,Dc+20),N.restore());const le=(ue,be)=>{if(Ba.current[be]){const De=Ba.current[be];N.save(),N.translate(ue.x,ue.y),N.rotate(ue.rotation||0),N.shadowColor="rgba(0, 0, 0, 0.3)",N.shadowBlur=3,N.shadowOffsetX=1,N.shadowOffsetY=1,N.beginPath(),N.arc(0,0,$e,0,2*Math.PI),N.clip(),N.drawImage(De,-7.5,-7.5,Ge,Ge),N.shadowColor="transparent",N.globalAlpha=.3,N.fillStyle="rgba(255, 255, 255, 0.8)",N.beginPath(),N.arc(-7.5*.3,-7.5*.3,$e*.4,0,2*Math.PI),N.fill(),N.restore()}else{const De=new Image;De.onload=()=>{Ba.current[be]=De,le(ue,be)},De.src=be}};if(e.balls.forEach(ue=>{ue.visible&&!ue.pocketed&&le(ue,ga[ue.id])}),E&&!e.isAnimating){const ue={x:Math.max(30,Math.min(570,e.cueBall.x)),y:Math.max(24,Math.min(270,e.cueBall.y))},be=h,De=p*18,Ie=Math.cos(be)*De,Re=Math.sin(be)*De,Qe=C*Math.PI/180,Be=Math.cos(Qe)*b*si*De*.05,Xe=Math.sin(Qe)*b*si*De*.05,Oe=oa(Ie+Be,Re+Xe,ue,{ignoreCuePocket:!0});if(Oe.cue&&Oe.cue.points.length>1){const Me=Oe.cue.points.find(oe=>oe.collision);if(Me){rn("Trajectory collision at:",Me.x.toFixed(2),Me.y.toFixed(2));const oe=e.balls.find(Se=>Se.visible&&!Se.pocketed&&Se.id===1);oe&&rn("Actual ball 1 position:",oe.x.toFixed(2),oe.y.toFixed(2))}}Object.entries(Oe).forEach(([Me,oe])=>{const Se=Me==="cue"?1:3;if(oe.points.length>Se){if(N.save(),Me==="cue"?jt(N):(N.strokeStyle=oe.color,N.lineWidth=2,N.globalAlpha=.7),Me==="cue"){const Te=oe.points,Pe=Te[0],pt=Te[Te.length-1]||Pe;if(Math.hypot(pt.x-Pe.x,pt.y-Pe.y)<20){const Sr=yi(p);N.beginPath(),N.moveTo(Pe.x,Pe.y),N.lineTo(Pe.x+Math.cos(be)*Sr,Pe.y+Math.sin(be)*Sr),N.stroke()}else va(N,Te)}else va(N,oe.points);N.restore();for(let Te=1;Te<oe.points.length;Te++){const Pe=oe.points[Te];if(Pe.collision&&(N.save(),N.fillStyle=oe.color,N.globalAlpha=.6,N.beginPath(),N.arc(Pe.x,Pe.y,4,0,2*Math.PI),N.fill(),N.restore()),Pe.pocketed){N.save(),N.fillStyle="#00ff00",N.globalAlpha=.8,N.beginPath(),N.arc(Pe.x,Pe.y,6,0,2*Math.PI),N.fill(),N.restore();break}}}else if(Me==="cue"){N.save(),jt(N);const Te=oe.points[0],Pe=yi(p),pt=Te.x+Math.cos(be)*Pe,Et=Te.y+Math.sin(be)*Pe;N.beginPath(),N.moveTo(Te.x,Te.y),N.lineTo(pt,Et),N.stroke(),N.restore()}})}if(U&&!e.isAnimating&&(N.save(),N.strokeStyle="rgba(255, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(U.x,U.y,25,0,2*Math.PI),N.stroke(),N.restore()),!e.isAnimating&&!Y){const Qe=[{x:30,y:24.5,margin:Ge*qa},{x:570.77,y:24.5,margin:Ge*qa},{x:30,y:270.18,margin:Ge*qa},{x:570.77,y:270.18,margin:Ge*qa},{x:300.385,y:24.5,margin:Ge*Go},{x:300.385,y:270.18,margin:Ge*Go}],Be=e.cueBall.x+Math.cos(h)*100,Xe=e.cueBall.y+Math.sin(h)*100;let Oe=null,Me=1/0;if(Qe.forEach(oe=>{const Se=Math.hypot(Be-oe.x,Xe-oe.y);Se<Me&&(Me=Se,Oe=oe)}),Oe&&Me<120){const oe=Oe.margin+vg;N.save(),N.strokeStyle="rgba(0, 255, 0, 0.18)",N.lineWidth=1.5,N.setLineDash([]),N.beginPath(),N.arc(Oe.x,Oe.y,oe,0,2*Math.PI),N.stroke(),N.fillStyle="rgba(0, 255, 0, 0.15)",N.beginPath(),N.arc(Oe.x,Oe.y,2,0,2*Math.PI),N.fill(),N.restore()}}if(G&&!e.isAnimating){if(N.save(),N.fillStyle="rgba(0, 0, 0, 0.4)",N.fillRect(0,0,Ut,Xt),N.fillStyle="rgba(255, 215, 0, 0.9)",N.font="bold 16px Arial",N.textAlign="center",N.fillText("CALL YOUR SHOT",Ut/2,30),N.font="14px Arial",N.fillStyle="rgba(255, 255, 255, 0.9)",N.fillText("Click a ball, then click a pocket",Ut/2,50),D&&(N.fillStyle="rgba(0, 255, 0, 0.8)",N.font="bold 14px Arial",N.fillText(`Selected Ball: ${D}`,Ut/2,Xt-60)),W&&(N.fillStyle="rgba(0, 255, 0, 0.8)",N.font="bold 14px Arial",N.fillText(`Selected Pocket: ${W.replace("-"," ")}`,Ut/2,Xt-40)),D){const ue=e.balls.find(be=>be.id===D&&be.visible&&!be.pocketed);ue&&(N.strokeStyle="rgba(0, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(ue.x,ue.y,$e+5,0,2*Math.PI),N.stroke())}if(W){const ue=Ua.find(be=>be.id===W);ue&&(N.strokeStyle="rgba(0, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(ue.x,ue.y,30,0,2*Math.PI),N.stroke())}rn("Draw function - gamePhase:",e.gamePhase,"pushOutAvailable:",ye,"isCallShotMode:",G),qr(N,Xt,re,ye,e.gamePhase),(D&&W||re)&&(N.fillStyle="rgba(76, 175, 80, 0.9)",N.fillRect(Ut/2-80,Xt-30,70,25),N.fillStyle="white",N.font="bold 12px Arial",N.textAlign="center",N.fillText("CONFIRM",Ut/2-45,Xt-15),N.fillStyle="rgba(244, 67, 54, 0.9)",N.fillRect(Ut/2+10,Xt-30,70,25),N.fillStyle="white",N.font="bold 12px Arial",N.textAlign="center",N.fillText("CANCEL",Ut/2+45,Xt-15)),N.restore()}if(e.cueBall.visible){const ue=e.cueBall,be=ga.cue;if(Ba.current[be]){const De=Ba.current[be];N.save(),N.translate(ue.x,ue.y),N.rotate(ue.rotation||0),N.beginPath(),N.arc(0,0,$e,0,2*Math.PI),N.clip(),N.drawImage(De,-7.5,-7.5,Ge,Ge),b!==0&&!e.isAnimating&&(N.restore(),N.save(),N.strokeStyle=b>0?"rgba(76, 175, 80, 0.8)":"rgba(244, 67, 54, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(ue.x,ue.y,$e+5,0,2*Math.PI),N.stroke(),N.strokeStyle=b>0?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",N.lineWidth=2,N.setLineDash([]),N.beginPath(),N.moveTo(ue.x,ue.y),N.lineTo(ue.x+Math.cos(C*Math.PI/180)*($e+10),ue.y+Math.sin(C*Math.PI/180)*($e+10)),N.stroke()),N.restore()}else{const De=new Image;De.onload=()=>{Ba.current[be]=De,sr()},De.src=be}}N.globalAlpha=1},[e,E,h,ga,p,U,Y,oa,G,D,W,Ua,ye,re]);w.useEffect(()=>{sr()},[e.isAnimating,E,h,p,U,Y,G,D,W,ye,re]),w.useEffect(()=>{const Z=new Image;Z.onload=()=>{Jn.current=Z,sr()},Z.src=T_},[sr]),w.useEffect(()=>{const Z=new Image;Z.onload=()=>{rr.current=Z,sr()},Z.src=Cy},[sr]),w.useEffect(()=>{const Z=le=>{le.altKey&&z(!0)},N=le=>{le.altKey||z(!1),le.key==="Alt"&&z(!1)};return window.addEventListener("keydown",Z),window.addEventListener("keyup",N),()=>{window.removeEventListener("keydown",Z),window.removeEventListener("keyup",N)}},[]);const[za,Ns]=w.useState(!1),wa=w.useCallback(Z=>{Z.preventDefault(),Ns(!0),console.log("English drag started")},[]),Cl=w.useCallback(Z=>{if(!za)return;const N=Z.currentTarget.getBoundingClientRect(),le=Z.clientX-N.left,ue=Z.clientY-N.top,be=le/N.width,De=ue/N.height,Ie=.5,Re=.5,Qe=Math.sqrt((be-Ie)**2+(De-Re)**2),Be=Math.min(Qe,.4),Xe=Math.min(Be/.4,1),Me=(Math.atan2(De-Re,be-Ie)*180/Math.PI+360)%360;_(Xe),S(Me),console.log(`English updated: ${Math.round(Xe*100)}% at ${Math.round(Me)}`)},[za]),wi=w.useCallback(()=>{Ns(!1),console.log("English drag ended")},[]),In=w.useCallback(Z=>{const N=Z%360;return N>=247.5&&N<=292.5?"#4CAF50":N>=67.5&&N<=112.5?"#F44336":N>=157.5&&N<=202.5?"#9C27B0":N>=337.5||N<=22.5?"#FF9800":N>292.5&&N<337.5?"#00BCD4":N>202.5&&N<247.5?"#CDDC39":N>22.5&&N<67.5?"#E91E63":"#FFC107"},[]),lo=w.useCallback(Z=>{const N=Z%360;return N>=247.5&&N<=292.5?"Top Spin":N>=67.5&&N<=112.5?"Back Spin":N>=157.5&&N<=202.5?"Left Spin":N>=337.5||N<=22.5?"Right Spin":N>292.5&&N<337.5?"Top-Right Spin":N>202.5&&N<247.5?"Top-Left Spin":N>22.5&&N<67.5?"Bottom-Right Spin":"Bottom-Left Spin"},[]);return f.createElement("div",{className:Wt.simplePoolGame},f.createElement("div",{className:Wt.aimingInstructions},f.createElement("div",{className:Wt.instructions},f.createElement("strong",null,"How To Aim:"),f.createElement("br",null),"Move mouse to aim  Click table to lock aim  Call Shot  Adjust power  Drag English ball  Click SHOOT",f.createElement("br",null),f.createElement("small",{style:{color:"#888",fontSize:"12px"}}," ",f.createElement("strong",null,"Aim Line Colors:")," White = Aiming  Green = Locked & ready  Yellow = Fine-tuning  Green/Red = English spin  Colored = Object ball paths",f.createElement("br",null)," ",f.createElement("strong",null,"Fine-tuning:")," Hold right-click for precise aiming, release to lock aim",f.createElement("br",null)," ",f.createElement("strong",null,"English:")," Click and drag on the English ball to set spin direction and intensity"))),BC(e.gamePhase,ye)&&f.createElement("div",{style:{alignSelf:"center",margin:"8px 0 14px 0",padding:"6px 14px",background:"rgba(255, 215, 0, 0.95)",color:"#000",fontWeight:700,fontSize:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},"Push Out Available"),f.createElement("div",{className:Wt.tableContainer},f.createElement("canvas",{ref:a,width:Ut,height:Xt,onPointerDown:Ts,onPointerUp:_r,onPointerMove:ba,onPointerLeave:bi,onContextMenu:Z=>Z.preventDefault(),className:Wt.tableCanvas})),f.createElement("div",{className:Wt.controls},f.createElement("div",{className:Wt.powerControl},f.createElement("label",null,"Power: ",Math.round(p*100),"%"),f.createElement("div",{style:{position:"relative",width:"100%",height:"8px",background:"#ffffff",borderRadius:"4px",border:"1px solid #e0e0e0",overflow:"hidden"}},f.createElement("div",{style:{position:"absolute",top:0,left:0,width:`${p*100}%`,height:"100%",background:"#2196F3",borderRadius:"3px"}}),f.createElement("div",{style:{position:"absolute",top:"-4px",left:`${p*100}%`,width:"16px",height:"16px",background:"#2196F3",borderRadius:"50%",border:"1px solid #1976D2",cursor:"pointer",transform:"translateX(-50%)"}}),f.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:p,onChange:Z=>v(parseFloat(Z.target.value)),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",opacity:0}}))),f.createElement("div",{className:Wt.englishControl},f.createElement("label",null,"English: Drag to set spin"),f.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},f.createElement("div",{onMouseDown:wa,onMouseMove:Cl,onMouseUp:wi,onMouseLeave:wi,style:{width:"60px",height:"60px",borderRadius:"50%",border:"2px solid #333",background:"linear-gradient(135deg, #fff 0%, #f0f0f0 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#333",cursor:za?"grabbing":"grab",userSelect:"none"}},b>0?"+":"",Math.round(b*100),"%",b!==0&&f.createElement(f.Fragment,null,f.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Math.cos(C*Math.PI/180)*20}px, ${Math.sin(C*Math.PI/180)*20}px)`,width:"8px",height:"8px",borderRadius:"50%",background:In(C),border:"1px solid #fff"}}),f.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${C}deg)`,width:"2px",height:"20px",background:In(C),borderRadius:"1px"}}))),b!==0&&f.createElement("div",{style:{fontSize:"12px",color:In(C),fontWeight:"bold"}},lo(C)),b===0&&f.createElement("div",{style:{fontSize:"12px",color:"#666"}},"No Spin"),b!==0&&f.createElement("button",{onClick:()=>{_(0),S(0)},style:{fontSize:"10px",padding:"2px 6px",background:"#666",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"5px"}},"Reset"))),f.createElement("div",{className:Wt.shootButton},f.createElement("button",{className:Wt.shootButton,onClick:Cr,disabled:e.isAnimating||!Y},Y?e.gamePhase==="break"||D&&W||re?"SHOOT!":"CALL SHOT":"LOCK AIM FIRST")),f.createElement("div",{className:Wt.gameInfo},f.createElement("span",null,"Player: ",e.currentPlayer),f.createElement("span",null,"Phase: ",e.gamePhase),f.createElement("span",null,"Status: ",e.isAnimating?"Animating":e.ballInHand||e.gamePhase==="break"?s?"Drag Cue Ball to Position":e.gamePhase==="break"?"Click Cue Ball to Move (Kitchen Only)":"Click Cue Ball to Move (Anywhere)":Y?"Aim Locked - Ready to Shoot":U?"Pocket assistance active - Click to lock!":"Move Mouse to Aim"),Qn&&f.createElement("span",{style:{color:"#ff6b6b",fontWeight:"bold"}},"FOUL: ",Qn==="scratch"?"Scratch":Qn==="wrong_ball_first"?"Wrong Ball First":Qn==="no_rail_contact"?"No Rail Contact":Qn),f.createElement("span",null,"Consecutive Fouls P1: ",La[1]," | P2: ",La[2])),f.createElement("div",{className:Wt.buttonRow},f.createElement("button",{className:Wt.resetAimButton,onClick:()=>{setIsDragging(!1),I(!1),v(.5)},disabled:e.isAnimating},"Reset Aim"),f.createElement("button",{className:Wt.resetButton,onClick:()=>{n(Z=>({...Z,balls:wr(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1,currentPlayer:1})),I(!0),o(!1),q(null),$(!1),_(0),S(0),qe(!1),Ve(!1),Ee(!1),vt(null),Nn(!1),Ds(null),console.log("Resetting foul counters via reset button"),on({1:0,2:0}),Oa(null),en(!1),Xn(!1),Pa(null),xn(0),yr([]),lt(!1),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()}},"Reset Game"),f.createElement("button",{className:Wt.resetButton,onClick:()=>{n(Z=>({...Z,ballInHand:!0,currentPlayer:Z.currentPlayer===1?2:1}))},style:{marginLeft:"10px",backgroundColor:"#ff6b6b"}},"Test Ball-in-Hand"))),En&&f.createElement("div",{className:Wt.pushOutModal},f.createElement("div",{className:Wt.pushOutContent},f.createElement("h3",null,"Push Out Result"),f.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", do you want to accept this push out result?"),f.createElement("div",{className:Wt.pushOutButtons},f.createElement("button",{onClick:()=>{Nn(!1),n(Z=>({...Z,currentPlayer:Z.currentPlayer===1?2:1}))},className:Wt.acceptButton},"Accept"),f.createElement("button",{onClick:()=>{Nn(!1)},className:Wt.declineButton},"Decline")))),pa&&f.createElement("div",{className:Wt.pushOutModal},f.createElement("div",{className:Wt.pushOutContent},f.createElement("h3",null,"Illegally Pocketed Balls"),f.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", balls were illegally pocketed:"),f.createElement("ul",null,gr.map(Z=>f.createElement("li",{key:Z.id},"Ball ",Z.id," ",Z.id===10?"(will be spotted)":"(remains pocketed)"))),f.createElement("p",null,"Do you want to:"),f.createElement("div",{className:Wt.pushOutButtons},f.createElement("button",{onClick:()=>{lt(!1),n(N=>({...N,currentPlayer:N.currentPlayer===1?2:1})),gr.find(N=>N.id===10)&&n(N=>({...N,balls:N.balls.map(le=>le.id===10?{...le,pocketed:!1,visible:!0,x:UC,y:zC}:le)})),yr([])},className:Wt.acceptButton},"Accept Table"),f.createElement("button",{onClick:()=>{lt(!1),yr([])},className:Wt.declineButton},"Require Re-Shot")))))},C8="_tutorialRules_use5n_1",_8="_header_use5n_14",S8="_progressContainer_use5n_25",E8="_progressBar_use5n_31",x8="_progressFill_use5n_39",I8="_progressText_use5n_46",D8="_content_use5n_52",M8="_stepContent_use5n_56",A8="_highlightBox_use5n_73",T8="_highlightIcon_use5n_86",N8="_tipSection_use5n_90",R8="_navigation_use5n_110",k8="_navButton_use5n_119",L8="_disabled_use5n_135",O8="_centerButtons_use5n_145",P8="_skipButton_use5n_153",B8="_nextButton_use5n_171",U8="_startButton_use5n_171",z8="_quickRules_use5n_193",H8="_ruleGrid_use5n_205",Y8="_ruleItem_use5n_211",F8="_ruleNumber_use5n_231",Bt={tutorialRules:C8,header:_8,progressContainer:S8,progressBar:E8,progressFill:x8,progressText:I8,content:D8,stepContent:M8,highlightBox:A8,highlightIcon:T8,tipSection:N8,navigation:R8,navButton:k8,disabled:L8,centerButtons:O8,skipButton:P8,nextButton:B8,startButton:U8,quickRules:z8,ruleGrid:H8,ruleItem:Y8,ruleNumber:F8},j8=({step:t,currentStep:a,totalSteps:e,onNext:n,onBack:s,onSkip:o})=>{const l=(a+1)/e*100,u=["Remember: Always hit the lowest numbered ball first!","Call your shots clearly - specify ball and pocket.","The 10-ball is the money ball - pocket it legally to win!","Use the push out strategically to improve your position.","Three consecutive fouls result in loss of game.","Practice your break shot - it sets up the entire game.","Defensive play is just as important as offensive play.","Watch for safety opportunities when you can't make a shot."];return f.createElement("div",{className:Bt.tutorialRules},f.createElement("div",{className:Bt.header},f.createElement("h3",null,"10-Ball Rules Tutorial"),f.createElement("div",{className:Bt.progressContainer},f.createElement("div",{className:Bt.progressBar},f.createElement("div",{className:Bt.progressFill,style:{width:`${l}%`}})),f.createElement("span",{className:Bt.progressText},"Step ",a+1," of ",e))),f.createElement("div",{className:Bt.content},f.createElement("div",{className:Bt.stepContent},f.createElement("h4",null,t.title),f.createElement("p",null,t.content),t.highlight&&f.createElement("div",{className:Bt.highlightBox},f.createElement(L6,{className:Bt.highlightIcon}),f.createElement("span",null,"This concept will be highlighted on the table"))),f.createElement("div",{className:Bt.tipSection},f.createElement("h5",null," Pro Tip"),f.createElement("p",null,u[a%u.length]))),f.createElement("div",{className:Bt.navigation},f.createElement("button",{className:`${Bt.navButton} ${a===0?Bt.disabled:""}`,onClick:s,disabled:a===0},f.createElement(T6,null),"Previous"),f.createElement("div",{className:Bt.centerButtons},f.createElement("button",{className:Bt.skipButton,onClick:o},"Skip Tutorial"),a===e-1?f.createElement("button",{className:Bt.startButton,onClick:n},f.createElement(O6,null),"Start Playing"):f.createElement("button",{className:Bt.nextButton,onClick:n},"Next",f.createElement(N6,null)))),f.createElement("div",{className:Bt.quickRules},f.createElement("h5",null,"Quick Reference"),f.createElement("div",{className:Bt.ruleGrid},f.createElement("div",{className:Bt.ruleItem},f.createElement("span",{className:Bt.ruleNumber},"1"),f.createElement("span",null,"Hit lowest ball first")),f.createElement("div",{className:Bt.ruleItem},f.createElement("span",{className:Bt.ruleNumber},"2"),f.createElement("span",null,"Call your shots")),f.createElement("div",{className:Bt.ruleItem},f.createElement("span",{className:Bt.ruleNumber},"3"),f.createElement("span",null,"10-ball wins the game")),f.createElement("div",{className:Bt.ruleItem},f.createElement("span",{className:Bt.ruleNumber},"4"),f.createElement("span",null,"Push out after break")))))},W8="_gameModeSelector_s58nb_29",G8="_header_s58nb_67",Z8="_backToDashboardButton_s58nb_113",$8="_modesGrid_s58nb_277",q8="_modeCard_s58nb_291",Q8="_recommended_s58nb_333",V8="_recommendedBadge_s58nb_353",X8="_modeIcon_s58nb_379",K8="_modeContent_s58nb_403",J8="_modeArrow_s58nb_441",ez="_whatYoullLearn_s58nb_539",ur={gameModeSelector:W8,header:G8,backToDashboardButton:Z8,modesGrid:$8,modeCard:q8,recommended:Q8,recommendedBadge:V8,modeIcon:X8,modeContent:K8,modeArrow:J8,whatYoullLearn:ez},jC=({onModeSelect:t,fromLogin:a=!1})=>{const e=[{id:"tutorial",title:"Interactive Tutorial",description:"Learn the official CSI 10-Ball rules step by step with interactive examples and tips.",icon:k6,color:"#4CAF50",recommended:!0}];return f.createElement("div",{className:ur.gameModeSelector,style:{maxWidth:"280px",width:"280px",margin:"0 auto",overflowX:"hidden",boxSizing:"border-box"}},f.createElement("div",{className:ur.header},!a&&f.createElement("button",{className:ur.backToDashboardButton,onClick:()=>window.location.href="/dashboard"}," Back to Dashboard"),f.createElement("h2",null,"10-Ball Tutorial"),f.createElement("p",null,"Learn and master the official CSI 10-Ball rules")),f.createElement("div",{className:ur.modesGrid},e.map(n=>{const s=n.icon;return f.createElement("div",{key:n.id,className:`${ur.modeCard} ${n.recommended?ur.recommended:""}`,onClick:()=>t(n.id)},n.recommended&&f.createElement("div",{className:ur.recommendedBadge},"Recommended"),f.createElement("div",{className:ur.modeIcon,style:{backgroundColor:n.color}},f.createElement(s,null)),f.createElement("div",{className:ur.modeContent},f.createElement("h3",null,n.title),f.createElement("p",null,n.description)),f.createElement("div",{className:ur.modeArrow},""))})),f.createElement("div",{className:ur.whatYoullLearn},f.createElement("h3",null,"What You'll Learn"),f.createElement("ul",null,f.createElement("li",null,"Official CSI 10-Ball Rules"),f.createElement("li",null,"Break/Push Out Requirements"),f.createElement("li",null,"Call Shot/Ball in Hand Requirements"),f.createElement("li",null,"Illegally Pocketed Balls/Opponent's Option"),f.createElement("li",null,"Foul Detection and Penalties"),f.createElement("li",null,"Advanced Shot Planning"))))},tz="_tipContainer_1z0xf_1",nz="_show_1z0xf_27",az="_dragging_1z0xf_35",rz="_tipContent_1z0xf_47",sz="_tipHeader_1z0xf_71",iz="_tipIcon_1z0xf_89",oz="_tipTitle_1z0xf_99",lz="_closeButton_1z0xf_113",cz="_tipText_1z0xf_155",ms={tipContainer:tz,show:nz,dragging:az,tipContent:rz,tipHeader:sz,tipIcon:iz,tipTitle:oz,closeButton:lz,tipText:cz},uz=({tip:t,isVisible:a,onClose:e})=>{const[n,s]=w.useState(!1),[o,l]=w.useState({x:0,y:0}),[u,h]=w.useState(!1),[m,p]=w.useState({x:0,y:0}),v=w.useRef(null);w.useEffect(()=>{if(a){s(!0);const S=setTimeout(()=>{e()},8e3);return()=>clearTimeout(S)}},[a,e]);const b=S=>{if(S.target.closest("button"))return;h(!0);const E=v.current.getBoundingClientRect();p({x:S.clientX-E.left,y:S.clientY-E.top})},_=S=>{if(!u)return;const E=S.clientX-m.x,I=S.clientY-m.y,M=window.innerWidth-250,A=window.innerHeight-100;l({x:Math.max(0,Math.min(E,M)),y:Math.max(0,Math.min(I,A))})},C=()=>{h(!1)};return w.useEffect(()=>{if(u)return document.addEventListener("mousemove",_),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",C)}},[u,m]),a?f.createElement("div",{ref:v,className:`${ms.tipContainer} ${n?ms.show:""} ${u?ms.dragging:""}`,style:{maxWidth:"250px",width:"250px",minWidth:"250px",top:o.y||20,left:o.x||"50%",transform:o.x?"none":"translateX(-50%)",right:"auto",cursor:u?"grabbing":"grab"},onMouseDown:b},f.createElement("div",{className:ms.tipContent},f.createElement("div",{className:ms.tipHeader},f.createElement("span",{className:ms.tipIcon},""),f.createElement("span",{className:ms.tipTitle},"Pro Tip"),f.createElement("button",{className:ms.closeButton,onClick:e},"")),f.createElement("div",{className:ms.tipText},t))):null},dz=w.forwardRef(({gameState:t,onTipShown:a},e)=>{const[n,s]=w.useState(null),[o,l]=w.useState(!1),[u,h]=w.useState(new Set),m=C=>{b(C)},p=()=>{h(new Set)};w.useImperativeHandle(e,()=>({triggerTip:m,resetTips:p}));const v={breakShot:{title:"Break Shot",tip:"Always hit the lowest numbered ball first! A good break can set up your entire game!"},callShot:{title:"Call Shot",tip:"Be specific about which pocket you're aiming for! If you don't call it, it doesn't count!"},pushOut:{title:"Push Out Opportunity",tip:"Use push out to improve your position when the table is difficult!"},foul:{title:"Foul Committed",tip:"Three consecutive fouls by the same player results in loss of game!"},tenBall:{title:"10-Ball Target",tip:"The 10-ball is the only ball that matters for winning!"},defensive:{title:"Defensive Play",tip:"Sometimes the best shot is the one that leaves your opponent nothing!"},practice:{title:"Keep Learning",tip:"Practice makes perfect - keep playing and learning!"},scratch:{title:"Scratch Foul",tip:"The cue ball went in a pocket! Your opponent gets ball-in-hand."},wrongBall:{title:"Wrong Ball First",tip:"You must hit the lowest numbered ball first! This is a foul."},noRail:{title:"No Rail Contact",tip:"After contact, a ball must hit a rail or be pocketed. This is a foul."},ballInHand:{title:"Ball-in-Hand",tip:"You can place the cue ball anywhere on the table after a foul."},kitchen:{title:"Kitchen Rule",tip:"During break, the cue ball must start in the kitchen (behind the head string)."},threeFoul:{title:"Three Foul Rule",tip:"Three consecutive fouls by the same player results in loss of game!"},pushOutStrategy:{title:"Push Out Strategy",tip:"After a legal break, you can push out to improve position. Opponent then chooses to shoot or pass."},callPocket:{title:"Call Pocket",tip:"You must call both the ball and the pocket for every shot after the break."},lowestBall:{title:"Lowest Ball First",tip:"Always hit the lowest numbered ball on the table first!"},safety:{title:"Safety Shot",tip:"A safety shot is when you don't expect to pocket a ball but leave your opponent in a difficult position."},jumpShot:{title:"Jump Shot",tip:"Jump shots are legal in 10-ball, but be careful not to jump the cue ball off the table!"},gameWinning:{title:"Game Winner",tip:"Legally pocket the 10-ball to win! Remember to call it and the pocket."}},b=C=>{if(u.has(C))return;const S=v[C];S&&(s(S),l(!0),h(E=>new Set([...E,C])),a==null||a(C))},_=()=>{l(!1)};return w.useEffect(()=>{t&&(t.gamePhase==="break"&&!u.has("breakShot")&&(b("breakShot"),window.dispatchEvent(new CustomEvent("kitchenRule"))),t.gamePhase==="play"&&!u.has("callShot")&&b("callShot"))},[t,u]),w.useEffect(()=>{const C=ne=>{u.has("foul")||b("foul")},S=ne=>{u.has("scratch")||b("scratch")},E=ne=>{u.has("wrongBall")||b("wrongBall")},I=ne=>{u.has("noRail")||b("noRail")},M=ne=>{u.has("ballInHand")||b("ballInHand")},A=ne=>{u.has("kitchen")||b("kitchen")},k=ne=>{u.has("threeFoul")||b("threeFoul")},O=ne=>{u.has("pushOut")||b("pushOut")},U=ne=>{u.has("pushOutStrategy")||b("pushOutStrategy")},q=ne=>{u.has("callPocket")||b("callPocket")},Y=ne=>{u.has("lowestBall")||b("lowestBall")},$=ne=>{u.has("safety")||b("safety")},K=ne=>{u.has("jumpShot")||b("jumpShot")},pe=ne=>{u.has("tenBall")||b("tenBall")},ie=ne=>{u.has("gameWinning")||b("gameWinning")};return window.addEventListener("gameFoul",C),window.addEventListener("scratchFoul",S),window.addEventListener("wrongBallFoul",E),window.addEventListener("noRailFoul",I),window.addEventListener("ballInHand",M),window.addEventListener("kitchenRule",A),window.addEventListener("threeFoul",k),window.addEventListener("pushOutAvailable",O),window.addEventListener("pushOutStrategy",U),window.addEventListener("callPocket",q),window.addEventListener("lowestBall",Y),window.addEventListener("safetyOpportunity",$),window.addEventListener("jumpShot",K),window.addEventListener("tenBallTarget",pe),window.addEventListener("gameWinning",ie),()=>{window.removeEventListener("gameFoul",C),window.removeEventListener("scratchFoul",S),window.removeEventListener("wrongBallFoul",E),window.removeEventListener("noRailFoul",I),window.removeEventListener("ballInHand",M),window.removeEventListener("kitchenRule",A),window.removeEventListener("threeFoul",k),window.removeEventListener("pushOutAvailable",O),window.removeEventListener("pushOutStrategy",U),window.removeEventListener("callPocket",q),window.removeEventListener("lowestBall",Y),window.removeEventListener("safetyOpportunity",$),window.removeEventListener("jumpShot",K),window.removeEventListener("tenBallTarget",pe),window.removeEventListener("gameWinning",ie)}},[u]),f.createElement(uz,{tip:n==null?void 0:n.tip,isVisible:o,onClose:_})}),fz="_container_1jm20_1",hz="_backButton_1jm20_53",mz="_tutorialContainer_1jm20_79",ii={container:fz,backButton:hz,tutorialContainer:mz},zE=({fromLogin:t=!1,onBackToLogin:a})=>{const[e,n]=w.useState("menu"),[s,o]=w.useState(0),[l,u]=w.useState(!0),[h,m]=w.useState({player1Score:0,player2Score:0,currentPlayer:1,gamePhase:"break",rules:{callPocket:!0,pushOut:!0,threeFoulRule:!0,jumpShots:!0}}),p=[{title:"The Break Shot",content:"Start the game with a legal break shot. You must break from the kitchen hitting the 1-ball first and drive at least 4 balls to the rails or pocket a ball.",proTip:"A good break can set up your entire game!"},{title:"Welcome to 10-Ball!",content:"10-Ball is a call-shot game where you must hit the lowest numbered ball first and call your shots. The 10-ball is the game-winning ball!",proTip:"Always hit the lowest numbered ball first!"},{title:"Call Shot Rules",content:"After the break, you must call both the ball and the pocket for every shot. If you don't call it, it doesn't count!",proTip:"CSI rules state that you do not have to call obvious shots. Banks, Kicks, and Caroms should always be called. Be specific about which pocket you're aiming for! Make sure your opponent acknowledges your called shot."},{title:"Push Out Option",content:"After a legal break, the incoming player may choose to 'push out' - shoot the cue ball anywhere without hitting any ball. The opponent then chooses to shoot or pass.",proTip:"Use push out to improve your position when the table is difficult!"},{title:"Fouls and Penalties",content:"Common fouls include: scratching (cue ball in pocket), hitting wrong ball first, not hitting any rail after contact, and jumping the cue ball off the table.",proTip:"Three consecutive fouls by the same player results in loss of game!"},{title:"Winning the Game",content:"Legally pocket the 10-ball to win! Yes, you can win with an early ten ball...Remember, you must call the 10-ball and the pocket, and hit the lowest numbered ball first.",proTip:"The 10-ball is the only ball that matters for winning!"},{title:"Strategy Tips",content:"Plan your shots ahead, use defensive play when needed, and always consider your opponent's options after your shot.",proTip:"Sometimes the best shot is the one that leaves your opponent nothing!"},{title:"Ready to Play!",content:"You now know the basics of 10-Ball! Practice these rules and strategies to improve your game.",proTip:"Practice makes perfect - keep playing and learning!"}],v=E=>{n(E),E==="tutorial"&&(o(0),u(!0))},b=()=>{s<p.length-1?o(s+1):n("game")},_=()=>{s>0&&o(s-1)},C=E=>{m(I=>({...I,gamePhase:"end",player1Score:E===1?I.player1Score+1:I.player1Score,player2Score:E===2?I.player2Score+1:I.player2Score}))},S=()=>{switch(e){case"menu":return f.createElement(jC,{onModeSelect:v,fromLogin:t});case"tutorial":return f.createElement("div",{className:ii.tutorialContainer},f.createElement(j8,{step:p[s],currentStep:s,totalSteps:p.length,onNext:b,onBack:_,onSkip:()=>n("game")}),f.createElement(ry,{onGameEnd:C}));case"game":return f.createElement(ry,{onGameEnd:C});default:return f.createElement(jC,{onModeSelect:v})}};return f.createElement("div",{className:ii.container},S(),(e==="game"||e==="tutorial")&&f.createElement(dz,{gameState:h,onTipShown:E=>console.log(`Tip shown: ${E}`),ref:E=>{E&&(window.tipManager=E)}}),e!=="menu"&&!t&&f.createElement("div",{className:ii.navigation},f.createElement("button",{className:ii.backButton,onClick:()=>n("menu")}," Back to Menu")),e!=="menu"&&f.createElement("div",{className:ii.gameInfo},f.createElement("div",{className:ii.scoreBoard},f.createElement("div",{className:ii.playerScore},f.createElement("span",null,"Player 1: ",h.player1Score)),f.createElement("div",{className:ii.playerScore},f.createElement("span",null,"Player 2: ",h.player2Score)))))},pz="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",gz="BCAPL SIGNUP";function yz({onSuccess:t}){const[a,e]=w.useState(""),[n,s]=w.useState(""),[o,l]=w.useState(!1),[u,h]=w.useState(!1),[m,p]=w.useState(!1),v=async()=>{if(!a){s("Please enter your email or PIN.");return}s(""),l(!0);try{const S=(await Dh(pz,`${gz}!A1:L1000`)).slice(1).find(E=>(E[2]||"").trim().toLowerCase()===a.trim().toLowerCase()||(E[11]||"").trim()===a.trim());l(!1),S?(s(""),t(`${S[0]||""} ${S[1]||""}`.trim(),S[2]||"",S[11]||"")):s("No user found with that email or PIN. Please try again or contact frbcapl@gmail.com for help.")}catch(_){l(!1),s("Error verifying login. Please try again later."),console.error("Login verification error:",_)}},b=_=>{_.key==="Enter"&&v()};return u?f.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},f.createElement("button",{onClick:()=>h(!1),style:{position:"fixed",top:"0px",left:"0px",zIndex:1e3,backgroundColor:"#e53e3e",color:"white",border:"none",padding:"12px 20px",borderRadius:"0 0 8px 0",fontSize:"14px",cursor:"pointer",fontWeight:"bold"}}," Back to Login"),f.createElement(zE,{fromLogin:!0,onBackToLogin:()=>h(!1)})):f.createElement("div",{className:Va.pinLoginBg},f.createElement("div",{className:Va.pinLoginFrame},f.createElement("a",{href:"https://frusapl.com/frbcapl-singles#3a534cc1-c4ac-4c04-8d7a-a0fe9ddfaca4",target:"_blank",rel:"noopener noreferrer",className:Va.signupBtn,style:{marginBottom:"1.5rem"}},"Sign Up for Beta Test"),f.createElement("div",{className:Va.simulationContainer},f.createElement(k_,{aspectWidth:600,aspectHeight:300},f.createElement(df,null))),f.createElement("div",{className:Va.pinLoginCard},f.createElement("h3",{className:Va.pinLoginSubtitle},f.createElement("span",{className:Va.pinLoginLock,"aria-hidden":"true"},""),f.createElement("span",{className:Va.pinOutlineText}," Enter Email or PIN")),f.createElement("div",{style:{position:"relative",width:"100%"}},f.createElement("input",{type:m?"text":"password",value:a,onChange:_=>e(_.target.value),onKeyDown:b,placeholder:"Email or PIN",autoFocus:!0,className:Va.pinInput,"aria-label":"Email or PIN",disabled:o,style:{paddingRight:"50px"}}),f.createElement("button",{type:"button",onClick:()=>p(!m),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:"16px",color:"#666",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":m?"Hide password":"Show password"},m?"":"")),f.createElement("button",{onClick:v,disabled:o,className:Va.pinLoginBtn,type:"button"},o?"Verifying...":"Submit"),n&&f.createElement("p",{className:Va.pinLoginError,role:"alert"},n))))}const vz=""+new URL("bcapl_logo-BvvUeHn5.png",import.meta.url).href,bz=""+new URL("csi_logo-ChVaLM6t.png",import.meta.url).href,wz=""+new URL("usapl_logo-jJ_LE_Bw.png",import.meta.url).href,Cz=""+new URL("fargorate-logo-BVCRpqvV.png",import.meta.url).href;function _z(){const[t,a]=w.useState(window.innerWidth),[e,n]=w.useState(window.innerHeight),[s]=w.useState(()=>[0,1,2,3,4,5,6,7].map(()=>{const A=.1+Math.random()*.15,k=Math.random()*Math.PI*2;return{x:Math.random()*t,y:Math.random()*e,vx:Math.cos(k)*A*1.2,vy:Math.sin(k)*A*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3}}));w.useEffect(()=>{const A=()=>{a(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);function o(A,k,O){const[U,q]=w.useState(A);w.useRef(null);const Y=w.useRef(A);return w.useEffect(()=>{let $,K=Date.now();const pe=()=>{const ie=Date.now(),ne=ie-K,se=Y.current;if(ie-se.lastChange>se.changeInterval){const G=O.includes(k)?"fast":"base",Q={...se,speedCategory:G,lastChange:ie,changeInterval:3e3+Math.random()*6e3};Y.current=Q,q(Q)}if(Math.random()<.003){const P=Math.atan2(se.vy,se.vx),G=(Math.random()-.5)*Math.PI*.3,Q=P+G,re=.3+Math.random()*1,Ee=se.speedCategory==="fast"?.6:.2;se.vx=Math.cos(Q)*re*Ee,se.vy=Math.sin(Q)*re*Ee}let z=se.x+se.vx*(ne/16),D=se.y+se.vy*(ne/16);(z<0||z>t||D<0||D>e)&&(se.edgeShrink||(se.edgeShrink=!0,se.edgeShrinkTime=ie));const H=ie/1e3;let W=se.baseSize;const F=Math.sin(H*.07+se.sizePhase)*.1,R=Math.sin(H*.35+se.sizePhase*2)*.05;if(W=se.baseSize+F+R,W<se.baseSize*.3&&!se.sizeShrink&&(se.sizeShrink=!0,se.sizeShrinkTime=ie),se.edgeShrink){const P=ie-se.edgeShrinkTime;if(P<2e3){const Q=1-P/2e3;se.edgeOpacity=Q,W=se.baseSize+F+R}else if(P<4e3)se.edgeOpacity=.01,W=.01;else if(P<4100)z=Math.random()*t,D=Math.random()*e,se.x=z,se.y=D,W=.01,se.edgeOpacity=.01;else if(P<12500){const Q=.01+.99*((P-4100)/8400);W*=Q,se.edgeOpacity=Q}else se.edgeShrink=!1,se.edgeOpacity=1}else se.edgeOpacity=1;if(se.sizeShrink){const P=ie-se.sizeShrinkTime;if(P<2e3){const Q=1-P/2e3;se.sizeOpacity=Q}else if(P<4e3)se.sizeOpacity=.01,W=.01;else if(P<4100)z=Math.random()*t,D=Math.random()*e,se.x=z,se.y=D,W=.01,se.sizeOpacity=.01;else if(P<12500){const Q=.01+.99*((P-4100)/8400);W*=Q,se.sizeOpacity=Q}else se.sizeShrink=!1,se.sizeOpacity=1}else se.sizeOpacity=1;Y.current={...se,x:z,y:D,size:W},ie-K>100&&(q(Y.current),K=ie),$=requestAnimationFrame(pe)};return pe(),()=>cancelAnimationFrame($)},[t,e,O]),U}const[l]=w.useState(()=>{const A=[];for(;A.length<3;){const O=Math.floor(Math.random()*8);A.includes(O)||A.push(O)}const k=[];for(;k.length<3;){const O=Math.floor(Math.random()*8);!k.includes(O)&&!A.includes(O)&&k.push(O)}return s.forEach((O,U)=>{A.includes(U)?(O.speedCategory="fast",O.vx=(Math.random()-.5)*2,O.vy=(Math.random()-.5)*2):(O.speedCategory="base",O.vx=(Math.random()-.5)*.5,O.vy=(Math.random()-.5)*.5),k.includes(U)&&(O.isSizeChanger=!0)}),!0}),[u,h]=w.useState(()=>{const A=[];for(;A.length<3;){const k=Math.floor(Math.random()*8);A.includes(k)||A.push(k)}return A}),m=()=>{const A=[];for(;A.length<3;){const k=Math.floor(Math.random()*8);A.includes(k)||A.push(k)}h(A)};w.useEffect(()=>{const A=setInterval(()=>{m(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(A)},[]);const p=o(s[0],0,u),v=o(s[1],1,u),b=o(s[2],2,u),_=o(s[3],3,u),C=o(s[4],4,u),S=o(s[5],5,u),E=o(s[6],6,u),I=o(s[7],7,u),M=(A,k,O,U)=>({position:"absolute",left:A.x,top:A.y,transform:`translate(-50%, -50%) scale(${A.size})`,width:k,height:"auto",opacity:O*(A.edgeOpacity||1)*(A.sizeOpacity||1),zIndex:1,pointerEvents:"none",filter:U,transition:"none"});return f.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:1,pointerEvents:"none",overflow:"hidden"}},f.createElement("img",{src:Cy,alt:"League Logo Background",style:M(p,150,.75,"drop-shadow(0 0 24px rgba(245, 30, 30, 0.2))")}),f.createElement("img",{src:vz,alt:"BCAPL Logo Background",style:M(v,120,.75,"drop-shadow(0 0 18px rgba(245, 30, 30, 0.2))")}),f.createElement("img",{src:bz,alt:"CSI Logo Background",style:M(b,120,.75,"drop-shadow(0 0 12px rgba(245, 30, 30, 0.2))")}),f.createElement("img",{src:wz,alt:"USAPL Logo Background",style:M(_,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),f.createElement("img",{src:Cz,alt:"Fargorate Logo Background",style:M(C,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),f.createElement("img",{src:uf,alt:"8 Ball Background",style:M(S,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))")}),f.createElement("img",{src:N_,alt:"9 Ball Background",style:M(E,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))")}),f.createElement("img",{src:ih,alt:"10 Ball Background",style:M(I,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))")}))}function Sz(){return f.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1.5rem",position:"sticky",top:0,zIndex:2,background:"rgba(20,20,20,0.92)",backdropFilter:"blur(2px)",borderBottom:"1.5px solid #333"}},f.createElement("span",{className:"app-header-title"},"Front Range Pool League"))}function Ez({isAuthenticated:t,userFirstName:a,userLastName:e,userEmail:n,userPin:s,handleLoginSuccess:o,handleLogout:l}){const u=ao();return f.createElement("main",{className:"main-app-content"},t?f.createElement(PE,{playerName:a,playerLastName:e,senderEmail:n,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:l,userPin:s,onGoToAdmin:()=>u("/admin")}):f.createElement(yz,{onSuccess:o}))}function xz(){const[t,a]=w.useState(!1),[e,n]=w.useState(""),[s,o]=w.useState(""),[l,u]=w.useState(""),[h,m]=w.useState("");w.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&(n(localStorage.getItem("userFirstName")||""),o(localStorage.getItem("userLastName")||""),u(localStorage.getItem("userEmail")||""),m(localStorage.getItem("userPin")||""),a(!0))},[]);const p=(b,_,C)=>{let S="",E="";if(b){const I=b.trim().split(" ");S=I[0],E=I.slice(1).join(" ")}n(S),o(E),u(_),m(C),a(!0),localStorage.setItem("userFirstName",S),localStorage.setItem("userLastName",E),localStorage.setItem("userEmail",_),localStorage.setItem("userPin",C),localStorage.setItem("isAuthenticated","true")},v=()=>{n(""),o(""),u(""),m(""),a(!1),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("userEmail"),localStorage.removeItem("userPin"),localStorage.removeItem("isAuthenticated")};return f.createElement(pD,null,f.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},f.createElement(_z,null),f.createElement("div",{style:{position:"relative",zIndex:3,maxWidth:900,margin:"0 auto",width:"100%",background:"none",minHeight:"100vh"}},f.createElement(Sz,null),f.createElement(Ow,null,f.createElement(Tr,{path:"/admin",element:t&&h==="777777"?f.createElement("div",{className:"admin-app-content"},f.createElement(G6,null)):f.createElement(pd,{to:"/"})}),f.createElement(Tr,{path:"*",element:f.createElement("main",{className:"main-app-content"},f.createElement(Ow,null,f.createElement(Tr,{path:"/confirm-match",element:f.createElement(yT,null)}),f.createElement(Tr,{path:"/chat",element:t?f.createElement(W9,{userName:`${e} ${s}`,userEmail:l,userPin:h}):f.createElement(pd,{to:"/"})}),f.createElement(Tr,{path:"/simple-pool",element:f.createElement(ry,null)}),f.createElement(Tr,{path:"/tenball-tutorial",element:f.createElement(zE,null)}),f.createElement(Tr,{path:"/dashboard",element:t?f.createElement(PE,{playerName:e,playerLastName:s,senderEmail:l,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:v,userPin:h,onGoToAdmin:()=>{}}):f.createElement(pd,{to:"/"})}),f.createElement(Tr,{path:"/",element:f.createElement(Ez,{isAuthenticated:t,userFirstName:e,userLastName:s,userEmail:l,userPin:h,handleLoginSuccess:p,handleLogout:v})}),f.createElement(Tr,{path:"*",element:f.createElement(pd,{to:"/"})})))})))))}var HE=function(){if(typeof Map<"u")return Map;function t(a,e){var n=-1;return a.some(function(s,o){return s[0]===e?(n=o,!0):!1}),n}return function(){function a(){this.__entries__=[]}return Object.defineProperty(a.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),a.prototype.get=function(e){var n=t(this.__entries__,e),s=this.__entries__[n];return s&&s[1]},a.prototype.set=function(e,n){var s=t(this.__entries__,e);~s?this.__entries__[s][1]=n:this.__entries__.push([e,n])},a.prototype.delete=function(e){var n=this.__entries__,s=t(n,e);~s&&n.splice(s,1)},a.prototype.has=function(e){return!!~t(this.__entries__,e)},a.prototype.clear=function(){this.__entries__.splice(0)},a.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];e.call(n,l[1],l[0])}},a}()}(),sy=typeof window<"u"&&typeof document<"u"&&window.document===document,Jf=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Iz=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Jf):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Dz=2;function Mz(t,a){var e=!1,n=!1,s=0;function o(){e&&(e=!1,t()),n&&u()}function l(){Iz(o)}function u(){var h=Date.now();if(e){if(h-s<Dz)return;n=!0}else e=!0,n=!1,setTimeout(l,a);s=h}return u}var Az=20,Tz=["top","right","bottom","left","width","height","size","weight"],Nz=typeof MutationObserver<"u",Rz=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Mz(this.refresh.bind(this),Az)}return t.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},t.prototype.removeObserver=function(a){var e=this.observers_,n=e.indexOf(a);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},t.prototype.updateObservers_=function(){var a=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return a.forEach(function(e){return e.broadcastActive()}),a.length>0},t.prototype.connect_=function(){!sy||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Nz?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!sy||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(a){var e=a.propertyName,n=e===void 0?"":e,s=Tz.some(function(o){return!!~n.indexOf(o)});s&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),YE=function(t,a){for(var e=0,n=Object.keys(a);e<n.length;e++){var s=n[e];Object.defineProperty(t,s,{value:a[s],enumerable:!1,writable:!1,configurable:!0})}return t},hl=function(t){var a=t&&t.ownerDocument&&t.ownerDocument.defaultView;return a||Jf},FE=Mh(0,0,0,0);function eh(t){return parseFloat(t)||0}function WC(t){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];return a.reduce(function(n,s){var o=t["border-"+s+"-width"];return n+eh(o)},0)}function kz(t){for(var a=["top","right","bottom","left"],e={},n=0,s=a;n<s.length;n++){var o=s[n],l=t["padding-"+o];e[o]=eh(l)}return e}function Lz(t){var a=t.getBBox();return Mh(0,0,a.width,a.height)}function Oz(t){var a=t.clientWidth,e=t.clientHeight;if(!a&&!e)return FE;var n=hl(t).getComputedStyle(t),s=kz(n),o=s.left+s.right,l=s.top+s.bottom,u=eh(n.width),h=eh(n.height);if(n.boxSizing==="border-box"&&(Math.round(u+o)!==a&&(u-=WC(n,"left","right")+o),Math.round(h+l)!==e&&(h-=WC(n,"top","bottom")+l)),!Bz(t)){var m=Math.round(u+o)-a,p=Math.round(h+l)-e;Math.abs(m)!==1&&(u-=m),Math.abs(p)!==1&&(h-=p)}return Mh(s.left,s.top,u,h)}var Pz=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof hl(t).SVGGraphicsElement}:function(t){return t instanceof hl(t).SVGElement&&typeof t.getBBox=="function"}}();function Bz(t){return t===hl(t).document.documentElement}function Uz(t){return sy?Pz(t)?Lz(t):Oz(t):FE}function zz(t){var a=t.x,e=t.y,n=t.width,s=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return YE(l,{x:a,y:e,width:n,height:s,top:e,right:a+n,bottom:s+e,left:a}),l}function Mh(t,a,e,n){return{x:t,y:a,width:e,height:n}}var Hz=function(){function t(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Mh(0,0,0,0),this.target=a}return t.prototype.isActive=function(){var a=Uz(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},t}(),Yz=function(){function t(a,e){var n=zz(e);YE(this,{target:a,contentRect:n})}return t}(),Fz=function(){function t(a,e,n){if(this.activeObservations_=[],this.observations_=new HE,typeof a!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof hl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)||(e.set(a,new Hz(a)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof hl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)&&(e.delete(a),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&a.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new Yz(n.target,n.broadcastRect())});this.callback_.call(a,e,a),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),jE=typeof WeakMap<"u"?new WeakMap:new HE,WE=function(){function t(a){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Rz.getInstance(),n=new Fz(a,e,this);jE.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){WE.prototype[t]=function(){var a;return(a=jE.get(this))[t].apply(a,arguments)}});var jz=function(){return typeof Jf.ResizeObserver<"u"?Jf.ResizeObserver:WE}();window.ResizeObserver=window.ResizeObserver||jz;eI.createRoot(document.getElementById("root")).render(f.createElement(f.StrictMode,null,f.createElement(xz,null)));
