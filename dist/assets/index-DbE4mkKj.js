var $_=Object.defineProperty;var Z_=(t,a,e)=>a in t?$_(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var Re=(t,a,e)=>Z_(t,typeof a!="symbol"?a+"":a,e);function q_(t,a){for(var e=0;e<a.length;e++){const n=a[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function a0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sp={exports:{}},dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function Q_(){if(vw)return dt;vw=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function _(T,U,K){this.props=T,this.context=U,this.refs=C,this.updater=K||E}_.prototype.isReactComponent={},_.prototype.setState=function(T,U){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,U,"setState")},_.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function x(){}x.prototype=_.prototype;function D(T,U,K){this.props=T,this.context=U,this.refs=C,this.updater=K||E}var A=D.prototype=new x;A.constructor=D,S(A,_.prototype),A.isPureReactComponent=!0;var k=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function G(T,U,K,V,re,Ee){return K=Ee.ref,{$$typeof:t,type:T,key:U,ref:K!==void 0?K:null,props:Ee}}function F(T,U){return G(T.type,U,void 0,void 0,void 0,T.props)}function q(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function te(T){var U={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(K){return U[K]})}var X=/\/+/g;function se(T,U){return typeof T=="object"&&T!==null&&T.key!=null?te(""+T.key):U.toString(36)}function ee(){}function j(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ee,ee):(T.status="pending",T.then(function(U){T.status==="pending"&&(T.status="fulfilled",T.value=U)},function(U){T.status==="pending"&&(T.status="rejected",T.reason=U)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function H(T,U,K,V,re){var Ee=typeof T;(Ee==="undefined"||Ee==="boolean")&&(T=null);var Ce=!1;if(T===null)Ce=!0;else switch(Ee){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(T.$$typeof){case t:case a:Ce=!0;break;case p:return Ce=T._init,H(Ce(T._payload),U,K,V,re)}}if(Ce)return re=re(T),Ce=V===""?"."+se(T,0):V,k(re)?(K="",Ce!=null&&(K=Ce.replace(X,"$&/")+"/"),H(re,U,K,"",function(Ve){return Ve})):re!=null&&(q(re)&&(re=F(re,K+(re.key==null||T&&T.key===re.key?"":(""+re.key).replace(X,"$&/")+"/")+Ce)),U.push(re)),1;Ce=0;var Be=V===""?".":V+":";if(k(T))for(var be=0;be<T.length;be++)V=T[be],Ee=Be+se(V,be),Ce+=H(V,U,K,Ee,re);else if(be=b(T),typeof be=="function")for(T=be.call(T),be=0;!(V=T.next()).done;)V=V.value,Ee=Be+se(V,be++),Ce+=H(V,U,K,Ee,re);else if(Ee==="object"){if(typeof T.then=="function")return H(j(T),U,K,V,re);throw U=String(T),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function R(T,U,K){if(T==null)return T;var V=[],re=0;return H(T,V,"","",function(Ee){return U.call(K,Ee,re++)}),V}function B(T){if(T._status===-1){var U=T._result;U=U(),U.then(function(K){(T._status===0||T._status===-1)&&(T._status=1,T._result=K)},function(K){(T._status===0||T._status===-1)&&(T._status=2,T._result=K)}),T._status===-1&&(T._status=0,T._result=U)}if(T._status===1)return T._result.default;throw T._result}var Y=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function $(){}return dt.Children={map:R,forEach:function(T,U,K){R(T,function(){U.apply(this,arguments)},K)},count:function(T){var U=0;return R(T,function(){U++}),U},toArray:function(T){return R(T,function(U){return U})||[]},only:function(T){if(!q(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},dt.Component=_,dt.Fragment=e,dt.Profiler=r,dt.PureComponent=D,dt.StrictMode=n,dt.Suspense=h,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,dt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return P.H.useMemoCache(T)}},dt.cache=function(T){return function(){return T.apply(null,arguments)}},dt.cloneElement=function(T,U,K){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var V=S({},T.props),re=T.key,Ee=void 0;if(U!=null)for(Ce in U.ref!==void 0&&(Ee=void 0),U.key!==void 0&&(re=""+U.key),U)!L.call(U,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&U.ref===void 0||(V[Ce]=U[Ce]);var Ce=arguments.length-2;if(Ce===1)V.children=K;else if(1<Ce){for(var Be=Array(Ce),be=0;be<Ce;be++)Be[be]=arguments[be+2];V.children=Be}return G(T.type,re,void 0,void 0,Ee,V)},dt.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},dt.createElement=function(T,U,K){var V,re={},Ee=null;if(U!=null)for(V in U.key!==void 0&&(Ee=""+U.key),U)L.call(U,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(re[V]=U[V]);var Ce=arguments.length-2;if(Ce===1)re.children=K;else if(1<Ce){for(var Be=Array(Ce),be=0;be<Ce;be++)Be[be]=arguments[be+2];re.children=Be}if(T&&T.defaultProps)for(V in Ce=T.defaultProps,Ce)re[V]===void 0&&(re[V]=Ce[V]);return G(T,Ee,void 0,void 0,null,re)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(T){return{$$typeof:d,render:T}},dt.isValidElement=q,dt.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:B}},dt.memo=function(T,U){return{$$typeof:m,type:T,compare:U===void 0?null:U}},dt.startTransition=function(T){var U=P.T,K={};P.T=K;try{var V=T(),re=P.S;re!==null&&re(K,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then($,Y)}catch(Ee){Y(Ee)}finally{P.T=U}},dt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},dt.use=function(T){return P.H.use(T)},dt.useActionState=function(T,U,K){return P.H.useActionState(T,U,K)},dt.useCallback=function(T,U){return P.H.useCallback(T,U)},dt.useContext=function(T){return P.H.useContext(T)},dt.useDebugValue=function(){},dt.useDeferredValue=function(T,U){return P.H.useDeferredValue(T,U)},dt.useEffect=function(T,U,K){var V=P.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(T,U)},dt.useId=function(){return P.H.useId()},dt.useImperativeHandle=function(T,U,K){return P.H.useImperativeHandle(T,U,K)},dt.useInsertionEffect=function(T,U){return P.H.useInsertionEffect(T,U)},dt.useLayoutEffect=function(T,U){return P.H.useLayoutEffect(T,U)},dt.useMemo=function(T,U){return P.H.useMemo(T,U)},dt.useOptimistic=function(T,U){return P.H.useOptimistic(T,U)},dt.useReducer=function(T,U,K){return P.H.useReducer(T,U,K)},dt.useRef=function(T){return P.H.useRef(T)},dt.useState=function(T){return P.H.useState(T)},dt.useSyncExternalStore=function(T,U,K){return P.H.useSyncExternalStore(T,U,K)},dt.useTransition=function(){return P.H.useTransition()},dt.version="19.1.0",dt}var bw;function r0(){return bw||(bw=1,Sp.exports=Q_()),Sp.exports}var w=r0();const u=a0(w),Hx=q_({__proto__:null,default:u},[w]);var Ep={exports:{}},hc={},Cp={exports:{}},_p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function V_(){return ww||(ww=1,function(t){function a(R,B){var Y=R.length;R.push(B);e:for(;0<Y;){var $=Y-1>>>1,T=R[$];if(0<r(T,B))R[$]=B,R[Y]=T,Y=$;else break e}}function e(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var B=R[0],Y=R.pop();if(Y!==B){R[0]=Y;e:for(var $=0,T=R.length,U=T>>>1;$<U;){var K=2*($+1)-1,V=R[K],re=K+1,Ee=R[re];if(0>r(V,Y))re<T&&0>r(Ee,V)?(R[$]=Ee,R[re]=Y,$=re):(R[$]=V,R[K]=Y,$=K);else if(re<T&&0>r(Ee,Y))R[$]=Ee,R[re]=Y,$=re;else break e}}return B}function r(R,B){var Y=R.sortIndex-B.sortIndex;return Y!==0?Y:R.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],m=[],p=1,y=null,b=3,E=!1,S=!1,C=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var B=e(m);B!==null;){if(B.callback===null)n(m);else if(B.startTime<=R)n(m),B.sortIndex=B.expirationTime,a(h,B);else break;B=e(m)}}function P(R){if(C=!1,k(R),!S)if(e(h)!==null)S=!0,L||(L=!0,se());else{var B=e(m);B!==null&&H(P,B.startTime-R)}}var L=!1,G=-1,F=5,q=-1;function te(){return _?!0:!(t.unstable_now()-q<F)}function X(){if(_=!1,L){var R=t.unstable_now();q=R;var B=!0;try{e:{S=!1,C&&(C=!1,D(G),G=-1),E=!0;var Y=b;try{t:{for(k(R),y=e(h);y!==null&&!(y.expirationTime>R&&te());){var $=y.callback;if(typeof $=="function"){y.callback=null,b=y.priorityLevel;var T=$(y.expirationTime<=R);if(R=t.unstable_now(),typeof T=="function"){y.callback=T,k(R),B=!0;break t}y===e(h)&&n(h),k(R)}else n(h);y=e(h)}if(y!==null)B=!0;else{var U=e(m);U!==null&&H(P,U.startTime-R),B=!1}}break e}finally{y=null,b=Y,E=!1}B=void 0}}finally{B?se():L=!1}}}var se;if(typeof A=="function")se=function(){A(X)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,j=ee.port2;ee.port1.onmessage=X,se=function(){j.postMessage(null)}}else se=function(){x(X,0)};function H(R,B){G=x(function(){R(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var Y=b;b=B;try{return R()}finally{b=Y}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=b;b=R;try{return B()}finally{b=Y}},t.unstable_scheduleCallback=function(R,B,Y){var $=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?$+Y:$):Y=$,R){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=Y+T,R={id:p++,callback:B,priorityLevel:R,startTime:Y,expirationTime:T,sortIndex:-1},Y>$?(R.sortIndex=Y,a(m,R),e(h)===null&&R===e(m)&&(C?(D(G),G=-1):C=!0,H(P,Y-$))):(R.sortIndex=T,a(h,R),S||E||(S=!0,L||(L=!0,se()))),R},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(R){var B=b;return function(){var Y=b;b=B;try{return R.apply(this,arguments)}finally{b=Y}}}}(_p)),_p}var xw;function X_(){return xw||(xw=1,Cp.exports=V_()),Cp.exports}var Ip={exports:{}},ua={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function J_(){if(Sw)return ua;Sw=1;var t=r0();function a(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(a(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(h,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:m,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ua.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ua.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(a(299));return o(h,m,null,p)},ua.flushSync=function(h){var m=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=m,n.p=p,n.d.f()}},ua.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},ua.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},ua.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,y=d(p,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:E}):p==="script"&&n.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ua.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=d(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},ua.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=d(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ua.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=d(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},ua.requestFormReset=function(h){n.d.r(h)},ua.unstable_batchedUpdates=function(h,m){return h(m)},ua.useFormState=function(h,m,p){return l.H.useFormState(h,m,p)},ua.useFormStatus=function(){return l.H.useHostTransitionStatus()},ua.version="19.1.0",ua}var Ew;function Yx(){if(Ew)return Ip.exports;Ew=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ip.exports=J_(),Ip.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function K_(){if(Cw)return hc;Cw=1;var t=X_(),a=r0(),e=Yx();function n(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function l(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(o(s)!==s)throw Error(n(188))}function h(s){var i=s.alternate;if(!i){if(i=o(s),i===null)throw Error(n(188));return i!==s?null:s}for(var c=s,f=i;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return d(g),s;if(v===f)return d(g),i;v=v.sibling}throw Error(n(188))}if(c.return!==f.return)c=g,f=v;else{for(var I=!1,M=g.child;M;){if(M===c){I=!0,c=g,f=v;break}if(M===f){I=!0,f=g,c=v;break}M=M.sibling}if(!I){for(M=v.child;M;){if(M===c){I=!0,c=v,f=g;break}if(M===f){I=!0,f=v,c=g;break}M=M.sibling}if(!I)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:i}function m(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=m(s),i!==null)return i;s=s.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function se(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function j(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case _:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList";case q:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case E:return"Portal";case A:return(s.displayName||"Context")+".Provider";case D:return(s._context.displayName||"Context")+".Consumer";case k:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case G:return i=s.displayName||null,i!==null?i:j(s.type)||"Memo";case F:i=s._payload,s=s._init;try{return j(s(i))}catch{}}return null}var H=Array.isArray,R=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},$=[],T=-1;function U(s){return{current:s}}function K(s){0>T||(s.current=$[T],$[T]=null,T--)}function V(s,i){T++,$[T]=s.current,s.current=i}var re=U(null),Ee=U(null),Ce=U(null),Be=U(null);function be(s,i){switch(V(Ce,i),V(Ee,s),V(re,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?$b(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=$b(i),s=Zb(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(re),V(re,s)}function Ve(){K(re),K(Ee),K(Ce)}function rt(s){s.memoizedState!==null&&V(Be,s);var i=re.current,c=Zb(i,s.type);i!==c&&(V(Ee,s),V(re,c))}function St(s){Ee.current===s&&(K(re),K(Ee)),Be.current===s&&(K(Be),lc._currentValue=Y)}var xt=Object.prototype.hasOwnProperty,pn=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,Xe=t.unstable_shouldYield,Je=t.unstable_requestPaint,ot=t.unstable_now,Nt=t.unstable_getCurrentPriorityLevel,kn=t.unstable_ImmediatePriority,st=t.unstable_UserBlockingPriority,Ln=t.unstable_NormalPriority,Xt=t.unstable_LowPriority,Yt=t.unstable_IdlePriority,ra=t.log,Q=t.unstable_setDisableYieldValue,He=null,nt=null;function $e(s){if(typeof ra=="function"&&Q(s),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(He,s)}catch{}}var yt=Math.clz32?Math.clz32:ia,Et=Math.log,sa=Math.LN2;function ia(s){return s>>>=0,s===0?32:31-(Et(s)/sa|0)|0}var Pn=256,On=4194304;function jn(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Za(s,i,c){var f=s.pendingLanes;if(f===0)return 0;var g=0,v=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var M=f&134217727;return M!==0?(f=M&~v,f!==0?g=jn(f):(I&=M,I!==0?g=jn(I):c||(c=M&~s,c!==0&&(g=jn(c))))):(M=f&~v,M!==0?g=jn(M):I!==0?g=jn(I):c||(c=f&~s,c!==0&&(g=jn(c)))),g===0?0:i!==0&&i!==g&&(i&v)===0&&(v=g&-g,c=i&-i,v>=c||v===32&&(c&4194048)!==0)?i:g}function dn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Or(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function us(){var s=Pn;return Pn<<=1,(Pn&4194048)===0&&(Pn=256),s}function wt(){var s=On;return On<<=1,(On&62914560)===0&&(On=4194304),s}function wa(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function oa(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ys(s,i,c,f,g,v){var I=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var M=s.entanglements,z=s.expirationTimes,ae=s.hiddenUpdates;for(c=I&~c;0<c;){var he=31-yt(c),ye=1<<he;M[he]=0,z[he]=-1;var ie=ae[he];if(ie!==null)for(ae[he]=null,he=0;he<ie.length;he++){var oe=ie[he];oe!==null&&(oe.lane&=-536870913)}c&=~ye}f!==0&&Fn(s,f,0),v!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=v&~(I&~i))}function Fn(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var f=31-yt(i);s.entangledLanes|=i,s.entanglements[f]=s.entanglements[f]|1073741824|c&4194090}function Jt(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var f=31-yt(c),g=1<<f;g&i|s[f]&i&&(s[f]|=i),c&=~g}}function la(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Bn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ws(){var s=B.p;return s!==0?s:(s=window.event,s===void 0?32:fw(s.type))}function qa(s,i){var c=B.p;try{return B.p=s,i()}finally{B.p=c}}var pa=Math.random().toString(36).slice(2),xn="__reactFiber$"+pa,Tn="__reactProps$"+pa,Qa="__reactContainer$"+pa,ds="__reactEvents$"+pa,Gs="__reactListeners$"+pa,Br="__reactHandles$"+pa,Ur="__reactResources$"+pa,xr="__reactMarker$"+pa;function zr(s){delete s[xn],delete s[Tn],delete s[ds],delete s[Gs],delete s[Br]}function Ma(s){var i=s[xn];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Qa]||c[xn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=Xb(s);s!==null;){if(c=s[xn])return c;s=Xb(s)}return i}s=c,c=s.parentNode}return null}function Sr(s){if(s=s[xn]||s[Qa]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function Na(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(n(33))}function Va(s){var i=s[Ur];return i||(i=s[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function sn(s){s[xr]=!0}var $s=new Set,fs={};function Xa(s,i){jr(s,i),jr(s+"Capture",i)}function jr(s,i){for(fs[s]=i,s=0;s<i.length;s++)$s.add(i[s])}var go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zs={},yo={};function El(s){return xt.call(yo,s)?!0:xt.call(Zs,s)?!1:go.test(s)?yo[s]=!0:(Zs[s]=!0,!1)}function Er(s,i,c){if(El(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var f=i.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function hs(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function Ra(s,i,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+f)}}var vo,Cr;function Ja(s){if(vo===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);vo=i&&i[1]||"",Cr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vo+s+Cr}var _r=!1;function Ir(s,i){if(!s||_r)return"";_r=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(oe){var ie=oe}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(oe){ie=oe}s.call(ye.prototype)}}else{try{throw Error()}catch(oe){ie=oe}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(oe){if(oe&&ie&&typeof oe.stack=="string")return[oe.stack,ie.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),I=v[0],M=v[1];if(I&&M){var z=I.split(`
`),ae=M.split(`
`);for(g=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(f===z.length||g===ae.length)for(f=z.length-1,g=ae.length-1;1<=f&&0<=g&&z[f]!==ae[g];)g--;for(;1<=f&&0<=g;f--,g--)if(z[f]!==ae[g]){if(f!==1||g!==1)do if(f--,g--,0>g||z[f]!==ae[g]){var he=`
`+z[f].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=f&&0<=g);break}}}finally{_r=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ja(c):""}function Cl(s){switch(s.tag){case 26:case 27:case 5:return Ja(s.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return Ir(s.type,!1);case 11:return Ir(s.type.render,!1);case 1:return Ir(s.type,!0);case 31:return Ja("Activity");default:return""}}function qs(s){try{var i="";do i+=Cl(s),s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Hn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ka(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Z(s){var i=Ka(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),f=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(I){f=""+I,v.call(this,I)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(I){f=""+I},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function N(s){s._valueTracker||(s._valueTracker=Z(s))}function fe(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return s&&(f=Ka(s)?s.checked?"true":"false":s.value),s=f,s!==c?(i.setValue(s),!0):!1}function me(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xe=/[\n"\\]/g;function Ae(s){return s.replace(xe,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function De(s,i,c,f,g,v,I,M){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),i!=null?I==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Hn(i)):s.value!==""+Hn(i)&&(s.value=""+Hn(i)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),i!=null?at(s,I,Hn(i)):c!=null?at(s,I,Hn(c)):f!=null&&s.removeAttribute("value"),g==null&&v!=null&&(s.defaultChecked=!!v),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+Hn(M):s.removeAttribute("name")}function Ne(s,i,c,f,g,v,I,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),i!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||i!=null))return;c=c!=null?""+Hn(c):"",i=i!=null?""+Hn(i):c,M||i===s.value||(s.value=i),s.defaultValue=i}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=M?s.checked:!!f,s.defaultChecked=!!f,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I)}function at(s,i,c){i==="number"&&me(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function je(s,i,c,f){if(s=s.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=i.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&f&&(s[c].defaultSelected=!0)}else{for(c=""+Hn(c),i=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function it(s,i,c){if(i!=null&&(i=""+Hn(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+Hn(c):""}function Ue(s,i,c,f){if(i==null){if(f!=null){if(c!=null)throw Error(n(92));if(H(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),i=c}c=Hn(i),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f)}function ve(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var ue=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _e(s,i,c){var f=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":f?s.setProperty(i,c):typeof c!="number"||c===0||ue.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function Me(s,i,c){if(i!=null&&typeof i!="object")throw Error(n(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||i!=null&&i.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in i)f=i[g],i.hasOwnProperty(g)&&c[g]!==f&&_e(s,g,f)}else for(var v in i)i.hasOwnProperty(v)&&_e(s,v,i[v])}function Pe(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(s){return Rt.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fr=null;function _t(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Le=null,Wt=null;function an(s){var i=Sr(s);if(i&&(s=i.stateNode)){var c=s[Tn]||null;e:switch(s=i.stateNode,i.type){case"input":if(De(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ae(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==s&&f.form===s.form){var g=f[Tn]||null;if(!g)throw Error(n(90));De(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)f=c[i],f.form===s.form&&fe(f)}break e;case"textarea":it(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&je(s,!!c.multiple,i,!1)}}}var Sn=!1;function Sa(s,i,c){if(Sn)return s(i,c);Sn=!0;try{var f=s(i);return f}finally{if(Sn=!1,(Le!==null||Wt!==null)&&(qu(),Le&&(i=Le,s=Wt,Wt=Le=null,an(i),s)))for(i=0;i<s.length;i++)an(s[i])}}function Ot(s,i){var c=s.stateNode;if(c===null)return null;var f=c[Tn]||null;if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(Kt)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Yn=!1}var Vn=null,er=null,Xn=null;function tr(){if(Xn)return Xn;var s,i=er,c=i.length,f,g="value"in Vn?Vn.value:Vn.textContent,v=g.length;for(s=0;s<c&&i[s]===g[s];s++);var I=c-s;for(f=1;f<=I&&i[c-f]===g[v-f];f++);return Xn=g.slice(s,1<f?1-f:void 0)}function O(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function de(){return!0}function Ie(){return!1}function Ye(s){function i(c,f,g,v,I){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=I,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(c=s[M],this[M]=c?c(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?de:Ie,this.isPropagationStopped=Ie,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=de)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=de)},persist:function(){},isPersistent:de}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bt=Ye(Qe),Dt=p({},Qe,{view:0,detail:0}),ka=Ye(Dt),Fe,Jn,La,ms=p({},Dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==La&&(La&&s.type==="mousemove"?(Fe=s.screenX-La.screenX,Jn=s.screenY-La.screenY):Jn=Fe=0,La=s),Fe)},movementY:function(s){return"movementY"in s?s.movementY:Jn}}),mu=Ye(ms),ZE=p({},ms,{dataTransfer:0}),qE=Ye(ZE),QE=p({},Dt,{relatedTarget:0}),Th=Ye(QE),VE=p({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),XE=Ye(VE),JE=p({},Qe,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),KE=Ye(JE),eC=p({},Qe,{data:0}),K0=Ye(eC),tC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rC(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=aC[s])?!!i[s]:!1}function Mh(){return rC}var sC=p({},Dt,{key:function(s){if(s.key){var i=tC[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=O(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nC[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mh,charCode:function(s){return s.type==="keypress"?O(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?O(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),iC=Ye(sC),oC=p({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ey=Ye(oC),lC=p({},Dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mh}),cC=Ye(lC),uC=p({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),dC=Ye(uC),fC=p({},ms,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),hC=Ye(fC),mC=p({},Qe,{newState:0,oldState:0}),pC=Ye(mC),gC=[9,13,27,32],Nh=Kt&&"CompositionEvent"in window,_l=null;Kt&&"documentMode"in document&&(_l=document.documentMode);var yC=Kt&&"TextEvent"in window&&!_l,ty=Kt&&(!Nh||_l&&8<_l&&11>=_l),ny=" ",ay=!1;function ry(s,i){switch(s){case"keyup":return gC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var bo=!1;function vC(s,i){switch(s){case"compositionend":return sy(i);case"keypress":return i.which!==32?null:(ay=!0,ny);case"textInput":return s=i.data,s===ny&&ay?null:s;default:return null}}function bC(s,i){if(bo)return s==="compositionend"||!Nh&&ry(s,i)?(s=tr(),Xn=er=Vn=null,bo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ty&&i.locale!=="ko"?null:i.data;default:return null}}var wC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!wC[s.type]:i==="textarea"}function oy(s,i,c,f){Le?Wt?Wt.push(f):Wt=[f]:Le=f,i=ed(i,"onChange"),0<i.length&&(c=new Bt("onChange","change",null,c,f),s.push({event:c,listeners:i}))}var Il=null,Dl=null;function xC(s){Fb(s,0)}function pu(s){var i=Na(s);if(fe(i))return s}function ly(s,i){if(s==="change")return i}var cy=!1;if(Kt){var Rh;if(Kt){var kh="oninput"in document;if(!kh){var uy=document.createElement("div");uy.setAttribute("oninput","return;"),kh=typeof uy.oninput=="function"}Rh=kh}else Rh=!1;cy=Rh&&(!document.documentMode||9<document.documentMode)}function dy(){Il&&(Il.detachEvent("onpropertychange",fy),Dl=Il=null)}function fy(s){if(s.propertyName==="value"&&pu(Dl)){var i=[];oy(i,Dl,s,_t(s)),Sa(xC,i)}}function SC(s,i,c){s==="focusin"?(dy(),Il=i,Dl=c,Il.attachEvent("onpropertychange",fy)):s==="focusout"&&dy()}function EC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return pu(Dl)}function CC(s,i){if(s==="click")return pu(i)}function _C(s,i){if(s==="input"||s==="change")return pu(i)}function IC(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Pa=typeof Object.is=="function"?Object.is:IC;function Al(s,i){if(Pa(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!xt.call(i,g)||!Pa(s[g],i[g]))return!1}return!0}function hy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function my(s,i){var c=hy(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=i&&f>=i)return{node:c,offset:i-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=hy(c)}}function py(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?py(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function gy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=me(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=me(s.document)}return i}function Lh(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var DC=Kt&&"documentMode"in document&&11>=document.documentMode,wo=null,Ph=null,Tl=null,Oh=!1;function yy(s,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Oh||wo==null||wo!==me(f)||(f=wo,"selectionStart"in f&&Lh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Tl&&Al(Tl,f)||(Tl=f,f=ed(Ph,"onSelect"),0<f.length&&(i=new Bt("onSelect","select",null,i,c),s.push({event:i,listeners:f}),i.target=wo)))}function Ri(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var xo={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},Bh={},vy={};Kt&&(vy=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function ki(s){if(Bh[s])return Bh[s];if(!xo[s])return s;var i=xo[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in vy)return Bh[s]=i[c];return s}var by=ki("animationend"),wy=ki("animationiteration"),xy=ki("animationstart"),AC=ki("transitionrun"),TC=ki("transitionstart"),MC=ki("transitioncancel"),Sy=ki("transitionend"),Ey=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function Dr(s,i){Ey.set(s,i),Xa(i,[s])}var Cy=new WeakMap;function nr(s,i){if(typeof s=="object"&&s!==null){var c=Cy.get(s);return c!==void 0?c:(i={value:s,source:i,stack:qs(i)},Cy.set(s,i),i)}return{value:s,source:i,stack:qs(i)}}var ar=[],So=0,zh=0;function gu(){for(var s=So,i=zh=So=0;i<s;){var c=ar[i];ar[i++]=null;var f=ar[i];ar[i++]=null;var g=ar[i];ar[i++]=null;var v=ar[i];if(ar[i++]=null,f!==null&&g!==null){var I=f.pending;I===null?g.next=g:(g.next=I.next,I.next=g),f.pending=g}v!==0&&_y(c,g,v)}}function yu(s,i,c,f){ar[So++]=s,ar[So++]=i,ar[So++]=c,ar[So++]=f,zh|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function jh(s,i,c,f){return yu(s,i,c,f),vu(s)}function Eo(s,i){return yu(s,null,null,i),vu(s)}function _y(s,i,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var g=!1,v=s.return;v!==null;)v.childLanes|=c,f=v.alternate,f!==null&&(f.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(g=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,g&&i!==null&&(g=31-yt(c),s=v.hiddenUpdates,f=s[g],f===null?s[g]=[i]:f.push(i),i.lane=c|536870912),v):null}function vu(s){if(50<ec)throw ec=0,$m=null,Error(n(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Co={};function NC(s,i,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(s,i,c,f){return new NC(s,i,c,f)}function Fh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ps(s,i){var c=s.alternate;return c===null?(c=Oa(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Iy(s,i){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function bu(s,i,c,f,g,v){var I=0;if(f=s,typeof s=="function")Fh(s)&&(I=1);else if(typeof s=="string")I=k_(s,c,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case q:return s=Oa(31,c,i,g),s.elementType=q,s.lanes=v,s;case S:return Li(c.children,g,v,i);case C:I=8,g|=24;break;case _:return s=Oa(12,c,i,g|2),s.elementType=_,s.lanes=v,s;case P:return s=Oa(13,c,i,g),s.elementType=P,s.lanes=v,s;case L:return s=Oa(19,c,i,g),s.elementType=L,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case x:case A:I=10;break e;case D:I=9;break e;case k:I=11;break e;case G:I=14;break e;case F:I=16,f=null;break e}I=29,c=Error(n(130,s===null?"null":typeof s,"")),f=null}return i=Oa(I,c,i,g),i.elementType=s,i.type=f,i.lanes=v,i}function Li(s,i,c,f){return s=Oa(7,s,f,i),s.lanes=c,s}function Hh(s,i,c){return s=Oa(6,s,null,i),s.lanes=c,s}function Yh(s,i,c){return i=Oa(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var _o=[],Io=0,wu=null,xu=0,rr=[],sr=0,Pi=null,gs=1,ys="";function Oi(s,i){_o[Io++]=xu,_o[Io++]=wu,wu=s,xu=i}function Dy(s,i,c){rr[sr++]=gs,rr[sr++]=ys,rr[sr++]=Pi,Pi=s;var f=gs;s=ys;var g=32-yt(f)-1;f&=~(1<<g),c+=1;var v=32-yt(i)+g;if(30<v){var I=g-g%5;v=(f&(1<<I)-1).toString(32),f>>=I,g-=I,gs=1<<32-yt(i)+g|c<<g|f,ys=v+s}else gs=1<<v|c<<g|f,ys=s}function Wh(s){s.return!==null&&(Oi(s,1),Dy(s,1,0))}function Gh(s){for(;s===wu;)wu=_o[--Io],_o[Io]=null,xu=_o[--Io],_o[Io]=null;for(;s===Pi;)Pi=rr[--sr],rr[sr]=null,ys=rr[--sr],rr[sr]=null,gs=rr[--sr],rr[sr]=null}var ga=null,gn=null,kt=!1,Bi=null,Hr=!1,$h=Error(n(519));function Ui(s){var i=Error(n(418,""));throw Rl(nr(i,s)),$h}function Ay(s){var i=s.stateNode,c=s.type,f=s.memoizedProps;switch(i[xn]=s,i[Tn]=f,c){case"dialog":bt("cancel",i),bt("close",i);break;case"iframe":case"object":case"embed":bt("load",i);break;case"video":case"audio":for(c=0;c<nc.length;c++)bt(nc[c],i);break;case"source":bt("error",i);break;case"img":case"image":case"link":bt("error",i),bt("load",i);break;case"details":bt("toggle",i);break;case"input":bt("invalid",i),Ne(i,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),N(i);break;case"select":bt("invalid",i);break;case"textarea":bt("invalid",i),Ue(i,f.value,f.defaultValue,f.children),N(i)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||f.suppressHydrationWarning===!0||Gb(i.textContent,c)?(f.popover!=null&&(bt("beforetoggle",i),bt("toggle",i)),f.onScroll!=null&&bt("scroll",i),f.onScrollEnd!=null&&bt("scrollend",i),f.onClick!=null&&(i.onclick=td),i=!0):i=!1,i||Ui(s)}function Ty(s){for(ga=s.return;ga;)switch(ga.tag){case 5:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:ga=ga.return}}function Ml(s){if(s!==ga)return!1;if(!kt)return Ty(s),kt=!0,!1;var i=s.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||lp(s.type,s.memoizedProps)),c=!c),c&&gn&&Ui(s),Ty(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(i===0){gn=Tr(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;s=s.nextSibling}gn=null}}else i===27?(i=gn,ui(s.type)?(s=fp,fp=null,gn=s):gn=i):gn=ga?Tr(s.stateNode.nextSibling):null;return!0}function Nl(){gn=ga=null,kt=!1}function My(){var s=Bi;return s!==null&&(_a===null?_a=s:_a.push.apply(_a,s),Bi=null),s}function Rl(s){Bi===null?Bi=[s]:Bi.push(s)}var Zh=U(null),zi=null,vs=null;function Qs(s,i,c){V(Zh,i._currentValue),i._currentValue=c}function bs(s){s._currentValue=Zh.current,K(Zh)}function qh(s,i,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),s===c)break;s=s.return}}function Qh(s,i,c,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var v=g.dependencies;if(v!==null){var I=g.child;v=v.firstContext;e:for(;v!==null;){var M=v;v=g;for(var z=0;z<i.length;z++)if(M.context===i[z]){v.lanes|=c,M=v.alternate,M!==null&&(M.lanes|=c),qh(v.return,c,s),f||(I=null);break e}v=M.next}}else if(g.tag===18){if(I=g.return,I===null)throw Error(n(341));I.lanes|=c,v=I.alternate,v!==null&&(v.lanes|=c),qh(I,c,s),I=null}else I=g.child;if(I!==null)I.return=g;else for(I=g;I!==null;){if(I===s){I=null;break}if(g=I.sibling,g!==null){g.return=I.return,I=g;break}I=I.return}g=I}}function kl(s,i,c,f){s=null;for(var g=i,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var I=g.alternate;if(I===null)throw Error(n(387));if(I=I.memoizedProps,I!==null){var M=g.type;Pa(g.pendingProps.value,I.value)||(s!==null?s.push(M):s=[M])}}else if(g===Be.current){if(I=g.alternate,I===null)throw Error(n(387));I.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(lc):s=[lc])}g=g.return}s!==null&&Qh(i,s,c,f),i.flags|=262144}function Su(s){for(s=s.firstContext;s!==null;){if(!Pa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ji(s){zi=s,vs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ca(s){return Ny(zi,s)}function Eu(s,i){return zi===null&&ji(s),Ny(s,i)}function Ny(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},vs===null){if(s===null)throw Error(n(308));vs=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else vs=vs.next=i;return c}var RC=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},kC=t.unstable_scheduleCallback,LC=t.unstable_NormalPriority,Un={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vh(){return{controller:new RC,data:new Map,refCount:0}}function Ll(s){s.refCount--,s.refCount===0&&kC(LC,function(){s.controller.abort()})}var Pl=null,Xh=0,Do=0,Ao=null;function PC(s,i){if(Pl===null){var c=Pl=[];Xh=0,Do=Km(),Ao={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Xh++,i.then(Ry,Ry),i}function Ry(){if(--Xh===0&&Pl!==null){Ao!==null&&(Ao.status="fulfilled");var s=Pl;Pl=null,Do=0,Ao=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function OC(s,i){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){f.status="fulfilled",f.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var ky=R.S;R.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&PC(s,i),ky!==null&&ky(s,i)};var Fi=U(null);function Jh(){var s=Fi.current;return s!==null?s:en.pooledCache}function Cu(s,i){i===null?V(Fi,Fi.current):V(Fi,i.pool)}function Ly(){var s=Jh();return s===null?null:{parent:Un._currentValue,pool:s}}var Ol=Error(n(460)),Py=Error(n(474)),_u=Error(n(542)),Kh={then:function(){}};function Oy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Iu(){}function By(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(Iu,Iu),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,zy(s),s;default:if(typeof i.status=="string")i.then(Iu,Iu);else{if(s=en,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=i,s.status="pending",s.then(function(f){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=f}},function(f){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=f}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,zy(s),s}throw Bl=i,Ol}}var Bl=null;function Uy(){if(Bl===null)throw Error(n(459));var s=Bl;return Bl=null,s}function zy(s){if(s===Ol||s===_u)throw Error(n(483))}var Vs=!1;function em(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Js(s,i,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ut&2)!==0){var g=f.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),f.pending=i,i=vu(s),_y(s,null,c),i}return yu(s,f,i,c),vu(s)}function Ul(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var f=i.lanes;f&=s.pendingLanes,c|=f,i.lanes=c,Jt(s,c)}}function nm(s,i){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?g=v=I:v=v.next=I,c=c.next}while(c!==null);v===null?g=v=i:v=v.next=i}else g=v=i;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var am=!1;function zl(){if(am){var s=Ao;if(s!==null)throw s}}function jl(s,i,c,f){am=!1;var g=s.updateQueue;Vs=!1;var v=g.firstBaseUpdate,I=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var z=M,ae=z.next;z.next=null,I===null?v=ae:I.next=ae,I=z;var he=s.alternate;he!==null&&(he=he.updateQueue,M=he.lastBaseUpdate,M!==I&&(M===null?he.firstBaseUpdate=ae:M.next=ae,he.lastBaseUpdate=z))}if(v!==null){var ye=g.baseState;I=0,he=ae=z=null,M=v;do{var ie=M.lane&-536870913,oe=ie!==M.lane;if(oe?(It&ie)===ie:(f&ie)===ie){ie!==0&&ie===Do&&(am=!0),he!==null&&(he=he.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ke=s,We=M;ie=i;var Zt=c;switch(We.tag){case 1:if(Ke=We.payload,typeof Ke=="function"){ye=Ke.call(Zt,ye,ie);break e}ye=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=We.payload,ie=typeof Ke=="function"?Ke.call(Zt,ye,ie):Ke,ie==null)break e;ye=p({},ye,ie);break e;case 2:Vs=!0}}ie=M.callback,ie!==null&&(s.flags|=64,oe&&(s.flags|=8192),oe=g.callbacks,oe===null?g.callbacks=[ie]:oe.push(ie))}else oe={lane:ie,tag:M.tag,payload:M.payload,callback:M.callback,next:null},he===null?(ae=he=oe,z=ye):he=he.next=oe,I|=ie;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;oe=M,M=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);he===null&&(z=ye),g.baseState=z,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,v===null&&(g.shared.lanes=0),ii|=I,s.lanes=I,s.memoizedState=ye}}function jy(s,i){if(typeof s!="function")throw Error(n(191,s));s.call(i)}function Fy(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)jy(c[s],i)}var To=U(null),Du=U(0);function Hy(s,i){s=Is,V(Du,s),V(To,i),Is=s|i.baseLanes}function rm(){V(Du,Is),V(To,To.current)}function sm(){Is=Du.current,K(To),K(Du)}var Ks=0,mt=null,Gt=null,Mn=null,Au=!1,Mo=!1,Hi=!1,Tu=0,Fl=0,No=null,BC=0;function En(){throw Error(n(321))}function im(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Pa(s[c],i[c]))return!1;return!0}function om(s,i,c,f,g,v){return Ks=v,mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,R.H=s===null||s.memoizedState===null?_v:Iv,Hi=!1,v=c(f,g),Hi=!1,Mo&&(v=Wy(i,c,f,g)),Yy(s),v}function Yy(s){R.H=Pu;var i=Gt!==null&&Gt.next!==null;if(Ks=0,Mn=Gt=mt=null,Au=!1,Fl=0,No=null,i)throw Error(n(300));s===null||Gn||(s=s.dependencies,s!==null&&Su(s)&&(Gn=!0))}function Wy(s,i,c,f){mt=s;var g=0;do{if(Mo&&(No=null),Fl=0,Mo=!1,25<=g)throw Error(n(301));if(g+=1,Mn=Gt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}R.H=WC,v=i(c,f)}while(Mo);return v}function UC(){var s=R.H,i=s.useState()[0];return i=typeof i.then=="function"?Hl(i):i,s=s.useState()[0],(Gt!==null?Gt.memoizedState:null)!==s&&(mt.flags|=1024),i}function lm(){var s=Tu!==0;return Tu=0,s}function cm(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function um(s){if(Au){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Au=!1}Ks=0,Mn=Gt=mt=null,Mo=!1,Fl=Tu=0,No=null}function Ea(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?mt.memoizedState=Mn=s:Mn=Mn.next=s,Mn}function Nn(){if(Gt===null){var s=mt.alternate;s=s!==null?s.memoizedState:null}else s=Gt.next;var i=Mn===null?mt.memoizedState:Mn.next;if(i!==null)Mn=i,Gt=s;else{if(s===null)throw mt.alternate===null?Error(n(467)):Error(n(310));Gt=s,s={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Mn===null?mt.memoizedState=Mn=s:Mn=Mn.next=s}return Mn}function dm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(s){var i=Fl;return Fl+=1,No===null&&(No=[]),s=By(No,s,i),i=mt,(Mn===null?i.memoizedState:Mn.next)===null&&(i=i.alternate,R.H=i===null||i.memoizedState===null?_v:Iv),s}function Mu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Hl(s);if(s.$$typeof===A)return ca(s)}throw Error(n(438,String(s)))}function fm(s){var i=null,c=mt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var f=mt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(i={data:f.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=dm(),mt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),f=0;f<s;f++)c[f]=te;return i.index++,c}function ws(s,i){return typeof i=="function"?i(s):i}function Nu(s){var i=Nn();return hm(i,Gt,s)}function hm(s,i,c){var f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var g=s.baseQueue,v=f.pending;if(v!==null){if(g!==null){var I=g.next;g.next=v.next,v.next=I}i.baseQueue=g=v,f.pending=null}if(v=s.baseState,g===null)s.memoizedState=v;else{i=g.next;var M=I=null,z=null,ae=i,he=!1;do{var ye=ae.lane&-536870913;if(ye!==ae.lane?(It&ye)===ye:(Ks&ye)===ye){var ie=ae.revertLane;if(ie===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ye===Do&&(he=!0);else if((Ks&ie)===ie){ae=ae.next,ie===Do&&(he=!0);continue}else ye={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(M=z=ye,I=v):z=z.next=ye,mt.lanes|=ie,ii|=ie;ye=ae.action,Hi&&c(v,ye),v=ae.hasEagerState?ae.eagerState:c(v,ye)}else ie={lane:ye,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(M=z=ie,I=v):z=z.next=ie,mt.lanes|=ye,ii|=ye;ae=ae.next}while(ae!==null&&ae!==i);if(z===null?I=v:z.next=M,!Pa(v,s.memoizedState)&&(Gn=!0,he&&(c=Ao,c!==null)))throw c;s.memoizedState=v,s.baseState=I,s.baseQueue=z,f.lastRenderedState=v}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function mm(s){var i=Nn(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=c.dispatch,g=c.pending,v=i.memoizedState;if(g!==null){c.pending=null;var I=g=g.next;do v=s(v,I.action),I=I.next;while(I!==g);Pa(v,i.memoizedState)||(Gn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),c.lastRenderedState=v}return[v,f]}function Gy(s,i,c){var f=mt,g=Nn(),v=kt;if(v){if(c===void 0)throw Error(n(407));c=c()}else c=i();var I=!Pa((Gt||g).memoizedState,c);I&&(g.memoizedState=c,Gn=!0),g=g.queue;var M=qy.bind(null,f,g,s);if(Yl(2048,8,M,[s]),g.getSnapshot!==i||I||Mn!==null&&Mn.memoizedState.tag&1){if(f.flags|=2048,Ro(9,Ru(),Zy.bind(null,f,g,c,i),null),en===null)throw Error(n(349));v||(Ks&124)!==0||$y(f,i,c)}return c}function $y(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=mt.updateQueue,i===null?(i=dm(),mt.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function Zy(s,i,c,f){i.value=c,i.getSnapshot=f,Qy(i)&&Vy(s)}function qy(s,i,c){return c(function(){Qy(i)&&Vy(s)})}function Qy(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Pa(s,c)}catch{return!0}}function Vy(s){var i=Eo(s,2);i!==null&&Fa(i,s,2)}function pm(s){var i=Ea();if(typeof s=="function"){var c=s;if(s=c(),Hi){$e(!0);try{c()}finally{$e(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:s},i}function Xy(s,i,c,f){return s.baseState=c,hm(s,Gt,typeof f=="function"?f:ws)}function zC(s,i,c,f,g){if(Lu(s))throw Error(n(485));if(s=i.action,s!==null){var v={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){v.listeners.push(I)}};R.T!==null?c(!0):v.isTransition=!1,f(v),c=i.pending,c===null?(v.next=i.pending=v,Jy(i,v)):(v.next=c.next,i.pending=c.next=v)}}function Jy(s,i){var c=i.action,f=i.payload,g=s.state;if(i.isTransition){var v=R.T,I={};R.T=I;try{var M=c(g,f),z=R.S;z!==null&&z(I,M),Ky(s,i,M)}catch(ae){gm(s,i,ae)}finally{R.T=v}}else try{v=c(g,f),Ky(s,i,v)}catch(ae){gm(s,i,ae)}}function Ky(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){ev(s,i,f)},function(f){return gm(s,i,f)}):ev(s,i,c)}function ev(s,i,c){i.status="fulfilled",i.value=c,tv(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,Jy(s,c)))}function gm(s,i,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do i.status="rejected",i.reason=c,tv(i),i=i.next;while(i!==f)}s.action=null}function tv(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function nv(s,i){return i}function av(s,i){if(kt){var c=en.formState;if(c!==null){e:{var f=mt;if(kt){if(gn){t:{for(var g=gn,v=Hr;g.nodeType!==8;){if(!v){g=null;break t}if(g=Tr(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){gn=Tr(g.nextSibling),f=g.data==="F!";break e}}Ui(f)}f=!1}f&&(i=c[0])}}return c=Ea(),c.memoizedState=c.baseState=i,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:i},c.queue=f,c=Sv.bind(null,mt,f),f.dispatch=c,f=pm(!1),v=xm.bind(null,mt,!1,f.queue),f=Ea(),g={state:i,dispatch:null,action:s,pending:null},f.queue=g,c=zC.bind(null,mt,g,v,c),g.dispatch=c,f.memoizedState=s,[i,c,!1]}function rv(s){var i=Nn();return sv(i,Gt,s)}function sv(s,i,c){if(i=hm(s,i,nv)[0],s=Nu(ws)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var f=Hl(i)}catch(I){throw I===Ol?_u:I}else f=i;i=Nn();var g=i.queue,v=g.dispatch;return c!==i.memoizedState&&(mt.flags|=2048,Ro(9,Ru(),jC.bind(null,g,c),null)),[f,v,s]}function jC(s,i){s.action=i}function iv(s){var i=Nn(),c=Gt;if(c!==null)return sv(i,c,s);Nn(),i=i.memoizedState,c=Nn();var f=c.queue.dispatch;return c.memoizedState=s,[i,f,!1]}function Ro(s,i,c,f){return s={tag:s,create:c,deps:f,inst:i,next:null},i=mt.updateQueue,i===null&&(i=dm(),mt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,i.lastEffect=s),s}function Ru(){return{destroy:void 0,resource:void 0}}function ov(){return Nn().memoizedState}function ku(s,i,c,f){var g=Ea();f=f===void 0?null:f,mt.flags|=s,g.memoizedState=Ro(1|i,Ru(),c,f)}function Yl(s,i,c,f){var g=Nn();f=f===void 0?null:f;var v=g.memoizedState.inst;Gt!==null&&f!==null&&im(f,Gt.memoizedState.deps)?g.memoizedState=Ro(i,v,c,f):(mt.flags|=s,g.memoizedState=Ro(1|i,v,c,f))}function lv(s,i){ku(8390656,8,s,i)}function cv(s,i){Yl(2048,8,s,i)}function uv(s,i){return Yl(4,2,s,i)}function dv(s,i){return Yl(4,4,s,i)}function fv(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function hv(s,i,c){c=c!=null?c.concat([s]):null,Yl(4,4,fv.bind(null,i,s),c)}function ym(){}function mv(s,i){var c=Nn();i=i===void 0?null:i;var f=c.memoizedState;return i!==null&&im(i,f[1])?f[0]:(c.memoizedState=[s,i],s)}function pv(s,i){var c=Nn();i=i===void 0?null:i;var f=c.memoizedState;if(i!==null&&im(i,f[1]))return f[0];if(f=s(),Hi){$e(!0);try{s()}finally{$e(!1)}}return c.memoizedState=[f,i],f}function vm(s,i,c){return c===void 0||(Ks&1073741824)!==0?s.memoizedState=i:(s.memoizedState=c,s=vb(),mt.lanes|=s,ii|=s,c)}function gv(s,i,c,f){return Pa(c,i)?c:To.current!==null?(s=vm(s,c,f),Pa(s,i)||(Gn=!0),s):(Ks&42)===0?(Gn=!0,s.memoizedState=c):(s=vb(),mt.lanes|=s,ii|=s,i)}function yv(s,i,c,f,g){var v=B.p;B.p=v!==0&&8>v?v:8;var I=R.T,M={};R.T=M,xm(s,!1,i,c);try{var z=g(),ae=R.S;if(ae!==null&&ae(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var he=OC(z,f);Wl(s,i,he,ja(s))}else Wl(s,i,f,ja(s))}catch(ye){Wl(s,i,{then:function(){},status:"rejected",reason:ye},ja())}finally{B.p=v,R.T=I}}function FC(){}function bm(s,i,c,f){if(s.tag!==5)throw Error(n(476));var g=vv(s).queue;yv(s,g,i,Y,c===null?FC:function(){return bv(s),c(f)})}function vv(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:Y},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function bv(s){var i=vv(s).next.queue;Wl(s,i,{},ja())}function wm(){return ca(lc)}function wv(){return Nn().memoizedState}function xv(){return Nn().memoizedState}function HC(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=ja();s=Xs(c);var f=Js(i,s,c);f!==null&&(Fa(f,i,c),Ul(f,i,c)),i={cache:Vh()},s.payload=i;return}i=i.return}}function YC(s,i,c){var f=ja();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Lu(s)?Ev(i,c):(c=jh(s,i,c,f),c!==null&&(Fa(c,s,f),Cv(c,i,f)))}function Sv(s,i,c){var f=ja();Wl(s,i,c,f)}function Wl(s,i,c,f){var g={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Lu(s))Ev(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var I=i.lastRenderedState,M=v(I,c);if(g.hasEagerState=!0,g.eagerState=M,Pa(M,I))return yu(s,i,g,0),en===null&&gu(),!1}catch{}finally{}if(c=jh(s,i,g,f),c!==null)return Fa(c,s,f),Cv(c,i,f),!0}return!1}function xm(s,i,c,f){if(f={lane:2,revertLane:Km(),action:f,hasEagerState:!1,eagerState:null,next:null},Lu(s)){if(i)throw Error(n(479))}else i=jh(s,c,f,2),i!==null&&Fa(i,s,2)}function Lu(s){var i=s.alternate;return s===mt||i!==null&&i===mt}function Ev(s,i){Mo=Au=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function Cv(s,i,c){if((c&4194048)!==0){var f=i.lanes;f&=s.pendingLanes,c|=f,i.lanes=c,Jt(s,c)}}var Pu={readContext:ca,use:Mu,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},_v={readContext:ca,use:Mu,useCallback:function(s,i){return Ea().memoizedState=[s,i===void 0?null:i],s},useContext:ca,useEffect:lv,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,ku(4194308,4,fv.bind(null,i,s),c)},useLayoutEffect:function(s,i){return ku(4194308,4,s,i)},useInsertionEffect:function(s,i){ku(4,2,s,i)},useMemo:function(s,i){var c=Ea();i=i===void 0?null:i;var f=s();if(Hi){$e(!0);try{s()}finally{$e(!1)}}return c.memoizedState=[f,i],f},useReducer:function(s,i,c){var f=Ea();if(c!==void 0){var g=c(i);if(Hi){$e(!0);try{c(i)}finally{$e(!1)}}}else g=i;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=YC.bind(null,mt,s),[f.memoizedState,s]},useRef:function(s){var i=Ea();return s={current:s},i.memoizedState=s},useState:function(s){s=pm(s);var i=s.queue,c=Sv.bind(null,mt,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:ym,useDeferredValue:function(s,i){var c=Ea();return vm(c,s,i)},useTransition:function(){var s=pm(!1);return s=yv.bind(null,mt,s.queue,!0,!1),Ea().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var f=mt,g=Ea();if(kt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),en===null)throw Error(n(349));(It&124)!==0||$y(f,i,c)}g.memoizedState=c;var v={value:c,getSnapshot:i};return g.queue=v,lv(qy.bind(null,f,v,s),[s]),f.flags|=2048,Ro(9,Ru(),Zy.bind(null,f,v,c,i),null),c},useId:function(){var s=Ea(),i=en.identifierPrefix;if(kt){var c=ys,f=gs;c=(f&~(1<<32-yt(f)-1)).toString(32)+c,i=""+i+"R"+c,c=Tu++,0<c&&(i+="H"+c.toString(32)),i+=""}else c=BC++,i=""+i+"r"+c.toString(32)+"";return s.memoizedState=i},useHostTransitionStatus:wm,useFormState:av,useActionState:av,useOptimistic:function(s){var i=Ea();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=xm.bind(null,mt,!0,c),c.dispatch=i,[s,i]},useMemoCache:fm,useCacheRefresh:function(){return Ea().memoizedState=HC.bind(null,mt)}},Iv={readContext:ca,use:Mu,useCallback:mv,useContext:ca,useEffect:cv,useImperativeHandle:hv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:pv,useReducer:Nu,useRef:ov,useState:function(){return Nu(ws)},useDebugValue:ym,useDeferredValue:function(s,i){var c=Nn();return gv(c,Gt.memoizedState,s,i)},useTransition:function(){var s=Nu(ws)[0],i=Nn().memoizedState;return[typeof s=="boolean"?s:Hl(s),i]},useSyncExternalStore:Gy,useId:wv,useHostTransitionStatus:wm,useFormState:rv,useActionState:rv,useOptimistic:function(s,i){var c=Nn();return Xy(c,Gt,s,i)},useMemoCache:fm,useCacheRefresh:xv},WC={readContext:ca,use:Mu,useCallback:mv,useContext:ca,useEffect:cv,useImperativeHandle:hv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:pv,useReducer:mm,useRef:ov,useState:function(){return mm(ws)},useDebugValue:ym,useDeferredValue:function(s,i){var c=Nn();return Gt===null?vm(c,s,i):gv(c,Gt.memoizedState,s,i)},useTransition:function(){var s=mm(ws)[0],i=Nn().memoizedState;return[typeof s=="boolean"?s:Hl(s),i]},useSyncExternalStore:Gy,useId:wv,useHostTransitionStatus:wm,useFormState:iv,useActionState:iv,useOptimistic:function(s,i){var c=Nn();return Gt!==null?Xy(c,Gt,s,i):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:fm,useCacheRefresh:xv},ko=null,Gl=0;function Ou(s){var i=Gl;return Gl+=1,ko===null&&(ko=[]),By(ko,s,i)}function $l(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Bu(s,i){throw i.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(i),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Dv(s){var i=s._init;return i(s._payload)}function Av(s){function i(J,W){if(s){var ne=J.deletions;ne===null?(J.deletions=[W],J.flags|=16):ne.push(W)}}function c(J,W){if(!s)return null;for(;W!==null;)i(J,W),W=W.sibling;return null}function f(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function g(J,W){return J=ps(J,W),J.index=0,J.sibling=null,J}function v(J,W,ne){return J.index=ne,s?(ne=J.alternate,ne!==null?(ne=ne.index,ne<W?(J.flags|=67108866,W):ne):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function I(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,W,ne,pe){return W===null||W.tag!==6?(W=Hh(ne,J.mode,pe),W.return=J,W):(W=g(W,ne),W.return=J,W)}function z(J,W,ne,pe){var ke=ne.type;return ke===S?he(J,W,ne.props.children,pe,ne.key):W!==null&&(W.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===F&&Dv(ke)===W.type)?(W=g(W,ne.props),$l(W,ne),W.return=J,W):(W=bu(ne.type,ne.key,ne.props,null,J.mode,pe),$l(W,ne),W.return=J,W)}function ae(J,W,ne,pe){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=Yh(ne,J.mode,pe),W.return=J,W):(W=g(W,ne.children||[]),W.return=J,W)}function he(J,W,ne,pe,ke){return W===null||W.tag!==7?(W=Li(ne,J.mode,pe,ke),W.return=J,W):(W=g(W,ne),W.return=J,W)}function ye(J,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Hh(""+W,J.mode,ne),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return ne=bu(W.type,W.key,W.props,null,J.mode,ne),$l(ne,W),ne.return=J,ne;case E:return W=Yh(W,J.mode,ne),W.return=J,W;case F:var pe=W._init;return W=pe(W._payload),ye(J,W,ne)}if(H(W)||se(W))return W=Li(W,J.mode,ne,null),W.return=J,W;if(typeof W.then=="function")return ye(J,Ou(W),ne);if(W.$$typeof===A)return ye(J,Eu(J,W),ne);Bu(J,W)}return null}function ie(J,W,ne,pe){var ke=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ke!==null?null:M(J,W,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return ne.key===ke?z(J,W,ne,pe):null;case E:return ne.key===ke?ae(J,W,ne,pe):null;case F:return ke=ne._init,ne=ke(ne._payload),ie(J,W,ne,pe)}if(H(ne)||se(ne))return ke!==null?null:he(J,W,ne,pe,null);if(typeof ne.then=="function")return ie(J,W,Ou(ne),pe);if(ne.$$typeof===A)return ie(J,W,Eu(J,ne),pe);Bu(J,ne)}return null}function oe(J,W,ne,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return J=J.get(ne)||null,M(W,J,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case b:return J=J.get(pe.key===null?ne:pe.key)||null,z(W,J,pe,ke);case E:return J=J.get(pe.key===null?ne:pe.key)||null,ae(W,J,pe,ke);case F:var gt=pe._init;return pe=gt(pe._payload),oe(J,W,ne,pe,ke)}if(H(pe)||se(pe))return J=J.get(ne)||null,he(W,J,pe,ke,null);if(typeof pe.then=="function")return oe(J,W,ne,Ou(pe),ke);if(pe.$$typeof===A)return oe(J,W,ne,Eu(W,pe),ke);Bu(W,pe)}return null}function Ke(J,W,ne,pe){for(var ke=null,gt=null,ze=W,Ze=W=0,Zn=null;ze!==null&&Ze<ne.length;Ze++){ze.index>Ze?(Zn=ze,ze=null):Zn=ze.sibling;var Mt=ie(J,ze,ne[Ze],pe);if(Mt===null){ze===null&&(ze=Zn);break}s&&ze&&Mt.alternate===null&&i(J,ze),W=v(Mt,W,Ze),gt===null?ke=Mt:gt.sibling=Mt,gt=Mt,ze=Zn}if(Ze===ne.length)return c(J,ze),kt&&Oi(J,Ze),ke;if(ze===null){for(;Ze<ne.length;Ze++)ze=ye(J,ne[Ze],pe),ze!==null&&(W=v(ze,W,Ze),gt===null?ke=ze:gt.sibling=ze,gt=ze);return kt&&Oi(J,Ze),ke}for(ze=f(ze);Ze<ne.length;Ze++)Zn=oe(ze,J,Ze,ne[Ze],pe),Zn!==null&&(s&&Zn.alternate!==null&&ze.delete(Zn.key===null?Ze:Zn.key),W=v(Zn,W,Ze),gt===null?ke=Zn:gt.sibling=Zn,gt=Zn);return s&&ze.forEach(function(pi){return i(J,pi)}),kt&&Oi(J,Ze),ke}function We(J,W,ne,pe){if(ne==null)throw Error(n(151));for(var ke=null,gt=null,ze=W,Ze=W=0,Zn=null,Mt=ne.next();ze!==null&&!Mt.done;Ze++,Mt=ne.next()){ze.index>Ze?(Zn=ze,ze=null):Zn=ze.sibling;var pi=ie(J,ze,Mt.value,pe);if(pi===null){ze===null&&(ze=Zn);break}s&&ze&&pi.alternate===null&&i(J,ze),W=v(pi,W,Ze),gt===null?ke=pi:gt.sibling=pi,gt=pi,ze=Zn}if(Mt.done)return c(J,ze),kt&&Oi(J,Ze),ke;if(ze===null){for(;!Mt.done;Ze++,Mt=ne.next())Mt=ye(J,Mt.value,pe),Mt!==null&&(W=v(Mt,W,Ze),gt===null?ke=Mt:gt.sibling=Mt,gt=Mt);return kt&&Oi(J,Ze),ke}for(ze=f(ze);!Mt.done;Ze++,Mt=ne.next())Mt=oe(ze,J,Ze,Mt.value,pe),Mt!==null&&(s&&Mt.alternate!==null&&ze.delete(Mt.key===null?Ze:Mt.key),W=v(Mt,W,Ze),gt===null?ke=Mt:gt.sibling=Mt,gt=Mt);return s&&ze.forEach(function(G_){return i(J,G_)}),kt&&Oi(J,Ze),ke}function Zt(J,W,ne,pe){if(typeof ne=="object"&&ne!==null&&ne.type===S&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:e:{for(var ke=ne.key;W!==null;){if(W.key===ke){if(ke=ne.type,ke===S){if(W.tag===7){c(J,W.sibling),pe=g(W,ne.props.children),pe.return=J,J=pe;break e}}else if(W.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===F&&Dv(ke)===W.type){c(J,W.sibling),pe=g(W,ne.props),$l(pe,ne),pe.return=J,J=pe;break e}c(J,W);break}else i(J,W);W=W.sibling}ne.type===S?(pe=Li(ne.props.children,J.mode,pe,ne.key),pe.return=J,J=pe):(pe=bu(ne.type,ne.key,ne.props,null,J.mode,pe),$l(pe,ne),pe.return=J,J=pe)}return I(J);case E:e:{for(ke=ne.key;W!==null;){if(W.key===ke)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){c(J,W.sibling),pe=g(W,ne.children||[]),pe.return=J,J=pe;break e}else{c(J,W);break}else i(J,W);W=W.sibling}pe=Yh(ne,J.mode,pe),pe.return=J,J=pe}return I(J);case F:return ke=ne._init,ne=ke(ne._payload),Zt(J,W,ne,pe)}if(H(ne))return Ke(J,W,ne,pe);if(se(ne)){if(ke=se(ne),typeof ke!="function")throw Error(n(150));return ne=ke.call(ne),We(J,W,ne,pe)}if(typeof ne.then=="function")return Zt(J,W,Ou(ne),pe);if(ne.$$typeof===A)return Zt(J,W,Eu(J,ne),pe);Bu(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(c(J,W.sibling),pe=g(W,ne),pe.return=J,J=pe):(c(J,W),pe=Hh(ne,J.mode,pe),pe.return=J,J=pe),I(J)):c(J,W)}return function(J,W,ne,pe){try{Gl=0;var ke=Zt(J,W,ne,pe);return ko=null,ke}catch(ze){if(ze===Ol||ze===_u)throw ze;var gt=Oa(29,ze,null,J.mode);return gt.lanes=pe,gt.return=J,gt}finally{}}}var Lo=Av(!0),Tv=Av(!1),ir=U(null),Yr=null;function ei(s){var i=s.alternate;V(zn,zn.current&1),V(ir,s),Yr===null&&(i===null||To.current!==null||i.memoizedState!==null)&&(Yr=s)}function Mv(s){if(s.tag===22){if(V(zn,zn.current),V(ir,s),Yr===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(Yr=s)}}else ti()}function ti(){V(zn,zn.current),V(ir,ir.current)}function xs(s){K(ir),Yr===s&&(Yr=null),K(zn)}var zn=U(0);function Uu(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||dp(c)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Sm(s,i,c,f){i=s.memoizedState,c=c(f,i),c=c==null?i:p({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Em={enqueueSetState:function(s,i,c){s=s._reactInternals;var f=ja(),g=Xs(f);g.payload=i,c!=null&&(g.callback=c),i=Js(s,g,f),i!==null&&(Fa(i,s,f),Ul(i,s,f))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var f=ja(),g=Xs(f);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=Js(s,g,f),i!==null&&(Fa(i,s,f),Ul(i,s,f))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=ja(),f=Xs(c);f.tag=2,i!=null&&(f.callback=i),i=Js(s,f,c),i!==null&&(Fa(i,s,c),Ul(i,s,c))}};function Nv(s,i,c,f,g,v,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,I):i.prototype&&i.prototype.isPureReactComponent?!Al(c,f)||!Al(g,v):!0}function Rv(s,i,c,f){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==s&&Em.enqueueReplaceState(i,i.state,null)}function Yi(s,i){var c=i;if("ref"in i){c={};for(var f in i)f!=="ref"&&(c[f]=i[f])}if(s=s.defaultProps){c===i&&(c=p({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}var zu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function kv(s){zu(s)}function Lv(s){console.error(s)}function Pv(s){zu(s)}function ju(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(f){setTimeout(function(){throw f})}}function Ov(s,i,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Cm(s,i,c){return c=Xs(c),c.tag=3,c.payload={element:null},c.callback=function(){ju(s,i)},c}function Bv(s){return s=Xs(s),s.tag=3,s}function Uv(s,i,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var v=f.value;s.payload=function(){return g(v)},s.callback=function(){Ov(i,c,f)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){Ov(i,c,f),typeof g!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function GC(s,i,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(i=c.alternate,i!==null&&kl(i,c,g,!0),c=ir.current,c!==null){switch(c.tag){case 13:return Yr===null?qm():c.alternate===null&&yn===0&&(yn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===Kh?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([f]):i.add(f),Vm(s,f,g)),!1;case 22:return c.flags|=65536,f===Kh?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([f]):c.add(f)),Vm(s,f,g)),!1}throw Error(n(435,c.tag))}return Vm(s,f,g),qm(),!1}if(kt)return i=ir.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,f!==$h&&(s=Error(n(422),{cause:f}),Rl(nr(s,c)))):(f!==$h&&(i=Error(n(423),{cause:f}),Rl(nr(i,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=nr(f,c),g=Cm(s.stateNode,f,g),nm(s,g),yn!==4&&(yn=2)),!1;var v=Error(n(520),{cause:f});if(v=nr(v,c),Kl===null?Kl=[v]:Kl.push(v),yn!==4&&(yn=2),i===null)return!0;f=nr(f,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=Cm(c.stateNode,f,s),nm(c,s),!1;case 1:if(i=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(oi===null||!oi.has(v))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Bv(g),Uv(g,s,c,f),nm(c,g),!1}c=c.return}while(c!==null);return!1}var zv=Error(n(461)),Gn=!1;function Kn(s,i,c,f){i.child=s===null?Tv(i,null,c,f):Lo(i,s.child,c,f)}function jv(s,i,c,f,g){c=c.render;var v=i.ref;if("ref"in f){var I={};for(var M in f)M!=="ref"&&(I[M]=f[M])}else I=f;return ji(i),f=om(s,i,c,I,v,g),M=lm(),s!==null&&!Gn?(cm(s,i,g),Ss(s,i,g)):(kt&&M&&Wh(i),i.flags|=1,Kn(s,i,f,g),i.child)}function Fv(s,i,c,f,g){if(s===null){var v=c.type;return typeof v=="function"&&!Fh(v)&&v.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=v,Hv(s,i,v,f,g)):(s=bu(c.type,null,f,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,!Rm(s,g)){var I=v.memoizedProps;if(c=c.compare,c=c!==null?c:Al,c(I,f)&&s.ref===i.ref)return Ss(s,i,g)}return i.flags|=1,s=ps(v,f),s.ref=i.ref,s.return=i,i.child=s}function Hv(s,i,c,f,g){if(s!==null){var v=s.memoizedProps;if(Al(v,f)&&s.ref===i.ref)if(Gn=!1,i.pendingProps=f=v,Rm(s,g))(s.flags&131072)!==0&&(Gn=!0);else return i.lanes=s.lanes,Ss(s,i,g)}return _m(s,i,c,f,g)}function Yv(s,i,c){var f=i.pendingProps,g=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((i.flags&128)!==0){if(f=v!==null?v.baseLanes|c:c,s!==null){for(g=i.child=s.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;i.childLanes=v&~f}else i.childLanes=0,i.child=null;return Wv(s,i,f,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cu(i,v!==null?v.cachePool:null),v!==null?Hy(i,v):rm(),Mv(i);else return i.lanes=i.childLanes=536870912,Wv(s,i,v!==null?v.baseLanes|c:c,c)}else v!==null?(Cu(i,v.cachePool),Hy(i,v),ti(),i.memoizedState=null):(s!==null&&Cu(i,null),rm(),ti());return Kn(s,i,g,c),i.child}function Wv(s,i,c,f){var g=Jh();return g=g===null?null:{parent:Un._currentValue,pool:g},i.memoizedState={baseLanes:c,cachePool:g},s!==null&&Cu(i,null),rm(),Mv(i),s!==null&&kl(s,i,f,!0),null}function Fu(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(s===null||s.ref!==c)&&(i.flags|=4194816)}}function _m(s,i,c,f,g){return ji(i),c=om(s,i,c,f,void 0,g),f=lm(),s!==null&&!Gn?(cm(s,i,g),Ss(s,i,g)):(kt&&f&&Wh(i),i.flags|=1,Kn(s,i,c,g),i.child)}function Gv(s,i,c,f,g,v){return ji(i),i.updateQueue=null,c=Wy(i,f,c,g),Yy(s),f=lm(),s!==null&&!Gn?(cm(s,i,v),Ss(s,i,v)):(kt&&f&&Wh(i),i.flags|=1,Kn(s,i,c,v),i.child)}function $v(s,i,c,f,g){if(ji(i),i.stateNode===null){var v=Co,I=c.contextType;typeof I=="object"&&I!==null&&(v=ca(I)),v=new c(f,v),i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Em,i.stateNode=v,v._reactInternals=i,v=i.stateNode,v.props=f,v.state=i.memoizedState,v.refs={},em(i),I=c.contextType,v.context=typeof I=="object"&&I!==null?ca(I):Co,v.state=i.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Sm(i,c,I,f),v.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(I=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),I!==v.state&&Em.enqueueReplaceState(v,v.state,null),jl(i,f,v,g),zl(),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308),f=!0}else if(s===null){v=i.stateNode;var M=i.memoizedProps,z=Yi(c,M);v.props=z;var ae=v.context,he=c.contextType;I=Co,typeof he=="object"&&he!==null&&(I=ca(he));var ye=c.getDerivedStateFromProps;he=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=i.pendingProps!==M,he||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||ae!==I)&&Rv(i,v,f,I),Vs=!1;var ie=i.memoizedState;v.state=ie,jl(i,f,v,g),zl(),ae=i.memoizedState,M||ie!==ae||Vs?(typeof ye=="function"&&(Sm(i,c,ye,f),ae=i.memoizedState),(z=Vs||Nv(i,c,z,f,ie,ae,I))?(he||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=ae),v.props=f,v.state=ae,v.context=I,f=z):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{v=i.stateNode,tm(s,i),I=i.memoizedProps,he=Yi(c,I),v.props=he,ye=i.pendingProps,ie=v.context,ae=c.contextType,z=Co,typeof ae=="object"&&ae!==null&&(z=ca(ae)),M=c.getDerivedStateFromProps,(ae=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I!==ye||ie!==z)&&Rv(i,v,f,z),Vs=!1,ie=i.memoizedState,v.state=ie,jl(i,f,v,g),zl();var oe=i.memoizedState;I!==ye||ie!==oe||Vs||s!==null&&s.dependencies!==null&&Su(s.dependencies)?(typeof M=="function"&&(Sm(i,c,M,f),oe=i.memoizedState),(he=Vs||Nv(i,c,he,f,ie,oe,z)||s!==null&&s.dependencies!==null&&Su(s.dependencies))?(ae||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,oe,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,oe,z)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||I===s.memoizedProps&&ie===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ie===s.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=oe),v.props=f,v.state=oe,v.context=z,f=he):(typeof v.componentDidUpdate!="function"||I===s.memoizedProps&&ie===s.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&ie===s.memoizedState||(i.flags|=1024),f=!1)}return v=f,Fu(s,i),f=(i.flags&128)!==0,v||f?(v=i.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:v.render(),i.flags|=1,s!==null&&f?(i.child=Lo(i,s.child,null,g),i.child=Lo(i,null,c,g)):Kn(s,i,c,g),i.memoizedState=v.state,s=i.child):s=Ss(s,i,g),s}function Zv(s,i,c,f){return Nl(),i.flags|=256,Kn(s,i,c,f),i.child}var Im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dm(s){return{baseLanes:s,cachePool:Ly()}}function Am(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=or),s}function qv(s,i,c){var f=i.pendingProps,g=!1,v=(i.flags&128)!==0,I;if((I=v)||(I=s!==null&&s.memoizedState===null?!1:(zn.current&2)!==0),I&&(g=!0,i.flags&=-129),I=(i.flags&32)!==0,i.flags&=-33,s===null){if(kt){if(g?ei(i):ti(),kt){var M=gn,z;if(z=M){e:{for(z=M,M=Hr;z.nodeType!==8;){if(!M){M=null;break e}if(z=Tr(z.nextSibling),z===null){M=null;break e}}M=z}M!==null?(i.memoizedState={dehydrated:M,treeContext:Pi!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},z=Oa(18,null,null,0),z.stateNode=M,z.return=i,i.child=z,ga=i,gn=null,z=!0):z=!1}z||Ui(i)}if(M=i.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return dp(M)?i.lanes=32:i.lanes=536870912,null;xs(i)}return M=f.children,f=f.fallback,g?(ti(),g=i.mode,M=Hu({mode:"hidden",children:M},g),f=Li(f,g,c,null),M.return=i,f.return=i,M.sibling=f,i.child=M,g=i.child,g.memoizedState=Dm(c),g.childLanes=Am(s,I,c),i.memoizedState=Im,f):(ei(i),Tm(i,M))}if(z=s.memoizedState,z!==null&&(M=z.dehydrated,M!==null)){if(v)i.flags&256?(ei(i),i.flags&=-257,i=Mm(s,i,c)):i.memoizedState!==null?(ti(),i.child=s.child,i.flags|=128,i=null):(ti(),g=f.fallback,M=i.mode,f=Hu({mode:"visible",children:f.children},M),g=Li(g,M,c,null),g.flags|=2,f.return=i,g.return=i,f.sibling=g,i.child=f,Lo(i,s.child,null,c),f=i.child,f.memoizedState=Dm(c),f.childLanes=Am(s,I,c),i.memoizedState=Im,i=g);else if(ei(i),dp(M)){if(I=M.nextSibling&&M.nextSibling.dataset,I)var ae=I.dgst;I=ae,f=Error(n(419)),f.stack="",f.digest=I,Rl({value:f,source:null,stack:null}),i=Mm(s,i,c)}else if(Gn||kl(s,i,c,!1),I=(c&s.childLanes)!==0,Gn||I){if(I=en,I!==null&&(f=c&-c,f=(f&42)!==0?1:la(f),f=(f&(I.suspendedLanes|c))!==0?0:f,f!==0&&f!==z.retryLane))throw z.retryLane=f,Eo(s,f),Fa(I,s,f),zv;M.data==="$?"||qm(),i=Mm(s,i,c)}else M.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=z.treeContext,gn=Tr(M.nextSibling),ga=i,kt=!0,Bi=null,Hr=!1,s!==null&&(rr[sr++]=gs,rr[sr++]=ys,rr[sr++]=Pi,gs=s.id,ys=s.overflow,Pi=i),i=Tm(i,f.children),i.flags|=4096);return i}return g?(ti(),g=f.fallback,M=i.mode,z=s.child,ae=z.sibling,f=ps(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,ae!==null?g=ps(ae,g):(g=Li(g,M,c,null),g.flags|=2),g.return=i,f.return=i,f.sibling=g,i.child=f,f=g,g=i.child,M=s.child.memoizedState,M===null?M=Dm(c):(z=M.cachePool,z!==null?(ae=Un._currentValue,z=z.parent!==ae?{parent:ae,pool:ae}:z):z=Ly(),M={baseLanes:M.baseLanes|c,cachePool:z}),g.memoizedState=M,g.childLanes=Am(s,I,c),i.memoizedState=Im,f):(ei(i),c=s.child,s=c.sibling,c=ps(c,{mode:"visible",children:f.children}),c.return=i,c.sibling=null,s!==null&&(I=i.deletions,I===null?(i.deletions=[s],i.flags|=16):I.push(s)),i.child=c,i.memoizedState=null,c)}function Tm(s,i){return i=Hu({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Hu(s,i){return s=Oa(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Mm(s,i,c){return Lo(i,s.child,null,c),s=Tm(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Qv(s,i,c){s.lanes|=i;var f=s.alternate;f!==null&&(f.lanes|=i),qh(s.return,i,c)}function Nm(s,i,c,f,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=c,v.tailMode=g)}function Vv(s,i,c){var f=i.pendingProps,g=f.revealOrder,v=f.tail;if(Kn(s,i,f.children,c),f=zn.current,(f&2)!==0)f=f&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Qv(s,c,i);else if(s.tag===19)Qv(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(V(zn,f),g){case"forwards":for(c=i.child,g=null;c!==null;)s=c.alternate,s!==null&&Uu(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),Nm(i,!1,g,c,v);break;case"backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&Uu(s)===null){i.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Nm(i,!0,c,null,v);break;case"together":Nm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ss(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),ii|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(kl(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(n(153));if(i.child!==null){for(s=i.child,c=ps(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=ps(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function Rm(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Su(s)))}function $C(s,i,c){switch(i.tag){case 3:be(i,i.stateNode.containerInfo),Qs(i,Un,s.memoizedState.cache),Nl();break;case 27:case 5:rt(i);break;case 4:be(i,i.stateNode.containerInfo);break;case 10:Qs(i,i.type,i.memoizedProps.value);break;case 13:var f=i.memoizedState;if(f!==null)return f.dehydrated!==null?(ei(i),i.flags|=128,null):(c&i.child.childLanes)!==0?qv(s,i,c):(ei(i),s=Ss(s,i,c),s!==null?s.sibling:null);ei(i);break;case 19:var g=(s.flags&128)!==0;if(f=(c&i.childLanes)!==0,f||(kl(s,i,c,!1),f=(c&i.childLanes)!==0),g){if(f)return Vv(s,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),V(zn,zn.current),f)break;return null;case 22:case 23:return i.lanes=0,Yv(s,i,c);case 24:Qs(i,Un,s.memoizedState.cache)}return Ss(s,i,c)}function Xv(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)Gn=!0;else{if(!Rm(s,c)&&(i.flags&128)===0)return Gn=!1,$C(s,i,c);Gn=(s.flags&131072)!==0}else Gn=!1,kt&&(i.flags&1048576)!==0&&Dy(i,xu,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var f=i.elementType,g=f._init;if(f=g(f._payload),i.type=f,typeof f=="function")Fh(f)?(s=Yi(f,s),i.tag=1,i=$v(null,i,f,s,c)):(i.tag=0,i=_m(null,i,f,s,c));else{if(f!=null){if(g=f.$$typeof,g===k){i.tag=11,i=jv(null,i,f,s,c);break e}else if(g===G){i.tag=14,i=Fv(null,i,f,s,c);break e}}throw i=j(f)||f,Error(n(306,i,""))}}return i;case 0:return _m(s,i,i.type,i.pendingProps,c);case 1:return f=i.type,g=Yi(f,i.pendingProps),$v(s,i,f,g,c);case 3:e:{if(be(i,i.stateNode.containerInfo),s===null)throw Error(n(387));f=i.pendingProps;var v=i.memoizedState;g=v.element,tm(s,i),jl(i,f,null,c);var I=i.memoizedState;if(f=I.cache,Qs(i,Un,f),f!==v.cache&&Qh(i,[Un],c,!0),zl(),f=I.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:I.cache},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){i=Zv(s,i,f,c);break e}else if(f!==g){g=nr(Error(n(424)),i),Rl(g),i=Zv(s,i,f,c);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gn=Tr(s.firstChild),ga=i,kt=!0,Bi=null,Hr=!0,c=Tv(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Nl(),f===g){i=Ss(s,i,c);break e}Kn(s,i,f,c)}i=i.child}return i;case 26:return Fu(s,i),s===null?(c=tw(i.type,null,i.pendingProps,null))?i.memoizedState=c:kt||(c=i.type,s=i.pendingProps,f=nd(Ce.current).createElement(c),f[xn]=i,f[Tn]=s,ta(f,c,s),sn(f),i.stateNode=f):i.memoizedState=tw(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return rt(i),s===null&&kt&&(f=i.stateNode=Jb(i.type,i.pendingProps,Ce.current),ga=i,Hr=!0,g=gn,ui(i.type)?(fp=g,gn=Tr(f.firstChild)):gn=g),Kn(s,i,i.pendingProps.children,c),Fu(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&kt&&((g=f=gn)&&(f=w_(f,i.type,i.pendingProps,Hr),f!==null?(i.stateNode=f,ga=i,gn=Tr(f.firstChild),Hr=!1,g=!0):g=!1),g||Ui(i)),rt(i),g=i.type,v=i.pendingProps,I=s!==null?s.memoizedProps:null,f=v.children,lp(g,v)?f=null:I!==null&&lp(g,I)&&(i.flags|=32),i.memoizedState!==null&&(g=om(s,i,UC,null,null,c),lc._currentValue=g),Fu(s,i),Kn(s,i,f,c),i.child;case 6:return s===null&&kt&&((s=c=gn)&&(c=x_(c,i.pendingProps,Hr),c!==null?(i.stateNode=c,ga=i,gn=null,s=!0):s=!1),s||Ui(i)),null;case 13:return qv(s,i,c);case 4:return be(i,i.stateNode.containerInfo),f=i.pendingProps,s===null?i.child=Lo(i,null,f,c):Kn(s,i,f,c),i.child;case 11:return jv(s,i,i.type,i.pendingProps,c);case 7:return Kn(s,i,i.pendingProps,c),i.child;case 8:return Kn(s,i,i.pendingProps.children,c),i.child;case 12:return Kn(s,i,i.pendingProps.children,c),i.child;case 10:return f=i.pendingProps,Qs(i,i.type,f.value),Kn(s,i,f.children,c),i.child;case 9:return g=i.type._context,f=i.pendingProps.children,ji(i),g=ca(g),f=f(g),i.flags|=1,Kn(s,i,f,c),i.child;case 14:return Fv(s,i,i.type,i.pendingProps,c);case 15:return Hv(s,i,i.type,i.pendingProps,c);case 19:return Vv(s,i,c);case 31:return f=i.pendingProps,c=i.mode,f={mode:f.mode,children:f.children},s===null?(c=Hu(f,c),c.ref=i.ref,i.child=c,c.return=i,i=c):(c=ps(s.child,f),c.ref=i.ref,i.child=c,c.return=i,i=c),i;case 22:return Yv(s,i,c);case 24:return ji(i),f=ca(Un),s===null?(g=Jh(),g===null&&(g=en,v=Vh(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=c),g=v),i.memoizedState={parent:f,cache:g},em(i),Qs(i,Un,g)):((s.lanes&c)!==0&&(tm(s,i),jl(i,null,null,c),zl()),g=s.memoizedState,v=i.memoizedState,g.parent!==f?(g={parent:f,cache:f},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Qs(i,Un,f)):(f=v.cache,Qs(i,Un,f),f!==g.cache&&Qh(i,[Un],c,!0))),Kn(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(n(156,i.tag))}function Es(s){s.flags|=4}function Jv(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!iw(i)){if(i=ir.current,i!==null&&((It&4194048)===It?Yr!==null:(It&62914560)!==It&&(It&536870912)===0||i!==Yr))throw Bl=Kh,Py;s.flags|=8192}}function Yu(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?wt():536870912,s.lanes|=i,Uo|=i)}function Zl(s,i){if(!kt)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function fn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(i)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=c,i}function ZC(s,i,c){var f=i.pendingProps;switch(Gh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(i),null;case 1:return fn(i),null;case 3:return c=i.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),bs(Un),Ve(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Ml(i)?Es(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,My())),fn(i),null;case 26:return c=i.memoizedState,s===null?(Es(i),c!==null?(fn(i),Jv(i,c)):(fn(i),i.flags&=-16777217)):c?c!==s.memoizedState?(Es(i),fn(i),Jv(i,c)):(fn(i),i.flags&=-16777217):(s.memoizedProps!==f&&Es(i),fn(i),i.flags&=-16777217),null;case 27:St(i),c=Ce.current;var g=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==f&&Es(i);else{if(!f){if(i.stateNode===null)throw Error(n(166));return fn(i),null}s=re.current,Ml(i)?Ay(i):(s=Jb(g,f,c),i.stateNode=s,Es(i))}return fn(i),null;case 5:if(St(i),c=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==f&&Es(i);else{if(!f){if(i.stateNode===null)throw Error(n(166));return fn(i),null}if(s=re.current,Ml(i))Ay(i);else{switch(g=nd(Ce.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?g.createElement(c,{is:f.is}):g.createElement(c)}}s[xn]=i,s[Tn]=f;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=s;e:switch(ta(s,c,f),c){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Es(i)}}return fn(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==f&&Es(i);else{if(typeof f!="string"&&i.stateNode===null)throw Error(n(166));if(s=Ce.current,Ml(i)){if(s=i.stateNode,c=i.memoizedProps,f=null,g=ga,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[xn]=i,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Gb(s.nodeValue,c)),s||Ui(i)}else s=nd(s).createTextNode(f),s[xn]=i,i.stateNode=s}return fn(i),null;case 13:if(f=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Ml(i),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(n(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[xn]=i}else Nl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fn(i),g=!1}else g=My(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(xs(i),i):(xs(i),null)}if(xs(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=f!==null,s=s!==null&&s.memoizedState!==null,c){f=i.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==g&&(f.flags|=2048)}return c!==s&&c&&(i.child.flags|=8192),Yu(i,i.updateQueue),fn(i),null;case 4:return Ve(),s===null&&ap(i.stateNode.containerInfo),fn(i),null;case 10:return bs(i.type),fn(i),null;case 19:if(K(zn),g=i.memoizedState,g===null)return fn(i),null;if(f=(i.flags&128)!==0,v=g.rendering,v===null)if(f)Zl(g,!1);else{if(yn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(v=Uu(s),v!==null){for(i.flags|=128,Zl(g,!1),s=v.updateQueue,i.updateQueue=s,Yu(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)Iy(c,s),c=c.sibling;return V(zn,zn.current&1|2),i.child}s=s.sibling}g.tail!==null&&ot()>$u&&(i.flags|=128,f=!0,Zl(g,!1),i.lanes=4194304)}else{if(!f)if(s=Uu(v),s!==null){if(i.flags|=128,f=!0,s=s.updateQueue,i.updateQueue=s,Yu(i,s),Zl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!kt)return fn(i),null}else 2*ot()-g.renderingStartTime>$u&&c!==536870912&&(i.flags|=128,f=!0,Zl(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(s=g.last,s!==null?s.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ot(),i.sibling=null,s=zn.current,V(zn,f?s&1|2:s&1),i):(fn(i),null);case 22:case 23:return xs(i),sm(),f=i.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(i.flags|=8192):f&&(i.flags|=8192),f?(c&536870912)!==0&&(i.flags&128)===0&&(fn(i),i.subtreeFlags&6&&(i.flags|=8192)):fn(i),c=i.updateQueue,c!==null&&Yu(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048),s!==null&&K(Fi),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),bs(Un),fn(i),null;case 25:return null;case 30:return null}throw Error(n(156,i.tag))}function qC(s,i){switch(Gh(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return bs(Un),Ve(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return St(i),null;case 13:if(xs(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Nl()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return K(zn),null;case 4:return Ve(),null;case 10:return bs(i.type),null;case 22:case 23:return xs(i),sm(),s!==null&&K(Fi),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return bs(Un),null;case 25:return null;default:return null}}function Kv(s,i){switch(Gh(i),i.tag){case 3:bs(Un),Ve();break;case 26:case 27:case 5:St(i);break;case 4:Ve();break;case 13:xs(i);break;case 19:K(zn);break;case 10:bs(i.type);break;case 22:case 23:xs(i),sm(),s!==null&&K(Fi);break;case 24:bs(Un)}}function ql(s,i){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&s)===s){f=void 0;var v=c.create,I=c.inst;f=v(),I.destroy=f}c=c.next}while(c!==g)}}catch(M){Vt(i,i.return,M)}}function ni(s,i,c){try{var f=i.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&s)===s){var I=f.inst,M=I.destroy;if(M!==void 0){I.destroy=void 0,g=i;var z=c,ae=M;try{ae()}catch(he){Vt(g,z,he)}}}f=f.next}while(f!==v)}}catch(he){Vt(i,i.return,he)}}function eb(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{Fy(i,c)}catch(f){Vt(s,s.return,f)}}}function tb(s,i,c){c.props=Yi(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){Vt(s,i,f)}}function Ql(s,i){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(g){Vt(s,i,g)}}function Wr(s,i){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Vt(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Vt(s,i,g)}else c.current=null}function nb(s){var i=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Vt(s,s.return,g)}}function km(s,i,c){try{var f=s.stateNode;p_(f,s.type,c,i),f[Tn]=i}catch(g){Vt(s,s.return,g)}}function ab(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ui(s.type)||s.tag===4}function Lm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ab(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ui(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Pm(s,i,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(s),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=td));else if(f!==4&&(f===27&&ui(s.type)&&(c=s.stateNode,i=null),s=s.child,s!==null))for(Pm(s,i,c),s=s.sibling;s!==null;)Pm(s,i,c),s=s.sibling}function Wu(s,i,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(f!==4&&(f===27&&ui(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Wu(s,i,c),s=s.sibling;s!==null;)Wu(s,i,c),s=s.sibling}function rb(s){var i=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);ta(i,f,c),i[xn]=s,i[Tn]=c}catch(v){Vt(s,s.return,v)}}var Cs=!1,Cn=!1,Om=!1,sb=typeof WeakSet=="function"?WeakSet:Set,$n=null;function QC(s,i){if(s=s.containerInfo,ip=ld,s=gy(s),Lh(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var I=0,M=-1,z=-1,ae=0,he=0,ye=s,ie=null;t:for(;;){for(var oe;ye!==c||g!==0&&ye.nodeType!==3||(M=I+g),ye!==v||f!==0&&ye.nodeType!==3||(z=I+f),ye.nodeType===3&&(I+=ye.nodeValue.length),(oe=ye.firstChild)!==null;)ie=ye,ye=oe;for(;;){if(ye===s)break t;if(ie===c&&++ae===g&&(M=I),ie===v&&++he===f&&(z=I),(oe=ye.nextSibling)!==null)break;ye=ie,ie=ye.parentNode}ye=oe}c=M===-1||z===-1?null:{start:M,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(op={focusedElem:s,selectionRange:c},ld=!1,$n=i;$n!==null;)if(i=$n,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,$n=s;else for(;$n!==null;){switch(i=$n,v=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=i,g=v.memoizedProps,v=v.memoizedState,f=c.stateNode;try{var Ke=Yi(c.type,g,c.elementType===c.type);s=f.getSnapshotBeforeUpdate(Ke,v),f.__reactInternalSnapshotBeforeUpdate=s}catch(We){Vt(c,c.return,We)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)up(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=i.sibling,s!==null){s.return=i.return,$n=s;break}$n=i.return}}function ib(s,i,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:ai(s,c),f&4&&ql(5,c);break;case 1:if(ai(s,c),f&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(I){Vt(c,c.return,I)}else{var g=Yi(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(I){Vt(c,c.return,I)}}f&64&&eb(c),f&512&&Ql(c,c.return);break;case 3:if(ai(s,c),f&64&&(s=c.updateQueue,s!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{Fy(s,i)}catch(I){Vt(c,c.return,I)}}break;case 27:i===null&&f&4&&rb(c);case 26:case 5:ai(s,c),i===null&&f&4&&nb(c),f&512&&Ql(c,c.return);break;case 12:ai(s,c);break;case 13:ai(s,c),f&4&&cb(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=r_.bind(null,c),S_(s,c))));break;case 22:if(f=c.memoizedState!==null||Cs,!f){i=i!==null&&i.memoizedState!==null||Cn,g=Cs;var v=Cn;Cs=f,(Cn=i)&&!v?ri(s,c,(c.subtreeFlags&8772)!==0):ai(s,c),Cs=g,Cn=v}break;case 30:break;default:ai(s,c)}}function ob(s){var i=s.alternate;i!==null&&(s.alternate=null,ob(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&zr(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var on=null,Ca=!1;function _s(s,i,c){for(c=c.child;c!==null;)lb(s,i,c),c=c.sibling}function lb(s,i,c){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(He,c)}catch{}switch(c.tag){case 26:Cn||Wr(c,i),_s(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Cn||Wr(c,i);var f=on,g=Ca;ui(c.type)&&(on=c.stateNode,Ca=!1),_s(s,i,c),rc(c.stateNode),on=f,Ca=g;break;case 5:Cn||Wr(c,i);case 6:if(f=on,g=Ca,on=null,_s(s,i,c),on=f,Ca=g,on!==null)if(Ca)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(v){Vt(c,i,v)}else try{on.removeChild(c.stateNode)}catch(v){Vt(c,i,v)}break;case 18:on!==null&&(Ca?(s=on,Vb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),fc(s)):Vb(on,c.stateNode));break;case 4:f=on,g=Ca,on=c.stateNode.containerInfo,Ca=!0,_s(s,i,c),on=f,Ca=g;break;case 0:case 11:case 14:case 15:Cn||ni(2,c,i),Cn||ni(4,c,i),_s(s,i,c);break;case 1:Cn||(Wr(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"&&tb(c,i,f)),_s(s,i,c);break;case 21:_s(s,i,c);break;case 22:Cn=(f=Cn)||c.memoizedState!==null,_s(s,i,c),Cn=f;break;default:_s(s,i,c)}}function cb(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{fc(s)}catch(c){Vt(i,i.return,c)}}function VC(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new sb),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new sb),i;default:throw Error(n(435,s.tag))}}function Bm(s,i){var c=VC(s);i.forEach(function(f){var g=s_.bind(null,s,f);c.has(f)||(c.add(f),f.then(g,g))})}function Ba(s,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],v=s,I=i,M=I;e:for(;M!==null;){switch(M.tag){case 27:if(ui(M.type)){on=M.stateNode,Ca=!1;break e}break;case 5:on=M.stateNode,Ca=!1;break e;case 3:case 4:on=M.stateNode.containerInfo,Ca=!0;break e}M=M.return}if(on===null)throw Error(n(160));lb(v,I,g),on=null,Ca=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ub(i,s),i=i.sibling}var Ar=null;function ub(s,i){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ba(i,s),Ua(s),f&4&&(ni(3,s,s.return),ql(3,s),ni(5,s,s.return));break;case 1:Ba(i,s),Ua(s),f&512&&(Cn||c===null||Wr(c,c.return)),f&64&&Cs&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=Ar;if(Ba(i,s),Ua(s),f&512&&(Cn||c===null||Wr(c,c.return)),f&4){var v=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":v=g.getElementsByTagName("title")[0],(!v||v[xr]||v[xn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(f),g.head.insertBefore(v,g.querySelector("head > title"))),ta(v,f,c),v[xn]=s,sn(v),f=v;break e;case"link":var I=rw("link","href",g).get(f+(c.href||""));if(I){for(var M=0;M<I.length;M++)if(v=I[M],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice(M,1);break t}}v=g.createElement(f),ta(v,f,c),g.head.appendChild(v);break;case"meta":if(I=rw("meta","content",g).get(f+(c.content||""))){for(M=0;M<I.length;M++)if(v=I[M],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice(M,1);break t}}v=g.createElement(f),ta(v,f,c),g.head.appendChild(v);break;default:throw Error(n(468,f))}v[xn]=s,sn(v),f=v}s.stateNode=f}else sw(g,s.type,s.stateNode);else s.stateNode=aw(g,f,s.memoizedProps);else v!==f?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,f===null?sw(g,s.type,s.stateNode):aw(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&km(s,s.memoizedProps,c.memoizedProps)}break;case 27:Ba(i,s),Ua(s),f&512&&(Cn||c===null||Wr(c,c.return)),c!==null&&f&4&&km(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Ba(i,s),Ua(s),f&512&&(Cn||c===null||Wr(c,c.return)),s.flags&32){g=s.stateNode;try{ve(g,"")}catch(oe){Vt(s,s.return,oe)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,km(s,g,c!==null?c.memoizedProps:g)),f&1024&&(Om=!0);break;case 6:if(Ba(i,s),Ua(s),f&4){if(s.stateNode===null)throw Error(n(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(oe){Vt(s,s.return,oe)}}break;case 3:if(sd=null,g=Ar,Ar=ad(i.containerInfo),Ba(i,s),Ar=g,Ua(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{fc(i.containerInfo)}catch(oe){Vt(s,s.return,oe)}Om&&(Om=!1,db(s));break;case 4:f=Ar,Ar=ad(s.stateNode.containerInfo),Ba(i,s),Ua(s),Ar=f;break;case 12:Ba(i,s),Ua(s);break;case 13:Ba(i,s),Ua(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ym=ot()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Bm(s,f)));break;case 22:g=s.memoizedState!==null;var z=c!==null&&c.memoizedState!==null,ae=Cs,he=Cn;if(Cs=ae||g,Cn=he||z,Ba(i,s),Cn=he,Cs=ae,Ua(s),f&8192)e:for(i=s.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(c===null||z||Cs||Cn||Wi(s)),c=null,i=s;;){if(i.tag===5||i.tag===26){if(c===null){z=c=i;try{if(v=z.stateNode,g)I=v.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{M=z.stateNode;var ye=z.memoizedProps.style,ie=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;M.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(oe){Vt(z,z.return,oe)}}}else if(i.tag===6){if(c===null){z=i;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(oe){Vt(z,z.return,oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Bm(s,c))));break;case 19:Ba(i,s),Ua(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Bm(s,f)));break;case 30:break;case 21:break;default:Ba(i,s),Ua(s)}}function Ua(s){var i=s.flags;if(i&2){try{for(var c,f=s.return;f!==null;){if(ab(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,v=Lm(s);Wu(s,v,g);break;case 5:var I=c.stateNode;c.flags&32&&(ve(I,""),c.flags&=-33);var M=Lm(s);Wu(s,M,I);break;case 3:case 4:var z=c.stateNode.containerInfo,ae=Lm(s);Pm(s,ae,z);break;default:throw Error(n(161))}}catch(he){Vt(s,s.return,he)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function db(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;db(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ai(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ib(s,i.alternate,i),i=i.sibling}function Wi(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ni(4,i,i.return),Wi(i);break;case 1:Wr(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&tb(i,i.return,c),Wi(i);break;case 27:rc(i.stateNode);case 26:case 5:Wr(i,i.return),Wi(i);break;case 22:i.memoizedState===null&&Wi(i);break;case 30:Wi(i);break;default:Wi(i)}s=s.sibling}}function ri(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var f=i.alternate,g=s,v=i,I=v.flags;switch(v.tag){case 0:case 11:case 15:ri(g,v,c),ql(4,v);break;case 1:if(ri(g,v,c),f=v,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){Vt(f,f.return,ae)}if(f=v,g=f.updateQueue,g!==null){var M=f.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)jy(z[g],M)}catch(ae){Vt(f,f.return,ae)}}c&&I&64&&eb(v),Ql(v,v.return);break;case 27:rb(v);case 26:case 5:ri(g,v,c),c&&f===null&&I&4&&nb(v),Ql(v,v.return);break;case 12:ri(g,v,c);break;case 13:ri(g,v,c),c&&I&4&&cb(g,v);break;case 22:v.memoizedState===null&&ri(g,v,c),Ql(v,v.return);break;case 30:break;default:ri(g,v,c)}i=i.sibling}}function Um(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Ll(c))}function zm(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ll(s))}function Gr(s,i,c,f){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fb(s,i,c,f),i=i.sibling}function fb(s,i,c,f){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Gr(s,i,c,f),g&2048&&ql(9,i);break;case 1:Gr(s,i,c,f);break;case 3:Gr(s,i,c,f),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ll(s)));break;case 12:if(g&2048){Gr(s,i,c,f),s=i.stateNode;try{var v=i.memoizedProps,I=v.id,M=v.onPostCommit;typeof M=="function"&&M(I,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){Vt(i,i.return,z)}}else Gr(s,i,c,f);break;case 13:Gr(s,i,c,f);break;case 23:break;case 22:v=i.stateNode,I=i.alternate,i.memoizedState!==null?v._visibility&2?Gr(s,i,c,f):Vl(s,i):v._visibility&2?Gr(s,i,c,f):(v._visibility|=2,Po(s,i,c,f,(i.subtreeFlags&10256)!==0)),g&2048&&Um(I,i);break;case 24:Gr(s,i,c,f),g&2048&&zm(i.alternate,i);break;default:Gr(s,i,c,f)}}function Po(s,i,c,f,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var v=s,I=i,M=c,z=f,ae=I.flags;switch(I.tag){case 0:case 11:case 15:Po(v,I,M,z,g),ql(8,I);break;case 23:break;case 22:var he=I.stateNode;I.memoizedState!==null?he._visibility&2?Po(v,I,M,z,g):Vl(v,I):(he._visibility|=2,Po(v,I,M,z,g)),g&&ae&2048&&Um(I.alternate,I);break;case 24:Po(v,I,M,z,g),g&&ae&2048&&zm(I.alternate,I);break;default:Po(v,I,M,z,g)}i=i.sibling}}function Vl(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,f=i,g=f.flags;switch(f.tag){case 22:Vl(c,f),g&2048&&Um(f.alternate,f);break;case 24:Vl(c,f),g&2048&&zm(f.alternate,f);break;default:Vl(c,f)}i=i.sibling}}var Xl=8192;function Oo(s){if(s.subtreeFlags&Xl)for(s=s.child;s!==null;)hb(s),s=s.sibling}function hb(s){switch(s.tag){case 26:Oo(s),s.flags&Xl&&s.memoizedState!==null&&P_(Ar,s.memoizedState,s.memoizedProps);break;case 5:Oo(s);break;case 3:case 4:var i=Ar;Ar=ad(s.stateNode.containerInfo),Oo(s),Ar=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=Xl,Xl=16777216,Oo(s),Xl=i):Oo(s));break;default:Oo(s)}}function mb(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Jl(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];$n=f,gb(f,s)}mb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pb(s),s=s.sibling}function pb(s){switch(s.tag){case 0:case 11:case 15:Jl(s),s.flags&2048&&ni(9,s,s.return);break;case 3:Jl(s);break;case 12:Jl(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Gu(s)):Jl(s);break;default:Jl(s)}}function Gu(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];$n=f,gb(f,s)}mb(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ni(8,i,i.return),Gu(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Gu(i));break;default:Gu(i)}s=s.sibling}}function gb(s,i){for(;$n!==null;){var c=$n;switch(c.tag){case 0:case 11:case 15:ni(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Ll(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,$n=f;else e:for(c=s;$n!==null;){f=$n;var g=f.sibling,v=f.return;if(ob(f),f===c){$n=null;break e}if(g!==null){g.return=v,$n=g;break e}$n=v}}}var XC={getCacheForType:function(s){var i=ca(Un),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c}},JC=typeof WeakMap=="function"?WeakMap:Map,Ut=0,en=null,vt=null,It=0,zt=0,za=null,si=!1,Bo=!1,jm=!1,Is=0,yn=0,ii=0,Gi=0,Fm=0,or=0,Uo=0,Kl=null,_a=null,Hm=!1,Ym=0,$u=1/0,Zu=null,oi=null,ea=0,li=null,zo=null,jo=0,Wm=0,Gm=null,yb=null,ec=0,$m=null;function ja(){if((Ut&2)!==0&&It!==0)return It&-It;if(R.T!==null){var s=Do;return s!==0?s:Km()}return Ws()}function vb(){or===0&&(or=(It&536870912)===0||kt?us():536870912);var s=ir.current;return s!==null&&(s.flags|=32),or}function Fa(s,i,c){(s===en&&(zt===2||zt===9)||s.cancelPendingCommit!==null)&&(Fo(s,0),ci(s,It,or,!1)),oa(s,c),((Ut&2)===0||s!==en)&&(s===en&&((Ut&2)===0&&(Gi|=c),yn===4&&ci(s,It,or,!1)),$r(s))}function bb(s,i,c){if((Ut&6)!==0)throw Error(n(327));var f=!c&&(i&124)===0&&(i&s.expiredLanes)===0||dn(s,i),g=f?t_(s,i):Qm(s,i,!0),v=f;do{if(g===0){Bo&&!f&&ci(s,i,0,!1);break}else{if(c=s.current.alternate,v&&!KC(c)){g=Qm(s,i,!1),v=!1;continue}if(g===2){if(v=i,s.errorRecoveryDisabledLanes&v)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){i=I;e:{var M=s;g=Kl;var z=M.current.memoizedState.isDehydrated;if(z&&(Fo(M,I).flags|=256),I=Qm(M,I,!1),I!==2){if(jm&&!z){M.errorRecoveryDisabledLanes|=v,Gi|=v,g=4;break e}v=_a,_a=g,v!==null&&(_a===null?_a=v:_a.push.apply(_a,v))}g=I}if(v=!1,g!==2)continue}}if(g===1){Fo(s,0),ci(s,i,0,!0);break}e:{switch(f=s,v=g,v){case 0:case 1:throw Error(n(345));case 4:if((i&4194048)!==i)break;case 6:ci(f,i,or,!si);break e;case 2:_a=null;break;case 3:case 5:break;default:throw Error(n(329))}if((i&62914560)===i&&(g=Ym+300-ot(),10<g)){if(ci(f,i,or,!si),Za(f,0,!0)!==0)break e;f.timeoutHandle=qb(wb.bind(null,f,c,_a,Zu,Hm,i,or,Gi,Uo,si,v,2,-0,0),g);break e}wb(f,c,_a,Zu,Hm,i,or,Gi,Uo,si,v,0,-0,0)}}break}while(!0);$r(s)}function wb(s,i,c,f,g,v,I,M,z,ae,he,ye,ie,oe){if(s.timeoutHandle=-1,ye=i.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(oc={stylesheets:null,count:0,unsuspend:L_},hb(i),ye=O_(),ye!==null)){s.cancelPendingCommit=ye(Db.bind(null,s,i,v,c,f,g,I,M,z,he,1,ie,oe)),ci(s,v,I,!ae);return}Db(s,i,v,c,f,g,I,M,z)}function KC(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],v=g.getSnapshot;g=g.value;try{if(!Pa(v(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ci(s,i,c,f){i&=~Fm,i&=~Gi,s.suspendedLanes|=i,s.pingedLanes&=~i,f&&(s.warmLanes|=i),f=s.expirationTimes;for(var g=i;0<g;){var v=31-yt(g),I=1<<v;f[v]=-1,g&=~I}c!==0&&Fn(s,c,i)}function qu(){return(Ut&6)===0?(tc(0),!1):!0}function Zm(){if(vt!==null){if(zt===0)var s=vt.return;else s=vt,vs=zi=null,um(s),ko=null,Gl=0,s=vt;for(;s!==null;)Kv(s.alternate,s),s=s.return;vt=null}}function Fo(s,i){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,y_(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Zm(),en=s,vt=c=ps(s.current,null),It=i,zt=0,za=null,si=!1,Bo=dn(s,i),jm=!1,Uo=or=Fm=Gi=ii=yn=0,_a=Kl=null,Hm=!1,(i&8)!==0&&(i|=i&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=i;0<f;){var g=31-yt(f),v=1<<g;i|=s[g],f&=~v}return Is=i,gu(),c}function xb(s,i){mt=null,R.H=Pu,i===Ol||i===_u?(i=Uy(),zt=3):i===Py?(i=Uy(),zt=4):zt=i===zv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,za=i,vt===null&&(yn=1,ju(s,nr(i,s.current)))}function Sb(){var s=R.H;return R.H=Pu,s===null?Pu:s}function Eb(){var s=R.A;return R.A=XC,s}function qm(){yn=4,si||(It&4194048)!==It&&ir.current!==null||(Bo=!0),(ii&134217727)===0&&(Gi&134217727)===0||en===null||ci(en,It,or,!1)}function Qm(s,i,c){var f=Ut;Ut|=2;var g=Sb(),v=Eb();(en!==s||It!==i)&&(Zu=null,Fo(s,i)),i=!1;var I=yn;e:do try{if(zt!==0&&vt!==null){var M=vt,z=za;switch(zt){case 8:Zm(),I=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(i=!0);var ae=zt;if(zt=0,za=null,Ho(s,M,z,ae),c&&Bo){I=0;break e}break;default:ae=zt,zt=0,za=null,Ho(s,M,z,ae)}}e_(),I=yn;break}catch(he){xb(s,he)}while(!0);return i&&s.shellSuspendCounter++,vs=zi=null,Ut=f,R.H=g,R.A=v,vt===null&&(en=null,It=0,gu()),I}function e_(){for(;vt!==null;)Cb(vt)}function t_(s,i){var c=Ut;Ut|=2;var f=Sb(),g=Eb();en!==s||It!==i?(Zu=null,$u=ot()+500,Fo(s,i)):Bo=dn(s,i);e:do try{if(zt!==0&&vt!==null){i=vt;var v=za;t:switch(zt){case 1:zt=0,za=null,Ho(s,i,v,1);break;case 2:case 9:if(Oy(v)){zt=0,za=null,_b(i);break}i=function(){zt!==2&&zt!==9||en!==s||(zt=7),$r(s)},v.then(i,i);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:Oy(v)?(zt=0,za=null,_b(i)):(zt=0,za=null,Ho(s,i,v,7));break;case 5:var I=null;switch(vt.tag){case 26:I=vt.memoizedState;case 5:case 27:var M=vt;if(!I||iw(I)){zt=0,za=null;var z=M.sibling;if(z!==null)vt=z;else{var ae=M.return;ae!==null?(vt=ae,Qu(ae)):vt=null}break t}}zt=0,za=null,Ho(s,i,v,5);break;case 6:zt=0,za=null,Ho(s,i,v,6);break;case 8:Zm(),yn=6;break e;default:throw Error(n(462))}}n_();break}catch(he){xb(s,he)}while(!0);return vs=zi=null,R.H=f,R.A=g,Ut=c,vt!==null?0:(en=null,It=0,gu(),yn)}function n_(){for(;vt!==null&&!Xe();)Cb(vt)}function Cb(s){var i=Xv(s.alternate,s,Is);s.memoizedProps=s.pendingProps,i===null?Qu(s):vt=i}function _b(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=Gv(c,i,i.pendingProps,i.type,void 0,It);break;case 11:i=Gv(c,i,i.pendingProps,i.type.render,i.ref,It);break;case 5:um(i);default:Kv(c,i),i=vt=Iy(i,Is),i=Xv(c,i,Is)}s.memoizedProps=s.pendingProps,i===null?Qu(s):vt=i}function Ho(s,i,c,f){vs=zi=null,um(i),ko=null,Gl=0;var g=i.return;try{if(GC(s,g,i,c,It)){yn=1,ju(s,nr(c,s.current)),vt=null;return}}catch(v){if(g!==null)throw vt=g,v;yn=1,ju(s,nr(c,s.current)),vt=null;return}i.flags&32768?(kt||f===1?s=!0:Bo||(It&536870912)!==0?s=!1:(si=s=!0,(f===2||f===9||f===3||f===6)&&(f=ir.current,f!==null&&f.tag===13&&(f.flags|=16384))),Ib(i,s)):Qu(i)}function Qu(s){var i=s;do{if((i.flags&32768)!==0){Ib(i,si);return}s=i.return;var c=ZC(i.alternate,i,Is);if(c!==null){vt=c;return}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);yn===0&&(yn=5)}function Ib(s,i){do{var c=qC(s.alternate,s);if(c!==null){c.flags&=32767,vt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){vt=s;return}vt=s=c}while(s!==null);yn=6,vt=null}function Db(s,i,c,f,g,v,I,M,z){s.cancelPendingCommit=null;do Vu();while(ea!==0);if((Ut&6)!==0)throw Error(n(327));if(i!==null){if(i===s.current)throw Error(n(177));if(v=i.lanes|i.childLanes,v|=zh,Ys(s,c,v,I,M,z),s===en&&(vt=en=null,It=0),zo=i,li=s,jo=c,Wm=v,Gm=g,yb=f,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,i_(Ln,function(){return Rb(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,g=B.p,B.p=2,I=Ut,Ut|=4;try{QC(s,i,c)}finally{Ut=I,B.p=g,R.T=f}}ea=1,Ab(),Tb(),Mb()}}function Ab(){if(ea===1){ea=0;var s=li,i=zo,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=R.T,R.T=null;var f=B.p;B.p=2;var g=Ut;Ut|=4;try{ub(i,s);var v=op,I=gy(s.containerInfo),M=v.focusedElem,z=v.selectionRange;if(I!==M&&M&&M.ownerDocument&&py(M.ownerDocument.documentElement,M)){if(z!==null&&Lh(M)){var ae=z.start,he=z.end;if(he===void 0&&(he=ae),"selectionStart"in M)M.selectionStart=ae,M.selectionEnd=Math.min(he,M.value.length);else{var ye=M.ownerDocument||document,ie=ye&&ye.defaultView||window;if(ie.getSelection){var oe=ie.getSelection(),Ke=M.textContent.length,We=Math.min(z.start,Ke),Zt=z.end===void 0?We:Math.min(z.end,Ke);!oe.extend&&We>Zt&&(I=Zt,Zt=We,We=I);var J=my(M,We),W=my(M,Zt);if(J&&W&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var ne=ye.createRange();ne.setStart(J.node,J.offset),oe.removeAllRanges(),We>Zt?(oe.addRange(ne),oe.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),oe.addRange(ne))}}}}for(ye=[],oe=M;oe=oe.parentNode;)oe.nodeType===1&&ye.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ye.length;M++){var pe=ye[M];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}ld=!!ip,op=ip=null}finally{Ut=g,B.p=f,R.T=c}}s.current=i,ea=2}}function Tb(){if(ea===2){ea=0;var s=li,i=zo,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=R.T,R.T=null;var f=B.p;B.p=2;var g=Ut;Ut|=4;try{ib(s,i.alternate,i)}finally{Ut=g,B.p=f,R.T=c}}ea=3}}function Mb(){if(ea===4||ea===3){ea=0,Je();var s=li,i=zo,c=jo,f=yb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ea=5:(ea=0,zo=li=null,Nb(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(oi=null),Bn(c),i=i.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(He,i,void 0,(i.current.flags&128)===128)}catch{}if(f!==null){i=R.T,g=B.p,B.p=2,R.T=null;try{for(var v=s.onRecoverableError,I=0;I<f.length;I++){var M=f[I];v(M.value,{componentStack:M.stack})}}finally{R.T=i,B.p=g}}(jo&3)!==0&&Vu(),$r(s),g=s.pendingLanes,(c&4194090)!==0&&(g&42)!==0?s===$m?ec++:(ec=0,$m=s):ec=0,tc(0)}}function Nb(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Ll(i)))}function Vu(s){return Ab(),Tb(),Mb(),Rb()}function Rb(){if(ea!==5)return!1;var s=li,i=Wm;Wm=0;var c=Bn(jo),f=R.T,g=B.p;try{B.p=32>c?32:c,R.T=null,c=Gm,Gm=null;var v=li,I=jo;if(ea=0,zo=li=null,jo=0,(Ut&6)!==0)throw Error(n(331));var M=Ut;if(Ut|=4,pb(v.current),fb(v,v.current,I,c),Ut=M,tc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(He,v)}catch{}return!0}finally{B.p=g,R.T=f,Nb(s,i)}}function kb(s,i,c){i=nr(c,i),i=Cm(s.stateNode,i,2),s=Js(s,i,2),s!==null&&(oa(s,2),$r(s))}function Vt(s,i,c){if(s.tag===3)kb(s,s,c);else for(;i!==null;){if(i.tag===3){kb(i,s,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(oi===null||!oi.has(f))){s=nr(c,s),c=Bv(2),f=Js(i,c,2),f!==null&&(Uv(c,f,i,s),oa(f,2),$r(f));break}}i=i.return}}function Vm(s,i,c){var f=s.pingCache;if(f===null){f=s.pingCache=new JC;var g=new Set;f.set(i,g)}else g=f.get(i),g===void 0&&(g=new Set,f.set(i,g));g.has(c)||(jm=!0,g.add(c),s=a_.bind(null,s,i,c),i.then(s,s))}function a_(s,i,c){var f=s.pingCache;f!==null&&f.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,en===s&&(It&c)===c&&(yn===4||yn===3&&(It&62914560)===It&&300>ot()-Ym?(Ut&2)===0&&Fo(s,0):Fm|=c,Uo===It&&(Uo=0)),$r(s)}function Lb(s,i){i===0&&(i=wt()),s=Eo(s,i),s!==null&&(oa(s,i),$r(s))}function r_(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),Lb(s,c)}function s_(s,i){var c=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(i),Lb(s,c)}function i_(s,i){return pn(s,i)}var Xu=null,Yo=null,Xm=!1,Ju=!1,Jm=!1,$i=0;function $r(s){s!==Yo&&s.next===null&&(Yo===null?Xu=Yo=s:Yo=Yo.next=s),Ju=!0,Xm||(Xm=!0,l_())}function tc(s,i){if(!Jm&&Ju){Jm=!0;do for(var c=!1,f=Xu;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var v=0;else{var I=f.suspendedLanes,M=f.pingedLanes;v=(1<<31-yt(42|s)+1)-1,v&=g&~(I&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Ub(f,v))}else v=It,v=Za(f,f===en?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||dn(f,v)||(c=!0,Ub(f,v));f=f.next}while(c);Jm=!1}}function o_(){Pb()}function Pb(){Ju=Xm=!1;var s=0;$i!==0&&(g_()&&(s=$i),$i=0);for(var i=ot(),c=null,f=Xu;f!==null;){var g=f.next,v=Ob(f,i);v===0?(f.next=null,c===null?Xu=g:c.next=g,g===null&&(Yo=c)):(c=f,(s!==0||(v&3)!==0)&&(Ju=!0)),f=g}tc(s)}function Ob(s,i){for(var c=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var I=31-yt(v),M=1<<I,z=g[I];z===-1?((M&c)===0||(M&f)!==0)&&(g[I]=Or(M,i)):z<=i&&(s.expiredLanes|=M),v&=~M}if(i=en,c=It,c=Za(s,s===i?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===i&&(zt===2||zt===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&we(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||dn(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(f!==null&&we(f),Bn(c)){case 2:case 8:c=st;break;case 32:c=Ln;break;case 268435456:c=Yt;break;default:c=Ln}return f=Bb.bind(null,s),c=pn(c,f),s.callbackPriority=i,s.callbackNode=c,i}return f!==null&&f!==null&&we(f),s.callbackPriority=2,s.callbackNode=null,2}function Bb(s,i){if(ea!==0&&ea!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Vu()&&s.callbackNode!==c)return null;var f=It;return f=Za(s,s===en?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(bb(s,f,i),Ob(s,ot()),s.callbackNode!=null&&s.callbackNode===c?Bb.bind(null,s):null)}function Ub(s,i){if(Vu())return null;bb(s,i,!0)}function l_(){v_(function(){(Ut&6)!==0?pn(kn,o_):Pb()})}function Km(){return $i===0&&($i=us()),$i}function zb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:xa(""+s)}function jb(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function c_(s,i,c,f,g){if(i==="submit"&&c&&c.stateNode===g){var v=zb((g[Tn]||null).action),I=f.submitter;I&&(i=(i=I[Tn]||null)?zb(i.formAction):I.getAttribute("formAction"),i!==null&&(v=i,I=null));var M=new Bt("action","action",null,f,g);s.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if($i!==0){var z=I?jb(g,I):new FormData(g);bm(c,{pending:!0,data:z,method:g.method,action:v},null,z)}}else typeof v=="function"&&(M.preventDefault(),z=I?jb(g,I):new FormData(g),bm(c,{pending:!0,data:z,method:g.method,action:v},v,z))},currentTarget:g}]})}}for(var ep=0;ep<Uh.length;ep++){var tp=Uh[ep],u_=tp.toLowerCase(),d_=tp[0].toUpperCase()+tp.slice(1);Dr(u_,"on"+d_)}Dr(by,"onAnimationEnd"),Dr(wy,"onAnimationIteration"),Dr(xy,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(AC,"onTransitionRun"),Dr(TC,"onTransitionStart"),Dr(MC,"onTransitionCancel"),Dr(Sy,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function Fb(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],g=f.event;f=f.listeners;e:{var v=void 0;if(i)for(var I=f.length-1;0<=I;I--){var M=f[I],z=M.instance,ae=M.currentTarget;if(M=M.listener,z!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=ae;try{v(g)}catch(he){zu(he)}g.currentTarget=null,v=z}else for(I=0;I<f.length;I++){if(M=f[I],z=M.instance,ae=M.currentTarget,M=M.listener,z!==v&&g.isPropagationStopped())break e;v=M,g.currentTarget=ae;try{v(g)}catch(he){zu(he)}g.currentTarget=null,v=z}}}}function bt(s,i){var c=i[ds];c===void 0&&(c=i[ds]=new Set);var f=s+"__bubble";c.has(f)||(Hb(i,s,2,!1),c.add(f))}function np(s,i,c){var f=0;i&&(f|=4),Hb(c,s,f,i)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function ap(s){if(!s[Ku]){s[Ku]=!0,$s.forEach(function(c){c!=="selectionchange"&&(f_.has(c)||np(c,!1,s),np(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Ku]||(i[Ku]=!0,np("selectionchange",!1,i))}}function Hb(s,i,c,f){switch(fw(i)){case 2:var g=z_;break;case 8:g=j_;break;default:g=yp}c=g.bind(null,i,c,s),g=void 0,!Yn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(i,c,{capture:!0,passive:g}):s.addEventListener(i,c,!0):g!==void 0?s.addEventListener(i,c,{passive:g}):s.addEventListener(i,c,!1)}function rp(s,i,c,f,g){var v=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var I=f.tag;if(I===3||I===4){var M=f.stateNode.containerInfo;if(M===g)break;if(I===4)for(I=f.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===g)return;I=I.return}for(;M!==null;){if(I=Ma(M),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){f=v=I;continue e}M=M.parentNode}}f=f.return}Sa(function(){var ae=v,he=_t(c),ye=[];e:{var ie=Ey.get(s);if(ie!==void 0){var oe=Bt,Ke=s;switch(s){case"keypress":if(O(c)===0)break e;case"keydown":case"keyup":oe=iC;break;case"focusin":Ke="focus",oe=Th;break;case"focusout":Ke="blur",oe=Th;break;case"beforeblur":case"afterblur":oe=Th;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=qE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=cC;break;case by:case wy:case xy:oe=XE;break;case Sy:oe=dC;break;case"scroll":case"scrollend":oe=ka;break;case"wheel":oe=hC;break;case"copy":case"cut":case"paste":oe=KE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ey;break;case"toggle":case"beforetoggle":oe=pC}var We=(i&4)!==0,Zt=!We&&(s==="scroll"||s==="scrollend"),J=We?ie!==null?ie+"Capture":null:ie;We=[];for(var W=ae,ne;W!==null;){var pe=W;if(ne=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ne===null||J===null||(pe=Ot(W,J),pe!=null&&We.push(ac(W,pe,ne))),Zt)break;W=W.return}0<We.length&&(ie=new oe(ie,Ke,null,c,he),ye.push({event:ie,listeners:We}))}}if((i&7)===0){e:{if(ie=s==="mouseover"||s==="pointerover",oe=s==="mouseout"||s==="pointerout",ie&&c!==Fr&&(Ke=c.relatedTarget||c.fromElement)&&(Ma(Ke)||Ke[Qa]))break e;if((oe||ie)&&(ie=he.window===he?he:(ie=he.ownerDocument)?ie.defaultView||ie.parentWindow:window,oe?(Ke=c.relatedTarget||c.toElement,oe=ae,Ke=Ke?Ma(Ke):null,Ke!==null&&(Zt=o(Ke),We=Ke.tag,Ke!==Zt||We!==5&&We!==27&&We!==6)&&(Ke=null)):(oe=null,Ke=ae),oe!==Ke)){if(We=mu,pe="onMouseLeave",J="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(We=ey,pe="onPointerLeave",J="onPointerEnter",W="pointer"),Zt=oe==null?ie:Na(oe),ne=Ke==null?ie:Na(Ke),ie=new We(pe,W+"leave",oe,c,he),ie.target=Zt,ie.relatedTarget=ne,pe=null,Ma(he)===ae&&(We=new We(J,W+"enter",Ke,c,he),We.target=ne,We.relatedTarget=Zt,pe=We),Zt=pe,oe&&Ke)t:{for(We=oe,J=Ke,W=0,ne=We;ne;ne=Wo(ne))W++;for(ne=0,pe=J;pe;pe=Wo(pe))ne++;for(;0<W-ne;)We=Wo(We),W--;for(;0<ne-W;)J=Wo(J),ne--;for(;W--;){if(We===J||J!==null&&We===J.alternate)break t;We=Wo(We),J=Wo(J)}We=null}else We=null;oe!==null&&Yb(ye,ie,oe,We,!1),Ke!==null&&Zt!==null&&Yb(ye,Zt,Ke,We,!0)}}e:{if(ie=ae?Na(ae):window,oe=ie.nodeName&&ie.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ie.type==="file")var ke=ly;else if(iy(ie))if(cy)ke=_C;else{ke=EC;var gt=SC}else oe=ie.nodeName,!oe||oe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ae&&Pe(ae.elementType)&&(ke=ly):ke=CC;if(ke&&(ke=ke(s,ae))){oy(ye,ke,c,he);break e}gt&&gt(s,ie,ae),s==="focusout"&&ae&&ie.type==="number"&&ae.memoizedProps.value!=null&&at(ie,"number",ie.value)}switch(gt=ae?Na(ae):window,s){case"focusin":(iy(gt)||gt.contentEditable==="true")&&(wo=gt,Ph=ae,Tl=null);break;case"focusout":Tl=Ph=wo=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,yy(ye,c,he);break;case"selectionchange":if(DC)break;case"keydown":case"keyup":yy(ye,c,he)}var ze;if(Nh)e:{switch(s){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else bo?ry(s,c)&&(Ze="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ze="onCompositionStart");Ze&&(ty&&c.locale!=="ko"&&(bo||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&bo&&(ze=tr()):(Vn=he,er="value"in Vn?Vn.value:Vn.textContent,bo=!0)),gt=ed(ae,Ze),0<gt.length&&(Ze=new K0(Ze,s,null,c,he),ye.push({event:Ze,listeners:gt}),ze?Ze.data=ze:(ze=sy(c),ze!==null&&(Ze.data=ze)))),(ze=yC?vC(s,c):bC(s,c))&&(Ze=ed(ae,"onBeforeInput"),0<Ze.length&&(gt=new K0("onBeforeInput","beforeinput",null,c,he),ye.push({event:gt,listeners:Ze}),gt.data=ze)),c_(ye,s,ae,c,he)}Fb(ye,i)})}function ac(s,i,c){return{instance:s,listener:i,currentTarget:c}}function ed(s,i){for(var c=i+"Capture",f=[];s!==null;){var g=s,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Ot(s,c),g!=null&&f.unshift(ac(s,g,v)),g=Ot(s,i),g!=null&&f.push(ac(s,g,v))),s.tag===3)return f;s=s.return}return[]}function Wo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Yb(s,i,c,f,g){for(var v=i._reactName,I=[];c!==null&&c!==f;){var M=c,z=M.alternate,ae=M.stateNode;if(M=M.tag,z!==null&&z===f)break;M!==5&&M!==26&&M!==27||ae===null||(z=ae,g?(ae=Ot(c,v),ae!=null&&I.unshift(ac(c,ae,z))):g||(ae=Ot(c,v),ae!=null&&I.push(ac(c,ae,z)))),c=c.return}I.length!==0&&s.push({event:i,listeners:I})}var h_=/\r\n?/g,m_=/\u0000|\uFFFD/g;function Wb(s){return(typeof s=="string"?s:""+s).replace(h_,`
`).replace(m_,"")}function Gb(s,i){return i=Wb(i),Wb(s)===i}function td(){}function $t(s,i,c,f,g,v){switch(c){case"children":typeof f=="string"?i==="body"||i==="textarea"&&f===""||ve(s,f):(typeof f=="number"||typeof f=="bigint")&&i!=="body"&&ve(s,""+f);break;case"className":hs(s,"class",f);break;case"tabIndex":hs(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(s,c,f);break;case"style":Me(s,f,v);break;case"data":if(i!=="object"){hs(s,"data",f);break}case"src":case"href":if(f===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=xa(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(i!=="input"&&$t(s,i,"name",g.name,g,null),$t(s,i,"formEncType",g.formEncType,g,null),$t(s,i,"formMethod",g.formMethod,g,null),$t(s,i,"formTarget",g.formTarget,g,null)):($t(s,i,"encType",g.encType,g,null),$t(s,i,"method",g.method,g,null),$t(s,i,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=xa(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=td);break;case"onScroll":f!=null&&bt("scroll",s);break;case"onScrollEnd":f!=null&&bt("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=xa(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":bt("beforetoggle",s),bt("toggle",s),Er(s,"popover",f);break;case"xlinkActuate":Ra(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ra(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ra(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ra(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ra(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ra(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ra(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ra(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ra(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Er(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ct.get(c)||c,Er(s,c,f))}}function sp(s,i,c,f,g,v){switch(c){case"style":Me(s,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(n(60));s.innerHTML=c}}break;case"children":typeof f=="string"?ve(s,f):(typeof f=="number"||typeof f=="bigint")&&ve(s,""+f);break;case"onScroll":f!=null&&bt("scroll",s);break;case"onScrollEnd":f!=null&&bt("scrollend",s);break;case"onClick":f!=null&&(s.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),v=s[Tn]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(i,v,g),typeof f=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,f,g);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):Er(s,c,f)}}}function ta(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",s),bt("load",s);var f=!1,g=!1,v;for(v in c)if(c.hasOwnProperty(v)){var I=c[v];if(I!=null)switch(v){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:$t(s,i,v,I,c,null)}}g&&$t(s,i,"srcSet",c.srcSet,c,null),f&&$t(s,i,"src",c.src,c,null);return;case"input":bt("invalid",s);var M=v=I=g=null,z=null,ae=null;for(f in c)if(c.hasOwnProperty(f)){var he=c[f];if(he!=null)switch(f){case"name":g=he;break;case"type":I=he;break;case"checked":z=he;break;case"defaultChecked":ae=he;break;case"value":v=he;break;case"defaultValue":M=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(137,i));break;default:$t(s,i,f,he,c,null)}}Ne(s,v,M,z,ae,I,g,!1),N(s);return;case"select":bt("invalid",s),f=I=v=null;for(g in c)if(c.hasOwnProperty(g)&&(M=c[g],M!=null))switch(g){case"value":v=M;break;case"defaultValue":I=M;break;case"multiple":f=M;default:$t(s,i,g,M,c,null)}i=v,c=I,s.multiple=!!f,i!=null?je(s,!!f,i,!1):c!=null&&je(s,!!f,c,!0);return;case"textarea":bt("invalid",s),v=g=f=null;for(I in c)if(c.hasOwnProperty(I)&&(M=c[I],M!=null))switch(I){case"value":f=M;break;case"defaultValue":g=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:$t(s,i,I,M,c,null)}Ue(s,f,g,v),N(s);return;case"option":for(z in c)if(c.hasOwnProperty(z)&&(f=c[z],f!=null))switch(z){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:$t(s,i,z,f,c,null)}return;case"dialog":bt("beforetoggle",s),bt("toggle",s),bt("cancel",s),bt("close",s);break;case"iframe":case"object":bt("load",s);break;case"video":case"audio":for(f=0;f<nc.length;f++)bt(nc[f],s);break;case"image":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"embed":case"source":case"link":bt("error",s),bt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in c)if(c.hasOwnProperty(ae)&&(f=c[ae],f!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,i));default:$t(s,i,ae,f,c,null)}return;default:if(Pe(i)){for(he in c)c.hasOwnProperty(he)&&(f=c[he],f!==void 0&&sp(s,i,he,f,c,void 0));return}}for(M in c)c.hasOwnProperty(M)&&(f=c[M],f!=null&&$t(s,i,M,f,c,null))}function p_(s,i,c,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,I=null,M=null,z=null,ae=null,he=null;for(oe in c){var ye=c[oe];if(c.hasOwnProperty(oe)&&ye!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":z=ye;default:f.hasOwnProperty(oe)||$t(s,i,oe,null,f,ye)}}for(var ie in f){var oe=f[ie];if(ye=c[ie],f.hasOwnProperty(ie)&&(oe!=null||ye!=null))switch(ie){case"type":v=oe;break;case"name":g=oe;break;case"checked":ae=oe;break;case"defaultChecked":he=oe;break;case"value":I=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,i));break;default:oe!==ye&&$t(s,i,ie,oe,f,ye)}}De(s,I,M,z,ae,he,v,g);return;case"select":oe=I=M=ie=null;for(v in c)if(z=c[v],c.hasOwnProperty(v)&&z!=null)switch(v){case"value":break;case"multiple":oe=z;default:f.hasOwnProperty(v)||$t(s,i,v,null,f,z)}for(g in f)if(v=f[g],z=c[g],f.hasOwnProperty(g)&&(v!=null||z!=null))switch(g){case"value":ie=v;break;case"defaultValue":M=v;break;case"multiple":I=v;default:v!==z&&$t(s,i,g,v,f,z)}i=M,c=I,f=oe,ie!=null?je(s,!!c,ie,!1):!!f!=!!c&&(i!=null?je(s,!!c,i,!0):je(s,!!c,c?[]:"",!1));return;case"textarea":oe=ie=null;for(M in c)if(g=c[M],c.hasOwnProperty(M)&&g!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:$t(s,i,M,null,f,g)}for(I in f)if(g=f[I],v=c[I],f.hasOwnProperty(I)&&(g!=null||v!=null))switch(I){case"value":ie=g;break;case"defaultValue":oe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==v&&$t(s,i,I,g,f,v)}it(s,ie,oe);return;case"option":for(var Ke in c)if(ie=c[Ke],c.hasOwnProperty(Ke)&&ie!=null&&!f.hasOwnProperty(Ke))switch(Ke){case"selected":s.selected=!1;break;default:$t(s,i,Ke,null,f,ie)}for(z in f)if(ie=f[z],oe=c[z],f.hasOwnProperty(z)&&ie!==oe&&(ie!=null||oe!=null))switch(z){case"selected":s.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:$t(s,i,z,ie,f,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in c)ie=c[We],c.hasOwnProperty(We)&&ie!=null&&!f.hasOwnProperty(We)&&$t(s,i,We,null,f,ie);for(ae in f)if(ie=f[ae],oe=c[ae],f.hasOwnProperty(ae)&&ie!==oe&&(ie!=null||oe!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,i));break;default:$t(s,i,ae,ie,f,oe)}return;default:if(Pe(i)){for(var Zt in c)ie=c[Zt],c.hasOwnProperty(Zt)&&ie!==void 0&&!f.hasOwnProperty(Zt)&&sp(s,i,Zt,void 0,f,ie);for(he in f)ie=f[he],oe=c[he],!f.hasOwnProperty(he)||ie===oe||ie===void 0&&oe===void 0||sp(s,i,he,ie,f,oe);return}}for(var J in c)ie=c[J],c.hasOwnProperty(J)&&ie!=null&&!f.hasOwnProperty(J)&&$t(s,i,J,null,f,ie);for(ye in f)ie=f[ye],oe=c[ye],!f.hasOwnProperty(ye)||ie===oe||ie==null&&oe==null||$t(s,i,ye,ie,f,oe)}var ip=null,op=null;function nd(s){return s.nodeType===9?s:s.ownerDocument}function $b(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zb(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function lp(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cp=null;function g_(){var s=window.event;return s&&s.type==="popstate"?s===cp?!1:(cp=s,!0):(cp=null,!1)}var qb=typeof setTimeout=="function"?setTimeout:void 0,y_=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,v_=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(s){return Qb.resolve(null).then(s).catch(b_)}:qb;function b_(s){setTimeout(function(){throw s})}function ui(s){return s==="head"}function Vb(s,i){var c=i,f=0,g=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<f&&8>f){c=f;var I=s.ownerDocument;if(c&1&&rc(I.documentElement),c&2&&rc(I.body),c&4)for(c=I.head,rc(c),I=c.firstChild;I;){var M=I.nextSibling,z=I.nodeName;I[xr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||c.removeChild(I),I=M}}if(g===0){s.removeChild(v),fc(i);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:f=c.charCodeAt(0)-48;else f=0;c=v}while(c);fc(i)}function up(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":up(c),zr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function w_(s,i,c,f){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[xr])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Tr(s.nextSibling),s===null)break}return null}function x_(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Tr(s.nextSibling),s===null))return null;return s}function dp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function S_(s,i){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")i();else{var f=function(){i(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Tr(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var fp=null;function Xb(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}function Jb(s,i,c){switch(i=nd(c),s){case"html":if(s=i.documentElement,!s)throw Error(n(452));return s;case"head":if(s=i.head,!s)throw Error(n(453));return s;case"body":if(s=i.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function rc(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);zr(s)}var lr=new Map,Kb=new Set;function ad(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ds=B.d;B.d={f:E_,r:C_,D:__,C:I_,L:D_,m:A_,X:M_,S:T_,M:N_};function E_(){var s=Ds.f(),i=qu();return s||i}function C_(s){var i=Sr(s);i!==null&&i.tag===5&&i.type==="form"?bv(i):Ds.r(s)}var Go=typeof document>"u"?null:document;function ew(s,i,c){var f=Go;if(f&&typeof i=="string"&&i){var g=Ae(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Kb.has(g)||(Kb.add(g),s={rel:s,crossOrigin:c,href:i},f.querySelector(g)===null&&(i=f.createElement("link"),ta(i,"link",s),sn(i),f.head.appendChild(i)))}}function __(s){Ds.D(s),ew("dns-prefetch",s,null)}function I_(s,i){Ds.C(s,i),ew("preconnect",s,i)}function D_(s,i,c){Ds.L(s,i,c);var f=Go;if(f&&s&&i){var g='link[rel="preload"][as="'+Ae(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Ae(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Ae(c.imageSizes)+'"]')):g+='[href="'+Ae(s)+'"]';var v=g;switch(i){case"style":v=$o(s);break;case"script":v=Zo(s)}lr.has(v)||(s=p({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),lr.set(v,s),f.querySelector(g)!==null||i==="style"&&f.querySelector(sc(v))||i==="script"&&f.querySelector(ic(v))||(i=f.createElement("link"),ta(i,"link",s),sn(i),f.head.appendChild(i)))}}function A_(s,i){Ds.m(s,i);var c=Go;if(c&&s){var f=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ae(f)+'"][href="'+Ae(s)+'"]',v=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Zo(s)}if(!lr.has(v)&&(s=p({rel:"modulepreload",href:s},i),lr.set(v,s),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ic(v)))return}f=c.createElement("link"),ta(f,"link",s),sn(f),c.head.appendChild(f)}}}function T_(s,i,c){Ds.S(s,i,c);var f=Go;if(f&&s){var g=Va(f).hoistableStyles,v=$o(s);i=i||"default";var I=g.get(v);if(!I){var M={loading:0,preload:null};if(I=f.querySelector(sc(v)))M.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":i},c),(c=lr.get(v))&&hp(s,c);var z=I=f.createElement("link");sn(z),ta(z,"link",s),z._p=new Promise(function(ae,he){z.onload=ae,z.onerror=he}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,rd(I,i,f)}I={type:"stylesheet",instance:I,count:1,state:M},g.set(v,I)}}}function M_(s,i){Ds.X(s,i);var c=Go;if(c&&s){var f=Va(c).hoistableScripts,g=Zo(s),v=f.get(g);v||(v=c.querySelector(ic(g)),v||(s=p({src:s,async:!0},i),(i=lr.get(g))&&mp(s,i),v=c.createElement("script"),sn(v),ta(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function N_(s,i){Ds.M(s,i);var c=Go;if(c&&s){var f=Va(c).hoistableScripts,g=Zo(s),v=f.get(g);v||(v=c.querySelector(ic(g)),v||(s=p({src:s,async:!0,type:"module"},i),(i=lr.get(g))&&mp(s,i),v=c.createElement("script"),sn(v),ta(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function tw(s,i,c,f){var g=(g=Ce.current)?ad(g):null;if(!g)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=$o(c.href),c=Va(g).hoistableStyles,f=c.get(i),f||(f={type:"style",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=$o(c.href);var v=Va(g).hoistableStyles,I=v.get(s);if(I||(g=g.ownerDocument||g,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,I),(v=g.querySelector(sc(s)))&&!v._p&&(I.instance=v,I.state.loading=5),lr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},lr.set(s,c),v||R_(g,s,c,I.state))),i&&f===null)throw Error(n(528,""));return I}if(i&&f!==null)throw Error(n(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zo(c),c=Va(g).hoistableScripts,f=c.get(i),f||(f={type:"script",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function $o(s){return'href="'+Ae(s)+'"'}function sc(s){return'link[rel="stylesheet"]['+s+"]"}function nw(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function R_(s,i,c,f){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?f.loading=1:(i=s.createElement("link"),f.preload=i,i.addEventListener("load",function(){return f.loading|=1}),i.addEventListener("error",function(){return f.loading|=2}),ta(i,"link",c),sn(i),s.head.appendChild(i))}function Zo(s){return'[src="'+Ae(s)+'"]'}function ic(s){return"script[async]"+s}function aw(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var f=s.querySelector('style[data-href~="'+Ae(c.href)+'"]');if(f)return i.instance=f,sn(f),f;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),sn(f),ta(f,"style",g),rd(f,c.precedence,s),i.instance=f;case"stylesheet":g=$o(c.href);var v=s.querySelector(sc(g));if(v)return i.state.loading|=4,i.instance=v,sn(v),v;f=nw(c),(g=lr.get(g))&&hp(f,g),v=(s.ownerDocument||s).createElement("link"),sn(v);var I=v;return I._p=new Promise(function(M,z){I.onload=M,I.onerror=z}),ta(v,"link",f),i.state.loading|=4,rd(v,c.precedence,s),i.instance=v;case"script":return v=Zo(c.src),(g=s.querySelector(ic(v)))?(i.instance=g,sn(g),g):(f=c,(g=lr.get(v))&&(f=p({},c),mp(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),sn(g),ta(g,"link",f),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(n(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(f=i.instance,i.state.loading|=4,rd(f,c.precedence,s));return i.instance}function rd(s,i,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,v=g,I=0;I<f.length;I++){var M=f[I];if(M.dataset.precedence===i)v=M;else if(v!==g)break}v?v.parentNode.insertBefore(s,v.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function hp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function mp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var sd=null;function rw(s,i,c){if(sd===null){var f=new Map,g=sd=new Map;g.set(c,f)}else g=sd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var v=c[g];if(!(v[xr]||v[xn]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var I=v.getAttribute(i)||"";I=s+I;var M=f.get(I);M?M.push(v):f.set(I,[v])}}return f}function sw(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function k_(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function iw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var oc=null;function L_(){}function P_(s,i,c){if(oc===null)throw Error(n(475));var f=oc;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=$o(c.href),v=s.querySelector(sc(g));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=id.bind(f),s.then(f,f)),i.state.loading|=4,i.instance=v,sn(v);return}v=s.ownerDocument||s,c=nw(c),(g=lr.get(g))&&hp(c,g),v=v.createElement("link"),sn(v);var I=v;I._p=new Promise(function(M,z){I.onload=M,I.onerror=z}),ta(v,"link",c),i.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(f.count++,i=id.bind(f),s.addEventListener("load",i),s.addEventListener("error",i))}}function O_(){if(oc===null)throw Error(n(475));var s=oc;return s.stylesheets&&s.count===0&&pp(s,s.stylesheets),0<s.count?function(i){var c=setTimeout(function(){if(s.stylesheets&&pp(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(c)}}:null}function id(){if(this.count--,this.count===0){if(this.stylesheets)pp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var od=null;function pp(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,od=new Map,i.forEach(B_,s),od=null,id.call(s))}function B_(s,i){if(!(i.state.loading&4)){var c=od.get(s);if(c)var f=c.get(null);else{c=new Map,od.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var I=g[v];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),f=I)}f&&c.set(null,f)}g=i.instance,I=g.getAttribute("data-precedence"),v=c.get(I)||f,v===f&&c.set(null,g),c.set(I,g),this.count++,f=id.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),v?v.parentNode.insertBefore(g,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var lc={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function U_(s,i,c,f,g,v,I,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.hiddenUpdates=wa(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function ow(s,i,c,f,g,v,I,M,z,ae,he,ye){return s=new U_(s,i,c,I,M,z,ae,ye),i=1,v===!0&&(i|=24),v=Oa(3,null,null,i),s.current=v,v.stateNode=s,i=Vh(),i.refCount++,s.pooledCache=i,i.refCount++,v.memoizedState={element:f,isDehydrated:c,cache:i},em(v),s}function lw(s){return s?(s=Co,s):Co}function cw(s,i,c,f,g,v){g=lw(g),f.context===null?f.context=g:f.pendingContext=g,f=Xs(i),f.payload={element:c},v=v===void 0?null:v,v!==null&&(f.callback=v),c=Js(s,f,i),c!==null&&(Fa(c,s,i),Ul(c,s,i))}function uw(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function gp(s,i){uw(s,i),(s=s.alternate)&&uw(s,i)}function dw(s){if(s.tag===13){var i=Eo(s,67108864);i!==null&&Fa(i,s,67108864),gp(s,67108864)}}var ld=!0;function z_(s,i,c,f){var g=R.T;R.T=null;var v=B.p;try{B.p=2,yp(s,i,c,f)}finally{B.p=v,R.T=g}}function j_(s,i,c,f){var g=R.T;R.T=null;var v=B.p;try{B.p=8,yp(s,i,c,f)}finally{B.p=v,R.T=g}}function yp(s,i,c,f){if(ld){var g=vp(f);if(g===null)rp(s,i,f,cd,c),hw(s,f);else if(H_(g,s,i,c,f))f.stopPropagation();else if(hw(s,f),i&4&&-1<F_.indexOf(s)){for(;g!==null;){var v=Sr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var I=jn(v.pendingLanes);if(I!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;I;){var z=1<<31-yt(I);M.entanglements[1]|=z,I&=~z}$r(v),(Ut&6)===0&&($u=ot()+500,tc(0))}}break;case 13:M=Eo(v,2),M!==null&&Fa(M,v,2),qu(),gp(v,2)}if(v=vp(f),v===null&&rp(s,i,f,cd,c),v===g)break;g=v}g!==null&&f.stopPropagation()}else rp(s,i,f,null,c)}}function vp(s){return s=_t(s),bp(s)}var cd=null;function bp(s){if(cd=null,s=Ma(s),s!==null){var i=o(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=l(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return cd=s,null}function fw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case kn:return 2;case st:return 8;case Ln:case Xt:return 32;case Yt:return 268435456;default:return 32}default:return 32}}var wp=!1,di=null,fi=null,hi=null,cc=new Map,uc=new Map,mi=[],F_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(s,i){switch(s){case"focusin":case"focusout":di=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":cc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(i.pointerId)}}function dc(s,i,c,f,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},i!==null&&(i=Sr(i),i!==null&&dw(i)),s):(s.eventSystemFlags|=f,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function H_(s,i,c,f,g){switch(i){case"focusin":return di=dc(di,s,i,c,f,g),!0;case"dragenter":return fi=dc(fi,s,i,c,f,g),!0;case"mouseover":return hi=dc(hi,s,i,c,f,g),!0;case"pointerover":var v=g.pointerId;return cc.set(v,dc(cc.get(v)||null,s,i,c,f,g)),!0;case"gotpointercapture":return v=g.pointerId,uc.set(v,dc(uc.get(v)||null,s,i,c,f,g)),!0}return!1}function mw(s){var i=Ma(s.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=l(c),i!==null){s.blockedOn=i,qa(s.priority,function(){if(c.tag===13){var f=ja();f=la(f);var g=Eo(c,f);g!==null&&Fa(g,c,f),gp(c,f)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ud(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=vp(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Fr=f,c.target.dispatchEvent(f),Fr=null}else return i=Sr(c),i!==null&&dw(i),s.blockedOn=c,!1;i.shift()}return!0}function pw(s,i,c){ud(s)&&c.delete(i)}function Y_(){wp=!1,di!==null&&ud(di)&&(di=null),fi!==null&&ud(fi)&&(fi=null),hi!==null&&ud(hi)&&(hi=null),cc.forEach(pw),uc.forEach(pw)}function dd(s,i){s.blockedOn===i&&(s.blockedOn=null,wp||(wp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Y_)))}var fd=null;function gw(s){fd!==s&&(fd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fd===s&&(fd=null);for(var i=0;i<s.length;i+=3){var c=s[i],f=s[i+1],g=s[i+2];if(typeof f!="function"){if(bp(f||c)===null)continue;break}var v=Sr(c);v!==null&&(s.splice(i,3),i-=3,bm(v,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function fc(s){function i(z){return dd(z,s)}di!==null&&dd(di,s),fi!==null&&dd(fi,s),hi!==null&&dd(hi,s),cc.forEach(i),uc.forEach(i);for(var c=0;c<mi.length;c++){var f=mi[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<mi.length&&(c=mi[0],c.blockedOn===null);)mw(c),c.blockedOn===null&&mi.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],v=c[f+1],I=g[Tn]||null;if(typeof v=="function")I||gw(c);else if(I){var M=null;if(v&&v.hasAttribute("formAction")){if(g=v,I=v[Tn]||null)M=I.formAction;else if(bp(g)!==null)continue}else M=I.action;typeof M=="function"?c[f+1]=M:(c.splice(f,3),f-=3),gw(c)}}}function xp(s){this._internalRoot=s}hd.prototype.render=xp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(n(409));var c=i.current,f=ja();cw(c,f,s,i,null,null)},hd.prototype.unmount=xp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;cw(s.current,2,null,s,null,null),qu(),i[Qa]=null}};function hd(s){this._internalRoot=s}hd.prototype.unstable_scheduleHydration=function(s){if(s){var i=Ws();s={blockedOn:null,target:s,priority:i};for(var c=0;c<mi.length&&i!==0&&i<mi[c].priority;c++);mi.splice(c,0,s),c===0&&mw(s)}};var yw=a.version;if(yw!=="19.1.0")throw Error(n(527,yw,"19.1.0"));B.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=h(i),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var W_={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{He=md.inject(W_),nt=md}catch{}}return hc.createRoot=function(s,i){if(!r(s))throw Error(n(299));var c=!1,f="",g=kv,v=Lv,I=Pv,M=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(I=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(M=i.unstable_transitionCallbacks)),i=ow(s,1,!1,null,null,c,f,g,v,I,M,null),s[Qa]=i.current,ap(s),new xp(i)},hc.hydrateRoot=function(s,i,c){if(!r(s))throw Error(n(299));var f=!1,g="",v=kv,I=Lv,M=Pv,z=null,ae=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(z=c.unstable_transitionCallbacks),c.formState!==void 0&&(ae=c.formState)),i=ow(s,1,!0,i,c??null,f,g,v,I,M,z,ae),i.context=lw(null),c=i.current,f=ja(),f=la(f),g=Xs(f),g.callback=null,Js(c,g,f),c=f,i.current.lanes=c,oa(i,c),$r(i),s[Qa]=i.current,ap(s),new hd(i)},hc.version="19.1.0",hc}var _w;function eI(){if(_w)return Ep.exports;_w=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ep.exports=K_(),Ep.exports}var tI=eI();const nI=a0(tI);var mc={},Iw;function aI(){if(Iw)return mc;Iw=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.parse=l,mc.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,o=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function l(b,E){const S=new o,C=b.length;if(C<2)return S;const _=(E==null?void 0:E.decode)||p;let x=0;do{const D=b.indexOf("=",x);if(D===-1)break;const A=b.indexOf(";",x),k=A===-1?C:A;if(D>k){x=b.lastIndexOf(";",D-1)+1;continue}const P=d(b,x,D),L=h(b,D,P),G=b.slice(P,L);if(S[G]===void 0){let F=d(b,D+1,k),q=h(b,k,F);const te=_(b.slice(F,q));S[G]=te}x=k+1}while(x<C);return S}function d(b,E,S){do{const C=b.charCodeAt(E);if(C!==32&&C!==9)return E}while(++E<S);return S}function h(b,E,S){for(;E>S;){const C=b.charCodeAt(--E);if(C!==32&&C!==9)return E+1}return S}function m(b,E,S){const C=(S==null?void 0:S.encode)||encodeURIComponent;if(!t.test(b))throw new TypeError(`argument name is invalid: ${b}`);const _=C(E);if(!a.test(_))throw new TypeError(`argument val is invalid: ${E}`);let x=b+"="+_;if(!S)return x;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);x+="; Max-Age="+S.maxAge}if(S.domain){if(!e.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);x+="; Domain="+S.domain}if(S.path){if(!n.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);x+="; Path="+S.path}if(S.expires){if(!y(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);x+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(x+="; HttpOnly"),S.secure&&(x+="; Secure"),S.partitioned&&(x+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return x}function p(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return r.call(b)==="[object Date]"}return mc}aI();var Dw="popstate";function rI(t={}){function a(r,o){let{pathname:l="/",search:d="",hash:h=""}=fo(r.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),gg("",{pathname:l,search:d,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(r,o){let l=r.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let h=r.location.href,m=h.indexOf("#");d=m===-1?h:h.slice(0,m)}return d+"#"+(typeof o=="string"?o:Wc(o))}function n(r,o){$a(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return iI(a,e,n,t)}function un(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function $a(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function sI(){return Math.random().toString(36).substring(2,10)}function Aw(t,a){return{usr:t.state,key:t.key,idx:a}}function gg(t,a,e=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?fo(a):a,state:e,key:a&&a.key||n||sI()}}function Wc({pathname:t="/",search:a="",hash:e=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function fo(t){let a={};if(t){let e=t.indexOf("#");e>=0&&(a.hash=t.substring(e),t=t.substring(0,e));let n=t.indexOf("?");n>=0&&(a.search=t.substring(n),t=t.substring(0,n)),t&&(a.pathname=t)}return a}function iI(t,a,e,n={}){let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,d="POP",h=null,m=p();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function p(){return(l.state||{idx:null}).idx}function y(){d="POP";let _=p(),x=_==null?null:_-m;m=_,h&&h({action:d,location:C.location,delta:x})}function b(_,x){d="PUSH";let D=gg(C.location,_,x);e&&e(D,_),m=p()+1;let A=Aw(D,m),k=C.createHref(D);try{l.pushState(A,"",k)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(k)}o&&h&&h({action:d,location:C.location,delta:1})}function E(_,x){d="REPLACE";let D=gg(C.location,_,x);e&&e(D,_),m=p();let A=Aw(D,m),k=C.createHref(D);l.replaceState(A,"",k),o&&h&&h({action:d,location:C.location,delta:0})}function S(_){return oI(_)}let C={get action(){return d},get location(){return t(r,l)},listen(_){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(Dw,y),h=_,()=>{r.removeEventListener(Dw,y),h=null}},createHref(_){return a(r,_)},createURL:S,encodeLocation(_){let x=S(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:b,replace:E,go(_){return l.go(_)}};return C}function oI(t,a=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),un(e,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Wc(t);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function Wx(t,a,e="/"){return lI(t,a,e,!1)}function lI(t,a,e,n){let r=typeof a=="string"?fo(a):a,o=zs(r.pathname||"/",e);if(o==null)return null;let l=Gx(t);cI(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let m=wI(o);d=vI(l[h],m,n)}return d}function Gx(t,a=[],e=[],n=""){let r=(o,l,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(un(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length));let m=Rs([n,h.relativePath]),p=e.concat(h);o.children&&o.children.length>0&&(un(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Gx(o.children,a,p,m)),!(o.path==null&&!o.index)&&a.push({path:m,score:gI(m,o.index),routesMeta:p})};return t.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))r(o,l);else for(let h of $x(o.path))r(o,l,h)}),a}function $x(t){let a=t.split("/");if(a.length===0)return[];let[e,...n]=a,r=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=$x(n.join("/")),d=[];return d.push(...l.map(h=>h===""?o:[o,h].join("/"))),r&&d.push(...l),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function cI(t){t.sort((a,e)=>a.score!==e.score?e.score-a.score:yI(a.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var uI=/^:[\w-]+$/,dI=3,fI=2,hI=1,mI=10,pI=-2,Tw=t=>t==="*";function gI(t,a){let e=t.split("/"),n=e.length;return e.some(Tw)&&(n+=pI),a&&(n+=fI),e.filter(r=>!Tw(r)).reduce((r,o)=>r+(uI.test(o)?dI:o===""?hI:mI),n)}function yI(t,a){return t.length===a.length&&t.slice(0,-1).every((n,r)=>n===a[r])?t[t.length-1]-a[a.length-1]:0}function vI(t,a,e=!1){let{routesMeta:n}=t,r={},o="/",l=[];for(let d=0;d<n.length;++d){let h=n[d],m=d===n.length-1,p=o==="/"?a:a.slice(o.length)||"/",y=ef({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),b=h.route;if(!y&&m&&e&&!n[n.length-1].route.index&&(y=ef({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:Rs([o,y.pathname]),pathnameBase:CI(Rs([o,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(o=Rs([o,y.pathnameBase]))}return l}function ef(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,n]=bI(t.path,t.caseSensitive,t.end),r=a.match(e);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:n.reduce((m,{paramName:p,isOptional:y},b)=>{if(p==="*"){let S=d[b]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const E=d[b];return y&&!E?m[p]=void 0:m[p]=(E||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:t}}function bI(t,a=!1,e=!0){$a(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,a?void 0:"i"),n]}function wI(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return $a(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function zs(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let e=a.endsWith("/")?a.length-1:a.length,n=t.charAt(e);return n&&n!=="/"?null:t.slice(e)||"/"}function xI(t,a="/"){let{pathname:e,search:n="",hash:r=""}=typeof t=="string"?fo(t):t;return{pathname:e?e.startsWith("/")?e:SI(e,a):a,search:_I(n),hash:II(r)}}function SI(t,a){let e=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function Dp(t,a,e,n){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function EI(t){return t.filter((a,e)=>e===0||a.route.path&&a.route.path.length>0)}function s0(t){let a=EI(t);return a.map((e,n)=>n===a.length-1?e.pathname:e.pathnameBase)}function i0(t,a,e,n=!1){let r;typeof t=="string"?r=fo(t):(r={...t},un(!r.pathname||!r.pathname.includes("?"),Dp("?","pathname","search",r)),un(!r.pathname||!r.pathname.includes("#"),Dp("#","pathname","hash",r)),un(!r.search||!r.search.includes("#"),Dp("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,d;if(l==null)d=e;else{let y=a.length-1;if(!n&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),y-=1;r.pathname=b.join("/")}d=y>=0?a[y]:"/"}let h=xI(r,d),m=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var Rs=t=>t.join("/").replace(/\/\/+/g,"/"),CI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_I=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,II=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Zx=["POST","PUT","PATCH","DELETE"];new Set(Zx);var AI=["GET",...Zx];new Set(AI);var yl=w.createContext(null);yl.displayName="DataRouter";var th=w.createContext(null);th.displayName="DataRouterState";var qx=w.createContext({isTransitioning:!1});qx.displayName="ViewTransition";var TI=w.createContext(new Map);TI.displayName="Fetchers";var MI=w.createContext(null);MI.displayName="Await";var kr=w.createContext(null);kr.displayName="Navigation";var Kc=w.createContext(null);Kc.displayName="Location";var is=w.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var o0=w.createContext(null);o0.displayName="RouteError";function NI(t,{relative:a}={}){un(vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=w.useContext(kr),{hash:r,pathname:o,search:l}=eu(t,{relative:a}),d=o;return e!=="/"&&(d=o==="/"?e:Rs([e,o])),n.createHref({pathname:d,search:l,hash:r})}function vl(){return w.useContext(Kc)!=null}function Hs(){return un(vl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Kc).location}var Qx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vx(t){w.useContext(kr).static||w.useLayoutEffect(t)}function ho(){let{isDataRoute:t}=w.useContext(is);return t?WI():RI()}function RI(){un(vl(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(yl),{basename:a,navigator:e}=w.useContext(kr),{matches:n}=w.useContext(is),{pathname:r}=Hs(),o=JSON.stringify(s0(n)),l=w.useRef(!1);return Vx(()=>{l.current=!0}),w.useCallback((h,m={})=>{if($a(l.current,Qx),!l.current)return;if(typeof h=="number"){e.go(h);return}let p=i0(h,JSON.parse(o),r,m.relative==="path");t==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:Rs([a,p.pathname])),(m.replace?e.replace:e.push)(p,m.state,m)},[a,e,o,r,t])}w.createContext(null);function eu(t,{relative:a}={}){let{matches:e}=w.useContext(is),{pathname:n}=Hs(),r=JSON.stringify(s0(e));return w.useMemo(()=>i0(t,JSON.parse(r),n,a==="path"),[t,r,n,a])}function kI(t,a){return Xx(t,a)}function Xx(t,a,e,n){var x;un(vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(kr),{matches:o}=w.useContext(is),l=o[o.length-1],d=l?l.params:{},h=l?l.pathname:"/",m=l?l.pathnameBase:"/",p=l&&l.route;{let D=p&&p.path||"";Jx(h,!p||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let y=Hs(),b;if(a){let D=typeof a=="string"?fo(a):a;un(m==="/"||((x=D.pathname)==null?void 0:x.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${D.pathname}" was given in the \`location\` prop.`),b=D}else b=y;let E=b.pathname||"/",S=E;if(m!=="/"){let D=m.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(D.length).join("/")}let C=Wx(t,{pathname:S});$a(p||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),$a(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=UI(C&&C.map(D=>Object.assign({},D,{params:Object.assign({},d,D.params),pathname:Rs([m,r.encodeLocation?r.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:Rs([m,r.encodeLocation?r.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,e,n);return a&&_?w.createElement(Kc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},_):_}function LI(){let t=YI(),a=DI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:o},"ErrorBoundary")," or"," ",w.createElement("code",{style:o},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},a),e?w.createElement("pre",{style:r},e):null,l)}var PI=w.createElement(LI,null),OI=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?w.createElement(is.Provider,{value:this.props.routeContext},w.createElement(o0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BI({routeContext:t,match:a,children:e}){let n=w.useContext(yl);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),w.createElement(is.Provider,{value:t},e)}function UI(t,a=[],e=null,n=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(a.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let r=t,o=e==null?void 0:e.errors;if(o!=null){let h=r.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);un(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let l=!1,d=-1;if(e)for(let h=0;h<r.length;h++){let m=r[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:y}=e,b=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){l=!0,d>=0?r=r.slice(0,d+1):r=[r[0]];break}}}return r.reduceRight((h,m,p)=>{let y,b=!1,E=null,S=null;e&&(y=o&&m.route.id?o[m.route.id]:void 0,E=m.route.errorElement||PI,l&&(d<0&&p===0?(Jx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):d===p&&(b=!0,S=m.route.hydrateFallbackElement||null)));let C=a.concat(r.slice(0,p+1)),_=()=>{let x;return y?x=E:b?x=S:m.route.Component?x=w.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,w.createElement(BI,{match:m,routeContext:{outlet:h,matches:C,isDataRoute:e!=null},children:x})};return e&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?w.createElement(OI,{location:e.location,revalidation:e.revalidation,component:E,error:y,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):_()},null)}function l0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zI(t){let a=w.useContext(yl);return un(a,l0(t)),a}function jI(t){let a=w.useContext(th);return un(a,l0(t)),a}function FI(t){let a=w.useContext(is);return un(a,l0(t)),a}function c0(t){let a=FI(t),e=a.matches[a.matches.length-1];return un(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function HI(){return c0("useRouteId")}function YI(){var n;let t=w.useContext(o0),a=jI("useRouteError"),e=c0("useRouteError");return t!==void 0?t:(n=a.errors)==null?void 0:n[e]}function WI(){let{router:t}=zI("useNavigate"),a=c0("useNavigate"),e=w.useRef(!1);return Vx(()=>{e.current=!0}),w.useCallback(async(r,o={})=>{$a(e.current,Qx),e.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:a,...o}))},[t,a])}var Mw={};function Jx(t,a,e){!a&&!Mw[t]&&(Mw[t]=!0,$a(!1,e))}w.memo(GI);function GI({routes:t,future:a,state:e}){return Xx(t,void 0,e,a)}function pd({to:t,replace:a,state:e,relative:n}){un(vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=w.useContext(kr);$a(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=w.useContext(is),{pathname:l}=Hs(),d=ho(),h=i0(t,s0(o),l,n==="path"),m=JSON.stringify(h);return w.useEffect(()=>{d(JSON.parse(m),{replace:a,state:e,relative:n})},[d,m,n,a,e]),null}function qr(t){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $I({basename:t="/",children:a=null,location:e,navigationType:n="POP",navigator:r,static:o=!1}){un(!vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof e=="string"&&(e=fo(e));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:b="default"}=e,E=w.useMemo(()=>{let S=zs(h,l);return S==null?null:{location:{pathname:S,search:m,hash:p,state:y,key:b},navigationType:n}},[l,h,m,p,y,b,n]);return $a(E!=null,`<Router basename="${l}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:w.createElement(kr.Provider,{value:d},w.createElement(Kc.Provider,{children:a,value:E}))}function Nw({children:t,location:a}){return kI(yg(t),a)}function yg(t,a=[]){let e=[];return w.Children.forEach(t,(n,r)=>{if(!w.isValidElement(n))return;let o=[...a,r];if(n.type===w.Fragment){e.push.apply(e,yg(n.props.children,o));return}un(n.type===qr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=yg(n.props.children,o)),e.push(l)}),e}var Bd="get",Ud="application/x-www-form-urlencoded";function nh(t){return t!=null&&typeof t.tagName=="string"}function ZI(t){return nh(t)&&t.tagName.toLowerCase()==="button"}function qI(t){return nh(t)&&t.tagName.toLowerCase()==="form"}function QI(t){return nh(t)&&t.tagName.toLowerCase()==="input"}function VI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XI(t,a){return t.button===0&&(!a||a==="_self")&&!VI(t)}function vg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,e)=>{let n=t[e];return a.concat(Array.isArray(n)?n.map(r=>[e,r]):[[e,n]])},[]))}function JI(t,a){let e=vg(t);return a&&a.forEach((n,r)=>{e.has(r)||a.getAll(r).forEach(o=>{e.append(r,o)})}),e}var gd=null;function KI(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var e5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ap(t){return t!=null&&!e5.has(t)?($a(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ud}"`),null):t}function t5(t,a){let e,n,r,o,l;if(qI(t)){let d=t.getAttribute("action");n=d?zs(d,a):null,e=t.getAttribute("method")||Bd,r=Ap(t.getAttribute("enctype"))||Ud,o=new FormData(t)}else if(ZI(t)||QI(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(n=h?zs(h,a):null,e=t.getAttribute("formmethod")||d.getAttribute("method")||Bd,r=Ap(t.getAttribute("formenctype"))||Ap(d.getAttribute("enctype"))||Ud,o=new FormData(d,t),!KI()){let{name:m,type:p,value:y}=t;if(p==="image"){let b=m?`${m}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else m&&o.append(m,y)}}else{if(nh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Bd,n=null,r=Ud,l=t}return o&&r==="text/plain"&&(l=o,o=void 0),{action:n,method:e.toLowerCase(),encType:r,formData:o,body:l}}function u0(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}async function n5(t,a){if(t.id in a)return a[t.id];try{let e=await import(t.module);return a[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function r5(t,a,e){let n=await Promise.all(t.map(async r=>{let o=a.routes[r.route.id];if(o){let l=await n5(o,e);return l.links?l.links():[]}return[]}));return l5(n.flat(1).filter(a5).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Rw(t,a,e,n,r,o){let l=(h,m)=>e[m]?h.route.id!==e[m].route.id:!0,d=(h,m)=>{var p;return e[m].pathname!==h.pathname||((p=e[m].route.path)==null?void 0:p.endsWith("*"))&&e[m].params["*"]!==h.params["*"]};return o==="assets"?a.filter((h,m)=>l(h,m)||d(h,m)):o==="data"?a.filter((h,m)=>{var y;let p=n.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((y=e[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function s5(t,a,{includeHydrateFallback:e}={}){return i5(t.map(n=>{let r=a.routes[n.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function i5(t){return[...new Set(t)]}function o5(t){let a={},e=Object.keys(t).sort();for(let n of e)a[n]=t[n];return a}function l5(t,a){let e=new Set;return new Set(a),t.reduce((n,r)=>{let o=JSON.stringify(o5(r));return e.has(o)||(e.add(o),n.push({key:o,link:r})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var c5=new Set([100,101,204,205]);function u5(t,a){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":a&&zs(e.pathname,a)==="/"?e.pathname=`${a.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Kx(){let t=w.useContext(yl);return u0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function d5(){let t=w.useContext(th);return u0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var d0=w.createContext(void 0);d0.displayName="FrameworkContext";function e2(){let t=w.useContext(d0);return u0(t,"You must render this element inside a <HydratedRouter> element"),t}function f5(t,a){let e=w.useContext(d0),[n,r]=w.useState(!1),[o,l]=w.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:y}=a,b=w.useRef(null);w.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let C=x=>{x.forEach(D=>{l(D.isIntersecting)})},_=new IntersectionObserver(C,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[t]),w.useEffect(()=>{if(n){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[n]);let E=()=>{r(!0)},S=()=>{r(!1),l(!1)};return e?t!=="intent"?[o,b,{}]:[o,b,{onFocus:pc(d,E),onBlur:pc(h,S),onMouseEnter:pc(m,E),onMouseLeave:pc(p,S),onTouchStart:pc(y,E)}]:[!1,b,{}]}function pc(t,a){return e=>{t&&t(e),e.defaultPrevented||a(e)}}function h5({page:t,...a}){let{router:e}=Kx(),n=w.useMemo(()=>Wx(e.routes,t,e.basename),[e.routes,t,e.basename]);return n?w.createElement(p5,{page:t,matches:n,...a}):null}function m5(t){let{manifest:a,routeModules:e}=e2(),[n,r]=w.useState([]);return w.useEffect(()=>{let o=!1;return r5(t,a,e).then(l=>{o||r(l)}),()=>{o=!0}},[t,a,e]),n}function p5({page:t,matches:a,...e}){let n=Hs(),{manifest:r,routeModules:o}=e2(),{basename:l}=Kx(),{loaderData:d,matches:h}=d5(),m=w.useMemo(()=>Rw(t,a,h,r,n,"data"),[t,a,h,r,n]),p=w.useMemo(()=>Rw(t,a,h,r,n,"assets"),[t,a,h,r,n]),y=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,C=!1;if(a.forEach(x=>{var A;let D=r.routes[x.route.id];!D||!D.hasLoader||(!m.some(k=>k.route.id===x.route.id)&&x.route.id in d&&((A=o[x.route.id])!=null&&A.shouldRevalidate)||D.hasClientLoader?C=!0:S.add(x.route.id))}),S.size===0)return[];let _=u5(t,l);return C&&S.size>0&&_.searchParams.set("_routes",a.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[_.pathname+_.search]},[l,d,n,r,m,a,t,o]),b=w.useMemo(()=>s5(p,r),[p,r]),E=m5(p);return w.createElement(w.Fragment,null,y.map(S=>w.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),b.map(S=>w.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),E.map(({key:S,link:C})=>w.createElement("link",{key:S,...C})))}function g5(...t){return a=>{t.forEach(e=>{typeof e=="function"?e(a):e!=null&&(e.current=a)})}}var t2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{t2&&(window.__reactRouterVersion="7.6.1")}catch{}function y5({basename:t,children:a,window:e}){let n=w.useRef();n.current==null&&(n.current=rI({window:e,v5Compat:!0}));let r=n.current,[o,l]=w.useState({action:r.action,location:r.location}),d=w.useCallback(h=>{w.startTransition(()=>l(h))},[l]);return w.useLayoutEffect(()=>r.listen(d),[r,d]),w.createElement($I,{basename:t,children:a,location:o.location,navigationType:o.action,navigator:r})}var n2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,a2=w.forwardRef(function({onClick:a,discover:e="render",prefetch:n="none",relative:r,reloadDocument:o,replace:l,state:d,target:h,to:m,preventScrollReset:p,viewTransition:y,...b},E){let{basename:S}=w.useContext(kr),C=typeof m=="string"&&n2.test(m),_,x=!1;if(typeof m=="string"&&C&&(_=m,t2))try{let q=new URL(window.location.href),te=m.startsWith("//")?new URL(q.protocol+m):new URL(m),X=zs(te.pathname,S);te.origin===q.origin&&X!=null?m=X+te.search+te.hash:x=!0}catch{$a(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=NI(m,{relative:r}),[A,k,P]=f5(n,b),L=x5(m,{replace:l,state:d,target:h,preventScrollReset:p,relative:r,viewTransition:y});function G(q){a&&a(q),q.defaultPrevented||L(q)}let F=w.createElement("a",{...b,...P,href:_||D,onClick:x||o?a:G,ref:g5(E,k),target:h,"data-discover":!C&&e==="render"?"true":void 0});return A&&!C?w.createElement(w.Fragment,null,F,w.createElement(h5,{page:D})):F});a2.displayName="Link";var v5=w.forwardRef(function({"aria-current":a="page",caseSensitive:e=!1,className:n="",end:r=!1,style:o,to:l,viewTransition:d,children:h,...m},p){let y=eu(l,{relative:m.relative}),b=Hs(),E=w.useContext(th),{navigator:S,basename:C}=w.useContext(kr),_=E!=null&&D5(y)&&d===!0,x=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,D=b.pathname,A=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;e||(D=D.toLowerCase(),A=A?A.toLowerCase():null,x=x.toLowerCase()),A&&C&&(A=zs(A,C)||A);const k=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let P=D===x||!r&&D.startsWith(x)&&D.charAt(k)==="/",L=A!=null&&(A===x||!r&&A.startsWith(x)&&A.charAt(x.length)==="/"),G={isActive:P,isPending:L,isTransitioning:_},F=P?a:void 0,q;typeof n=="function"?q=n(G):q=[n,P?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let te=typeof o=="function"?o(G):o;return w.createElement(a2,{...m,"aria-current":F,className:q,ref:p,style:te,to:l,viewTransition:d},typeof h=="function"?h(G):h)});v5.displayName="NavLink";var b5=w.forwardRef(({discover:t="render",fetcherKey:a,navigate:e,reloadDocument:n,replace:r,state:o,method:l=Bd,action:d,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:y,...b},E)=>{let S=_5(),C=I5(d,{relative:m}),_=l.toLowerCase()==="get"?"get":"post",x=typeof d=="string"&&n2.test(d),D=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let k=A.nativeEvent.submitter,P=(k==null?void 0:k.getAttribute("formmethod"))||l;S(k||A.currentTarget,{fetcherKey:a,method:P,navigate:e,replace:r,state:o,relative:m,preventScrollReset:p,viewTransition:y})};return w.createElement("form",{ref:E,method:_,action:C,onSubmit:n?h:D,...b,"data-discover":!x&&t==="render"?"true":void 0})});b5.displayName="Form";function w5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r2(t){let a=w.useContext(yl);return un(a,w5(t)),a}function x5(t,{target:a,replace:e,state:n,preventScrollReset:r,relative:o,viewTransition:l}={}){let d=ho(),h=Hs(),m=eu(t,{relative:o});return w.useCallback(p=>{if(XI(p,a)){p.preventDefault();let y=e!==void 0?e:Wc(h)===Wc(m);d(t,{replace:y,state:n,preventScrollReset:r,relative:o,viewTransition:l})}},[h,d,m,e,n,a,t,r,o,l])}function S5(t){$a(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=w.useRef(vg(t)),e=w.useRef(!1),n=Hs(),r=w.useMemo(()=>JI(n.search,e.current?null:a.current),[n.search]),o=ho(),l=w.useCallback((d,h)=>{const m=vg(typeof d=="function"?d(r):d);e.current=!0,o("?"+m,h)},[o,r]);return[r,l]}var E5=0,C5=()=>`__${String(++E5)}__`;function _5(){let{router:t}=r2("useSubmit"),{basename:a}=w.useContext(kr),e=HI();return w.useCallback(async(n,r={})=>{let{action:o,method:l,encType:d,formData:h,body:m}=t5(n,a);if(r.navigate===!1){let p=r.fetcherKey||C5();await t.fetch(p,e,r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||l,formEncType:r.encType||d,flushSync:r.flushSync})}else await t.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||l,formEncType:r.encType||d,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,a,e])}function I5(t,{relative:a}={}){let{basename:e}=w.useContext(kr),n=w.useContext(is);un(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),o={...eu(t||".",{relative:a})},l=Hs();if(t==null){o.search=l.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let p=d.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:Rs([e,o.pathname])),Wc(o)}function D5(t,a={}){let e=w.useContext(qx);un(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=r2("useViewTransitionState"),r=eu(t,{relative:a.relative});if(!e.isTransitioning)return!1;let o=zs(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=zs(e.nextLocation.pathname,n)||e.nextLocation.pathname;return ef(r.pathname,l)!=null||ef(r.pathname,o)!=null}[...c5];var s2=Yx();const tu=a0(s2);function ah({gameType:t,size:a=22}){const e={"8 Ball":{emoji:""},"9 Ball":{color:"#FFD700",number:9},"10 Ball":{color:"#2196F3",number:10}};if(t==="8 Ball")return u.createElement("span",{role:"img","aria-label":"8-ball",style:{fontSize:a,verticalAlign:"middle",marginRight:4}},e["8 Ball"].emoji);const{color:n,number:r}=e[t]||{};return!n||!r?null:u.createElement("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:a,height:a,borderRadius:"50%",background:n,color:"#222",fontWeight:"bold",fontSize:a*.65,border:"2px solid #fff",boxShadow:"0 1px 2px #0003",marginRight:4,verticalAlign:"middle"},"aria-label":`${r}-ball`},r)}function qn({open:t,onClose:a,children:e,title:n="Modal",maxWidth:r="500px",className:o=""}){const[l,d]=w.useState({x:0,y:0}),[h,m]=w.useState(!1),p=w.useRef({x:0,y:0});w.useEffect(()=>{t&&d({x:0,y:0})},[t]);const y=S=>{m(!0),p.current={x:S.clientX-l.x,y:S.clientY-l.y},document.body.style.userSelect="none"},b=S=>{h&&d({x:S.clientX-p.current.x,y:S.clientY-p.current.y})},E=()=>{m(!1),document.body.style.userSelect=""};return w.useEffect(()=>(h?(window.addEventListener("mousemove",b),window.addEventListener("mouseup",E)):(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",E)}),[h]),t?u.createElement("div",{className:"modal-overlay",onClick:a,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}},u.createElement("div",{className:`draggable-modal ${o}`,style:{transform:`translate(${l.x}px, ${l.y}px)`,cursor:h?"grabbing":"default",background:"linear-gradient(120deg, #232323 80%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:window.innerWidth<=400?"0":"1.2rem",boxShadow:"0 0 32px #e53e3e, 0 0 40px rgba(0,0,0,0.85)",width:window.innerWidth<=400?"100vw":r==="90vw"?"90vw":"auto",maxWidth:window.innerWidth<=400?"100vw":r,minWidth:0,margin:window.innerWidth<=400?"0":"0 auto",left:0,right:0,animation:"modalBounceIn 0.5s cubic-bezier(.21,1.02,.73,1.01)",padding:0,position:"relative",fontFamily:"inherit",boxSizing:"border-box",height:window.innerWidth<=500?"95vh":"auto",maxHeight:window.innerWidth<=500?"95vh":"85vh",display:"flex",flexDirection:"column"},onClick:S=>S.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":n,tabIndex:-1},u.createElement("div",{className:"modal-header",onMouseDown:y,style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#e53e3e",padding:"1.1rem 1.5rem 0.7rem 1.5rem",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",position:"relative",cursor:"grab",userSelect:"none",gap:"1rem"}},u.createElement("span",{className:"modal-accent-bar",style:{position:"absolute",left:0,top:0,width:"100%",height:"5px",background:"linear-gradient(90deg, #fff0 0%, #e53e3e 60%, #fff0 100%)",borderTopLeftRadius:"1.2rem",borderTopRightRadius:"1.2rem",pointerEvents:"none"}}),u.createElement("h2",{className:"modal-title",style:{margin:0,fontSize:window.innerWidth<=500?"1.1rem":"1.3rem",fontWeight:"bold",textAlign:"center",letterSpacing:"0.02em",color:"#fff",textShadow:"0 1px 12px #000a",zIndex:2,flex:1,wordBreak:"break-word",minWidth:0}},n),u.createElement("button",{className:"modal-close-btn",onClick:a,"aria-label":"Close",style:{background:"none",border:"none",color:"#fff",fontSize:"2em",fontWeight:"bold",cursor:"pointer",zIndex:10,lineHeight:1,transition:"color 0.2s, transform 0.2s",padding:0,marginLeft:"1rem"},onMouseEnter:S=>{S.target.style.color="#ffd6d6",S.target.style.transform="scale(1.2) rotate(10deg)"},onMouseLeave:S=>{S.target.style.color="#fff",S.target.style.transform="scale(1) rotate(0deg)"}},"")),u.createElement("div",{className:"modal-content",style:{...window.innerWidth<=500?{flex:"1 1 auto",minHeight:0,overflowY:"auto"}:{overflowY:"auto"},padding:window.innerWidth<=500?"1rem 1rem 0.8rem 1rem":"1.4rem 1.5rem 1.2rem 1.5rem",background:"none"}},e)),u.createElement("style",{jsx:!0},`
        @keyframes modalBounceIn {
          0% { opacity: 0; transform: scale(0.95) translateY(-40px);}
          70% { opacity: 1; transform: scale(1.02) translateY(8px);}
          100% { opacity: 1; transform: scale(1) translateY(0);}
        }
        
        @media (max-width: 500px) {
          .draggable-modal {
            max-width: 99vw !important;
            border-radius: 0.7rem !important;
          }
          .modal-header {
            padding: 0.7rem 0.7rem 0.5rem 0.7rem !important;
          }
          .modal-content {
            padding: 1rem 0.6rem 0.8rem 0.6rem !important;
          }
        }
        /* Custom scrollbar for modal-content */
        .modal-content::-webkit-scrollbar {
          width: 10px;
        }
        .modal-content::-webkit-scrollbar-thumb {
          background: #e53e3e;
          border-radius: 6px;
        }
        .modal-content::-webkit-scrollbar-track {
          background: #232323;
          border-radius: 6px;
        }
        .modal-content {
          scrollbar-width: thin;
          scrollbar-color: #e53e3e #232323;
        }
      `)):null}function A5(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function i2({open:t,message:a,gameType:e,raceLength:n,day:r,date:o,time:l,location:d,proposalNote:h,confirmationNote:m,phase:p,onClose:y}){if(!t)return null;const b=typeof window<"u"&&window.innerWidth<=500,E=b?"100%":"240px",S=b?"90vw":"240px",C=b?"100%":"220px";return u.createElement(qn,{open:t,onClose:y,title:"Proposal Sent!",maxWidth:S,width:E},u.createElement("div",{style:{textAlign:"center"}},u.createElement("div",{style:{background:"#222",color:"#fff",borderRadius:6,padding:"0.6rem 0.7rem 0.6rem 0.7rem",margin:"0 auto 0.7rem auto",fontWeight:600,fontSize:"0.97rem",textAlign:"center",maxWidth:"220px",width:"100%",wordBreak:"break-word",whiteSpace:"pre-line"}},a),u.createElement("div",{style:{background:"#f8f8f8",color:"#222",borderRadius:8,padding:b?"0.4rem 0.2rem":"0.5rem 0.5rem",margin:"0.7rem auto 0.7rem auto",textAlign:"center",fontSize:b?"0.92rem":"0.95rem",border:"1px solid #ff0000",maxWidth:C,width:"100%"}},u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Phase:")," ",p==="scheduled"?"Phase 1 (Scheduled)":p==="challenge"?"Phase 2 (challenge)":p),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Game Type:")," ",u.createElement(ah,{gameType:e,size:16})," ",e),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Race to:")," ",n),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Day:")," ",r),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Date:")," ",A5(o)),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Time:")," ",l),u.createElement("div",{style:{marginBottom:6}},u.createElement("strong",null,"Location:")," ",d),h&&u.createElement("div",{style:{marginTop:12,padding:"0.5rem 0.7rem",background:"#fffbe6",borderLeft:"3px solid #ffb300",borderRadius:4,color:"#a36c00",fontSize:"0.97rem"}},u.createElement("strong",null,"Opponent's note:")," ",h),m&&u.createElement("div",{style:{marginTop:10,padding:"0.5rem 0.7rem",background:"#e6fff0",borderLeft:"3px solid #00b36b",borderRadius:4,color:"#006b3c",fontSize:"0.97rem"}},u.createElement("strong",null,"Your note:")," ",m)),u.createElement("button",{style:{marginTop:"1.8rem",background:"#ff0000",color:"#fff",border:"none",borderRadius:"8px",padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer"},onClick:y},"Close")))}const Gc={_origin:"https://api.emailjs.com"},T5=(t,a="https://api.emailjs.com")=>{Gc._userID=t,Gc._origin=a},o2=(t,a,e)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class kw{constructor(a){this.status=a.status,this.text=a.responseText}}const l2=(t,a,e={})=>new Promise((n,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:l})=>{const d=new kw(l);d.status===200||d.text==="OK"?n(d):r(d)}),o.addEventListener("error",({target:l})=>{r(new kw(l))}),o.open("POST",Gc._origin+t,!0),Object.keys(e).forEach(l=>{o.setRequestHeader(l,e[l])}),o.send(a)}),M5=(t,a,e,n)=>{const r=n||Gc._userID;return o2(r,t,a),l2("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:t,template_id:a,template_params:e}),{"Content-type":"application/json"})},N5=t=>{let a;if(typeof t=="string"?a=document.querySelector(t):a=t,!a||a.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return a},R5=(t,a,e,n)=>{const r=n||Gc._userID,o=N5(e);o2(r,t,a);const l=new FormData(o);return l.append("lib_version","3.2.0"),l.append("service_id",t),l.append("template_id",a),l.append("user_id",r),l2("/api/v1.0/email/send-form",l)},f0={init:T5,send:M5,sendForm:R5},c2=6048e5,k5=864e5,rh=6e4,nu=36e5,L5=1e3,Lw=Symbol.for("constructDateFrom");function Ht(t,a){return typeof t=="function"?t(a):t&&typeof t=="object"&&Lw in t?t[Lw](a):t instanceof Date?new t.constructor(a):new Date(a)}function Oe(t,a){return Ht(a||t,t)}function Nr(t,a,e){const n=Oe(t,e==null?void 0:e.in);return isNaN(a)?Ht((e==null?void 0:e.in)||t,NaN):(a&&n.setDate(n.getDate()+a),n)}function Rr(t,a,e){const n=Oe(t,e==null?void 0:e.in);if(isNaN(a))return Ht(t,NaN);if(!a)return n;const r=n.getDate(),o=Ht(t,n.getTime());o.setMonth(n.getMonth()+a+1,0);const l=o.getDate();return r>=l?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}function u2(t,a,e){return Ht(t,+Oe(t)+a)}function P5(t,a,e){return u2(t,a*nu)}let O5={};function mo(){return O5}function js(t,a){var d,h,m,p;const e=mo(),n=(a==null?void 0:a.weekStartsOn)??((h=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??e.weekStartsOn??((p=(m=e.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,r=Oe(t,a==null?void 0:a.in),o=r.getDay(),l=(o<n?7:0)+o-n;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function sl(t,a){return js(t,{...a,weekStartsOn:1})}function d2(t,a){const e=Oe(t,a==null?void 0:a.in),n=e.getFullYear(),r=Ht(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=sl(r),l=Ht(e,0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);const d=sl(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=d.getTime()?n:n-1}function tf(t){const a=Oe(t),e=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return e.setUTCFullYear(a.getFullYear()),+t-+e}function os(t,...a){const e=Ht.bind(null,a.find(n=>typeof n=="object"));return a.map(e)}function io(t,a){const e=Oe(t,a==null?void 0:a.in);return e.setHours(0,0,0,0),e}function il(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a),o=io(n),l=io(r),d=+o-tf(o),h=+l-tf(l);return Math.round((d-h)/k5)}function B5(t,a){const e=d2(t,a),n=Ht(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),sl(n)}function bg(t,a,e){const n=Oe(t,e==null?void 0:e.in);return n.setTime(n.getTime()+a*rh),n}function h0(t,a,e){return Rr(t,a*3,e)}function U5(t,a,e){return u2(t,a*1e3)}function nf(t,a,e){return Nr(t,a*7,e)}function ks(t,a,e){return Rr(t,a*12,e)}function Pw(t,a){let e,n=a==null?void 0:a.in;return t.forEach(r=>{!n&&typeof r=="object"&&(n=Ht.bind(null,r));const o=Oe(r,n);(!e||e<o||isNaN(+o))&&(e=o)}),Ht(n,e||NaN)}function Ow(t,a){let e,n=a==null?void 0:a.in;return t.forEach(r=>{!n&&typeof r=="object"&&(n=Ht.bind(null,r));const o=Oe(r,n);(!e||e>o||isNaN(+o))&&(e=o)}),Ht(n,e||NaN)}function z5(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a);return+io(n)==+io(r)}function Ls(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function af(t){return!(!Ls(t)&&typeof t!="number"||isNaN(+Oe(t)))}function rf(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a),o=n.getFullYear()-r.getFullYear(),l=n.getMonth()-r.getMonth();return o*12+l}function to(t,a){const e=Oe(t,a==null?void 0:a.in);return Math.trunc(e.getMonth()/3)+1}function sf(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a),o=n.getFullYear()-r.getFullYear(),l=to(n)-to(r);return o*4+l}function of(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a);return n.getFullYear()-r.getFullYear()}function f2(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a),o=Bw(n,r),l=Math.abs(il(n,r));n.setDate(n.getDate()-o*l);const d=+(Bw(n,r)===-o),h=o*(l-d);return h===0?0:h}function Bw(t,a){const e=t.getFullYear()-a.getFullYear()||t.getMonth()-a.getMonth()||t.getDate()-a.getDate()||t.getHours()-a.getHours()||t.getMinutes()-a.getMinutes()||t.getSeconds()-a.getSeconds()||t.getMilliseconds()-a.getMilliseconds();return e<0?-1:e>0?1:e}function j5(t){return a=>{const e=Math.trunc,n=e(a);return n===0?0:n}}function F5(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a),o=(+n-+r)/nu;return j5()(o)}function h2(t,a){const e=Oe(t,a==null?void 0:a.in);return e.setHours(23,59,59,999),e}function m2(t,a){const e=Oe(t,a==null?void 0:a.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function wg(t,a){const e=Oe(t,a==null?void 0:a.in),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function p2(t,a){const e=Oe(t,a==null?void 0:a.in);return e.setDate(1),e.setHours(0,0,0,0),e}function g2(t,a){const e=Oe(t,a==null?void 0:a.in),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function sh(t,a){const e=Oe(t,a==null?void 0:a.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function H5(t,a){var d,h;const e=mo(),n=e.weekStartsOn??((h=(d=e.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=Oe(t,a==null?void 0:a.in),o=r.getDay(),l=(o<n?-7:0)+6-(o-n);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}const Y5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W5=(t,a,e)=>{let n;const r=Y5[t];return typeof r=="string"?n=r:a===1?n=r.one:n=r.other.replace("{{count}}",a.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function Tp(t){return(a={})=>{const e=a.width?String(a.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const G5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Z5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},q5={date:Tp({formats:G5,defaultWidth:"full"}),time:Tp({formats:$5,defaultWidth:"full"}),dateTime:Tp({formats:Z5,defaultWidth:"full"})},Q5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V5=(t,a,e,n)=>Q5[t];function gc(t){return(a,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let r;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=e!=null&&e.width?String(e.width):l;r=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=e!=null&&e.width?String(e.width):t.defaultWidth;r=t.values[d]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(a):a;return r[o]}}const X5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},J5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eD={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aD=(t,a)=>{const e=Number(t),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},rD={ordinalNumber:aD,era:gc({values:X5,defaultWidth:"wide"}),quarter:gc({values:J5,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gc({values:K5,defaultWidth:"wide"}),day:gc({values:eD,defaultWidth:"wide"}),dayPeriod:gc({values:tD,defaultWidth:"wide",formattingValues:nD,defaultFormattingWidth:"wide"})};function yc(t){return(a,e={})=>{const n=e.width,r=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=a.match(r);if(!o)return null;const l=o[0],d=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(d)?iD(d,y=>y.test(l)):sD(d,y=>y.test(l));let m;m=t.valueCallback?t.valueCallback(h):h,m=e.valueCallback?e.valueCallback(m):m;const p=a.slice(l.length);return{value:m,rest:p}}}function sD(t,a){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&a(t[e]))return e}function iD(t,a){for(let e=0;e<t.length;e++)if(a(t[e]))return e}function oD(t){return(a,e={})=>{const n=a.match(t.matchPattern);if(!n)return null;const r=n[0],o=a.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=e.valueCallback?e.valueCallback(l):l;const d=a.slice(r.length);return{value:l,rest:d}}}const lD=/^(\d+)(th|st|nd|rd)?/i,cD=/\d+/i,uD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dD={any:[/^b/i,/^(a|c)/i]},fD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hD={any:[/1/i,/2/i,/3/i,/4/i]},mD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wD={ordinalNumber:oD({matchPattern:lD,parsePattern:cD,valueCallback:t=>parseInt(t,10)}),era:yc({matchPatterns:uD,defaultMatchWidth:"wide",parsePatterns:dD,defaultParseWidth:"any"}),quarter:yc({matchPatterns:fD,defaultMatchWidth:"wide",parsePatterns:hD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yc({matchPatterns:mD,defaultMatchWidth:"wide",parsePatterns:pD,defaultParseWidth:"any"}),day:yc({matchPatterns:gD,defaultMatchWidth:"wide",parsePatterns:yD,defaultParseWidth:"any"}),dayPeriod:yc({matchPatterns:vD,defaultMatchWidth:"any",parsePatterns:bD,defaultParseWidth:"any"})},y2={code:"en-US",formatDistance:W5,formatLong:q5,formatRelative:V5,localize:rD,match:wD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xD(t,a){const e=Oe(t,a==null?void 0:a.in);return il(e,sh(e))+1}function m0(t,a){const e=Oe(t,a==null?void 0:a.in),n=+sl(e)-+B5(e);return Math.round(n/c2)+1}function p0(t,a){var p,y,b,E;const e=Oe(t,a==null?void 0:a.in),n=e.getFullYear(),r=mo(),o=(a==null?void 0:a.firstWeekContainsDate)??((y=(p=a==null?void 0:a.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??r.firstWeekContainsDate??((E=(b=r.locale)==null?void 0:b.options)==null?void 0:E.firstWeekContainsDate)??1,l=Ht((a==null?void 0:a.in)||t,0);l.setFullYear(n+1,0,o),l.setHours(0,0,0,0);const d=js(l,a),h=Ht((a==null?void 0:a.in)||t,0);h.setFullYear(n,0,o),h.setHours(0,0,0,0);const m=js(h,a);return+e>=+d?n+1:+e>=+m?n:n-1}function SD(t,a){var d,h,m,p;const e=mo(),n=(a==null?void 0:a.firstWeekContainsDate)??((h=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??e.firstWeekContainsDate??((p=(m=e.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,r=p0(t,a),o=Ht((a==null?void 0:a.in)||t,0);return o.setFullYear(r,0,n),o.setHours(0,0,0,0),js(o,a)}function v2(t,a){const e=Oe(t,a==null?void 0:a.in),n=+js(e,a)-+SD(e,a);return Math.round(n/c2)+1}function jt(t,a){const e=t<0?"-":"",n=Math.abs(t).toString().padStart(a,"0");return e+n}const gi={y(t,a){const e=t.getFullYear(),n=e>0?e:1-e;return jt(a==="yy"?n%100:n,a.length)},M(t,a){const e=t.getMonth();return a==="M"?String(e+1):jt(e+1,2)},d(t,a){return jt(t.getDate(),a.length)},a(t,a){const e=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,a){return jt(t.getHours()%12||12,a.length)},H(t,a){return jt(t.getHours(),a.length)},m(t,a){return jt(t.getMinutes(),a.length)},s(t,a){return jt(t.getSeconds(),a.length)},S(t,a){const e=a.length,n=t.getMilliseconds(),r=Math.trunc(n*Math.pow(10,e-3));return jt(r,a.length)}},qo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Uw={G:function(t,a,e){const n=t.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(t,a,e){if(a==="yo"){const n=t.getFullYear(),r=n>0?n:1-n;return e.ordinalNumber(r,{unit:"year"})}return gi.y(t,a)},Y:function(t,a,e,n){const r=p0(t,n),o=r>0?r:1-r;if(a==="YY"){const l=o%100;return jt(l,2)}return a==="Yo"?e.ordinalNumber(o,{unit:"year"}):jt(o,a.length)},R:function(t,a){const e=d2(t);return jt(e,a.length)},u:function(t,a){const e=t.getFullYear();return jt(e,a.length)},Q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return jt(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,a,e){const n=Math.ceil((t.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return jt(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,a,e){const n=t.getMonth();switch(a){case"M":case"MM":return gi.M(t,a);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(t,a,e){const n=t.getMonth();switch(a){case"L":return String(n+1);case"LL":return jt(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(t,a,e,n){const r=v2(t,n);return a==="wo"?e.ordinalNumber(r,{unit:"week"}):jt(r,a.length)},I:function(t,a,e){const n=m0(t);return a==="Io"?e.ordinalNumber(n,{unit:"week"}):jt(n,a.length)},d:function(t,a,e){return a==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):gi.d(t,a)},D:function(t,a,e){const n=xD(t);return a==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):jt(n,a.length)},E:function(t,a,e){const n=t.getDay();switch(a){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(t,a,e,n){const r=t.getDay(),o=(r-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(o);case"ee":return jt(o,2);case"eo":return e.ordinalNumber(o,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(t,a,e,n){const r=t.getDay(),o=(r-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(o);case"cc":return jt(o,a.length);case"co":return e.ordinalNumber(o,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(t,a,e){const n=t.getDay(),r=n===0?7:n;switch(a){case"i":return String(r);case"ii":return jt(r,a.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(t,a,e){const r=t.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,a,e){const n=t.getHours();let r;switch(n===12?r=qo.noon:n===0?r=qo.midnight:r=n/12>=1?"pm":"am",a){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,a,e){const n=t.getHours();let r;switch(n>=17?r=qo.evening:n>=12?r=qo.afternoon:n>=4?r=qo.morning:r=qo.night,a){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,a,e){if(a==="ho"){let n=t.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return gi.h(t,a)},H:function(t,a,e){return a==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):gi.H(t,a)},K:function(t,a,e){const n=t.getHours()%12;return a==="Ko"?e.ordinalNumber(n,{unit:"hour"}):jt(n,a.length)},k:function(t,a,e){let n=t.getHours();return n===0&&(n=24),a==="ko"?e.ordinalNumber(n,{unit:"hour"}):jt(n,a.length)},m:function(t,a,e){return a==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):gi.m(t,a)},s:function(t,a,e){return a==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):gi.s(t,a)},S:function(t,a){return gi.S(t,a)},X:function(t,a,e){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return jw(n);case"XXXX":case"XX":return qi(n);case"XXXXX":case"XXX":default:return qi(n,":")}},x:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"x":return jw(n);case"xxxx":case"xx":return qi(n);case"xxxxx":case"xxx":default:return qi(n,":")}},O:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+zw(n,":");case"OOOO":default:return"GMT"+qi(n,":")}},z:function(t,a,e){const n=t.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+zw(n,":");case"zzzz":default:return"GMT"+qi(n,":")}},t:function(t,a,e){const n=Math.trunc(+t/1e3);return jt(n,a.length)},T:function(t,a,e){return jt(+t,a.length)}};function zw(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),r=Math.trunc(n/60),o=n%60;return o===0?e+String(r):e+String(r)+a+jt(o,2)}function jw(t,a){return t%60===0?(t>0?"-":"+")+jt(Math.abs(t)/60,2):qi(t,a)}function qi(t,a=""){const e=t>0?"-":"+",n=Math.abs(t),r=jt(Math.trunc(n/60),2),o=jt(n%60,2);return e+r+a+o}const Fw=(t,a)=>{switch(t){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},b2=(t,a)=>{switch(t){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},ED=(t,a)=>{const e=t.match(/(P+)(p+)?/)||[],n=e[1],r=e[2];if(!r)return Fw(t,a);let o;switch(n){case"P":o=a.dateTime({width:"short"});break;case"PP":o=a.dateTime({width:"medium"});break;case"PPP":o=a.dateTime({width:"long"});break;case"PPPP":default:o=a.dateTime({width:"full"});break}return o.replace("{{date}}",Fw(n,a)).replace("{{time}}",b2(r,a))},xg={p:b2,P:ED},CD=/^D+$/,_D=/^Y+$/,ID=["D","DD","YY","YYYY"];function DD(t){return CD.test(t)}function AD(t){return _D.test(t)}function TD(t,a,e){const n=MD(t,a,e);if(console.warn(n),ID.includes(t))throw new RangeError(n)}function MD(t,a,e){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${a}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ND=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kD=/^'([^]*?)'?$/,LD=/''/g,PD=/[a-zA-Z]/;function Wa(t,a,e){var p,y,b,E,S,C,_,x;const n=mo(),r=(e==null?void 0:e.locale)??n.locale??y2,o=(e==null?void 0:e.firstWeekContainsDate)??((y=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:y.firstWeekContainsDate)??n.firstWeekContainsDate??((E=(b=n.locale)==null?void 0:b.options)==null?void 0:E.firstWeekContainsDate)??1,l=(e==null?void 0:e.weekStartsOn)??((C=(S=e==null?void 0:e.locale)==null?void 0:S.options)==null?void 0:C.weekStartsOn)??n.weekStartsOn??((x=(_=n.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,d=Oe(t,e==null?void 0:e.in);if(!af(d))throw new RangeError("Invalid time value");let h=a.match(RD).map(D=>{const A=D[0];if(A==="p"||A==="P"){const k=xg[A];return k(D,r.formatLong)}return D}).join("").match(ND).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const A=D[0];if(A==="'")return{isToken:!1,value:OD(D)};if(Uw[A])return{isToken:!0,value:D};if(A.match(PD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:D}});r.localize.preprocessor&&(h=r.localize.preprocessor(d,h));const m={firstWeekContainsDate:o,weekStartsOn:l,locale:r};return h.map(D=>{if(!D.isToken)return D.value;const A=D.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&AD(A)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&DD(A))&&TD(A,a,String(t));const k=Uw[A[0]];return k(d,A,r.localize,m)}).join("")}function OD(t){const a=t.match(kD);return a?a[1].replace(LD,"'"):t}function Hw(t,a){return Oe(t,a==null?void 0:a.in).getDate()}function BD(t,a){return Oe(t,a==null?void 0:a.in).getDay()}function UD(t,a){const e=Oe(t,a==null?void 0:a.in),n=e.getFullYear(),r=e.getMonth(),o=Ht(e,0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}function zD(){return Object.assign({},mo())}function Ps(t,a){return Oe(t,a==null?void 0:a.in).getHours()}function jD(t,a){const e=Oe(t,a==null?void 0:a.in).getDay();return e===0?7:e}function Os(t,a){return Oe(t,a==null?void 0:a.in).getMinutes()}function ha(t,a){return Oe(t,a==null?void 0:a.in).getMonth()}function Ai(t){return Oe(t).getSeconds()}function Sg(t){return+Oe(t)}function pt(t,a){return Oe(t,a==null?void 0:a.in).getFullYear()}function Fs(t,a){return+Oe(t)>+Oe(a)}function oo(t,a){return+Oe(t)<+Oe(a)}function FD(t,a){return+Oe(t)==+Oe(a)}function HD(t,a){const e=YD(a)?new a(0):Ht(a,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}function YD(t){var a;return typeof t=="function"&&((a=t.prototype)==null?void 0:a.constructor)===t}const WD=10;class w2{constructor(){Re(this,"subPriority",0)}validate(a,e){return!0}}class GD extends w2{constructor(a,e,n,r,o){super(),this.value=a,this.validateValue=e,this.setValue=n,this.priority=r,o&&(this.subPriority=o)}validate(a,e){return this.validateValue(a,this.value,e)}set(a,e,n){return this.setValue(a,e,this.value,n)}}class $D extends w2{constructor(e,n){super();Re(this,"priority",WD);Re(this,"subPriority",-1);this.context=e||(r=>Ht(n,r))}set(e,n){return n.timestampIsSet?e:Ht(e,HD(e,this.context))}}class Lt{run(a,e,n,r){const o=this.parse(a,e,n,r);return o?{setter:new GD(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(a,e,n){return!0}}class ZD extends Lt{constructor(){super(...arguments);Re(this,"priority",140);Re(this,"incompatibleTokens",["R","u","t","T"])}parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}const In={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Kr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Dn(t,a){return t&&{value:a(t.value),rest:t.rest}}function mn(t,a){const e=a.match(t);return e?{value:parseInt(e[0],10),rest:a.slice(e[0].length)}:null}function es(t,a){const e=a.match(t);if(!e)return null;if(e[0]==="Z")return{value:0,rest:a.slice(1)};const n=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,l=e[5]?parseInt(e[5],10):0;return{value:n*(r*nu+o*rh+l*L5),rest:a.slice(e[0].length)}}function x2(t){return mn(In.anyDigitsSigned,t)}function wn(t,a){switch(t){case 1:return mn(In.singleDigit,a);case 2:return mn(In.twoDigits,a);case 3:return mn(In.threeDigits,a);case 4:return mn(In.fourDigits,a);default:return mn(new RegExp("^\\d{1,"+t+"}"),a)}}function lf(t,a){switch(t){case 1:return mn(In.singleDigitSigned,a);case 2:return mn(In.twoDigitsSigned,a);case 3:return mn(In.threeDigitsSigned,a);case 4:return mn(In.fourDigitsSigned,a);default:return mn(new RegExp("^-?\\d{1,"+t+"}"),a)}}function g0(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function S2(t,a){const e=a>0,n=e?a:1-a;let r;if(n<=50)r=t||100;else{const o=n+50,l=Math.trunc(o/100)*100,d=t>=o%100;r=t+l-(d?100:0)}return e?r:1-r}function E2(t){return t%400===0||t%4===0&&t%100!==0}class qD extends Lt{constructor(){super(...arguments);Re(this,"priority",130);Re(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,n,r){const o=l=>({year:l,isTwoDigitYear:n==="yy"});switch(n){case"y":return Dn(wn(4,e),o);case"yo":return Dn(r.ordinalNumber(e,{unit:"year"}),o);default:return Dn(wn(n.length,e),o)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const o=e.getFullYear();if(r.isTwoDigitYear){const d=S2(r.year,o);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const l=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}}class QD extends Lt{constructor(){super(...arguments);Re(this,"priority",130);Re(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,n,r){const o=l=>({year:l,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Dn(wn(4,e),o);case"Yo":return Dn(r.ordinalNumber(e,{unit:"year"}),o);default:return Dn(wn(n.length,e),o)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,o){const l=p0(e,o);if(r.isTwoDigitYear){const h=S2(r.year,l);return e.setFullYear(h,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),js(e,o)}const d=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(d,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),js(e,o)}}class VD extends Lt{constructor(){super(...arguments);Re(this,"priority",130);Re(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,n){return lf(n==="R"?4:n.length,e)}set(e,n,r){const o=Ht(e,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),sl(o)}}class XD extends Lt{constructor(){super(...arguments);Re(this,"priority",130);Re(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,n){return lf(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}}class JD extends Lt{constructor(){super(...arguments);Re(this,"priority",120);Re(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,r){switch(n){case"Q":case"QQ":return wn(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class KD extends Lt{constructor(){super(...arguments);Re(this,"priority",120);Re(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,n,r){switch(n){case"q":case"qq":return wn(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}}class eA extends Lt{constructor(){super(...arguments);Re(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Re(this,"priority",110)}parse(e,n,r){const o=l=>l-1;switch(n){case"M":return Dn(mn(In.month,e),o);case"MM":return Dn(wn(2,e),o);case"Mo":return Dn(r.ordinalNumber(e,{unit:"month"}),o);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class tA extends Lt{constructor(){super(...arguments);Re(this,"priority",110);Re(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,n,r){const o=l=>l-1;switch(n){case"L":return Dn(mn(In.month,e),o);case"LL":return Dn(wn(2,e),o);case"Lo":return Dn(r.ordinalNumber(e,{unit:"month"}),o);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}function nA(t,a,e){const n=Oe(t,e==null?void 0:e.in),r=v2(n,e)-a;return n.setDate(n.getDate()-r*7),Oe(n,e==null?void 0:e.in)}class aA extends Lt{constructor(){super(...arguments);Re(this,"priority",100);Re(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,n,r){switch(n){case"w":return mn(In.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return wn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,o){return js(nA(e,r,o),o)}}function rA(t,a,e){const n=Oe(t,e==null?void 0:e.in),r=m0(n,e)-a;return n.setDate(n.getDate()-r*7),n}class sA extends Lt{constructor(){super(...arguments);Re(this,"priority",100);Re(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,n,r){switch(n){case"I":return mn(In.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return wn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return sl(rA(e,r))}}const iA=[31,28,31,30,31,30,31,31,30,31,30,31],oA=[31,29,31,30,31,30,31,31,30,31,30,31];class lA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"subPriority",1);Re(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,n,r){switch(n){case"d":return mn(In.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return wn(n.length,e)}}validate(e,n){const r=e.getFullYear(),o=E2(r),l=e.getMonth();return o?n>=1&&n<=oA[l]:n>=1&&n<=iA[l]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}}class cA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"subpriority",1);Re(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,n,r){switch(n){case"D":case"DD":return mn(In.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return wn(n.length,e)}}validate(e,n){const r=e.getFullYear();return E2(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}}function y0(t,a,e){var y,b,E,S;const n=mo(),r=(e==null?void 0:e.weekStartsOn)??((b=(y=e==null?void 0:e.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((S=(E=n.locale)==null?void 0:E.options)==null?void 0:S.weekStartsOn)??0,o=Oe(t,e==null?void 0:e.in),l=o.getDay(),h=(a%7+7)%7,m=7-r,p=a<0||a>6?a-(l+m)%7:(h+m)%7-(l+m)%7;return Nr(o,p,e)}class uA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,o){return e=y0(e,r,o),e.setHours(0,0,0,0),e}}class dA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,n,r,o){const l=d=>{const h=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+h};switch(n){case"e":case"ee":return Dn(wn(n.length,e),l);case"eo":return Dn(r.ordinalNumber(e,{unit:"day"}),l);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,o){return e=y0(e,r,o),e.setHours(0,0,0,0),e}}class fA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,n,r,o){const l=d=>{const h=Math.floor((d-1)/7)*7;return(d+o.weekStartsOn+6)%7+h};switch(n){case"c":case"cc":return Dn(wn(n.length,e),l);case"co":return Dn(r.ordinalNumber(e,{unit:"day"}),l);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,o){return e=y0(e,r,o),e.setHours(0,0,0,0),e}}function hA(t,a,e){const n=Oe(t,e==null?void 0:e.in),r=jD(n,e),o=a-r;return Nr(n,o,e)}class mA extends Lt{constructor(){super(...arguments);Re(this,"priority",90);Re(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,n,r){const o=l=>l===0?7:l;switch(n){case"i":case"ii":return wn(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Dn(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return Dn(r.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return Dn(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return Dn(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=hA(e,r),e.setHours(0,0,0,0),e}}class pA extends Lt{constructor(){super(...arguments);Re(this,"priority",80);Re(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(g0(r),0,0,0),e}}class gA extends Lt{constructor(){super(...arguments);Re(this,"priority",80);Re(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(g0(r),0,0,0),e}}class yA extends Lt{constructor(){super(...arguments);Re(this,"priority",80);Re(this,"incompatibleTokens",["a","b","t","T"])}parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(g0(r),0,0,0),e}}class vA extends Lt{constructor(){super(...arguments);Re(this,"priority",70);Re(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,n,r){switch(n){case"h":return mn(In.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return wn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const o=e.getHours()>=12;return o&&r<12?e.setHours(r+12,0,0,0):!o&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}}class bA extends Lt{constructor(){super(...arguments);Re(this,"priority",70);Re(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,n,r){switch(n){case"H":return mn(In.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return wn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}}class wA extends Lt{constructor(){super(...arguments);Re(this,"priority",70);Re(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,n,r){switch(n){case"K":return mn(In.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return wn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}}class xA extends Lt{constructor(){super(...arguments);Re(this,"priority",70);Re(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,n,r){switch(n){case"k":return mn(In.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return wn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const o=r<=24?r%24:r;return e.setHours(o,0,0,0),e}}class SA extends Lt{constructor(){super(...arguments);Re(this,"priority",60);Re(this,"incompatibleTokens",["t","T"])}parse(e,n,r){switch(n){case"m":return mn(In.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return wn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}}class EA extends Lt{constructor(){super(...arguments);Re(this,"priority",50);Re(this,"incompatibleTokens",["t","T"])}parse(e,n,r){switch(n){case"s":return mn(In.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return wn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}}class CA extends Lt{constructor(){super(...arguments);Re(this,"priority",30);Re(this,"incompatibleTokens",["t","T"])}parse(e,n){const r=o=>Math.trunc(o*Math.pow(10,-n.length+3));return Dn(wn(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}}class _A extends Lt{constructor(){super(...arguments);Re(this,"priority",10);Re(this,"incompatibleTokens",["t","T","x"])}parse(e,n){switch(n){case"X":return es(Kr.basicOptionalMinutes,e);case"XX":return es(Kr.basic,e);case"XXXX":return es(Kr.basicOptionalSeconds,e);case"XXXXX":return es(Kr.extendedOptionalSeconds,e);case"XXX":default:return es(Kr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Ht(e,e.getTime()-tf(e)-r)}}class IA extends Lt{constructor(){super(...arguments);Re(this,"priority",10);Re(this,"incompatibleTokens",["t","T","X"])}parse(e,n){switch(n){case"x":return es(Kr.basicOptionalMinutes,e);case"xx":return es(Kr.basic,e);case"xxxx":return es(Kr.basicOptionalSeconds,e);case"xxxxx":return es(Kr.extendedOptionalSeconds,e);case"xxx":default:return es(Kr.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Ht(e,e.getTime()-tf(e)-r)}}class DA extends Lt{constructor(){super(...arguments);Re(this,"priority",40);Re(this,"incompatibleTokens","*")}parse(e){return x2(e)}set(e,n,r){return[Ht(e,r*1e3),{timestampIsSet:!0}]}}class AA extends Lt{constructor(){super(...arguments);Re(this,"priority",20);Re(this,"incompatibleTokens","*")}parse(e){return x2(e)}set(e,n,r){return[Ht(e,r),{timestampIsSet:!0}]}}const TA={G:new ZD,y:new qD,Y:new QD,R:new VD,u:new XD,Q:new JD,q:new KD,M:new eA,L:new tA,w:new aA,I:new sA,d:new lA,D:new cA,E:new uA,e:new dA,c:new fA,i:new mA,a:new pA,b:new gA,B:new yA,h:new vA,H:new bA,K:new wA,k:new xA,m:new SA,s:new EA,S:new CA,X:new _A,x:new IA,t:new DA,T:new AA},MA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RA=/^'([^]*?)'?$/,kA=/''/g,LA=/\S/,PA=/[a-zA-Z]/;function OA(t,a,e,n){var _,x,D,A,k,P,L,G;const r=()=>Ht((n==null?void 0:n.in)||e,NaN),o=zD(),l=(n==null?void 0:n.locale)??o.locale??y2,d=(n==null?void 0:n.firstWeekContainsDate)??((x=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:x.firstWeekContainsDate)??o.firstWeekContainsDate??((A=(D=o.locale)==null?void 0:D.options)==null?void 0:A.firstWeekContainsDate)??1,h=(n==null?void 0:n.weekStartsOn)??((P=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:P.weekStartsOn)??o.weekStartsOn??((G=(L=o.locale)==null?void 0:L.options)==null?void 0:G.weekStartsOn)??0;if(!a)return t?r():Oe(e,n==null?void 0:n.in);const m={firstWeekContainsDate:d,weekStartsOn:h,locale:l},p=[new $D(n==null?void 0:n.in,e)],y=a.match(NA).map(F=>{const q=F[0];if(q in xg){const te=xg[q];return te(F,l.formatLong)}return F}).join("").match(MA),b=[];for(let F of y){const q=F[0],te=TA[q];if(te){const{incompatibleTokens:X}=te;if(Array.isArray(X)){const ee=b.find(j=>X.includes(j.token)||j.token===q);if(ee)throw new RangeError(`The format string mustn't contain \`${ee.fullToken}\` and \`${F}\` at the same time`)}else if(te.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${F}\` and any other token at the same time`);b.push({token:q,fullToken:F});const se=te.run(t,F,l.match,m);if(!se)return r();p.push(se.setter),t=se.rest}else{if(q.match(PA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");if(F==="''"?F="'":q==="'"&&(F=BA(F)),t.indexOf(F)===0)t=t.slice(F.length);else return r()}}if(t.length>0&&LA.test(t))return r();const E=p.map(F=>F.priority).sort((F,q)=>q-F).filter((F,q,te)=>te.indexOf(F)===q).map(F=>p.filter(q=>q.priority===F).sort((q,te)=>te.subPriority-q.subPriority)).map(F=>F[0]);let S=Oe(e,n==null?void 0:n.in);if(isNaN(+S))return r();const C={};for(const F of E){if(!F.validate(S,m))return r();const q=F.set(S,C,m);Array.isArray(q)?(S=q[0],Object.assign(C,q[1])):S=q}return S}function BA(t){return t.match(RA)[1].replace(kA,"'")}function UA(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function zA(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a);return+wg(n)==+wg(r)}function jA(t,a,e){const[n,r]=os(e==null?void 0:e.in,t,a);return n.getFullYear()===r.getFullYear()}function $c(t,a,e){const n=+Oe(t,e==null?void 0:e.in),[r,o]=[+Oe(a.start,e==null?void 0:e.in),+Oe(a.end,e==null?void 0:e.in)].sort((l,d)=>l-d);return n>=r&&n<=o}function FA(t,a,e){return Nr(t,-1,e)}function C2(t,a){const e=()=>Ht(a==null?void 0:a.in,NaN),r=GA(t);let o;if(r.date){const m=$A(r.date,2);o=ZA(m.restDateString,m.year)}if(!o||isNaN(+o))return e();const l=+o;let d=0,h;if(r.time&&(d=qA(r.time),isNaN(d)))return e();if(r.timezone){if(h=QA(r.timezone),isNaN(h))return e()}else{const m=new Date(l+d),p=Oe(0,a==null?void 0:a.in);return p.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),p.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),p}return Oe(l+d+h,a==null?void 0:a.in)}const yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},HA=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,YA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,WA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function GA(t){const a={},e=t.split(yd.dateTimeDelimiter);let n;if(e.length>2)return a;if(/:/.test(e[0])?n=e[0]:(a.date=e[0],n=e[1],yd.timeZoneDelimiter.test(a.date)&&(a.date=t.split(yd.timeZoneDelimiter)[0],n=t.substr(a.date.length,t.length))),n){const r=yd.timezone.exec(n);r?(a.time=n.replace(r[1],""),a.timezone=r[1]):a.time=n}return a}function $A(t,a){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),n=t.match(e);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((n[1]||n[2]).length)}}function ZA(t,a){if(a===null)return new Date(NaN);const e=t.match(HA);if(!e)return new Date(NaN);const n=!!e[4],r=vc(e[1]),o=vc(e[2])-1,l=vc(e[3]),d=vc(e[4]),h=vc(e[5])-1;if(n)return eT(a,d,h)?VA(a,d,h):new Date(NaN);{const m=new Date(0);return!JA(a,o,l)||!KA(a,r)?new Date(NaN):(m.setUTCFullYear(a,o,Math.max(r,l)),m)}}function vc(t){return t?parseInt(t):1}function qA(t){const a=t.match(YA);if(!a)return NaN;const e=Mp(a[1]),n=Mp(a[2]),r=Mp(a[3]);return tT(e,n,r)?e*nu+n*rh+r*1e3:NaN}function Mp(t){return t&&parseFloat(t.replace(",","."))||0}function QA(t){if(t==="Z")return 0;const a=t.match(WA);if(!a)return 0;const e=a[1]==="+"?-1:1,n=parseInt(a[2]),r=a[3]&&parseInt(a[3])||0;return nT(n,r)?e*(n*nu+r*rh):NaN}function VA(t,a,e){const n=new Date(0);n.setUTCFullYear(t,0,4);const r=n.getUTCDay()||7,o=(a-1)*7+e+1-r;return n.setUTCDate(n.getUTCDate()+o),n}const XA=[31,null,31,30,31,30,31,31,30,31,30,31];function _2(t){return t%400===0||t%4===0&&t%100!==0}function JA(t,a,e){return a>=0&&a<=11&&e>=1&&e<=(XA[a]||(_2(t)?29:28))}function KA(t,a){return a>=1&&a<=(_2(t)?366:365)}function eT(t,a,e){return a>=1&&a<=53&&e>=0&&e<=6}function tT(t,a,e){return t===24?a===0&&e===0:e>=0&&e<60&&a>=0&&a<60&&t>=0&&t<25}function nT(t,a){return a>=0&&a<=59}function gr(t,a,e){const n=Oe(t,e==null?void 0:e.in),r=n.getFullYear(),o=n.getDate(),l=Ht(t,0);l.setFullYear(r,a,15),l.setHours(0,0,0,0);const d=UD(l);return n.setMonth(a,Math.min(o,d)),n}function zd(t,a,e){const n=Oe(t,e==null?void 0:e.in);return n.setHours(a),n}function jd(t,a,e){const n=Oe(t,e==null?void 0:e.in);return n.setMinutes(a),n}function Xo(t,a,e){const n=Oe(t,e==null?void 0:e.in),r=Math.trunc(n.getMonth()/3)+1,o=a-r;return gr(n,n.getMonth()+o*3)}function Fd(t,a,e){const n=Oe(t,e==null?void 0:e.in);return n.setSeconds(a),n}function Xr(t,a,e){const n=Oe(t,e==null?void 0:e.in);return isNaN(+n)?Ht(t,NaN):(n.setFullYear(a),n)}function no(t,a,e){return Rr(t,-a,e)}function I2(t,a,e){return h0(t,-1,e)}function Yw(t,a,e){return nf(t,-1,e)}function ol(t,a,e){return ks(t,-a,e)}function aT({to_email:t,to_name:a,from_name:e,from_email:n,day:r,date:o,time:l,location:d,note:h,gameType:m,raceLength:p,proposalId:y}){if(!t||t==="undefined")return alert("Recipient email is missing. Cannot send proposal."),Promise.reject(new Error("Recipient email is missing."));if(!n||n==="undefined")return alert("Your email is missing. Cannot send proposal."),Promise.reject(new Error("Sender email is missing."));const b=Wa(C2(o),"MM-dd-yyyy"),C=`https://frbcapl.github.io/NEWAPP/#/confirm-match?${Object.entries({from:e,to:a,day:r,date:b,time:l,location:d,note:h,proposerEmail:n,gameType:m,raceLength:p,proposalId:y}).map(([_,x])=>`${_}=${encodeURIComponent(x)}`).join("&")}`;return f0.send("service_l5q2047","template_xu0tl3i",{to_email:t,to_name:a,from_name:e,day:r,date:b,time:l,location:d,note:h,gameType:m,raceLength:p,confirm_link:C},"g6vqrOs_Jb6LL1VCZ")}function rT({to_email:t,to_name:a,day:e,date:n,time:r,location:o,proposal_note:l,confirmation_note:d,confirmed_by:h,gameType:m,raceLength:p}){return f0.send("service_l5q2047","template_dtc43h8",{to_email:t,to_name:a,day:e,date:n,time:r,location:o,proposal_note:l,confirmation_note:d,confirmed_by:h,gameType:m,raceLength:p},"g6vqrOs_Jb6LL1VCZ")}function sT({to_email:t,to_name:a,division:e,daysUntilDeadline:n,completedMatches:r,totalRequiredMatches:o,deadlineDate:l,remainingMatches:d}){if(!t||t==="undefined")return console.error("Recipient email is missing. Cannot send deadline reminder."),Promise.reject(new Error("Recipient email is missing."));const h=Math.round(r/o*100),m=n<=1?"CRITICAL":n<=3?"URGENT":n<=7?"WARNING":"REMINDER";return f0.send("service_l5q2047","template_xbpnbge",{to_email:t,to_name:a,division:e,days_until_deadline:n,completed_matches:r,total_required_matches:o,progress_percentage:h,deadline_date:l,remaining_matches:d,urgency_level:m,app_url:"https://newapp-1-ic1v.onrender.com"},"g6vqrOs_Jb6LL1VCZ")}const iT="_confirmMatchCard_7heot_7",oT="_confirmMatchTitle_7heot_31",lT="_redTitle_7heot_45",cT="_confirmMatchDetails_7heot_55",uT="_detailRow_7heot_65",dT="_proposalNote_7heot_85",fT="_noteSection_7heot_109",hT="_noteLabel_7heot_119",mT="_noteTextarea_7heot_133",pT="_confirmBtn_7heot_173",ct={confirmMatchCard:iT,confirmMatchTitle:oT,redTitle:lT,confirmMatchDetails:cT,detailRow:uT,proposalNote:dT,noteSection:fT,noteLabel:hT,noteTextarea:mT,confirmBtn:pT};function gT({text:t,query:a}){return a?t.split(new RegExp(`(${a})`,"gi")).map((n,r)=>n.toLowerCase()===a.toLowerCase()?u.createElement("mark",{key:r},n):n):u.createElement(u.Fragment,null,t)}const tt="https://atlasbackend-bnng.onrender.com";console.log("BACKEND_URL in use:",tt);console.log("Current origin:",window.location.origin);console.log("User agent:",navigator.userAgent);fetch(`${tt}/health`).then(t=>{console.log(" Backend health check successful:",t.status)}).catch(t=>{console.error(" Backend health check failed:",t)});function yT(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function vT(){const[t]=S5(),[a,e]=w.useState(!1),[n,r]=w.useState(""),o=t.get("from"),l=t.get("to"),d=t.get("day"),h=t.get("date"),m=t.get("time"),p=t.get("location"),y=t.get("proposerEmail"),b=t.get("note"),E=t.get("gameType"),S=t.get("raceLength"),C=t.get("proposalId"),_=()=>{console.log("CONFIRM BUTTON CLICKED"),rT({to_email:y,to_name:o,day:d,date:h,time:m,location:p,confirmed_by:l,proposal_note:b||"",confirmation_note:n||"",gameType:E||"",raceLength:S||""}),C?fetch(`${tt}/api/proposals/${C}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed",note:n})}).then(D=>{if(!D.ok)throw new Error("Failed to confirm proposal");console.log("Proposal confirmed successfully"),e(!0)}).catch(D=>{console.error("Error confirming proposal:",D),alert("Failed to confirm proposal: "+D.message)}):(console.log("No proposalId provided - showing confirmation modal"),e(!0))};return u.createElement("div",{className:ct.confirmMatchBg},u.createElement("div",{className:ct.confirmMatchCard},u.createElement("h1",{className:ct.confirmMatchTitle}," Front Range ",u.createElement("br",null),"Pool League ",u.createElement("br",null),"Confirm Match"),u.createElement("p",{className:ct.confirmMatchNotice},"You are about to confirm this match. ",u.createElement("br",null),"Your opponent will be notified by email and the match will be added to your app calendar!"),u.createElement("div",{className:ct.confirmMatchDetails},u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"you"},"")," ",u.createElement("strong",null,"You:")," ",l||"N/A"),u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"opponent"},"")," ",u.createElement("strong",null,"Opponent:")," ",o||"N/A"),u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"calendar"},"")," ",u.createElement("strong",null,"Day:")," ",d||"N/A"),u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"date"},"")," ",u.createElement("strong",null,"Date:")," ",yT(h)),u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"clock"},"")," ",u.createElement("strong",null,"Time:")," ",m||"N/A"),E&&u.createElement("div",{className:ct.detailRow},u.createElement(ah,{gameType:E,size:16})," ",u.createElement("strong",null,"Game Type:")," ",E),S&&u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"race"},"")," ",u.createElement("strong",null,"Race to:")," ",S),u.createElement("div",{className:ct.detailRow},u.createElement("span",{role:"img","aria-label":"location"},"")," ",u.createElement("strong",null,"Location:")," ",p||"N/A")),b&&u.createElement("div",{className:ct.proposalNote},u.createElement("span",{role:"img","aria-label":"note"},"")," ",u.createElement("strong",null,"Note from opponent:"),u.createElement("br",null),b),u.createElement("div",{className:ct.noteSection},u.createElement("label",{htmlFor:"note",className:ct.noteLabel}," Add a note (optional):"),u.createElement("textarea",{id:"note",value:n,onChange:x=>r(x.target.value),rows:3,placeholder:"Write a message to your opponent",className:ct.noteTextarea})),u.createElement("button",{className:ct.confirmBtn,onMouseDown:x=>x.currentTarget.style.transform="scale(0.97)",onMouseUp:x=>x.currentTarget.style.transform="scale(1)",onMouseLeave:x=>x.currentTarget.style.transform="scale(1)",onClick:_}," Confirm Match"),u.createElement(i2,{open:a,message:"Match confirmed! The opponent has been notified and the match has been added to your app calendar.",proposalNote:b,confirmationNote:n,gameType:E,raceLength:S,day:d,date:h,time:m,location:p,onClose:()=>e(!1)})))}const bT="_dashboardBg_2cp8a_18",wT="_dashboardFrame_2cp8a_36",xT="_dashboardCard_2cp8a_52",ST="_dashboardTitle_2cp8a_82",ET="_dashboardUserName_2cp8a_90",CT="_dashboardSection_2cp8a_100",_T="_newsUpdatesSection_2cp8a_112",IT="_dashboardSectionBox_2cp8a_116",DT="_dashboardSectionTitle_2cp8a_128",AT="_matchesSection_2cp8a_145",TT="_dashboardList_2cp8a_157",MT="_matchCard_2cp8a_168",NT="_dashboardBtn_2cp8a_271",RT="_errorBox_2cp8a_408",kT="_dashboardAdminBtn_2cp8a_418",LT="_dashboardLogoutBtn_2cp8a_436",PT="_dashboardNoteItem_2cp8a_455",OT="_simulationContainer_2cp8a_474",BT="_modalOverlay_2cp8a_495",UT="_dashboardModalContent_2cp8a_521",zT="_modalHeader_2cp8a_549",jT="_modalTitle_2cp8a_562",FT="_closeBtn_2cp8a_571",HT="_poolTableContainer_2cp8a_914",YT="_modalDetailRowSnazzy_2cp8a_979",WT="_proposalModalContent_2cp8a_1016",GT="_matchCardDoneBtn_2cp8a_1222",$T="_inputField_2cp8a_1324",ZT="_proposalModalHeaderBar_2cp8a_1348",qT="_phasePill_2cp8a_1357",QT="_divisionPill_2cp8a_1367",VT="_proposalModalToRow_2cp8a_1375",XT="_toOpponentLabel_2cp8a_1382",JT="_toOpponentName_2cp8a_1388",KT="_proposalModalDayRow_2cp8a_1393",e3="_dayLabel_2cp8a_1400",t3="_dayValue_2cp8a_1406",n3="_proposalModalFieldRow_2cp8a_1411",a3="_fieldLabel_2cp8a_1416",r3="_proposalModalButtonRow_2cp8a_1438",s3="_matchManager_2cp8a_2287",i3="_matchStats_2cp8a_2294",o3="_statsGrid_2cp8a_2309",l3="_statItem_2cp8a_2315",c3="_statNumber_2cp8a_2323",u3="_statLabel_2cp8a_2331",d3="_matchSection_2cp8a_2338",f3="_noMatches_2cp8a_1877",h3="_matchList_2cp8a_2360",m3="_completedMatch_2cp8a_2380",p3="_matchHeader_2cp8a_2389",g3="_matchStatus_2cp8a_2396",y3="_matchDate_2cp8a_2405",v3="_matchPlayers_2cp8a_2410",b3="_player1_2cp8a_2419",w3="_player2_2cp8a_2419",x3="_winner_2cp8a_2426",S3="_vs_2cp8a_2432",E3="_matchDetails_2cp8a_2437",C3="_location_2cp8a_2446",_3="_type_2cp8a_2446",I3="_matchResult_2cp8a_2452",D3="_score_2cp8a_2461",A3="_matchNotes_2cp8a_2466",T3="_notesLabel_2cp8a_2472",M3="_notesText_2cp8a_2479",N3="_matchActions_2cp8a_2485",R3="_actionButton_2cp8a_2493",k3="_cancelButton_2cp8a_2511",L3="_modal_2cp8a_495",P3="_formGroup_2cp8a_2553",O3="_modalActions_2cp8a_2589",B3="_loading_2cp8a_2629",le={dashboardBg:bT,dashboardFrame:wT,dashboardCard:xT,dashboardTitle:ST,dashboardUserName:ET,dashboardSection:CT,newsUpdatesSection:_T,dashboardSectionBox:IT,dashboardSectionTitle:DT,matchesSection:AT,dashboardList:TT,matchCard:MT,dashboardBtn:NT,errorBox:RT,dashboardAdminBtn:kT,dashboardLogoutBtn:LT,dashboardNoteItem:PT,simulationContainer:OT,modalOverlay:BT,dashboardModalContent:UT,modalHeader:zT,modalTitle:jT,closeBtn:FT,poolTableContainer:HT,modalDetailRowSnazzy:YT,proposalModalContent:WT,matchCardDoneBtn:GT,inputField:$T,proposalModalHeaderBar:ZT,phasePill:qT,divisionPill:QT,proposalModalToRow:VT,toOpponentLabel:XT,toOpponentName:JT,proposalModalDayRow:KT,dayLabel:e3,dayValue:t3,proposalModalFieldRow:n3,fieldLabel:a3,proposalModalButtonRow:r3,matchManager:s3,matchStats:i3,statsGrid:o3,statItem:l3,statNumber:c3,statLabel:u3,matchSection:d3,noMatches:f3,matchList:h3,completedMatch:m3,matchHeader:p3,matchStatus:g3,matchDate:y3,matchPlayers:v3,player1:b3,player2:w3,winner:x3,vs:S3,matchDetails:E3,location:C3,type:_3,matchResult:I3,score:D3,matchNotes:A3,notesLabel:T3,notesText:M3,matchActions:N3,actionButton:R3,cancelButton:k3,modal:L3,formGroup:P3,modalActions:O3,loading:B3},ih=""+new URL("tenball-I4UPjCSs.svg",import.meta.url).href,D2=""+new URL("PredatorTable-CE1I7Bce.png",import.meta.url).href,A2=""+new URL("nineball-5ZBjRXm5.svg",import.meta.url).href,cf=""+new URL("8ball-COe24mO4.svg",import.meta.url).href,T2="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3c!--%20Main%20ball%20gradient%20with%20realistic%20lighting%20--%3e%3cradialGradient%20id='cueMain'%20cx='25%25'%20cy='25%25'%20r='75%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='30%25'%20stop-color='%23f5f5f5'/%3e%3cstop%20offset='60%25'%20stop-color='%23e8e8e8'/%3e%3cstop%20offset='100%25'%20stop-color='%23d0d0d0'/%3e%3c/radialGradient%3e%3c!--%20Secondary%20highlight%20for%20depth%20--%3e%3cradialGradient%20id='cueHighlight'%20cx='20%25'%20cy='20%25'%20r='40%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'%20stop-opacity='0.9'/%3e%3cstop%20offset='60%25'%20stop-color='%23ffffff'%20stop-opacity='0.3'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Specular%20highlight%20--%3e%3cradialGradient%20id='cueSpecular'%20cx='35%25'%20cy='35%25'%20r='15%25'%3e%3cstop%20offset='0%25'%20stop-color='%23ffffff'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffffff'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c!--%20Shadow%20gradient%20--%3e%3cradialGradient%20id='cueShadow'%20cx='75%25'%20cy='75%25'%20r='25%25'%3e%3cstop%20offset='0%25'%20stop-color='%23000000'%20stop-opacity='0.2'/%3e%3cstop%20offset='100%25'%20stop-color='%23000000'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3c/defs%3e%3c!--%20Main%20ball%20--%3e%3ccircle%20cx='8'%20cy='8'%20r='7.5'%20fill='url(%23cueMain)'%20stroke='%23c0c0c0'%20stroke-width='0.3'/%3e%3c!--%20Primary%20highlight%20--%3e%3ccircle%20cx='6'%20cy='6'%20r='2.5'%20fill='url(%23cueHighlight)'/%3e%3c!--%20Specular%20highlight%20--%3e%3ccircle%20cx='7'%20cy='7'%20r='1.2'%20fill='url(%23cueSpecular)'/%3e%3c!--%20Subtle%20shadow%20for%20depth%20--%3e%3ccircle%20cx='9'%20cy='9'%20r='7.5'%20fill='url(%23cueShadow)'/%3e%3c/svg%3e",U3="_pinLoginBg_1hrzk_8",z3="_pinLoginFrame_1hrzk_21",j3="_pinLoginCard_1hrzk_43",F3="_simulationContainer_1hrzk_67",H3="_pinLoginSubtitle_1hrzk_111",Y3="_pinLoginLock_1hrzk_118",W3="_pinInput_1hrzk_124",G3="_pinLoginBtn_1hrzk_148",$3="_signupBtn_1hrzk_174",Z3="_pinLoginError_1hrzk_200",q3="_pinBallImg_1hrzk_212",hr={pinLoginBg:U3,pinLoginFrame:z3,pinLoginCard:j3,simulationContainer:F3,pinLoginSubtitle:H3,pinLoginLock:Y3,pinInput:W3,pinLoginBtn:G3,signupBtn:$3,pinLoginError:Z3,pinBallImg:q3},v0=""+new URL("logo-CyezyYO7.png",import.meta.url).href,Q3=[{key:"cue",src:T2,alt:"Cue Ball"},{key:"8",src:cf,alt:"8 Ball"},{key:"9",src:A2,alt:"9 Ball"},{key:"10",src:ih,alt:"10 Ball"}],M2=600,N2=300,nn=15,cr=nn/2;function V3(t,a,e,n=1){const r=e*n,o=a.x-t.x,l=a.y-t.y,d=Math.sqrt(o*o+l*l);if(d===0||d>=r)return;const h=r-d+.01,m=o/d,p=l/d;t.x-=m*(h/2),t.y-=p*(h/2),a.x+=m*(h/2),a.y+=p*(h/2);const y=t.vx-a.vx,b=t.vy-a.vy,S=-(y*m+b*p)||.01;t.vx+=S*m,t.vy+=S*p,a.vx-=S*m,a.vy-=S*p,t.isMoving=!0,a.isMoving=!0}function X3(t=M2,a=N2,e=1){const n=t/e,r=a/e;return[{x:0,y:0},{x:n,y:0},{x:0,y:r},{x:n,y:r},{x:n/2,y:0},{x:n/2,y:r}]}function uf({isRotated:t=!1}){console.log("PoolSimulation isRotated:",t);const a=w.useRef(null),e=w.useRef(null),n=w.useRef({cue:u.createRef(),8:u.createRef(),9:u.createRef(),10:u.createRef()}),r=w.useRef({}),o=w.useRef({}),l=w.useRef(null),d=w.useRef(null),h=w.useRef(0),m=w.useRef(1),[p,y]=w.useState(!1);function b(){Object.keys(r.current).forEach(D=>{o.current[D]={x:r.current[D].x,y:r.current[D].y}})}function E(){const D=a.current;if(!D)return;const A=D.offsetWidth,k=D.offsetHeight,P=A/m.current,L=k/m.current,G=P*.25,F=L/2,q=nn*.87,te=nn*.5;function X(){return(Math.random()-.5)*1}r.current={8:{ref:n.current[8],x:G+X(),y:F+X(),vx:0,vy:0,isMoving:!1,visible:!0},9:{ref:n.current[9],x:G-q+X(),y:F-te+X(),vx:0,vy:0,isMoving:!1,visible:!0},10:{ref:n.current[10],x:G-q+X(),y:F+te+X(),vx:0,vy:0,isMoving:!1,visible:!0},cue:{ref:n.current.cue,x:P*.85,y:L/2,vx:0,vy:0,isMoving:!1,visible:!0}},Object.values(r.current).forEach(se=>{se.ref.current&&(se.ref.current.style.opacity=1)}),b()}function S(){E(),h.current=0,setTimeout(()=>{C()},1e3)}w.useEffect(()=>{if(a.current&&!p){const D=a.current,A=D.offsetWidth,k=D.offsetHeight;if(A<400||k<200)m.current=.55;else{const P=A/M2,L=k/N2;m.current=Math.min(P,L)}E(),setTimeout(()=>{C()},1e3),y(!0)}return()=>{cancelAnimationFrame(l.current),clearTimeout(d.current)}},[p]);function C(){if(!r.current.cue||r.current.cue.isMoving)return;const D=r.current.cue;if(h.current+=1,h.current===1){r.current[8];const A=r.current[9],k=a.current;if(!k)return;const P=k.offsetWidth,L=k.offsetHeight,G=P/m.current,F=L/m.current,q=G*.85,te=F*.5;D.x=q,D.y=te;const X=A.x+(Math.random()-.5)*nn*.3,se=A.y+(Math.random()-.5)*nn*.3,ee=X-D.x,j=se-D.y,H=Math.atan2(j,ee)+(Math.random()-.5)*(Math.PI/45),R=18+Math.random()*3;D.vx=Math.cos(H)*R,D.vy=Math.sin(H)*R,D.isMoving=!0,x();return}_()}function _(){var R;const D=["8","9","10"],A=D.find(B=>{var Y;return(Y=r.current[B])==null?void 0:Y.visible});if(!A)return;const k=r.current.cue,P=r.current[A],L=a.current;if(!L)return;const G=L.offsetWidth,F=L.offsetHeight;G/m.current,F/m.current;const q=X3(G,F,m.current);let te=null,X=1/0;for(const B of q){B.x-P.x,B.y-P.y;let Y=B.x,$=B.y;const T=Y-P.x,U=$-P.y,K=Math.hypot(T,U),V=P.x-T/K*nn,re=P.y-U/K*nn;let Ee=!0;for(const rt of D)if(rt!==A&&(R=r.current[rt])!=null&&R.visible){const St=r.current[rt];if(Math.abs((re-k.y)*St.x-(V-k.x)*St.y+V*k.y-re*k.x)/Math.hypot(V-k.x,re-k.y)<nn*.6){Ee=!1;break}}if(!Ee)continue;const Ce=Math.hypot(k.x-V,k.y-re),Be=Math.hypot(P.x-B.x,P.y-B.y);let be=Ce*.05;be+=Be*.02,Ce<nn*3?be*=.01:Ce<nn*6?be*=.1:Ce<nn*10&&(be*=.3);const Ve=D.find(rt=>{var St;return rt!==A&&((St=r.current[rt])==null?void 0:St.visible)});if(Ve){const rt=r.current[Ve],St=V+(V-k.x)*.3,xt=re+(re-k.y)*.3;Math.hypot(St-rt.x,xt-rt.y)<nn*8&&(be*=.5)}be+=Math.random()*.2,be<X&&(X=be,te={ghostX:V,ghostY:re,targetToPocket:Be,cueToGhost:Ce,pocket:B})}if(!te){const B=Math.atan2(P.y-k.y,P.x-k.x),Y=Math.hypot(P.x-k.x,P.y-k.y);te={ghostX:k.x+Math.cos(B)*Y*.7,ghostY:k.y+Math.sin(B)*Y*.7,targetToPocket:1e3,cueToGhost:Y}}const se=te.ghostX-k.x,ee=te.ghostY-k.y,j=Math.hypot(se,ee);let H;j<nn*2?H=3:j<nn*4?H=4:j<nn*8?H=5:j<nn*12?H=6:H=7,te.targetToPocket>nn*6&&(H+=1),H+=(Math.random()-.5)*.3,H=Math.max(2,Math.min(8,H)),k.vx=se/j*H,k.vy=ee/j*H,k.isMoving=!0,x()}function x(){const k=a.current;if(!k)return;const P=k.offsetWidth,L=k.offsetHeight,G=cr*3.5,F=cr*4.5,q=G,te=P/m.current-F,X=G,se=L/m.current-G;function ee(){for(let j=0;j<16;j++){Object.entries(r.current).forEach(([R,B])=>{if(!B.visible)return;let Y=B.x+B.vx/16,$=B.y+B.vy/16;const T=a.current;if(T){const U=T.offsetWidth,K=T.offsetHeight,V=U/m.current,re=K/m.current;[{x:0,y:0},{x:V,y:0},{x:0,y:re},{x:V,y:re},{x:V/2,y:0},{x:V/2,y:re}].some(Be=>Math.hypot(Y-Be.x,$-Be.y)<nn*4)?(console.log(`Ball ${R} pocketed! Position: (${Y.toFixed(1)}, ${$.toFixed(1)})`),B.isMoving=!1,B.visible=!1,B.ref.current&&(B.ref.current.style.opacity=0)):(Y<q+cr?(B.x=q+cr,B.vx=Math.abs(B.vx)*.75):Y>te-cr?(B.x=te-cr,B.vx=-Math.abs(B.vx)*.75):B.x=Y,$<X+cr?(B.y=X+cr,B.vy=Math.abs(B.vy)*.75):$>se-cr?(B.y=se-cr,B.vy=-Math.abs(B.vy)*.75):B.y=$,B.vx*=Math.pow(.99,1/16),B.vy*=Math.pow(.99,1/16))}B.isMoving&&Math.abs(B.vx)<.03&&Math.abs(B.vy)<.03&&(B.vx=0,B.vy=0,B.isMoving=!1)});const H=Object.keys(r.current);for(let R=0;R<H.length;R++)for(let B=R+1;B<H.length;B++){const Y=r.current[H[R]],$=r.current[H[B]];!Y.visible||!$.visible||V3(Y,$,nn,m.current)}}if(Object.entries(r.current).forEach(([j,H])=>{if(H.ref.current&&H.visible){const R=H.x*m.current-cr*m.current,B=H.y*m.current-cr*m.current,Y=nn*m.current,$=P-Y,T=L-Y;H.ref.current.style.left=Math.max(0,Math.min(R,$))+"px",H.ref.current.style.top=Math.max(0,Math.min(B,T))+"px",H.ref.current.style.width=Y+"px",H.ref.current.style.height=Y+"px",H.ref.current.style.opacity=1}}),!r.current.cue.visible){if(Object.values(r.current).some(T=>T.isMoving)){l.current=requestAnimationFrame(ee);return}const j=a.current;if(!j)return;const H=j.offsetWidth,R=j.offsetHeight,B=H/m.current,Y=R/m.current,$=["8","9","10"].filter(T=>{var U;return(U=r.current[T])==null?void 0:U.visible});if($.length>0){const T=$[0],U=r.current[T],K=(Math.random()-.5)*nn*2,V=(Math.random()-.5)*nn*2;r.current.cue.x=U.x+K,r.current.cue.y=U.y+V}else r.current.cue.x=B*.5,r.current.cue.y=Y*.5;r.current.cue.vx=0,r.current.cue.vy=0,r.current.cue.isMoving=!1,r.current.cue.visible=!0,r.current.cue.ref.current&&(r.current.cue.ref.current.style.opacity=1),setTimeout(()=>{_()},1500);return}if(!r.current[10].visible){setTimeout(()=>{S()},1200);return}Object.values(r.current).some(j=>j.isMoving)?l.current=requestAnimationFrame(ee):d.current||(d.current=setTimeout(()=>{d.current=null,_()},2e3))}l.current=requestAnimationFrame(ee)}return u.createElement("div",{ref:a,"data-pool-container":!0,style:{width:"100%",height:"100%",position:"relative",background:"linear-gradient(180deg, #1a1a1a 0%, #000000 100%)",zIndex:0,boxShadow:"inset 0 0 50px rgba(0,0,0,0.8)"}},u.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(ellipse 1200px 800px at center 60px, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0.04) 20%, rgba(255,255,255,0.02) 40%, rgba(255,255,255,0.01) 60%, transparent 80%)",zIndex:3,pointerEvents:"none"}}),u.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),u.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(circle 800px at center 40px, rgba(255,255,255,0.02) 0%, transparent 70%)",zIndex:3,pointerEvents:"none"}}),u.createElement("img",{ref:e,src:D2,alt:"Pool Table",style:{width:"100%",height:"100%",display:"block",objectFit:"fill",position:"absolute",top:1,left:0,zIndex:1,pointerEvents:"none",opacity:1,filter:"opacity(1) contrast(1.3) brightness(1.25) saturate(1.1)",boxShadow:"inset 0 0 30px rgba(0,0,0,0.3)",transform:t?"rotate(90deg)":"none",transformOrigin:"center center"},onLoad:()=>{console.log("Table image loaded, isRotated:",t,"transform:",t?"rotate(90deg)":"none")}}),u.createElement("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",userSelect:"none",zIndex:2}},u.createElement("img",{src:v0,alt:"League Logo",style:{position:"absolute",left:"50%",top:"50%",width:"30.5%",height:"auto",transform:t?"translate(-50%, -50%) rotate(-90deg)":"translate(-50%, -50%)",objectFit:"contain",zIndex:2,opacity:.25,filter:"drop-shadow(0 1px 4px rgba(0,0,0,0.3))",pointerEvents:"none",userSelect:"none"}})),Q3.map(D=>{var A,k;return u.createElement(u.Fragment,{key:D.key},u.createElement("img",{src:D.src,alt:D.alt,ref:n.current[D.key],className:hr.pinBallImg,style:{position:"absolute",left:0,top:0,width:nn,height:nn,zIndex:10,opacity:((A=r.current[D.key])==null?void 0:A.visible)===!1?0:1,transition:"none",pointerEvents:"none",filter:"opacity(1) contrast(1.3) brightness(1.2) saturate(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.3))",borderRadius:"50%",transform:t?"rotate(-90deg)":"none",transformOrigin:"center center"}}),u.createElement("div",{style:{position:"absolute",left:3,top:3,width:nn-6,height:nn-6,borderRadius:"50%",background:"radial-gradient(ellipse 8px 4px at 30% 30%, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, transparent 100%)",zIndex:11,opacity:((k=r.current[D.key])==null?void 0:k.visible)===!1?0:.8,pointerEvents:"none"}}))}))}function R2({aspectWidth:t,aspectHeight:a,children:e}){const n=w.useRef(null),[r,o]=w.useState(1);return w.useLayoutEffect(()=>{function l(){if(!n.current)return;const{width:h,height:m}=n.current.getBoundingClientRect();o(Math.min(h/t,m/a))}l();const d=new window.ResizeObserver(l);return d.observe(n.current),()=>d.disconnect()},[t,a]),u.createElement("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",overflow:"visible"}},u.createElement("div",{style:{width:t,height:a,transform:`scale(${r})`,transformOrigin:"top left",position:"absolute",top:0,left:0}},e))}function J3({open:t,onClose:a,standingsUrl:e}){const[n,r]=w.useState(!0);return t?u.createElement(qn,{open:t,onClose:a,title:" League Standings",maxWidth:"90vw",className:"standings-modal"},u.createElement("div",{style:{height:"70vh",width:"100%",position:"relative"}},n&&u.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,color:"#e53e3e",fontSize:"1.2rem",fontWeight:"bold"}},"Loading standings..."),u.createElement("iframe",{src:e,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",background:"#fff"},title:"League Standings",onLoad:()=>r(!1)})),u.createElement("div",{style:{marginTop:"1rem",textAlign:"center",color:"#888",fontSize:"0.9rem"}},"Front Range Pool League")):null}function K3({open:t,onClose:a,playerName:e,playerLastName:n,selectedDivision:r}){const[o,l]=w.useState([]),[d,h]=w.useState(!0),[m,p]=w.useState(null),[y,b]=w.useState(null),[E,S]=w.useState([]),C=`${e} ${n}`;return w.useEffect(()=>{if(!t||!r)return;async function _(){try{h(!0),p(null);const x=r.replace(/[^A-Za-z0-9]/g,"_"),D=`${tt}/static/standings_${x}.json`,A=await fetch(D);if(!A.ok)throw new Error(`Failed to fetch standings: ${A.status}`);const k=await A.json(),P=k.findIndex(L=>L.name&&L.name.toLowerCase().includes(C.toLowerCase()));if(P!==-1){b(P+1);const L=k.slice(P+1,P+5);S(L)}else p("Could not find user in standings")}catch(x){console.error("Error fetching standings:",x),p("Failed to load standings data")}finally{h(!1)}}_()},[t,r,C]),t?u.createElement("div",{className:le.modalOverlay,onClick:a},u.createElement("div",{className:le.dashboardModalContent,onClick:_=>_.stopPropagation()},u.createElement("div",{className:le.modalHeader},u.createElement("h2",{className:le.modalTitle}," Potential Challengers"),u.createElement("button",{className:le.closeBtn,onClick:a},"")),u.createElement("div",{style:{padding:"20px",flex:1,overflowY:"auto",display:"flex",flexDirection:"column"}},u.createElement("p",{style:{margin:"0 0 20px 0",color:"#e0e0e0",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center"}},"Players ranked below you who could challenge you in Phase 2"),d&&u.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},u.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},""),"Loading potential challengers..."),m&&u.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#e53e3e",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},u.createElement("div",{style:{fontSize:"1.2rem",marginBottom:"10px"}},""),m),!d&&!m&&u.createElement(u.Fragment,null,u.createElement("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",marginBottom:"20px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"}},u.createElement("div",{style:{color:"#ffffff",fontSize:"1.1rem",fontWeight:"bold",marginBottom:"5px"}},"Your Position: #",y),u.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.9rem"}},C)),u.createElement("div",{style:{marginBottom:"20px",flex:1}},u.createElement("h3",{style:{color:"#ffffff",fontSize:"1.2rem",marginBottom:"15px",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Potential Challengers (",E.length,")"),E.length===0?u.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#888",fontStyle:"italic"}},"No players ranked below you found in standings"):u.createElement("div",{style:{display:"grid",gap:"10px"}},E.map((_,x)=>u.createElement("div",{key:x,style:{background:"rgba(255,255,255,0.05)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"background-color 0.2s ease"},onMouseEnter:D=>D.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:D=>D.target.style.backgroundColor="rgba(255,255,255,0.05)"},u.createElement("div",{style:{flex:1}},u.createElement("div",{style:{color:"#ffffff",fontSize:"1rem",fontWeight:"bold",marginBottom:"5px"}},"#",y+x+1," - ",_.name||"Unknown Player"),_.record&&u.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Record: ",_.record),_.points&&u.createElement("div",{style:{color:"#e0e0e0",fontSize:"0.85rem"}},"Points: ",_.points)),u.createElement("div",{style:{color:"#ff4444",fontSize:"1.5rem",marginLeft:"15px"}},""))))),u.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:"15px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:"20px"}},u.createElement("div",{style:{color:"#ffffff",fontSize:"0.9rem",textAlign:"center",lineHeight:"1.4"}},u.createElement("strong",null,"Phase 2 Defense Rules:"),u.createElement("br",null)," Players ranked below you can challenge you",u.createElement("br",null)," You must accept at least 2 defense challenges",u.createElement("br",null)," These are the players who could challenge you")))))):null}const eM="_modalOverlay_1l7ua_7",tM="_modalContentSnazzy_1l7ua_33",nM="_modalHeaderSnazzy_1l7ua_69",aM="_modalAccentBar_1l7ua_89",rM="_modalTitleSnazzy_1l7ua_107",sM="_modalCloseBtnSnazzy_1l7ua_131",iM="_modalDetailsSnazzy_1l7ua_173",oM="_modalDetailRowSnazzy_1l7ua_189",lM="_modalDetailIcon_1l7ua_217",cM="_modalDetailLabelSnazzy_1l7ua_229",uM="_modalDetailValueSnazzy_1l7ua_243",dM="_modalOpponentName_1l7ua_263",fM="_modalVs_1l7ua_277",hM="_gameTypeIcon_1l7ua_293",mM="_modalActionBtn_1l7ua_397",lt={modalOverlay:eM,modalContentSnazzy:tM,modalHeaderSnazzy:nM,modalAccentBar:aM,modalTitleSnazzy:rM,modalCloseBtnSnazzy:sM,modalDetailsSnazzy:iM,modalDetailRowSnazzy:oM,modalDetailIcon:lM,modalDetailLabelSnazzy:cM,modalDetailValueSnazzy:uM,modalOpponentName:dM,modalVs:fM,gameTypeIcon:hM,modalActionBtn:mM},Ww=""+new URL("ball9-U9rUK9VA.jpg",import.meta.url).href,Gw=""+new URL("ball10-pPX9kWaM.jpg",import.meta.url).href;function b0({open:t,onClose:a,player1:e,player2:n,onSelect:r}){return t?u.createElement(qn,{open:t,onClose:a,title:"Who won?",maxWidth:"340px"},u.createElement("div",{style:{textAlign:"center",marginBottom:18,color:"#fff",fontSize:"1.1em"}},"Please select the winner:"),u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"}},u.createElement("button",{style:{background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>r(e)},e),u.createElement("button",{style:{background:"#23232a",color:"#e53e3e",border:"2px solid #e53e3e",borderRadius:8,padding:"0.7rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",minWidth:"160px"},onClick:()=>r(n)},n)),u.createElement("button",{style:{marginTop:24,background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px",display:"block",marginLeft:"auto",marginRight:"auto"},onClick:a},"Cancel")):null}const pM=tt;class _n{static async request(a,e={}){const n=`${pM}${a}`,r={headers:{"Content-Type":"application/json",Accept:"application/json",...e.headers},signal:AbortSignal.timeout(3e4),credentials:"include",mode:"cors",...e},o=3;let l;for(let d=1;d<=o;d++)try{console.log(`API Request (attempt ${d}): ${n}`);const h=await fetch(n,r);if(!h.ok)throw new Error(`API Error: ${h.status} - ${h.statusText}`);const m=await h.json();return console.log(`API Success: ${n}`),m}catch(h){if(l=h,console.warn(`API Request failed (attempt ${d}/${o}): ${n}`,h),h.message.includes("400")||h.message.includes("401")||h.message.includes("403")||h.message.includes("404"))break;if(d<o){const m=Math.min(1e3*Math.pow(2,d-1),5e3);await new Promise(p=>setTimeout(p,m))}}throw console.error(`API Request failed after ${o} attempts: ${n}`,l),l}static get(a){return this.request(a)}static post(a,e){return this.request(a,{method:"POST",body:JSON.stringify(e)})}static patch(a,e){return this.request(a,{method:"PATCH",body:JSON.stringify(e)})}static delete(a){return this.request(a,{method:"DELETE"})}static async testConnection(){try{const a=await this.get("/health");return console.log("Backend connection test successful:",a),!0}catch(a){return console.error("Backend connection test failed:",a),!1}}}const as={async getPendingProposals(t,a){return _n.get(`/api/proposals/by-name?receiverName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async getSentProposals(t,a){return _n.get(`/api/proposals/by-sender?senderName=${encodeURIComponent(t)}&division=${encodeURIComponent(a)}`)},async updateProposalStatus(t,a,e){return _n.patch(`/api/proposals/${t}/status`,{status:a,note:e})},async createProposal(t){return _n.post("/api/proposals",t)},async counterProposal(t,a){return _n.patch(`/api/proposals/${t}/counter`,a)},async markCompleted(t,a,e,n){return _n.patch(`/api/matches/completed/${t}`,{winner:a,markedByName:e,markedByEmail:n})},async cancelProposal(t){return _n.post(`/api/proposals/${t}/cancel`)},async getAllProposals(t){const a=t?`?division=${encodeURIComponent(t)}`:"";return _n.get(`/api/proposals/debug-list${a}`)}};function gM(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function yM({open:t,onClose:a,match:e,onCompleted:n,userPin:r,onMatchUpdated:o,senderName:l,senderEmail:d}){const[h,m]=w.useState({x:0,y:0}),[p,y]=w.useState(!1),b=w.useRef({x:0,y:0}),E=ee=>{y(!0),b.current={x:ee.clientX-h.x,y:ee.clientY-h.y},document.body.style.userSelect="none"},S=ee=>{p&&m({x:ee.clientX-b.current.x,y:ee.clientY-b.current.y})},C=()=>{y(!1),document.body.style.userSelect=""};w.useEffect(()=>(p?(window.addEventListener("mousemove",S),window.addEventListener("mouseup",C)):(window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C)}),[p]);const[_,x]=w.useState(!1),[D,A]=w.useState(!1),[k,P]=w.useState({player1:"",player2:""}),[L,G]=w.useState(e);w.useEffect(()=>{G(e)},[e]);const F=()=>{let ee=e.player||e.senderName,j=e.opponent||e.receiverName;P({player1:ee,player2:j}),A(!0)},q=async ee=>{A(!1),x(!0);const j=l&&l.trim()?l:L.player||L.senderName||"Unknown",H=d&&d.trim()?d:L.senderEmail||"unknown@example.com";console.log("Marking winner with:",{winner:ee,markedByName:j,markedByEmail:H});try{const R=await as.markCompleted(L._id,ee,j,H);R&&R.proposal?(G(R.proposal),o&&o(R.proposal)):(G({...L,winner:ee}),o&&o({...L,winner:ee})),n&&n(L._id)}catch{alert("Failed to mark as completed.")}x(!1)};if(!t||!L)return null;let te=new Date,X="",se="";if(L.date&&L.time){const[ee,j,H]=L.date.split("-"),R=`${ee}-${j.padStart(2,"0")}-${H.padStart(2,"0")}`;let B=L.time.trim().toUpperCase(),[Y,$]=B.split(" "),[T,U]=Y.split(":").map(Number);$==="PM"&&T<12&&(T+=12),$==="AM"&&T===12&&(T=0);const K=T.toString().padStart(2,"0"),V=(U||0).toString().padStart(2,"0"),re=`${K}:${V}`;te=new Date(`${R}T${re}:00`),X=gM(L.date),se=te.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}return u.createElement("div",{className:lt.modalOverlay,onClick:a},u.createElement("div",{className:lt.modalContentSnazzy,style:{transform:`translate(${h.x}px, ${h.y}px)`,cursor:p?"grabbing":"default"},onClick:ee=>ee.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Match Details",tabIndex:-1},u.createElement("button",{className:lt.modalCloseBtnSnazzy,onClick:a,"aria-label":"Close"},""),u.createElement("div",{className:lt.modalHeaderSnazzy,onMouseDown:E,style:{cursor:"grab",userSelect:"none"}},u.createElement("span",{className:lt.modalAccentBar}),u.createElement("h2",{className:lt.modalTitleSnazzy}," Match Details")),u.createElement("div",{className:lt.modalDetailsSnazzy},u.createElement("div",{className:lt.modalDetailRowSnazzy},u.createElement("span",{className:lt.modalDetailIcon},""),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Players:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},u.createElement("span",{className:lt.modalOpponentName},L.player||L.senderName),u.createElement("span",{className:lt.modalVs},"vs"),u.createElement("span",{className:lt.modalOpponentName},L.opponent||L.receiverName))),u.createElement("div",{className:lt.modalDetailRowSnazzy},u.createElement("span",{className:lt.modalDetailIcon},""),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Date:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},X)),u.createElement("div",{className:lt.modalDetailRowSnazzy},u.createElement("span",{className:lt.modalDetailIcon},""),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Time:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},se)),u.createElement("div",{className:lt.modalDetailRowSnazzy},u.createElement("span",{className:lt.modalDetailIcon},""),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Location:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},L.location)),L.gameType&&u.createElement("div",{className:lt.modalDetailRowSnazzy},vM(L.gameType),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Game Type:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},L.gameType)),L.raceLength&&u.createElement("div",{className:lt.modalDetailRowSnazzy},u.createElement("span",{className:lt.modalDetailIcon},""),u.createElement("span",{className:lt.modalDetailLabelSnazzy},"Race to:"),u.createElement("span",{className:lt.modalDetailValueSnazzy},L.raceLength)),L.winner&&u.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}}," Winner: ",L.winner,r==="777777"&&L.winnerChangedByName&&u.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",L.winnerChangedByName,L.winnerChangedAt?` on ${new Date(L.winnerChangedAt).toLocaleString()}`:"",")"))),!L.completed&&u.createElement(u.Fragment,null,u.createElement("button",{className:lt.modalActionBtn,onClick:F,disabled:_,style:{marginTop:16,minWidth:180},type:"button"},_?"Marking...":"Mark as Completed"),u.createElement(b0,{open:D,onClose:()=>A(!1),player1:k.player1,player2:k.player2,onSelect:q}))))}function vM(t){if(!t)return u.createElement("span",{className:lt.modalDetailIcon},"");const a=t.trim().toLowerCase();return a==="8 ball"||a==="8-ball"||a==="8ball"?u.createElement("img",{src:cf,alt:"8 Ball",className:lt.gameTypeIcon}):a==="9 ball"||a==="9-ball"||a==="9ball"?u.createElement("img",{src:Ww,alt:"9 Ball",className:lt.gameTypeIcon}):a==="10 ball"||a==="10-ball"||a==="10ball"?u.createElement("img",{src:Gw,alt:"10 Ball",className:lt.gameTypeIcon}):a==="mixed"||a==="mixed games"?u.createElement(u.Fragment,null,u.createElement("img",{src:cf,alt:"8 Ball",className:lt.gameTypeIcon}),u.createElement("img",{src:Ww,alt:"9 Ball",className:lt.gameTypeIcon}),u.createElement("img",{src:Gw,alt:"10 Ball",className:lt.gameTypeIcon})):u.createElement("span",{className:lt.modalDetailIcon},"")}const bM="_proposalList_1gl2k_39",wM="_proposalCardButton_1gl2k_169",xM="_proposalCardLabel_1gl2k_211",SM="_proposalCardMessage_1gl2k_223",EM="_modalContent_1gl2k_277",CM="_confirmDialogBox_1gl2k_345",na={proposalList:bM,proposalCardButton:wM,proposalCardLabel:xM,proposalCardMessage:SM,modalContent:EM,confirmDialogBox:CM};function $w(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function _M(t){if(!t)return"N/A";if(t.includes(":")&&t.length===5){const[a,e]=t.split(":"),n=parseInt(a),r=n>=12?"PM":"AM";return`${n===0?12:n>12?n-12:n}:${e} ${r}`}return t}function Np({proposals:t,onSelect:a,onClose:e,type:n="received",isAdmin:r=!1,senderEmail:o,senderName:l,onProposalUpdated:d}){console.log("Proposals:",t);const[h,m]=w.useState(null),[p,y]=w.useState(!1),[b,E]=w.useState(""),[S,C]=w.useState(t),[_,x]=w.useState("all"),D=t.filter(H=>H.isCounter),A=t.filter(H=>!H.isCounter),k=_==="counter"?D:A,[P,L]=w.useState(!1),[G,F]=w.useState(null),[q,te]=w.useState({player1:"",player2:""}),[X,se]=w.useState(!1),ee=async H=>{y(!0),E("");try{await as.cancelProposal(H),C(R=>R.filter(B=>B._id!==H)),m(null)}catch{E("Failed to cancel proposal. Please try again.")}finally{y(!1)}},j=n==="completed"?S:t;return u.createElement(qn,{open:!0,onClose:e,title:n==="completed"?"Completed Matches":n==="sent"?"Matches You Proposed":"Pending Match Proposals",maxWidth:"600px"},u.createElement("div",{className:na.modalContent,style:{position:"relative",maxHeight:"none",overflowY:"visible"}},n!=="completed"&&u.createElement("div",{style:{display:"flex",gap:8,marginBottom:16}},u.createElement("button",{onClick:()=>x("all"),style:{background:_==="all"?"#e53e3e":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:_==="all"?"0 2px 8px #e53e3e44":"none",position:"relative"}},"All Proposals (",A.length,")",A.length>0&&u.createElement("span",{style:{background:"#fff",color:"#e53e3e",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},A.length)),u.createElement("button",{onClick:()=>x("counter"),style:{background:_==="counter"?"#ff9800":"#333",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",boxShadow:_==="counter"?"0 2px 8px #ff980044":"none",position:"relative"}},"Counter Proposals (",D.length,")",D.length>0&&u.createElement("span",{style:{background:"#fff",color:"#ff9800",borderRadius:"50%",padding:"2px 8px",fontSize:"0.85em",fontWeight:"bold",marginLeft:8,position:"absolute",top:"-8px",right:"-12px",minWidth:24,textAlign:"center",boxShadow:"0 1px 4px #0002"}},D.length))),u.createElement("ul",{className:na.proposalList,style:{listStyle:"none",padding:0,margin:0}},n==="completed"?j.map(H=>u.createElement("li",{key:H._id,style:{position:"relative",marginBottom:12}},u.createElement("div",{className:na.proposalCardButton,style:{cursor:"default",background:"#23232a",color:"#28a745",border:"2px solid #28a745",borderRadius:8,padding:"1rem",fontWeight:600}},u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Opponent:")," ",H.opponent||H.receiverName||H.senderName),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Date:")," ",$w(H.date),"  ",u.createElement("span",{className:na.proposalCardLabel},"Time:")," ",H.time),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Location:")," ",H.location),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Game Type:")," ",H.gameType),H.winner&&u.createElement("div",{style:{color:"#ffd700",fontWeight:700,marginTop:6,fontSize:"1em"}}," Winner: ",H.winner,r&&H.winnerChangedByName&&u.createElement("span",{style:{color:"#aaa",fontWeight:400,fontSize:"0.95em",marginLeft:8}},"(marked by ",H.winnerChangedByName,H.winnerChangedAt?` on ${new Date(H.winnerChangedAt).toLocaleString()}`:"",")")),r&&u.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"1px solid #ffd700",borderRadius:6,padding:"4px 12px",fontWeight:600,cursor:"pointer",fontSize:"0.95em",display:"inline-block"},disabled:X,onClick:()=>{const R=H.player||H.senderName,B=H.opponent||H.receiverName;F(H),te({player1:R,player2:B}),L(!0)},type:"button"},X?"Saving...":H.winner?"Edit Winner":"Set Winner")))):k.map(H=>u.createElement("li",{key:H._id,style:{position:"relative"}},u.createElement("button",{onClick:()=>a(H),className:na.proposalCardButton},u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},n==="sent"?"To:":"From:"),n==="sent"?H.receiverName:H.senderName,H.isCounter&&u.createElement("span",{style:{background:"#ff9800",color:"#fff",borderRadius:"6px",padding:"2px 8px",fontSize:"0.85em",marginLeft:"8px",fontWeight:"bold",display:"inline-block"}},"Counter Proposal")),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Date:")," ",$w(H.date),"  ",u.createElement("span",{className:na.proposalCardLabel},"Time:")," ",_M(H.time)),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Location:")," ",H.location),u.createElement("div",{className:na.proposalCardMessage},H.message),u.createElement("div",null,u.createElement("span",{className:na.proposalCardLabel},"Status:"),u.createElement("span",{style:{color:H.status==="pending"?"#d32f2f":H.status==="countered"?"#fbc02d":"#388e3c"}},H.status))),n==="sent"&&H.status==="pending"&&u.createElement("button",{className:na.cancelProposalBtn,style:{position:"absolute",top:10,right:10},onClick:R=>{R.stopPropagation(),m(H._id)},disabled:p},"Cancel")))),k.length===0&&u.createElement("div",{style:{color:"#ffecb3",textAlign:"center",marginTop:16}},"Nothing to see here."),h&&u.createElement("div",{className:na.confirmDialogBox,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1001,background:"#222",color:"#fff",borderRadius:"10px",padding:"2rem 2.5rem",boxShadow:"0 4px 32px #000a",maxWidth:"90vw",minWidth:"260px",textAlign:"center",border:"2px solid #e53e3e"}},u.createElement("p",null,"Are you sure you want to cancel this proposal?"),u.createElement("button",{onClick:()=>ee(h),disabled:p,style:{marginRight:12}},p?"Cancelling...":"Yes, Cancel"),u.createElement("button",{onClick:()=>m(null),disabled:p},"No, Go Back"),b&&u.createElement("div",{style:{color:"red",marginTop:8}},b))),u.createElement(b0,{open:P,onClose:()=>L(!1),player1:q.player1,player2:q.player2,onSelect:async H=>{if(G){se(!0);try{const R=await as.markCompleted(G._id,H,l,o),B=R&&R.proposal?R.proposal:{...G,winner:H,winnerChangedByName:l,winnerChangedByEmail:o,winnerChangedAt:new Date().toISOString()};C(Y=>Y.map($=>$._id===G._id?B:$)),d&&d(B),L(!1)}catch{alert("Failed to update winner.")}se(!1)}}}))}function IM(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function DM({proposal:t,phase:a,userNote:e,setUserNote:n,onConfirm:r,onClose:o,onCounterPropose:l,showNote:d=!0,confirmLabel:h=" Confirm Match",currentUserName:m,currentUserEmail:p}){if(!t)return null;const{senderName:y,receiverName:b,senderEmail:E,receiverEmail:S,day:C,date:_,time:x,location:D,gameType:A,raceLength:k,message:P,proposalNote:L}=t,G=p&&E&&p.toLowerCase()===E.toLowerCase()||m&&y&&m.toLowerCase()===y.toLowerCase();return u.createElement("div",{className:ct.confirmMatchCard},u.createElement("h1",{className:ct.confirmMatchTitle},u.createElement("span",{className:ct.redTitle}," Confirm Match")),u.createElement("div",{className:ct.confirmMatchDetails},u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"You:")," ",b||t.to||"N/A"),u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Opponent:")," ",y||t.from||"N/A"),C&&u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Day:")," ",C),u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Date:")," ",IM(_)),u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Time:")," ",x||"N/A"),u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Location:")," ",D||"N/A"),A&&u.createElement("div",{className:ct.detailRow},u.createElement(ah,{gameType:A,size:16}),u.createElement("strong",{className:ct.redTitle},"Game Type:")," ",A),k&&u.createElement("div",{className:ct.detailRow},u.createElement("strong",{className:ct.redTitle},"Race to:")," ",k),u.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginTop:18,justifyContent:"center",paddingBottom:8,width:"100%",boxSizing:"border-box"}},G?u.createElement(u.Fragment,null,u.createElement("span",{style:{color:"#888",fontWeight:500,fontSize:"1.1em"}},"You proposed this match. You can edit or message, but only your opponent can confirm/counter/cancel."),u.createElement("button",{className:ct.confirmBtn,style:{background:"#aaa",minWidth:120,marginLeft:16},onClick:o},"OK")):u.createElement(u.Fragment,null,u.createElement("button",{className:ct.confirmBtn,style:{minWidth:120},onClick:r},h),l&&u.createElement("button",{className:ct.confirmBtn,style:{background:"#fff",color:"#d32f2f",border:"1.5px solid #d32f2f",minWidth:120},onClick:l,type:"button"},"Counter-Propose"),u.createElement("button",{className:ct.confirmBtn,style:{background:"#aaa",minWidth:120},onClick:o},"Close")))))}function k2(t){var a,e,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(a=0;a<r;a++)t[a]&&(e=k2(t[a]))&&(n&&(n+=" "),n+=e)}else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function aa(){for(var t,a,e=0,n="",r=arguments.length;e<r;e++)(t=arguments[e])&&(a=k2(t))&&(n&&(n+=" "),n+=a);return n}function oh(){return typeof window<"u"}function bl(t){return L2(t)?(t.nodeName||"").toLowerCase():"#document"}function Ga(t){var a;return(t==null||(a=t.ownerDocument)==null?void 0:a.defaultView)||window}function ls(t){var a;return(a=(L2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:a.documentElement}function L2(t){return oh()?t instanceof Node||t instanceof Ga(t).Node:!1}function va(t){return oh()?t instanceof Element||t instanceof Ga(t).Element:!1}function ss(t){return oh()?t instanceof HTMLElement||t instanceof Ga(t).HTMLElement:!1}function Zw(t){return!oh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ga(t).ShadowRoot}function au(t){const{overflow:a,overflowX:e,overflowY:n,display:r}=br(t);return/auto|scroll|overlay|hidden|clip/.test(a+n+e)&&!["inline","contents"].includes(r)}function AM(t){return["table","td","th"].includes(bl(t))}function lh(t){return[":popover-open",":modal"].some(a=>{try{return t.matches(a)}catch{return!1}})}function w0(t){const a=x0(),e=va(t)?br(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!a&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!a&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(e.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(e.contain||"").includes(n))}function TM(t){let a=Ni(t);for(;ss(a)&&!ll(a);){if(w0(a))return a;if(lh(a))return null;a=Ni(a)}return null}function x0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ll(t){return["html","body","#document"].includes(bl(t))}function br(t){return Ga(t).getComputedStyle(t)}function ch(t){return va(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ni(t){if(bl(t)==="html")return t;const a=t.assignedSlot||t.parentNode||Zw(t)&&t.host||ls(t);return Zw(a)?a.host:a}function P2(t){const a=Ni(t);return ll(a)?t.ownerDocument?t.ownerDocument.body:t.body:ss(a)&&au(a)?a:P2(a)}function Zc(t,a,e){var n;a===void 0&&(a=[]),e===void 0&&(e=!0);const r=P2(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),l=Ga(r);if(o){const d=Eg(l);return a.concat(l,l.visualViewport||[],au(r)?r:[],d&&e?Zc(d):[])}return a.concat(r,Zc(r,[],e))}function Eg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const cl=Math.min,ao=Math.max,df=Math.round,vd=Math.floor,rs=t=>({x:t,y:t}),MM={left:"right",right:"left",bottom:"top",top:"bottom"},NM={start:"end",end:"start"};function RM(t,a,e){return ao(t,cl(a,e))}function uh(t,a){return typeof t=="function"?t(a):t}function ul(t){return t.split("-")[0]}function ru(t){return t.split("-")[1]}function kM(t){return t==="x"?"y":"x"}function S0(t){return t==="y"?"height":"width"}function tl(t){return["top","bottom"].includes(ul(t))?"y":"x"}function E0(t){return kM(tl(t))}function LM(t,a,e){e===void 0&&(e=!1);const n=ru(t),r=E0(t),o=S0(r);let l=r==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return a.reference[o]>a.floating[o]&&(l=ff(l)),[l,ff(l)]}function PM(t){const a=ff(t);return[Cg(t),a,Cg(a)]}function Cg(t){return t.replace(/start|end/g,a=>NM[a])}function OM(t,a,e){const n=["left","right"],r=["right","left"],o=["top","bottom"],l=["bottom","top"];switch(t){case"top":case"bottom":return e?a?r:n:a?n:r;case"left":case"right":return a?o:l;default:return[]}}function BM(t,a,e,n){const r=ru(t);let o=OM(ul(t),e==="start",n);return r&&(o=o.map(l=>l+"-"+r),a&&(o=o.concat(o.map(Cg)))),o}function ff(t){return t.replace(/left|right|bottom|top/g,a=>MM[a])}function UM(t){return{top:0,right:0,bottom:0,left:0,...t}}function O2(t){return typeof t!="number"?UM(t):{top:t,right:t,bottom:t,left:t}}function hf(t){const{x:a,y:e,width:n,height:r}=t;return{width:n,height:r,top:e,left:a,right:a+n,bottom:e+r,x:a,y:e}}var mf=typeof document<"u"?w.useLayoutEffect:w.useEffect;const zM={...Hx},jM=zM.useInsertionEffect,FM=jM||(t=>t());function HM(t){const a=w.useRef(()=>{});return FM(()=>{a.current=t}),w.useCallback(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return a.current==null?void 0:a.current(...n)},[])}var Rp={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qw;function YM(){if(qw)return bc;qw=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function e(n,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var d in r)d!=="key"&&(o[d]=r[d])}else o=r;return r=o.ref,{$$typeof:t,type:n,key:l,ref:r!==void 0?r:null,props:o}}return bc.Fragment=a,bc.jsx=e,bc.jsxs=e,bc}var Qw;function WM(){return Qw||(Qw=1,Rp.exports=YM()),Rp.exports}var wc=WM();function Vw(t,a,e){let{reference:n,floating:r}=t;const o=tl(a),l=E0(a),d=S0(l),h=ul(a),m=o==="y",p=n.x+n.width/2-r.width/2,y=n.y+n.height/2-r.height/2,b=n[d]/2-r[d]/2;let E;switch(h){case"top":E={x:p,y:n.y-r.height};break;case"bottom":E={x:p,y:n.y+n.height};break;case"right":E={x:n.x+n.width,y};break;case"left":E={x:n.x-r.width,y};break;default:E={x:n.x,y:n.y}}switch(ru(a)){case"start":E[l]-=b*(e&&m?-1:1);break;case"end":E[l]+=b*(e&&m?-1:1);break}return E}const GM=async(t,a,e)=>{const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:l}=e,d=o.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(a));let m=await l.getElementRects({reference:t,floating:a,strategy:r}),{x:p,y}=Vw(m,n,h),b=n,E={},S=0;for(let C=0;C<d.length;C++){const{name:_,fn:x}=d[C],{x:D,y:A,data:k,reset:P}=await x({x:p,y,initialPlacement:n,placement:b,strategy:r,middlewareData:E,rects:m,platform:l,elements:{reference:t,floating:a}});p=D??p,y=A??y,E={...E,[_]:{...E[_],...k}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(b=P.placement),P.rects&&(m=P.rects===!0?await l.getElementRects({reference:t,floating:a,strategy:r}):P.rects),{x:p,y}=Vw(m,b,h)),C=-1)}return{x:p,y,placement:b,strategy:r,middlewareData:E}};async function $M(t,a){var e;a===void 0&&(a={});const{x:n,y:r,platform:o,rects:l,elements:d,strategy:h}=t,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:y="floating",altBoundary:b=!1,padding:E=0}=uh(a,t),S=O2(E),_=d[b?y==="floating"?"reference":"floating":y],x=hf(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(_)))==null||e?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(d.floating)),boundary:m,rootBoundary:p,strategy:h})),D=y==="floating"?{x:n,y:r,width:l.floating.width,height:l.floating.height}:l.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d.floating)),k=await(o.isElement==null?void 0:o.isElement(A))?await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1}:{x:1,y:1},P=hf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:D,offsetParent:A,strategy:h}):D);return{top:(x.top-P.top+S.top)/k.y,bottom:(P.bottom-x.bottom+S.bottom)/k.y,left:(x.left-P.left+S.left)/k.x,right:(P.right-x.right+S.right)/k.x}}const ZM=t=>({name:"arrow",options:t,async fn(a){const{x:e,y:n,placement:r,rects:o,platform:l,elements:d,middlewareData:h}=a,{element:m,padding:p=0}=uh(t,a)||{};if(m==null)return{};const y=O2(p),b={x:e,y:n},E=E0(r),S=S0(E),C=await l.getDimensions(m),_=E==="y",x=_?"top":"left",D=_?"bottom":"right",A=_?"clientHeight":"clientWidth",k=o.reference[S]+o.reference[E]-b[E]-o.floating[S],P=b[E]-o.reference[E],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let G=L?L[A]:0;(!G||!await(l.isElement==null?void 0:l.isElement(L)))&&(G=d.floating[A]||o.floating[S]);const F=k/2-P/2,q=G/2-C[S]/2-1,te=cl(y[x],q),X=cl(y[D],q),se=te,ee=G-C[S]-X,j=G/2-C[S]/2+F,H=RM(se,j,ee),R=!h.arrow&&ru(r)!=null&&j!==H&&o.reference[S]/2-(j<se?te:X)-C[S]/2<0,B=R?j<se?j-se:j-ee:0;return{[E]:b[E]+B,data:{[E]:H,centerOffset:j-H-B,...R&&{alignmentOffset:B}},reset:R}}}),qM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(a){var e,n;const{placement:r,middlewareData:o,rects:l,initialPlacement:d,platform:h,elements:m}=a,{mainAxis:p=!0,crossAxis:y=!0,fallbackPlacements:b,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,..._}=uh(t,a);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const x=ul(r),D=tl(d),A=ul(d)===d,k=await(h.isRTL==null?void 0:h.isRTL(m.floating)),P=b||(A||!C?[ff(d)]:PM(d)),L=S!=="none";!b&&L&&P.push(...BM(d,C,S,k));const G=[d,...P],F=await $M(a,_),q=[];let te=((n=o.flip)==null?void 0:n.overflows)||[];if(p&&q.push(F[x]),y){const H=LM(r,l,k);q.push(F[H[0]],F[H[1]])}if(te=[...te,{placement:r,overflows:q}],!q.every(H=>H<=0)){var X,se;const H=(((X=o.flip)==null?void 0:X.index)||0)+1,R=G[H];if(R){var ee;const Y=y==="alignment"?D!==tl(R):!1,$=((ee=te[0])==null?void 0:ee.overflows[0])>0;if(!Y||$)return{data:{index:H,overflows:te},reset:{placement:R}}}let B=(se=te.filter(Y=>Y.overflows[0]<=0).sort((Y,$)=>Y.overflows[1]-$.overflows[1])[0])==null?void 0:se.placement;if(!B)switch(E){case"bestFit":{var j;const Y=(j=te.filter($=>{if(L){const T=tl($.placement);return T===D||T==="y"}return!0}).map($=>[$.placement,$.overflows.filter(T=>T>0).reduce((T,U)=>T+U,0)]).sort(($,T)=>$[1]-T[1])[0])==null?void 0:j[0];Y&&(B=Y);break}case"initialPlacement":B=d;break}if(r!==B)return{reset:{placement:B}}}return{}}}};async function QM(t,a){const{placement:e,platform:n,elements:r}=t,o=await(n.isRTL==null?void 0:n.isRTL(r.floating)),l=ul(e),d=ru(e),h=tl(e)==="y",m=["left","top"].includes(l)?-1:1,p=o&&h?-1:1,y=uh(a,t);let{mainAxis:b,crossAxis:E,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return d&&typeof S=="number"&&(E=d==="end"?S*-1:S),h?{x:E*p,y:b*m}:{x:b*m,y:E*p}}const VM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(a){var e,n;const{x:r,y:o,placement:l,middlewareData:d}=a,h=await QM(a,t);return l===((e=d.offset)==null?void 0:e.placement)&&(n=d.arrow)!=null&&n.alignmentOffset?{}:{x:r+h.x,y:o+h.y,data:{...h,placement:l}}}}};function B2(t){const a=br(t);let e=parseFloat(a.width)||0,n=parseFloat(a.height)||0;const r=ss(t),o=r?t.offsetWidth:e,l=r?t.offsetHeight:n,d=df(e)!==o||df(n)!==l;return d&&(e=o,n=l),{width:e,height:n,$:d}}function C0(t){return va(t)?t:t.contextElement}function nl(t){const a=C0(t);if(!ss(a))return rs(1);const e=a.getBoundingClientRect(),{width:n,height:r,$:o}=B2(a);let l=(o?df(e.width):e.width)/n,d=(o?df(e.height):e.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const XM=rs(0);function U2(t){const a=Ga(t);return!x0()||!a.visualViewport?XM:{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}}function JM(t,a,e){return a===void 0&&(a=!1),!e||a&&e!==Ga(t)?!1:a}function lo(t,a,e,n){a===void 0&&(a=!1),e===void 0&&(e=!1);const r=t.getBoundingClientRect(),o=C0(t);let l=rs(1);a&&(n?va(n)&&(l=nl(n)):l=nl(t));const d=JM(o,e,n)?U2(o):rs(0);let h=(r.left+d.x)/l.x,m=(r.top+d.y)/l.y,p=r.width/l.x,y=r.height/l.y;if(o){const b=Ga(o),E=n&&va(n)?Ga(n):n;let S=b,C=Eg(S);for(;C&&n&&E!==S;){const _=nl(C),x=C.getBoundingClientRect(),D=br(C),A=x.left+(C.clientLeft+parseFloat(D.paddingLeft))*_.x,k=x.top+(C.clientTop+parseFloat(D.paddingTop))*_.y;h*=_.x,m*=_.y,p*=_.x,y*=_.y,h+=A,m+=k,S=Ga(C),C=Eg(S)}}return hf({width:p,height:y,x:h,y:m})}function _0(t,a){const e=ch(t).scrollLeft;return a?a.left+e:lo(ls(t)).left+e}function z2(t,a,e){e===void 0&&(e=!1);const n=t.getBoundingClientRect(),r=n.left+a.scrollLeft-(e?0:_0(t,n)),o=n.top+a.scrollTop;return{x:r,y:o}}function KM(t){let{elements:a,rect:e,offsetParent:n,strategy:r}=t;const o=r==="fixed",l=ls(n),d=a?lh(a.floating):!1;if(n===l||d&&o)return e;let h={scrollLeft:0,scrollTop:0},m=rs(1);const p=rs(0),y=ss(n);if((y||!y&&!o)&&((bl(n)!=="body"||au(l))&&(h=ch(n)),ss(n))){const E=lo(n);m=nl(n),p.x=E.x+n.clientLeft,p.y=E.y+n.clientTop}const b=l&&!y&&!o?z2(l,h,!0):rs(0);return{width:e.width*m.x,height:e.height*m.y,x:e.x*m.x-h.scrollLeft*m.x+p.x+b.x,y:e.y*m.y-h.scrollTop*m.y+p.y+b.y}}function eN(t){return Array.from(t.getClientRects())}function tN(t){const a=ls(t),e=ch(t),n=t.ownerDocument.body,r=ao(a.scrollWidth,a.clientWidth,n.scrollWidth,n.clientWidth),o=ao(a.scrollHeight,a.clientHeight,n.scrollHeight,n.clientHeight);let l=-e.scrollLeft+_0(t);const d=-e.scrollTop;return br(n).direction==="rtl"&&(l+=ao(a.clientWidth,n.clientWidth)-r),{width:r,height:o,x:l,y:d}}function nN(t,a){const e=Ga(t),n=ls(t),r=e.visualViewport;let o=n.clientWidth,l=n.clientHeight,d=0,h=0;if(r){o=r.width,l=r.height;const m=x0();(!m||m&&a==="fixed")&&(d=r.offsetLeft,h=r.offsetTop)}return{width:o,height:l,x:d,y:h}}function aN(t,a){const e=lo(t,!0,a==="fixed"),n=e.top+t.clientTop,r=e.left+t.clientLeft,o=ss(t)?nl(t):rs(1),l=t.clientWidth*o.x,d=t.clientHeight*o.y,h=r*o.x,m=n*o.y;return{width:l,height:d,x:h,y:m}}function Xw(t,a,e){let n;if(a==="viewport")n=nN(t,e);else if(a==="document")n=tN(ls(t));else if(va(a))n=aN(a,e);else{const r=U2(t);n={x:a.x-r.x,y:a.y-r.y,width:a.width,height:a.height}}return hf(n)}function j2(t,a){const e=Ni(t);return e===a||!va(e)||ll(e)?!1:br(e).position==="fixed"||j2(e,a)}function rN(t,a){const e=a.get(t);if(e)return e;let n=Zc(t,[],!1).filter(d=>va(d)&&bl(d)!=="body"),r=null;const o=br(t).position==="fixed";let l=o?Ni(t):t;for(;va(l)&&!ll(l);){const d=br(l),h=w0(l);!h&&d.position==="fixed"&&(r=null),(o?!h&&!r:!h&&d.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||au(l)&&!h&&j2(t,l))?n=n.filter(p=>p!==l):r=d,l=Ni(l)}return a.set(t,n),n}function sN(t){let{element:a,boundary:e,rootBoundary:n,strategy:r}=t;const l=[...e==="clippingAncestors"?lh(a)?[]:rN(a,this._c):[].concat(e),n],d=l[0],h=l.reduce((m,p)=>{const y=Xw(a,p,r);return m.top=ao(y.top,m.top),m.right=cl(y.right,m.right),m.bottom=cl(y.bottom,m.bottom),m.left=ao(y.left,m.left),m},Xw(a,d,r));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function iN(t){const{width:a,height:e}=B2(t);return{width:a,height:e}}function oN(t,a,e){const n=ss(a),r=ls(a),o=e==="fixed",l=lo(t,!0,o,a);let d={scrollLeft:0,scrollTop:0};const h=rs(0);function m(){h.x=_0(r)}if(n||!n&&!o)if((bl(a)!=="body"||au(r))&&(d=ch(a)),n){const E=lo(a,!0,o,a);h.x=E.x+a.clientLeft,h.y=E.y+a.clientTop}else r&&m();o&&!n&&r&&m();const p=r&&!n&&!o?z2(r,d):rs(0),y=l.left+d.scrollLeft-h.x-p.x,b=l.top+d.scrollTop-h.y-p.y;return{x:y,y:b,width:l.width,height:l.height}}function kp(t){return br(t).position==="static"}function Jw(t,a){if(!ss(t)||br(t).position==="fixed")return null;if(a)return a(t);let e=t.offsetParent;return ls(t)===e&&(e=e.ownerDocument.body),e}function F2(t,a){const e=Ga(t);if(lh(t))return e;if(!ss(t)){let r=Ni(t);for(;r&&!ll(r);){if(va(r)&&!kp(r))return r;r=Ni(r)}return e}let n=Jw(t,a);for(;n&&AM(n)&&kp(n);)n=Jw(n,a);return n&&ll(n)&&kp(n)&&!w0(n)?e:n||TM(t)||e}const lN=async function(t){const a=this.getOffsetParent||F2,e=this.getDimensions,n=await e(t.floating);return{reference:oN(t.reference,await a(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function cN(t){return br(t).direction==="rtl"}const uN={convertOffsetParentRelativeRectToViewportRelativeRect:KM,getDocumentElement:ls,getClippingRect:sN,getOffsetParent:F2,getElementRects:lN,getClientRects:eN,getDimensions:iN,getScale:nl,isElement:va,isRTL:cN};function H2(t,a){return t.x===a.x&&t.y===a.y&&t.width===a.width&&t.height===a.height}function dN(t,a){let e=null,n;const r=ls(t);function o(){var d;clearTimeout(n),(d=e)==null||d.disconnect(),e=null}function l(d,h){d===void 0&&(d=!1),h===void 0&&(h=1),o();const m=t.getBoundingClientRect(),{left:p,top:y,width:b,height:E}=m;if(d||a(),!b||!E)return;const S=vd(y),C=vd(r.clientWidth-(p+b)),_=vd(r.clientHeight-(y+E)),x=vd(p),A={rootMargin:-S+"px "+-C+"px "+-_+"px "+-x+"px",threshold:ao(0,cl(1,h))||1};let k=!0;function P(L){const G=L[0].intersectionRatio;if(G!==h){if(!k)return l();G?l(!1,G):n=setTimeout(()=>{l(!1,1e-7)},1e3)}G===1&&!H2(m,t.getBoundingClientRect())&&l(),k=!1}try{e=new IntersectionObserver(P,{...A,root:r.ownerDocument})}catch{e=new IntersectionObserver(P,A)}e.observe(t)}return l(!0),o}function fN(t,a,e,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,m=C0(t),p=r||o?[...m?Zc(m):[],...Zc(a)]:[];p.forEach(x=>{r&&x.addEventListener("scroll",e,{passive:!0}),o&&x.addEventListener("resize",e)});const y=m&&d?dN(m,e):null;let b=-1,E=null;l&&(E=new ResizeObserver(x=>{let[D]=x;D&&D.target===m&&E&&(E.unobserve(a),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var A;(A=E)==null||A.observe(a)})),e()}),m&&!h&&E.observe(m),E.observe(a));let S,C=h?lo(t):null;h&&_();function _(){const x=lo(t);C&&!H2(C,x)&&e(),C=x,S=requestAnimationFrame(_)}return e(),()=>{var x;p.forEach(D=>{r&&D.removeEventListener("scroll",e),o&&D.removeEventListener("resize",e)}),y==null||y(),(x=E)==null||x.disconnect(),E=null,h&&cancelAnimationFrame(S)}}const hN=VM,mN=qM,Kw=ZM,pN=(t,a,e)=>{const n=new Map,r={platform:uN,...e},o={...r.platform,_c:n};return GM(t,a,{...r,platform:o})};var Hd=typeof document<"u"?w.useLayoutEffect:w.useEffect;function pf(t,a){if(t===a)return!0;if(typeof t!=typeof a)return!1;if(typeof t=="function"&&t.toString()===a.toString())return!0;let e,n,r;if(t&&a&&typeof t=="object"){if(Array.isArray(t)){if(e=t.length,e!==a.length)return!1;for(n=e;n--!==0;)if(!pf(t[n],a[n]))return!1;return!0}if(r=Object.keys(t),e=r.length,e!==Object.keys(a).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(a,r[n]))return!1;for(n=e;n--!==0;){const o=r[n];if(!(o==="_owner"&&t.$$typeof)&&!pf(t[o],a[o]))return!1}return!0}return t!==t&&a!==a}function Y2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function e1(t,a){const e=Y2(t);return Math.round(a*e)/e}function Lp(t){const a=w.useRef(t);return Hd(()=>{a.current=t}),a}function gN(t){t===void 0&&(t={});const{placement:a="bottom",strategy:e="absolute",middleware:n=[],platform:r,elements:{reference:o,floating:l}={},transform:d=!0,whileElementsMounted:h,open:m}=t,[p,y]=w.useState({x:0,y:0,strategy:e,placement:a,middlewareData:{},isPositioned:!1}),[b,E]=w.useState(n);pf(b,n)||E(n);const[S,C]=w.useState(null),[_,x]=w.useState(null),D=w.useCallback(Y=>{Y!==L.current&&(L.current=Y,C(Y))},[]),A=w.useCallback(Y=>{Y!==G.current&&(G.current=Y,x(Y))},[]),k=o||S,P=l||_,L=w.useRef(null),G=w.useRef(null),F=w.useRef(p),q=h!=null,te=Lp(h),X=Lp(r),se=Lp(m),ee=w.useCallback(()=>{if(!L.current||!G.current)return;const Y={placement:a,strategy:e,middleware:b};X.current&&(Y.platform=X.current),pN(L.current,G.current,Y).then($=>{const T={...$,isPositioned:se.current!==!1};j.current&&!pf(F.current,T)&&(F.current=T,s2.flushSync(()=>{y(T)}))})},[b,a,e,X,se]);Hd(()=>{m===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,y(Y=>({...Y,isPositioned:!1})))},[m]);const j=w.useRef(!1);Hd(()=>(j.current=!0,()=>{j.current=!1}),[]),Hd(()=>{if(k&&(L.current=k),P&&(G.current=P),k&&P){if(te.current)return te.current(k,P,ee);ee()}},[k,P,ee,te,q]);const H=w.useMemo(()=>({reference:L,floating:G,setReference:D,setFloating:A}),[D,A]),R=w.useMemo(()=>({reference:k,floating:P}),[k,P]),B=w.useMemo(()=>{const Y={position:e,left:0,top:0};if(!R.floating)return Y;const $=e1(R.floating,p.x),T=e1(R.floating,p.y);return d?{...Y,transform:"translate("+$+"px, "+T+"px)",...Y2(R.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:$,top:T}},[e,d,R.floating,p.x,p.y]);return w.useMemo(()=>({...p,update:ee,refs:H,elements:R,floatingStyles:B}),[p,ee,H,R,B])}const yN=t=>{function a(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:t,fn(e){const{element:n,padding:r}=typeof t=="function"?t(e):t;return n&&a(n)?n.current!=null?Kw({element:n.current,padding:r}).fn(e):{}:n?Kw({element:n,padding:r}).fn(e):{}}}},vN=(t,a)=>({...hN(t),options:[t,a]}),bN=(t,a)=>({...mN(t),options:[t,a]}),wN=(t,a)=>({...yN(t),options:[t,a]}),xN={...Hx};let t1=!1,SN=0;const n1=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+SN++;function EN(){const[t,a]=w.useState(()=>t1?n1():void 0);return mf(()=>{t==null&&a(n1())},[]),w.useEffect(()=>{t1=!0},[]),t}const CN=xN.useId,W2=CN||EN,_N=w.forwardRef(function(a,e){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:o,shift:l}},width:d=14,height:h=7,tipRadius:m=0,strokeWidth:p=0,staticOffset:y,stroke:b,d:E,style:{transform:S,...C}={},..._}=a,x=W2(),[D,A]=w.useState(!1);if(mf(()=>{if(!r)return;br(r).direction==="rtl"&&A(!0)},[r]),!r)return null;const[k,P]=n.split("-"),L=k==="top"||k==="bottom";let G=y;(L&&l!=null&&l.x||!L&&l!=null&&l.y)&&(G=null);const F=p*2,q=F/2,te=d/2*(m/-8+1),X=h/2*m/4,se=!!E,ee=G&&P==="end"?"bottom":"top";let j=G&&P==="end"?"right":"left";G&&D&&(j=P==="end"?"left":"right");const H=(o==null?void 0:o.x)!=null?G||o.x:"",R=(o==null?void 0:o.y)!=null?G||o.y:"",B=E||"M0,0"+(" H"+d)+(" L"+(d-te)+","+(h-X))+(" Q"+d/2+","+h+" "+te+","+(h-X))+" Z",Y={top:se?"rotate(180deg)":"",left:se?"rotate(90deg)":"rotate(-90deg)",bottom:se?"":"rotate(180deg)",right:se?"rotate(-90deg)":"rotate(90deg)"}[k];return wc.jsxs("svg",{..._,"aria-hidden":!0,ref:e,width:se?d:d+F,height:d,viewBox:"0 0 "+d+" "+(h>d?h:d),style:{position:"absolute",pointerEvents:"none",[j]:H,[ee]:R,[k]:L||se?"100%":"calc(100% - "+F/2+"px)",transform:[Y,S].filter($=>!!$).join(" "),...C},children:[F>0&&wc.jsx("path",{clipPath:"url(#"+x+")",fill:"none",stroke:b,strokeWidth:F+(E?0:1),d:B}),wc.jsx("path",{stroke:F&&!E?_.fill:"none",d:B}),wc.jsx("clipPath",{id:x,children:wc.jsx("rect",{x:-q,y:q*(se?-1:1),width:d+F,height:d})})]})});function IN(){const t=new Map;return{emit(a,e){var n;(n=t.get(a))==null||n.forEach(r=>r(e))},on(a,e){t.has(a)||t.set(a,new Set),t.get(a).add(e)},off(a,e){var n;(n=t.get(a))==null||n.delete(e)}}}const DN=w.createContext(null),AN=w.createContext(null),TN=()=>{var t;return((t=w.useContext(DN))==null?void 0:t.id)||null},MN=()=>w.useContext(AN);function NN(t){const{open:a=!1,onOpenChange:e,elements:n}=t,r=W2(),o=w.useRef({}),[l]=w.useState(()=>IN()),d=TN()!=null,[h,m]=w.useState(n.reference),p=HM((E,S,C)=>{o.current.openEvent=E?S:void 0,l.emit("openchange",{open:E,event:S,reason:C,nested:d}),e==null||e(E,S,C)}),y=w.useMemo(()=>({setPositionReference:m}),[]),b=w.useMemo(()=>({reference:h||n.reference||null,floating:n.floating||null,domReference:n.reference}),[h,n.reference,n.floating]);return w.useMemo(()=>({dataRef:o,open:a,onOpenChange:p,elements:b,events:l,floatingId:r,refs:y}),[a,p,b,l,r,y])}function RN(t){t===void 0&&(t={});const{nodeId:a}=t,e=NN({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||e,r=n.elements,[o,l]=w.useState(null),[d,h]=w.useState(null),p=(r==null?void 0:r.domReference)||o,y=w.useRef(null),b=MN();mf(()=>{p&&(y.current=p)},[p]);const E=gN({...t,elements:{...r,...d&&{reference:d}}}),S=w.useCallback(A=>{const k=va(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),getClientRects:()=>A.getClientRects(),contextElement:A}:A;h(k),E.refs.setReference(k)},[E.refs]),C=w.useCallback(A=>{(va(A)||A===null)&&(y.current=A,l(A)),(va(E.refs.reference.current)||E.refs.reference.current===null||A!==null&&!va(A))&&E.refs.setReference(A)},[E.refs]),_=w.useMemo(()=>({...E.refs,setReference:C,setPositionReference:S,domReference:y}),[E.refs,C,S]),x=w.useMemo(()=>({...E.elements,domReference:p}),[E.elements,p]),D=w.useMemo(()=>({...E,...n,refs:_,elements:x,nodeId:a}),[E,_,x,a,n]);return mf(()=>{n.dataRef.current.floatingContext=D;const A=b==null?void 0:b.nodesRef.current.find(k=>k.id===a);A&&(A.context=D)}),w.useMemo(()=>({...E,context:D,refs:_,elements:x}),[E,_,x,D])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var _g=function(a,e){return _g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},_g(a,e)};function Qn(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");_g(t,a);function e(){this.constructor=t}t.prototype=a===null?Object.create(a):(e.prototype=a.prototype,new e)}var Tt=function(){return Tt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},Tt.apply(this,arguments)};function ts(t,a,e){if(e||arguments.length===2)for(var n=0,r=a.length,o;n<r;n++)(o||!(n in a))&&(o||(o=Array.prototype.slice.call(a,0,n)),o[n]=a[n]);return t.concat(o||Array.prototype.slice.call(a))}var kN=function(t){var a=t.showTimeSelectOnly,e=a===void 0?!1:a,n=t.showTime,r=n===void 0?!1:n,o=t.className,l=t.children,d=e?"Choose Time":"Choose Date".concat(r?" and Time":"");return u.createElement("div",{className:o,role:"dialog","aria-label":d,"aria-modal":"true"},l)},LN=function(t,a){var e=w.useRef(null),n=w.useRef(t);n.current=t;var r=w.useCallback(function(o){var l,d=o.composed&&o.composedPath&&o.composedPath().find(function(h){return h instanceof Node})||o.target;e.current&&!e.current.contains(d)&&(a&&d instanceof HTMLElement&&d.classList.contains(a)||(l=n.current)===null||l===void 0||l.call(n,o))},[a]);return w.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),e},dh=function(t){var a=t.children,e=t.onClickOutside,n=t.className,r=t.containerRef,o=t.style,l=t.ignoreClass,d=LN(e,l);return u.createElement("div",{className:n,style:o,ref:function(h){d.current=h,r&&(r.current=h)}},a)},Te;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(Te||(Te={}));function G2(){var t=typeof window<"u"?window:globalThis;return t}var su=12;function Pt(t){if(t==null)return new Date;var a=typeof t=="string"?C2(t):Oe(t);return fh(a)?a:new Date}function Pp(t,a,e,n,r){r===void 0&&(r=Pt());for(var o=dl(e)||dl(I0()),l=Array.isArray(a)?a:[a],d=0,h=l;d<h.length;d++){var m=h[d],p=OA(t,m,r,{locale:o});if(fh(p)&&(!n||t===cn(p,m,e)))return p}return null}function fh(t,a){return af(t)&&!oo(t,new Date("1/1/1800"))}function cn(t,a,e){if(e==="en")return Wa(t,a,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=e?dl(e):void 0;return e&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(e,'"].')),n=n||dl(I0()),Wa(t,a,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function pr(t,a){var e=a.dateFormat,n=a.locale,r=Array.isArray(e)&&e.length>0?e[0]:e;return t&&cn(t,r,n)||""}var $2=" - ";function PN(t,a,e){if(!t)return"";var n=pr(t,e),r=a?pr(a,e):"";return"".concat(n).concat($2).concat(r)}function ON(t,a){if(!(t!=null&&t.length))return"";var e=t[0]?pr(t[0],a):"";if(t.length===1)return e;if(t.length===2&&t[1]){var n=pr(t[1],a);return"".concat(e,", ").concat(n)}var r=t.length-1;return"".concat(e," (+").concat(r,")")}function Op(t,a){var e=a.hour,n=e===void 0?0:e,r=a.minute,o=r===void 0?0:r,l=a.second,d=l===void 0?0:l;return zd(jd(Fd(t,d),o),n)}function BN(t){return m0(t)}function UN(t,a){return cn(t,"ddd",a)}function Yd(t){return io(t)}function Ti(t,a,e){var n=dl(a||I0());return js(t,{locale:n,weekStartsOn:e})}function Bs(t){return p2(t)}function Mc(t){return sh(t)}function a1(t){return wg(t)}function r1(){return io(Pt())}function s1(t){return h2(t)}function zN(t){return H5(t)}function jN(t){return m2(t)}function Jr(t,a){return t&&a?jA(t,a):!t&&!a}function ya(t,a){return t&&a?UA(t,a):!t&&!a}function gf(t,a){return t&&a?zA(t,a):!t&&!a}function At(t,a){return t&&a?z5(t,a):!t&&!a}function Ji(t,a){return t&&a?FD(t,a):!t&&!a}function Nc(t,a,e){var n,r=io(a),o=h2(e);try{n=$c(t,{start:r,end:o})}catch{n=!1}return n}function I0(){var t=G2();return t.__localeId__}function dl(t){if(typeof t=="string"){var a=G2();return a.__localeData__?a.__localeData__[t]:void 0}else return t}function FN(t,a,e){return a(cn(t,"EEEE",e))}function HN(t,a){return cn(t,"EEEEEE",a)}function YN(t,a){return cn(t,"EEE",a)}function D0(t,a){return cn(gr(Pt(),t),"LLLL",a)}function Z2(t,a){return cn(gr(Pt(),t),"LLL",a)}function WN(t,a){return cn(Xo(Pt(),t),"QQQ",a)}function yr(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.maxDate,o=e.excludeDates,l=e.excludeDateIntervals,d=e.includeDates,h=e.includeDateIntervals,m=e.filterDate;return iu(t,{minDate:n,maxDate:r})||o&&o.some(function(p){return p instanceof Date?At(t,p):At(t,p.date)})||l&&l.some(function(p){var y=p.start,b=p.end;return $c(t,{start:y,end:b})})||d&&!d.some(function(p){return At(t,p)})||h&&!h.some(function(p){var y=p.start,b=p.end;return $c(t,{start:y,end:b})})||m&&!m(Pt(t))||!1}function A0(t,a){var e=a===void 0?{}:a,n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some(function(o){var l=o.start,d=o.end;return $c(t,{start:l,end:d})}):n&&n.some(function(o){var l;return o instanceof Date?At(t,o):At(t,(l=o.date)!==null&&l!==void 0?l:new Date)})||!1}function q2(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.maxDate,o=e.excludeDates,l=e.includeDates,d=e.filterDate;return iu(t,{minDate:n?p2(n):void 0,maxDate:r?m2(r):void 0})||(o==null?void 0:o.some(function(h){return ya(t,h instanceof Date?h:h.date)}))||l&&!l.some(function(h){return ya(t,h)})||d&&!d(Pt(t))||!1}function bd(t,a,e,n){var r=pt(t),o=ha(t),l=pt(a),d=ha(a),h=pt(n);return r===l&&r===h?o<=e&&e<=d:r<l?h===r&&o<=e||h===l&&d>=e||h<l&&h>r:!1}function GN(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.maxDate,o=e.excludeDates,l=e.includeDates;return iu(t,{minDate:n,maxDate:r})||o&&o.some(function(d){return ya(d instanceof Date?d:d.date,t)})||l&&!l.some(function(d){return ya(d,t)})||!1}function wd(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.maxDate,o=e.excludeDates,l=e.includeDates,d=e.filterDate;return iu(t,{minDate:n,maxDate:r})||(o==null?void 0:o.some(function(h){return gf(t,h instanceof Date?h:h.date)}))||l&&!l.some(function(h){return gf(t,h)})||d&&!d(Pt(t))||!1}function xd(t,a,e){if(!a||!e||!af(a)||!af(e))return!1;var n=pt(a),r=pt(e);return n<=t&&r>=t}function Wd(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.maxDate,o=e.excludeDates,l=e.includeDates,d=e.filterDate,h=new Date(t,0,1);return iu(h,{minDate:n?sh(n):void 0,maxDate:r?g2(r):void 0})||(o==null?void 0:o.some(function(m){return Jr(h,m instanceof Date?m:m.date)}))||l&&!l.some(function(m){return Jr(h,m)})||d&&!d(Pt(h))||!1}function Sd(t,a,e,n){var r=pt(t),o=to(t),l=pt(a),d=to(a),h=pt(n);return r===l&&r===h?o<=e&&e<=d:r<l?h===r&&o<=e||h===l&&d>=e||h<l&&h>r:!1}function iu(t,a){var e,n=a===void 0?{}:a,r=n.minDate,o=n.maxDate;return(e=r&&il(t,r)<0||o&&il(t,o)>0)!==null&&e!==void 0?e:!1}function i1(t,a){return a.some(function(e){return Ps(e)===Ps(t)&&Os(e)===Os(t)&&Ai(e)===Ai(t)})}function o1(t,a){var e=a===void 0?{}:a,n=e.excludeTimes,r=e.includeTimes,o=e.filterTime;return n&&i1(t,n)||r&&!i1(t,r)||o&&!o(t)||!1}function l1(t,a){var e=a.minTime,n=a.maxTime;if(!e||!n)throw new Error("Both minTime and maxTime props required");var r=Pt();r=zd(r,Ps(t)),r=jd(r,Os(t)),r=Fd(r,Ai(t));var o=Pt();o=zd(o,Ps(e)),o=jd(o,Os(e)),o=Fd(o,Ai(e));var l=Pt();l=zd(l,Ps(n)),l=jd(l,Os(n)),l=Fd(l,Ai(n));var d;try{d=!$c(r,{start:o,end:l})}catch{d=!1}return d}function c1(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.includeDates,o=no(t,1);return n&&rf(n,o)>0||r&&r.every(function(l){return rf(l,o)>0})||!1}function u1(t,a){var e=a===void 0?{}:a,n=e.maxDate,r=e.includeDates,o=Rr(t,1);return n&&rf(o,n)>0||r&&r.every(function(l){return rf(o,l)>0})||!1}function $N(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.includeDates,o=sh(t),l=I2(o);return n&&sf(n,l)>0||r&&r.every(function(d){return sf(d,l)>0})||!1}function ZN(t,a){var e=a===void 0?{}:a,n=e.maxDate,r=e.includeDates,o=g2(t),l=h0(o,1);return n&&sf(l,n)>0||r&&r.every(function(d){return sf(l,d)>0})||!1}function d1(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.includeDates,o=ol(t,1);return n&&of(n,o)>0||r&&r.every(function(l){return of(l,o)>0})||!1}function qN(t,a){var e=a===void 0?{}:a,n=e.minDate,r=e.yearItemNumber,o=r===void 0?su:r,l=Mc(ol(t,o)),d=Di(l,o).endPeriod,h=n&&pt(n);return h&&h>d||!1}function f1(t,a){var e=a===void 0?{}:a,n=e.maxDate,r=e.includeDates,o=ks(t,1);return n&&of(o,n)>0||r&&r.every(function(l){return of(o,l)>0})||!1}function QN(t,a){var e=a===void 0?{}:a,n=e.maxDate,r=e.yearItemNumber,o=r===void 0?su:r,l=ks(t,o),d=Di(l,o).startPeriod,h=n&&pt(n);return h&&h<d||!1}function Q2(t){var a=t.minDate,e=t.includeDates;if(e&&a){var n=e.filter(function(r){return il(r,a)>=0});return Ow(n)}else return e?Ow(e):a}function V2(t){var a=t.maxDate,e=t.includeDates;if(e&&a){var n=e.filter(function(r){return il(r,a)<=0});return Pw(n)}else return e?Pw(e):a}function h1(t,a){var e;t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--highlighted");for(var n=new Map,r=0,o=t.length;r<o;r++){var l=t[r];if(Ls(l)){var d=cn(l,"MM.dd.yyyy"),h=n.get(d)||[];h.includes(a)||(h.push(a),n.set(d,h))}else if(typeof l=="object"){var m=Object.keys(l),p=(e=m[0])!==null&&e!==void 0?e:"",y=l[p];if(typeof p=="string"&&Array.isArray(y))for(var b=0,E=y.length;b<E;b++){var S=y[b];if(S){var d=cn(S,"MM.dd.yyyy"),h=n.get(d)||[];h.includes(p)||(h.push(p),n.set(d,h))}}}}return n}function VN(t,a){return t.length!==a.length?!1:t.every(function(e,n){return e===a[n]})}function XN(t,a){t===void 0&&(t=[]),a===void 0&&(a="react-datepicker__day--holidays");var e=new Map;return t.forEach(function(n){var r=n.date,o=n.holidayName;if(Ls(r)){var l=cn(r,"MM.dd.yyyy"),d=e.get(l)||{className:"",holidayNames:[]};if(!("className"in d&&d.className===a&&VN(d.holidayNames,[o]))){d.className=a;var h=d.holidayNames;d.holidayNames=h?ts(ts([],h,!0),[o],!1):[o],e.set(l,d)}}}),e}function JN(t,a,e,n,r){for(var o=r.length,l=[],d=0;d<o;d++){var h=t,m=r[d];m&&(h=P5(h,Ps(m)),h=bg(h,Os(m)),h=U5(h,Ai(m)));var p=bg(t,(e+1)*n);Fs(h,a)&&oo(h,p)&&m!=null&&l.push(m)}return l}function m1(t){return t<10?"0".concat(t):"".concat(t)}function Di(t,a){a===void 0&&(a=su);var e=Math.ceil(pt(t)/a)*a,n=e-(a-1);return{startPeriod:n,endPeriod:e}}function KN(t){var a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+e-+a)/36e5)}function p1(t){var a=t.getSeconds(),e=t.getMilliseconds();return Oe(t.getTime()-a*1e3-e)}function eR(t,a){return p1(t).getTime()===p1(a).getTime()}function g1(t){if(!Ls(t))throw new Error("Invalid date");var a=new Date(t);return a.setHours(0,0,0,0),a}function y1(t,a){if(!Ls(t)||!Ls(a))throw new Error("Invalid date received");var e=g1(t),n=g1(a);return oo(e,n)}function X2(t){return t.key===Te.Space}var tR=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.inputRef=u.createRef(),n.onTimeChange=function(r){var o,l;n.setState({time:r});var d=n.props.date,h=d instanceof Date&&!isNaN(+d),m=h?d:new Date;if(r!=null&&r.includes(":")){var p=r.split(":"),y=p[0],b=p[1];m.setHours(Number(y)),m.setMinutes(Number(b))}(l=(o=n.props).onChange)===null||l===void 0||l.call(o,m)},n.renderTimeInput=function(){var r=n.state.time,o=n.props,l=o.date,d=o.timeString,h=o.customTimeInput;return h?w.cloneElement(h,{date:l,value:r,onChange:n.onTimeChange}):u.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var m;(m=n.inputRef.current)===null||m===void 0||m.focus()},required:!0,value:r,onChange:function(m){n.onTimeChange(m.target.value||d)}})},n.state={time:n.props.timeString},n}return a.getDerivedStateFromProps=function(e,n){return e.timeString!==n.time?{time:e.timeString}:null},a.prototype.render=function(){return u.createElement("div",{className:"react-datepicker__input-time-container"},u.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),u.createElement("div",{className:"react-datepicker-time__input-container"},u.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},a}(w.Component),nR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.dayEl=w.createRef(),e.handleClick=function(n){!e.isDisabled()&&e.props.onClick&&e.props.onClick(n)},e.handleMouseEnter=function(n){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(n)},e.handleOnKeyDown=function(n){var r,o,l=n.key;l===Te.Space&&(n.preventDefault(),n.key=Te.Enter),(o=(r=e.props).handleOnKeyDown)===null||o===void 0||o.call(r,n)},e.isSameDay=function(n){return At(e.props.day,n)},e.isKeyboardSelected=function(){var n;if(e.props.disabledKeyboardNavigation)return!1;var r=e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(l){return e.isSameDayOrWeek(l)}):e.isSameDayOrWeek(e.props.selected),o=e.props.preSelection&&e.isDisabled(e.props.preSelection);return!r&&e.isSameDayOrWeek(e.props.preSelection)&&!o},e.isDisabled=function(n){return n===void 0&&(n=e.props.day),yr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(){return A0(e.props.day,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.isStartOfWeek=function(){return At(e.props.day,Ti(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameWeek=function(n){return e.props.showWeekPicker&&At(n,Ti(e.props.day,e.props.locale,e.props.calendarStartDay))},e.isSameDayOrWeek=function(n){return e.isSameDay(n)||e.isSameWeek(n)},e.getHighLightedClass=function(){var n=e.props,r=n.day,o=n.highlightDates;if(!o)return!1;var l=cn(r,"MM.dd.yyyy");return o.get(l)},e.getHolidaysClass=function(){var n,r=e.props,o=r.day,l=r.holidays;if(!l)return[void 0];var d=cn(o,"MM.dd.yyyy");return l.has(d)?[(n=l.get(d))===null||n===void 0?void 0:n.className]:[void 0]},e.isInRange=function(){var n=e.props,r=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:Nc(r,o,l)},e.isInSelectingRange=function(){var n,r=e.props,o=r.day,l=r.selectsStart,d=r.selectsEnd,h=r.selectsRange,m=r.selectsDisabledDaysInRange,p=r.startDate,y=r.endDate,b=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return!(l||d||h)||!b||!m&&e.isDisabled()?!1:l&&y&&(oo(b,y)||Ji(b,y))?Nc(o,b,y):d&&p&&(Fs(b,p)||Ji(b,p))||h&&p&&!y&&(Fs(b,p)||Ji(b,p))?Nc(o,p,b):!1},e.isSelectingRangeStart=function(){var n;if(!e.isInSelectingRange())return!1;var r=e.props,o=r.day,l=r.startDate,d=r.selectsStart,h=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return d?At(o,h):At(o,l)},e.isSelectingRangeEnd=function(){var n;if(!e.isInSelectingRange())return!1;var r=e.props,o=r.day,l=r.endDate,d=r.selectsEnd,h=r.selectsRange,m=(n=e.props.selectingDate)!==null&&n!==void 0?n:e.props.preSelection;return d||h?At(o,m):At(o,l)},e.isRangeStart=function(){var n=e.props,r=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:At(o,r)},e.isRangeEnd=function(){var n=e.props,r=n.day,o=n.startDate,l=n.endDate;return!o||!l?!1:At(l,r)},e.isWeekend=function(){var n=BD(e.props.day);return n===0||n===6},e.isAfterMonth=function(){return e.props.month!==void 0&&(e.props.month+1)%12===ha(e.props.day)},e.isBeforeMonth=function(){return e.props.month!==void 0&&(ha(e.props.day)+1)%12===e.props.month},e.isCurrentDay=function(){return e.isSameDay(Pt())},e.isSelected=function(){var n;return e.props.selectsMultiple?(n=e.props.selectedDates)===null||n===void 0?void 0:n.some(function(r){return e.isSameDayOrWeek(r)}):e.isSameDayOrWeek(e.props.selected)},e.getClassNames=function(n){var r=e.props.dayClassName?e.props.dayClassName(n):void 0;return aa("react-datepicker__day",r,"react-datepicker__day--"+UN(e.props.day),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass(),e.getHolidaysClass())},e.getAriaLabel=function(){var n=e.props,r=n.day,o=n.ariaLabelPrefixWhenEnabled,l=o===void 0?"Choose":o,d=n.ariaLabelPrefixWhenDisabled,h=d===void 0?"Not available":d,m=e.isDisabled()||e.isExcluded()?h:l;return"".concat(m," ").concat(cn(r,"PPPP",e.props.locale))},e.getTitle=function(){var n=e.props,r=n.day,o=n.holidays,l=o===void 0?new Map:o,d=n.excludeDates,h=cn(r,"MM.dd.yyyy"),m=[];return l.has(h)&&m.push.apply(m,l.get(h).holidayNames),e.isExcluded()&&m.push(d==null?void 0:d.filter(function(p){return p instanceof Date?At(p,r):At(p==null?void 0:p.date,r)}).map(function(p){if(!(p instanceof Date))return p==null?void 0:p.message})),m.join(", ")},e.getTabIndex=function(){var n=e.props.selected,r=e.props.preSelection,o=!(e.props.showWeekPicker&&(e.props.showWeekNumber||!e.isStartOfWeek()))&&(e.isKeyboardSelected()||e.isSameDay(n)&&At(r,n))?0:-1;return o},e.handleFocusDay=function(){var n;e.shouldFocusDay()&&((n=e.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},e.renderDayContents=function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(Hw(e.props.day),e.props.day):Hw(e.props.day)},e.render=function(){return u.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.props.usePointerEvent?void 0:e.handleMouseEnter,onPointerEnter:e.props.usePointerEvent?e.handleMouseEnter:void 0,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),e.getTitle()!==""&&u.createElement("span",{className:"overlay"},e.getTitle()))},e}return a.prototype.componentDidMount=function(){this.handleFocusDay()},a.prototype.componentDidUpdate=function(){this.handleFocusDay()},a.prototype.shouldFocusDay=function(){var e=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},a.prototype.isDayActiveElement=function(){var e,n,r;return((n=(e=this.props.containerRef)===null||e===void 0?void 0:e.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((r=document.activeElement)===null||r===void 0?void 0:r.classList.contains("react-datepicker__day"))},a.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},a}(w.Component),aR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.weekNumberEl=w.createRef(),e.handleClick=function(n){e.props.onClick&&e.props.onClick(n)},e.handleOnKeyDown=function(n){var r,o,l=n.key;l===Te.Space&&(n.preventDefault(),n.key=Te.Enter),(o=(r=e.props).handleOnKeyDown)===null||o===void 0||o.call(r,n)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!At(e.props.date,e.props.selected)&&At(e.props.date,e.props.preSelection)},e.getTabIndex=function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||At(e.props.date,e.props.selected)&&At(e.props.preSelection,e.props.selected))?0:-1},e.handleFocusWeekNumber=function(n){var r=!1;e.getTabIndex()===0&&!(n!=null&&n.isInputFocused)&&At(e.props.date,e.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},a.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},a.prototype.render=function(){var e=this.props,n=e.weekNumber,r=e.isWeekDisabled,o=e.ariaLabelPrefix,l=o===void 0?a.defaultProps.ariaLabelPrefix:o,d=e.onClick,h={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!d&&!r,"react-datepicker__week-number--selected":!!d&&At(this.props.date,this.props.selected)};return u.createElement("div",{ref:this.weekNumberEl,className:aa(h),"aria-label":"".concat(l," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},a}(w.Component),rR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isDisabled=function(n){return yr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.handleDayClick=function(n,r){e.props.onDayClick&&e.props.onDayClick(n,r)},e.handleDayMouseEnter=function(n){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(n)},e.handleWeekClick=function(n,r,o){for(var l,d,h,m=new Date(n),p=0;p<7;p++){var y=new Date(n);y.setDate(y.getDate()+p);var b=!e.isDisabled(y);if(b){m=y;break}}typeof e.props.onWeekSelect=="function"&&e.props.onWeekSelect(m,r,o),e.props.showWeekPicker&&e.handleDayClick(m,o),((l=e.props.shouldCloseOnSelect)!==null&&l!==void 0?l:a.defaultProps.shouldCloseOnSelect)&&((h=(d=e.props).setOpen)===null||h===void 0||h.call(d,!1))},e.formatWeekNumber=function(n){return e.props.formatWeekNumber?e.props.formatWeekNumber(n):BN(n)},e.isWeekDisabled=function(){for(var n=e.startOfWeek(),r=Nr(n,6),o=new Date(n);o<=r;){if(!e.isDisabled(o))return!1;o=Nr(o,1)}return!0},e.renderDays=function(){var n=e.startOfWeek(),r=[],o=e.formatWeekNumber(n);if(e.props.showWeekNumber){var l=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(e,n,o):void 0;r.push(u.createElement(aR,Tt({key:"W"},a.defaultProps,e.props,{weekNumber:o,isWeekDisabled:e.isWeekDisabled(),date:n,onClick:l})))}return r.concat([0,1,2,3,4,5,6].map(function(d){var h=Nr(n,d);return u.createElement(nR,Tt({},a.defaultProps,e.props,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:h.valueOf(),day:h,onClick:e.handleDayClick.bind(e,h),onMouseEnter:e.handleDayMouseEnter.bind(e,h)}))}))},e.startOfWeek=function(){return Ti(e.props.day,e.props.locale,e.props.calendarStartDay)},e.isKeyboardSelected=function(){return!e.props.disabledKeyboardNavigation&&!At(e.startOfWeek(),e.props.selected)&&At(e.startOfWeek(),e.props.preSelection)},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":At(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return u.createElement("div",{className:aa(e)},this.renderDays())},a}(w.Component),xc,sR=6,al={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},Bp=(xc={},xc[al.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},xc[al.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},xc[al.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},xc),Ed=1;function v1(t,a){return t?al.FOUR_COLUMNS:a?al.TWO_COLUMNS:al.THREE_COLUMNS}var iR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.MONTH_REFS=ts([],Array(12),!0).map(function(){return w.createRef()}),e.QUARTER_REFS=ts([],Array(4),!0).map(function(){return w.createRef()}),e.isDisabled=function(n){return yr(n,{minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDateIntervals:e.props.includeDateIntervals,includeDates:e.props.includeDates,filterDate:e.props.filterDate})},e.isExcluded=function(n){return A0(n,{excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals})},e.handleDayClick=function(n,r){var o,l;(l=(o=e.props).onDayClick)===null||l===void 0||l.call(o,n,r,e.props.orderInDisplay)},e.handleDayMouseEnter=function(n){var r,o;(o=(r=e.props).onDayMouseEnter)===null||o===void 0||o.call(r,n)},e.handleMouseLeave=function(){var n,r;(r=(n=e.props).onMouseLeave)===null||r===void 0||r.call(n)},e.isRangeStartMonth=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:ya(gr(o,n),l)},e.isRangeStartQuarter=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:gf(Xo(o,n),l)},e.isRangeEndMonth=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:ya(gr(o,n),d)},e.isRangeEndQuarter=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:gf(Xo(o,n),d)},e.isInSelectingRangeMonth=function(n){var r,o=e.props,l=o.day,d=o.selectsStart,h=o.selectsEnd,m=o.selectsRange,p=o.startDate,y=o.endDate,b=(r=e.props.selectingDate)!==null&&r!==void 0?r:e.props.preSelection;return!(d||h||m)||!b?!1:d&&y?bd(b,y,n,l):h&&p||m&&p&&!y?bd(p,b,n,l):!1},e.isSelectingMonthRangeStart=function(n){var r;if(!e.isInSelectingRangeMonth(n))return!1;var o=e.props,l=o.day,d=o.startDate,h=o.selectsStart,m=gr(l,n),p=(r=e.props.selectingDate)!==null&&r!==void 0?r:e.props.preSelection;return h?ya(m,p):ya(m,d)},e.isSelectingMonthRangeEnd=function(n){var r;if(!e.isInSelectingRangeMonth(n))return!1;var o=e.props,l=o.day,d=o.endDate,h=o.selectsEnd,m=o.selectsRange,p=gr(l,n),y=(r=e.props.selectingDate)!==null&&r!==void 0?r:e.props.preSelection;return h||m?ya(p,y):ya(p,d)},e.isInSelectingRangeQuarter=function(n){var r,o=e.props,l=o.day,d=o.selectsStart,h=o.selectsEnd,m=o.selectsRange,p=o.startDate,y=o.endDate,b=(r=e.props.selectingDate)!==null&&r!==void 0?r:e.props.preSelection;return!(d||h||m)||!b?!1:d&&y?Sd(b,y,n,l):h&&p||m&&p&&!y?Sd(p,b,n,l):!1},e.isWeekInMonth=function(n){var r=e.props.day,o=Nr(n,6);return ya(n,r)||ya(o,r)},e.isCurrentMonth=function(n,r){return pt(n)===pt(Pt())&&r===ha(Pt())},e.isCurrentQuarter=function(n,r){return pt(n)===pt(Pt())&&r===to(Pt())},e.isSelectedMonth=function(n,r,o){return ha(o)===r&&pt(n)===pt(o)},e.isSelectMonthInList=function(n,r,o){return o.some(function(l){return e.isSelectedMonth(n,r,l)})},e.isSelectedQuarter=function(n,r,o){return to(n)===r&&pt(n)===pt(o)},e.isMonthSelected=function(){var n=e.props,r=n.day,o=n.selected,l=n.selectedDates,d=n.selectsMultiple,h=ha(r);return d?l==null?void 0:l.some(function(m){return e.isSelectedMonth(r,h,m)}):!!o&&e.isSelectedMonth(r,h,o)},e.renderWeeks=function(){for(var n=[],r=e.props.fixedHeight,o=0,l=!1,d=Ti(Bs(e.props.day),e.props.locale,e.props.calendarStartDay),h=function(S){return e.props.showWeekPicker?Ti(S,e.props.locale,e.props.calendarStartDay):e.props.preSelection},m=function(S){return e.props.showWeekPicker?Ti(S,e.props.locale,e.props.calendarStartDay):e.props.selected},p=e.props.selected?m(e.props.selected):void 0,y=e.props.preSelection?h(e.props.preSelection):void 0;n.push(u.createElement(rR,Tt({},e.props,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,key:o,day:d,month:ha(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,selected:p,preSelection:y,showWeekNumber:e.props.showWeekNumbers}))),!l;){o++,d=nf(d,1);var b=r&&o>=sR,E=!r&&!e.isWeekInMonth(d);if(b||E)if(e.props.peekNextMonth)l=!0;else break}return n},e.onMonthClick=function(n,r){var o=e.isMonthDisabledForLabelDate(r),l=o.isDisabled,d=o.labelDate;l||e.handleDayClick(Bs(d),n)},e.onMonthMouseEnter=function(n){var r=e.isMonthDisabledForLabelDate(n),o=r.isDisabled,l=r.labelDate;o||e.handleDayMouseEnter(Bs(l))},e.handleMonthNavigation=function(n,r){var o,l,d,h;(l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,r),(h=(d=e.MONTH_REFS[n])===null||d===void 0?void 0:d.current)===null||h===void 0||h.focus()},e.handleKeyboardNavigation=function(n,r,o){var l,d=e.props,h=d.selected,m=d.preSelection,p=d.setPreSelection,y=d.minDate,b=d.maxDate,E=d.showFourColumnMonthYearPicker,S=d.showTwoColumnMonthYearPicker;if(m){var C=v1(E,S),_=e.getVerticalOffset(C),x=(l=Bp[C])===null||l===void 0?void 0:l.grid,D=function(G,F,q){var te,X,se=F,ee=q;switch(G){case Te.ArrowRight:se=Rr(F,Ed),ee=q===11?0:q+Ed;break;case Te.ArrowLeft:se=no(F,Ed),ee=q===0?11:q-Ed;break;case Te.ArrowUp:se=no(F,_),ee=!((te=x==null?void 0:x[0])===null||te===void 0)&&te.includes(q)?q+12-_:q-_;break;case Te.ArrowDown:se=Rr(F,_),ee=!((X=x==null?void 0:x[x.length-1])===null||X===void 0)&&X.includes(q)?q-12+_:q+_;break}return{newCalculatedDate:se,newCalculatedMonth:ee}},A=function(G,F,q){for(var te=40,X=G,se=!1,ee=0,j=D(X,F,q),H=j.newCalculatedDate,R=j.newCalculatedMonth;!se;){if(ee>=te){H=F,R=q;break}if(y&&H<y){X=Te.ArrowRight;var B=D(X,H,R);H=B.newCalculatedDate,R=B.newCalculatedMonth}if(b&&H>b){X=Te.ArrowLeft;var B=D(X,H,R);H=B.newCalculatedDate,R=B.newCalculatedMonth}if(GN(H,e.props)){var B=D(X,H,R);H=B.newCalculatedDate,R=B.newCalculatedMonth}else se=!0;ee++}return{newCalculatedDate:H,newCalculatedMonth:R}};if(r===Te.Enter){e.isMonthDisabled(o)||(e.onMonthClick(n,o),p==null||p(h));return}var k=A(r,m,o),P=k.newCalculatedDate,L=k.newCalculatedMonth;switch(r){case Te.ArrowRight:case Te.ArrowLeft:case Te.ArrowUp:case Te.ArrowDown:e.handleMonthNavigation(L,P);break}}},e.getVerticalOffset=function(n){var r,o;return(o=(r=Bp[n])===null||r===void 0?void 0:r.verticalNavigationOffset)!==null&&o!==void 0?o:0},e.onMonthKeyDown=function(n,r){var o=e.props,l=o.disabledKeyboardNavigation,d=o.handleOnMonthKeyDown,h=n.key;h!==Te.Tab&&n.preventDefault(),l||e.handleKeyboardNavigation(n,h,r),d&&d(n)},e.onQuarterClick=function(n,r){var o=Xo(e.props.day,r);wd(o,e.props)||e.handleDayClick(a1(o),n)},e.onQuarterMouseEnter=function(n){var r=Xo(e.props.day,n);wd(r,e.props)||e.handleDayMouseEnter(a1(r))},e.handleQuarterNavigation=function(n,r){var o,l,d,h;e.isDisabled(r)||e.isExcluded(r)||((l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,r),(h=(d=e.QUARTER_REFS[n-1])===null||d===void 0?void 0:d.current)===null||h===void 0||h.focus())},e.onQuarterKeyDown=function(n,r){var o,l,d=n.key;if(!e.props.disabledKeyboardNavigation)switch(d){case Te.Enter:e.onQuarterClick(n,r),(l=(o=e.props).setPreSelection)===null||l===void 0||l.call(o,e.props.selected);break;case Te.ArrowRight:if(!e.props.preSelection)break;e.handleQuarterNavigation(r===4?1:r+1,h0(e.props.preSelection,1));break;case Te.ArrowLeft:if(!e.props.preSelection)break;e.handleQuarterNavigation(r===1?4:r-1,I2(e.props.preSelection));break}},e.isMonthDisabledForLabelDate=function(n){var r,o=e.props,l=o.day,d=o.minDate,h=o.maxDate,m=o.excludeDates,p=o.includeDates,y=gr(l,n);return{isDisabled:(r=(d||h||m||p)&&q2(y,e.props))!==null&&r!==void 0?r:!1,labelDate:y}},e.isMonthDisabled=function(n){var r=e.isMonthDisabledForLabelDate(n).isDisabled;return r},e.getMonthClassNames=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate,h=r.preSelection,m=r.monthClassName,p=m?m(gr(o,n)):void 0,y=e.getSelection();return aa("react-datepicker__month-text","react-datepicker__month-".concat(n),p,{"react-datepicker__month-text--disabled":e.isMonthDisabled(n),"react-datepicker__month-text--selected":y?e.isSelectMonthInList(o,n,y):void 0,"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&h&&e.isSelectedMonth(o,n,h)&&!e.isMonthSelected()&&!e.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":l&&d?bd(l,d,n,o):void 0,"react-datepicker__month-text--range-start":e.isRangeStartMonth(n),"react-datepicker__month-text--range-end":e.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":e.isCurrentMonth(o,n)})},e.getTabIndex=function(n){if(e.props.preSelection==null)return"-1";var r=ha(e.props.preSelection),o=e.isMonthDisabledForLabelDate(r).isDisabled,l=n===r&&!(o||e.props.disabledKeyboardNavigation)?"0":"-1";return l},e.getQuarterTabIndex=function(n){if(e.props.preSelection==null)return"-1";var r=to(e.props.preSelection),o=wd(e.props.day,e.props),l=n===r&&!(o||e.props.disabledKeyboardNavigation)?"0":"-1";return l},e.getAriaLabel=function(n){var r=e.props,o=r.chooseDayAriaLabelPrefix,l=o===void 0?"Choose":o,d=r.disabledDayAriaLabelPrefix,h=d===void 0?"Not available":d,m=r.day,p=r.locale,y=gr(m,n),b=e.isDisabled(y)||e.isExcluded(y)?h:l;return"".concat(b," ").concat(cn(y,"MMMM yyyy",p))},e.getQuarterClassNames=function(n){var r=e.props,o=r.day,l=r.startDate,d=r.endDate,h=r.selected,m=r.minDate,p=r.maxDate,y=r.excludeDates,b=r.includeDates,E=r.filterDate,S=r.preSelection,C=r.disabledKeyboardNavigation,_=(m||p||y||b||E)&&wd(Xo(o,n),e.props);return aa("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":_,"react-datepicker__quarter-text--selected":h?e.isSelectedQuarter(o,n,h):void 0,"react-datepicker__quarter-text--keyboard-selected":!C&&S&&e.isSelectedQuarter(o,n,S)&&!_,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":l&&d?Sd(l,d,n,o):void 0,"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":e.isCurrentQuarter(o,n)})},e.getMonthContent=function(n){var r=e.props,o=r.showFullMonthYearPicker,l=r.renderMonthContent,d=r.locale,h=r.day,m=Z2(n,d),p=D0(n,d);return l?l(n,m,p,h):o?p:m},e.getQuarterContent=function(n){var r,o=e.props,l=o.renderQuarterContent,d=o.locale,h=WN(n,d);return(r=l==null?void 0:l(n,h))!==null&&r!==void 0?r:h},e.renderMonths=function(){var n,r=e.props,o=r.showTwoColumnMonthYearPicker,l=r.showFourColumnMonthYearPicker,d=r.day,h=r.selected,m=(n=Bp[v1(l,o)])===null||n===void 0?void 0:n.grid;return m==null?void 0:m.map(function(p,y){return u.createElement("div",{className:"react-datepicker__month-wrapper",key:y},p.map(function(b,E){return u.createElement("div",{ref:e.MONTH_REFS[b],key:E,onClick:function(S){e.onMonthClick(S,b)},onKeyDown:function(S){X2(S)&&(S.preventDefault(),S.key=Te.Enter),e.onMonthKeyDown(S,b)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onMonthMouseEnter(b)},onPointerEnter:e.props.usePointerEvent?function(){return e.onMonthMouseEnter(b)}:void 0,tabIndex:Number(e.getTabIndex(b)),className:e.getMonthClassNames(b),"aria-disabled":e.isMonthDisabled(b),role:"option","aria-label":e.getAriaLabel(b),"aria-current":e.isCurrentMonth(d,b)?"date":void 0,"aria-selected":h?e.isSelectedMonth(d,b,h):void 0},e.getMonthContent(b))}))})},e.renderQuarters=function(){var n=e.props,r=n.day,o=n.selected,l=[1,2,3,4];return u.createElement("div",{className:"react-datepicker__quarter-wrapper"},l.map(function(d,h){return u.createElement("div",{key:h,ref:e.QUARTER_REFS[h],role:"option",onClick:function(m){e.onQuarterClick(m,d)},onKeyDown:function(m){e.onQuarterKeyDown(m,d)},onMouseEnter:e.props.usePointerEvent?void 0:function(){return e.onQuarterMouseEnter(d)},onPointerEnter:e.props.usePointerEvent?function(){return e.onQuarterMouseEnter(d)}:void 0,className:e.getQuarterClassNames(d),"aria-selected":o?e.isSelectedQuarter(r,d,o):void 0,tabIndex:Number(e.getQuarterTabIndex(d)),"aria-current":e.isCurrentQuarter(r,d)?"date":void 0},e.getQuarterContent(d))}))},e.getClassNames=function(){var n=e.props,r=n.selectingDate,o=n.selectsStart,l=n.selectsEnd,d=n.showMonthYearPicker,h=n.showQuarterYearPicker,m=n.showWeekPicker;return aa("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(o||l)},{"react-datepicker__monthPicker":d},{"react-datepicker__quarterPicker":h},{"react-datepicker__weekPicker":m})},e}return a.prototype.getSelection=function(){var e=this.props,n=e.selected,r=e.selectedDates,o=e.selectsMultiple;if(o)return r;if(n)return[n]},a.prototype.render=function(){var e=this.props,n=e.showMonthYearPicker,r=e.showQuarterYearPicker,o=e.day,l=e.ariaLabelPrefix,d=l===void 0?"Month ":l,h=d?d.trim()+" ":"";return u.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(h).concat(cn(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():r?this.renderQuarters():this.renderWeeks())},a}(w.Component),oR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.isSelectedMonth=function(n){return e.props.month===n},e.renderOptions=function(){return e.props.monthNames.map(function(n,r){return u.createElement("div",{className:e.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:e.onChange.bind(e,r),"aria-selected":e.isSelectedMonth(r)?"true":void 0},e.isSelectedMonth(r)?u.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},e.onChange=function(n){return e.props.onChange(n)},e.handleClickOutside=function(){return e.props.onCancel()},e}return a.prototype.render=function(){return u.createElement(dh,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),lR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(n){return n.map(function(r,o){return u.createElement("option",{key:r,value:o},r)})},e.renderSelectMode=function(n){return u.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(r){return e.onChange(parseInt(r.target.value))}},e.renderSelectOptions(n))},e.renderReadView=function(n,r){return u.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},u.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[e.props.month]))},e.renderDropdown=function(n){return u.createElement(oR,Tt({key:"dropdown"},e.props,{monthNames:n,onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(n){var r=e.state.dropdownVisible,o=[e.renderReadView(!r,n)];return r&&o.unshift(e.renderDropdown(n)),o},e.onChange=function(n){e.toggleDropdown(),n!==e.props.month&&e.props.onChange(n)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return Z2(o,e.props.locale)}:function(o){return D0(o,e.props.locale)}),r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(n);break;case"select":r=this.renderSelectMode(n);break}return u.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)},a}(w.Component);function cR(t,a){for(var e=[],n=Bs(t),r=Bs(a);!Fs(n,r);)e.push(Pt(n)),n=Rr(n,1);return e}var uR=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(r){var o=Sg(r),l=Jr(n.props.date,r)&&ya(n.props.date,r);return u.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":l?"true":void 0},l?u.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",cn(r,n.props.dateFormat,n.props.locale))})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:cR(n.props.minDate,n.props.maxDate)},n}return a.prototype.render=function(){var e=aa({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return u.createElement(dh,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),dR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=Bs(e.props.minDate),r=Bs(e.props.maxDate),o=[];!Fs(n,r);){var l=Sg(n);o.push(u.createElement("option",{key:l,value:l},cn(n,e.props.dateFormat,e.props.locale))),n=Rr(n,1)}return o},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return u.createElement("select",{value:Sg(Bs(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){var r=cn(e.props.date,e.props.dateFormat,e.props.locale);return u.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:e.toggleDropdown},u.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},e.renderDropdown=function(){return u.createElement(uR,Tt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,r=[e.renderReadView(!n)];return n&&r.unshift(e.renderDropdown()),r},e.onChange=function(n){e.toggleDropdown();var r=Pt(n);Jr(e.props.date,r)&&ya(e.props.date,r)||e.props.onChange(r)},e.toggleDropdown=function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return u.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(w.Component),fR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={height:null},e.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,r,o;e.list&&(e.list.scrollTop=(o=e.centerLi&&a.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-((r=(n=e.header)===null||n===void 0?void 0:n.clientHeight)!==null&&r!==void 0?r:0):e.list.clientHeight,e.centerLi))!==null&&o!==void 0?o:0)})},e.handleClick=function(n){var r,o;(e.props.minTime||e.props.maxTime)&&l1(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&o1(n,e.props)||(o=(r=e.props).onChange)===null||o===void 0||o.call(r,n)},e.isSelectedTime=function(n){return e.props.selected&&eR(e.props.selected,n)},e.isDisabledTime=function(n){return(e.props.minTime||e.props.maxTime)&&l1(n,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&o1(n,e.props)},e.liClasses=function(n){var r,o=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(n):void 0];return e.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(Ps(n)*3600+Os(n)*60+Ai(n))%(((r=e.props.intervals)!==null&&r!==void 0?r:a.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},e.handleOnKeyDown=function(n,r){var o,l;n.key===Te.Space&&(n.preventDefault(),n.key=Te.Enter),(n.key===Te.ArrowUp||n.key===Te.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Te.ArrowDown||n.key===Te.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Te.Enter&&e.handleClick(r),(l=(o=e.props).handleOnKeyDown)===null||l===void 0||l.call(o,n)},e.renderTimes=function(){for(var n,r=[],o=typeof e.props.format=="string"?e.props.format:"p",l=(n=e.props.intervals)!==null&&n!==void 0?n:a.defaultProps.intervals,d=e.props.selected||e.props.openToDate||Pt(),h=Yd(d),m=e.props.injectTimes&&e.props.injectTimes.sort(function(_,x){return _.getTime()-x.getTime()}),p=60*KN(d),y=p/l,b=0;b<y;b++){var E=bg(h,b*l);if(r.push(E),m){var S=JN(h,E,b,l,m);r=r.concat(S)}}var C=r.reduce(function(_,x){return x.getTime()<=d.getTime()?x:_},r[0]);return r.map(function(_){return u.createElement("li",{key:_.valueOf(),onClick:e.handleClick.bind(e,_),className:e.liClasses(_),ref:function(x){_===C&&(e.centerLi=x)},onKeyDown:function(x){e.handleOnKeyDown(x,_)},tabIndex:_===C?0:-1,role:"option","aria-selected":e.isSelectedTime(_)?"true":void 0,"aria-disabled":e.isDisabledTime(_)?"true":void 0},cn(_,o,e.props.locale))})},e.renderTimeCaption=function(){return e.props.showTimeCaption===!1?u.createElement(u.Fragment,null):u.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(e.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){e.header=n}},u.createElement("div",{className:"react-datepicker-time__header"},e.props.timeCaption))},e}return Object.defineProperty(a,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},a.prototype.componentWillUnmount=function(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()},a.prototype.observeDatePickerHeightChanges=function(){var e=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(n))},a.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},a.prototype.render=function(){var e=this,n,r=this.state.height;return u.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:a.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),u.createElement("div",{className:"react-datepicker__time"},u.createElement("div",{className:"react-datepicker__time-box"},u.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){e.list=o},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},a.calcCenterPosition=function(e,n){return n.offsetTop-(e/2-n.clientHeight/2)},a}(w.Component),b1=3,hR=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.YEAR_REFS=ts([],Array(n.props.yearItemNumber),!0).map(function(){return w.createRef()}),n.isDisabled=function(r){return yr(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return A0(r,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var r;return(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection},n.updateFocusOnPaginate=function(r){var o=function(){var l,d;(d=(l=n.YEAR_REFS[r])===null||l===void 0?void 0:l.current)===null||d===void 0||d.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(r,o){n.props.onDayClick&&n.props.onDayClick(r,o)},n.handleYearNavigation=function(r,o){var l,d,h,m,p=n.props,y=p.date,b=p.yearItemNumber;if(!(y===void 0||b===void 0)){var E=Di(y,b).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((d=(l=n.props).setPreSelection)===null||d===void 0||d.call(l,o),r-E<0?n.updateFocusOnPaginate(b-(E-r)):r-E>=b?n.updateFocusOnPaginate(Math.abs(b-(r-E))):(m=(h=n.YEAR_REFS[r-E])===null||h===void 0?void 0:h.current)===null||m===void 0||m.focus())}},n.isSameDay=function(r,o){return At(r,o)},n.isCurrentYear=function(r){return r===pt(Pt())},n.isRangeStart=function(r){return n.props.startDate&&n.props.endDate&&Jr(Xr(Pt(),r),n.props.startDate)},n.isRangeEnd=function(r){return n.props.startDate&&n.props.endDate&&Jr(Xr(Pt(),r),n.props.endDate)},n.isInRange=function(r){return xd(r,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(r){var o=n.props,l=o.selectsStart,d=o.selectsEnd,h=o.selectsRange,m=o.startDate,p=o.endDate;return!(l||d||h)||!n.selectingDate()?!1:l&&p?xd(r,n.selectingDate(),p):d&&m||h&&m&&!p?xd(r,m,n.selectingDate()):!1},n.isSelectingRangeStart=function(r){var o;if(!n.isInSelectingRange(r))return!1;var l=n.props,d=l.startDate,h=l.selectsStart,m=Xr(Pt(),r);return h?Jr(m,(o=n.selectingDate())!==null&&o!==void 0?o:null):Jr(m,d??null)},n.isSelectingRangeEnd=function(r){var o;if(!n.isInSelectingRange(r))return!1;var l=n.props,d=l.endDate,h=l.selectsEnd,m=l.selectsRange,p=Xr(Pt(),r);return h||m?Jr(p,(o=n.selectingDate())!==null&&o!==void 0?o:null):Jr(p,d??null)},n.isKeyboardSelected=function(r){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var o=n.props,l=o.minDate,d=o.maxDate,h=o.excludeDates,m=o.includeDates,p=o.filterDate,y=Mc(Xr(n.props.date,r)),b=(l||d||h||m||p)&&Wd(r,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!At(y,Mc(n.props.selected))&&At(y,Mc(n.props.preSelection))&&!b}},n.isSelectedYear=function(r){var o=n.props,l=o.selectsMultiple,d=o.selected,h=o.selectedDates;return l?h==null?void 0:h.some(function(m){return r===pt(m)}):!!d&&r===pt(d)},n.onYearClick=function(r,o){var l=n.props.date;l!==void 0&&n.handleYearClick(Mc(Xr(l,o)),r)},n.onYearKeyDown=function(r,o){var l,d,h=r.key,m=n.props,p=m.date,y=m.yearItemNumber,b=m.handleOnKeyDown;if(h!==Te.Tab&&r.preventDefault(),!n.props.disabledKeyboardNavigation)switch(h){case Te.Enter:if(n.props.selected==null)break;n.onYearClick(r,o),(d=(l=n.props).setPreSelection)===null||d===void 0||d.call(l,n.props.selected);break;case Te.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,ks(n.props.preSelection,1));break;case Te.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,ol(n.props.preSelection,1));break;case Te.ArrowUp:{if(p===void 0||y===void 0||n.props.preSelection==null)break;var E=Di(p,y).startPeriod,S=b1,C=o-S;if(C<E){var _=y%S;o>=E&&o<E+_?S=_:S+=_,C=o-S}n.handleYearNavigation(C,ol(n.props.preSelection,S));break}case Te.ArrowDown:{if(p===void 0||y===void 0||n.props.preSelection==null)break;var x=Di(p,y).endPeriod,S=b1,C=o+S;if(C>x){var _=y%S;o<=x&&o>x-_?S=_:S+=_,C=o+S}n.handleYearNavigation(C,ks(n.props.preSelection,S));break}}b&&b(r)},n.getYearClassNames=function(r){var o=n.props,l=o.date,d=o.minDate,h=o.maxDate,m=o.excludeDates,p=o.includeDates,y=o.filterDate,b=o.yearClassName;return aa("react-datepicker__year-text","react-datepicker__year-".concat(r),l?b==null?void 0:b(Xr(l,r)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(r),"react-datepicker__year-text--disabled":(d||h||m||p||y)&&Wd(r,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(r),"react-datepicker__year-text--range-start":n.isRangeStart(r),"react-datepicker__year-text--range-end":n.isRangeEnd(r),"react-datepicker__year-text--in-range":n.isInRange(r),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(r),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(r),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(r),"react-datepicker__year-text--today":n.isCurrentYear(r)})},n.getYearTabIndex=function(r){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=pt(n.props.preSelection),l=Wd(r,n.props);return r===o&&!l?"0":"-1"},n.getYearContent=function(r){return n.props.renderYearContent?n.props.renderYearContent(r):r},n}return a.prototype.render=function(){var e=this,n=[],r=this.props,o=r.date,l=r.yearItemNumber,d=r.onYearMouseEnter,h=r.onYearMouseLeave;if(o===void 0)return null;for(var m=Di(o,l),p=m.startPeriod,y=m.endPeriod,b=function(C){n.push(u.createElement("div",{ref:E.YEAR_REFS[C-p],onClick:function(_){e.onYearClick(_,C)},onKeyDown:function(_){X2(_)&&(_.preventDefault(),_.key=Te.Enter),e.onYearKeyDown(_,C)},tabIndex:Number(E.getYearTabIndex(C)),className:E.getYearClassNames(C),onMouseEnter:E.props.usePointerEvent?void 0:function(_){return d(_,C)},onPointerEnter:E.props.usePointerEvent?function(_){return d(_,C)}:void 0,onMouseLeave:E.props.usePointerEvent?void 0:function(_){return h(_,C)},onPointerLeave:E.props.usePointerEvent?function(_){return h(_,C)}:void 0,key:C,"aria-current":E.isCurrentYear(C)?"date":void 0},E.getYearContent(C)))},E=this,S=p;S<=y;S++)b(S);return u.createElement("div",{className:"react-datepicker__year"},u.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},a}(w.Component);function mR(t,a,e,n){for(var r=[],o=0;o<2*a+1;o++){var l=t+a-o,d=!0;e&&(d=pt(e)<=l),n&&d&&(d=pt(n)>=l),d&&r.push(l)}return r}var pR=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;n.renderOptions=function(){var d=n.props.year,h=n.state.yearsList.map(function(y){return u.createElement("div",{className:d===y?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:y,onClick:n.onChange.bind(n,y),"aria-selected":d===y?"true":void 0},d===y?u.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",y)}),m=n.props.minDate?pt(n.props.minDate):null,p=n.props.maxDate?pt(n.props.maxDate):null;return(!p||!n.state.yearsList.find(function(y){return y===p}))&&h.unshift(u.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},u.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!m||!n.state.yearsList.find(function(y){return y===m}))&&h.push(u.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},u.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),h},n.onChange=function(d){n.props.onChange(d)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(d){var h=n.state.yearsList.map(function(m){return m+d});n.setState({yearsList:h})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var r=e.yearDropdownItemNumber,o=e.scrollableYearDropdown,l=r||(o?10:5);return n.state={yearsList:mR(n.props.year,l,n.props.minDate,n.props.maxDate)},n.dropdownRef=w.createRef(),n}return a.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var n=e.children?Array.from(e.children):null,r=n?n.find(function(o){return o.ariaSelected}):null;e.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},a.prototype.render=function(){var e=aa({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return u.createElement(dh,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},a}(w.Component),gR=function(t){Qn(a,t);function a(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={dropdownVisible:!1},e.renderSelectOptions=function(){for(var n=e.props.minDate?pt(e.props.minDate):1900,r=e.props.maxDate?pt(e.props.maxDate):2100,o=[],l=n;l<=r;l++)o.push(u.createElement("option",{key:l,value:l},l));return o},e.onSelectChange=function(n){e.onChange(parseInt(n.target.value))},e.renderSelectMode=function(){return u.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())},e.renderReadView=function(n){return u.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(r){return e.toggleDropdown(r)}},u.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))},e.renderDropdown=function(){return u.createElement(pR,Tt({key:"dropdown"},e.props,{onChange:e.onChange,onCancel:e.toggleDropdown}))},e.renderScrollMode=function(){var n=e.state.dropdownVisible,r=[e.renderReadView(!n)];return n&&r.unshift(e.renderDropdown()),r},e.onChange=function(n){e.toggleDropdown(),n!==e.props.year&&e.props.onChange(n)},e.toggleDropdown=function(n){e.setState({dropdownVisible:!e.state.dropdownVisible},function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,n)})},e.handleYearChange=function(n,r){var o;(o=e.onSelect)===null||o===void 0||o.call(e,n,r),e.setOpen()},e.onSelect=function(n,r){var o,l;(l=(o=e.props).onSelect)===null||l===void 0||l.call(o,n,r)},e.setOpen=function(){var n,r;(r=(n=e.props).setOpen)===null||r===void 0||r.call(n,!0)},e}return a.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode();break}return u.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},a}(w.Component),yR=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],vR=function(t){var a=(t.className||"").split(/\s+/);return yR.some(function(e){return a.indexOf(e)>=0})},bR=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.monthContainer=void 0,n.handleClickOutside=function(r){n.props.onClickOutside(r)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(r){var o,l;vR(r.target)&&((l=(o=n.props).onDropdownFocus)===null||l===void 0||l.call(o,r))},n.getDateInView=function(){var r=n.props,o=r.preSelection,l=r.selected,d=r.openToDate,h=Q2(n.props),m=V2(n.props),p=Pt(),y=d||l||o;return y||(h&&oo(p,h)?h:m&&Fs(p,m)?m:p)},n.increaseMonth=function(){n.setState(function(r){var o=r.date;return{date:Rr(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(r){var o=r.date;return{date:no(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(r,o,l){n.props.onSelect(r,o,l),n.props.setPreSelection&&n.props.setPreSelection(r)},n.handleDayMouseEnter=function(r){n.setState({selectingDate:r}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(r,o){n.setState({selectingDate:Xr(Pt(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(r,o)},n.handleYearMouseLeave=function(r,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(r,o)},n.handleYearChange=function(r){var o,l,d,h;(l=(o=n.props).onYearChange)===null||l===void 0||l.call(o,r),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(r),(h=(d=n.props).setOpen)===null||h===void 0||h.call(d,!0)),n.props.setPreSelection&&n.props.setPreSelection(r)},n.getEnabledPreSelectionDateForMonth=function(r){if(!yr(r,n.props))return r;for(var o=Bs(r),l=jN(r),d=f2(l,o),h=null,m=0;m<=d;m++){var p=Nr(o,m);if(!yr(p,n.props)){h=p;break}}return h},n.handleMonthChange=function(r){var o,l,d,h=(o=n.getEnabledPreSelectionDateForMonth(r))!==null&&o!==void 0?o:r;n.handleCustomMonthChange(h),n.props.adjustDateOnChange&&(n.props.onSelect(h),(d=(l=n.props).setOpen)===null||d===void 0||d.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(h)},n.handleCustomMonthChange=function(r){var o,l;(l=(o=n.props).onMonthChange)===null||l===void 0||l.call(o,r),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(r){n.handleYearChange(r),n.handleMonthChange(r)},n.changeYear=function(r){n.setState(function(o){var l=o.date;return{date:Xr(l,Number(r))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(r){n.setState(function(o){var l=o.date;return{date:gr(l,Number(r))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(r){n.setState(function(o){var l=o.date;return{date:Xr(gr(l,ha(r)),pt(r))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(r){r===void 0&&(r=n.state.date);var o=Ti(r,n.props.locale,n.props.calendarStartDay),l=[];return n.props.showWeekNumbers&&l.push(u.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),l.concat([0,1,2,3,4,5,6].map(function(d){var h=Nr(o,d),m=n.formatWeekday(h,n.props.locale),p=n.props.weekDayClassName?n.props.weekDayClassName(h):void 0;return u.createElement("div",{key:d,"aria-label":cn(h,"EEEE",n.props.locale),className:aa("react-datepicker__day-name",p)},m)}))},n.formatWeekday=function(r,o){return n.props.formatWeekDay?FN(r,n.props.formatWeekDay,o):n.props.useWeekdaysShort?YN(r,o):HN(r,o)},n.decreaseYear=function(){n.setState(function(r){var o,l=r.date;return{date:ol(l,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var r,o,l;if(!n.props.renderCustomHeader){var d=(r=n.props.monthsShown)!==null&&r!==void 0?r:a.defaultProps.monthsShown,h=n.props.showPreviousMonths?d-1:0,m=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:h,p=no(n.state.date,m),y;switch(!0){case n.props.showMonthYearPicker:y=d1(n.state.date,n.props);break;case n.props.showYearPicker:y=qN(n.state.date,n.props);break;case n.props.showQuarterYearPicker:y=$N(n.state.date,n.props);break;default:y=c1(p,n.props);break}if(!(!((l=n.props.forceShowMonthNavigation)!==null&&l!==void 0?l:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&y||n.props.showTimeSelectOnly)){var b=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],E=["react-datepicker__navigation","react-datepicker__navigation--previous"],S=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(S=n.decreaseYear),y&&n.props.showDisabledMonthNavigation&&(E.push("react-datepicker__navigation--previous--disabled"),S=void 0);var C=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,_=n.props,x=_.previousMonthButtonLabel,D=x===void 0?a.defaultProps.previousMonthButtonLabel:x,A=_.previousYearButtonLabel,k=A===void 0?a.defaultProps.previousYearButtonLabel:A,P=n.props,L=P.previousMonthAriaLabel,G=L===void 0?typeof D=="string"?D:"Previous Month":L,F=P.previousYearAriaLabel,q=F===void 0?typeof k=="string"?k:"Previous Year":F;return u.createElement("button",{type:"button",className:E.join(" "),onClick:S,onKeyDown:n.props.handleOnKeyDown,"aria-label":C?q:G},u.createElement("span",{className:b.join(" ")},C?k:D))}}},n.increaseYear=function(){n.setState(function(r){var o,l=r.date;return{date:ks(l,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:a.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var r;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.showMonthYearPicker:o=f1(n.state.date,n.props);break;case n.props.showYearPicker:o=QN(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=ZN(n.state.date,n.props);break;default:o=u1(n.state.date,n.props);break}if(!(!((r=n.props.forceShowMonthNavigation)!==null&&r!==void 0?r:a.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var l=["react-datepicker__navigation","react-datepicker__navigation--next"],d=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&l.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&l.push("react-datepicker__navigation--next--with-today-button");var h=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(h=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(l.push("react-datepicker__navigation--next--disabled"),h=void 0);var m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,p=n.props,y=p.nextMonthButtonLabel,b=y===void 0?a.defaultProps.nextMonthButtonLabel:y,E=p.nextYearButtonLabel,S=E===void 0?a.defaultProps.nextYearButtonLabel:E,C=n.props,_=C.nextMonthAriaLabel,x=_===void 0?typeof b=="string"?b:"Next Month":_,D=C.nextYearAriaLabel,A=D===void 0?typeof S=="string"?S:"Next Year":D;return u.createElement("button",{type:"button",className:l.join(" "),onClick:h,onKeyDown:n.props.handleOnKeyDown,"aria-label":m?A:x},u.createElement("span",{className:d.join(" ")},m?S:b))}}},n.renderCurrentMonth=function(r){r===void 0&&(r=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),u.createElement("h2",{className:o.join(" ")},cn(r,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showYearDropdown||r))return u.createElement(gR,Tt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:pt(n.state.date)}))},n.renderMonthDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthDropdown||r))return u.createElement(lR,Tt({},a.defaultProps,n.props,{month:ha(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(r){if(r===void 0&&(r=!1),!(!n.props.showMonthYearDropdown||r))return u.createElement(dR,Tt({},a.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(r){n.props.onSelect(r1(),r),n.props.setPreSelection&&n.props.setPreSelection(r1())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return u.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(r){var o=r.monthDate,l=r.i;return u.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),u.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(l!==0),n.renderMonthYearDropdown(l!==0),n.renderYearDropdown(l!==0)),u.createElement("div",{className:"react-datepicker__day-names"},n.header(o)))},n.renderCustomHeader=function(r){var o,l,d=r.monthDate,h=r.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var m=c1(n.state.date,n.props),p=u1(n.state.date,n.props),y=d1(n.state.date,n.props),b=f1(n.state.date,n.props),E=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return u.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(l=(o=n.props).renderCustomHeader)===null||l===void 0?void 0:l.call(o,Tt(Tt({},n.state),{customHeaderCount:h,monthDate:d,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:m,nextMonthButtonDisabled:p,prevYearButtonDisabled:y,nextYearButtonDisabled:b})),E&&u.createElement("div",{className:"react-datepicker__day-names"},n.header(d)))},n.renderYearHeader=function(r){var o=r.monthDate,l=n.props,d=l.showYearPicker,h=l.yearItemNumber,m=h===void 0?a.defaultProps.yearItemNumber:h,p=Di(o,m),y=p.startPeriod,b=p.endPeriod;return u.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(y," - ").concat(b):pt(o))},n.renderHeader=function(r){var o=r.monthDate,l=r.i,d=l===void 0?0:l,h={monthDate:o,i:d};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(h);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(h);default:return n.renderDefaultHeader(h)}},n.renderMonths=function(){var r,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var l=[],d=(r=n.props.monthsShown)!==null&&r!==void 0?r:a.defaultProps.monthsShown,h=n.props.showPreviousMonths?d-1:0,m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ks(n.state.date,h):no(n.state.date,h),p=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:h,y=0;y<d;++y){var b=y-p+h,E=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?ks(m,b):Rr(m,b),S="month-".concat(y),C=y<d-1,_=y>0;l.push(u.createElement("div",{key:S,ref:function(x){n.monthContainer=x??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:E,i:y}),u.createElement(iR,Tt({},a.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:E,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:y,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:C,monthShowsDuplicateDaysStart:_}))))}return l}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return u.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),u.createElement(hR,Tt({},a.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return u.createElement(fR,Tt({},a.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var r=n.props.selected?new Date(n.props.selected):void 0,o=r&&fh(r)&&!!n.props.selected,l=o?"".concat(m1(r.getHours()),":").concat(m1(r.getMinutes())):"";if(n.props.showTimeInput)return u.createElement(tR,Tt({},a.defaultProps,n.props,{date:r,timeString:l,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var r,o=Di(n.state.date,(r=n.props.yearItemNumber)!==null&&r!==void 0?r:a.defaultProps.yearItemNumber),l=o.startPeriod,d=o.endPeriod,h;return n.props.showYearPicker?h="".concat(l," - ").concat(d):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?h=pt(n.state.date):h="".concat(D0(ha(n.state.date),n.props.locale)," ").concat(pt(n.state.date)),u.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&h)},n.renderChildren=function(){if(n.props.children)return u.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=w.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(a,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:su}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){e.setState({monthContainer:e.monthContainer})}())},a.prototype.componentDidUpdate=function(e){var n=this;if(this.props.preSelection&&(!At(this.props.preSelection,e.preSelection)||this.props.monthSelectedIn!==e.monthSelectedIn)){var r=!ya(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!At(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate})},a.prototype.render=function(){var e=this.props.container||kN;return u.createElement(dh,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},u.createElement("div",{style:{display:"contents"},ref:this.containerRef},u.createElement(e,{className:aa("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},a}(w.Component),wR=function(t){var a=t.icon,e=t.className,n=e===void 0?"":e,r=t.onClick,o="react-datepicker__calendar-icon";if(typeof a=="string")return u.createElement("i",{className:"".concat(o," ").concat(a," ").concat(n),"aria-hidden":"true",onClick:r});if(u.isValidElement(a)){var l=a;return u.cloneElement(l,{className:"".concat(l.props.className||""," ").concat(o," ").concat(n),onClick:function(d){typeof l.props.onClick=="function"&&l.props.onClick(d),typeof r=="function"&&r(d)}})}return u.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},u.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},J2=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return a.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},a.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},a.prototype.render=function(){return tu.createPortal(this.props.children,this.el)},a}(w.Component),xR="[tabindex], a, button, input, select, textarea",SR=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},K2=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.getTabChildren=function(){var r;return Array.prototype.slice.call((r=n.tabLoopRef.current)===null||r===void 0?void 0:r.querySelectorAll(xR),1,-1).filter(SR)},n.handleFocusStart=function(){var r=n.getTabChildren();r&&r.length>1&&r[r.length-1].focus()},n.handleFocusEnd=function(){var r=n.getTabChildren();r&&r.length>1&&r[0].focus()},n.tabLoopRef=w.createRef(),n}return a.prototype.render=function(){var e;return((e=this.props.enableTabLoop)!==null&&e!==void 0?e:a.defaultProps.enableTabLoop)?u.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},u.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,u.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},a.defaultProps={enableTabLoop:!0},a}(w.Component);function ER(t){var a=function(e){var n,r=typeof e.hidePopper=="boolean"?e.hidePopper:!0,o=w.useRef(null),l=RN(Tt({open:!r,whileElementsMounted:fN,placement:e.popperPlacement,middleware:ts([bN({padding:15}),vN(10),wN({element:o})],(n=e.popperModifiers)!==null&&n!==void 0?n:[],!0)},e.popperProps)),d=Tt(Tt({},e),{hidePopper:r,popperProps:Tt(Tt({},l),{arrowRef:o})});return u.createElement(t,Tt({},d))};return a}var CR=function(t){Qn(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(a,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),a.prototype.render=function(){var e=this.props,n=e.className,r=e.wrapperClassName,o=e.hidePopper,l=o===void 0?a.defaultProps.hidePopper:o,d=e.popperComponent,h=e.targetComponent,m=e.enableTabLoop,p=e.popperOnKeyDown,y=e.portalId,b=e.portalHost,E=e.popperProps,S=e.showArrow,C=void 0;if(!l){var _=aa("react-datepicker-popper",n);C=u.createElement(K2,{enableTabLoop:m},u.createElement("div",{ref:E.refs.setFloating,style:E.floatingStyles,className:_,"data-placement":E.placement,onKeyDown:p},d,S&&u.createElement(_N,{ref:E.arrowRef,context:E.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(C=w.createElement(this.props.popperContainer,{},C)),y&&!l&&(C=u.createElement(J2,{portalId:y,portalHost:b},C));var x=aa("react-datepicker-wrapper",r);return u.createElement(u.Fragment,null,u.createElement("div",{ref:E.refs.setReference,className:x},h),C)},a}(w.Component),_R=ER(CR),w1="react-datepicker-ignore-onclickoutside";function IR(t,a){return t&&a?ha(t)!==ha(a)||pt(t)!==pt(a):t!==a}var Up="Date input not valid.",eS=function(t){Qn(a,t);function a(e){var n=t.call(this,e)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Pt()},n.modifyHolidays=function(){var r;return(r=n.props.holidays)===null||r===void 0?void 0:r.reduce(function(o,l){var d=new Date(l.date);return fh(d)?ts(ts([],o,!0),[Tt(Tt({},l),{date:d})],!1):o},[])},n.calcInitialState=function(){var r,o=n.getPreSelection(),l=Q2(n.props),d=V2(n.props),h=l&&oo(o,Yd(l))?l:d&&Fs(o,s1(d))?d:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(r=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&r!==void 0?r:h,highlightDates:h1(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Tt(Tt({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Tt(Tt({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var r,o;(o=(r=n.input)===null||r===void 0?void 0:r.focus)===null||o===void 0||o.call(r,{preventScroll:!0})},n.setBlur=function(){var r,o;(o=(r=n.input)===null||r===void 0?void 0:r.blur)===null||o===void 0||o.call(r),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(r,o){o===void 0&&(o=!1),n.setState({open:r,preSelection:r&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:zp},function(){r||n.setState(function(l){return{focused:o?l.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Ls(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(r){var o,l,d=n.state.wasHidden,h=d?n.state.open:!0;d&&n.resetHiddenStatus(),n.state.preventFocus||((l=(o=n.props).onFocus)===null||l===void 0||l.call(o,r),h&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(r){var o,l;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((l=(o=n.props).onBlur)===null||l===void 0||l.call(o,r)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(r){var o,l;n.props.inline||n.setOpen(!1),(l=(o=n.props).onClickOutside)===null||l===void 0||l.call(o,r),n.props.withPortal&&r.preventDefault()},n.handleChange=function(){for(var r,o,l,d,h,m=[],p=0;p<arguments.length;p++)m[p]=arguments[p];var y=m[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,m),!y||typeof y.isDefaultPrevented!="function"||y.isDefaultPrevented()))){n.setState({inputValue:(y==null?void 0:y.target)instanceof HTMLInputElement?y.target.value:null,lastPreSelectChange:DR});var b=n.props,E=b.selectsRange,S=b.startDate,C=b.endDate,_=(r=n.props.dateFormat)!==null&&r!==void 0?r:a.defaultProps.dateFormat,x=(o=n.props.strictParsing)!==null&&o!==void 0?o:a.defaultProps.strictParsing,D=(y==null?void 0:y.target)instanceof HTMLInputElement?y.target.value:"";if(E){var A=D.split(_.includes("-")?$2:"-",2).map(function(X){return X.trim()}),k=A[0],P=A[1],L=Pp(k??"",_,n.props.locale,x),G=Pp(P??"",_,n.props.locale,x),F=(S==null?void 0:S.getTime())!==(L==null?void 0:L.getTime()),q=(C==null?void 0:C.getTime())!==(G==null?void 0:G.getTime());if(!F&&!q||L&&yr(L,n.props)||G&&yr(G,n.props))return;(d=(l=n.props).onChange)===null||d===void 0||d.call(l,[L,G],y)}else{var te=Pp(D,_,n.props.locale,x,(h=n.props.selected)!==null&&h!==void 0?h:void 0);(te||!D)&&n.setSelected(te,y,!0)}}},n.handleSelect=function(r,o,l){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(o),n.setSelected(r,o,!1,l),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(r);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var d=n.props,h=d.startDate,m=d.endDate;h&&!m&&(n.props.swapRange||!y1(r,h))&&n.setOpen(!1)}}},n.setSelected=function(r,o,l,d){var h,m,p=r;if(n.props.showYearPicker){if(p!==null&&Wd(pt(p),n.props))return}else if(n.props.showMonthYearPicker){if(p!==null&&q2(p,n.props))return}else if(p!==null&&yr(p,n.props))return;var y=n.props,b=y.onChange,E=y.selectsRange,S=y.startDate,C=y.endDate,_=y.selectsMultiple,x=y.selectedDates,D=y.minTime,A=y.swapRange;if(!Ji(n.props.selected,p)||n.props.allowSameDay||E||_)if(p!==null&&(n.props.selected&&(!l||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(p=Op(p,{hour:Ps(n.props.selected),minute:Os(n.props.selected),second:Ai(n.props.selected)})),!l&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&D&&(p=Op(p,{hour:D.getHours(),minute:D.getMinutes(),second:D.getSeconds()})),n.props.inline||n.setState({preSelection:p}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:d})),E){var k=!S&&!C,P=S&&!C,L=S&&C;k?b==null||b([p,null],o):P&&(p===null?b==null||b([null,null],o):y1(p,S)?A?b==null||b([p,S],o):b==null||b([p,null],o):b==null||b([S,p],o)),L&&(b==null||b([p,null],o))}else if(_){if(p!==null)if(!(x!=null&&x.length))b==null||b([p],o);else{var G=x.some(function(q){return At(q,p)});if(G){var F=x.filter(function(q){return!At(q,p)});b==null||b(F,o)}else b==null||b(ts(ts([],x,!0),[p],!1),o)}}else b==null||b(p,o);l||((m=(h=n.props).onSelect)===null||m===void 0||m.call(h,p,o),n.setState({inputValue:null}))},n.setPreSelection=function(r){if(!n.props.readOnly){var o=Ls(n.props.minDate),l=Ls(n.props.maxDate),d=!0;if(r){var h=Yd(r);if(o&&l)d=Nc(r,n.props.minDate,n.props.maxDate);else if(o){var m=Yd(n.props.minDate);d=Fs(r,m)||Ji(h,m)}else if(l){var p=s1(n.props.maxDate);d=oo(r,p)||Ji(h,p)}}d&&n.setState({preSelection:r})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(r){var o,l;if(!(n.props.selectsRange||n.props.selectsMultiple)){var d=n.props.selected?n.props.selected:n.getPreSelection(),h=n.props.selected?r:Op(d,{hour:Ps(r),minute:Os(r)});n.setState({preSelection:h}),(l=(o=n.props).onChange)===null||l===void 0||l.call(o,h),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var r,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(r=n.props).onInputClick)===null||o===void 0||o.call(r)},n.onInputKeyDown=function(r){var o,l,d,h,m,p;(l=(o=n.props).onKeyDown)===null||l===void 0||l.call(o,r);var y=r.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(y===Te.ArrowDown||y===Te.ArrowUp||y===Te.Enter)&&((d=n.onInputClick)===null||d===void 0||d.call(n));return}if(n.state.open){if(y===Te.ArrowDown||y===Te.ArrowUp){r.preventDefault();var b=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',E=((h=n.calendar)===null||h===void 0?void 0:h.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(b);E instanceof HTMLElement&&E.focus({preventScroll:!0});return}var S=Pt(n.state.preSelection);y===Te.Enter?(r.preventDefault(),r.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===zp?(n.handleSelect(S,r),!n.props.shouldCloseOnSelect&&n.setPreSelection(S)):n.setOpen(!1)):y===Te.Escape?(r.preventDefault(),r.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):y===Te.Tab&&n.setOpen(!1),n.inputOk()||(p=(m=n.props).onInputError)===null||p===void 0||p.call(m,{code:1,msg:Up})}},n.onPortalKeyDown=function(r){var o=r.key;o===Te.Escape&&(r.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(r){var o,l,d,h,m,p,y=n.props,b=y.minDate,E=y.maxDate,S=y.disabledKeyboardNavigation,C=y.showWeekPicker,_=y.shouldCloseOnSelect,x=y.locale,D=y.calendarStartDay,A=y.adjustDateOnChange,k=y.inline;if((l=(o=n.props).onKeyDown)===null||l===void 0||l.call(o,r),!S){var P=r.key,L=r.shiftKey,G=Pt(n.state.preSelection),F=function(H,R){var B=R;switch(H){case Te.ArrowRight:B=C?nf(R,1):Nr(R,1);break;case Te.ArrowLeft:B=C?Yw(R):FA(R);break;case Te.ArrowUp:B=Yw(R);break;case Te.ArrowDown:B=nf(R,1);break;case Te.PageUp:B=L?ol(R,1):no(R,1);break;case Te.PageDown:B=L?ks(R,1):Rr(R,1);break;case Te.Home:B=Ti(R,x,D);break;case Te.End:B=zN(R);break}return B},q=function(H,R){for(var B=40,Y=H,$=!1,T=0,U=F(H,R);!$;){if(T>=B){U=R;break}b&&U<b&&(Y=Te.ArrowRight,U=yr(b,n.props)?F(Y,U):b),E&&U>E&&(Y=Te.ArrowLeft,U=yr(E,n.props)?F(Y,U):E),yr(U,n.props)?((Y===Te.PageUp||Y===Te.Home)&&(Y=Te.ArrowRight),(Y===Te.PageDown||Y===Te.End)&&(Y=Te.ArrowLeft),U=F(Y,U)):$=!0,T++}return U};if(P===Te.Enter){r.preventDefault(),n.handleSelect(G,r),!_&&n.setPreSelection(G);return}else if(P===Te.Escape){r.preventDefault(),n.setOpen(!1),n.inputOk()||(h=(d=n.props).onInputError)===null||h===void 0||h.call(d,{code:1,msg:Up});return}var te=null;switch(P){case Te.ArrowLeft:case Te.ArrowRight:case Te.ArrowUp:case Te.ArrowDown:case Te.PageUp:case Te.PageDown:case Te.Home:case Te.End:te=q(P,G);break}if(!te){(p=(m=n.props).onInputError)===null||p===void 0||p.call(m,{code:1,msg:Up});return}if(r.preventDefault(),n.setState({lastPreSelectChange:zp}),A&&n.setSelected(te),n.setPreSelection(te),k){var X=ha(G),se=ha(te),ee=pt(G),j=pt(te);X!==se||ee!==j?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(r){var o=r.key;o===Te.Escape&&(r.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(r){r&&r.preventDefault&&r.preventDefault(),n.sendFocusBackToInput();var o=n.props,l=o.selectsRange,d=o.onChange;l?d==null||d([null,null],r):d==null||d(null,r),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(r){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(r.target===document||r.target===document.documentElement||r.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(r)&&n.setOpen(!1)},n.renderCalendar=function(){var r,o;return!n.props.inline&&!n.isCalendarOpen()?null:u.createElement(bR,Tt({showMonthYearDropdown:void 0,ref:function(l){n.calendar=l}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(r=n.props.dateFormatCalendar)!==null&&r!==void 0?r:a.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:XN(n.modifyHolidays()),outsideClickIgnoreClass:w1,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:a.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var r=n.props,o=r.dateFormat,l=o===void 0?a.defaultProps.dateFormat:o,d=r.locale,h=n.props.showTimeInput||n.props.showTimeSelect,m=h?"PPPPp":"PPPP",p;return n.props.selectsRange?p="Selected start date: ".concat(pr(n.props.startDate,{dateFormat:m,locale:d}),". ").concat(n.props.endDate?"End date: "+pr(n.props.endDate,{dateFormat:m,locale:d}):""):n.props.showTimeSelectOnly?p="Selected time: ".concat(pr(n.props.selected,{dateFormat:l,locale:d})):n.props.showYearPicker?p="Selected year: ".concat(pr(n.props.selected,{dateFormat:"yyyy",locale:d})):n.props.showMonthYearPicker?p="Selected month: ".concat(pr(n.props.selected,{dateFormat:"MMMM yyyy",locale:d})):n.props.showQuarterYearPicker?p="Selected quarter: ".concat(pr(n.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):p="Selected date: ".concat(pr(n.props.selected,{dateFormat:m,locale:d})),u.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},p)},n.renderDateInput=function(){var r,o,l,d=aa(n.props.className,(r={},r[w1]=n.state.open,r)),h=n.props.customInput||u.createElement("input",{type:"text"}),m=n.props.customInputRef||"ref",p=n.props,y=p.dateFormat,b=y===void 0?a.defaultProps.dateFormat:y,E=p.locale,S=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?PN(n.props.startDate,n.props.endDate,{dateFormat:b,locale:E}):n.props.selectsMultiple?ON((l=n.props.selectedDates)!==null&&l!==void 0?l:[],{dateFormat:b,locale:E}):pr(n.props.selected,{dateFormat:b,locale:E});return w.cloneElement(h,(o={},o[m]=function(C){n.input=C},o.value=S,o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=aa(h.props.className,d),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var r=n.props,o=r.isClearable,l=r.disabled,d=r.selected,h=r.startDate,m=r.endDate,p=r.clearButtonTitle,y=r.clearButtonClassName,b=y===void 0?"":y,E=r.ariaLabelClose,S=E===void 0?"Close":E,C=r.selectedDates,_=r.readOnly;return o&&!_&&(d!=null||h!=null||m!=null||C!=null&&C.length)?u.createElement("button",{type:"button",className:aa("react-datepicker__close-icon",b,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":S,onClick:n.onClearClick,title:p,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(a,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:su,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),a.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.componentDidUpdate=function(e,n){var r,o,l,d;e.inline&&IR(e.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:h1(this.props.highlightDates)}),!n.focused&&!Ji(e.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(r=this.props).onCalendarOpen)===null||o===void 0||o.call(r)),n.open===!0&&this.state.open===!1&&((d=(l=this.props).onCalendarClose)===null||d===void 0||d.call(l)))},a.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},a.prototype.renderInputContainer=function(){var e=this.props,n=e.showIcon,r=e.icon,o=e.calendarIconClassname,l=e.calendarIconClassName,d=e.toggleCalendarOnIconClick,h=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),u.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&u.createElement(wR,Tt({icon:r,className:aa(l,!l&&o,h&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},a.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var n=this.state.open?u.createElement(K2,{enableTabLoop:this.props.enableTabLoop},u.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(n=u.createElement(J2,Tt({portalId:this.props.portalId},this.props),n)),u.createElement("div",null,this.renderInputContainer(),n)}return u.createElement(_R,Tt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},a}(w.Component),DR="input",zp="navigate";function x1(t){if(!t||typeof t!="string"||!t.match(/\d/))return{h:0,m:0};const[a,e]=t.trim().split(/\s+/);let[n,r]=a.split(":").map(Number);return e&&e.toLowerCase()==="pm"&&n!==12&&(n+=12),e&&e.toLowerCase()==="am"&&n===12&&(n=0),{h:n,m:r}}function T0(t,a,e=30){const n=x1(t),r=x1(a),o=[];let l=new Date(0,0,0,n.h,n.m);const d=new Date(0,0,0,r.h,r.m);for(;l<=d;){const h=l.getHours(),m=l.getMinutes();let p=(h%12||12)+":"+(m<10?"0":"")+m+(h<12?" AM":" PM");o.push(p),l=new Date(l.getTime()+e*6e4)}return o}function AR(t){const a={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},e=new Date,n=e.getDay();let o=(a[t]-n+7)%7;o===0&&(o=7);const l=new Date(e);return l.setDate(e.getDate()+o),l}function TR({proposal:t,open:a,onClose:e,onSubmit:n,senderPlayer:r,phase:o,selectedDivision:l}){var Y;const[d,h]=w.useState(new Date),[m,p]=w.useState(""),[y,b]=w.useState(""),[E,S]=w.useState(""),[C,_]=w.useState(""),[x,D]=w.useState(""),[A,k]=w.useState(""),[P,L]=w.useState("");w.useEffect(()=>{if(t&&a){if(t.date){const[$,T,U]=t.date.split("-");h(new Date(parseInt($),parseInt(T)-1,parseInt(U)))}p(""),b(""),S(t.location||""),_(t.gameType||"8 Ball"),D(t.raceLength||(o==="scheduled"||o==="challenge"?5:7)),k("")}},[t,a,o]),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()];const q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()],te=((Y=r==null?void 0:r.availability)==null?void 0:Y[q])||[],X=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],se=te.length>0?te:X,ee=r!=null&&r.locations?r.locations.split(/\r?\n/).map($=>$.trim()).filter(Boolean):[],j=w.useMemo(()=>{if(!m)return[];const $=m.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();if(!$.includes(" - "))return[];let[T,U]=$.split(" - ").map(K=>H(K.trim()));return!T||!U?[]:T0(T,U,30)},[m]);function H($){let T=$.trim();T=T.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(K,V,re,Ee)=>`${parseInt(V,10)}:${re} ${Ee.toUpperCase()}`),T=T.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(K,V,re,Ee)=>`${parseInt(V,10)}:${re} ${Ee.toUpperCase()}`),T=T.replace(/^(\d{1,2})(am|pm)$/i,(K,V,re)=>`${parseInt(V,10)}:00 ${re.toUpperCase()}`),T=T.replace(/(am|pm)$/i," $1"),T=T.replace(/(am|pm)$/i,K=>K.toUpperCase());const U=T.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(U){const K=U[1],V=U[2],re=U[3].toUpperCase();return`${K}:${V} ${re}`}return T}function R($){if(!$)return"";const T=new Date($),U=String(T.getMonth()+1).padStart(2,"0"),K=String(T.getDate()).padStart(2,"0"),V=T.getFullYear();return`${U}-${K}-${V}`}const B=$=>{if($.preventDefault(),!d||!y||!E){L("Please fill in all required fields.");return}L(""),n({date:R(d),time:y,location:E,gameType:C,raceLength:x,note:A})};return!a||!t?null:u.createElement(qn,{open:a,onClose:e,title:" Counter Proposal",maxWidth:"500px"},u.createElement("form",{onSubmit:B,style:{textAlign:"left"}},u.createElement("div",{style:{fontWeight:"bold",fontSize:"1.15rem",margin:"0 0 1rem 0",color:"#fff",textAlign:"center"}},"To: ",t.senderName||"Opponent"),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Date:"),u.createElement(eS,{selected:d,onChange:$=>h($),dateFormat:"MM-dd-yyyy",className:"counter-proposal-date-input",required:!0})),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Time Block:"),u.createElement("select",{value:m,onChange:$=>{p($.target.value),b("")},required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},u.createElement("option",{value:""},"Select time block"),se.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Start Time:"),u.createElement("select",{value:y,onChange:$=>b($.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},u.createElement("option",{value:""},"Select..."),j.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Location:"),u.createElement("select",{value:E,onChange:$=>S($.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},u.createElement("option",{value:""},"Select location"),ee.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Game Type:"),u.createElement("select",{value:C,onChange:$=>_($.target.value),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},u.createElement("option",{value:"8 Ball"},"8 Ball"),u.createElement("option",{value:"9 Ball"},"9 Ball"),u.createElement("option",{value:"10 Ball"},"10 Ball"),u.createElement("option",{value:"Mixed"},"Mixed"))),u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Race Length:"),u.createElement("select",{value:x,onChange:$=>D(Number($.target.value)),required:!0,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px"}},o==="scheduled"||o==="challenge"?u.createElement("option",{value:5},"5"):[...Array(13)].map(($,T)=>{const U=T+3;return u.createElement("option",{key:U,value:U},U)}))),u.createElement("div",{style:{marginBottom:"1.5rem"}},u.createElement("label",{style:{display:"block",marginBottom:"0.5rem",color:"#e53e3e",fontWeight:"bold"}},"Note (optional):"),u.createElement("textarea",{value:A,onChange:$=>k($.target.value),placeholder:"Add a note explaining your counter proposal...",rows:3,style:{width:"100%",padding:"0.5rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"4px",resize:"vertical"}})),P&&u.createElement("div",{style:{color:"#e53e3e",marginBottom:"1rem"}},P),u.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},u.createElement("button",{type:"submit",style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Submit Counter"),u.createElement("button",{type:"button",onClick:e,style:{background:"#6c757d",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",minWidth:"120px"}},"Cancel"))))}function Ig(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const r=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(r){const[o,l,d,h]=r,m=a[l];m&&e[m].push(`${d} - ${h}`)}}),e}function tS({open:t,onClose:a,opponents:e,onOpponentClick:n,phase:r,selectedCalendarDate:o}){if(!t)return null;const l=o?e.filter(d=>{if(!d.player||!d.player.availability)return!1;const m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][o.getDay()],p=d.player.availability;return p[m]&&p[m].length>0}):e;return u.createElement(qn,{open:t,onClose:a,title:` Select Opponent - ${r==="scheduled"||r==="offseason"?"Phase 1":"Phase 2"}${o?` (${o.toLocaleDateString()})`:""}`,maxWidth:"500px"},u.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},l.length===0?u.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},o?`No opponents available for ${o.toLocaleDateString()} (${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][o.getDay()]}).`:"No opponents available for scheduling at this time."):u.createElement("div",{style:{display:"grid",gap:"8px"}},l.map((d,h)=>u.createElement("button",{key:d.player&&d.player.email||`${d.opponentName}-${h}`||`opponent-${h}`,onClick:()=>n(d.player&&d.player.name?d.player.name:d.opponentName),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:m=>{m.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",m.target.style.transform="translateY(-2px)",m.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:m=>{m.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",m.target.style.transform="translateY(0)",m.target.style.boxShadow="none"}},d.player&&d.player.name?d.player.name:d.opponentName)))))}function M0({player:t,onClose:a,senderEmail:e,onProposeMatch:n,selectedDivision:r,phase:o}){if(!t)return null;const[l,d]=w.useState(!1),[h,m]=w.useState(10);return w.useEffect(()=>{let p;return l&&(m(10),p=setInterval(()=>{m(y=>y<=1?(clearInterval(p),d(!1),10):y-1)},1e3)),()=>clearInterval(p)},[l]),u.createElement(qn,{open:!0,onClose:a,title:` ${t.name||`${t.firstName} ${t.lastName}`}`,maxWidth:"600px"},u.createElement("div",{style:{textAlign:"left"}},u.createElement("div",{style:{fontSize:"0.9rem",color:"#888",marginBottom:"1.5rem",textAlign:"center"}},o==="scheduled"?"Phase 1 (Scheduled)":o==="challenge"?"Phase 2 (Challenge)":o),u.createElement("div",{style:{marginBottom:"1.5rem"}},u.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Preferred Locations:"),u.createElement("div",{style:{color:"#fff",textAlign:"center"}},t.locations?(()=>{const p=t.locations.split(/\r?\n/).filter(Boolean),y=[];for(let b=0;b<p.length;b+=5)y.push(p.slice(b,b+5));return y.map((b,E)=>u.createElement("div",{key:E,style:{display:"flex",justifyContent:"center",marginBottom:"0.5em",flexWrap:"wrap",gap:"0.2em"}},b.map((S,C)=>u.createElement("span",{key:S+C,style:{textAlign:"center"}},S,C<b.length-1&&u.createElement("span",{style:{color:"#e53e3e",margin:"0 0.3em"}},"  ")))))})():"No locations specified")),u.createElement("div",{style:{marginBottom:"1.5rem"}},u.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Availability:"),u.createElement("div",{style:{color:"#fff",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center",fontStyle:"italic"}},"Pick a timeblock within a day to schedule a match with this opponent."),u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Mon","Tue","Wed"].map(p=>u.createElement("div",{key:p,style:{textAlign:"center"}},u.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},p),!t.availability||!t.availability[p]||t.availability[p].length===0?u.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},""):(t.availability[p]||[]).map((y,b)=>u.createElement("div",{key:b,onClick:()=>{n&&n(p,y,o,r)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:E=>{E.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:E=>{E.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",E.target.style.transform="translateY(0)",E.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${p} at ${y}`,onKeyPress:E=>{(E.key==="Enter"||E.key===" ")&&n&&n(p,y,o,r)}},y))))),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"}},["Thu","Fri","Sat"].map(p=>u.createElement("div",{key:p,style:{textAlign:"center"}},u.createElement("div",{style:{color:"#e53e3e",fontWeight:"bold",marginBottom:"0.5rem",fontSize:"0.9rem"}},p),!t.availability||!t.availability[p]||t.availability[p].length===0?u.createElement("div",{style:{color:"#666",fontSize:"0.8rem",padding:"0.5rem",background:"#222",borderRadius:"4px"}},""):(t.availability[p]||[]).map((y,b)=>u.createElement("div",{key:b,onClick:()=>{n&&n(p,y,o,r)},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"1px solid #e53e3e",borderRadius:"6px",padding:"0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"0.5rem"},onMouseEnter:E=>{E.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",E.target.style.transform="translateY(-1px)",E.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"},onMouseLeave:E=>{E.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",E.target.style.transform="translateY(0)",E.target.style.boxShadow="none"},tabIndex:0,role:"button","aria-label":`Propose match on ${p} at ${y}`,onKeyPress:E=>{(E.key==="Enter"||E.key===" ")&&n&&n(p,y,o,r)}},y))))))),u.createElement("div",{style:{marginBottom:"1.5rem",textAlign:"center"}},u.createElement("h3",{style:{color:"#e53e3e",marginBottom:"0.5rem",fontSize:"1.1rem",textAlign:"center"}},"Contact Information:"),u.createElement("div",{style:{color:"#fff",textAlign:"center"}},l?u.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem"}},u.createElement("div",{style:{marginBottom:"0.5rem"}},u.createElement("strong",null,"Email:")," ",t.email||"Not provided"),t.phone&&u.createElement("div",{style:{marginBottom:"0.5rem"}},u.createElement("strong",null,"Phone:")," ",t.phone),t.text&&u.createElement("div",{style:{marginBottom:"0.5rem"}},u.createElement("strong",null,"Text:")," ",t.text),t.preferredContacts&&t.preferredContacts.length>0&&u.createElement("div",null,u.createElement("strong",null,"Preferred Contact:")," ",t.preferredContacts.join(", ")),u.createElement("div",{style:{color:"#ffc107",fontSize:"0.9rem",marginTop:"0.5rem"}},"Auto-hiding in ",h," seconds...")):u.createElement("button",{onClick:()=>d(!0),style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.7rem 1.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"}},"Show Contact Info")))))}const MR="_opponentName_1wgqu_479",ln={"match-proposal-content":"_match-proposal-content_1wgqu_49","match-proposal-title":"_match-proposal-title_1wgqu_135","match-proposal-row":"_match-proposal-row_1wgqu_155","match-proposal-select":"_match-proposal-select_1wgqu_177","match-proposal-location-select":"_match-proposal-location-select_1wgqu_179","match-proposal-textarea":"_match-proposal-textarea_1wgqu_225","match-proposal-date-input":"_match-proposal-date-input_1wgqu_339","match-proposal-send-btn":"_match-proposal-send-btn_1wgqu_365","match-proposal-day-value":"_match-proposal-day-value_1wgqu_449",opponentName:MR,"match-proposal-division":"_match-proposal-division_1wgqu_493","match-proposal-phase":"_match-proposal-phase_1wgqu_493","match-proposal-label-red":"_match-proposal-label-red_1wgqu_501"};var jp={},NR=Object.create,nS=Object.defineProperty,RR=Object.getOwnPropertyDescriptor,aS=Object.getOwnPropertyNames,kR=Object.getPrototypeOf,LR=Object.prototype.hasOwnProperty,ou=(t,a)=>function(){return a||(0,t[aS(t)[0]])((a={exports:{}}).exports,a),a.exports},PR=(t,a,e,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of aS(a))!LR.call(t,r)&&r!==e&&nS(t,r,{get:()=>a[r],enumerable:!(n=RR(a,r))||n.enumerable});return t},lu=(t,a,e)=>(e=t!=null?NR(kR(t)):{},PR(!t||!t.__esModule?nS(e,"default",{value:t,enumerable:!0}):e,t)),OR=ou({"node_modules/base64-js/index.js"(t){t.byteLength=h,t.toByteArray=p,t.fromByteArray=E;var a=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,l=r.length;o<l;++o)a[o]=r[o],e[r.charCodeAt(o)]=o;var o,l;e[45]=62,e[95]=63;function d(S){var C=S.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=S.indexOf("=");_===-1&&(_=C);var x=_===C?0:4-_%4;return[_,x]}function h(S){var C=d(S),_=C[0],x=C[1];return(_+x)*3/4-x}function m(S,C,_){return(C+_)*3/4-_}function p(S){var C,_=d(S),x=_[0],D=_[1],A=new n(m(S,x,D)),k=0,P=D>0?x-4:x,L;for(L=0;L<P;L+=4)C=e[S.charCodeAt(L)]<<18|e[S.charCodeAt(L+1)]<<12|e[S.charCodeAt(L+2)]<<6|e[S.charCodeAt(L+3)],A[k++]=C>>16&255,A[k++]=C>>8&255,A[k++]=C&255;return D===2&&(C=e[S.charCodeAt(L)]<<2|e[S.charCodeAt(L+1)]>>4,A[k++]=C&255),D===1&&(C=e[S.charCodeAt(L)]<<10|e[S.charCodeAt(L+1)]<<4|e[S.charCodeAt(L+2)]>>2,A[k++]=C>>8&255,A[k++]=C&255),A}function y(S){return a[S>>18&63]+a[S>>12&63]+a[S>>6&63]+a[S&63]}function b(S,C,_){for(var x,D=[],A=C;A<_;A+=3)x=(S[A]<<16&16711680)+(S[A+1]<<8&65280)+(S[A+2]&255),D.push(y(x));return D.join("")}function E(S){for(var C,_=S.length,x=_%3,D=[],A=16383,k=0,P=_-x;k<P;k+=A)D.push(b(S,k,k+A>P?P:k+A));return x===1?(C=S[_-1],D.push(a[C>>2]+a[C<<4&63]+"==")):x===2&&(C=(S[_-2]<<8)+S[_-1],D.push(a[C>>10]+a[C>>4&63]+a[C<<2&63]+"=")),D.join("")}}}),BR=ou({"(disabled):https"(){}}),UR=ou({"node_modules/form-data/lib/browser.js"(t,a){a.exports=typeof self=="object"?self.FormData:window.FormData}}),zR=ou({"(disabled):node_modules/jsonwebtoken/index.js"(){}}),jR=ou({"(disabled):crypto"(){}}),FR=lu(OR());function Dg(t){return typeof t=="string"}function S1(t,a){return!!a&&Dg(t)}function HR(t,a){const e=[];if(Dg(t)&&S1(t,a)){for(let n=0,r=t.length;n<r;n++)if(t.charAt(n)){const o=t.charAt(n),l=a(o,n,t);e[n]=l}}else if(!Dg(t)&&!S1(t,a)){for(let n=0,r=t.length;n<r;n++)if(n in t){const o=t[n],l=a(o,n,t);e[n]=l}}return e}var YR=t=>(0,FR.fromByteArray)(new Uint8Array(HR(t,a=>a.charCodeAt(0)))),WR=t=>{const a={},e=String.fromCharCode,n=t.length;let r,o=0,l,d,h=0,m,p="";const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=0;r<64;r++)a[y.charAt(r)]=r;for(d=0;d<n;d++)for(l=a[t.charAt(d)],o=(o<<6)+l,h+=6;h>=8;)((m=o>>>(h-=8)&255)||d<n-2)&&(p+=e(m));return p},E1=class{constructor(t,a,e){this.client=t,this.id=a,this.data=e}async create(){var e,n,r,o,l,d,h,m,p,y,b,E;const t={id:this.id,message_template:(e=this.data)==null?void 0:e.message_template,segment_ids:(n=this.data)==null?void 0:n.segment_ids,sender_id:(r=this.data)==null?void 0:r.sender_id,sender_mode:(o=this.data)==null?void 0:o.sender_mode,channel_template:(l=this.data)==null?void 0:l.channel_template,create_channels:(d=this.data)==null?void 0:d.create_channels,show_channels:(h=this.data)==null?void 0:h.show_channels,description:(m=this.data)==null?void 0:m.description,name:(p=this.data)==null?void 0:p.name,skip_push:(y=this.data)==null?void 0:y.skip_push,skip_webhook:(b=this.data)==null?void 0:b.skip_webhook,user_ids:(E=this.data)==null?void 0:E.user_ids},a=await this.client.createCampaign(t);return this.id=a.campaign.id,this.data=a.campaign,a}verifyCampaignId(){if(!this.id)throw new Error("Campaign id is missing. Either create the campaign using campaign.create() or set the id during instantiation - const campaign = client.campaign(id)")}async start(t){return this.verifyCampaignId(),await this.client.startCampaign(this.id,t)}update(t){return this.verifyCampaignId(),this.client.updateCampaign(this.id,t)}async delete(){return this.verifyCampaignId(),await this.client.deleteCampaign(this.id)}stop(){return this.verifyCampaignId(),this.client.stopCampaign(this.id)}get(t){return this.verifyCampaignId(),this.client.getCampaign(this.id,t)}};function rS(t,a){return function(){return t.apply(a,arguments)}}var{toString:GR}=Object.prototype,{getPrototypeOf:N0}=Object,hh=(t=>a=>{const e=GR.call(a);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),cs=t=>(t=t.toLowerCase(),a=>hh(a)===t),mh=t=>a=>typeof a===t,{isArray:wl}=Array,qc=mh("undefined");function $R(t){return t!==null&&!qc(t)&&t.constructor!==null&&!qc(t.constructor)&&vr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}var sS=cs("ArrayBuffer");function ZR(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&sS(t.buffer),a}var qR=mh("string"),vr=mh("function"),iS=mh("number"),ph=t=>t!==null&&typeof t=="object",QR=t=>t===!0||t===!1,Gd=t=>{if(hh(t)!=="object")return!1;const a=N0(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},VR=cs("Date"),XR=cs("File"),JR=cs("Blob"),KR=cs("FileList"),ek=t=>ph(t)&&vr(t.pipe),tk=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||vr(t.append)&&((a=hh(t))==="formdata"||a==="object"&&vr(t.toString)&&t.toString()==="[object FormData]"))},nk=cs("URLSearchParams"),ak=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cu(t,a,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),wl(t))for(n=0,r=t.length;n<r;n++)a.call(null,t[n],n,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let d;for(n=0;n<l;n++)d=o[n],a.call(null,t[d],d,t)}}function oS(t,a){a=a.toLowerCase();const e=Object.keys(t);let n=e.length,r;for(;n-- >0;)if(r=e[n],a===r.toLowerCase())return r;return null}var lS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cS=t=>!qc(t)&&t!==lS;function Ag(){const{caseless:t}=cS(this)&&this||{},a={},e=(n,r)=>{const o=t&&oS(a,r)||r;Gd(a[o])&&Gd(n)?a[o]=Ag(a[o],n):Gd(n)?a[o]=Ag({},n):wl(n)?a[o]=n.slice():a[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&cu(arguments[n],e);return a}var rk=(t,a,e,{allOwnKeys:n}={})=>(cu(a,(r,o)=>{e&&vr(r)?t[o]=rS(r,e):t[o]=r},{allOwnKeys:n}),t),sk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ik=(t,a,e,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),e&&Object.assign(t.prototype,e)},ok=(t,a,e,n)=>{let r,o,l;const d={};if(a=a||{},t==null)return a;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!n||n(l,t,a))&&!d[l]&&(a[l]=t[l],d[l]=!0);t=e!==!1&&N0(t)}while(t&&(!e||e(t,a))&&t!==Object.prototype);return a},lk=(t,a,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=a.length;const n=t.indexOf(a,e);return n!==-1&&n===e},ck=t=>{if(!t)return null;if(wl(t))return t;let a=t.length;if(!iS(a))return null;const e=new Array(a);for(;a-- >0;)e[a]=t[a];return e},uk=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&N0(Uint8Array)),dk=(t,a)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const o=r.value;a.call(t,o[0],o[1])}},fk=(t,a)=>{let e;const n=[];for(;(e=t.exec(a))!==null;)n.push(e);return n},hk=cs("HTMLFormElement"),mk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),C1=(({hasOwnProperty:t})=>(a,e)=>t.call(a,e))(Object.prototype),pk=cs("RegExp"),uS=(t,a)=>{const e=Object.getOwnPropertyDescriptors(t),n={};cu(e,(r,o)=>{let l;(l=a(r,o,t))!==!1&&(n[o]=l||r)}),Object.defineProperties(t,n)},gk=t=>{uS(t,(a,e)=>{if(vr(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(vr(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},yk=(t,a)=>{const e={},n=r=>{r.forEach(o=>{e[o]=!0})};return wl(t)?n(t):n(String(t).split(a)),e},vk=()=>{},bk=(t,a)=>(t=+t,Number.isFinite(t)?t:a),Fp="abcdefghijklmnopqrstuvwxyz",_1="0123456789",dS={DIGIT:_1,ALPHA:Fp,ALPHA_DIGIT:Fp+Fp.toUpperCase()+_1},wk=(t=16,a=dS.ALPHA_DIGIT)=>{let e="";const{length:n}=a;for(;t--;)e+=a[Math.random()*n|0];return e};function xk(t){return!!(t&&vr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}var Sk=t=>{const a=new Array(10),e=(n,r)=>{if(ph(n)){if(a.indexOf(n)>=0)return;if(!("toJSON"in n)){a[r]=n;const o=wl(n)?[]:{};return cu(n,(l,d)=>{const h=e(l,r+1);!qc(h)&&(o[d]=h)}),a[r]=void 0,o}}return n};return e(t,0)},Ek=cs("AsyncFunction"),Ck=t=>t&&(ph(t)||vr(t))&&vr(t.then)&&vr(t.catch),ge={isArray:wl,isArrayBuffer:sS,isBuffer:$R,isFormData:tk,isArrayBufferView:ZR,isString:qR,isNumber:iS,isBoolean:QR,isObject:ph,isPlainObject:Gd,isUndefined:qc,isDate:VR,isFile:XR,isBlob:JR,isRegExp:pk,isFunction:vr,isStream:ek,isURLSearchParams:nk,isTypedArray:uk,isFileList:KR,forEach:cu,merge:Ag,extend:rk,trim:ak,stripBOM:sk,inherits:ik,toFlatObject:ok,kindOf:hh,kindOfTest:cs,endsWith:lk,toArray:ck,forEachEntry:dk,matchAll:fk,isHTMLForm:hk,hasOwnProperty:C1,hasOwnProp:C1,reduceDescriptors:uS,freezeMethods:gk,toObjectSet:yk,toCamelCase:mk,noop:vk,toFiniteNumber:bk,findKey:oS,global:lS,isContextDefined:cS,ALPHABET:dS,generateString:wk,isSpecCompliantForm:xk,toJSONObject:Sk,isAsyncFn:Ek,isThenable:Ck};function fl(t,a,e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),e&&(this.config=e),n&&(this.request=n),r&&(this.response=r)}ge.inherits(fl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var fS=fl.prototype,hS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hS[t]={value:t}});Object.defineProperties(fl,hS);Object.defineProperty(fS,"isAxiosError",{value:!0});fl.from=(t,a,e,n,r,o)=>{const l=Object.create(fS);return ge.toFlatObject(t,l,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),fl.call(l,t.message,a,e,n,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};var Ft=fl,_k=null;function Tg(t){return ge.isPlainObject(t)||ge.isArray(t)}function mS(t){return ge.endsWith(t,"[]")?t.slice(0,-2):t}function I1(t,a,e){return t?t.concat(a).map(function(r,o){return r=mS(r),!e&&o?"["+r+"]":r}).join(e?".":""):a}function Ik(t){return ge.isArray(t)&&!t.some(Tg)}var Dk=ge.toFlatObject(ge,{},null,function(a){return/^is[A-Z]/.test(a)});function Ak(t,a,e){if(!ge.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,e=ge.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,_){return!ge.isUndefined(_[C])});const n=e.metaTokens,r=e.visitor||p,o=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(a);if(!ge.isFunction(r))throw new TypeError("visitor must be a function");function m(S){if(S===null)return"";if(ge.isDate(S))return S.toISOString();if(!h&&ge.isBlob(S))throw new Ft("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(S)||ge.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,C,_){let x=S;if(S&&!_&&typeof S=="object"){if(ge.endsWith(C,"{}"))C=n?C:C.slice(0,-2),S=JSON.stringify(S);else if(ge.isArray(S)&&Ik(S)||(ge.isFileList(S)||ge.endsWith(C,"[]"))&&(x=ge.toArray(S)))return C=mS(C),x.forEach(function(A,k){!(ge.isUndefined(A)||A===null)&&a.append(l===!0?I1([C],k,o):l===null?C:C+"[]",m(A))}),!1}return Tg(S)?!0:(a.append(I1(_,C,o),m(S)),!1)}const y=[],b=Object.assign(Dk,{defaultVisitor:p,convertValue:m,isVisitable:Tg});function E(S,C){if(!ge.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));y.push(S),ge.forEach(S,function(x,D){(!(ge.isUndefined(x)||x===null)&&r.call(a,x,ge.isString(D)?D.trim():D,C,b))===!0&&E(x,C?C.concat(D):[D])}),y.pop()}}if(!ge.isObject(t))throw new TypeError("data must be an object");return E(t),a}var gh=Ak;function D1(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function pS(t,a){this._pairs=[],t&&gh(t,this,a)}var gS=pS.prototype;gS.append=function(a,e){this._pairs.push([a,e])};gS.toString=function(a){const e=a?function(n){return a.call(this,n,D1)}:D1;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};var yS=pS;function Tk(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vS(t,a,e){if(!a)return t;const n=e&&e.encode||Tk,r=e&&e.serialize;let o;if(r?o=r(a,e):o=ge.isURLSearchParams(a)?a.toString():new yS(a,e).toString(n),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}var Mk=class{constructor(){this.handlers=[]}use(a,e,n){return this.handlers.push({fulfilled:a,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ge.forEach(this.handlers,function(n){n!==null&&a(n)})}},A1=Mk,bS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nk=typeof URLSearchParams<"u"?URLSearchParams:yS,Rk=typeof FormData<"u"?FormData:null,kk=typeof Blob<"u"?Blob:null,Lk=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Pk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ns={classes:{URLSearchParams:Nk,FormData:Rk,Blob:kk},isStandardBrowserEnv:Lk,isStandardBrowserWebWorkerEnv:Pk,protocols:["http","https","file","blob","url","data"]};function Ok(t,a){return gh(t,new ns.classes.URLSearchParams,Object.assign({visitor:function(e,n,r,o){return ns.isNode&&ge.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},a))}function Bk(t){return ge.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function Uk(t){const a={},e=Object.keys(t);let n;const r=e.length;let o;for(n=0;n<r;n++)o=e[n],a[o]=t[o];return a}function zk(t){function a(e,n,r,o){let l=e[o++];const d=Number.isFinite(+l),h=o>=e.length;return l=!l&&ge.isArray(r)?r.length:l,h?(ge.hasOwnProp(r,l)?r[l]=[r[l],n]:r[l]=n,!d):((!r[l]||!ge.isObject(r[l]))&&(r[l]=[]),a(e,n,r[l],o)&&ge.isArray(r[l])&&(r[l]=Uk(r[l])),!d)}if(ge.isFormData(t)&&ge.isFunction(t.entries)){const e={};return ge.forEachEntry(t,(n,r)=>{a(Bk(n),r,e,0)}),e}return null}var wS=zk;function jk(t,a,e){if(ge.isString(t))try{return(a||JSON.parse)(t),ge.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}var R0={transitional:bS,adapter:["xhr","http"],transformRequest:[function(a,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,o=ge.isObject(a);if(o&&ge.isHTMLForm(a)&&(a=new FormData(a)),ge.isFormData(a))return r&&r?JSON.stringify(wS(a)):a;if(ge.isArrayBuffer(a)||ge.isBuffer(a)||ge.isStream(a)||ge.isFile(a)||ge.isBlob(a))return a;if(ge.isArrayBufferView(a))return a.buffer;if(ge.isURLSearchParams(a))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ok(a,this.formSerializer).toString();if((d=ge.isFileList(a))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return gh(d?{"files[]":a}:a,h&&new h,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),jk(a)):a}],transformResponse:[function(a){const e=this.transitional||R0.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(a&&ge.isString(a)&&(n&&!this.responseType||r)){const l=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(a)}catch(d){if(l)throw d.name==="SyntaxError"?Ft.from(d,Ft.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ns.classes.FormData,Blob:ns.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],t=>{R0.headers[t]={}});var k0=R0,Fk=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hk=t=>{const a={};let e,n,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),e=l.substring(0,r).trim().toLowerCase(),n=l.substring(r+1).trim(),!(!e||a[e]&&Fk[e])&&(e==="set-cookie"?a[e]?a[e].push(n):a[e]=[n]:a[e]=a[e]?a[e]+", "+n:n)}),a},T1=Symbol("internals");function Sc(t){return t&&String(t).trim().toLowerCase()}function $d(t){return t===!1||t==null?t:ge.isArray(t)?t.map($d):String(t)}function Yk(t){const a=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)a[n[1]]=n[2];return a}var Wk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hp(t,a,e,n,r){if(ge.isFunction(n))return n.call(this,a,e);if(r&&(a=e),!!ge.isString(a)){if(ge.isString(n))return a.indexOf(n)!==-1;if(ge.isRegExp(n))return n.test(a)}}function Gk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,e,n)=>e.toUpperCase()+n)}function $k(t,a){const e=ge.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(r,o,l){return this[n].call(this,a,r,o,l)},configurable:!0})})}var yh=class{constructor(a){a&&this.set(a)}set(a,e,n){const r=this;function o(d,h,m){const p=Sc(h);if(!p)throw new Error("header name must be a non-empty string");const y=ge.findKey(r,p);(!y||r[y]===void 0||m===!0||m===void 0&&r[y]!==!1)&&(r[y||h]=$d(d))}const l=(d,h)=>ge.forEach(d,(m,p)=>o(m,p,h));return ge.isPlainObject(a)||a instanceof this.constructor?l(a,e):ge.isString(a)&&(a=a.trim())&&!Wk(a)?l(Hk(a),e):a!=null&&o(e,a,n),this}get(a,e){if(a=Sc(a),a){const n=ge.findKey(this,a);if(n){const r=this[n];if(!e)return r;if(e===!0)return Yk(r);if(ge.isFunction(e))return e.call(this,r,n);if(ge.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,e){if(a=Sc(a),a){const n=ge.findKey(this,a);return!!(n&&this[n]!==void 0&&(!e||Hp(this,this[n],n,e)))}return!1}delete(a,e){const n=this;let r=!1;function o(l){if(l=Sc(l),l){const d=ge.findKey(n,l);d&&(!e||Hp(n,n[d],d,e))&&(delete n[d],r=!0)}}return ge.isArray(a)?a.forEach(o):o(a),r}clear(a){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const o=e[n];(!a||Hp(this,this[o],o,a,!0))&&(delete this[o],r=!0)}return r}normalize(a){const e=this,n={};return ge.forEach(this,(r,o)=>{const l=ge.findKey(n,o);if(l){e[l]=$d(r),delete e[o];return}const d=a?Gk(o):String(o).trim();d!==o&&delete e[o],e[d]=$d(r),n[d]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const e=Object.create(null);return ge.forEach(this,(n,r)=>{n!=null&&n!==!1&&(e[r]=a&&ge.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,e])=>a+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...e){const n=new this(a);return e.forEach(r=>n.set(r)),n}static accessor(a){const n=(this[T1]=this[T1]={accessors:{}}).accessors,r=this.prototype;function o(l){const d=Sc(l);n[d]||($k(r,l),n[d]=!0)}return ge.isArray(a)?a.forEach(o):o(a),this}};yh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(yh.prototype,({value:t},a)=>{let e=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[e]=n}}});ge.freezeMethods(yh);var Us=yh;function Yp(t,a){const e=this||k0,n=a||e,r=Us.from(n.headers);let o=n.data;return ge.forEach(t,function(d){o=d.call(e,o,r.normalize(),a?a.status:void 0)}),r.normalize(),o}function xS(t){return!!(t&&t.__CANCEL__)}function SS(t,a,e){Ft.call(this,t??"canceled",Ft.ERR_CANCELED,a,e),this.name="CanceledError"}ge.inherits(SS,Ft,{__CANCEL__:!0});var vh=SS;function Zk(t,a,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):a(new Ft("Request failed with status code "+e.status,[Ft.ERR_BAD_REQUEST,Ft.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}var qk=ns.isStandardBrowserEnv?function(){return{write:function(e,n,r,o,l,d){const h=[];h.push(e+"="+encodeURIComponent(n)),ge.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),ge.isString(o)&&h.push("path="+o),ge.isString(l)&&h.push("domain="+l),d===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Qk(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Vk(t,a){return a?t.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):t}function ES(t,a){return t&&!Qk(a)?Vk(t,a):a}var Xk=ns.isStandardBrowserEnv?function(){const a=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(o){let l=o;return a&&(e.setAttribute("href",l),l=e.href),e.setAttribute("href",l),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(l){const d=ge.isString(l)?r(l):l;return d.protocol===n.protocol&&d.host===n.host}}():function(){return function(){return!0}}();function Jk(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function Kk(t,a){t=t||10;const e=new Array(t),n=new Array(t);let r=0,o=0,l;return a=a!==void 0?a:1e3,function(h){const m=Date.now(),p=n[o];l||(l=m),e[r]=h,n[r]=m;let y=o,b=0;for(;y!==r;)b+=e[y++],y=y%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),m-l<a)return;const E=p&&m-p;return E?Math.round(b*1e3/E):void 0}}var e4=Kk;function M1(t,a){let e=0;const n=e4(50,250);return r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,d=o-e,h=n(d),m=o<=l;e=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:h||void 0,estimated:h&&l&&m?(l-o)/h:void 0,event:r};p[a?"download":"upload"]=!0,t(p)}}var t4=typeof XMLHttpRequest<"u",n4=t4&&function(t){return new Promise(function(e,n){let r=t.data;const o=Us.from(t.headers).normalize(),l=t.responseType;let d;function h(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}let m;ge.isFormData(r)&&(ns.isStandardBrowserEnv||ns.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.getContentType(/^\s*multipart\/form-data/)?ge.isString(m=o.getContentType())&&o.setContentType(m.replace(/^\s*(multipart\/form-data);+/,"$1")):o.setContentType("multipart/form-data"));let p=new XMLHttpRequest;if(t.auth){const S=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(S+":"+C))}const y=ES(t.baseURL,t.url);p.open(t.method.toUpperCase(),vS(y,t.params,t.paramsSerializer),!0),p.timeout=t.timeout;function b(){if(!p)return;const S=Us.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:t,request:p};Zk(function(D){e(D),h()},function(D){n(D),h()},_),p=null}if("onloadend"in p?p.onloadend=b:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(b)},p.onabort=function(){p&&(n(new Ft("Request aborted",Ft.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new Ft("Network Error",Ft.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let C=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||bS;t.timeoutErrorMessage&&(C=t.timeoutErrorMessage),n(new Ft(C,_.clarifyTimeoutError?Ft.ETIMEDOUT:Ft.ECONNABORTED,t,p)),p=null},ns.isStandardBrowserEnv){const S=Xk(y)&&t.xsrfCookieName&&qk.read(t.xsrfCookieName);S&&o.set(t.xsrfHeaderName,S)}r===void 0&&o.setContentType(null),"setRequestHeader"in p&&ge.forEach(o.toJSON(),function(C,_){p.setRequestHeader(_,C)}),ge.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),l&&l!=="json"&&(p.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&p.addEventListener("progress",M1(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",M1(t.onUploadProgress)),(t.cancelToken||t.signal)&&(d=S=>{p&&(n(!S||S.type?new vh(null,t,p):S),p.abort(),p=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d)));const E=Jk(y);if(E&&ns.protocols.indexOf(E)===-1){n(new Ft("Unsupported protocol "+E+":",Ft.ERR_BAD_REQUEST,t));return}p.send(r||null)})},Mg={http:_k,xhr:n4};ge.forEach(Mg,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});var N1=t=>`- ${t}`,a4=t=>ge.isFunction(t)||t===null||t===!1,CS={getAdapter:t=>{t=ge.isArray(t)?t:[t];const{length:a}=t;let e,n;const r={};for(let o=0;o<a;o++){e=t[o];let l;if(n=e,!a4(e)&&(n=Mg[(l=String(e)).toLowerCase()],n===void 0))throw new Ft(`Unknown adapter '${l}'`);if(n)break;r[l||"#"+o]=n}if(!n){const o=Object.entries(r).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(N1).join(`
`):" "+N1(o[0]):"as no adapter specified";throw new Ft("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Mg};function Wp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new vh(null,t)}function R1(t){return Wp(t),t.headers=Us.from(t.headers),t.data=Yp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),CS.getAdapter(t.adapter||k0.adapter)(t).then(function(n){return Wp(t),n.data=Yp.call(t,t.transformResponse,n),n.headers=Us.from(n.headers),n},function(n){return xS(n)||(Wp(t),n&&n.response&&(n.response.data=Yp.call(t,t.transformResponse,n.response),n.response.headers=Us.from(n.response.headers))),Promise.reject(n)})}var k1=t=>t instanceof Us?t.toJSON():t;function hl(t,a){a=a||{};const e={};function n(m,p,y){return ge.isPlainObject(m)&&ge.isPlainObject(p)?ge.merge.call({caseless:y},m,p):ge.isPlainObject(p)?ge.merge({},p):ge.isArray(p)?p.slice():p}function r(m,p,y){if(ge.isUndefined(p)){if(!ge.isUndefined(m))return n(void 0,m,y)}else return n(m,p,y)}function o(m,p){if(!ge.isUndefined(p))return n(void 0,p)}function l(m,p){if(ge.isUndefined(p)){if(!ge.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function d(m,p,y){if(y in a)return n(m,p);if(y in t)return n(void 0,m)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,p)=>r(k1(m),k1(p),!0)};return ge.forEach(Object.keys(Object.assign({},t,a)),function(p){const y=h[p]||r,b=y(t[p],a[p],p);ge.isUndefined(b)&&y!==d||(e[p]=b)}),e}var _S="1.6.0",L0={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{L0[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});var L1={};L0.transitional=function(a,e,n){function r(o,l){return"[Axios v"+_S+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,d)=>{if(a===!1)throw new Ft(r(l," has been removed"+(e?" in "+e:"")),Ft.ERR_DEPRECATED);return e&&!L1[l]&&(L1[l]=!0,console.warn(r(l," has been deprecated since v"+e+" and will be removed in the near future"))),a?a(o,l,d):!0}};function r4(t,a,e){if(typeof t!="object")throw new Ft("options must be an object",Ft.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const o=n[r],l=a[o];if(l){const d=t[o],h=d===void 0||l(d,o,t);if(h!==!0)throw new Ft("option "+o+" must be "+h,Ft.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ft("Unknown option "+o,Ft.ERR_BAD_OPTION)}}var Ng={assertOptions:r4,validators:L0},yi=Ng.validators,yf=class{constructor(a){this.defaults=a,this.interceptors={request:new A1,response:new A1}}request(a,e){typeof a=="string"?(e=e||{},e.url=a):e=a||{},e=hl(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:o}=e;n!==void 0&&Ng.assertOptions(n,{silentJSONParsing:yi.transitional(yi.boolean),forcedJSONParsing:yi.transitional(yi.boolean),clarifyTimeoutError:yi.transitional(yi.boolean)},!1),r!=null&&(ge.isFunction(r)?e.paramsSerializer={serialize:r}:Ng.assertOptions(r,{encode:yi.function,serialize:yi.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&ge.merge(o.common,o[e.method]);o&&ge.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),e.headers=Us.concat(l,o);const d=[];let h=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(e)===!1||(h=h&&C.synchronous,d.unshift(C.fulfilled,C.rejected))});const m=[];this.interceptors.response.forEach(function(C){m.push(C.fulfilled,C.rejected)});let p,y=0,b;if(!h){const S=[R1.bind(this),void 0];for(S.unshift.apply(S,d),S.push.apply(S,m),b=S.length,p=Promise.resolve(e);y<b;)p=p.then(S[y++],S[y++]);return p}b=d.length;let E=e;for(y=0;y<b;){const S=d[y++],C=d[y++];try{E=S(E)}catch(_){C.call(this,_);break}}try{p=R1.call(this,E)}catch(S){return Promise.reject(S)}for(y=0,b=m.length;y<b;)p=p.then(m[y++],m[y++]);return p}getUri(a){a=hl(this.defaults,a);const e=ES(a.baseURL,a.url);return vS(e,a.params,a.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(a){yf.prototype[a]=function(e,n){return this.request(hl(n||{},{method:a,url:e,data:(n||{}).data}))}});ge.forEach(["post","put","patch"],function(a){function e(n){return function(o,l,d){return this.request(hl(d||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}yf.prototype[a]=e(),yf.prototype[a+"Form"]=e(!0)});var Zd=yf,s4=class IS{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(d=>{n.subscribe(d),o=d}).then(r);return l.cancel=function(){n.unsubscribe(o)},l},a(function(o,l,d){n.reason||(n.reason=new vh(o,l,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const e=this._listeners.indexOf(a);e!==-1&&this._listeners.splice(e,1)}static source(){let a;return{token:new IS(function(r){a=r}),cancel:a}}},i4=s4;function o4(t){return function(e){return t.apply(null,e)}}function l4(t){return ge.isObject(t)&&t.isAxiosError===!0}var Rg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rg).forEach(([t,a])=>{Rg[a]=t});var c4=Rg;function DS(t){const a=new Zd(t),e=rS(Zd.prototype.request,a);return ge.extend(e,Zd.prototype,a,{allOwnKeys:!0}),ge.extend(e,a,null,{allOwnKeys:!0}),e.create=function(r){return DS(hl(t,r))},e}var Rn=DS(k0);Rn.Axios=Zd;Rn.CanceledError=vh;Rn.CancelToken=i4;Rn.isCancel=xS;Rn.VERSION=_S;Rn.toFormData=gh;Rn.AxiosError=Ft;Rn.Cancel=Rn.CanceledError;Rn.all=function(a){return Promise.all(a)};Rn.spread=o4;Rn.isAxiosError=l4;Rn.mergeConfig=hl;Rn.AxiosHeaders=Us;Rn.formToJSON=t=>wS(ge.isHTMLForm(t)?new FormData(t):t);Rn.getAdapter=CS.getAdapter;Rn.HttpStatusCode=c4;Rn.default=Rn;var Qc=Rn,{Axios:sF,AxiosError:iF,CanceledError:oF,isCancel:lF,CancelToken:cF,VERSION:uF,all:dF,Cancel:fF,isAxiosError:hF,spread:mF,toFormData:pF,AxiosHeaders:gF,HttpStatusCode:yF,formToJSON:vF,getAdapter:bF,mergeConfig:wF}=Qc,u4=lu(BR()),d4=lu(UR()),f4=25,h4=100,Gp={hasNext:!1,hasPrev:!1},m4=100*1024*1024,p4=10,g4=100,y4={created_at:!0,deleted_at:!0,pinned_at:!0,updated_at:!0,command:!0,mentioned_users:!0,quoted_message:!0,latest_reactions:!0,own_reactions:!0,reaction_counts:!0,reply_count:!0,i18n:!0,type:!0,html:!0,__html:!0,user:!0},v4={error:!0},b4=3,w4=1e3;function AS(t,a){t.then().catch(e=>{console.warn(`failed to do ${a}, ran into error: `,e)})}var Mi=t=>new Promise(a=>setTimeout(a,t));function kg(t){return typeof t=="function"||t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}var Rc={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3};function x4(t){return t!==null&&typeof t=="object"&&(t.readable||typeof t._read=="function")}function S4(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function E4(t){return typeof window<"u"&&"File"in window&&t instanceof File}function C4(t){return typeof window<"u"&&"Blob"in window&&t instanceof Blob}function _4(t){return{channel_mutes:!0,devices:!0,mutes:!0,total_unread_count:!0,unread_channels:!0,unread_count:!0,unread_threads:!0,invisible:!0,privacy_settings:!0,roles:!0,push_preferences:!0}[t]}function I4(t,a,e){const n=new d4.default;return x4(t)||S4(t)||E4(t)||C4(t)?a?n.append("file",t,a):n.append("file",t):n.append("file",{uri:t,name:a||t.split("/").reverse()[0],contentType:e,type:e}),n}function fa(t){const a=[],e=Array.isArray(t)?t:[t];for(const n of e){const r=Object.entries(n);r.length>1&&console.warn("client._buildSort() - multiple fields in a single sort object detected. Object's field order is not guaranteed");for(const[o,l]of r)a.push({field:o,direction:l})}return a}function vf(t){const a=Math.min(500+t*2e3,25e3),e=Math.min(Math.max(250,(t-1)*2e3),25e3);return Math.floor(Math.random()*(a-e)+e)}function el(){return wr()}function Ec(t){let a="";for(let e=0;e<t.length;e++)a+=t[e].toString(16).padStart(2,"0");return a}function wr(){const t=T4(16);return t[6]=t[6]&15|64,t[8]=t[8]&191|128,Ec(t.subarray(0,4))+"-"+Ec(t.subarray(4,6))+"-"+Ec(t.subarray(6,8))+"-"+Ec(t.subarray(8,10))+"-"+Ec(t.subarray(10,16))}function D4(t){const a=Math.pow(2,8*t.byteLength/t.length);for(let e=0;e<t.length;e++)t[e]=Math.random()*a}var A4=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):D4;function T4(t){const a=new Uint8Array(t);return A4(a),a}function M4(t){const a={};if(!t)return a;try{Object.getOwnPropertyNames(t).forEach(e=>{a[e]=Object.getOwnPropertyDescriptor(t,e)})}catch{return{error:"failed to serialize the error"}}return a}function N4(){const t=typeof navigator<"u"?navigator:typeof window<"u"&&window.navigator?window.navigator:void 0;return t?typeof t.onLine!="boolean"?!0:t.onLine:(console.warn("isOnline failed to access window.navigator and assume browser is online"),!0)}function TS(t){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",t),window.addEventListener("online",t))}function MS(t){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}var R4=t=>{const a=[];for(const e in t)t[e]!==void 0&&(Array.isArray(t[e])||typeof t[e]=="object"?a.push(`${e}=${encodeURIComponent(JSON.stringify(t[e]))}`):a.push(`${e}=${encodeURIComponent(t[e])}`));return a.join("&")};function Ha(t){const a=e=>e?{...e,created_at:t.created_at?new Date(t.created_at):new Date,deleted_at:t.deleted_at?new Date(t.deleted_at):null,pinned_at:t.pinned_at?new Date(t.pinned_at):null,reaction_groups:k4(t.reaction_groups,t.reaction_counts,t.reaction_scores),status:t.status||"received",updated_at:t.updated_at?new Date(t.updated_at):new Date}:null;return{...a(t),error:t.error??null,quoted_message:a(t.quoted_message)}}var NS=t=>{var n;const a={...y4,...v4};return{...Object.fromEntries(Object.entries(t).filter(([r])=>!a[r])),pinned:!!t.pinned_at,mentioned_users:(n=t.mentioned_users)==null?void 0:n.map(r=>typeof r=="string"?r:r.id)}},RS=({needle:t,sortedArray:a,selectKey:e,selectValueToCompare:n=o=>o,sortDirection:r="ascending"})=>{if(!a.length)return 0;let o=0,l=a.length-1,d=0;const h=()=>{d=Math.round((o+l)/2)},m=n(t);for(;o<=l;){h();const p=n(a[d]);r==="ascending"&&m<p||r==="descending"&&m>=p?l=d-1:o=d+1}if(e){const p=e(t),y=r==="ascending"?-1:1;for(let b=o+y;0<=b&&b<a.length&&n(a[b])===m;b+=y)if(e(a[b])===p)return b}return o};function kS(t,a,e=!1,n="created_at",r=!0){const o=r||e;let l=[...t];if(e&&(l=l.filter(p=>!(p.id&&a.id===p.id))),l.length===0&&o)return l.concat(a);if(l.length===0)return l;const d=a[n].getTime(),h=l.at(-1)[n].getTime()<d;if(h&&o)return l.concat(a);if(h)return l;const m=RS({needle:a,sortedArray:l,sortDirection:"ascending",selectValueToCompare:p=>p[n].getTime(),selectKey:p=>p.id});return!e&&a.id&&l[m]&&a.id===l[m].id?(l[m]=a,l):(o&&l.splice(m,0,a),l)}function k4(t,a,e){if(t)return t;if(a&&e){const n={};for(const r of Object.keys(a))n[r]={count:a[r],sum_scores:e[r]};return n}return null}var Lg=(t,a=0,{leading:e=!1,trailing:n=!0}={})=>{let r=null,o=null,l;const d=(...h)=>(r?clearTimeout(r):e&&(l=t(...h)),n&&(o=h),r=setTimeout(()=>{o&&(l=t(...o),o=null),r=null},a),l);return d.cancel=()=>{r&&clearTimeout(r)},d.flush=()=>(r&&(clearTimeout(r),r=null,o&&(l=t(...o))),l),d},LS=(t,a=200,{leading:e=!0,trailing:n=!1}={})=>{let r=null,o=null;return(...l)=>{if(r){n&&(o=l);return}e&&t(...l);const d=()=>{if(o){t(...o),o=null,r=setTimeout(d,a);return}r=null};r=setTimeout(d,a)}},L4=(t,a)=>a.split(".").reduce((e,n)=>{if(e&&typeof e=="object"&&n in e)return e[n]},t),P4=(t,a)=>{if(!Array.isArray(t))return[];const e=new Set;return t.filter(n=>{const r=L4(n,a);return e.has(r)?!1:(e.add(r),!0)})};function O4(t,a){let e=0,n=t.length-1;for(;e<=n;){const r=Math.floor((e+n)/2),o=t[r].created_at;if(!o){e+=1;continue}const l=new Date(o);if(l.getTime()===a.getTime())return r;l.getTime()<a.getTime()?e=r+1:n=r-1}return e}var B4=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,x;const r={...t.pagination};if(!(n!=null&&n.created_at_around))return r;let o,l,d,h;const m=new Date(n.created_at_around),[p,y]=[e[0],e.slice(-1)[0]],b=!!(p!=null&&p.created_at)&&new Date(p.created_at)>m,E=!!(y!=null&&y.created_at)&&new Date(y.created_at)<m,S=a>t.messages.length&&a>e.length,C=(a>t.messages.length||t.messages.length>=e.length)&&a>e.length;if(b)o=!1,d=!0,S&&(l=!1,h=!0);else if(E)l=!1,h=!0,S&&(o=!1,d=!0);else if(C)l=o=!1,d=h=!0;else{const[D,A]=[(p==null?void 0:p.id)&&p.id===((_=t.messages[0])==null?void 0:_.id),(y==null?void 0:y.id)&&y.id===((x=t.messages.slice(-1)[0])==null?void 0:x.id)];d=D,h=A;const k=Math.floor(e.length/2),P=O4(e,m);P!==-1&&(o=k<=P,l=k>=P)}return d&&typeof o<"u"&&(r.hasPrev=o),h&&typeof l<"u"&&(r.hasNext=l),r},U4=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,x;const r={...t.pagination},{id_around:o}=n||{};if(!o)return r;let l,d;const[h,m]=[e[0],e.slice(-1)[0]],[p,y]=[(h==null?void 0:h.id)===((_=t.messages[0])==null?void 0:_.id),(m==null?void 0:m.id)===((x=t.messages.slice(-1)[0])==null?void 0:x.id)];let b=p,E=y;const S=Math.floor(e.length/2);if((a>t.messages.length||t.messages.length>=e.length)&&a>e.length)d=l=!1,b=E=!0;else if(e[S])if(e[S].id===o)l=d=!0;else{let D;const A=[e.slice(0,S),e.slice(S)];l=d=!0;for(let k=0;k<A.length;k++)D=A[k].find(P=>P.id===o),D&&k===0&&(l=!1),D&&k===1&&(d=!1)}else return r;return b&&typeof l<"u"&&(r.hasPrev=l),E&&typeof d<"u"&&(r.hasNext=d),r},z4=({parentSet:t,requestedPageSize:a,returnedPage:e,messagePaginationOptions:n})=>{var _,x;const r={...t.pagination};let o,l;const[d,h]=[e[0],e.slice(-1)[0]],[m,p]=[(d==null?void 0:d.id)&&d.id===((_=t.messages[0])==null?void 0:_.id),(h==null?void 0:h.id)&&h.id===((x=t.messages.slice(-1)[0])==null?void 0:x.id)],y=n&&(n.created_at_after_or_equal||n.created_at_after||n.id_gt||n.id_gte),b=typeof n>"u"?!0:n.created_at_before_or_equal||n.created_at_before||n.id_lt||n.id_lte||n.offset,E=!y&&!b&&!(n!=null&&n.id_around)&&!(n!=null&&n.created_at_around),S=e.length>=a;(typeof b<"u"||E)&&(o=S),typeof y<"u"&&(l=S);const C=e.length===0;return(m||C)&&typeof o<"u"&&(r.hasPrev=o),(p||C)&&typeof l<"u"&&(r.hasNext=l),r},PS=t=>{var a,e,n;return t.parentSet.messages.length<t.returnedPage.length?((a=t.logger)==null||a.call(t,"error","Corrupted message set state: parent set size < returned page size"),t.parentSet.pagination):(e=t.messagePaginationOptions)!=null&&e.created_at_around?B4(t):(n=t.messagePaginationOptions)!=null&&n.id_around?U4(t):z4(t)},Cd={},$p=async({channel:t,client:a,id:e,members:n,options:r,type:o})=>{if(!t&&!o)throw new Error("Channel or channel type have to be provided to query a channel.");const l=t||a.channel(o,e,{members:n}),d=l.id?l.cid:n&&n.length?P0(l.type,n):void 0;if(!d)throw new Error("Channel ID or channel members array have to be provided to query a channel.");const h=Cd[d];if(h)await h;else try{Cd[d]=l.watch(r),await Cd[d]}finally{delete Cd[d]}return l},P0=(t,a)=>{if(!a)return;const e=[...a].sort().join(",");if(e)return`${t}:!members-${e}`},bf=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.pinned_at)},_d=t=>{if(!t)return!1;const a=t.state.membership;return!!(a!=null&&a.archived_at)},Id=t=>t?typeof t.archived=="boolean":!1,OS=({atIndex:t,sort:a,targetKey:e})=>{if(!a)return null;let n=null;if(Array.isArray(a))n=a[t]??null;else for(const r in a){if(r!==e)return null;n=a;break}return(n==null?void 0:n[e])??null},Pg=t=>{const a=j4({sort:t});return typeof a!="number"?!1:Math.abs(a)===1},j4=({sort:t})=>OS({atIndex:0,sort:t,targetKey:"pinned_at"}),BS=({channels:t})=>{let a=null;for(const e of t){if(!bf(e))break;typeof a=="number"?a++:a=0}return a},Dd=({channels:t,channelToMove:a,channelToMoveIndexWithinChannels:e,sort:n})=>{const r=e??t.findIndex(y=>y.cid===a.cid),o=r>=0,l=r===0,d=Pg(n),h=bf(a);if(l||d&&h)return t;const m=[...t];o&&m.splice(r,1);let p=null;return d&&(p=BS({channels:m})),m.splice(typeof p=="number"?p+1:0,0,a),m},F4=t=>!!t.getTime,US=t=>F4(t.created_at),H4=class{constructor(t){var a;this.messageSets=[],this.formatMessage=e=>Ha(e),this.setIsUpToDate=e=>{this.isUpToDate=e},this.removeMessageFromArray=(e,n)=>{const r=e.filter(o=>!(o.id&&n.id&&o.id===n.id));return{removed:r.length<e.length,result:r}},this.updateUserMessages=e=>{const n=(r,o)=>{var l;for(let d=0;d<r.length;d++){const h=r[d];((l=h.user)==null?void 0:l.id)===o.id&&(r[d]={...h,user:o})}};this.messageSets.forEach(r=>n(r.messages,e));for(const r in this.threads)n(this.threads[r],e);n(this.pinnedMessages,e)},this.deleteUserMessages=(e,n=!1)=>{const r=(o,l,d=!1)=>{var h;for(let m=0;m<o.length;m++){const p=o[m];((h=p.user)==null?void 0:h.id)===l.id&&(d?o[m]={cid:p.cid,created_at:p.created_at,deleted_at:l.deleted_at,id:p.id,latest_reactions:[],mentioned_users:[],own_reactions:[],parent_id:p.parent_id,reply_count:p.reply_count,status:p.status,thread_participants:p.thread_participants,type:"deleted",updated_at:p.updated_at,user:p.user}:o[m]={...p,type:"deleted",deleted_at:l.deleted_at?new Date(l.deleted_at):null})}};this.messageSets.forEach(o=>r(o.messages,e,n));for(const o in this.threads)r(this.threads[o],e,n);r(this.pinnedMessages,e,n)},this._channel=t,this.watcher_count=0,this.typing={},this.read={},this.initMessages(),this.pinnedMessages=[],this.pending_messages=[],this.threads={},this.mutedUsers=[],this.watchers={},this.members={},this.membership={},this.unreadCount=0,this.isUpToDate=!0,this.last_message_at=((a=t==null?void 0:t.state)==null?void 0:a.last_message_at)!=null?new Date(t.state.last_message_at):null}get messages(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.messages)||[]}set messages(t){const a=this.messageSets.findIndex(e=>e.isCurrent);this.messageSets[a].messages=t}get latestMessages(){var t;return((t=this.messageSets.find(a=>a.isLatest))==null?void 0:t.messages)||[]}set latestMessages(t){const a=this.messageSets.findIndex(e=>e.isLatest);this.messageSets[a].messages=t}get messagePagination(){var t;return((t=this.messageSets.find(a=>a.isCurrent))==null?void 0:t.pagination)||Gp}addMessageSorted(t,a=!1,e=!0,n="latest"){return this.addMessagesSorted([t],a,!1,e,n)}addMessagesSorted(t,a=!1,e=!1,n=!0,r="current"){var d;const{messagesToAdd:o,targetMessageSetIndex:l}=this.findTargetMessageSet(t,n,r);for(let h=0;h<o.length;h+=1){if(o[h].shadowed)continue;const p=o[h].created_at instanceof Date;let y;p?y=o[h]:(y=this.formatMessage(o[h]),y.user&&((d=this._channel)!=null&&d.cid)&&this._channel.getClient().state.updateUserReference(y.user,this._channel.cid),e&&y.id&&this.threads[y.id]&&delete this.threads[y.id],this.last_message_at||(this.last_message_at=new Date(y.created_at.getTime())),y.created_at.getTime()>this.last_message_at.getTime()&&(this.last_message_at=new Date(y.created_at.getTime())));const b=y.parent_id;if((!b||y.show_in_channel)&&l!==-1&&(this.messageSets[l].messages=this._addToMessageList(this.messageSets[l].messages,y,a,"created_at",n)),b&&!e){const E=this.threads[b]||[];this.threads[b]=this._addToMessageList(E,y,a,"created_at",n)}}return{messageSet:this.messageSets[l]}}addPinnedMessages(t){for(let a=0;a<t.length;a+=1)this.addPinnedMessage(t[a])}addPinnedMessage(t){this.pinnedMessages=this._addToMessageList(this.pinnedMessages,this.formatMessage(t),!1,"pinned_at")}removePinnedMessage(t){const{result:a}=this.removeMessageFromArray(this.pinnedMessages,t);this.pinnedMessages=a}addReaction(t,a,e){const n=a;let r;if(n||(r=this.findMessage(t.message_id)),!n&&!r)return;const o=n??r,l={id:o==null?void 0:o.id,parent_id:o==null?void 0:o.parent_id,pinned:o==null?void 0:o.pinned,show_in_channel:o==null?void 0:o.show_in_channel};return this._updateMessage(l,d=>{if(n){const h={...n};return n.own_reactions=this._addOwnReactionToMessage(d.own_reactions,t,e),h.own_reactions=this._channel.getClient().userID===t.user_id?n.own_reactions:d.own_reactions,this.formatMessage(h)}return r?this._addReactionToState(r,t,e):d}),n??r}_addReactionToState(t,a,e){if(t.reaction_groups||(t.reaction_groups={}),e)for(const d of t.own_reactions??[]){const h=t.reaction_groups[d.type];t.reaction_groups[d.type]={...h,count:h.count-1,sum_scores:h.sum_scores-(d.score??1)},t.reaction_groups[d.type].count<1&&delete t.reaction_groups[d.type]}const r=t.reaction_groups[a.type],o=a.score??1;t.reaction_groups[a.type]=r?{...r,count:r.count+1,sum_scores:r.sum_scores+o,last_reaction_at:a.created_at}:{count:1,first_reaction_at:a.created_at,last_reaction_at:a.created_at,sum_scores:o},t.own_reactions=this._addOwnReactionToMessage(t.own_reactions,a,e);const l=this._channel.getClient().userID;return t.latest_reactions=e?[...(t.latest_reactions||[]).filter(d=>d.user_id!==l),a]:[...t.latest_reactions||[],a],t}_addOwnReactionToMessage(t,a,e){return e?t=[]:t=this._removeOwnReactionFromMessage(t,a),t=t||[],this._channel.getClient().userID===a.user_id&&t.push(a),t}_removeOwnReactionFromMessage(t,a){return t&&t.filter(e=>e.user_id!==a.user_id||e.type!==a.type)}removeReaction(t,a){const e=a;let n;if(e||(n=this.findMessage(t.message_id)),!e&&!n)return;const r=e??n,o={id:r==null?void 0:r.id,parent_id:r==null?void 0:r.parent_id,pinned:r==null?void 0:r.pinned,show_in_channel:r==null?void 0:r.show_in_channel};return this._updateMessage(o,l=>e?(e.own_reactions=this._removeOwnReactionFromMessage(l.own_reactions,t),this.formatMessage(e)):n?this._removeReactionFromState(n,t):l),e}_removeReactionFromState(t,a){var r,o,l,d;const e=(r=t.own_reactions)==null?void 0:r.find(h=>h.type===a.type);if(e&&((o=t.reaction_groups)!=null&&o[e.type])){const h=t.reaction_groups[e.type];t.reaction_groups[e.type]={...h,count:h.count-1,sum_scores:h.sum_scores-(e.score??1)},t.reaction_groups[e.type].count<1&&delete t.reaction_groups[e.type]}t.own_reactions=(l=t.own_reactions)==null?void 0:l.filter(h=>h.type!==a.type);const n=this._channel.getClient().userID;return t.latest_reactions=(d=t.latest_reactions)==null?void 0:d.filter(h=>!(h.user_id===n&&h.type===a.type)),t}_updateQuotedMessageReferences({message:t,remove:a}){const e=r=>{var o,l;return{...r,created_at:r.created_at.toISOString(),pinned_at:(o=r.pinned_at)==null?void 0:o.toISOString(),updated_at:(l=r.updated_at)==null?void 0:l.toISOString()}},n=r=>{const o=r.reduce((l,d)=>(d.quoted_message_id===t.id&&l.push({...e(d),quoted_message:a?{...t,attachments:[]}:t}),l),[]);this.addMessagesSorted(o,!0)};t.parent_id?t.parent_id&&this.threads[t.parent_id]&&n(this.threads[t.parent_id]):this.messageSets.forEach(r=>n(r.messages))}removeQuotedMessageReferences(t){this._updateQuotedMessageReferences({message:t,remove:!0})}_updateMessage(t,a){const{parent_id:e,show_in_channel:n,pinned:r}=t;if(e&&this.threads[e]){const o=this.threads[e],l=o.findIndex(d=>d.id===t.id);l!==-1&&(o[l]=a(o[l]),this.threads[e]=o)}if(!n&&!e||n){const o=this.findMessageSetIndex(t);if(o!==-1){const l=this.messageSets[o].messages.findIndex(d=>d.id===t.id);if(l!==-1){const d=a(this.messageSets[o].messages[l]);this.messageSets[o].messages[l]=d}}}if(r){const o=this.pinnedMessages.findIndex(l=>l.id===t.id);o!==-1&&(this.pinnedMessages[o]=a(this.pinnedMessages[o]))}}_addToMessageList(t,a,e=!1,n="created_at",r=!0){return kS(t,a,e,n,r)}removeMessage(t){let a=!1;if(t.parent_id&&this.threads[t.parent_id]){const{removed:e,result:n}=this.removeMessageFromArray(this.threads[t.parent_id],t);this.threads[t.parent_id]=n,a=e}else{const e=t.messageSetIndex??this.findMessageSetIndex(t);if(e!==-1){const{removed:n,result:r}=this.removeMessageFromArray(this.messageSets[e].messages,t);this.messageSets[e].messages=r,a=n}}return a}filterErrorMessages(){const t=this.latestMessages.filter(a=>a.type!=="error");this.latestMessages=t}clean(){const t=new Date;for(const[a,e]of Object.entries(this.typing)){const n=typeof e.received_at=="string"?new Date(e.received_at):e.received_at||new Date;t.getTime()-n.getTime()>7e3&&(delete this.typing[a],this._channel.getClient().dispatchEvent({cid:this._channel.cid,type:"typing.stop",user:{id:a}}))}}clearMessages(){this.initMessages(),this.pinnedMessages=[]}initMessages(){this.messageSets=[{messages:[],isLatest:!0,isCurrent:!0,pagination:Gp}]}async loadMessageIntoState(t,a,e=25){var d;let n,r=!1,o=!1;const l=a||t;if(t==="latest"){if(this.messages===this.latestMessages)return;n=this.messageSets.findIndex(h=>h.isLatest)}else n=this.findMessageSetIndex({id:l});n!==-1&&(this.switchToMessageSet(n),r=!0),o=!a||!!((d=this.threads[a])!=null&&d.find(h=>h.id===t)),!(r&&o)&&(r||await this._channel.query({messages:{id_around:l,limit:e}},"new"),!o&&a&&await this._channel.getReplies(a,{id_around:t,limit:e}),n=this.findMessageSetIndex({id:l}),n!==-1&&this.switchToMessageSet(n))}findMessage(t,a){if(a){const n=this.threads[a];return n?n.find(r=>r.id===t):void 0}const e=this.findMessageSetIndex({id:t});if(e!==-1)return this.messageSets[e].messages.find(n=>n.id===t)}switchToMessageSet(t){const a=this.messageSets.find(e=>e.isCurrent);a&&(a.isCurrent=!1,this.messageSets[t].isCurrent=!0)}areMessageSetsOverlap(t,a){return t.some(e=>a.find(n=>e.id===n.id))}findMessageSetIndex(t){return this.messageSets.findIndex(a=>!!a.messages.find(e=>e.id===t.id))}findTargetMessageSet(t,a=!0,e="current"){let n=t,r;if(a){const o=this.messageSets.map((h,m)=>m).filter(h=>this.areMessageSetsOverlap(this.messageSets[h].messages,t));switch(e){case"new":o.length>0?r=o[0]:t.some(h=>!h.parent_id)&&(this.messageSets.push({messages:[],isCurrent:!1,isLatest:!1,pagination:Gp}),r=this.messageSets.length-1);break;case"current":r=this.messageSets.findIndex(h=>h.isCurrent);break;case"latest":r=this.messageSets.findIndex(h=>h.isLatest);break;default:r=-1}const l=o.splice(0,1)[0],d=[...o];if(l!==void 0&&l!==r&&d.push(r),d.length>0){const h=this.messageSets[l],m=this.messageSets.filter((y,b)=>d.indexOf(b)!==-1);m.forEach(y=>{h.isLatest=h.isLatest||y.isLatest,h.isCurrent=h.isCurrent||y.isCurrent,h.pagination.hasPrev=y.messages[0].created_at<h.messages[0].created_at?y.pagination.hasPrev:h.pagination.hasPrev,h.pagination.hasNext=h.messages.slice(-1)[0].created_at<y.messages.slice(-1)[0].created_at?y.pagination.hasNext:h.pagination.hasNext,n=[...n,...y.messages]}),m.forEach(y=>this.messageSets.splice(this.messageSets.indexOf(y),1)),r=this.messageSets.findIndex(y=>this.areMessageSetsOverlap(y.messages,t))}}else r=this.findMessageSetIndex(t[0]);return{targetMessageSetIndex:r,messagesToAdd:n}}},Y4=t=>!!(t!=null&&t.og_scrape_url)||!!(t!=null&&t.title_link),zS=t=>{var a;return!!((a=t==null?void 0:t.localMetadata)!=null&&a.id)},W4=(t,a=[])=>t.type==="file"||!!(t.mime_type&&a.indexOf(t.mime_type)===-1&&t.type!=="video"),jS=t=>t.type==="image"&&!Y4(t),G4=t=>jS(t)&&zS(t),$4=t=>t.type==="audio",Z4=t=>t.type==="voiceRecording",q4=(t,a=[])=>t.type==="video"||!!(t.mime_type&&a.indexOf(t.mime_type)!==-1),Q4=t=>$4(t)||W4(t)||jS(t)||q4(t)||Z4(t),qd=t=>!!t.lastModified&&!("uri"in t),V4=t=>t==null||typeof t!="object"?!1:typeof FileList<"u"&&t instanceof FileList||"item"in t&&"length"in t&&!Array.isArray(t),X4=t=>t instanceof Blob&&!(t instanceof File),Qo=t=>t!==null&&typeof t=="object"&&!qd(t)&&!X4(t)&&typeof t.name=="string"&&typeof t.uri=="string"&&typeof t.size=="number"&&typeof t.type=="string",P1=({blobsArray:t,fileName:a,mimeType:e})=>{const n=new Blob(t,{type:e});return new File([n],a,{type:n.type})},J4=t=>{const a=t.match(/\/([^/;]+)/);return a==null?void 0:a[1]},O1=t=>{const a=J4(t);return`file_${new Date().toISOString()}${a?"."+a:""}`},Cc=t=>{const a=t.type;return a.startsWith("image/")&&!a.endsWith(".photoshop")},K4=t=>t.startsWith("image/")&&!t.endsWith(".photoshop")?"image":t.includes("video/")?"video":t.includes("audio/")?"audio":"file",B1=t=>{if(!t)return null;if(zS(t))return t;const{localMetadata:a,...e}=t;return{localMetadata:{...a??{},id:(a==null?void 0:a.id)||wr()},...e}},FS=t=>typeof t=="function",ba=class{constructor(t){this.value=t,this.handlerSet=new Set,this.next=a=>{const e=FS(a)?a(this.value):a;if(e===this.value)return;const n=this.value;this.value=e,this.handlerSet.forEach(r=>r(this.value,n))},this.partialNext=a=>this.next(e=>({...e,...a})),this.getLatestValue=()=>this.value,this.subscribe=a=>(a(this.value,void 0),this.handlerSet.add(a),()=>{this.handlerSet.delete(a)}),this.subscribeWithSelector=(a,e)=>{let n;const r=o=>{const l=a(o);let d=typeof n>"u";for(const m in n)if(n[m]!==l[m]){d=!0;break}if(!d)return;const h=n;n=l,e(l,h)};return this.subscribe(r)}}},ro=t=>{if(!t||typeof t!="object"||Array.isArray(t))return!1;const a=Object.getPrototypeOf(t);return a===null||a===Object.prototype?!1:t.constructor&&t.constructor!==Object},Og=(t,a,e=new Set,n=new WeakSet,r=new WeakSet)=>{if(t===a)return!0;if(t==null||a==null)return!1;const o=typeof t;if(o!==typeof a)return!1;if(o!=="object")return t!==t&&a!==a?!0:t===a;const d=t,h=a;if(n.has(d)||r.has(h))return n.has(d)&&r.has(h);if(n.add(d),r.add(h),t instanceof Date&&a instanceof Date)return n.delete(d),r.delete(h),t.getTime()===a.getTime();if(t instanceof RegExp&&a instanceof RegExp)return n.delete(d),r.delete(h),t.toString()===a.toString();if(ro(t)||ro(a))return n.delete(d),r.delete(h),!1;const m=Array.isArray(t),p=Array.isArray(a);if(m!==p)return n.delete(d),r.delete(h),!1;if(m&&p){const _=t,x=a;if(_.length!==x.length)return n.delete(d),r.delete(h),!1;const D=[t,a];if(e.has(D))return n.delete(d),r.delete(h),!0;e.add(D);for(let A=0;A<_.length;A++)if(!Og(_[A],x[A],e,n,r))return e.delete(D),n.delete(d),r.delete(h),!1;return e.delete(D),n.delete(d),r.delete(h),!0}const y=t,b=a,E=Object.keys(y),S=Object.keys(b);if(E.length!==S.length)return n.delete(d),r.delete(h),!1;for(const _ of S)if(!Object.prototype.hasOwnProperty.call(y,_))return n.delete(d),r.delete(h),!1;const C=[t,a];if(e.has(C))return n.delete(d),r.delete(h),!0;e.add(C);for(const _ of E)if(!Og(y[_],b[_],e,n,r))return e.delete(C),n.delete(d),r.delete(h),!1;return e.delete(C),n.delete(d),r.delete(h),!0};function eL(t,a){const e={children:{}};return HS(t,a,e),O0(e)}function HS(t,a,e,n,r=new Set,o=new Set){if(Og(t,a,new Set(r)))return;if(t==null){n!==void 0&&(e.children[String(n)]={type:"added",value:a,children:{}});return}if(typeof t=="object"&&t!==null){if(o.has(t)){n!==void 0&&(e.children[String(n)]={type:"circular",value:a,oldValue:t,children:{}});return}o.add(t)}if(typeof t!="object"||typeof a!="object"||t===null||a===null||Array.isArray(t)!==Array.isArray(a)||ro(t)||ro(a)){n!==void 0&&(e.children[String(n)]={type:"updated",value:a,oldValue:t,children:{}}),typeof t=="object"&&t!==null&&o.delete(t);return}const d=t,h=a,m=n!==void 0?{type:"updated",children:{},oldValue:t,value:a}:e;n!==void 0&&(e.children[String(n)]=m);const p=[t,a];if(r.has(p)){typeof t=="object"&&t!==null&&o.delete(t);return}r.add(p);const y=new Set([...Object.keys(d),...Object.getOwnPropertySymbols(d),...Object.keys(h),...Object.getOwnPropertySymbols(h)]);for(const b of y){const E=d[b],S=h[b];if(b in h){if(!(b in d)){m.children[String(b)]={type:"added",value:S,children:{}};continue}HS(E,S,m,b,r,o)}}r.delete(p),typeof t=="object"&&t!==null&&o.delete(t)}function YS(t={}){const{trackDiff:a=!1}=t;return function({target:n,source:r,customizer:o}){const l=Array.isArray(r)?r:[r],d=a?structuredClone(n):void 0;function h(_,x,D,A,k,P){const L=o==null?void 0:o(_,x,D,A,k,P);return L!==void 0?(Object.defineProperty(A,D,{value:L,enumerable:!0,writable:!0,configurable:!0}),!0):!1}function m(_,x){if(_&&typeof _=="object"){const D=ro(_),A=ro(x);return D||A?A?x:_:Array.isArray(_)?[..._]:{..._}}return Array.isArray(x)?[]:{}}function p(_,x,D,A,k){const P=x[D],L=_[D];if(!h(L,P,D,_,x,A))if(P&&typeof P=="object"){if(!A.has(P)){const G=m(L,P);if(Object.defineProperty(_,D,{value:G,enumerable:!0,writable:!0,configurable:!0}),ro(G))return;k.push({target:G,source:P,sourceKey:D,parentTarget:_})}}else P!==void 0&&(_[D]=P)}function y(_,x,D,A){const k=[...Object.keys(x),...Object.getOwnPropertySymbols(x)];for(const P of k)p(_,x,P,D,A)}function b({target:_,source:x,sourceKey:D,parentTarget:A},k,P){if(k.has(x)){a&&D&&A&&Object.defineProperty(A,D,{value:_,enumerable:!0,writable:!0,configurable:!0});return}!k.has(_)&&!k.has(x)&&(k.add(_),k.add(x),y(_,x,k,P),k.delete(x),k.delete(_))}function E(_,x,D=new Set){if(D.has(_)||D.has(x))return{..._};const A={..._},k=[];for(D.add(A),D.add(x),y(A,x,D,k);k.length;)b(k.pop(),D,k);return D.delete(x),D.delete(A),A}const S=l.reduce((_,x)=>E(_,x),{...n}),C=a&&d?eL(d,S):null;return{result:S,diff:C}}}function O0(t){const a={};let e=!1;for(const n in t.children){const r=O0(t.children[n]);r&&(a[n]=r,e=!0)}return t.type||e?{...t,children:a}:null}function wf(t,a,e){return YS()({target:t,source:a,customizer:e}).result}function WS(t,a,e){const n=YS({trackDiff:!0}),{result:r,diff:o}=n({target:t,source:a,customizer:e});return{result:r,diff:O0(o??{children:{}})||{children:{}}}}var U1=({message:t})=>{var a;return{attachments:(a=(t==null?void 0:t.attachments)??[])==null?void 0:a.filter(({og_scrape_url:e})=>!e).map(e=>{const n=Q4(e)?{id:wr(),uploadState:"finished"}:{id:wr()};return{...e,localMetadata:n}})}},tL=class{constructor({composer:t,message:a}){this.setCustomUploadFn=e=>{this.composer.updateConfig({attachments:{doUploadRequest:e}})},this.initState=({message:e}={})=>{this.state.next(U1({message:e}))},this.getAttachmentIndex=e=>{const n=this.attachmentsById;return this.attachments.indexOf(n[e])},this.prepareAttachmentUpdate=e=>{const n=this.attachments,r=[...this.attachments],o=this.getAttachmentIndex(e.localMetadata.id);if(o===-1)return null;const l=WS(n[o],e);if(l.diff&&Object.keys(l.diff.children).length){const h=B1(l.result);if(h)return r.splice(o,1,h),r}return null},this.updateAttachment=e=>{const n=this.prepareAttachmentUpdate(e);n&&this.state.partialNext({attachments:n})},this.upsertAttachments=e=>{if(!e.length)return;let n=[...this.attachments],r=!1;e.forEach(o=>{const l=this.prepareAttachmentUpdate(o);if(l)n=l,r=!0;else{const d=B1(o);d&&(n.push(d),r=!0)}}),r&&this.state.partialNext({attachments:n})},this.removeAttachments=e=>{this.state.partialNext({attachments:this.attachments.filter(n=>{var r;return!e.includes((r=n.localMetadata)==null?void 0:r.id)})})},this.getUploadConfigCheck=async e=>{var E,S;const n=this.channel.getClient();let r;n.appSettingsPromise?r=await n.appSettingsPromise:r=await n.getAppSettings();const o=Cc(e)?(E=r==null?void 0:r.app)==null?void 0:E.image_upload_config:(S=r==null?void 0:r.app)==null?void 0:S.file_upload_config;if(!o)return{uploadBlocked:!1};const{allowed_file_extensions:l,allowed_mime_types:d,blocked_file_extensions:h,blocked_mime_types:m,size_limit:p}=o,y=p||m4,b=e.type;if(qd(e)||Qo(e)){if(l!=null&&l.length&&!l.some(C=>e.name.toLowerCase().endsWith(C.toLowerCase())))return{uploadBlocked:!0,reason:"allowed_file_extensions"};if(h!=null&&h.length&&h.some(C=>e.name.toLowerCase().endsWith(C.toLowerCase())))return{uploadBlocked:!0,reason:"blocked_file_extensions"}}return d!=null&&d.length&&!d.some(C=>C.toLowerCase()===(b==null?void 0:b.toLowerCase()))?{uploadBlocked:!0,reason:"allowed_mime_types"}:m!=null&&m.length&&m.some(C=>C.toLowerCase()===(b==null?void 0:b.toLowerCase()))?{uploadBlocked:!0,reason:"blocked_mime_types"}:e.size&&e.size>y?{uploadBlocked:!0,reason:"size_limit"}:{uploadBlocked:!1}},this.fileToLocalUploadAttachment=async e=>{var l;const n=Qo(e)||qd(e)?e:P1({blobsArray:[e],fileName:O1(e.type),mimeType:e.type}),r=await this.getUploadConfigCheck(n),o={file_size:n.size,mime_type:n.type,localMetadata:{file:n,id:wr(),uploadPermissionCheck:r,uploadState:r.uploadBlocked?"blocked":"pending"},type:K4(n.type)};return o[Cc(n)?"fallback":"title"]=n.name,Cc(n)&&(o.localMetadata.previewUri=Qo(e)?e.uri:(l=URL.createObjectURL)==null?void 0:l.call(URL,e),Qo(e)&&e.height&&e.width&&(o.original_height=e.height,o.original_width=e.width)),Qo(e)&&e.thumb_url&&(o.thumb_url=e.thumb_url),o},this.ensureLocalUploadAttachment=async e=>{var r;if(!((r=e.localMetadata)!=null&&r.file)||!e.localMetadata.id){this.client.notifications.addError({message:"File is required for upload attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}});return}if(!this.fileUploadFilter(e))return;const n=await this.fileToLocalUploadAttachment(e.localMetadata.file);return e.localMetadata.id&&(n.localMetadata.id=e.localMetadata.id),n},this.doDefaultUploadRequest=async e=>{if(Qo(e))return this.channel[Cc(e)?"sendImage":"sendFile"](e.uri,e.name,e.type);const n=qd(e)?e:P1({blobsArray:[e],fileName:O1(e.type),mimeType:e.type}),{duration:r,...o}=await this.channel[Cc(e)?"sendImage":"sendFile"](n);return o},this.doUploadRequest=async e=>{const n=this.config.doUploadRequest;return n?await n(e):this.doDefaultUploadRequest(e)},this.uploadAttachment=async e=>{if(!this.isUploadEnabled)return;const n=await this.ensureLocalUploadAttachment(e);if(typeof n>"u")return;if(n.localMetadata.uploadState==="blocked")return this.upsertAttachments([n]),this.client.notifications.addError({message:"Error uploading attachment",origin:{emitter:"AttachmentManager",context:{attachment:e}}}),n;this.upsertAttachments([{...e,localMetadata:{...e.localMetadata,uploadState:"uploading"}}]);let r;try{r=await this.doUploadRequest(n.localMetadata.file)}catch(l){let d={message:"Error uploading attachment",name:"Error"};typeof l.message=="string"?d=l:typeof l=="object"&&(d=Object.assign(d,l)),this.client.notifications.addError({message:d.message,origin:{emitter:"AttachmentManager",context:{attachment:e}}});const h={...e,localMetadata:{...e.localMetadata,uploadState:"failed"}};return this.updateAttachment(h),h}if(!r){this.removeAttachments([e.localMetadata.id]);return}const o={...e,localMetadata:{...e.localMetadata,uploadState:"finished"}};return G4(o)?(o.localMetadata.previewUri&&(URL.revokeObjectURL(o.localMetadata.previewUri),delete o.localMetadata.previewUri),o.image_url=r.file):o.asset_url=r.file,r.thumb_url&&(o.thumb_url=r.thumb_url),this.updateAttachment(o),o},this.uploadFiles=async e=>{if(!this.isUploadEnabled)return;const n=V4(e)?Array.from(e):e,r=await Promise.all(n.map(this.fileToLocalUploadAttachment));return Promise.all(r.filter(this.fileUploadFilter).slice(0,this.availableUploadSlots).map(this.uploadAttachment))},this.composer=t,this.state=new ba(U1({message:a})),this.attachmentsByIdGetterCache={attachmentsById:{},attachments:[]}}get attachmentsById(){const{attachments:t}=this.state.getLatestValue();return t!==this.attachmentsByIdGetterCache.attachments&&(this.attachmentsByIdGetterCache.attachments=t,this.attachmentsByIdGetterCache.attachmentsById=t.reduce((a,e)=>{var n;return e.localMetadata.id&&(a[n=e.localMetadata.id]??(a[n]=e)),a},{})),this.attachmentsByIdGetterCache.attachmentsById}get client(){return this.composer.client}get channel(){return this.composer.channel}get config(){return this.composer.config.attachments}get acceptedFiles(){return this.config.acceptedFiles}set acceptedFiles(t){this.composer.updateConfig({attachments:{acceptedFiles:t}})}get fileUploadFilter(){return this.config.fileUploadFilter}set fileUploadFilter(t){this.composer.updateConfig({attachments:{fileUploadFilter:t}})}get maxNumberOfFilesPerMessage(){return this.config.maxNumberOfFilesPerMessage}set maxNumberOfFilesPerMessage(t){t!==this.maxNumberOfFilesPerMessage&&this.composer.updateConfig({attachments:{maxNumberOfFilesPerMessage:t}})}get attachments(){return this.state.getLatestValue().attachments}get hasUploadPermission(){var t,a;return!!((a=(t=this.channel.data)==null?void 0:t.own_capabilities)!=null&&a.includes("upload-file"))}get isUploadEnabled(){return this.hasUploadPermission&&this.availableUploadSlots>0}get successfulUploads(){return this.getUploadsByState("finished")}get successfulUploadsCount(){return this.successfulUploads.length}get uploadsInProgressCount(){return this.getUploadsByState("uploading").length}get failedUploadsCount(){return this.getUploadsByState("failed").length}get blockedUploadsCount(){return this.getUploadsByState("blocked").length}get pendingUploadsCount(){return this.getUploadsByState("pending").length}get availableUploadSlots(){return this.config.maxNumberOfFilesPerMessage-this.successfulUploadsCount-this.uploadsInProgressCount}getUploadsByState(t){return Object.values(this.attachments).filter(({localMetadata:a})=>a.uploadState===t)}},nL="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",aL="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ml=(t,a)=>{for(const e in a)t[e]=a[e];return t},Bg="numeric",Ug="ascii",zg="alpha",Pc="asciinumeric",kc="alphanumeric",jg="domain",GS="emoji",rL="scheme",sL="slashscheme",Zp="whitespace";function iL(t,a){return t in a||(a[t]=[]),a[t]}function Ki(t,a,e){a[Bg]&&(a[Pc]=!0,a[kc]=!0),a[Ug]&&(a[Pc]=!0,a[zg]=!0),a[Pc]&&(a[kc]=!0),a[zg]&&(a[kc]=!0),a[kc]&&(a[jg]=!0),a[GS]&&(a[jg]=!0);for(const n in a){const r=iL(n,e);r.indexOf(t)<0&&r.push(t)}}function oL(t,a){const e={};for(const n in a)a[n].indexOf(t)>=0&&(e[n]=!0);return e}function Ya(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ya.groups={};Ya.prototype={accepts(){return!!this.t},go(t){const a=this,e=a.j[t];if(e)return e;for(let n=0;n<a.jr.length;n++){const r=a.jr[n][0],o=a.jr[n][1];if(o&&r.test(t))return o}return a.jd},has(t,a=!1){return a?t in this.j:!!this.go(t)},ta(t,a,e,n){for(let r=0;r<t.length;r++)this.tt(t[r],a,e,n)},tr(t,a,e,n){n=n||Ya.groups;let r;return a&&a.j?r=a:(r=new Ya(a),e&&n&&Ki(a,e,n)),this.jr.push([t,r]),r},ts(t,a,e,n){let r=this;const o=t.length;if(!o)return r;for(let l=0;l<o-1;l++)r=r.tt(t[l]);return r.tt(t[o-1],a,e,n)},tt(t,a,e,n){n=n||Ya.groups;const r=this;if(a&&a.j)return r.j[t]=a,a;const o=a;let l,d=r.go(t);if(d?(l=new Ya,ml(l.j,d.j),l.jr.push.apply(l.jr,d.jr),l.jd=d.jd,l.t=d.t):l=new Ya,o){if(n)if(l.t&&typeof l.t=="string"){const h=ml(oL(l.t,n),e);Ki(o,h,n)}else e&&Ki(o,e,n);l.t=o}return r.j[t]=l,l}};var ft=(t,a,e,n,r)=>t.ta(a,e,n,r),vn=(t,a,e,n,r)=>t.tr(a,e,n,r),z1=(t,a,e,n,r)=>t.ts(a,e,n,r),Se=(t,a,e,n,r)=>t.tt(a,e,n,r),Ns="WORD",Fg="UWORD",$S="ASCIINUMERICAL",ZS="ALPHANUMERICAL",Vc="LOCALHOST",Hg="TLD",Yg="UTLD",Qd="SCHEME",Jo="SLASH_SCHEME",B0="NUM",Wg="WS",U0="NL",Oc="OPENBRACE",Bc="CLOSEBRACE",xf="OPENBRACKET",Sf="CLOSEBRACKET",Ef="OPENPAREN",Cf="CLOSEPAREN",_f="OPENANGLEBRACKET",If="CLOSEANGLEBRACKET",Df="FULLWIDTHLEFTPAREN",Af="FULLWIDTHRIGHTPAREN",Tf="LEFTCORNERBRACKET",Mf="RIGHTCORNERBRACKET",Nf="LEFTWHITECORNERBRACKET",Rf="RIGHTWHITECORNERBRACKET",kf="FULLWIDTHLESSTHAN",Lf="FULLWIDTHGREATERTHAN",Pf="AMPERSAND",z0="APOSTROPHE",Of="ASTERISK",Ci="AT",Bf="BACKSLASH",Uf="BACKTICK",zf="CARET",_i="COLON",j0="COMMA",jf="DOLLAR",Qr="DOT",Ff="EQUALS",F0="EXCLAMATION",mr="HYPHEN",Uc="PERCENT",Hf="PIPE",Yf="PLUS",Wf="POUND",zc="QUERY",H0="QUOTE",qS="FULLWIDTHMIDDLEDOT",Y0="SEMI",Vr="SLASH",jc="TILDE",Gf="UNDERSCORE",QS="EMOJI",$f="SYM",VS=Object.freeze({__proto__:null,WORD:Ns,UWORD:Fg,ASCIINUMERICAL:$S,ALPHANUMERICAL:ZS,LOCALHOST:Vc,TLD:Hg,UTLD:Yg,SCHEME:Qd,SLASH_SCHEME:Jo,NUM:B0,WS:Wg,NL:U0,OPENBRACE:Oc,CLOSEBRACE:Bc,OPENBRACKET:xf,CLOSEBRACKET:Sf,OPENPAREN:Ef,CLOSEPAREN:Cf,OPENANGLEBRACKET:_f,CLOSEANGLEBRACKET:If,FULLWIDTHLEFTPAREN:Df,FULLWIDTHRIGHTPAREN:Af,LEFTCORNERBRACKET:Tf,RIGHTCORNERBRACKET:Mf,LEFTWHITECORNERBRACKET:Nf,RIGHTWHITECORNERBRACKET:Rf,FULLWIDTHLESSTHAN:kf,FULLWIDTHGREATERTHAN:Lf,AMPERSAND:Pf,APOSTROPHE:z0,ASTERISK:Of,AT:Ci,BACKSLASH:Bf,BACKTICK:Uf,CARET:zf,COLON:_i,COMMA:j0,DOLLAR:jf,DOT:Qr,EQUALS:Ff,EXCLAMATION:F0,HYPHEN:mr,PERCENT:Uc,PIPE:Hf,PLUS:Yf,POUND:Wf,QUERY:zc,QUOTE:H0,FULLWIDTHMIDDLEDOT:qS,SEMI:Y0,SLASH:Vr,TILDE:jc,UNDERSCORE:Gf,EMOJI:QS,SYM:$f}),As=/[a-z]/,_c=new RegExp("\\p{L}","u"),qp=new RegExp("\\p{Emoji}","u"),Ts=/\d/,Qp=/\s/,j1="\r",Vp=`
`,lL="",cL="",Xp="",Ad=null,Td=null;function uL(t=[]){const a={};Ya.groups=a;const e=new Ya;Ad==null&&(Ad=F1(nL)),Td==null&&(Td=F1(aL)),Se(e,"'",z0),Se(e,"{",Oc),Se(e,"}",Bc),Se(e,"[",xf),Se(e,"]",Sf),Se(e,"(",Ef),Se(e,")",Cf),Se(e,"<",_f),Se(e,">",If),Se(e,"",Df),Se(e,"",Af),Se(e,"",Tf),Se(e,"",Mf),Se(e,"",Nf),Se(e,"",Rf),Se(e,"",kf),Se(e,"",Lf),Se(e,"&",Pf),Se(e,"*",Of),Se(e,"@",Ci),Se(e,"`",Uf),Se(e,"^",zf),Se(e,":",_i),Se(e,",",j0),Se(e,"$",jf),Se(e,".",Qr),Se(e,"=",Ff),Se(e,"!",F0),Se(e,"-",mr),Se(e,"%",Uc),Se(e,"|",Hf),Se(e,"+",Yf),Se(e,"#",Wf),Se(e,"?",zc),Se(e,'"',H0),Se(e,"/",Vr),Se(e,";",Y0),Se(e,"~",jc),Se(e,"_",Gf),Se(e,"\\",Bf),Se(e,"",qS);const n=vn(e,Ts,B0,{[Bg]:!0});vn(n,Ts,n);const r=vn(n,As,$S,{[Pc]:!0}),o=vn(n,_c,ZS,{[kc]:!0}),l=vn(e,As,Ns,{[Ug]:!0});vn(l,Ts,r),vn(l,As,l),vn(r,Ts,r),vn(r,As,r);const d=vn(e,_c,Fg,{[zg]:!0});vn(d,As),vn(d,Ts,o),vn(d,_c,d),vn(o,Ts,o),vn(o,As),vn(o,_c,o);const h=Se(e,Vp,U0,{[Zp]:!0}),m=Se(e,j1,Wg,{[Zp]:!0}),p=vn(e,Qp,Wg,{[Zp]:!0});Se(e,Xp,p),Se(m,Vp,h),Se(m,Xp,p),vn(m,Qp,p),Se(p,j1),Se(p,Vp),vn(p,Qp,p),Se(p,Xp,p);const y=vn(e,qp,QS,{[GS]:!0});Se(y,"#"),vn(y,qp,y),Se(y,lL,y);const b=Se(y,cL);Se(b,"#"),vn(b,qp,y);const E=[[As,l],[Ts,r]],S=[[As,null],[_c,d],[Ts,o]];for(let C=0;C<Ad.length;C++)vi(e,Ad[C],Hg,Ns,E);for(let C=0;C<Td.length;C++)vi(e,Td[C],Yg,Fg,S);Ki(Hg,{tld:!0,ascii:!0},a),Ki(Yg,{utld:!0,alpha:!0},a),vi(e,"file",Qd,Ns,E),vi(e,"mailto",Qd,Ns,E),vi(e,"http",Jo,Ns,E),vi(e,"https",Jo,Ns,E),vi(e,"ftp",Jo,Ns,E),vi(e,"ftps",Jo,Ns,E),Ki(Qd,{scheme:!0,ascii:!0},a),Ki(Jo,{slashscheme:!0,ascii:!0},a),t=t.sort((C,_)=>C[0]>_[0]?1:-1);for(let C=0;C<t.length;C++){const _=t[C][0],D=t[C][1]?{[rL]:!0}:{[sL]:!0};_.indexOf("-")>=0?D[jg]=!0:As.test(_)?Ts.test(_)?D[Pc]=!0:D[Ug]=!0:D[Bg]=!0,z1(e,_,_,D)}return z1(e,"localhost",Vc,{ascii:!0}),e.jd=new Ya($f),{start:e,tokens:ml({groups:a},VS)}}function XS(t,a){const e=dL(a.replace(/[A-Z]/g,d=>d.toLowerCase())),n=e.length,r=[];let o=0,l=0;for(;l<n;){let d=t,h=null,m=0,p=null,y=-1,b=-1;for(;l<n&&(h=d.go(e[l]));)d=h,d.accepts()?(y=0,b=0,p=d):y>=0&&(y+=e[l].length,b++),m+=e[l].length,o+=e[l].length,l++;o-=y,l-=b,m-=y,r.push({t:p.t,v:a.slice(o-m,o),s:o-m,e:o})}return r}function dL(t){const a=[],e=t.length;let n=0;for(;n<e;){let r=t.charCodeAt(n),o,l=r<55296||r>56319||n+1===e||(o=t.charCodeAt(n+1))<56320||o>57343?t[n]:t.slice(n,n+2);a.push(l),n+=l.length}return a}function vi(t,a,e,n,r){let o;const l=a.length;for(let d=0;d<l-1;d++){const h=a[d];t.j[h]?o=t.j[h]:(o=new Ya(n),o.jr=r.slice(),t.j[h]=o),t=o}return o=new Ya(e),o.jr=r.slice(),t.j[a[l-1]]=o,o}function F1(t){const a=[],e=[];let n=0,r="0123456789";for(;n<t.length;){let o=0;for(;r.indexOf(t[n+o])>=0;)o++;if(o>0){a.push(e.join(""));for(let l=parseInt(t.substring(n,n+o),10);l>0;l--)e.pop();n+=o}else e.push(t[n]),n++}return a}var Xc={defaultProtocol:"http",events:null,format:H1,formatHref:H1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function W0(t,a=null){let e=ml({},Xc);t&&(e=ml(e,t instanceof W0?t.o:t));const n=e.ignoreTags,r=[];for(let o=0;o<n.length;o++)r.push(n[o].toUpperCase());this.o=e,a&&(this.defaultRender=a),this.ignoreTags=r}W0.prototype={o:Xc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,a,e){const n=a!=null;let r=this.o[t];return r&&(typeof r=="object"?(r=e.t in r?r[e.t]:Xc[t],typeof r=="function"&&n&&(r=r(a,e))):typeof r=="function"&&n&&(r=r(a,e.t,e)),r)},getObj(t,a,e){let n=this.o[t];return typeof n=="function"&&a!=null&&(n=n(a,e.t,e)),n},render(t){const a=t.render(this);return(this.get("render",null,t)||this.defaultRender)(a,t.t,t)}};function H1(t){return t}function JS(t,a){this.t="token",this.v=t,this.tk=a}JS.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const a=this.toString(),e=t.get("truncate",a,this),n=t.get("format",a,this);return e&&n.length>e?n.substring(0,e)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Xc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const a=this,e=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",e,this),r=t.get("tagName",e,a),o=this.toFormattedString(t),l={},d=t.get("className",e,a),h=t.get("target",e,a),m=t.get("rel",e,a),p=t.getObj("attributes",e,a),y=t.getObj("events",e,a);return l.href=n,d&&(l.class=d),h&&(l.target=h),m&&(l.rel=m),p&&ml(l,p),{tagName:r,attributes:l,content:o,eventListeners:y}}};function bh(t,a){class e extends JS{constructor(r,o){super(r,o),this.t=t}}for(const n in a)e.prototype[n]=a[n];return e.t=t,e}var Y1=bh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),W1=bh("text"),fL=bh("nl"),Md=bh("url",{isLink:!0,toHref(t=Xc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Vc&&t[1].t===_i}}),ur=t=>new Ya(t);function hL({groups:t}){const a=t.domain.concat([Pf,Of,Ci,Bf,Uf,zf,jf,Ff,mr,B0,Uc,Hf,Yf,Wf,Vr,$f,jc,Gf]),e=[_i,j0,Qr,F0,Uc,zc,H0,Y0,_f,If,Oc,Bc,Sf,xf,Ef,Cf,Df,Af,Tf,Mf,Nf,Rf,kf,Lf],n=[Pf,z0,Of,Bf,Uf,zf,jf,Ff,mr,Oc,Bc,Uc,Hf,Yf,Wf,zc,Vr,$f,jc,Gf],r=ur(),o=Se(r,jc);ft(o,n,o),ft(o,t.domain,o);const l=ur(),d=ur(),h=ur();ft(r,t.domain,l),ft(r,t.scheme,d),ft(r,t.slashscheme,h),ft(l,n,o),ft(l,t.domain,l);const m=Se(l,Ci);Se(o,Ci,m),Se(d,Ci,m),Se(h,Ci,m);const p=Se(o,Qr);ft(p,n,o),ft(p,t.domain,o);const y=ur();ft(m,t.domain,y),ft(y,t.domain,y);const b=Se(y,Qr);ft(b,t.domain,y);const E=ur(Y1);ft(b,t.tld,E),ft(b,t.utld,E),Se(m,Vc,E);const S=Se(y,mr);Se(S,mr,S),ft(S,t.domain,y),ft(E,t.domain,y),Se(E,Qr,b),Se(E,mr,S);const C=Se(E,_i);ft(C,t.numeric,Y1);const _=Se(l,mr),x=Se(l,Qr);Se(_,mr,_),ft(_,t.domain,l),ft(x,n,o),ft(x,t.domain,l);const D=ur(Md);ft(x,t.tld,D),ft(x,t.utld,D),ft(D,t.domain,l),ft(D,n,o),Se(D,Qr,x),Se(D,mr,_),Se(D,Ci,m);const A=Se(D,_i),k=ur(Md);ft(A,t.numeric,k);const P=ur(Md),L=ur();ft(P,a,P),ft(P,e,L),ft(L,a,P),ft(L,e,L),Se(D,Vr,P),Se(k,Vr,P);const G=Se(d,_i),F=Se(h,_i),q=Se(F,Vr),te=Se(q,Vr);ft(d,t.domain,l),Se(d,Qr,x),Se(d,mr,_),ft(h,t.domain,l),Se(h,Qr,x),Se(h,mr,_),ft(G,t.domain,P),Se(G,Vr,P),Se(G,zc,P),ft(te,t.domain,P),ft(te,a,P),Se(te,Vr,P);const X=[[Oc,Bc],[xf,Sf],[Ef,Cf],[_f,If],[Df,Af],[Tf,Mf],[Nf,Rf],[kf,Lf]];for(let se=0;se<X.length;se++){const[ee,j]=X[se],H=Se(P,ee);Se(L,ee,H),Se(H,j,P);const R=ur(Md);ft(H,a,R);const B=ur();ft(H,e),ft(R,a,R),ft(R,e,B),ft(B,a,R),ft(B,e,B),Se(R,j,P),Se(B,j,P)}return Se(r,Vc,D),Se(r,U0,fL),{start:r,tokens:VS}}function mL(t,a,e){let n=e.length,r=0,o=[],l=[];for(;r<n;){let d=t,h=null,m=null,p=0,y=null,b=-1;for(;r<n&&!(h=d.go(e[r].t));)l.push(e[r++]);for(;r<n&&(m=h||d.go(e[r].t));)h=null,d=m,d.accepts()?(b=0,y=d):b>=0&&b++,r++,p++;if(b<0)r-=p,r<n&&(l.push(e[r]),r++);else{l.length>0&&(o.push(Jp(W1,a,l)),l=[]),r-=b,p-=b;const E=y.t,S=e.slice(r-p,r);o.push(Jp(E,a,S))}}return l.length>0&&o.push(Jp(W1,a,l)),o}function Jp(t,a,e){const n=e[0].s,r=e[e.length-1].e,o=a.slice(n,r);return new t(o,e)}var da={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function pL(){da.scanner=uL(da.customSchemes);for(let t=0;t<da.tokenQueue.length;t++)da.tokenQueue[t][1]({scanner:da.scanner});da.parser=hL(da.scanner.tokens);for(let t=0;t<da.pluginQueue.length;t++)da.pluginQueue[t][1]({scanner:da.scanner,parser:da.parser});return da.initialized=!0,da}function KS(t){return da.initialized||pL(),mL(da.parser.start,t,XS(da.scanner.start,t))}KS.scan=XS;function gL(t,a=null,e=null){if(a&&typeof a=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${a}; must be a string`);e=a,a=null}const n=new W0(e),r=KS(t),o=[];for(let l=0;l<r.length;l++){const d=r[l];d.isLink&&(!a||d.t===a)&&n.check(d)&&o.push(d.toFormattedObject(n))}return o}var yL={debounceURLEnrichmentMs:1500,enabled:!1,findURLFn:t=>gL(t,"url",{defaultProtocol:"https"}).reduce((a,e)=>{try{const n=new URL(e.href);e.isLink&&/^[a-zA-Z0-9-.]+\.[a-zA-Z]{2,}$/.test(n.hostname)&&a.push(e.href)}catch{}return a},[])},vL={acceptedFiles:[],fileUploadFilter:()=>!0,maxNumberOfFilesPerMessage:p4},bL={enabled:!0,publishTypingEvents:!0},wL={attachments:vL,drafts:{enabled:!1},linkPreviews:yL,text:bL},G1=t=>t?{message:{},custom:{}}:{message:{},custom:{}},xL=class{constructor({composer:t,message:a}){this.isMessageDataEqual=(e,n)=>JSON.stringify(e.message)===JSON.stringify(n==null?void 0:n.message),this.initState=({message:e}={})=>{this.state.next(G1({composer:this.composer}))},this.composer=t,this.state=new ba(G1({}))}get customMessageData(){return this.state.getLatestValue().message}get customComposerData(){return this.state.getLatestValue().custom}setMessageData(t){this.state.partialNext({message:{...this.state.getLatestValue().message,...t}})}setCustomData(t){this.state.partialNext({custom:{...this.state.getLatestValue().custom,...t}})}},SL=t=>new Map(t.map(a=>[a.og_scrape_url,a])),$1=({message:t})=>{var a;return t?{previews:((a=t.attachments)==null?void 0:a.reduce((e,n)=>(n.og_scrape_url&&e.set(n.og_scrape_url,{...n,status:"loaded"}),e),new Map))??new Map}:{previews:new Map}},po=class Qi{constructor({composer:a,message:e}){this.shouldDiscardEnrichQueries=!1,this.initState=({message:n}={})=>{this.state.next($1({message:this.enabled?n:void 0}))},this._findAndEnrichUrls=async n=>{if(!this.enabled)return;const r=this.config.findURLFn(n);if(this.shouldDiscardEnrichQueries=!r.length,this.shouldDiscardEnrichQueries){this.state.next({previews:new Map});return}const o=new Map(Array.from(this.previews).filter(([d])=>r.includes(d)||r.includes(d+"/"))),l=r.filter(d=>{const h=this.previews;return!(h.get(d)||h.get(d+"/"))}).map(d=>({og_scrape_url:d.trim(),status:"loading"}));l.length&&(this.state.partialNext({previews:new Map([...o,...SL(l)])}),await Promise.all(l.map(async d=>{try{const{duration:h,...m}=await this.client.enrichURL(d.og_scrape_url);if(this.shouldDiscardEnrichQueries)return;this.previews.has(d.og_scrape_url)&&this.updatePreview(d.og_scrape_url,{status:"loaded",...m})}catch{this.previews.has(d.og_scrape_url)&&this.updatePreview(d.og_scrape_url,{status:"failed"})}return d})))},this.cancelURLEnrichment=()=>{this.findAndEnrichUrls.cancel(),this.findAndEnrichUrls.flush()},this.clearPreviews=()=>{const n=this.previews,r=new Map;n.forEach((o,l)=>{Qi.previewIsDismissed(o)&&r.set(l,o)}),this.state.partialNext({previews:r})},this.updatePreview=(n,r)=>{var h;if(!n)return;const o=this.previews.get(n),l=r.status??((h=this.previews.get(n))==null?void 0:h.status)??"pending";let d=r;if(o){const m=WS(o,r);if(!m.diff||Object.keys(m.diff).length===0)return;d=m.result}this.state.partialNext({previews:new Map(this.previews).set(n,{...d,og_scrape_url:n,status:l})})},this.dismissPreview=n=>{var o;const r=this.previews.get(n);r&&((o=this.onLinkPreviewDismissed)==null||o.call(this,r),this.updatePreview(n,{status:"dismissed"}))},this.composer=a,this.state=new ba($1({message:this.enabled?e:void 0})),this.findAndEnrichUrls=Lg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs)}get client(){return this.composer.client}get channel(){return this.composer.channel}get previews(){return this.state.getLatestValue().previews}get loadingPreviews(){return Array.from(this.previews.values()).filter(a=>Qi.previewIsLoading(a))}get loadedPreviews(){return Array.from(this.previews.values()).filter(a=>Qi.previewIsLoaded(a))}get dismissedPreviews(){return Array.from(this.previews.values()).filter(a=>Qi.previewIsDismissed(a))}get failedPreviews(){return Array.from(this.previews.values()).filter(a=>Qi.previewIsFailed(a))}get pendingPreviews(){return Array.from(this.previews.values()).filter(a=>Qi.previewIsPending(a))}get config(){return this.composer.config.linkPreviews}get debounceURLEnrichmentMs(){return this.config.debounceURLEnrichmentMs}set debounceURLEnrichmentMs(a){this.cancelURLEnrichment(),this.findAndEnrichUrls=Lg(this._findAndEnrichUrls.bind(this),this.config.debounceURLEnrichmentMs),this.composer.updateConfig({linkPreviews:{debounceURLEnrichmentMs:a}})}get enabled(){var a;return!!((a=this.channel.getConfig())!=null&&a.url_enrichment)&&this.composer.config.linkPreviews.enabled}set enabled(a){a!==this.enabled&&this.composer.updateConfig({linkPreviews:{enabled:a}})}get findURLFn(){return this.config.findURLFn}set findURLFn(a){this.composer.updateConfig({linkPreviews:{findURLFn:a}})}get onLinkPreviewDismissed(){return this.config.onLinkPreviewDismissed}set onLinkPreviewDismissed(a){this.composer.updateConfig({linkPreviews:{onLinkPreviewDismissed:a}})}};po.previewIsLoading=t=>t.status==="loading";po.previewIsLoaded=t=>t.status==="loaded";po.previewIsDismissed=t=>t.status==="dismissed";po.previewIsFailed=t=>t.status==="failed";po.previewIsPending=t=>t.status==="pending";po.getPreviewData=t=>{const{status:a,...e}=t;return e};var G0=po,EL=CL(_L),Gg=new Map;function CL(t){return function(e,n){const{cb:r,onContinued:o}=t(e,n),l=Gg.get(e);l==null||l.onContinued();const d=l?l.promise.then(r,r):r();return Gg.set(e,{promise:d,onContinued:o}),d}}function _L(t,a){const e=new AbortController;return{cb:()=>e.signal.aborted?Promise.resolve("canceled"):a(e.signal).finally(()=>{e.signal.aborted||Gg.delete(t)}),onContinued:()=>e.abort()}}var uu=class{constructor(){this.middleware=[],this.id=wr()}use(t){return this.middleware=this.middleware.concat(t),this}replace(t){const a=[...this.middleware];return t.forEach(e=>{const n=this.middleware.findIndex(r=>r.id===e.id);n>=0?a.splice(n,1,e):a.push(e)}),this.middleware=a,this}insert({middleware:t,position:a,unique:e}){e&&t.forEach(l=>{const d=this.middleware.findIndex(h=>h.id===l.id);d>=0&&this.middleware.splice(d,1)});const n=a.after||a.before,r=this.middleware.findIndex(l=>l.id===n),o=a.after?r+1:r;return this.middleware.splice(o,0,...t),this}setOrder(t){this.middleware=t.map(a=>this.middleware.find(e=>e.id===a)).filter(Boolean)}async executeMiddlewareChain({eventName:t,initialValue:a}){let e=-1;const n=async(o,l,d)=>{if(o<=e)throw new Error("next() called multiple times");if(e=o,o===this.middleware.length||d&&["complete","discard"].includes(d))return{state:l,status:d};const p=this.middleware[o].handlers[t];return p?await p({state:l,next:C=>n(o+1,C),complete:C=>n(o+1,C,"complete"),discard:()=>n(o+1,l,"discard"),forward:()=>n(o+1,l)}):n(o+1,l,d)},r=await EL(`middleware-execution-${this.id}-${t}`,async o=>{const l=await n(0,a);return o.aborted?"canceled":l});return r==="canceled"?{state:a,status:"discard"}:r}async execute({eventName:t,initialValue:a}){return await this.executeMiddlewareChain({eventName:t,initialValue:a})}},$0=/^([2-9]|10)$/,IL=100,Z1=t=>!t.trim(),Fc={enforce_unique_vote:()=>({max_votes_allowed:void 0}),max_votes_allowed:({data:t,value:a})=>t.enforce_unique_vote&&a?{max_votes_allowed:"Enforce unique vote is enabled"}:!a.match(/^[0-9]+$/)&&a?{max_votes_allowed:"Only numbers are allowed"}:(a==null?void 0:a.length)>1&&!a.match($0)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},options:({value:t})=>{const a={},e=new Set;return t.forEach(n=>{const r=n.text.trim();e.has(r)?a[n.id]="Option already exists":e.add(r)}),Object.keys(a).length>0?{options:a}:{options:void 0}}},DL={name:({currentError:t,value:a})=>a&&t?{name:void 0}:{name:typeof t=="string"?t:void 0}},AL={max_votes_allowed:({value:t})=>t&&!t.match($0)?{max_votes_allowed:"Type a number from 2 to 10"}:{max_votes_allowed:void 0},name:({value:t})=>Z1(t)?{name:"Question is required"}:{name:void 0},options:t=>{var n;const a=(n=Fc.options)==null?void 0:n.call(Fc,t),e=(a==null?void 0:a.options)??{};return t.value.forEach((r,o)=>{const l=o===t.value.length-1;Z1(r.text)&&!l&&(e[r.id]="Option is empty")}),Object.keys(e).length>0?{options:e}:{options:void 0}}},TL=t=>!Array.isArray(t)&&typeof(t==null?void 0:t.index)=="number"&&typeof(t==null?void 0:t.text)=="string",ML={enforce_unique_vote:({value:t})=>({enforce_unique_vote:t,max_votes_allowed:""}),options:({value:t,data:a})=>{if(Array.isArray(t))return{options:t.map(p=>({id:p.id,text:p.text.trim()}))};const{index:e,text:n}=t,r=a.options||[],o=r&&r.slice(e+1).length>0&&!n,l=r.slice(0,e),d=r.slice(e+1),h=[...l,...o?[]:[{...r[e],text:n}],...d];return r.length<IL&&!h.some(p=>!p.text.trim())&&h.push({id:wr(),text:""}),{options:h}}},NL=({processors:t,validators:a}={})=>{const e=({state:n,validators:r,processors:o})=>{const{previousState:l,targetFields:d}=n;let h;if(!o&&TL(d.options)){const p=[...l.data.options],y=l.data.options[d.options.index];y&&(y.text=d.options.text,p.splice(d.options.index,1,y)),h={...d,options:p}}else o?h=Object.entries(d).reduce((p,[y,b])=>{const E=o[y];return p={...p,...E?E({data:l.data,value:b}):{[y]:b}},p},{}):h=d;const m=Object.keys(d).reduce((p,y)=>{const b=r[y];if(b){const E=b({currentError:l.errors[y],data:l.data,value:h[y]});p={...p,...E}}return p},{});return{newData:h,newErrors:m}};return{id:"stream-io/poll-composer-state-processing",handlers:{handleFieldChange:({state:n,next:r,forward:o})=>{if(!n.targetFields)return o();const{previousState:l,injectedFieldErrors:d}=n,{newData:h,newErrors:m}=e({processors:{...ML,...t==null?void 0:t.handleFieldChange},state:n,validators:{...Fc,...DL,...a==null?void 0:a.handleFieldChange}});return r({...n,nextState:{...l,data:{...l.data,...h},errors:{...l.errors,...m,...d}}})},handleFieldBlur:({state:n,next:r,forward:o})=>{if(!n.targetFields)return o();const{previousState:l}=n,{newData:d,newErrors:h}=e({processors:t==null?void 0:t.handleFieldBlur,state:n,validators:{...Fc,...AL,...a==null?void 0:a.handleFieldBlur}});return r({...n,nextState:{...l,data:{...l.data,...d},errors:{...l.errors,...h,...n.injectedFieldErrors}}})}}}},RL=t=>({id:"stream-io/poll-composer-composition",handlers:{compose:({discard:a,forward:e})=>t.pollComposer.canCreatePoll?e():a()}}),kL=class extends uu{constructor({composer:t}){super(),this.use([RL(t)])}},LL=class extends uu{constructor(){super(),this.use([NL()])}},PL=class extends Error{constructor(t,{code:a,status:e,response:n}){super(t),this.name="ErrorFromResponse",this.code=a,this.response=n,this.status=e}toJSON(){const t=[["status",this.status],["code",this.code]],a=[];for(const[e,n]of t)typeof n<"u"&&n!==null&&a.push(`${e}: ${n}`);return{message:`(${a.join(", ")}) - ${this.message}`,stack:this.stack,name:this.name}}},OL=class{constructor({composer:t}){this.initState=()=>{this.state.next(this.initialState)},this.updateFields=async(a,e)=>{const{state:n,status:r}=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldChange",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:a,injectedFieldErrors:e}});r!=="discard"&&this.state.next(n.nextState)},this.handleFieldBlur=async a=>{const e=await this.stateMiddlewareExecutor.execute({eventName:"handleFieldBlur",initialValue:{nextState:{...this.state.getLatestValue()},previousState:{...this.state.getLatestValue()},targetFields:{[a]:this.state.getLatestValue().data[a]}}});e.status!=="discard"&&this.state.next(e.state.nextState)},this.compose=async()=>{var r;const{data:a,errors:e}=this.state.getLatestValue(),n=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{data:{...a,max_votes_allowed:a.max_votes_allowed?parseInt(a.max_votes_allowed):void 0,options:(r=a.options)==null?void 0:r.filter(o=>o.text.trim()).map(o=>({text:o.text}))},errors:e}});if(n.status!=="discard")return n.state},this.composer=t,this.state=new ba(this.initialState),this.compositionMiddlewareExecutor=new kL({composer:t}),this.stateMiddlewareExecutor=new LL}get initialState(){var t;return{data:{allow_answers:!1,allow_user_suggested_options:!1,description:"",enforce_unique_vote:!0,id:wr(),max_votes_allowed:"",name:"",options:[{id:wr(),text:""}],user_id:(t=this.composer.client.user)==null?void 0:t.id,voting_visibility:"public"},errors:{}}}get allow_answers(){return this.state.getLatestValue().data.allow_answers}get allow_user_suggested_options(){return this.state.getLatestValue().data.allow_user_suggested_options}get description(){return this.state.getLatestValue().data.description}get enforce_unique_vote(){return this.state.getLatestValue().data.enforce_unique_vote}get id(){return this.state.getLatestValue().data.id}get max_votes_allowed(){return this.state.getLatestValue().data.max_votes_allowed}get name(){return this.state.getLatestValue().data.name}get options(){return this.state.getLatestValue().data.options}get user_id(){return this.state.getLatestValue().data.user_id}get voting_visibility(){return this.state.getLatestValue().data.voting_visibility}get canCreatePoll(){var l,d;const{data:t,errors:a}=this.state.getLatestValue(),e=t.options.filter(h=>!!h.text).length>0,n=!!t.name,r=parseInt(((d=(l=t.max_votes_allowed)==null?void 0:l.match($0))==null?void 0:d[0])||""),o=t.max_votes_allowed===""||!!r&&(2<=r||r<=10);return e&&n&&o&&Object.values(a).filter(h=>!!h).length===0}},eE=t=>{const{localMetadata:a,...e}=t;return e},BL=t=>({id:"stream-io/message-composer-middleware/attachments",handlers:{compose:({state:a,next:e,discard:n,forward:r})=>{const{attachmentManager:o}=t;if(!o)return r();if(o.uploadsInProgressCount>0)return t.client.notifications.addWarning({message:"Wait until all attachments have uploaded",origin:{emitter:"MessageComposer",context:{composer:t}}}),n();const l=(a.message.attachments??[]).concat(o.successfulUploads.map(eE));return l.length?e({...a,localMessage:{...a.localMessage,attachments:l},message:{...a.message,attachments:l}}):r()}}}),UL=t=>({id:"stream-io/message-composer-middleware/draft-attachments",handlers:{compose:({state:a,next:e,forward:n})=>{const{attachmentManager:r}=t;if(!r)return n();const o=r.successfulUploads,l=o.length?(a.draft.attachments??[]).concat(o.map(eE)):void 0;return e({...a,draft:{...a.draft,attachments:l}})}}}),zL=t=>({id:"stream-io/message-composer-middleware/data-cleanup",handlers:{compose:({state:a,next:e})=>{var o,l,d;const n={type:((o=t.editedMessage)==null?void 0:o.type)??"regular"},r=t.editedMessage?NS(t.editedMessage):void 0;return e({...a,localMessage:Ha({...t.editedMessage,...a.localMessage,...n,user:t.client.user}),message:{...r,...a.message,...n},sendOptions:t.editedMessage&&((l=a.sendOptions)!=null&&l.skip_enrich_url)?{skip_enrich_url:(d=a.sendOptions)==null?void 0:d.skip_enrich_url}:a.sendOptions})}}}),jL=t=>({id:"stream-io/message-composer-middleware/custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const r=t.customDataManager.customMessageData;return r?e({...a,localMessage:{...a.localMessage,...r},message:{...a.message,...r}}):n()}}}),FL=t=>({id:"stream-io/message-composer-middleware/draft-custom-data",handlers:{compose:({state:a,next:e,forward:n})=>{const r=t.customDataManager.customMessageData;return r?e({...a,draft:{...a.draft,...r}}):n()}}}),HL=t=>({id:"stream-io/message-composer-middleware/data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var m;const{maxLengthOnSend:r}=t.config.text??{},o=a.message.text??"",l=Z0(o)&&!((m=a.message.attachments)!=null&&m.length)&&!a.message.poll_id,d=typeof r=="number"&&o.length>r,h=t.editedMessage&&!t.lastChangeOriginIsLocal;return l||h||d?await e():await n()}}}),YL=t=>({id:"stream-io/message-composer-middleware/draft-data-validation",handlers:{compose:async({state:a,discard:e,forward:n})=>{var l;const r=!Z0(a.draft.text??"")||((l=a.draft.attachments)==null?void 0:l.length)||a.draft.poll_id||a.draft.quoted_message_id;return t.lastChangeOriginIsLocal&&r?await n():await e()}}}),WL=t=>({id:"stream-io/message-composer-middleware/link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:r}=t;if(!r)return n();r.cancelURLEnrichment();const o=r.loadingPreviews.length>0,l=r.dismissedPreviews.length>0,d=r.loadingPreviews.length>0?[]:r.loadedPreviews.map(y=>G0.getPreviewData(y)),h=(a.message.attachments??[]).concat(d);if(!h.length)return n();const m={...a.sendOptions};return(!o&&d.length>0||l)&&(m.skip_enrich_url=!0),e({...a,message:{...a.message,attachments:h},localMessage:{...a.localMessage,attachments:h},sendOptions:m})}}}),GL=t=>({id:"stream-io/message-composer-middleware/draft-link-previews",handlers:{compose:({state:a,next:e,forward:n})=>{const{linkPreviewsManager:r}=t;if(!r)return n();r.cancelURLEnrichment();const o=r.loadedPreviews.map(l=>G0.getPreviewData(l));return o.length?e({...a,draft:{...a.draft,attachments:(a.draft.attachments??[]).concat(o)}}):n()}}}),$L=t=>({id:"stream-io/message-composer-middleware/text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{mentionedUsers:r,text:o}=t.textComposer,l=Array.from(new Set(r.filter(({id:d,name:h})=>o.includes(`@${d}`)||o.includes(`@${h}`))));return!o&&l.length===0?n():e({...a,localMessage:{...a.localMessage,mentioned_users:l,text:o},message:{...a.message,mentioned_users:l.map(d=>d.id),text:o}})}}}),ZL=t=>({id:"stream-io/message-composer-middleware/draft-text-composition",handlers:{compose:({state:a,next:e,forward:n})=>{if(!t.textComposer)return n();const{maxLengthOnSend:r}=t.config.text??{},{mentionedUsers:o,text:l}=t.textComposer,d=o.length?Array.from(new Set(o.filter(({id:m,name:p})=>l.includes(`@${m}`)||l.includes(`@${p}`)))):void 0,h=typeof r=="number"&&l.length>r?l.slice(0,r):l;return e({...a,draft:{...a.draft,mentioned_users:d==null?void 0:d.map(m=>m.id),text:h}})}}}),qL=t=>({id:"stream-io/message-composer-middleware/own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,localMessage:{...a.localMessage,...n,quoted_message:t.quotedMessage??void 0},message:{...a.message,...n}})}}}),QL=t=>({id:"stream-io/message-composer-middleware/draft-own-state",handlers:{compose:({state:a,next:e})=>{const n={};return t.quotedMessage&&(n.quoted_message_id=t.quotedMessage.id),t.pollId&&(n.poll_id=t.pollId),e({...a,draft:{...a.draft,...n}})}}}),VL={attachments:[],mentioned_users:[],parent_id:void 0,quoted_message:void 0,text:""},XL=t=>({id:"stream-io/message-composer-middleware/poll-only",handlers:{compose:({state:a,complete:e,forward:n})=>{const r=t.pollId,o=!!t.editedMessage,l=!!t.threadId;return!r||l||o?n():e({...a,localMessage:{...a.localMessage,...VL,poll_id:r},message:{id:a.localMessage.id,poll_id:r}})}}}),JL=class extends uu{constructor({composer:t}){super(),this.use([XL(t),$L(t),BL(t),WL(t),qL(t),jL(t),HL(t),zL(t)])}},KL=class extends uu{constructor({composer:t}){super(),this.use([ZL(t),UL(t),GL(t),QL(t),FL(t),YL(t)])}},eP={debounceMs:300,pageSize:10},tE=class{constructor(t){this.setDebounceOptions=({debounceMs:n})=>{this.searchDebounced=Lg(this.executeQuery.bind(this),n)},this.activate=()=>{this.isActive||this.state.partialNext({isActive:!0})},this.deactivate=()=>{this.isActive&&this.state.partialNext({isActive:!1})},this.canExecuteQuery=n=>{const r=typeof n<"u",o=n??this.searchQuery;return!!(this.isActive&&!this.isLoading&&(this.hasNext||r)&&o)},this.search=n=>this.searchDebounced(n);const{debounceMs:a,pageSize:e}={...eP,...t};this.pageSize=e,this.state=new ba(this.initialState),this.setDebounceOptions({debounceMs:a})}get lastQueryError(){return this.state.getLatestValue().lastQueryError}get hasNext(){return this.state.getLatestValue().hasNext}get hasResults(){return Array.isArray(this.state.getLatestValue().items)}get isActive(){return this.state.getLatestValue().isActive}get isLoading(){return this.state.getLatestValue().isLoading}get initialState(){return{hasNext:!0,isActive:!1,isLoading:!1,items:void 0,lastQueryError:void 0,next:void 0,offset:0,searchQuery:""}}get items(){return this.state.getLatestValue().items}get next(){return this.state.getLatestValue().next}get offset(){return this.state.getLatestValue().offset}get searchQuery(){return this.state.getLatestValue().searchQuery}getStateBeforeFirstQuery(t){return{...this.initialState,isActive:this.isActive,isLoading:!0,searchQuery:t}}getStateAfterQuery(t,a){return{...this.state.getLatestValue(),lastQueryError:void 0,...t,isLoading:!1,items:a?t.items:[...this.items??[],...t.items||[]]}}async executeQuery(t){if(!this.canExecuteQuery(t))return;const a=typeof t<"u",e=t??this.searchQuery;a?this.state.next(this.getStateBeforeFirstQuery(t??"")):this.state.partialNext({isLoading:!0});const n={};try{const r=await this.query(e);if(!r)return;const{items:o,next:l}=r;l||l===null?(n.next=l,n.hasNext=!!l):(n.offset=(this.offset??0)+o.length,n.hasNext=o.length===this.pageSize),n.items=await this.filterQueryResults(o)}catch(r){n.lastQueryError=r}finally{this.state.next(this.getStateAfterQuery(n,a))}}cancelScheduledQuery(){this.searchDebounced.cancel()}resetState(){this.state.next(this.initialState)}resetStateAndActivate(){this.resetState(),this.activate()}},nE=({trigger:t,text:a,isCommand:e=!1,acceptTrailingSpaces:n=!0})=>{const r=`[^\\s${t}]*`,o=a.match(new RegExp(e?`^[${t}]${r}$`:n?`(?!^|\\W)?[${t}]${r}\\s?${r}$`:`(?!^|\\W)?[${t}]${r}$`,"g"));return o&&o[o.length-1].trim()},aE=({insertText:t,selection:a,text:e,trigger:n})=>{const r=e.slice(0,a.end),o=e.slice(a.end),l=r.lastIndexOf(n);return{text:r.slice(0,l)+t+o,selection:{start:l+t.length,end:l+t.length}}};function tP(t){return t.replace(/[-[\]{}()*+?.,/\\^$|#]/g,"\\$&")}var nP=({displayName:t,searchToken:a})=>({tokenizedDisplayName:{token:a,parts:a?t.split(new RegExp(`(${tP(a)})`,"gi")).filter(Boolean):[t]}}),aP=class extends tE{constructor(t,a){super(a),this.type="commands",this.canExecuteQuery=e=>{const n=typeof e<"u";return this.isActive&&!this.isLoading&&(this.hasNext||n)},this.channel=t}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}query(t){const a=this.channel.getConfig(),n=((a==null?void 0:a.commands)||[]).filter(r=>!!(r.name&&r.name.toLowerCase().indexOf(t.toLowerCase())!==-1));return n.sort((r,o)=>{var h,m;let l=(h=r.name)==null?void 0:h.toLowerCase(),d=(m=o.name)==null?void 0:m.toLowerCase();if((l==null?void 0:l.indexOf(t))===0&&(l=`0${l}`),(d==null?void 0:d.indexOf(t))===0&&(d=`0${d}`),l!=null&&d!=null){if(l<d)return-1;if(l>d)return 1}return 0}),Promise.resolve({items:n.map(r=>({...r,id:r.name})),next:null})}filterQueryResults(t){return t}},rP={minChars:1,trigger:"/"},sP=(t,a)=>{const e=wf(rP,{});let n=new aP(t);return n.activate(),{id:"stream-io/text-composer/commands-middleware",handlers:{onChange:({state:r,next:o,complete:l,forward:d})=>{var y;if(!r.selection)return d();const h=nE({trigger:e.trigger,text:r.text.slice(0,r.selection.end),acceptTrailingSpaces:!1,isCommand:!0});if(h&&h.length===e.minChars&&n.resetStateAndActivate(),!h||h.length<e.minChars){const b=((y=r.suggestions)==null?void 0:y.trigger)===e.trigger,E={...r};return b&&delete E.suggestions,o(E)}return l({...r,suggestions:{query:h.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:r,complete:o,forward:l})=>{var h;const{selectedSuggestion:d}=r.change??{};return!d||((h=r.suggestions)==null?void 0:h.trigger)!==e.trigger?l():(n.resetStateAndActivate(),o({...r,...aE({insertText:`/${d.name} `,selection:r.selection,text:r.text,trigger:e.trigger}),suggestions:void 0}))}}}},q1={a:"|||||||",c:"|",e:"|||||",i:"|||||",n:"|",o:"||||||||",u:"|||||||"},Kp=t=>t?Object.keys(q1).reduce((a,e)=>a.replace(new RegExp(q1[e],"g"),e),t):"",Q1=(t,a)=>{if(t.length===0)return a.length;if(a.length===0)return t.length;const e=[];let n;for(n=0;n<=a.length;n++)e[n]=[n];let r;for(r=0;r<=t.length;r++)e[0][r]=r;for(n=1;n<=a.length;n++)for(r=1;r<=t.length;r++)a.charAt(n-1)===t.charAt(r-1)?e[n][r]=e[n-1][r-1]:e[n][r]=Math.min(e[n-1][r-1]+1,Math.min(e[n][r-1]+1,e[n-1][r]+1));return e[a.length][t.length]},iP=class extends tE{constructor(t,a){const{mentionAllAppUsers:e,textComposerText:n,transliterate:r,...o}=a||{};super(o),this.type="mentions",this.canExecuteQuery=l=>{const d=typeof l<"u";return this.isActive&&!this.isLoading&&(d||this.hasNext)},this.transliterate=l=>l,this.getMembersAndWatchers=()=>{const l=Object.values(this.channel.state.members??{}).map(({user:p})=>p),d=Object.values(this.channel.state.watchers??{}),h=[...l,...d],m={};return h.forEach(p=>{p&&!m[p.id]&&(m[p.id]=p)}),Object.values(m)},this.searchMembersLocally=l=>{const{textComposerText:d}=this.config;return d?this.getMembersAndWatchers().filter(h=>{if(h.id===this.client.userID)return!1;if(!l)return!0;const m=this.transliterate(Kp(h.id)).toLowerCase(),p=this.transliterate(Kp(h.name)).toLowerCase(),y=this.transliterate(Kp(l)).toLowerCase(),b=3,E=d.slice(-4).includes("@");if(p){const C=Q1(y,p);if(p.includes(y)||C<=b&&E)return!0}const S=Q1(y,m);return m.includes(y)||S<=b&&E}).sort((h,m)=>{if(!this.memberSort)return(h.name||"").localeCompare(m.name||"");for(const[p,y]of Object.entries(this.memberSort)){const b=h[p],E=m[p];if(b!==E)return y===1?String(b||"").localeCompare(String(E||"")):String(E||"").localeCompare(String(b||""))}return 0}):[]},this.prepareQueryUsersParams=l=>({filters:{$or:[{id:{$autocomplete:l}},{name:{$autocomplete:l}}],...this.userFilters},sort:this.userSort??[{name:1},{id:1}],options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}),this.prepareQueryMembersParams=l=>{let h=[{user_id:1}];return this.memberSort?Array.isArray(this.memberSort)?h=this.memberSort[0]:Object.keys(this.memberSort).length===1&&(h=this.memberSort):h=[{user_id:1}],{filters:this.memberFilters??{name:{$autocomplete:l}},sort:h,options:{...this.searchOptions,limit:this.pageSize,offset:this.offset}}},this.queryUsers=async l=>{const{filters:d,sort:h,options:m}=this.prepareQueryUsersParams(l),{users:p}=await this.client.queryUsers(d,h,m);return p},this.queryMembers=async l=>{const{filters:d,sort:h,options:m}=this.prepareQueryMembersParams(l);return(await this.channel.queryMembers(d,h,m)).members.map(y=>y.user)},this.filterMutes=l=>{const{textComposerText:d}=this.config;if(!d)return[];const{mutedUsers:h}=this.client;return d.includes("/unmute")&&!h.length?[]:h.length?d.includes("/unmute")?l.filter(m=>h.some(p=>p.target.id===m.id)):l.filter(m=>h.every(p=>p.target.id!==m.id)):l},this.client=t.getClient(),this.channel=t,this.config={mentionAllAppUsers:e,textComposerText:n},r&&(this.transliterate=r)}get allMembersLoadedWithInitialChannelQuery(){return Object.keys(this.channel.state.members||{}).length<g4}getStateBeforeFirstQuery(t){const a=super.getStateBeforeFirstQuery(t),{items:e}=this.state.getLatestValue();return{...a,items:e}}async query(t){let a;const e=this.allMembersLoadedWithInitialChannelQuery||!t;return this.config.mentionAllAppUsers?a=await this.queryUsers(t):e?a=this.searchMembersLocally(t):a=await this.queryMembers(t),{items:a.map(n=>({...n,...nP({displayName:n.name||n.id,searchToken:this.searchQuery})}))}}filterQueryResults(t){return this.filterMutes(t)}},oP={minChars:1,trigger:"@"},lP=t=>{const{tokenizedDisplayName:a,...e}=t;return e},cP=(t,a)=>{const e=wf(oP,{});let n;return n=new iP(t),n.activate(),{id:"stream-io/text-composer/mentions-middleware",handlers:{onChange:({state:r,next:o,complete:l,forward:d})=>{var y;if(!r.selection)return d();const h=nE({trigger:e.trigger,text:r.text.slice(0,r.selection.end)});if(h&&h.length===e.minChars&&n.resetStateAndActivate(),!h||h.length<e.minChars){const b=((y=r.suggestions)==null?void 0:y.trigger)===e.trigger,E={...r};return b&&delete E.suggestions,o(E)}return n.config.textComposerText=r.text,l({...r,suggestions:{query:h.slice(1),searchSource:n,trigger:e.trigger}})},onSuggestionItemSelect:({state:r,complete:o,forward:l})=>{var h;const{selectedSuggestion:d}=r.change??{};return!d||((h=r.suggestions)==null?void 0:h.trigger)!==e.trigger?l():(n.resetStateAndActivate(),o({...r,...aE({insertText:`@${d.name||d.id} `,selection:r.selection,text:r.text,trigger:e.trigger}),mentionedUsers:r.mentionedUsers.concat(lP(d)),suggestions:void 0}))}}}},uP=t=>({id:"stream-io/text-composer/pre-validation-middleware",handlers:{onChange:({state:a,next:e,forward:n})=>{const{maxLengthOnEdit:r}=t.config.text??{};return typeof r=="number"&&a.text.length>r?(a.text=a.text.slice(0,r),e({...a,text:a.text})):n()},onSuggestionItemSelect:({forward:a})=>a()}}),dP=class extends uu{constructor({composer:t}){super(),this.use([uP(t),cP(t.channel),sP(t.channel)])}async execute({eventName:t,initialValue:a}){var o;const e=await this.executeMiddlewareChain({eventName:t,initialValue:a}),{query:n,searchSource:r}=e.state.suggestions??{};return(o=r==null?void 0:r.search(n))==null||o.catch(console.error),e}},Z0=t=>{const a=t.trim();return a===""||a===">"||a==="``````"||a==="``"||a==="**"||a==="____"||a==="__"||a==="****"},V1=({composer:t,message:a})=>{if(!a){const n=t.config.text.defaultValue??"";return{mentionedUsers:[],text:n,selection:{start:n.length,end:n.length}}}const e=a.text??"";return{mentionedUsers:(a.mentioned_users??[]).map(n=>typeof n=="string"?{id:n}:n),text:e,selection:{start:e.length,end:e.length}}},fP=class{constructor({composer:t,message:a}){this.initState=({message:e}={})=>{this.state.next(V1({composer:this.composer,message:e}))},this.upsertMentionedUser=e=>{const n=[...this.mentionedUsers],r=n.findIndex(o=>o.id===e.id);r>=0?(n.splice(r,1,e),this.state.partialNext({mentionedUsers:n})):(n.push(e),this.state.partialNext({mentionedUsers:n}))},this.getMentionedUser=e=>this.state.getLatestValue().mentionedUsers.find(n=>n.id===e),this.removeMentionedUser=e=>{const n=this.mentionedUsers.findIndex(o=>o.id===e);if(n===-1)return;const r=[...this.mentionedUsers];r.splice(n,1),this.state.partialNext({mentionedUsers:r})},this.setText=e=>{!this.enabled||e===this.text||this.state.partialNext({text:e})},this.setSelection=e=>{const n=e.start!==this.selection.start||e.end!==this.selection.end;!this.enabled||!n||this.state.partialNext({selection:e})},this.insertText=({text:e,selection:n})=>{if(!this.enabled)return;const r=n??this.selection,{maxLengthOnEdit:o}=this.composer.config.text??{},l=this.text,d=[l.slice(0,r.start),e,l.slice(r.end)].join(""),h=d.slice(0,typeof o=="number"?o:d.length),m=l.slice(0,r.start).length+e.length,p=m>=h.length?h.length:l.slice(0,m).length;this.state.partialNext({text:h,selection:{start:p,end:p}})},this.wrapSelection=({head:e="",selection:n,tail:r=""})=>{if(!this.enabled)return;const o=n??this.selection,l=this.text.slice(0,o.start),d=this.text.slice(o.start,o.end),h=this.text.slice(o.end),m={start:l.length+e.length,end:l.length+e.length+d.length};this.state.partialNext({text:[l,e,d,r,h].join(""),selection:m})},this.setSuggestions=e=>{this.state.partialNext({suggestions:e})},this.closeSuggestions=()=>{const{suggestions:e}=this.state.getLatestValue();e&&this.state.partialNext({suggestions:void 0})},this.handleChange=async({text:e,selection:n})=>{if(!this.enabled)return;const r=await this.middlewareExecutor.execute({eventName:"onChange",initialValue:{...this.state.getLatestValue(),text:e,selection:n}});r.status!=="discard"&&(this.state.next(r.state),this.config.publishTypingEvents&&e&&AS(this.channel.keystroke(this.composer.threadId??void 0),"start typing event"))},this.handleSelect=async e=>{if(!this.enabled)return;const n=await this.middlewareExecutor.execute({eventName:"onSuggestionItemSelect",initialValue:{...this.state.getLatestValue(),change:{selectedSuggestion:e}}});(n==null?void 0:n.status)!=="discard"&&this.state.next(n.state)},this.composer=t,this.state=new ba(V1({composer:t,message:a})),this.middlewareExecutor=new dP({composer:t})}get channel(){return this.composer.channel}get config(){return this.composer.config.text}get enabled(){return this.composer.config.text.enabled}set enabled(t){t!==this.enabled&&this.composer.updateConfig({text:{enabled:t}})}get defaultValue(){return this.composer.config.text.defaultValue}set defaultValue(t){t!==this.defaultValue&&this.composer.updateConfig({text:{defaultValue:t}})}get maxLengthOnEdit(){return this.composer.config.text.maxLengthOnEdit}set maxLengthOnEdit(t){t!==this.maxLengthOnEdit&&this.composer.updateConfig({text:{maxLengthOnEdit:t}})}get maxLengthOnSend(){return this.composer.config.text.maxLengthOnSend}set maxLengthOnSend(t){t!==this.maxLengthOnSend&&this.composer.updateConfig({text:{maxLengthOnSend:t}})}get publishTypingEvents(){return this.composer.config.text.publishTypingEvents}set publishTypingEvents(t){t!==this.publishTypingEvents&&this.composer.updateConfig({text:{publishTypingEvents:t}})}get mentionedUsers(){return this.state.getLatestValue().mentionedUsers}get selection(){return this.state.getLatestValue().selection}get suggestions(){return this.state.getLatestValue().suggestions}get text(){return this.state.getLatestValue().text}get textIsEmpty(){return Z0(this.text)}setMentionedUsers(t){this.state.partialNext({mentionedUsers:t})}},$g=class rE{constructor(){this.unsubscribeFunctions=new Set}get hasSubscriptions(){return this.unsubscribeFunctions.size>0}addUnsubscribeFunction(a){this.unsubscribeFunctions.add(a)}unregisterSubscriptions(){return this.unsubscribeFunctions.forEach(a=>a()),this.unsubscribeFunctions.clear(),rE.symbol}};$g.symbol=Symbol($g.name);var du=$g,eg=50,hP=[{created_at:-1}],mP=1e3,pP={active_participant_count:!0,channel:!0,channel_cid:!0,created_at:!0,created_by:!0,created_by_user_id:!0,deleted_at:!0,draft:!0,last_message_at:!0,latest_replies:!0,parent_message:!0,parent_message_id:!0,participant_count:!0,read:!0,reply_count:!0,thread_participants:!0,title:!0,updated_at:!0},X1=t=>{const a={};for(const e in t){if(pP[e])continue;const n=e;a[n]=t[n]}return a},Hc=class extends du{constructor({client:t,threadData:a}){super(),this.failedRepliesMap=new Map,this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.reload=async()=>{if(!this.state.getLatestValue().isLoading){this.state.partialNext({isLoading:!0});try{const r=await this.client.getThread(this.id,{watch:!0});this.hydrateState(r)}finally{this.state.partialNext({isLoading:!1})}}},this.hydrateState=r=>{if(r===this)return;if(r.id!==this.id)throw new Error("Cannot hydrate thread's state using thread with different threadId");const{createdAt:o,custom:l,title:d,deletedAt:h,parentMessage:m,participants:p,read:y,replyCount:b,replies:E,updatedAt:S}=r.state.getLatestValue(),C=Array.from(this.failedRepliesMap.values());this.state.partialNext({title:d,createdAt:o,custom:l,deletedAt:h,parentMessage:m,participants:p,read:y,replyCount:b,replies:C.length?E.concat(C):E,updatedAt:S,isStateStale:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeThreadUpdated()),this.addUnsubscribeFunction(this.subscribeMarkActiveThreadRead()),this.addUnsubscribeFunction(this.subscribeReloadActiveStaleThread()),this.addUnsubscribeFunction(this.subscribeMarkThreadStale()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRepliesRead()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()))},this.subscribeThreadUpdated=()=>this.client.on("thread.updated",r=>{if(!r.thread||r.thread.parent_message_id!==this.id)return;const o=r.thread;this.state.partialNext({title:o.title,updatedAt:new Date(o.updated_at),deletedAt:o.deleted_at?new Date(o.deleted_at):null,custom:X1(o)})}).unsubscribe,this.subscribeMarkActiveThreadRead=()=>this.state.subscribeWithSelector(r=>({active:r.active,unreadMessageCount:J1(this.client.userID)(r)}),({active:r,unreadMessageCount:o})=>{!r||!o||this.throttledMarkAsRead()}),this.subscribeReloadActiveStaleThread=()=>this.state.subscribeWithSelector(r=>({active:r.active,isStateStale:r.isStateStale}),({active:r,isStateStale:o})=>{r&&o&&this.reload()}),this.subscribeMarkThreadStale=()=>this.client.on("user.watching.stop",r=>{var l,d;const{channel:o}=this.state.getLatestValue();!this.client.userID||this.client.userID!==((l=r.user)==null?void 0:l.id)||((d=r.channel)==null?void 0:d.cid)!==o.cid||this.state.partialNext({isStateStale:!0})}).unsubscribe,this.subscribeNewReplies=()=>this.client.on("message.new",r=>{var m,p,y;if(!this.client.userID||((m=r.message)==null?void 0:m.parent_id)!==this.id)return;const o=((p=r.message.user)==null?void 0:p.id)===this.client.userID,{active:l,read:d}=this.state.getLatestValue();this.upsertReplyLocally({message:r.message,timestampChanged:o}),l&&this.throttledMarkAsRead();const h={};for(const b of Object.keys(d)){const E=d[b];if(E){let S=E;b===((y=r.user)==null?void 0:y.id)?S={...S,lastReadAt:r.created_at?new Date(r.created_at):new Date,user:r.user,unreadMessageCount:0}:l&&b===this.client.userID||(S={...S,unreadMessageCount:E.unreadMessageCount+1}),h[b]=S}}this.state.partialNext({read:h})}).unsubscribe,this.subscribeRepliesRead=()=>this.client.on("message.read",r=>{if(!r.user||!r.created_at||!r.thread||r.thread.parent_message_id!==this.id)return;const o=r.user.id,l=r.created_at,d=r.user;this.state.next(h=>({...h,read:{...h.read,[o]:{lastReadAt:new Date(l),user:d,lastReadMessageId:r.last_read_message_id,unreadMessageCount:0}}}))}).unsubscribe,this.subscribeMessageDeleted=()=>this.client.on("message.deleted",r=>{r.message&&(r.message.parent_id===this.id&&(r.hard_delete?this.deleteReplyLocally({message:r.message}):this.upsertReplyLocally({message:r.message})),r.message.id===this.id&&this.updateParentMessageLocally({message:r.message}))}).unsubscribe,this.subscribeMessageUpdated=()=>{const o=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(l=>this.client.on(l,d=>{d.message&&this.updateParentMessageOrReplyLocally(d.message)}).unsubscribe);return()=>o.forEach(l=>l())},this.unregisterSubscriptions=()=>{const r=super.unregisterSubscriptions();return this.state.partialNext({isStateStale:!0}),r},this.deleteReplyLocally=({message:r})=>{var h;const{replies:o}=this.state.getLatestValue(),l=RS({needle:Ha(r),sortedArray:o,sortDirection:"ascending",selectValueToCompare:m=>m.created_at.getTime(),selectKey:m=>m.id});if(((h=o[l])==null?void 0:h.id)!==r.id)return;const d=[...o];d.splice(l,1),this.state.partialNext({replies:d})},this.upsertReplyLocally=({message:r,timestampChanged:o=!1})=>{if(r.parent_id!==this.id)throw new Error("Reply does not belong to this thread");const l=Ha(r);r.status==="failed"?this.failedRepliesMap.set(l.id,l):this.failedRepliesMap.has(r.id)&&this.failedRepliesMap.delete(r.id),this.state.next(d=>({...d,replies:kS(d.replies,l,o)}))},this.updateParentMessageLocally=({message:r})=>{if(r.id!==this.id)throw new Error("Message does not belong to this thread");this.state.next(o=>{const l=Ha(r);return{...o,deletedAt:l.deleted_at,parentMessage:l,replyCount:r.reply_count??o.replyCount}})},this.updateParentMessageOrReplyLocally=r=>{r.parent_id===this.id&&this.upsertReplyLocally({message:r}),!r.parent_id&&r.id===this.id&&this.updateParentMessageLocally({message:r})},this.markAsRead=async({force:r=!1}={})=>this.ownUnreadCount===0&&!r?null:await this.channel.markRead({thread_id:this.id}),this.throttledMarkAsRead=LS(()=>this.markAsRead(),mP,{trailing:!0}),this.queryReplies=({limit:r=eg,sort:o=hP,...l}={})=>this.channel.getReplies(this.id,{limit:r,...l},o),this.loadNextPage=({limit:r=eg}={})=>this.loadPage(r),this.loadPrevPage=({limit:r=eg}={})=>this.loadPage(-r),this.loadPage=async r=>{var y;const{pagination:o}=this.state.getLatestValue(),[l,d,h]=r>0?["isLoadingNext","nextCursor","push"]:["isLoadingPrev","prevCursor","unshift"];if(o[l]||o[d]===null)return;const m={[r>0?"id_gt":"id_lt"]:o[d]},p=Math.abs(r);this.state.partialNext({pagination:{...o,[l]:!0}});try{const b=await this.queryReplies({...m,limit:p}),E=b.messages.map(Ha),S=((y=E.at(r>0?-1:0))==null?void 0:y.id)??null;this.state.next(C=>{let _=C.replies;return E.length>0&&(_=[...C.replies],_[h](...E)),{...C,replies:_,pagination:{...C.pagination,[d]:b.messages.length<p?null:S,[l]:!1}}})}catch(b){this.client.logger("error",b.message),this.state.next(E=>({...E,pagination:{...E.pagination,[l]:!1}}))}};const e=t.channel(a.channel.type,a.channel.id,{name:a.channel.name});e._hydrateMembers({members:a.channel.members??[],overrideCurrentState:!1});const n=t.userID?[{user:{id:t.userID},unread_messages:0,last_read:new Date().toISOString()}]:[];this.state=new ba({active:!1,isLoading:!1,isStateStale:!1,channel:e,createdAt:new Date(a.created_at),deletedAt:a.deleted_at?new Date(a.deleted_at):null,pagination:yP(a),parentMessage:Ha(a.parent_message),participants:a.thread_participants,read:gP(!a.read||a.read.length===0?n:a.read),replies:a.latest_replies.map(Ha),replyCount:a.reply_count??0,updatedAt:a.updated_at?new Date(a.updated_at):null,title:a.title,custom:X1(a)}),this.id=a.parent_message_id,this.client=t,this.messageComposer=new Zf({client:t,composition:a.draft,compositionContext:this})}get channel(){return this.state.getLatestValue().channel}get hasStaleState(){return this.state.getLatestValue().isStateStale}get ownUnreadCount(){return J1(this.client.userID)(this.state.getLatestValue())}},gP=t=>t.reduce((a,e)=>(a[e.user.id]={user:e.user,lastReadMessageId:e.last_read_message_id,unreadMessageCount:e.unread_messages??0,lastReadAt:new Date(e.last_read)},a),{}),yP=t=>{var e;return{nextCursor:null,prevCursor:t.latest_replies.length===t.reply_count?null:((e=t.latest_replies.at(0))==null?void 0:e.id)??null,isLoadingNext:!1,isLoadingPrev:!1}},J1=t=>a=>{var e;return t&&((e=a.read[t])==null?void 0:e.unreadMessageCount)||0},Yc=t=>!!(t!=null&&t.message),vP=t=>{let a=null,e=new Date().getTime();return Yc(t)?e=a=new Date(t.created_at).getTime():t&&US(t)&&(e=new Date(t.updated_at).getTime()),{lastChange:{draftUpdate:a,stateUpdate:e}}},K1=t=>{if(!t)return{id:Zf.generateId(),quotedMessage:null,pollId:null,draftId:null};const a=t.quoted_message;let e,n=null,r=Zf.generateId();return Yc(t)?(e=t.message,n=t.message.id):(e=t,r=t.id),{draftId:n,id:r,quotedMessage:a?Ha(a):null,pollId:e.poll_id??null}},bP=()=>{},sE=class Zg extends du{constructor({composition:a,config:e,compositionContext:n,client:r}){if(super(),this.initState=({composition:l}={})=>{this.editingAuditState.partialNext(this.initEditingAuditState(l));const d=typeof l>"u"?l:Yc(l)?l.message:Ha(l);this.attachmentManager.initState({message:d}),this.linkPreviewsManager.initState({message:d}),this.textComposer.initState({message:d}),this.pollComposer.initState(),this.customDataManager.initState({message:d}),this.state.next(K1(l)),l&&!Yc(l)&&d&&US(d)&&(this.editedMessage=d)},this.initEditingAuditState=l=>vP(l),this.registerSubscriptions=()=>this.hasSubscriptions?bP:(this.addUnsubscribeFunction(this.subscribeMessageComposerSetupStateChange()),this.addUnsubscribeFunction(this.subscribeMessageUpdated()),this.addUnsubscribeFunction(this.subscribeMessageDeleted()),this.addUnsubscribeFunction(this.subscribeTextComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeAttachmentManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeLinkPreviewsManagerStateChanged()),this.addUnsubscribeFunction(this.subscribePollComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeCustomDataManagerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerStateChanged()),this.addUnsubscribeFunction(this.subscribeMessageComposerConfigStateChanged()),this.unregisterSubscriptions.bind(this)),this.subscribeMessageUpdated=()=>{const d=["message.updated","reaction.new","reaction.deleted","reaction.updated"].map(h=>this.client.on(h,m=>{var p;m.message&&(m.message.id===this.id&&this.initState({composition:m.message}),(p=this.quotedMessage)!=null&&p.id&&m.message.id===this.quotedMessage.id&&this.setQuotedMessage(Ha(m.message)))}).unsubscribe);return()=>d.forEach(h=>h())},this.subscribeMessageComposerSetupStateChange=()=>{let l=null;const d=this.client._messageComposerSetupState.subscribeWithSelector(({setupFunction:h})=>({setup:h}),({setup:h})=>{l==null||l(),l=(h==null?void 0:h({composer:this}))??null});return()=>{l==null||l(),d()}},this.subscribeMessageDeleted=()=>this.client.on("message.deleted",l=>{l.message&&(l.message.id===this.id?this.clear():this.quotedMessage&&l.message.id===this.quotedMessage.id&&this.setQuotedMessage(null))}).unsubscribe,this.subscribeDraftUpdated=()=>this.client.on("draft.updated",l=>{const d=l.draft;!d||!!d.parent_id!=!!this.threadId||d.channel_cid!==this.channel.cid||this.initState({composition:d})}).unsubscribe,this.subscribeDraftDeleted=()=>this.client.on("draft.deleted",l=>{const d=l.draft;!d||!!d.parent_id!=!!this.threadId||d.channel_cid!==this.channel.cid||(this.logDraftUpdateTimestamp(),!this.compositionIsEmpty&&this.clear())}).unsubscribe,this.subscribeTextComposerStateChanged=()=>this.textComposer.state.subscribeWithSelector(({text:l})=>[l],([l],d)=>{if(!(typeof d>"u")){if(this.logStateUpdateTimestamp(),this.compositionIsEmpty){this.deleteDraft();return}this.linkPreviewsManager.enabled&&(l?this.linkPreviewsManager.findAndEnrichUrls(l):this.linkPreviewsManager.clearPreviews())}}),this.subscribeAttachmentManagerStateChanged=()=>this.attachmentManager.state.subscribe((l,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeLinkPreviewsManagerStateChanged=()=>this.linkPreviewsManager.state.subscribe((l,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribePollComposerStateChanged=()=>this.pollComposer.state.subscribe((l,d)=>{if(!(typeof d>"u")&&(this.logStateUpdateTimestamp(),this.compositionIsEmpty)){this.deleteDraft();return}}),this.subscribeCustomDataManagerStateChanged=()=>this.customDataManager.state.subscribe((l,d)=>{typeof d<"u"&&!this.customDataManager.isMessageDataEqual(l,d)&&this.logStateUpdateTimestamp()}),this.subscribeMessageComposerStateChanged=()=>this.state.subscribe((l,d)=>{typeof d>"u"||(this.logStateUpdateTimestamp(),this.compositionIsEmpty&&this.deleteDraft())}),this.subscribeMessageComposerConfigStateChanged=()=>{let l;const d=this.configState.subscribeWithSelector(h=>({textDefaultValue:h.text.defaultValue,draftsEnabled:h.drafts.enabled}),({textDefaultValue:h,draftsEnabled:m})=>{this.textComposer.text===""&&h&&this.textComposer.insertText({text:h,selection:{start:0,end:0}}),m&&!l?l=[this.subscribeDraftUpdated(),this.subscribeDraftDeleted()]:!m&&l&&(l.forEach(p=>p()),l=null)});return()=>{l==null||l.forEach(h=>h()),d()}},this.setQuotedMessage=l=>{this.state.partialNext({quotedMessage:l})},this.clear=()=>{this.initState()},this.restore=()=>{const{editedMessage:l}=this;if(l){this.initState({composition:l});return}this.clear()},this.compose=async()=>{var m;const l=((m=this.editedMessage)==null?void 0:m.created_at)??new Date,h=await this.compositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{message:{id:this.id,parent_id:this.threadId??void 0,type:"regular"},localMessage:{attachments:[],created_at:l,deleted_at:null,error:void 0,id:this.id,mentioned_users:[],parent_id:this.threadId??void 0,pinned_at:null,reaction_groups:null,status:this.editedMessage?this.editedMessage.status:"sending",text:"",type:"regular",updated_at:l},sendOptions:{}}});if(h.status!=="discard")return h.state},this.composeDraft=async()=>{const{state:l,status:d}=await this.draftCompositionMiddlewareExecutor.execute({eventName:"compose",initialValue:{draft:{id:this.id,parent_id:this.threadId??void 0,text:""}}});if(d!=="discard")return l},this.createDraft=async()=>{if(this.editedMessage||!this.config.drafts.enabled)return;const l=await this.composeDraft();if(!l)return;const{draft:d}=l;this.state.partialNext({draftId:d.id}),this.logDraftUpdateTimestamp(),await this.channel.createDraft(d)},this.deleteDraft=async()=>{this.editedMessage||!this.config.drafts.enabled||!this.draftId||(this.state.partialNext({draftId:null}),this.logDraftUpdateTimestamp(),await this.channel.deleteDraft({parent_id:this.threadId??void 0}))},this.createPoll=async()=>{const l=await this.pollComposer.compose();if(!(!l||!l.data.id))try{const{poll:d}=await this.client.createPoll(l.data);this.state.partialNext({pollId:d.id}),this.pollComposer.initState()}catch(d){throw this.client.notifications.add({message:"Failed to create the poll",origin:{emitter:"MessageComposer",context:{composer:this}}}),d}},this.compositionContext=n,this.configState=new ba(wf(wL,e??{})),n instanceof rl)this.channel=n;else if(n instanceof Hc)this.channel=n.channel;else if(n.cid){const[l,d]=n.cid.split(":");this.channel=r.channel(l,d)}else throw new Error("MessageComposer requires composition context pointing to channel (channel or context.cid)");let o;Yc(a)?o=a.message:a&&(o=Ha(a),this.editedMessage=o),this.attachmentManager=new tL({composer:this,message:o}),this.linkPreviewsManager=new G0({composer:this,message:o}),this.textComposer=new fP({composer:this,message:o}),this.pollComposer=new OL({composer:this}),this.customDataManager=new xL({composer:this,message:o}),this.editingAuditState=new ba(this.initEditingAuditState(a)),this.state=new ba(K1(a)),this.compositionMiddlewareExecutor=new JL({composer:this}),this.draftCompositionMiddlewareExecutor=new KL({composer:this})}static evaluateContextType(a){return a instanceof rl?"channel":a instanceof Hc?"thread":typeof a.legacyThreadId=="string"?"legacy_thread":"message"}static constructTag(a){return`${this.evaluateContextType(a)}_${a.id}`}get config(){return this.configState.getLatestValue()}updateConfig(a){this.configState.partialNext(wf(this.config,a))}get contextType(){return Zg.evaluateContextType(this.compositionContext)}get tag(){return Zg.constructTag(this.compositionContext)}get threadId(){return this.compositionContext instanceof rl?null:this.compositionContext instanceof Hc?this.compositionContext.id:typeof this.compositionContext.legacyThreadId=="string"?this.compositionContext.legacyThreadId:typeof this.compositionContext.parent_id=="string"?this.compositionContext.parent_id:null}get client(){return this.channel.getClient()}get id(){return this.state.getLatestValue().id}get draftId(){return this.state.getLatestValue().draftId}get lastChange(){return this.editingAuditState.getLatestValue().lastChange}get quotedMessage(){return this.state.getLatestValue().quotedMessage}get pollId(){return this.state.getLatestValue().pollId}get hasSendableData(){return!!(!this.attachmentManager.uploadsInProgressCount&&(!this.textComposer.textIsEmpty||this.attachmentManager.successfulUploadsCount>0)||this.pollId)}get compositionIsEmpty(){return!this.quotedMessage&&this.textComposer.textIsEmpty&&!this.attachmentManager.attachments.length&&!this.pollId}get lastChangeOriginIsLocal(){var o;const e=this.lastChange.draftUpdate===null&&!this.editedMessage,n=!!((o=this.editedMessage)!=null&&o.updated_at)&&new Date(this.editedMessage.updated_at).getTime()<this.lastChange.stateUpdate,r=!!this.lastChange.draftUpdate&&this.lastChange.draftUpdate<this.lastChange.stateUpdate;return n||r||e}logStateUpdateTimestamp(){this.editingAuditState.partialNext({lastChange:{...this.lastChange,stateUpdate:new Date().getTime()}})}logDraftUpdateTimestamp(){if(!this.config.drafts.enabled)return;const a=new Date().getTime();this.editingAuditState.partialNext({lastChange:{draftUpdate:a,stateUpdate:a}})}};sE.generateId=wr;var Zf=sE,rl=class{constructor(t,a,e,n){this.create=async l=>{const d={...l,watch:!1,state:!1,presence:!1};return await this.query(d,"latest")},this._callChannelListeners=l=>{const d=this,h=[];d.listeners.all&&h.push(...d.listeners.all),d.listeners[l.type]&&h.push(...d.listeners[l.type]);for(const m of h)typeof m!="string"&&m(l)},this._channelURL=()=>{if(!this.id)throw new Error("channel id is not defined");return`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}/${encodeURIComponent(this.id)}`};const r=/^[\w_-]+$/,o=/^[\w!_-]+$/;if(!r.test(a))throw new Error(`Invalid chat type ${a}, letters, numbers and "_-" are allowed`);if(typeof e=="string"&&!o.test(e))throw new Error(`Invalid chat id ${e}, letters, numbers and "!-_" are allowed`);this._client=t,this.type=a,this.id=e,this.data=n,this._data={...n},this.cid=`${a}:${e}`,this.listeners={},this.state=new H4(this),this.initialized=!1,this.offlineMode=!1,this.lastTypingEvent=null,this.isTyping=!1,this.disconnected=!1,this.messageComposer=new Zf({client:this._client,compositionContext:this})}getClient(){if(this.disconnected===!0)throw Error("You can't use a channel after client.disconnect() was called");return this._client}getConfig(){return this.getClient().configs[this.cid]}async _sendMessage(t,a){return await this.getClient().post(this._channelURL()+"/message",{message:t,...a})}async sendMessage(t,a){try{const e=this.getClient().offlineDb;if(e){const n=t.id;if(n)return await e.queueTask({task:{channelId:this.id,channelType:this.type,messageId:n,payload:[t,a],type:"send-message"}})}}catch(e){this._client.logger("error","offlineDb:send-message",{tags:["channel","offlineDb"],error:e})}return await this._sendMessage(t,a)}sendFile(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/file`,t,a,e,n)}sendImage(t,a,e,n){return this.getClient().sendFile(`${this._channelURL()}/image`,t,a,e,n)}deleteFile(t){return this.getClient().delete(`${this._channelURL()}/file`,{url:t})}deleteImage(t){return this.getClient().delete(`${this._channelURL()}/image`,{url:t})}async sendEvent(t){return this._checkInitialized(),await this.getClient().post(this._channelURL()+"/event",{event:t})}async search(t,a={}){if(a.offset&&a.next)throw Error("Cannot specify offset with next");const e={filter_conditions:{cid:this.cid},...a,sort:a.sort?fa(a.sort):void 0};if(typeof t=="string")e.query=t;else if(typeof t=="object")e.message_filter_conditions=t;else throw Error(`Invalid type ${typeof t} for query parameter`);return await this.getClient().wsPromise,await this.getClient().get(this.getClient().baseURL+"/search",{payload:e})}async queryMembers(t,a=[],e={}){var l;let n;const r=this.type;let o;return this.id?n=this.id:(l=this.data)!=null&&l.members&&Array.isArray(this.data.members)&&(o=this.data.members),await this.getClient().get(this.getClient().baseURL+"/members",{payload:{type:r,id:n,members:o,sort:fa(a),filter_conditions:t,...e}})}async updateMemberPartial(t,a){const e=new URL(`${this._channelURL()}/member`);return a!=null&&a.userId&&e.searchParams.append("user_id",a.userId),await this.getClient().patch(e.toString(),t)}async partialUpdateMember(t,a){if(!t)throw Error("Please specify the user id");return await this.getClient().patch(this._channelURL()+`/member/${encodeURIComponent(t)}`,a)}async sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");try{const n=this.getClient().offlineDb;if(n)return await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a,e],type:"send-reaction"}})}catch(n){this._client.logger("error","offlineDb:send-reaction",{tags:["channel","offlineDb"],error:n})}return this._sendReaction(t,a,e)}async _sendReaction(t,a,e){if(!t)throw Error("Message id is missing");if(!a||Object.keys(a).length===0)throw Error("Reaction object is missing");return await this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction`,{reaction:a,...e})}async deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");try{const n=this.getClient().offlineDb;if(n){const r=this.state.messages.find(({id:l})=>l===t),o={created_at:"",updated_at:"",message_id:t,type:a,user_id:this.getClient().userID??e};return r&&await n.deleteReaction({message:r,reaction:o}),await n.queueTask({task:{channelId:this.id,channelType:this.type,messageId:t,payload:[t,a],type:"delete-reaction"}})}}catch(n){this._client.logger("error","offlineDb:delete-reaction",{tags:["channel","offlineDb"],error:n})}return await this._deleteReaction(t,a,e)}async _deleteReaction(t,a,e){if(this._checkInitialized(),!a||!t)throw Error("Deleting a reaction requires specifying both the message and reaction type");const n=this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reaction/${encodeURIComponent(a)}`;return e?await this.getClient().delete(n,{user_id:e}):await this.getClient().delete(n,{})}async update(t={},a,e){return["config","cid","created_by","id","member_count","type","created_at","updated_at","last_message_at","own_capabilities"].forEach(r=>{delete t[r]}),await this._update({message:a,data:t,...e})}async updatePartial(t){var n,r;const a=await this.getClient().patch(this._channelURL(),t),e=[...a.channel.own_capabilities||[]].sort().join()!==[...Array.isArray((n=this.data)==null?void 0:n.own_capabilities)?(r=this.data)==null?void 0:r.own_capabilities:[]].sort().join();return this.data=a.channel,e&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:a.channel.own_capabilities}),a}async enableSlowMode(t){const a=await this.getClient().post(this._channelURL(),{cooldown:t});return this.data=a.channel,a}async disableSlowMode(){const t=await this.getClient().post(this._channelURL(),{cooldown:0});return this.data=t.channel,t}async delete(t={}){return await this.getClient().delete(this._channelURL(),{...t})}async truncate(t={}){return await this.getClient().post(this._channelURL()+"/truncate",t)}async acceptInvite(t={}){return await this._update({accept_invite:!0,...t})}async rejectInvite(t={}){return await this._update({reject_invite:!0,...t})}async addMembers(t,a,e={}){return await this._update({add_members:t,message:a,...e})}async addModerators(t,a,e={}){return await this._update({add_moderators:t,message:a,...e})}async assignRoles(t,a,e={}){return await this._update({assign_roles:t,message:a,...e})}async inviteMembers(t,a,e={}){return await this._update({invites:t,message:a,...e})}async removeMembers(t,a,e={}){return await this._update({remove_members:t,message:a,...e})}async demoteModerators(t,a,e={}){return await this._update({demote_moderators:t,message:a,...e})}async _update(t){const a=await this.getClient().post(this._channelURL(),t);return this.data=a.channel,a}async mute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/mute/channel",{channel_cid:this.cid,...t})}async unmute(t={}){return await this.getClient().post(this.getClient().baseURL+"/moderation/unmute/channel",{channel_cid:this.cid,...t})}async archive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for archiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!0}})).channel_member}async unarchive(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw Error("A user_id is required for unarchiving a channel");return(await this.partialUpdateMember(e,{set:{archived:!1}})).channel_member}async pin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for pinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!0}})).channel_member}async unpin(t={}){const a=this.getClient(),e=t.user_id||a.userID;if(!e)throw new Error("A user_id is required for unpinning a channel");return(await this.partialUpdateMember(e,{set:{pinned:!1}})).channel_member}muteStatus(){return this._checkInitialized(),this.getClient()._muteStatus(this.cid)}sendAction(t,a){if(this._checkInitialized(),!t)throw Error("Message id is missing");return this.getClient().post(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/action`,{message_id:t,form_data:a,id:this.id,type:this.type})}async keystroke(t,a){if(!this._isTypingIndicatorsEnabled())return;const e=new Date,n=this.lastTypingEvent&&e.getTime()-this.lastTypingEvent.getTime();this.lastKeyStroke=e,this.isTyping=!0,(n===null||n>2e3)&&(this.lastTypingEvent=new Date,await this.sendEvent({type:"typing.start",parent_id:t,...a||{}}))}async updateAIState(t,a,e={}){await this.sendEvent({...e,type:"ai_indicator.update",message_id:t,ai_state:a})}async clearAIIndicator(){await this.sendEvent({type:"ai_indicator.clear"})}async stopAIResponse(){await this.sendEvent({type:"ai_indicator.stop"})}async stopTyping(t,a){this._isTypingIndicatorsEnabled()&&(this.lastTypingEvent=null,this.isTyping=!1,await this.sendEvent({type:"typing.stop",parent_id:t,...a||{}}))}_isTypingIndicatorsEnabled(){var t,a,e,n,r;return!((t=this.getConfig())!=null&&t.typing_events)||!((a=this.getClient().wsConnection)!=null&&a.isHealthy)?!1:((r=(n=(e=this.getClient().user)==null?void 0:e.privacy_settings)==null?void 0:n.typing_indicators)==null?void 0:r.enabled)??!0}lastMessage(){let t=this.state.latestMessages.length-5;t<0&&(t=0);const a=this.state.latestMessages.length+1,e=this.state.latestMessages.slice(t,a);return e.sort((n,r)=>r.created_at.getTime()-n.created_at.getTime()),e[0]}async markRead(t={}){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/read",{...t})}async markUnread(t){var a;return this._checkInitialized(),!((a=this.getConfig())!=null&&a.read_events)&&!this.getClient()._isUsingServerAuth()?Promise.resolve(null):await this.getClient().post(this._channelURL()+"/unread",{...t})}clean(){this.lastKeyStroke&&new Date().getTime()-this.lastKeyStroke.getTime()>1e3&&this.isTyping&&AS(this.stopTyping(),"stop typing event"),this.state.clean()}async watch(t){const a={state:!0,watch:!0,presence:!1};await this.getClient().wsPromise,this.getClient()._hasConnectionID()||(a.watch=!1);const e={...a,...t},n=await this.query(e,"latest");return this.initialized=!0,this.data=n.channel,this._client.logger("info",`channel:watch() - started watching channel ${this.cid}`,{tags:["channel"],channel:this}),n}async stopWatching(){const t=await this.getClient().post(this._channelURL()+"/stop-watching",{});return this._client.logger("info",`channel:watch() - stopped watching channel ${this.cid}`,{tags:["channel"],channel:this}),t}async getReplies(t,a,e){const n=e?fa(e):void 0,r=await this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/replies`,{sort:n,...a});return r.messages&&this.state.addMessagesSorted(r.messages),r}async getPinnedMessages(t,a=[]){return await this.getClient().get(this._channelURL()+"/pinned_messages",{payload:{...t,sort:fa(a)}})}getReactions(t,a){return this.getClient().get(this.getClient().baseURL+`/messages/${encodeURIComponent(t)}/reactions`,{...a})}getMessagesById(t){return this.getClient().get(this._channelURL()+"/messages",{ids:t.join(",")})}lastRead(){const{userID:t}=this.getClient();if(t)return this.state.read[t]?this.state.read[t].last_read:null}_countMessageAsUnread(t){var a,e,n,r;return!(t.shadowed||t.silent||t.parent_id&&!t.show_in_channel||((a=t.user)==null?void 0:a.id)===this.getClient().userID||(e=t.user)!=null&&e.id&&this.getClient().userMuteStatus(t.user.id)||Array.isArray((n=this.data)==null?void 0:n.own_capabilities)&&!((r=this.data)!=null&&r.own_capabilities.includes("read-events"))||this.muteStatus().muted)}countUnread(t){if(!t)return this.state.unreadCount;let a=0;for(let e=0;e<this.state.latestMessages.length;e+=1){const n=this.state.latestMessages[e];n.created_at>t&&this._countMessageAsUnread(n)&&a++}return a}countUnreadMentions(){var n;const t=this.lastRead(),a=this.getClient().userID;let e=0;for(let r=0;r<this.state.latestMessages.length;r+=1){const o=this.state.latestMessages[r];this._countMessageAsUnread(o)&&(!t||o.created_at>t)&&((n=o.mentioned_users)!=null&&n.some(l=>l.id===a))&&e++}return e}async query(t={},a="current"){var d,h,m,p,y,b,E;await this.getClient().wsPromise;const e=((d=t.created_by)==null?void 0:d.id)??t.created_by_id??((m=(h=this._data)==null?void 0:h.created_by)==null?void 0:m.id)??((p=this._data)==null?void 0:p.created_by_id);this.getClient()._isUsingServerAuth()&&typeof e!="string"&&this.getClient().logger("warn","Either `created_by` (with `id` property) or `created_by_id` are missing from both `Channel._data` and `options` parameter");let n=`${this.getClient().baseURL}/channels/${encodeURIComponent(this.type)}`;this.id&&(n+=`/${encodeURIComponent(this.id)}`);const r=await this.getClient().post(n+"/query",{data:this._data,state:!0,...t});if(!this.id){this.id=r.channel.id,this.cid=r.channel.cid;const S=P0(this.type,r.members.map(C=>{var _;return C.user_id||((_=C.user)==null?void 0:_.id)||""}));S&&S in this.getClient().activeChannels&&delete this.getClient().activeChannels[S],!(this.cid in this.getClient().activeChannels)&&this.getClient()._cacheEnabled()&&(this.getClient().activeChannels[this.cid]=this)}this.getClient()._addChannelConfig(r.channel);const{messageSet:o}=this._initializeState(r,a);o.pagination={...o.pagination,...PS({parentSet:o,messagePaginationOptions:t==null?void 0:t.messages,requestedPageSize:((y=t==null?void 0:t.messages)==null?void 0:y.limit)??h4,returnedPage:r.messages,logger:this.getClient().logger})},this.getClient().polls.hydratePollCache(r.messages,!0),r.draft&&this.messageComposer.initState({composition:r.draft});const l=[...r.channel.own_capabilities||[]].sort().join()!==[...this.data&&Array.isArray((b=this.data)==null?void 0:b.own_capabilities)?this.data.own_capabilities:[]].sort().join();return this.data=r.channel,this.offlineMode=!1,l&&this.getClient().dispatchEvent({type:"capabilities.changed",cid:this.cid,own_capabilities:r.channel.own_capabilities}),this.getClient().dispatchEvent({type:"channels.queried",queriedChannels:{channels:[r],isLatestMessageSet:o.isLatest}}),(E=this.getClient().offlineDb)==null||E.executeQuerySafely(S=>{var C;return(C=S.upsertChannels)==null?void 0:C.call(S,{channels:[r],isLatestMessagesSet:o.isLatest})},{method:"upsertChannels"}),r}async banUser(t,a){return this._checkInitialized(),await this.getClient().banUser(t,{...a,type:this.type,id:this.id})}async hide(t=null,a=!1){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/hide`,{user_id:t,clear_history:a})}async show(t=null){return this._checkInitialized(),await this.getClient().post(`${this._channelURL()}/show`,{user_id:t})}async unbanUser(t){return this._checkInitialized(),await this.getClient().unbanUser(t,{type:this.type,id:this.id})}async shadowBan(t,a){return this._checkInitialized(),await this.getClient().shadowBan(t,{...a,type:this.type,id:this.id})}async removeShadowBan(t){return this._checkInitialized(),await this.getClient().removeShadowBan(t,{type:this.type,id:this.id})}async vote(t,a,e){return await this.getClient().castPollVote(t,a,e)}async removeVote(t,a,e){return await this.getClient().removePollVote(t,a,e)}async createDraft(t){return await this.getClient().post(this._channelURL()+"/draft",{message:t})}async deleteDraft({parent_id:t}={}){return await this.getClient().delete(this._channelURL()+"/draft",{parent_id:t})}async getDraft({parent_id:t}={}){return await this.getClient().get(this._channelURL()+"/draft",{parent_id:t})}on(t,a){const e=a?t:"all",n=a||t;return e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Attaching listener for ${e} event on channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e].push(n),{unsubscribe:()=>{this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(r=>r!==n)}}}off(t,a){const e=a?t:"all",n=a||t;e in this.listeners||(this.listeners[e]=[]),this._client.logger("info",`Removing listener for ${e} event from channel ${this.cid}`,{tags:["event","channel"],channel:this}),this.listeners[e]=this.listeners[e].filter(r=>r!==n)}_handleChannelEvent(t){var n,r,o,l,d,h,m,p,y,b,E,S,C,_,x,D,A,k,P,L,G,F,q,te,X,se,ee,j;const a=this;this._client.logger("info",`channel:_handleChannelEvent - Received event of type { ${t.type} } on ${this.cid}`,{tags:["event","channel"],channel:this});const e=a.state;switch(t.type){case"typing.start":(n=t.user)!=null&&n.id&&(e.typing[t.user.id]=t);break;case"typing.stop":(r=t.user)!=null&&r.id&&delete e.typing[t.user.id];break;case"message.read":(o=t.user)!=null&&o.id&&t.created_at&&(e.read[t.user.id]={last_read:new Date(t.created_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:0},((l=t.user)==null?void 0:l.id)===((d=this.getClient().user)==null?void 0:d.id)&&(e.unreadCount=0));break;case"user.watching.start":case"user.updated":(h=t.user)!=null&&h.id&&(e.watchers[t.user.id]=t.user);break;case"user.watching.stop":(m=t.user)!=null&&m.id&&delete e.watchers[t.user.id];break;case"message.deleted":t.message&&(this._extendEventWithOwnReactions(t),t.hard_delete?e.removeMessage(t.message):e.addMessageSorted(t.message,!1,!1),e.removeQuotedMessageReferences(t.message),t.message.pinned&&e.removePinnedMessage(t.message));break;case"message.new":if(t.message){const H=((p=t.user)==null?void 0:p.id)===((y=this.getClient().user)==null?void 0:y.id),R=t.message.parent_id&&!t.message.show_in_channel;if((this.state.isUpToDate||R)&&e.addMessageSorted(t.message,H),t.message.pinned&&e.addPinnedMessage(t.message),H||R)break;if((b=t.user)!=null&&b.id)for(const Y in e.read)Y===t.user.id?e.read[t.user.id]={last_read:new Date(t.created_at),user:t.user,unread_messages:0}:e.read[Y].unread_messages+=1;this._countMessageAsUnread(t.message)&&(e.unreadCount=e.unreadCount+1)}break;case"message.updated":case"message.undeleted":t.message&&(this._extendEventWithOwnReactions(t),e.addMessageSorted(t.message,!1,!1),e._updateQuotedMessageReferences({message:t.message}),t.message.pinned?e.addPinnedMessage(t.message):e.removePinnedMessage(t.message));break;case"channel.truncated":if((E=t.channel)!=null&&E.truncated_at){const H=+new Date(t.channel.truncated_at);e.messageSets.forEach((R,B)=>{R.messages.forEach(({created_at:Y,id:$})=>{H>+Y&&e.removeMessage({id:$,messageSetIndex:B})})}),e.pinnedMessages.forEach(({id:R,created_at:B})=>{H>+B&&e.removePinnedMessage({id:R})}),e.unreadCount=this.countUnread(new Date(t.channel.truncated_at))}else e.clearMessages(),e.unreadCount=0;t.message&&(e.addMessageSorted(t.message),t.message.pinned&&e.addPinnedMessage(t.message));break;case"member.added":case"member.updated":{const H={...t.member};H.pinned_at===null&&delete H.pinned_at,H.archived_at===null&&delete H.archived_at,H!=null&&H.user&&(e.members={...e.members,[H.user.id]:H},(S=a.data)!=null&&S.member_count&&t.type==="member.added"&&(a.data.member_count+=1));const R=this.getClient().userID;typeof R=="string"&&typeof((C=H==null?void 0:H.user)==null?void 0:C.id)=="string"&&H.user.id===R&&(e.membership=H);break}case"member.removed":if((_=t.user)!=null&&_.id){const H={...e.members};delete H[t.user.id],e.members=H,(x=a.data)!=null&&x.member_count&&(a.data.member_count=Math.max(a.data.member_count-1,0))}break;case"notification.mark_unread":{if(!(((D=t.user)==null?void 0:D.id)===((A=this.getClient().user)==null?void 0:A.id)&&t.user))break;const R=t.unread_messages??0;e.read[t.user.id]={first_unread_message_id:t.first_unread_message_id,last_read:new Date(t.last_read_at),last_read_message_id:t.last_read_message_id,user:t.user,unread_messages:R},e.unreadCount=R;break}case"channel.updated":if(t.channel){((k=t.channel)==null?void 0:k.frozen)!==void 0&&t.channel.frozen!==((P=a.data)==null?void 0:P.frozen)&&this.query({state:!1,messages:{limit:0},watchers:{limit:0}});const R={...t.channel,hidden:((L=t.channel)==null?void 0:L.hidden)??((G=a.data)==null?void 0:G.hidden),own_capabilities:((F=t.channel)==null?void 0:F.own_capabilities)??((q=a.data)==null?void 0:q.own_capabilities)};a.data=R}break;case"reaction.new":if(t.message&&t.reaction){const{message:H,reaction:R}=t;t.message=e.addReaction(R,H)}break;case"reaction.deleted":if(t.message&&t.reaction){const{message:H,reaction:R}=t;t.message=e.removeReaction(R,H)}break;case"reaction.updated":if(t.message&&t.reaction){const{message:H,reaction:R}=t;t.message=e.addReaction(R,H,!0)}break;case"channel.hidden":a.data={...a.data,hidden:!0},t.clear_history&&e.clearMessages();break;case"channel.visible":a.data={...a.data,hidden:!1},(te=this.getClient().offlineDb)==null||te.handleChannelVisibilityEvent({event:t});break;case"user.banned":if(!((X=t.user)!=null&&X.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!!t.shadow,banned:!t.shadow,user:{...((se=e.members[t.user.id])==null?void 0:se.user)||{},...t.user}};break;case"user.unbanned":if(!((ee=t.user)!=null&&ee.id))break;e.members[t.user.id]={...e.members[t.user.id]||{},shadow_banned:!1,banned:!1,user:{...((j=e.members[t.user.id])==null?void 0:j.user)||{},...t.user}};break}t.watcher_count!==void 0&&(a.state.watcher_count=t.watcher_count)}_checkInitialized(){if(!this.initialized&&!this.offlineMode&&!this.getClient()._isUsingServerAuth())throw Error(`Channel ${this.cid} hasn't been initialized yet. Make sure to call .watch() and wait for it to resolve`)}_initializeState(t,a="latest"){const{state:e,user:n,userID:r}=this.getClient();if(t.members){this._hydrateMembers({members:t.members});for(const d of t.members)d.user&&e.updateUserReference(d.user,this.cid)}this.state.membership=t.membership||{};const o=t.messages||[];this.state.messages||this.state.initMessages();const{messageSet:l}=this.state.addMessagesSorted(o,!1,!0,!0,a);if(this.state.pinnedMessages||(this.state.pinnedMessages=[]),this.state.addPinnedMessages(t.pinned_messages||[]),t.pending_messages&&(this.state.pending_messages=t.pending_messages),t.watcher_count!==void 0&&(this.state.watcher_count=t.watcher_count),t.watchers)for(const d of t.watchers)d&&(e.updateUserReference(d,this.cid),this.state.watchers[d.id]=d);if(r!=null){const d=this.state.last_message_at||new Date;n&&(this.state.read[n.id]={user:n,last_read:d,unread_messages:0})}if(t.read)for(const d of t.read)this.state.read[d.user.id]={last_read:new Date(d.last_read),last_read_message_id:d.last_read_message_id,unread_messages:d.unread_messages??0,user:d.user},d.user.id===(n==null?void 0:n.id)&&(this.state.unreadCount=this.state.read[d.user.id].unread_messages);return{messageSet:l}}_extendEventWithOwnReactions(t){if(!t.message)return;const a=this.state.findMessage(t.message.id,t.message.parent_id);a&&(t.message.own_reactions=a.own_reactions)}_hydrateMembers({members:t,overrideCurrentState:a=!0}){const e=t.reduce((n,r)=>(r.user&&(n[r.user.id]=r),n),{});a?this.state.members=e:!a&&t.length&&(this.state.members={...this.state.members,...e})}_disconnect(){this._client.logger("info",`channel:disconnect() - Disconnecting the channel ${this.cid}`,{tags:["connection","channel"],channel:this}),this.disconnected=!0,this.state.setIsUpToDate(!1)}},ex=class{constructor({client:t}){this.client=t,this.users={},this.userChannelReferences={}}updateUsers(t){for(const a of t)this.updateUser(a)}updateUser(t){t!=null&&this.client._cacheEnabled()&&(this.users[t.id]=t)}updateUserReference(t,a){t==null||!this.client._cacheEnabled()||(this.updateUser(t),this.userChannelReferences[t.id]||(this.userChannelReferences[t.id]={}),this.userChannelReferences[t.id][a]=!0)}deleteAllChannelReference(t){for(const a in this.userChannelReferences)delete this.userChannelReferences[a][t]}},Ko=null;typeof WebSocket<"u"?Ko=WebSocket:typeof MozWebSocket<"u"?Ko=MozWebSocket:typeof global<"u"?Ko=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ko=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ko=self.WebSocket||self.MozWebSocket);var wP=Ko,xP=class{constructor(){this.connectionStartTimestamp=null,this.wsTotalFailures=0,this.wsConsecutiveFailures=0,this.instanceClientId=el()}},Lc=async(t,a)=>{for(let n=0;n<3;n++){try{await Qc.post(`https://chat-insights.getstream.io/insights/${t}`,a)}catch{await Mi((n+1)*3e3);continue}break}};function SP(t,a){return{...a,...iE(t)}}function iE(t){var e;const{client:a}=t;return{ready_state:(e=t.ws)==null?void 0:e.readyState,url:t._buildUrl(),api_key:a.key,start_ts:a.insightMetrics.connectionStartTimestamp,end_ts:new Date().getTime(),auth_type:a.getAuthType(),token:a.tokenManager.token,user_id:a.userID,user_details:a._user,device:a.options.device,client_id:t.connectionID,ws_details:t.ws,ws_consecutive_failures:a.insightMetrics.wsConsecutiveFailures,ws_total_failures:a.insightMetrics.wsTotalFailures,request_id:t.requestID,online:typeof navigator<"u"?navigator==null?void 0:navigator.onLine:null,user_agent:typeof navigator<"u"?navigator==null?void 0:navigator.userAgent:null,instance_client_id:a.insightMetrics.instanceClientId}}function EP(t){return iE(t)}var CP=t=>t.code!==void 0,_P=t=>t.error!==void 0,IP=class{constructor({client:t}){this._buildUrl=()=>{const a=this.client._buildWSPayload(this.requestID),e=this.client.tokenManager.getToken(),n=this.client.options.wsUrlParams,r=new URLSearchParams(n);return r.set("json",a),r.set("api_key",this.client.key),r.set("authorization",`${e}`),r.set("stream-auth-type",this.client.getAuthType()),r.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${r.toString()}`},this.onlineStatusChanged=a=>{a.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1)):a.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=a=>{this.wsID===a&&this._log("onopen() - onopen callback",{wsID:a})},this.onmessage=(a,e)=>{var r,o;if(this.wsID!==a)return;this._log("onmessage() - onmessage callback",{event:e,wsID:a});const n=typeof e.data=="string"?JSON.parse(e.data):null;if(!this.isResolved&&n){if(this.isResolved=!0,n.error){(r=this.rejectPromise)==null||r.call(this,this._errorFromWSEvent(n,!1));return}(o=this.resolvePromise)==null||o.call(this,n),this._setHealth(!0)}this.lastEvent=new Date,n&&n.type==="health.check"&&this.scheduleNextPing(),this.client.handleEvent(e),this.scheduleConnectionCheck()},this.onclose=(a,e)=>{var n,r;if(this.wsID===a)if(this._log("onclose() - onclose callback - "+e.code,{event:e,wsID:a}),e.code===Rc.WS_CLOSED_SUCCESS){const o=new Error(`WS connection reject with error ${e.reason}`);o.reason=e.reason,o.code=e.code,o.wasClean=e.wasClean,o.target=e.target,(n=this.rejectPromise)==null||n.call(this,o),this._log(`onclose() - WS connection reject with error ${e.reason}`,{event:e})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(r=this.rejectPromise)==null||r.call(this,this._errorFromWSEvent(e)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:e}),this._reconnect()},this.onerror=(a,e)=>{var n;this.wsID===a&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(n=this.rejectPromise)==null||n.call(this,this._errorFromWSEvent(e)),this._log("onerror() - WS connection resulted into error",{event:e}),this._reconnect())},this._setHealth=a=>{if(a!==this.isHealthy){if(this.isHealthy=a,this.isHealthy){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(a,e=!0)=>{let n,r,o;CP(a)&&(n=a.code,r="unknown",o=a.reason),_P(a)&&(n=a.error.code,r=a.error.StatusCode,o=a.error.message),this._log(`_errorFromWSEvent() - WS failed with code ${n}`,{event:a},"warn");const l=new Error(`WS failed with code ${n} and reason - ${o}`);return l.code=n,l.StatusCode=r,l.isWSFailure=e,l},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpen=new Promise((a,e)=>{this.resolvePromise=a,this.rejectPromise=e})},this.scheduleNextPing=()=>{this.healthCheckTimeoutRef&&clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=setTimeout(()=>{var e;const a=[{type:"health.check",client_id:this.client.clientID}];try{(e=this.ws)==null||e.send(JSON.stringify(a))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{this.connectionCheckTimeoutRef&&clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const a=new Date;this.lastEvent&&a.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,TS(this.onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"connection:"+t,{tags:["connection"],...a})}setClient(t){this.client=t}async connect(t=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const a=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${a}`)}catch(a){this.isHealthy=!1,this.consecutiveFailures+=1;const e=a;if(e.code===Rc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!e.isWSFailure)throw new Error(JSON.stringify({code:e.code,StatusCode:e.StatusCode,message:e.message,isWSFailure:e.isWSFailure}))}return await this._waitForHealthy(t)}_waitForHealthy(t=15e3){return Promise.race([(async()=>{for(let e=0;e<=t;e+=50)try{return await this.connectionOpen}catch(n){if(e===t)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}));await Mi(50)}})(),(async()=>{throw await Mi(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),MS(this.onlineStatusChanged),this.isHealthy=!1,this.ws&&this.ws.removeAllListeners&&this.ws.removeAllListeners();let a;const{ws:e}=this;return e&&e.close&&e.readyState===e.OPEN?(a=new Promise(n=>{const r=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),n()};e.onclose=r,setTimeout(r,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),e.close(Rc.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),a=Promise.resolve()),delete this.ws,a}async _connect(){if(this.isConnecting||this.isDisconnected&&this.client.options.enableWSFallback)return;this.isConnecting=!0,this.requestID=el(),this.client.insightMetrics.connectionStartTimestamp=new Date().getTime();let t=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this._setupConnectionPromise();const a=this._buildUrl();this._log(`_connect() - Connecting to ${a}`,{wsURL:a,requestID:this.requestID}),this.ws=new wP(a),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const e=await this.connectionOpen;if(this.isConnecting=!1,e)return this.connectionID=e.connection_id,this.client.insightMetrics.wsConsecutiveFailures>0&&this.client.options.enableInsights&&(Lc("ws_success_after_failure",EP(this)),this.client.insightMetrics.wsConsecutiveFailures=0),e}catch(a){if(this.isConnecting=!1,this._log("_connect() - Error - ",a),this.client.options.enableInsights){this.client.insightMetrics.wsConsecutiveFailures++,this.client.insightMetrics.wsTotalFailures++;const e=SP(this,M4(a));Lc==null||Lc("ws_fatal",e)}throw a}}async _reconnect(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let a=t.interval;if(a||(a=vf(this.consecutiveFailures)),await Mi(a),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected&&this.client.options.enableWSFallback){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),await this.client.recoverState(),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(e){if(this.isHealthy=!1,this.consecutiveFailures+=1,e.code===Rc.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});e.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var t,a;this.wsID+=1;try{(t=this==null?void 0:this.ws)==null||t.removeAllListeners(),(a=this==null?void 0:this.ws)==null||a.close()}catch{}}},Vd=lu(zR()),tx=lu(jR());function oE(t,a,e={},n={}){if(typeof a!="string")throw new TypeError("userId should be a string");const r={user_id:a,...e};if(Vd.default==null||Vd.default.sign==null)throw Error("Unable to find jwt crypto, if you are getting this error is probably because you are trying to generate tokens on browser or React Native (or other environment where crypto functions are not available). Please Note: token should only be generated server-side.");const o=Object.assign({algorithm:"HS256",noTimestamp:!0},n);return r.iat&&(o.noTimestamp=!1),Vd.default.sign(r,t,o)}function nx(t,a={}){const e={server:!0},n=Object.assign({algorithm:"HS256",noTimestamp:!0},a);return Vd.default.sign(e,t,n)}function DP(t){const a=t.split(".");if(a.length!==3)return"";const e=a[1],n=WR(e);return JSON.parse(n).user_id}function AP(t){return["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",YR(JSON.stringify({user_id:t})),"devtoken"].join(".")}function TP(t,a,e){const n=Buffer.from(a,"utf8"),r=tx.default.createHmac("sha256",n).update(t).digest("hex");try{return tx.default.timingSafeEqual(Buffer.from(r),Buffer.from(e))}catch{return!1}}var MP=class{constructor(t){this.setTokenOrProvider=async(a,e)=>{this.validateToken(a,e),this.user=e,kg(a)&&(this.tokenProvider=a,this.type="provider"),typeof a=="string"&&(this.token=a,this.type="static"),!a&&this.user&&this.secret&&(this.token=oE(this.secret,e.id,{},{}),this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(a,e)=>{if(!(e&&e.anon&&!a)){if(!this.secret&&!a)throw new Error("User token can not be empty");if(a&&typeof a!="string"&&!kg(a))throw new Error("user token should either be a string or a function");if(typeof a=="string"){if(e.anon&&a==="")return;const n=DP(a);if(a!=null&&(n==null||n===""||n!==e.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(a,e)=>{if(this.type==="static")return a(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(n){return e(new Error(`Call to tokenProvider failed with message: ${n}`))}a(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&this.user.anon&&!this.token)return this.token;if(this.secret)return nx(this.secret);throw new Error("Both secret and user tokens are not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,t&&(this.secret=t),this.type="static",this.secret&&(this.token=nx(this.secret))}},NP={"-1":{name:"InternalSystemError",retryable:!0},2:{name:"AccessKeyError",retryable:!1},3:{name:"AuthenticationFailedError",retryable:!0},4:{name:"InputError",retryable:!1},6:{name:"DuplicateUsernameError",retryable:!1},9:{name:"RateLimitError",retryable:!0},16:{name:"DoesNotExistError",retryable:!1},17:{name:"NotAllowedError",retryable:!1},18:{name:"EventNotSupportedError",retryable:!1},19:{name:"ChannelFeatureNotSupportedError",retryable:!1},20:{name:"MessageTooLongError",retryable:!1},21:{name:"MultipleNestingLevelError",retryable:!1},22:{name:"PayloadTooBigError",retryable:!1},23:{name:"RequestTimeoutError",retryable:!0},24:{name:"MaxHeaderSizeExceededError",retryable:!1},40:{name:"AuthErrorTokenExpired",retryable:!1},41:{name:"AuthErrorTokenNotValidYet",retryable:!1},42:{name:"AuthErrorTokenUsedBeforeIssuedAt",retryable:!1},43:{name:"AuthErrorTokenSignatureInvalid",retryable:!1},44:{name:"CustomCommandEndpointMissingError",retryable:!1},45:{name:"CustomCommandEndpointCallError",retryable:!0},46:{name:"ConnectionIDNotFoundError",retryable:!1},60:{name:"CoolDownError",retryable:!0},69:{name:"ErrWrongRegion",retryable:!1},70:{name:"ErrQueryChannelPermissions",retryable:!1},71:{name:"ErrTooManyConnections",retryable:!0},99:{name:"AppSuspendedError",retryable:!1}};function RP(t){return t.code!==void 0}function ax(t){if(!t.code)return!1;const a=NP[`${t.code}`];return a?a.retryable:!1}function kP(t){return t.code===46}function LP(t){if(typeof t.isWSFailure=="boolean")return t.isWSFailure;try{return JSON.parse(t.message).isWSFailure}catch{return!1}}function PP(t){return!t.status||t.status<200||300<=t.status}var OP=class{constructor({client:t}){this._onlineStatusChanged=a=>{var e;if(this._log(`_onlineStatusChanged() - ${a.type}`),a.type==="offline"){this._setState("CLOSED"),(e=this.cancelToken)==null||e.cancel("disconnect() is called"),this.cancelToken=void 0;return}a.type==="online"&&this.state==="CLOSED"&&this.connect(!0)},this._req=async(a,e,n)=>{var r;!this.cancelToken&&!a.close&&(this.cancelToken=Qc.CancelToken.source());try{const o=await this.client.doAxiosRequest("get",this.client.baseURL.replace(":3030",":8900")+"/longpoll",void 0,{config:{...e,cancelToken:(r=this.cancelToken)==null?void 0:r.token},params:a});return this.consecutiveFailures=0,o}catch(o){if(this.consecutiveFailures+=1,n&&ax(o))return this._log("_req() - Retryable error, retrying request"),await Mi(vf(this.consecutiveFailures)),this._req(a,e,n);throw o}},this._poll=async()=>{var a;for(;this.state==="CONNECTED";)try{const e=await this._req({},{timeout:3e4},!0);if((a=e.events)!=null&&a.length)for(let n=0;n<e.events.length;n++)this.client.dispatchEvent(e.events[n])}catch(e){if(Qc.isCancel(e)){this._log("_poll() - axios canceled request");return}if(kP(e)){this._log("_poll() - ConnectionID error, connecting without ID..."),this._setState("DISCONNECTED"),this.connect(!0);return}if(RP(e)&&!ax(e)){this._setState("CLOSED");return}await Mi(vf(this.consecutiveFailures))}},this.connect=async(a=!1)=>{if(this.state==="CONNECTING"){this._log("connect() - connecting already in progress",{reconnect:a},"warn");return}if(this.state==="CONNECTED"){this._log("connect() - already connected and polling",{reconnect:a},"warn");return}this._setState("CONNECTING"),this.connectionID=void 0;try{const{event:e}=await this._req({json:this.client._buildWSPayload()},{timeout:8e3},a);return this._setState("CONNECTED"),this.connectionID=e.connection_id,this.client.dispatchEvent(e),this._poll(),a&&this.client.recoverState(),e}catch(e){throw this._setState("CLOSED"),e}},this.isHealthy=()=>!!this.connectionID&&this.state==="CONNECTED",this.disconnect=async(a=2e3)=>{var n;MS(this._onlineStatusChanged),this._setState("DISCONNECTED"),(n=this.cancelToken)==null||n.cancel("disconnect() is called"),this.cancelToken=void 0;const e=this.connectionID;this.connectionID=void 0;try{await this._req({close:!0,connection_id:e},{timeout:a},!1),this._log("disconnect() - Closed connectionID")}catch(r){this._log("disconnect() - Failed",{err:r},"error")}},this.client=t,this.state="INIT",this.consecutiveFailures=0,TS(this._onlineStatusChanged)}_log(t,a={},e="info"){this.client.logger(e,"WSConnectionFallback:"+t,{tags:["connection_fallback","connection"],...a})}_setState(t){this._log(`_setState() - ${t}`),this.state==="CONNECTING"&&t==="CONNECTED"&&this.client.dispatchEvent({type:"connection.changed",online:!0}),(t==="CLOSED"||t==="DISCONNECTED")&&this.client.dispatchEvent({type:"connection.changed",online:!1}),this.state=t}},rx=class{constructor(t,a,e,n){this.client=t,this.type=a,this.id=e,this.data=n}create(){var a,e,n,r,o;const t={name:(a=this.data)==null?void 0:a.name,filter:(e=this.data)==null?void 0:e.filter,description:(n=this.data)==null?void 0:n.description,all_sender_channels:(r=this.data)==null?void 0:r.all_sender_channels,all_users:(o=this.data)==null?void 0:o.all_users};return this.client.createSegment(this.type,this.id,t)}verifySegmentId(){if(!this.id)throw new Error("Segment id is missing. Either create the segment using segment.create() or set the id during instantiation - const segment = client.segment(id)")}get(){return this.verifySegmentId(),this.client.getSegment(this.id)}update(t){return this.verifySegmentId(),this.client.updateSegment(this.id,t)}addTargets(t){return this.verifySegmentId(),this.client.addSegmentTargets(this.id,t)}removeTargets(t){return this.verifySegmentId(),this.client.removeSegmentTargets(this.id,t)}delete(){return this.verifySegmentId(),this.client.deleteSegment(this.id)}targetExists(t){return this.verifySegmentId(),this.client.segmentTargetExists(this.id,t)}queryTargets(t={},a=[],e={}){return this.verifySegmentId(),this.client.querySegmentTargets(this.id,t,a,e)}},Nd={user:"stream:user",message:"stream:chat:v1:message",userprofile:"stream:v1:user_profile"},BP=class{constructor(t){this.client=t}flagUser(t,a,e={}){return this.flag(Nd.user,t,"",a,e)}flagMessage(t,a,e={}){return this.flag(Nd.message,t,"",a,e)}async flag(t,a,e,n,r={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/flag",{entity_type:t,entity_id:a,entity_creator_id:e,reason:n,...r})}async muteUser(t,a={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/mute",{target_ids:[t],...a})}async unmuteUser(t,a){return await this.client.post(this.client.baseURL+"/api/v2/moderation/unmute",{target_ids:[t],...a})}async getUserModerationReport(t,a={}){return await this.client.get(this.client.baseURL+"/api/v2/moderation/user_report",{user_id:t,...a})}async queryReviewQueue(t={},a=[],e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/review_queue",{filter:t,sort:fa(a),...e})}async upsertConfig(t){return await this.client.post(this.client.baseURL+"/api/v2/moderation/config",t)}async getConfig(t,a){return await this.client.get(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async deleteConfig(t,a){return await this.client.delete(this.client.baseURL+"/api/v2/moderation/config/"+t,a)}async queryConfigs(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/configs",{filter:t,sort:a,...e})}async submitAction(t,a,e={}){return await this.client.post(this.client.baseURL+"/api/v2/moderation/submit_action",{action_type:t,item_id:a,...e})}async check(t,a,e,n,r,o){return await this.client.post(this.client.baseURL+"/api/v2/moderation/check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,config_key:r,options:o})}async checkUserProfile(t,a){if(!a.username&&!a.image)throw new Error("Either username or image must be provided");const e={};return a.username&&(e.texts=[a.username]),a.image&&(e.images=[a.image]),await this.check(Nd.userprofile,t,t,e,"user_profile:default",{force_sync:!0,test_mode:!0})}async addCustomFlags(t,a,e,n,r){return await this.client.post(this.client.baseURL+"/api/v2/moderation/custom_check",{entity_type:t,entity_id:a,entity_creator_id:e,moderation_payload:n,flags:r})}async addCustomMessageFlags(t,a){return await this.addCustomFlags(Nd.message,t,"",{},a)}},UP=1e3,sx=25,ix={active:!1,isThreadOrderStale:!1,threads:[],unreadThreadCount:0,unseenThreadIds:[],lastConnectionDropAt:null,pagination:{isLoading:!1,isLoadingNext:!1,nextCursor:null},ready:!1},zP=class extends du{constructor({client:t}){super(),this.resetState=()=>{this.state.next(ix)},this.activate=()=>{this.state.partialNext({active:!0})},this.deactivate=()=>{this.state.partialNext({active:!1})},this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeUnreadThreadsCountChange()),this.addUnsubscribeFunction(this.subscribeManageThreadSubscriptions()),this.addUnsubscribeFunction(this.subscribeReloadOnActivation()),this.addUnsubscribeFunction(this.subscribeNewReplies()),this.addUnsubscribeFunction(this.subscribeRecoverAfterConnectionDrop()),this.addUnsubscribeFunction(this.subscribeChannelDeleted()))},this.subscribeUnreadThreadsCountChange=()=>{const{unread_threads:a=0}=this.client.user??{};this.state.partialNext({unreadThreadCount:a});const e=["health.check","notification.mark_read","notification.thread_message_new","notification.channel_deleted"].map(n=>this.client.on(n,r=>{const{unread_threads:o}=r.me??r;typeof o=="number"&&this.state.partialNext({unreadThreadCount:o})}).unsubscribe);return()=>e.forEach(n=>n())},this.subscribeChannelDeleted=()=>this.client.on("notification.channel_deleted",a=>{const{cid:e}=a,{threads:n}=this.state.getLatestValue(),r=n.filter(o=>o.channel.cid!==e);this.state.partialNext({threads:r})}).unsubscribe,this.subscribeManageThreadSubscriptions=()=>this.state.subscribeWithSelector(a=>({threads:a.threads}),({threads:a},e)=>{const{threads:n=[]}=e??{},r=n.filter(o=>o!==this.threadsById[o.id]);a.forEach(o=>o.registerSubscriptions()),r.forEach(o=>o.unregisterSubscriptions())}),this.subscribeReloadOnActivation=()=>this.state.subscribeWithSelector(a=>({active:a.active}),({active:a})=>{a&&this.reload()}),this.subscribeNewReplies=()=>this.client.on("notification.thread_message_new",a=>{var o;const e=(o=a.message)==null?void 0:o.parent_id;if(!e)return;const{unseenThreadIds:n,ready:r}=this.state.getLatestValue();r&&(this.threadsById[e]?this.state.partialNext({isThreadOrderStale:!0}):n.includes(e)||this.state.partialNext({unseenThreadIds:n.concat(e)}))}).unsubscribe,this.subscribeRecoverAfterConnectionDrop=()=>{const a=this.client.on("connection.changed",r=>{r.online===!1&&this.state.next(o=>o.lastConnectionDropAt?o:{...o,lastConnectionDropAt:new Date})}).unsubscribe,e=LS(()=>{const{lastConnectionDropAt:r}=this.state.getLatestValue();r&&this.reload({force:!0})},UP,{trailing:!0}),n=this.client.on("connection.recovered",e).unsubscribe;return()=>{a(),n()}},this.unregisterSubscriptions=()=>(this.state.getLatestValue().threads.forEach(a=>a.unregisterSubscriptions()),super.unregisterSubscriptions()),this.reload=async({force:a=!1}={})=>{const{threads:e,unseenThreadIds:n,isThreadOrderStale:r,pagination:o,ready:l}=this.state.getLatestValue();if(o.isLoading||!a&&l&&!n.length&&!r)return;const d=e.length+n.length;try{this.state.next(p=>({...p,pagination:{...p.pagination,isLoading:!0}}));const h=await this.queryThreads({limit:Math.min(d,sx)||sx}),m=[];for(const p of h.threads){const y=this.threadsById[p.id];y?(m.push(y),y.hasStaleState&&y.hydrateState(p)):m.push(p)}this.state.next(p=>({...p,threads:m,unseenThreadIds:[],isThreadOrderStale:!1,pagination:{...p.pagination,isLoading:!1,nextCursor:h.next??null},ready:!0}))}catch(h){this.client.logger("error",h.message),this.state.next(m=>({...m,pagination:{...m.pagination,isLoading:!1}}))}},this.queryThreads=(a={})=>this.client.queryThreads({limit:25,participant_limit:10,reply_limit:10,watch:!0,...a}),this.loadNextPage=async(a={})=>{const{pagination:e}=this.state.getLatestValue();if(!(e.isLoadingNext||!e.nextCursor))try{this.state.partialNext({pagination:{...e,isLoadingNext:!0}});const n=await this.queryThreads({...a,next:e.nextCursor});this.state.next(r=>({...r,threads:n.threads.length?r.threads.concat(n.threads):r.threads,pagination:{...r.pagination,nextCursor:n.next??null,isLoadingNext:!1}}))}catch(n){this.client.logger("error",n.message),this.state.next(r=>({...r,pagination:{...r.pagination,isLoadingNext:!1}}))}},this.client=t,this.state=new ba(ix),this.threadsByIdGetterCache={threads:[],threadsById:{}}}get threadsById(){const{threads:t}=this.state.getLatestValue();if(t===this.threadsByIdGetterCache.threads)return this.threadsByIdGetterCache.threadsById;const a=t.reduce((e,n)=>(e[n.id]=n,e),{});return this.threadsByIdGetterCache.threads=t,this.threadsByIdGetterCache.threadsById=a,a}},jP=t=>t.type==="poll.updated",FP=t=>t.type==="poll.closed",HP=t=>t.type==="poll.vote_casted",YP=t=>t.type==="poll.vote_changed",WP=t=>t.type==="poll.vote_removed",Vi=t=>!!(t!=null&&t.answer_text),ox=class{constructor({client:t,poll:a}){this.getInitialStateFromPollResponse=e=>{const{own_votes:n,id:r,...o}=e,{ownAnswer:l,ownVotes:d}=(n==null?void 0:n.reduce((h,m)=>(Vi(m)?h.ownAnswer=m:h.ownVotes.push(m),h),{ownVotes:[]}))??{ownVotes:[]};return{...o,lastActivityAt:new Date,maxVotedOptionIds:Ic(o.vote_counts_by_option),ownAnswer:l,ownVotesByOptionId:GP(d)}},this.upsertOfflineDb=()=>{var e;(e=this.client.offlineDb)==null||e.executeQuerySafely(n=>n.upsertPoll({poll:ZP(this)}),{method:"upsertPoll"})},this.reinitializeState=e=>{this.state.partialNext(this.getInitialStateFromPollResponse(e))},this.handlePollUpdated=e=>{var o;if((o=e.poll)!=null&&o.id&&e.poll.id!==this.id||!jP(e))return;const{id:n,...r}=$P(e.poll);this.state.partialNext({...r,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb()},this.handlePollClosed=e=>{var n;(n=e.poll)!=null&&n.id&&e.poll.id!==this.id||FP(e)&&(this.state.partialNext({is_closed:!0,lastActivityAt:new Date(e.created_at)}),this.upsertOfflineDb())},this.handleVoteCasted=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!HP(e))return;const n=this.data,r=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer;const d=n.ownVotesByOptionId;let h=n.maxVotedOptionIds;r&&(Vi(e.poll_vote)?l=e.poll_vote:e.poll_vote.option_id&&(d[e.poll_vote.option_id]=e.poll_vote)),Vi(e.poll_vote)?o=[e.poll_vote,...o]:h=Ic(e.poll.vote_counts_by_option);const m=tg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:d,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.handleVoteChanged=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!YP(e))return;const n=this.data,r=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer,d=n.ownVotesByOptionId,h=n.maxVotedOptionIds;r?Vi(e.poll_vote)?(o=[e.poll_vote,...o.filter(y=>y.id!==e.poll_vote.id)],l=e.poll_vote):e.poll_vote.option_id&&(e.poll.enforce_unique_vote?d={[e.poll_vote.option_id]:e.poll_vote}:(d=Object.entries(d).reduce((y,[b,E])=>(b!==e.poll_vote.option_id&&E.id===e.poll_vote.id||(y[b]=E),y),{}),d[e.poll_vote.option_id]=e.poll_vote),(l==null?void 0:l.id)===e.poll_vote.id&&(l=void 0),h=Ic(e.poll.vote_counts_by_option)):Vi(e.poll_vote)?o=[e.poll_vote,...o]:h=Ic(e.poll.vote_counts_by_option);const m=tg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:d,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.handleVoteRemoved=e=>{var p;if((p=e.poll)!=null&&p.id&&e.poll.id!==this.id||!WP(e))return;const n=this.data,r=e.poll_vote.user_id===this.client.userID;let o=[...n.latest_answers],l=n.ownAnswer;const d={...n.ownVotesByOptionId};let h=n.maxVotedOptionIds;Vi(e.poll_vote)?(o=o.filter(y=>y.id!==e.poll_vote.id),r&&(l=void 0)):(h=Ic(e.poll.vote_counts_by_option),r&&e.poll_vote.option_id&&delete d[e.poll_vote.option_id]);const m=tg(e.poll);this.state.partialNext({...m,latest_answers:o,lastActivityAt:new Date(e.created_at),ownAnswer:l,ownVotesByOptionId:d,maxVotedOptionIds:h}),this.upsertOfflineDb()},this.query=async e=>{const{poll:n}=await this.client.getPoll(e);return this.state.partialNext({...n,lastActivityAt:new Date}),n},this.update=async e=>await this.client.updatePoll({...e,id:this.id}),this.partialUpdate=async e=>await this.client.partialUpdatePoll(this.id,e),this.close=async()=>await this.client.closePoll(this.id),this.delete=async()=>await this.client.deletePoll(this.id),this.createOption=async e=>await this.client.createPollOption(this.id,e),this.updateOption=async e=>await this.client.updatePollOption(this.id,e),this.deleteOption=async e=>await this.client.deletePollOption(this.id,e),this.castVote=async(e,n)=>{const{max_votes_allowed:r,ownVotesByOptionId:o}=this.data;if(r&&r===Object.keys(o).length){let d=Object.values(o)[0];Object.values(o).slice(1).forEach(h=>{(!(d!=null&&d.created_at)||new Date(h.created_at)<new Date(d.created_at))&&(d=h)}),d!=null&&d.id&&await this.removeVote(d.id,n)}return await this.client.castPollVote(n,this.id,{option_id:e})},this.removeVote=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.addAnswer=async(e,n)=>await this.client.addPollAnswer(n,this.id,e),this.removeAnswer=async(e,n)=>await this.client.removePollVote(n,this.id,e),this.queryAnswers=async e=>await this.client.queryPollAnswers(this.id,e.filter,e.sort,e.options),this.queryOptionVotes=async e=>await this.client.queryPollVotes(this.id,e.filter,e.sort,e.options),this.client=t,this.id=a.id,this.state=new ba(this.getInitialStateFromPollResponse(a))}get data(){return this.state.getLatestValue()}};function Ic(t){let a=0,e=[];for(const[n,r]of Object.entries(t??{}))r>a?(e=[n],a=r):r===a&&e.push(n);return e}function GP(t){return t?t.reduce((a,e)=>(Vi(e)||!e.option_id||(a[e.option_id]=e),a),{}):{}}function $P(t){return{allow_answers:t.allow_answers,allow_user_suggested_options:t.allow_user_suggested_options,description:t.description,enforce_unique_vote:t.enforce_unique_vote,id:t.id,is_closed:t.is_closed,max_votes_allowed:t.max_votes_allowed,name:t.name,options:t.options,voting_visibility:t.voting_visibility}}function ZP(t){const{lastActivityAt:a,maxVotedOptionIds:e,ownVotesByOptionId:n,ownAnswer:r,...o}=t.data,l=[...Object.values(n),...r?[r]:[]].sort((d,h)=>Date.parse(d.created_at)-Date.parse(h.created_at));return{...o,own_votes:l,id:t.id}}function tg(t){return{answers_count:t.answers_count,latest_votes_by_option:t.latest_votes_by_option,vote_count:t.vote_count,vote_counts_by_option:t.vote_counts_by_option}}var qP=class extends du{constructor({client:t}){super(),this.pollCache=new Map,this.fromState=a=>this.pollCache.get(a),this.registerSubscriptions=()=>{this.hasSubscriptions||(this.addUnsubscribeFunction(this.subscribeMessageNew()),this.addUnsubscribeFunction(this.subscribePollUpdated()),this.addUnsubscribeFunction(this.subscribePollClosed()),this.addUnsubscribeFunction(this.subscribeVoteCasted()),this.addUnsubscribeFunction(this.subscribeVoteChanged()),this.addUnsubscribeFunction(this.subscribeVoteRemoved()))},this.createPoll=async a=>{const{poll:e}=await this.client.createPoll(a);return new ox({client:this.client,poll:e})},this.getPoll=async a=>{const e=this.fromState(a);if(e)return this.client.getPoll(a).then(({poll:r})=>this.setOrOverwriteInCache(r,!0)),e;const{poll:n}=await this.client.getPoll(a);return this.setOrOverwriteInCache(n),this.fromState(a)},this.queryPolls=async(a,e=[],n={})=>{const{polls:r,next:o}=await this.client.queryPolls(a,e,n);return{polls:r.map(d=>(this.setOrOverwriteInCache(d,!0),this.fromState(d.id))),next:o}},this.hydratePollCache=(a,e)=>{for(const n of a){if(!n.poll)continue;const r=n.poll;this.setOrOverwriteInCache(r,e)}},this.setOrOverwriteInCache=(a,e)=>{if(!this.client._cacheEnabled())return;const n=this.fromState(a.id);if(n)e&&n.reinitializeState(a);else{const r=new ox({client:this.client,poll:a});this.pollCache.set(r.id,r)}},this.subscribePollUpdated=()=>this.client.on("poll.updated",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollUpdated(a))}).unsubscribe,this.subscribePollClosed=()=>this.client.on("poll.closed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handlePollClosed(a))}).unsubscribe,this.subscribeVoteCasted=()=>this.client.on("poll.vote_casted",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteCasted(a))}).unsubscribe,this.subscribeVoteChanged=()=>this.client.on("poll.vote_changed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteChanged(a))}).unsubscribe,this.subscribeVoteRemoved=()=>this.client.on("poll.vote_removed",a=>{var e,n;(e=a.poll)!=null&&e.id&&((n=this.fromState(a.poll.id))==null||n.handleVoteRemoved(a))}).unsubscribe,this.subscribeMessageNew=()=>this.client.on("message.new",a=>{const{message:e}=a;if(e){const n=Ha(e);this.hydratePollCache([n])}}).unsubscribe,this.client=t}get data(){return this.pollCache}},lx={"channel.deleted":"channelDeletedHandler","channel.hidden":"channelHiddenHandler","channel.truncated":"channelTruncatedHandler","channel.updated":"channelUpdatedHandler","channel.visible":"channelVisibleHandler","message.new":"newMessageHandler","member.updated":"memberUpdatedHandler","notification.added_to_channel":"notificationAddedToChannelHandler","notification.message_new":"notificationNewMessageHandler","notification.removed_from_channel":"notificationRemovedFromChannelHandler"},QP={abortInFlightQuery:!1,allowNotLoadedChannelPromotionForEvent:{"channel.visible":!0,"message.new":!0,"notification.added_to_channel":!0,"notification.message_new":!0},lockChannelOrder:!1},ng={limit:10,offset:0},VP=class extends du{constructor({client:t,eventHandlerOverrides:a={},options:e={}}){super(),this.eventHandlers=new Map,this.eventHandlerOverrides=new Map,this.options={},this.stateOptions={},this.setChannels=n=>{var d;this.state.next(h=>{const{channels:m}=h,p=FS(n)?n(m):n;return m===p?h:{...h,channels:p}});const{channels:r,pagination:{filters:o,sort:l}}=this.state.getLatestValue();(d=this.client.offlineDb)==null||d.executeQuerySafely(h=>h.upsertCidsForQuery({cids:r.map(m=>m.cid),filters:o,sort:l}),{method:"upsertCidsForQuery"})},this.setEventHandlerOverrides=(n={})=>{const r=Object.entries(n).reduce((o,[l,d])=>(d&&(o[l]=d),o),{});this.eventHandlerOverrides=new Map(Object.entries(r))},this.setOptions=(n={})=>{this.options={...QP,...n}},this.executeChannelsQuery=async(n,r=0)=>{var y;const{filters:o,sort:l,options:d,stateOptions:h}=n,{offset:m,limit:p}={...ng,...d};try{const b=await this.client.queryChannels(o,l,d,h),E=m+((b==null?void 0:b.length)??0),S={...d,offset:E},{pagination:C}=this.state.getLatestValue();this.state.partialNext({channels:b,pagination:{...C,hasNext:((b==null?void 0:b.length)??0)>=p,isLoading:!1,options:S},initialized:!0,error:void 0}),(y=this.client.offlineDb)==null||y.executeQuerySafely(_=>_.upsertCidsForQuery({cids:b.map(x=>x.cid),filters:C.filters,sort:C.sort}),{method:"upsertCidsForQuery"})}catch(b){if(r>=b4){console.warn(b);const E=new Error(`Maximum number of retries reached in queryChannels. Last error message is: ${b}`);this.state.partialNext({error:E});return}return await Mi(w4),this.executeChannelsQuery(n,r+1)}},this.queryChannels=async(n,r=[],o={},l={})=>{var y,b;const{pagination:{isLoading:d,filters:h},initialized:m}=this.state.getLatestValue();if(d&&!this.options.abortInFlightQuery&&JSON.stringify(h)===JSON.stringify(n))return;const p={filters:n,sort:r,options:o,stateOptions:l};try{if(this.stateOptions=l,this.state.next(E=>({...E,pagination:{...E.pagination,isLoading:!0,isLoadingNext:!1,filters:n,sort:r,options:o},error:void 0})),(y=this.client.offlineDb)!=null&&y.getChannelsForQuery&&((b=this.client.user)!=null&&b.id)){if(!m){const E=await this.client.offlineDb.getChannelsForQuery({userId:this.client.user.id,filters:n,sort:r});if(E){const S=this.client.hydrateActiveChannels(E,{offlineMode:!0,skipInitialization:[]});this.state.partialNext({channels:S})}}if(!this.client.offlineDb.syncManager.syncStatus){this.client.offlineDb.syncManager.scheduleSyncStatusChangeCallback(this.id,async()=>{await this.executeChannelsQuery(p)});return}}await this.executeChannelsQuery(p)}catch(E){throw this.client.logger("error",E.message),this.state.next(S=>({...S,pagination:{...S.pagination,isLoading:!1}})),E}},this.loadNext=async()=>{const{pagination:n,initialized:r}=this.state.getLatestValue(),{filters:o,sort:l,options:d,isLoadingNext:h,hasNext:m}=n;if(!(!r||h||!m))try{const{offset:p,limit:y}={...ng,...d};this.state.partialNext({pagination:{...n,isLoading:!1,isLoadingNext:!0}});const b=await this.client.queryChannels(o,l,d,this.stateOptions),{channels:E}=this.state.getLatestValue(),S=p+((b==null?void 0:b.length)??0),C={...d,offset:S};this.state.partialNext({channels:P4([...E||[],...b],"cid"),pagination:{...n,hasNext:((b==null?void 0:b.length)??0)>=y,isLoading:!1,isLoadingNext:!1,options:C}})}catch(p){throw this.client.logger("error",p.message),this.state.next(y=>({...y,pagination:{...y.pagination,isLoadingNext:!1}})),p}},this.notificationAddedToChannelHandler=async n=>{var y;const{id:r,type:o,members:l}=(n==null?void 0:n.channel)??{};if(!o||!((y=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&y["notification.added_to_channel"]))return;const d=await $p({client:this.client,id:r,members:l==null?void 0:l.reduce((b,{user:E,user_id:S})=>{const C=S||(E==null?void 0:E.id);return C&&b.push(C),b},[]),type:o}),{pagination:h,channels:m}=this.state.getLatestValue();if(!m)return;const{sort:p}=h??{};this.setChannels(Dd({channels:m,channelToMove:d,sort:p}))},this.channelDeletedHandler=n=>{const{channels:r}=this.state.getLatestValue();if(!r)return;const o=[...r],l=o.findIndex(d=>{var h;return d.cid===(n.cid||((h=n.channel)==null?void 0:h.cid))});l<0||(o.splice(l,1),this.setChannels(o))},this.channelHiddenHandler=this.channelDeletedHandler,this.newMessageHandler=n=>{var x;const{pagination:r,channels:o}=this.state.getLatestValue();if(!o)return;const{filters:l,sort:d}=r??{},h=n.channel_type,m=n.channel_id;if(!h||!m)return;const p=this.client.channel(h,m),y=o.indexOf(p),b=y>=0,E=bf(p),S=_d(p),C=Id(l),_=Pg(d);C&&S&&!l.archived||C&&!S&&l.archived||_&&E||this.options.lockChannelOrder||!b&&!((x=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&x["message.new"])||this.setChannels(Dd({channels:o,channelToMove:p,channelToMoveIndexWithinChannels:y,sort:d}))},this.notificationNewMessageHandler=async n=>{var E;const{id:r,type:o}=(n==null?void 0:n.channel)??{};if(!r||!o)return;const l=await $p({client:this.client,id:r,type:o}),{channels:d,pagination:h}=this.state.getLatestValue(),{filters:m,sort:p}=h??{},y=Id(m),b=_d(l);!d||y&&b&&!m.archived||y&&!b&&m.archived||!((E=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&E["notification.message_new"])||this.setChannels(Dd({channels:d,channelToMove:l,sort:p}))},this.channelVisibleHandler=async n=>{var E;const{channel_type:r,channel_id:o}=n;if(!r||!o)return;const l=await $p({client:this.client,id:n.channel_id,type:n.channel_type}),{channels:d,pagination:h}=this.state.getLatestValue(),{sort:m,filters:p}=h??{},y=Id(p),b=_d(l);!d||y&&b&&!p.archived||y&&!b&&p.archived||!((E=this.options.allowNotLoadedChannelPromotionForEvent)!=null&&E["channel.visible"])||this.setChannels(Dd({channels:d,channelToMove:l,sort:m}))},this.notificationRemovedFromChannelHandler=this.channelDeletedHandler,this.memberUpdatedHandler=n=>{var P;const{pagination:r,channels:o}=this.state.getLatestValue(),{filters:l,sort:d}=r;if(!((P=n.member)!=null&&P.user)||n.member.user.id!==this.client.userID||!n.channel_type||!n.channel_id)return;const h=n.channel_type,m=n.channel_id,p=Pg(d),y=Id(l),b=OS({atIndex:0,sort:d,targetKey:"pinned_at"});if(!o||!p&&!y||this.options.lockChannelOrder)return;const E=this.client.channel(h,m),S=o.indexOf(E),C=S>=0,_=bf(E),x=_d(E),D=[...o];if(C&&D.splice(S,1),y&&!x&&(l!=null&&l.archived)||y&&x&&!(l!=null&&l.archived)){this.setChannels(D);return}let A=null;(b===1||b===-1&&!_)&&(A=BS({channels:D}));const k=typeof A=="number"?A+1:0;o[k]!==E&&(D.splice(k,0,E),this.setChannels(D))},this.subscriptionOrOverride=n=>{const r=lx[n.type],o=this.eventHandlers.get(r),l=this.eventHandlerOverrides.get(r);if(l&&typeof l=="function"){l(this.setChannels,n);return}o&&typeof o=="function"&&o(n)},this.registerSubscriptions=()=>{if(!this.hasSubscriptions)for(const n of Object.keys(lx))this.addUnsubscribeFunction(this.client.on(n,this.subscriptionOrOverride).unsubscribe)},this.id=`channel-manager-${wr()}`,this.client=t,this.state=new ba({channels:[],pagination:{isLoading:!1,isLoadingNext:!1,hasNext:!1,filters:{},sort:{},options:ng},initialized:!1,error:void 0}),this.setEventHandlerOverrides(a),this.setOptions(e),this.eventHandlers=new Map(Object.entries({channelDeletedHandler:this.channelDeletedHandler,channelHiddenHandler:this.channelHiddenHandler,channelVisibleHandler:this.channelVisibleHandler,memberUpdatedHandler:this.memberUpdatedHandler,newMessageHandler:this.newMessageHandler,notificationAddedToChannelHandler:this.notificationAddedToChannelHandler,notificationNewMessageHandler:this.notificationNewMessageHandler,notificationRemovedFromChannelHandler:this.notificationRemovedFromChannelHandler}))}},XP={error:1e4,warning:5e3,info:3e3,success:3e3},JP=class{constructor(t={}){this.timeouts=new Map,this.store=new ba({notifications:[]}),this.config={...t,durations:t.durations||XP}}get notifications(){return this.store.getLatestValue().notifications}get warning(){return this.notifications.filter(t=>t.severity==="warning")}get error(){return this.notifications.filter(t=>t.severity==="error")}get info(){return this.notifications.filter(t=>t.severity==="info")}get success(){return this.notifications.filter(t=>t.severity==="success")}add({message:t,origin:a,options:e={}}){const n=wr(),r=Date.now(),o={id:n,message:t,origin:a,severity:e.severity||"info",createdAt:r,expiresAt:e.duration?r+e.duration:void 0,autoClose:e.autoClose??!0,actions:e.actions,metadata:e.metadata};if(this.store.partialNext({notifications:[...this.store.getLatestValue().notifications,o]}),o.autoClose&&o.expiresAt){const l=setTimeout(()=>{this.remove(n)},e.duration||this.config.durations[o.severity]);this.timeouts.set(n,l)}return n}addError({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"error"}})}addWarning({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"warning"}})}addInfo({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"info"}})}addSuccess({message:t,origin:a,options:e}){return this.add({message:t,origin:a,options:{...e,severity:"success"}})}remove(t){const a=this.timeouts.get(t);a&&(clearTimeout(a),this.timeouts.delete(t)),this.store.partialNext({notifications:this.store.getLatestValue().notifications.filter(e=>e.id!==t)})}clear(){this.timeouts.forEach(t=>clearTimeout(t)),this.timeouts.clear(),this.store.partialNext({notifications:[]})}};function ag(t){return typeof t=="string"||t instanceof String}var q0=class Xi{constructor(a,e,n){var o;this.nextRequestAbortController=null,this._messageComposerSetupState=new ba({setupFunction:null}),this._getConnectionID=()=>{var l,d;return((l=this.wsConnection)==null?void 0:l.connectionID)||((d=this.wsFallback)==null?void 0:d.connectionID)},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(l,d)=>{if(!l.id)throw new Error('The "id" field on the user is missing');if(this.userID===l.id&&this.setUserPromise)return console.warn("Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.userID=l.id,this.anonymous=!1;const h=this._setToken(l,d);this._setUser(l);const m=this.openConnection();this.setUserPromise=Promise.all([h,m]).then(p=>p[1]);try{return await this.setUserPromise}catch(p){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),p}},this.setUser=this.connectUser,this._setToken=(l,d)=>this.tokenManager.setTokenOrProvider(d,l),this.closeConnection=async l=>{var d,h,m;return this.cleaningIntervalRef!=null&&(clearInterval(this.cleaningIntervalRef),this.cleaningIntervalRef=void 0),await Promise.all([(d=this.wsConnection)==null?void 0:d.disconnect(l),(h=this.wsFallback)==null?void 0:h.disconnect(l)]),(m=this.offlineDb)==null||m.executeQuerySafely(async p=>{this.userID&&await p.upsertUserSyncStatus({userId:this.userID,lastSyncedAt:new Date().toString()})},{method:"upsertUserSyncStatus"}),Promise.resolve()},this.createChannelManager=({eventHandlerOverrides:l={},options:d={}})=>new VP({client:this,eventHandlerOverrides:l,options:d}),this.openConnection=()=>{var l,d,h;if(!this.userID)throw Error("User is not set on client, use client.connectUser or client.connectAnonymousUser instead");if((l=this.wsConnection)!=null&&l.isConnecting&&this.wsPromise)return this.logger("info","client:openConnection() - connection already in progress",{tags:["connection","client"]}),this.wsPromise;if(((d=this.wsConnection)!=null&&d.isHealthy||(h=this.wsFallback)!=null&&h.isHealthy())&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists",{tags:["connection","client"]});return}return this.clientID=`${this.userID}--${el()}`,this.wsPromise=this.connect(),this._startCleaning(),this.wsPromise},this._setupConnection=this.openConnection,this._normalizeDate=l=>{if(l instanceof Date&&(l=l.toISOString()),l==="")throw new Error("Don't pass blank string for since, use null instead if resetting the token revoke");return l},this.disconnectUser=l=>{this.logger("info","client:disconnect() - Disconnecting the client",{tags:["connection","client"]}),delete this.user,delete this._user,delete this.userID,this.anonymous=!1;const d=this.closeConnection(l);for(const h of Object.values(this.activeChannels))h._disconnect();return this.activeChannels={},this.state=new ex({client:this}),this.threads.resetState(),setTimeout(this.tokenManager.reset),d},this.disconnect=this.disconnectUser,this.connectAnonymousUser=()=>{(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&console.warn('Please do not use connectUser server side. connectUser impacts MAU and concurrent connection usage and thus your bill. If you have a valid use-case, add "allowServerSideConnect: true" to the client options to disable this warning.'),this.anonymous=!0,this.userID=el();const l={id:this.userID,anon:!0};return this._setToken(l,""),this._setUser(l),this._setupConnection()},this.setAnonymousUser=this.connectAnonymousUser,this.doAxiosRequest=async(l,d,h,m={})=>{var y;await this.tokenManager.tokenReady();const p=this._enrichAxiosOptions(m);try{let b;switch(this._logApiRequest(l,d,h,p),l){case"get":b=await this.axiosInstance.get(d,p);break;case"delete":b=await this.axiosInstance.delete(d,p);break;case"post":b=await this.axiosInstance.post(d,h,p);break;case"postForm":b=await this.axiosInstance.postForm(d,h,p);break;case"put":b=await this.axiosInstance.put(d,h,p);break;case"patch":b=await this.axiosInstance.patch(d,h,p);break;case"options":b=await this.axiosInstance.options(d,p);break;default:throw new Error("Invalid request type")}return this._logApiResponse(l,d,b),this.consecutiveFailures=0,this.handleResponse(b)}catch(b){if(b.client_request_id=(y=p.headers)==null?void 0:y["x-client-request-id"],this._logApiError(l,d,b),this.consecutiveFailures+=1,b.response)return b.response.data.code===Rc.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await Mi(vf(this.consecutiveFailures)),this.tokenManager.loadToken(),await this.doAxiosRequest(l,d,h,m)):this.handleResponse(b.response);throw b}},this.dispatchEvent=l=>{var p;l.received_at||(l.received_at=new Date);const d=this._handleClientEvent(l),h=l.cid,m=h?this.activeChannels[h]:void 0;m&&m._handleChannelEvent(l),this._callClientListeners(l),m&&m._callChannelListeners(l),d.forEach(y=>y()),(p=this.offlineDb)==null||p.executeQuerySafely(y=>y.handleEvent({event:l}),{method:`handleEvent;${l.type}`})},this.handleEvent=l=>{const d=l.data,h=JSON.parse(d);this.dispatchEvent(h)},this._updateMemberWatcherReferences=l=>{const d=this.state.userChannelReferences[l.id]||{};for(const h in d){const m=this.activeChannels[h];m!=null&&m.state&&(m.state.members[l.id]&&(m.state.members[l.id].user=l),m.state.watchers[l.id]&&(m.state.watchers[l.id]=l),m.state.read[l.id]&&(m.state.read[l.id].user=l))}},this._updateUserReferences=this._updateMemberWatcherReferences,this._updateUserMessageReferences=l=>{const d=this.state.userChannelReferences[l.id]||{};for(const h in d){const m=this.activeChannels[h];if(!m)continue;const p=m.state;p==null||p.updateUserMessages(l)}},this._deleteUserMessageReference=(l,d=!1)=>{const h=this.state.userChannelReferences[l.id]||{};for(const m in h){const p=this.activeChannels[m];if(p){const y=p.state;y==null||y.deleteUserMessages(l,d)}}},this._handleUserEvent=l=>{if(l.user){if(l.type==="user.presence.changed"||l.type==="user.updated"){if(l.user.id===this.userID){const d={...this.user},h={...this._user};for(const m in this.user){if(m in l.user||_4(m))continue;const p=m;delete d[p],delete h[p]}for(const m in h){const p=m;p in l.user&&(h[p]=l.user[p])}this._user=h,this.user={...d,...l.user}}this.state.updateUser(l.user),this._updateMemberWatcherReferences(l.user)}l.type==="user.updated"&&this._updateUserMessageReferences(l.user),l.type==="user.deleted"&&l.user.deleted_at&&(l.mark_messages_deleted||l.hard_delete)&&this._deleteUserMessageReference(l.user,l.hard_delete)}},this._callClientListeners=l=>{const d=this,h=[];d.listeners.all&&h.push(...d.listeners.all),d.listeners[l.type]&&h.push(...d.listeners[l.type]);for(const m of h)m(l)},this.recoverState=async()=>{this.logger("info",`client:recoverState() - Start of recoverState with connectionID ${this._getConnectionID()}`,{tags:["connection"]});const l=Object.keys(this.activeChannels);l.length&&this.recoverStateOnReconnect?(this.logger("info",`client:recoverState() - Start the querying of ${l.length} channels`,{tags:["connection","client"]}),await this.queryChannels({cid:{$in:l}},{last_message_at:-1},{limit:30}),this.logger("info","client:recoverState() - Querying channels finished",{tags:["connection","client"]}),this.dispatchEvent({type:"connection.recovered"})):this.dispatchEvent({type:"connection.recovered"}),this.wsPromise=Promise.resolve(),this.setUserPromise=Promise.resolve()},this.getChannelByMembers=(l,d)=>{const h=(d.members??[]).map(b=>typeof b=="string"?b:b.user_id??""),m=h.sort().join(","),p=P0(l,h);if(!p)throw Error("Please specify atleast one member when creating unique conversation");for(const b in this.activeChannels){const E=this.activeChannels[b];if(!E.disconnected&&(b===p||b.indexOf(`${l}:!members-`)===0&&Object.keys(E.state.members).sort().join(",")===m))return E}const y=new rl(this,l,void 0,d);return this._cacheEnabled()&&(this.activeChannels[p]=y),y},this.getChannelById=(l,d,h)=>{if(typeof d=="string"&&~d.indexOf(":"))throw Error(`Invalid channel id ${d}, can't contain the : character`);const m=`${l}:${d}`;if(m in this.activeChannels&&this.activeChannels[m]&&!this.activeChannels[m].disconnected){const y=this.activeChannels[m];return Object.keys(h).length>0&&(y.data={...y.data,...h},y._data={...y._data,...h}),y}const p=new rl(this,l,d,h);return this._cacheEnabled()&&(this.activeChannels[p.cid]=p),p},this.updateUsers=this.upsertUsers,this.updateUser=this.upsertUser,this._unblockMessage=this.unblockMessage,this.markAllRead=this.markChannelsRead,this._isUsingServerAuth=()=>!!this.secret,this._cacheEnabled=()=>!this._isUsingServerAuth()||!this.options.disableCache,this._buildWSPayload=l=>JSON.stringify({user_id:this.userID,user_details:this._user,device:this.options.device,client_request_id:l}),this.setMessageComposerSetupFunction=l=>{this._messageComposerSetupState.partialNext({setupFunction:l})},this.key=a,this.listeners={},this.state=new ex({client:this}),this.mutedChannels=[],this.mutedUsers=[],this.moderation=new BP(this),this.notifications=(n==null?void 0:n.notifications)??new JP,e&&ag(e)&&(this.secret=e);const r=n||(e&&!ag(e)?e:{});this.browser=typeof r.browser<"u"?r.browser:typeof window<"u",this.node=!this.browser,this.options={timeout:3e3,withCredentials:!1,warmUp:!1,recoverStateOnReconnect:!0,disableCache:!1,wsUrlParams:new URLSearchParams({}),...r},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new u4.default.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.axiosInstance=Qc.create(this.options),this.setBaseURL(this.options.baseURL||"https://chat.stream-io-api.com"),typeof process<"u"&&"env"in process&&jp.STREAM_LOCAL_TEST_RUN&&this.setBaseURL("http://localhost:3030"),typeof process<"u"&&"env"in process&&jp.STREAM_LOCAL_TEST_HOST&&this.setBaseURL("http://"+jp.STREAM_LOCAL_TEST_HOST),this.wsConnection=null,this.wsPromise=null,this.setUserPromise=null,this.activeChannels={},this.configs={},this.anonymous=!1,this.persistUserOnConnectionFailure=(o=this.options)==null?void 0:o.persistUserOnConnectionFailure,this.tokenManager=new MP(this.secret),this.consecutiveFailures=0,this.insightMetrics=new xP,this.defaultWSTimeoutWithFallback=6*1e3,this.defaultWSTimeout=15*1e3,this.axiosInstance.defaults.paramsSerializer=R4,this.logger=kg(r.logger)?r.logger:()=>null,this.recoverStateOnReconnect=this.options.recoverStateOnReconnect,this.threads=new zP({client:this}),this.polls=new qP({client:this})}static getInstance(a,e,n){return Xi._instance||(typeof e=="string"?Xi._instance=new Xi(a,e,n):Xi._instance=new Xi(a,e)),Xi._instance}setOfflineDBApi(a){this.offlineDb||(this.offlineDb=a)}devToken(a){return AP(a)}getAuthType(){return this.anonymous?"anonymous":"jwt"}setBaseURL(a){this.baseURL=a,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")}_setUser(a){this.user=a,this.userID=a.id,this._user={...a}}async updateAppSettings(a){const e=a.apn_config;return e!=null&&e.p12_cert&&(a={...a,apn_config:{...e,p12_cert:Buffer.from(e.p12_cert).toString("base64")}}),await this.patch(this.baseURL+"/app",a)}async revokeTokens(a){return await this.updateAppSettings({revoke_tokens_issued_before:this._normalizeDate(a)})}async revokeUserToken(a,e){return await this.revokeUsersToken([a],e)}async revokeUsersToken(a,e){e===void 0?e=new Date().toISOString():e=this._normalizeDate(e);const n=[];for(const r of a)n.push({id:r,set:{revoke_tokens_issued_before:e}});return await this.partialUpdateUsers(n)}async getAppSettings(){return this.appSettingsPromise=this.get(this.baseURL+"/app"),await this.appSettingsPromise}async testPushSettings(a,e={}){return await this.post(this.baseURL+"/check_push",{user_id:a,...e.messageID?{message_id:e.messageID}:{},...e.apnTemplate?{apn_template:e.apnTemplate}:{},...e.firebaseTemplate?{firebase_template:e.firebaseTemplate}:{},...e.firebaseDataTemplate?{firebase_data_template:e.firebaseDataTemplate}:{},...e.skipDevices?{skip_devices:!0}:{},...e.pushProviderName?{push_provider_name:e.pushProviderName}:{},...e.pushProviderType?{push_provider_type:e.pushProviderType}:{}})}async testSQSSettings(a={}){return await this.post(this.baseURL+"/check_sqs",a)}async testSNSSettings(a={}){return await this.post(this.baseURL+"/check_sns",a)}async setGuestUser(a){let e;this.anonymous=!0;try{e=await this.post(this.baseURL+"/guest",{user:a})}catch(h){throw this.anonymous=!1,h}this.anonymous=!1;const{created_at:n,updated_at:r,last_active:o,online:l,...d}=e.user;return await this.connectUser(d,e.access_token)}createToken(a,e,n){if(this.secret==null)throw Error("tokens can only be created server-side using the API Secret");const r={};return e&&(r.exp=e),n&&(r.iat=n),oE(this.secret,a,r,{})}on(a,e){const n=e?a:"all",r=e||a;return n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Attaching listener for ${n} event`,{tags:["event","client"]}),this.listeners[n].push(r),{unsubscribe:()=>{this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(o=>o!==r)}}}off(a,e){const n=e?a:"all",r=e||a;n in this.listeners||(this.listeners[n]=[]),this.logger("info",`Removing listener for ${n} event`,{tags:["event","client"]}),this.listeners[n]=this.listeners[n].filter(o=>o!==r)}_logApiRequest(a,e,n,r){this.logger("info",`client: ${a} - Request - ${e}`,{tags:["api","api_request","client"],url:e,payload:n,config:r})}_logApiResponse(a,e,n){this.logger("info",`client:${a} - Response - url: ${e} > status ${n.status}`,{tags:["api","api_response","client"],url:e,response:n})}_logApiError(a,e,n){this.logger("error",`client:${a} - Error - url: ${e}`,{tags:["api","api_response","client"],url:e,error:n})}get(a,e){return this.doAxiosRequest("get",a,null,{params:e})}put(a,e){return this.doAxiosRequest("put",a,e)}post(a,e){return this.doAxiosRequest("post",a,e)}patch(a,e){return this.doAxiosRequest("patch",a,e)}delete(a,e){return this.doAxiosRequest("delete",a,null,{params:e})}sendFile(a,e,n,r,o){const l=I4(e,n,r||"multipart/form-data");return o!=null&&l.append("user",JSON.stringify(o)),this.doAxiosRequest("postForm",a,l,{headers:l.getHeaders?l.getHeaders():{},config:{timeout:0,maxContentLength:1/0,maxBodyLength:1/0}})}errorFromResponse(a){const e=typeof a.data.code<"u"?`StreamChat error code ${a.data.code}: ${a.data.message}`:`StreamChat error HTTP code: ${a.status}`;return new PL(e,{code:a.data.code??null,response:a,status:a.status})}handleResponse(a){const e=a.data;if(PP(a))throw this.errorFromResponse(a);return e}_handleClientEvent(a){var r,o,l;const e=this,n=[];if(this.logger("info",`client:_handleClientEvent - Received event of type { ${a.type} }`,{tags:["event","client"],event:a}),(a.type==="user.presence.changed"||a.type==="user.updated"||a.type==="user.deleted")&&this._handleUserEvent(a),a.type==="health.check"&&a.me&&(e.user=a.me,e.state.updateUser(a.me),e.mutedChannels=a.me.channel_mutes,e.mutedUsers=a.me.mutes),a.channel&&a.type==="notification.message_new"){const{channel:d}=a;this._addChannelConfig(d)}if(a.type==="notification.channel_mutes_updated"&&((r=a.me)!=null&&r.channel_mutes)&&(this.mutedChannels=a.me.channel_mutes),a.type==="notification.mutes_updated"&&((o=a.me)!=null&&o.mutes)&&(this.mutedUsers=a.me.mutes),a.type==="notification.mark_read"&&a.unread_channels===0&&Object.keys(this.activeChannels).forEach(h=>this.activeChannels[h].state.unreadCount=0),(a.type==="channel.deleted"||a.type==="notification.channel_deleted")&&a.cid){const{cid:d}=a;e.state.deleteAllChannelReference(d),(l=this.activeChannels[a.cid])==null||l._disconnect(),n.push(()=>{d&&delete this.activeChannels[d]})}return n}_muteStatus(a){var n;let e;for(let r=0;r<this.mutedChannels.length;r++){const o=this.mutedChannels[r];if(((n=o.channel)==null?void 0:n.cid)===a){e={muted:o.expires?new Date(o.expires).getTime()>new Date().getTime():!0,createdAt:o.created_at?new Date(o.created_at):new Date,expiresAt:o.expires?new Date(o.expires):null};break}}return e||{muted:!1,createdAt:null,expiresAt:null}}async connect(){if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");!this.wsConnection&&(this.options.warmUp||this.options.enableInsights)&&this._sayHi(),this.options.wsConnection&&this.node?(this.options.wsConnection.setClient(this),this.wsConnection=this.options.wsConnection):this.wsConnection=new IP({client:this});try{return this.wsFallback?await this.wsFallback.connect():await this.wsConnection.connect(this.options.enableWSFallback?this.defaultWSTimeoutWithFallback:this.defaultWSTimeout)}catch(a){if(this.options.enableWSFallback&&LP(a)&&N4())return this.logger("info","client:connect() - WS failed, fallback to longpoll",{tags:["connection","client"]}),this.dispatchEvent({type:"transport.changed",mode:"longpoll"}),this.wsConnection._destroyCurrentWSConnection(),this.wsConnection.disconnect().then(),this.wsFallback=new OP({client:this}),await this.wsFallback.connect();throw a}}_sayHi(){const a=el(),e={headers:{"x-client-request-id":a}};this.doAxiosRequest("get",this.baseURL+"/hi",null,e).catch(n=>{this.options.enableInsights&&Lc("http_hi_failed",{api_key:this.key,err:n,client_request_id:a})})}async queryUsers(a,e=[],n={}){const r={presence:!1};await this.wsPromise,this._hasConnectionID()||(r.presence=!1);const o=await this.get(this.baseURL+"/users",{payload:{filter_conditions:a,sort:fa(e),...r,...n}});return this.state.updateUsers(o.users),o}async queryBannedUsers(a={},e=[],n={}){return await this.get(this.baseURL+"/query_banned_users",{payload:{filter_conditions:a,sort:fa(e),...n}})}async queryMessageFlags(a={},e={}){return await this.get(this.baseURL+"/moderation/flags/message",{payload:{filter_conditions:a,...e}})}async queryChannelsRequest(a,e=[],n={}){const r={state:!0,watch:!0,presence:!1};await this.wsPromise,this._hasConnectionID()||(r.watch=!1);const o={filter_conditions:a,sort:fa(e),...r,...n};return(await this.post(this.baseURL+"/channels",o)).channels}async queryChannels(a,e=[],n={},r={}){var l;const o=await this.queryChannelsRequest(a,e,n);return this.dispatchEvent({type:"channels.queried",queriedChannels:{channels:o,isLatestMessageSet:!0}}),o!=null&&o.length&&((l=this.offlineDb)!=null&&l.upsertChannels)&&await this.offlineDb.upsertChannels({channels:o,isLatestMessagesSet:!0}),this.hydrateActiveChannels(o,r,n)}async queryReactions(a,e,n=[],r={}){var l;const o={filter:e,sort:fa(n),...r};if((l=this.offlineDb)!=null&&l.getReactions&&!r.next)try{const d=await this.offlineDb.getReactions({messageId:a,filters:e,sort:n,limit:r.limit});d&&this.dispatchEvent({type:"offline_reactions.queried",offlineReactions:d})}catch(d){this.logger("warn","An error has occurred while querying offline reactions",{error:d})}return await this.wsPromise,await this.post(this.baseURL+"/messages/"+encodeURIComponent(a)+"/reactions",o)}hydrateActiveChannels(a=[],e={},n){const{skipInitialization:r,offlineMode:o=!1}=e,l=[];for(const d of a){this._addChannelConfig(d.channel);const h=this.channel(d.channel.type,d.channel.id);h.data=d.channel,h.offlineMode=o,h.initialized=!o,h.push_preferences=d.push_preferences;let m;if(r===void 0){const{messageSet:p}=h._initializeState(d,"latest");m=p}else if(!r.includes(d.channel.id)){h.state.clearMessages();const{messageSet:p}=h._initializeState(d,"latest");m=p}m&&(m.pagination={...m.pagination,...PS({parentSet:m,requestedPageSize:(n==null?void 0:n.message_limit)||f4,returnedPage:d.messages,logger:this.logger})},this.polls.hydratePollCache(d.messages,!0)),d.draft&&h.messageComposer.initState({composition:d.draft}),l.push(h)}return l}async search(a,e,n={}){if(n.offset&&n.next)throw Error("Cannot specify offset with next");const r={filter_conditions:a,...n,sort:n.sort?fa(n.sort):void 0};if(typeof e=="string")r.query=e;else if(typeof e=="object")r.message_filter_conditions=e;else throw Error(`Invalid type ${typeof e} for query parameter`);return await this.wsPromise,await this.get(this.baseURL+"/search",{payload:r})}setLocalDevice(a){var e,n,r;if((e=this.wsConnection)!=null&&e.isConnecting&&this.wsPromise||((n=this.wsConnection)!=null&&n.isHealthy||(r=this.wsFallback)!=null&&r.isHealthy())&&this._hasConnectionID())throw new Error("you can only set device before opening a websocket connection");this.options.device=a}async addDevice(a,e,n,r){return await this.post(this.baseURL+"/devices",{id:a,push_provider:e,...n!=null?{user_id:n}:{},...r!=null?{push_provider_name:r}:{}})}async getDevices(a){return await this.get(this.baseURL+"/devices",a?{user_id:a}:{})}async getUnreadCount(a){return await this.get(this.baseURL+"/unread",a?{user_id:a}:{})}async getUnreadCountBatch(a){return await this.post(this.baseURL+"/unread_batch",{user_ids:a})}async setPushPreferences(a){return await this.post(this.baseURL+"/push_preferences",{preferences:a})}async removeDevice(a,e){return await this.delete(this.baseURL+"/devices",{id:a,...e?{user_id:e}:{}})}getRateLimits(a){const{serverSide:e,web:n,android:r,ios:o,endpoints:l}=a||{};return this.get(this.baseURL+"/rate_limits",{server_side:e,web:n,android:r,ios:o,endpoints:l?l.join(","):void 0})}_addChannelConfig({cid:a,config:e}){this._cacheEnabled()&&(this.configs[a]=e)}channel(a,e,n={}){var r;if(!this.userID&&!this._isUsingServerAuth())throw Error("Call connectUser or connectAnonymousUser before creating a channel");if(~a.indexOf(":"))throw new Error(`Invalid channel group ${a}, can't contain the : character`);return e&&typeof e=="object"?this.getChannelByMembers(a,e):!e&&typeof n=="object"&&((r=n.members)!=null&&r.length)?this.getChannelByMembers(a,n):e?this.getChannelById(a,e,n):new rl(this,a,void 0,n)}async partialUpdateUser(a){return await this.partialUpdateUsers([a])}async upsertUsers(a){const e={};for(const n of a){if(!n.id)throw Error("User ID is required when updating a user");e[n.id]=n}return await this.post(this.baseURL+"/users",{users:e})}upsertUser(a){return this.upsertUsers([a])}async partialUpdateUsers(a){for(const e of a)if(!e.id)throw Error("User ID is required when updating a user");return await this.patch(this.baseURL+"/users",{users:a})}async deleteUser(a,e){return await this.delete(this.baseURL+`/users/${encodeURIComponent(a)}`,e)}async restoreUsers(a){return await this.post(this.baseURL+"/users/restore",{user_ids:a})}async reactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/reactivate`,{...e})}async reactivateUsers(a,e){return await this.post(this.baseURL+"/users/reactivate",{user_ids:a,...e})}async deactivateUser(a,e){return await this.post(this.baseURL+`/users/${encodeURIComponent(a)}/deactivate`,{...e})}async deactivateUsers(a,e){return await this.post(this.baseURL+"/users/deactivate",{user_ids:a,...e})}async exportUser(a,e){return await this.get(this.baseURL+`/users/${encodeURIComponent(a)}/export`,{...e})}async banUser(a,e){return await this.post(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async unbanUser(a,e){return await this.delete(this.baseURL+"/moderation/ban",{target_user_id:a,...e})}async shadowBan(a,e){return await this.banUser(a,{shadow:!0,...e})}async removeShadowBan(a,e){return await this.unbanUser(a,{shadow:!0,...e})}async blockUser(a,e){return await this.post(this.baseURL+"/users/block",{blocked_user_id:a,...e?{user_id:e}:{}})}async getBlockedUsers(a){return await this.get(this.baseURL+"/users/block",{...a?{user_id:a}:{}})}async unBlockUser(a,e){return await this.post(this.baseURL+"/users/unblock",{blocked_user_id:a,...e?{user_id:e}:{}})}async muteUser(a,e,n={}){return await this.post(this.baseURL+"/moderation/mute",{target_id:a,...e?{user_id:e}:{},...n})}async unmuteUser(a,e){return await this.post(this.baseURL+"/moderation/unmute",{target_id:a,...e?{user_id:e}:{}})}userMuteStatus(a){if(!this.user||!this.wsPromise)throw new Error("Make sure to await connectUser() first.");for(let e=0;e<this.mutedUsers.length;e+=1)if(this.mutedUsers[e].target.id===a)return!0;return!1}async flagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_message_id:a,...e})}async flagUser(a,e={}){return await this.post(this.baseURL+"/moderation/flag",{target_user_id:a,...e})}async unflagMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_message_id:a,...e})}async unflagUser(a,e={}){return await this.post(this.baseURL+"/moderation/unflag",{target_user_id:a,...e})}async _queryFlags(a={},e={}){return await this.post(this.baseURL+"/moderation/flags",{filter_conditions:a,...e})}async _queryFlagReports(a={},e={}){return await this.post(this.baseURL+"/moderation/reports",{filter_conditions:a,...e})}async _reviewFlagReport(a,e,n={}){return await this.patch(this.baseURL+`/moderation/reports/${encodeURIComponent(a)}`,{review_result:e,...n})}async unblockMessage(a,e={}){return await this.post(this.baseURL+"/moderation/unblock_message",{target_message_id:a,...e})}async markChannelsRead(a={}){await this.post(this.baseURL+"/channels/read",{...a})}createCommand(a){return this.post(this.baseURL+"/commands",a)}getCommand(a){return this.get(this.baseURL+`/commands/${encodeURIComponent(a)}`)}updateCommand(a,e){return this.put(this.baseURL+`/commands/${encodeURIComponent(a)}`,e)}deleteCommand(a){return this.delete(this.baseURL+`/commands/${encodeURIComponent(a)}`)}listCommands(){return this.get(this.baseURL+"/commands")}createChannelType(a){const e=Object.assign({},{commands:["all"]},a);return this.post(this.baseURL+"/channeltypes",e)}getChannelType(a){return this.get(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}updateChannelType(a,e){return this.put(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`,e)}DBDeleteChannelType(a){return this.delete(this.baseURL+`/channeltypes/${encodeURIComponent(a)}`)}listChannelTypes(){return this.get(this.baseURL+"/channeltypes")}async translateMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/translate`,{language:e})}async translate(a,e,n){return await this.post(this.baseURL+"/translate",{text:a,source_language:n,destination_language:e})}_normalizeExpiration(a){let e=null;if(typeof a=="number"){const n=new Date;n.setSeconds(n.getSeconds()+a),e=n.toISOString()}else ag(a)?e=a:a instanceof Date&&(e=a.toISOString());return e}_validateAndGetMessageId(a,e){let n;if(typeof a=="string")n=a;else{if(!a.id)throw Error(e);n=a.id}return n}pinMessage(a,e,n,r){const o=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(o,{set:{pinned:!0,pin_expires:this._normalizeExpiration(e),pinned_at:this._normalizeExpiration(r)}},n)}unpinMessage(a,e){const n=this._validateAndGetMessageId(a,"Please specify the message id when calling unpinMessage");return this.partialUpdateMessage(n,{set:{pinned:!1}},e)}async updateMessage(a,e,n){if(!a.id)throw Error("Please specify the message.id when calling updateMessage");const r=NS(a);return typeof e=="string"?r.user_id=e:typeof(e==null?void 0:e.id)=="string"&&(r.user_id=e.id),await this.post(this.baseURL+`/messages/${encodeURIComponent(a.id)}`,{message:r,...n})}async partialUpdateMessage(a,e,n,r){if(!a)throw Error("Please specify the message.id when calling partialUpdateMessage");let o;return typeof n=="string"?o={id:n}:typeof(n==null?void 0:n.id)=="string"&&(o={id:n.id}),await this.put(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e,...r,user:o})}async deleteMessage(a,e){try{if(this.offlineDb)return e?await this.offlineDb.hardDeleteMessage({id:a}):await this.offlineDb.softDeleteMessage({id:a}),await this.offlineDb.queueTask({task:{messageId:a,payload:[a,e],type:"delete-message"}})}catch(n){this.logger("error","offlineDb:deleteMessage",{tags:["channel","offlineDb"],error:n})}return this._deleteMessage(a,e)}async _deleteMessage(a,e){let n={};return e&&(n={hard:!0}),await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}`,n)}async undeleteMessage(a,e){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/undelete`,{undeleted_by:e})}async getMessage(a,e){return await this.get(this.baseURL+`/messages/${encodeURIComponent(a)}`,{...e})}async queryThreads(a={}){const e={limit:10,participant_limit:10,reply_limit:3,watch:!0,...a},n={...e};e.filter&&Object.keys(e.filter).length>0&&(n.filter=e.filter),e.sort&&(Array.isArray(e.sort)?e.sort.length>0:Object.keys(e.sort).length>0)&&(n.sort=fa(e.sort));const r=await this.post(`${this.baseURL}/threads`,n);return{threads:r.threads.map(o=>new Hc({client:this,threadData:o})),next:r.next}}async getThread(a,e={}){if(!a)throw new Error("Please specify the messageId when calling getThread");const n={participant_limit:100,reply_limit:3,watch:!0,...e},r=await this.get(`${this.baseURL}/threads/${encodeURIComponent(a)}`,n);return new Hc({client:this,threadData:r.thread})}async partialUpdateThread(a,e){if(!a)throw Error("Please specify the message id when calling partialUpdateThread");const n=["created_at","id","last_message_at","type","updated_at","user","reply_count","participants","channel","custom"];for(const r in{...e.set,...e.unset})if(n.includes(r))throw Error(`You cannot set ${r} field on Thread object. ${r} is reserved for server-side use. Please omit ${r} from your set object.`);return await this.patch(`${this.baseURL}/threads/${encodeURIComponent(a)}`,e)}getUserAgent(){if(this.userAgent)return this.userAgent;const a="9.2.0",e="browser-esm";let n="";this.sdkIdentifier?n=`stream-chat-${this.sdkIdentifier.name}-v${this.sdkIdentifier.version}-llc-v${a}`:n=`stream-chat-js-v${a}-${this.node?"node":"browser"}`;const{os:r,model:o}=this.deviceIdentifier??{};return[["os",r],["device_model",o],["client_bundle",e]].reduce((l,[d,h])=>h&&h.length>0?l.concat(`|${d}=${h}`):l,n)}setUserAgent(a){this.userAgent=a}_enrichAxiosOptions(a={params:{},headers:{},config:{}}){var h;const e=this._getToken(),n=e?{Authorization:e}:void 0;let r=null;this.nextRequestAbortController!==null&&(r=this.nextRequestAbortController.signal,this.nextRequestAbortController=null),(h=a.headers)!=null&&h["x-client-request-id"]||(a.headers={...a.headers,"x-client-request-id":el()});const{params:o,headers:l,...d}=this.options.axiosRequestConfig||{};return{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...a.params,...o||{}},headers:{...n,"stream-auth-type":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...a.headers,...l||{}},...r?{signal:r}:{},...a.config,...d||{}}}_getToken(){return!this.tokenManager||this.anonymous?null:this.tokenManager.getToken()}_startCleaning(){const a=this;this.cleaningIntervalRef==null&&(this.cleaningIntervalRef=setInterval(()=>{for(const e of Object.values(a.activeChannels))e.clean()},500))}verifyWebhook(a,e){return!!this.secret&&TP(a,this.secret,e)}getPermission(a){return this.get(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}createPermission(a){return this.post(`${this.baseURL}/permissions`,{...a})}updatePermission(a,e){return this.put(`${this.baseURL}/permissions/${encodeURIComponent(a)}`,{...e})}deletePermission(a){return this.delete(`${this.baseURL}/permissions/${encodeURIComponent(a)}`)}listPermissions(){return this.get(`${this.baseURL}/permissions`)}createRole(a){return this.post(`${this.baseURL}/roles`,{name:a})}listRoles(){return this.get(`${this.baseURL}/roles`)}deleteRole(a){return this.delete(`${this.baseURL}/roles/${encodeURIComponent(a)}`)}sync(a,e,n={}){return this.post(`${this.baseURL}/sync`,{channel_cids:a,last_sync_at:e,...n})}async sendUserCustomEvent(a,e){return await this.post(`${this.baseURL}/users/${encodeURIComponent(a)}/event`,{event:e})}createBlockList(a){return this.post(`${this.baseURL}/blocklists`,a)}listBlockLists(a){return this.get(`${this.baseURL}/blocklists`,a)}getBlockList(a,e){return this.get(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}updateBlockList(a,e){return this.put(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}deleteBlockList(a,e){return this.delete(`${this.baseURL}/blocklists/${encodeURIComponent(a)}`,e)}exportChannels(a,e={}){const n={channels:a,...e};return this.post(`${this.baseURL}/export_channels`,n)}exportUsers(a){return this.post(`${this.baseURL}/export/users`,a)}exportChannel(a,e){return this.exportChannels([a],e)}getExportChannelStatus(a){return this.get(`${this.baseURL}/export_channels/${encodeURIComponent(a)}`)}campaign(a,e){return a&&typeof a=="object"?new E1(this,null,a):new E1(this,a,e)}segment(a,e,n){return typeof e=="string"?new rx(this,a,e,n):new rx(this,a,null,e)}validateServerSideAuth(){if(!this.secret)throw new Error("Campaigns is a server-side only feature. Please initialize the client with a secret to use this feature.")}createSegment(a,e,n){this.validateServerSideAuth();const r={id:e,type:a,...n};return this.post(this.baseURL+"/segments",r)}createUserSegment(a,e){return this.validateServerSideAuth(),this.createSegment("user",a,e)}createChannelSegment(a,e){return this.validateServerSideAuth(),this.createSegment("channel",a,e)}getSegment(a){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}`)}updateSegment(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/segments/${encodeURIComponent(a)}`,e)}addSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/addtargets`,n)}querySegmentTargets(a,e={},n=[],r={}){return this.validateServerSideAuth(),this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/targets/query`,{filter:e||{},sort:n||[],...r})}removeSegmentTargets(a,e){this.validateServerSideAuth();const n={target_ids:e};return this.post(this.baseURL+`/segments/${encodeURIComponent(a)}/deletetargets`,n)}querySegments(a,e,n={}){return this.validateServerSideAuth(),this.post(this.baseURL+"/segments/query",{filter:a,sort:e,...n})}deleteSegment(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/segments/${encodeURIComponent(a)}`)}segmentTargetExists(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/segments/${encodeURIComponent(a)}/target/${encodeURIComponent(e)}`)}createCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+"/campaigns",{...a})}getCampaign(a,e){return this.validateServerSideAuth(),this.get(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,{...e==null?void 0:e.users})}startCampaign(a,e){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/start`,{scheduled_for:e==null?void 0:e.scheduledFor,stop_at:e==null?void 0:e.stopAt})}async queryCampaigns(a,e,n){return this.validateServerSideAuth(),await this.post(this.baseURL+"/campaigns/query",{filter:a,sort:e,...n||{}})}updateCampaign(a,e){return this.validateServerSideAuth(),this.put(this.baseURL+`/campaigns/${encodeURIComponent(a)}`,e)}deleteCampaign(a){return this.validateServerSideAuth(),this.delete(this.baseURL+`/campaigns/${encodeURIComponent(a)}`)}stopCampaign(a){return this.validateServerSideAuth(),this.post(this.baseURL+`/campaigns/${encodeURIComponent(a)}/stop`)}enrichURL(a){return this.get(this.baseURL+"/og",{url:a})}getTask(a){return this.get(`${this.baseURL}/tasks/${encodeURIComponent(a)}`)}async deleteChannels(a,e={}){return await this.post(this.baseURL+"/channels/delete",{cids:a,...e})}async deleteUsers(a,e={}){if(typeof e.user<"u"&&!["soft","hard","pruning"].includes(e.user))throw new Error("Invalid delete user options. user must be one of [soft hard pruning]");if(typeof e.conversations<"u"&&!["soft","hard"].includes(e.conversations))throw new Error("Invalid delete user options. conversations must be one of [soft hard]");if(typeof e.messages<"u"&&!["soft","hard","pruning"].includes(e.messages))throw new Error("Invalid delete user options. messages must be one of [soft hard pruning]");return await this.post(this.baseURL+"/users/delete",{user_ids:a,...e})}async _createImportURL(a){return await this.post(this.baseURL+"/import_urls",{filename:a})}async _createImport(a,e={mode:"upsert"}){return await this.post(this.baseURL+"/imports",{path:a,...e})}async _getImport(a){return await this.get(this.baseURL+`/imports/${encodeURIComponent(a)}`)}async _listImports(a){return await this.get(this.baseURL+"/imports",a)}async upsertPushProvider(a){return await this.post(this.baseURL+"/push_providers",{push_provider:a})}async deletePushProvider({type:a,name:e}){return await this.delete(this.baseURL+`/push_providers/${encodeURIComponent(a)}/${encodeURIComponent(e)}`)}async listPushProviders(){return await this.get(this.baseURL+"/push_providers")}createAbortControllerForNextRequest(){return this.nextRequestAbortController=new AbortController}async commitMessage(a){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/commit`)}async createPoll(a,e){return await this.post(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async getPoll(a,e){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}`,e?{user_id:e}:{})}async updatePoll(a,e){return await this.put(this.baseURL+"/polls",{...a,...e?{user_id:e}:{}})}async partialUpdatePoll(a,e,n){return await this.patch(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e,...n?{user_id:n}:{}})}async deletePoll(a,e){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}`,{...e?{user_id:e}:{}})}closePoll(a,e){return this.partialUpdatePoll(a,{set:{is_closed:!0}},e)}async createPollOption(a,e,n){return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async getPollOption(a,e,n){return await this.get(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async updatePollOption(a,e,n){return await this.put(this.baseURL+`/polls/${encodeURIComponent(a)}/options`,{...e,...n?{user_id:n}:{}})}async deletePollOption(a,e,n){return await this.delete(this.baseURL+`/polls/${encodeURIComponent(a)}/options/${encodeURIComponent(e)}`,n?{user_id:n}:{})}async castPollVote(a,e,n,r){return await this.post(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote`,{vote:n,...r?{user_id:r}:{}})}addPollAnswer(a,e,n,r){return this.castPollVote(a,e,{answer_text:n},r)}async removePollVote(a,e,n,r){return await this.delete(this.baseURL+`/messages/${encodeURIComponent(a)}/polls/${encodeURIComponent(e)}/vote/${encodeURIComponent(n)}`,{...r?{user_id:r}:{}})}async queryPolls(a={},e=[],n={},r){const o=r?`?user_id=${r}`:"";return await this.post(this.baseURL+`/polls/query${o}`,{filter:a,sort:fa(e),...n})}async queryPollVotes(a,e={},n=[],r={},o){const l=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${l}`,{filter:e,sort:fa(n),...r})}async queryPollAnswers(a,e={},n=[],r={},o){const l=o?`?user_id=${o}`:"";return await this.post(this.baseURL+`/polls/${encodeURIComponent(a)}/votes${l}`,{filter:{...e,is_answer:!0},sort:fa(n),...r})}async queryMessageHistory(a={},e=[],n={}){return await this.post(this.baseURL+"/messages/history",{filter:a,sort:fa(e),...n})}async updateFlags(a,e,n={}){return await this.post(this.baseURL+"/automod/v1/moderation/update_flags",{message_ids:a,reviewed_by:e,...n})}async queryDrafts(a={}){const e={...a,sort:a.sort?fa(a.sort):void 0};return await this.post(this.baseURL+"/drafts/query",e)}};const lE=(t,a)=>{const[e,n]=w.useState([]),[r,o]=w.useState([]),[l,d]=w.useState(!0),[h,m]=w.useState(null),p=async()=>{try{d(!0);const[y,b]=await Promise.all([as.getPendingProposals(t,a),as.getSentProposals(t,a)]);n(y.filter(E=>E.status==="pending")),o(b.filter(E=>["pending","countered"].includes(E.status))),m(null)}catch(y){m(y.message),n([]),o([])}finally{d(!1)}};return w.useEffect(()=>{t&&a&&p()},[t,a]),{pendingProposals:e,sentProposals:r,loading:l,error:h,refetch:p}},KP="nbvut8j4y6se",eO="frbcaplgmailcom";function tO(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function Rd(t){if(!t)return"";const a=new Date(t),e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${a.getFullYear()}-${e}-${n}`}function nO(t){let a=t.trim();a=a.replace(/(\d{1,2}):(\d{2})\s*(am|pm)/i,(n,r,o,l)=>`${parseInt(r,10)}:${o} ${l.toUpperCase()}`),a=a.replace(/^(\d{1,2})(\d{2})(am|pm)$/i,(n,r,o,l)=>`${parseInt(r,10)}:${o} ${l.toUpperCase()}`),a=a.replace(/^(\d{1,2})(am|pm)$/i,(n,r,o)=>`${parseInt(r,10)}:00 ${o.toUpperCase()}`),a=a.replace(/(am|pm)$/i," $1"),a=a.replace(/(am|pm)$/i,n=>n.toUpperCase());const e=a.match(/^(\d{1,2}):(\d{2}) (AM|PM)$/i);if(e){const n=e[1],r=e[2],o=e[3].toUpperCase(),l=`${n}:${r} ${o}`;return console.log("normalizeTimeString final:",l),l}return console.log("normalizeTimeString fallback:",a),a}function kd(t){return t.replace(/[^a-zA-Z0-9]/g,"")}async function aO({senderEmail:t,senderName:a,receiverEmail:e,receiverName:n,matchName:r}){try{const o=q0.getInstance(KP),l=await fetch(`${tt}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:kd(t)})}),{token:d}=await l.json();if(!d)throw new Error("Could not get chat token");o.userID||await o.connectUser({id:kd(t),name:a},d);const h=Array.from(new Set([kd(t),kd(e),eO])),m=o.channel("messaging",{members:h,name:r});await m.create(),await m.sendMessage({text:"Chat created for your match proposal!"})}catch(o){console.error("Failed to create chat channel:",o),alert("Failed to create chat channel: "+o.message)}}const rg=`This is a BETA test match. Matches that are created, scheduled, and confirmed will NOT be played.

`,rO=t=>t.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();function Q0({player:t,day:a,slot:e,onClose:n,senderName:r,senderEmail:o,onProposalComplete:l,selectedDivision:d,phase:h}){console.log("MatchProposalModal player prop:",t),console.log("MatchProposalModal phase prop:",h),console.log("MatchProposalModal slot prop:",e,JSON.stringify(e));const[m,p]=w.useState(e),[y,b]=w.useState(""),[E,S]=w.useState(""),[C,_]=w.useState(""),[x,D]=w.useState(!1),[A,k]=w.useState("8 Ball"),[P,L]=w.useState(h==="scheduled"||h==="challenge"?5:7),G=t.locations?t.locations.split(/\r?\n/).map($=>$.trim()).filter(Boolean):[],F=AR(a),[q,te]=w.useState(F),X=t.availability[a]||[],ee=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][q.getDay()],j=w.useMemo(()=>{if(!e)return[];const $=rO(e);if(console.log("DEBUG: normalized slot:",$),!$.includes(" - "))return[];let[T,U]=$.split(" - ").map(V=>nO(V.trim()));if(console.log("DEBUG: blockStart:",T,"blockEnd:",U),!T||!U)return[];const K=T0(T,U,30);return console.log("DEBUG: generated times:",K),K},[e]);w.useEffect(()=>{b("")},[e]);const{sentProposals:H}=lE(r,d);function R($){return H.some(T=>T.receiverName===($.player?`${$.player.firstName} ${$.player.lastName}`:$.opponentName)&&T.date===Rd(q)&&T.time===y&&T.location===E&&T.phase===h&&T.divisions&&T.divisions.includes(d)&&["pending","countered"].includes(T.status))}t.opponents&&t.opponents.filter($=>!R($));const B=()=>{if(!o||!t.email||!y||!E||!q){alert("Please fill in all required fields.");return}if(h==="scheduled"){const T=new Date,U=new Date(q),K=Math.ceil((U-T)/(1e3*60*60*24));if(K<0){alert(" You cannot schedule a match in the past.");return}if(K<=2&&!window.confirm(` WARNING: This match is scheduled for ${K} day(s) from now.

Phase 1 matches must be completed by the end of week 6. Scheduling this close to the deadline may not give enough time to complete the match.

Do you want to continue with this schedule?`))return}const $={senderEmail:o,senderName:r,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,date:Rd(q),time:y,location:E,message:C,gameType:A,raceLength:P,phase:h,divisions:[d]};console.log("Proposal data to send:",$),fetch(`${tt}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)}).then(T=>T.json()).then(T=>{if(console.log("Backend response:",T),T.error)throw new Error(T.error);aO({senderEmail:o,senderName:r,receiverEmail:t.email,receiverName:t.firstName?`${t.firstName} ${t.lastName}`:t.name,matchName:`${r} vs ${t.firstName?`${t.firstName} ${t.lastName}`:t.name} - ${tO(q)}`}),aT({to_email:t.email,to_name:t.firstName?`${t.firstName} ${t.lastName}`:t.name,from_name:r,from_email:o,day:ee,date:Rd(q),time:y,location:E,note:C,gameType:A,raceLength:P,proposalId:T.proposalId}),D(!0)}).catch(T=>{console.error("Failed to send proposal:",T),alert("Failed to send proposal: "+T.message)})},Y=()=>{D(!1),n(),l&&l()};return u.createElement(u.Fragment,null,u.createElement(qn,{open:!0,onClose:n,title:u.createElement("span",{className:ln["match-proposal-title"]},"Propose a Match - BETA"),maxWidth:"500px",className:"proposal-modal"},u.createElement("div",{className:ln["match-proposal-content"]},u.createElement("div",{style:{display:"flex",justifyContent:"center",gap:12,marginBottom:12}},u.createElement("div",{className:ln["match-proposal-phase"]},u.createElement("b",null,u.createElement("span",{style:{color:"#fff"}},h==="scheduled"?"Phase 1:":h==="challenge"?"Phase 2:":""),u.createElement("span",{className:ln["match-proposal-label-red"],style:{marginLeft:4}},h==="scheduled"?"Scheduled Match Phase":h==="challenge"?"Challenge Phase":""))),u.createElement("div",{className:ln["match-proposal-division"]},u.createElement("b",null,u.createElement("span",{style:{color:"#fff"}},"Division:"))," ",u.createElement("span",{className:ln["match-proposal-label-red"]},d))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"To Opponent:"),u.createElement("div",{className:ln.opponentName,style:{fontWeight:"bold",fontSize:"1.25rem",margin:"2px 0"}},t.firstName?`${t.firstName} ${t.lastName}`:t.name),u.createElement("span",{style:{color:"#fff",fontSize:"1rem"}},"Day: "),u.createElement("span",{className:ln["match-proposal-day-value"],style:{color:"#e53e3e",fontWeight:600}},ee)),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Date:"),u.createElement(eS,{selected:q,onChange:$=>te($),dateFormat:"MM-dd-yyyy",className:ln["match-proposal-date-input"],required:!0})),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Time Block:"),u.createElement("select",{className:ln["match-proposal-select"],value:m,onChange:$=>p($.target.value)},u.createElement("option",{value:""},"Select time block"),X.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Start Time:"),u.createElement("select",{className:ln["match-proposal-select"],value:y,onChange:$=>b($.target.value)},u.createElement("option",{value:""},"Select..."),j.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Game Type:"),u.createElement("select",{className:ln["match-proposal-select"],value:A,onChange:$=>k($.target.value)},u.createElement("option",{value:"8 Ball"},"8 Ball"),u.createElement("option",{value:"9 Ball"},"9 Ball"),u.createElement("option",{value:"10 Ball"},"10 Ball"),u.createElement("option",{value:"Mixed"},"Mixed"))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Race Length:"),u.createElement("select",{className:ln["match-proposal-select"],value:P,onChange:$=>L(Number($.target.value))},h==="scheduled"||h==="challenge"?u.createElement("option",{value:5},"5"):[...Array(13)].map(($,T)=>{const U=T+3;return u.createElement("option",{key:U,value:U},U)}))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Location:"),u.createElement("select",{className:ln["match-proposal-location-select"],value:E,onChange:$=>S($.target.value)},u.createElement("option",{value:""},"Select..."),G.map(($,T)=>u.createElement("option",{key:T,value:$},$)))),u.createElement("div",{className:ln["match-proposal-row"],style:{marginBottom:10}},u.createElement("b",null,"Message to Opponent:"),u.createElement("textarea",{className:ln["match-proposal-textarea"],value:rg+C,onChange:$=>{const T=$.target.value;T.startsWith(rg)?_(T.slice(rg.length)):_("")},placeholder:"Add a comment to your opponent...",rows:5})),u.createElement("button",{className:ln["match-proposal-send-btn"],onClick:B,disabled:!y||!E},"Send Proposal"))),x&&u.createElement(i2,{open:x,onClose:Y,message:`Your match proposal has been sent to ${t.firstName?`${t.firstName} ${t.lastName}`:t.name}.
          They will receive an email notification and can respond through the app.`,phase:h,gameType:A,raceLength:P,day:ee,date:Rd(q),time:y,location:E,proposalNote:C}))}function cE(t,a){return function(){return t.apply(a,arguments)}}const{toString:sO}=Object.prototype,{getPrototypeOf:V0}=Object,{iterator:wh,toStringTag:uE}=Symbol,xh=(t=>a=>{const e=sO.call(a);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Lr=t=>(t=t.toLowerCase(),a=>xh(a)===t),Sh=t=>a=>typeof a===t,{isArray:xl}=Array,Jc=Sh("undefined");function iO(t){return t!==null&&!Jc(t)&&t.constructor!==null&&!Jc(t.constructor)&&Aa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dE=Lr("ArrayBuffer");function oO(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&dE(t.buffer),a}const lO=Sh("string"),Aa=Sh("function"),fE=Sh("number"),Eh=t=>t!==null&&typeof t=="object",cO=t=>t===!0||t===!1,Xd=t=>{if(xh(t)!=="object")return!1;const a=V0(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(uE in t)&&!(wh in t)},uO=Lr("Date"),dO=Lr("File"),fO=Lr("Blob"),hO=Lr("FileList"),mO=t=>Eh(t)&&Aa(t.pipe),pO=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Aa(t.append)&&((a=xh(t))==="formdata"||a==="object"&&Aa(t.toString)&&t.toString()==="[object FormData]"))},gO=Lr("URLSearchParams"),[yO,vO,bO,wO]=["ReadableStream","Request","Response","Headers"].map(Lr),xO=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fu(t,a,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),xl(t))for(n=0,r=t.length;n<r;n++)a.call(null,t[n],n,t);else{const o=e?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let d;for(n=0;n<l;n++)d=o[n],a.call(null,t[d],d,t)}}function hE(t,a){a=a.toLowerCase();const e=Object.keys(t);let n=e.length,r;for(;n-- >0;)if(r=e[n],a===r.toLowerCase())return r;return null}const eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mE=t=>!Jc(t)&&t!==eo;function qg(){const{caseless:t}=mE(this)&&this||{},a={},e=(n,r)=>{const o=t&&hE(a,r)||r;Xd(a[o])&&Xd(n)?a[o]=qg(a[o],n):Xd(n)?a[o]=qg({},n):xl(n)?a[o]=n.slice():a[o]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&fu(arguments[n],e);return a}const SO=(t,a,e,{allOwnKeys:n}={})=>(fu(a,(r,o)=>{e&&Aa(r)?t[o]=cE(r,e):t[o]=r},{allOwnKeys:n}),t),EO=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),CO=(t,a,e,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),e&&Object.assign(t.prototype,e)},_O=(t,a,e,n)=>{let r,o,l;const d={};if(a=a||{},t==null)return a;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!n||n(l,t,a))&&!d[l]&&(a[l]=t[l],d[l]=!0);t=e!==!1&&V0(t)}while(t&&(!e||e(t,a))&&t!==Object.prototype);return a},IO=(t,a,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=a.length;const n=t.indexOf(a,e);return n!==-1&&n===e},DO=t=>{if(!t)return null;if(xl(t))return t;let a=t.length;if(!fE(a))return null;const e=new Array(a);for(;a-- >0;)e[a]=t[a];return e},AO=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&V0(Uint8Array)),TO=(t,a)=>{const n=(t&&t[wh]).call(t);let r;for(;(r=n.next())&&!r.done;){const o=r.value;a.call(t,o[0],o[1])}},MO=(t,a)=>{let e;const n=[];for(;(e=t.exec(a))!==null;)n.push(e);return n},NO=Lr("HTMLFormElement"),RO=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),cx=(({hasOwnProperty:t})=>(a,e)=>t.call(a,e))(Object.prototype),kO=Lr("RegExp"),pE=(t,a)=>{const e=Object.getOwnPropertyDescriptors(t),n={};fu(e,(r,o)=>{let l;(l=a(r,o,t))!==!1&&(n[o]=l||r)}),Object.defineProperties(t,n)},LO=t=>{pE(t,(a,e)=>{if(Aa(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(Aa(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},PO=(t,a)=>{const e={},n=r=>{r.forEach(o=>{e[o]=!0})};return xl(t)?n(t):n(String(t).split(a)),e},OO=()=>{},BO=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function UO(t){return!!(t&&Aa(t.append)&&t[uE]==="FormData"&&t[wh])}const zO=t=>{const a=new Array(10),e=(n,r)=>{if(Eh(n)){if(a.indexOf(n)>=0)return;if(!("toJSON"in n)){a[r]=n;const o=xl(n)?[]:{};return fu(n,(l,d)=>{const h=e(l,r+1);!Jc(h)&&(o[d]=h)}),a[r]=void 0,o}}return n};return e(t,0)},jO=Lr("AsyncFunction"),FO=t=>t&&(Eh(t)||Aa(t))&&Aa(t.then)&&Aa(t.catch),gE=((t,a)=>t?setImmediate:a?((e,n)=>(eo.addEventListener("message",({source:r,data:o})=>{r===eo&&o===e&&n.length&&n.shift()()},!1),r=>{n.push(r),eo.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Aa(eo.postMessage)),HO=typeof queueMicrotask<"u"?queueMicrotask.bind(eo):typeof process<"u"&&process.nextTick||gE,YO=t=>t!=null&&Aa(t[wh]),ce={isArray:xl,isArrayBuffer:dE,isBuffer:iO,isFormData:pO,isArrayBufferView:oO,isString:lO,isNumber:fE,isBoolean:cO,isObject:Eh,isPlainObject:Xd,isReadableStream:yO,isRequest:vO,isResponse:bO,isHeaders:wO,isUndefined:Jc,isDate:uO,isFile:dO,isBlob:fO,isRegExp:kO,isFunction:Aa,isStream:mO,isURLSearchParams:gO,isTypedArray:AO,isFileList:hO,forEach:fu,merge:qg,extend:SO,trim:xO,stripBOM:EO,inherits:CO,toFlatObject:_O,kindOf:xh,kindOfTest:Lr,endsWith:IO,toArray:DO,forEachEntry:TO,matchAll:MO,isHTMLForm:NO,hasOwnProperty:cx,hasOwnProp:cx,reduceDescriptors:pE,freezeMethods:LO,toObjectSet:PO,toCamelCase:RO,noop:OO,toFiniteNumber:BO,findKey:hE,global:eo,isContextDefined:mE,isSpecCompliantForm:UO,toJSONObject:zO,isAsyncFn:jO,isThenable:FO,setImmediate:gE,asap:HO,isIterable:YO};function ut(t,a,e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),e&&(this.config=e),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}ce.inherits(ut,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const yE=ut.prototype,vE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vE[t]={value:t}});Object.defineProperties(ut,vE);Object.defineProperty(yE,"isAxiosError",{value:!0});ut.from=(t,a,e,n,r,o)=>{const l=Object.create(yE);return ce.toFlatObject(t,l,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),ut.call(l,t.message,a,e,n,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const WO=null;function Qg(t){return ce.isPlainObject(t)||ce.isArray(t)}function bE(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function ux(t,a,e){return t?t.concat(a).map(function(r,o){return r=bE(r),!e&&o?"["+r+"]":r}).join(e?".":""):a}function GO(t){return ce.isArray(t)&&!t.some(Qg)}const $O=ce.toFlatObject(ce,{},null,function(a){return/^is[A-Z]/.test(a)});function Ch(t,a,e){if(!ce.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,e=ce.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,_){return!ce.isUndefined(_[C])});const n=e.metaTokens,r=e.visitor||p,o=e.dots,l=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(a);if(!ce.isFunction(r))throw new TypeError("visitor must be a function");function m(S){if(S===null)return"";if(ce.isDate(S))return S.toISOString();if(!h&&ce.isBlob(S))throw new ut("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(S)||ce.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function p(S,C,_){let x=S;if(S&&!_&&typeof S=="object"){if(ce.endsWith(C,"{}"))C=n?C:C.slice(0,-2),S=JSON.stringify(S);else if(ce.isArray(S)&&GO(S)||(ce.isFileList(S)||ce.endsWith(C,"[]"))&&(x=ce.toArray(S)))return C=bE(C),x.forEach(function(A,k){!(ce.isUndefined(A)||A===null)&&a.append(l===!0?ux([C],k,o):l===null?C:C+"[]",m(A))}),!1}return Qg(S)?!0:(a.append(ux(_,C,o),m(S)),!1)}const y=[],b=Object.assign($O,{defaultVisitor:p,convertValue:m,isVisitable:Qg});function E(S,C){if(!ce.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+C.join("."));y.push(S),ce.forEach(S,function(x,D){(!(ce.isUndefined(x)||x===null)&&r.call(a,x,ce.isString(D)?D.trim():D,C,b))===!0&&E(x,C?C.concat(D):[D])}),y.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return E(t),a}function dx(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function X0(t,a){this._pairs=[],t&&Ch(t,this,a)}const wE=X0.prototype;wE.append=function(a,e){this._pairs.push([a,e])};wE.toString=function(a){const e=a?function(n){return a.call(this,n,dx)}:dx;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function ZO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xE(t,a,e){if(!a)return t;const n=e&&e.encode||ZO;ce.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let o;if(r?o=r(a,e):o=ce.isURLSearchParams(a)?a.toString():new X0(a,e).toString(n),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class fx{constructor(){this.handlers=[]}use(a,e,n){return this.handlers.push({fulfilled:a,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){ce.forEach(this.handlers,function(n){n!==null&&a(n)})}}const SE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qO=typeof URLSearchParams<"u"?URLSearchParams:X0,QO=typeof FormData<"u"?FormData:null,VO=typeof Blob<"u"?Blob:null,XO={isBrowser:!0,classes:{URLSearchParams:qO,FormData:QO,Blob:VO},protocols:["http","https","file","blob","url","data"]},J0=typeof window<"u"&&typeof document<"u",Vg=typeof navigator=="object"&&navigator||void 0,JO=J0&&(!Vg||["ReactNative","NativeScript","NS"].indexOf(Vg.product)<0),KO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eB=J0&&window.location.href||"http://localhost",tB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:J0,hasStandardBrowserEnv:JO,hasStandardBrowserWebWorkerEnv:KO,navigator:Vg,origin:eB},Symbol.toStringTag,{value:"Module"})),ma={...tB,...XO};function nB(t,a){return Ch(t,new ma.classes.URLSearchParams,Object.assign({visitor:function(e,n,r,o){return ma.isNode&&ce.isBuffer(e)?(this.append(n,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},a))}function aB(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function rB(t){const a={},e=Object.keys(t);let n;const r=e.length;let o;for(n=0;n<r;n++)o=e[n],a[o]=t[o];return a}function EE(t){function a(e,n,r,o){let l=e[o++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=o>=e.length;return l=!l&&ce.isArray(r)?r.length:l,h?(ce.hasOwnProp(r,l)?r[l]=[r[l],n]:r[l]=n,!d):((!r[l]||!ce.isObject(r[l]))&&(r[l]=[]),a(e,n,r[l],o)&&ce.isArray(r[l])&&(r[l]=rB(r[l])),!d)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const e={};return ce.forEachEntry(t,(n,r)=>{a(aB(n),r,e,0)}),e}return null}function sB(t,a,e){if(ce.isString(t))try{return(a||JSON.parse)(t),ce.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const hu={transitional:SE,adapter:["xhr","http","fetch"],transformRequest:[function(a,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,o=ce.isObject(a);if(o&&ce.isHTMLForm(a)&&(a=new FormData(a)),ce.isFormData(a))return r?JSON.stringify(EE(a)):a;if(ce.isArrayBuffer(a)||ce.isBuffer(a)||ce.isStream(a)||ce.isFile(a)||ce.isBlob(a)||ce.isReadableStream(a))return a;if(ce.isArrayBufferView(a))return a.buffer;if(ce.isURLSearchParams(a))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return nB(a,this.formSerializer).toString();if((d=ce.isFileList(a))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ch(d?{"files[]":a}:a,h&&new h,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),sB(a)):a}],transformResponse:[function(a){const e=this.transitional||hu.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(ce.isResponse(a)||ce.isReadableStream(a))return a;if(a&&ce.isString(a)&&(n&&!this.responseType||r)){const l=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(a)}catch(d){if(l)throw d.name==="SyntaxError"?ut.from(d,ut.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{hu.headers[t]={}});const iB=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oB=t=>{const a={};let e,n,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),e=l.substring(0,r).trim().toLowerCase(),n=l.substring(r+1).trim(),!(!e||a[e]&&iB[e])&&(e==="set-cookie"?a[e]?a[e].push(n):a[e]=[n]:a[e]=a[e]?a[e]+", "+n:n)}),a},hx=Symbol("internals");function Dc(t){return t&&String(t).trim().toLowerCase()}function Jd(t){return t===!1||t==null?t:ce.isArray(t)?t.map(Jd):String(t)}function lB(t){const a=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)a[n[1]]=n[2];return a}const cB=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sg(t,a,e,n,r){if(ce.isFunction(n))return n.call(this,a,e);if(r&&(a=e),!!ce.isString(a)){if(ce.isString(n))return a.indexOf(n)!==-1;if(ce.isRegExp(n))return n.test(a)}}function uB(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,e,n)=>e.toUpperCase()+n)}function dB(t,a){const e=ce.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(r,o,l){return this[n].call(this,a,r,o,l)},configurable:!0})})}let Ta=class{constructor(a){a&&this.set(a)}set(a,e,n){const r=this;function o(d,h,m){const p=Dc(h);if(!p)throw new Error("header name must be a non-empty string");const y=ce.findKey(r,p);(!y||r[y]===void 0||m===!0||m===void 0&&r[y]!==!1)&&(r[y||h]=Jd(d))}const l=(d,h)=>ce.forEach(d,(m,p)=>o(m,p,h));if(ce.isPlainObject(a)||a instanceof this.constructor)l(a,e);else if(ce.isString(a)&&(a=a.trim())&&!cB(a))l(oB(a),e);else if(ce.isObject(a)&&ce.isIterable(a)){let d={},h,m;for(const p of a){if(!ce.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[m=p[0]]=(h=d[m])?ce.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(d,e)}else a!=null&&o(e,a,n);return this}get(a,e){if(a=Dc(a),a){const n=ce.findKey(this,a);if(n){const r=this[n];if(!e)return r;if(e===!0)return lB(r);if(ce.isFunction(e))return e.call(this,r,n);if(ce.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,e){if(a=Dc(a),a){const n=ce.findKey(this,a);return!!(n&&this[n]!==void 0&&(!e||sg(this,this[n],n,e)))}return!1}delete(a,e){const n=this;let r=!1;function o(l){if(l=Dc(l),l){const d=ce.findKey(n,l);d&&(!e||sg(n,n[d],d,e))&&(delete n[d],r=!0)}}return ce.isArray(a)?a.forEach(o):o(a),r}clear(a){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const o=e[n];(!a||sg(this,this[o],o,a,!0))&&(delete this[o],r=!0)}return r}normalize(a){const e=this,n={};return ce.forEach(this,(r,o)=>{const l=ce.findKey(n,o);if(l){e[l]=Jd(r),delete e[o];return}const d=a?uB(o):String(o).trim();d!==o&&delete e[o],e[d]=Jd(r),n[d]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const e=Object.create(null);return ce.forEach(this,(n,r)=>{n!=null&&n!==!1&&(e[r]=a&&ce.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,e])=>a+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...e){const n=new this(a);return e.forEach(r=>n.set(r)),n}static accessor(a){const n=(this[hx]=this[hx]={accessors:{}}).accessors,r=this.prototype;function o(l){const d=Dc(l);n[d]||(dB(r,l),n[d]=!0)}return ce.isArray(a)?a.forEach(o):o(a),this}};Ta.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Ta.prototype,({value:t},a)=>{let e=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[e]=n}}});ce.freezeMethods(Ta);function ig(t,a){const e=this||hu,n=a||e,r=Ta.from(n.headers);let o=n.data;return ce.forEach(t,function(d){o=d.call(e,o,r.normalize(),a?a.status:void 0)}),r.normalize(),o}function CE(t){return!!(t&&t.__CANCEL__)}function Sl(t,a,e){ut.call(this,t??"canceled",ut.ERR_CANCELED,a,e),this.name="CanceledError"}ce.inherits(Sl,ut,{__CANCEL__:!0});function _E(t,a,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):a(new ut("Request failed with status code "+e.status,[ut.ERR_BAD_REQUEST,ut.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function fB(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function hB(t,a){t=t||10;const e=new Array(t),n=new Array(t);let r=0,o=0,l;return a=a!==void 0?a:1e3,function(h){const m=Date.now(),p=n[o];l||(l=m),e[r]=h,n[r]=m;let y=o,b=0;for(;y!==r;)b+=e[y++],y=y%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),m-l<a)return;const E=p&&m-p;return E?Math.round(b*1e3/E):void 0}}function mB(t,a){let e=0,n=1e3/a,r,o;const l=(m,p=Date.now())=>{e=p,r=null,o&&(clearTimeout(o),o=null),t.apply(null,m)};return[(...m)=>{const p=Date.now(),y=p-e;y>=n?l(m,p):(r=m,o||(o=setTimeout(()=>{o=null,l(r)},n-y)))},()=>r&&l(r)]}const qf=(t,a,e=3)=>{let n=0;const r=hB(50,250);return mB(o=>{const l=o.loaded,d=o.lengthComputable?o.total:void 0,h=l-n,m=r(h),p=l<=d;n=l;const y={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:m||void 0,estimated:m&&d&&p?(d-l)/m:void 0,event:o,lengthComputable:d!=null,[a?"download":"upload"]:!0};t(y)},e)},mx=(t,a)=>{const e=t!=null;return[n=>a[0]({lengthComputable:e,total:t,loaded:n}),a[1]]},px=t=>(...a)=>ce.asap(()=>t(...a)),pB=ma.hasStandardBrowserEnv?((t,a)=>e=>(e=new URL(e,ma.origin),t.protocol===e.protocol&&t.host===e.host&&(a||t.port===e.port)))(new URL(ma.origin),ma.navigator&&/(msie|trident)/i.test(ma.navigator.userAgent)):()=>!0,gB=ma.hasStandardBrowserEnv?{write(t,a,e,n,r,o){const l=[t+"="+encodeURIComponent(a)];ce.isNumber(e)&&l.push("expires="+new Date(e).toGMTString()),ce.isString(n)&&l.push("path="+n),ce.isString(r)&&l.push("domain="+r),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yB(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function vB(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function IE(t,a,e){let n=!yB(a);return t&&(n||e==!1)?vB(t,a):a}const gx=t=>t instanceof Ta?{...t}:t;function co(t,a){a=a||{};const e={};function n(m,p,y,b){return ce.isPlainObject(m)&&ce.isPlainObject(p)?ce.merge.call({caseless:b},m,p):ce.isPlainObject(p)?ce.merge({},p):ce.isArray(p)?p.slice():p}function r(m,p,y,b){if(ce.isUndefined(p)){if(!ce.isUndefined(m))return n(void 0,m,y,b)}else return n(m,p,y,b)}function o(m,p){if(!ce.isUndefined(p))return n(void 0,p)}function l(m,p){if(ce.isUndefined(p)){if(!ce.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function d(m,p,y){if(y in a)return n(m,p);if(y in t)return n(void 0,m)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,p,y)=>r(gx(m),gx(p),y,!0)};return ce.forEach(Object.keys(Object.assign({},t,a)),function(p){const y=h[p]||r,b=y(t[p],a[p],p);ce.isUndefined(b)&&y!==d||(e[p]=b)}),e}const DE=t=>{const a=co({},t);let{data:e,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:l,auth:d}=a;a.headers=l=Ta.from(l),a.url=xE(IE(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(ce.isFormData(e)){if(ma.hasStandardBrowserEnv||ma.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[m,...p]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...p].join("; "))}}if(ma.hasStandardBrowserEnv&&(n&&ce.isFunction(n)&&(n=n(a)),n||n!==!1&&pB(a.url))){const m=r&&o&&gB.read(o);m&&l.set(r,m)}return a},bB=typeof XMLHttpRequest<"u",wB=bB&&function(t){return new Promise(function(e,n){const r=DE(t);let o=r.data;const l=Ta.from(r.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:m}=r,p,y,b,E,S;function C(){E&&E(),S&&S(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function x(){if(!_)return;const A=Ta.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:A,config:t,request:_};_E(function(G){e(G),C()},function(G){n(G),C()},P),_=null}"onloadend"in _?_.onloadend=x:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(x)},_.onabort=function(){_&&(n(new ut("Request aborted",ut.ECONNABORTED,t,_)),_=null)},_.onerror=function(){n(new ut("Network Error",ut.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let k=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const P=r.transitional||SE;r.timeoutErrorMessage&&(k=r.timeoutErrorMessage),n(new ut(k,P.clarifyTimeoutError?ut.ETIMEDOUT:ut.ECONNABORTED,t,_)),_=null},o===void 0&&l.setContentType(null),"setRequestHeader"in _&&ce.forEach(l.toJSON(),function(k,P){_.setRequestHeader(P,k)}),ce.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),d&&d!=="json"&&(_.responseType=r.responseType),m&&([b,S]=qf(m,!0),_.addEventListener("progress",b)),h&&_.upload&&([y,E]=qf(h),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",E)),(r.cancelToken||r.signal)&&(p=A=>{_&&(n(!A||A.type?new Sl(null,t,_):A),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const D=fB(r.url);if(D&&ma.protocols.indexOf(D)===-1){n(new ut("Unsupported protocol "+D+":",ut.ERR_BAD_REQUEST,t));return}_.send(o||null)})},xB=(t,a)=>{const{length:e}=t=t?t.filter(Boolean):[];if(a||e){let n=new AbortController,r;const o=function(m){if(!r){r=!0,d();const p=m instanceof Error?m:this.reason;n.abort(p instanceof ut?p:new Sl(p instanceof Error?p.message:p))}};let l=a&&setTimeout(()=>{l=null,o(new ut(`timeout ${a} of ms exceeded`,ut.ETIMEDOUT))},a);const d=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(o):m.removeEventListener("abort",o)}),t=null)};t.forEach(m=>m.addEventListener("abort",o));const{signal:h}=n;return h.unsubscribe=()=>ce.asap(d),h}},SB=function*(t,a){let e=t.byteLength;if(e<a){yield t;return}let n=0,r;for(;n<e;)r=n+a,yield t.slice(n,r),n=r},EB=async function*(t,a){for await(const e of CB(t))yield*SB(e,a)},CB=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:e,value:n}=await a.read();if(e)break;yield n}}finally{await a.cancel()}},yx=(t,a,e,n)=>{const r=EB(t,a);let o=0,l,d=h=>{l||(l=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await r.next();if(m){d(),h.close();return}let y=p.byteLength;if(e){let b=o+=y;e(b)}h.enqueue(new Uint8Array(p))}catch(m){throw d(m),m}},cancel(h){return d(h),r.return()}},{highWaterMark:2})},_h=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",AE=_h&&typeof ReadableStream=="function",_B=_h&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),TE=(t,...a)=>{try{return!!t(...a)}catch{return!1}},IB=AE&&TE(()=>{let t=!1;const a=new Request(ma.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),vx=64*1024,Xg=AE&&TE(()=>ce.isReadableStream(new Response("").body)),Qf={stream:Xg&&(t=>t.body)};_h&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Qf[a]&&(Qf[a]=ce.isFunction(t[a])?e=>e[a]():(e,n)=>{throw new ut(`Response type '${a}' is not supported`,ut.ERR_NOT_SUPPORT,n)})})})(new Response);const DB=async t=>{if(t==null)return 0;if(ce.isBlob(t))return t.size;if(ce.isSpecCompliantForm(t))return(await new Request(ma.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(t)||ce.isArrayBuffer(t))return t.byteLength;if(ce.isURLSearchParams(t)&&(t=t+""),ce.isString(t))return(await _B(t)).byteLength},AB=async(t,a)=>{const e=ce.toFiniteNumber(t.getContentLength());return e??DB(a)},TB=_h&&(async t=>{let{url:a,method:e,data:n,signal:r,cancelToken:o,timeout:l,onDownloadProgress:d,onUploadProgress:h,responseType:m,headers:p,withCredentials:y="same-origin",fetchOptions:b}=DE(t);m=m?(m+"").toLowerCase():"text";let E=xB([r,o&&o.toAbortSignal()],l),S;const C=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let _;try{if(h&&IB&&e!=="get"&&e!=="head"&&(_=await AB(p,n))!==0){let P=new Request(a,{method:"POST",body:n,duplex:"half"}),L;if(ce.isFormData(n)&&(L=P.headers.get("content-type"))&&p.setContentType(L),P.body){const[G,F]=mx(_,qf(px(h)));n=yx(P.body,vx,G,F)}}ce.isString(y)||(y=y?"include":"omit");const x="credentials"in Request.prototype;S=new Request(a,{...b,signal:E,method:e.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:x?y:void 0});let D=await fetch(S);const A=Xg&&(m==="stream"||m==="response");if(Xg&&(d||A&&C)){const P={};["status","statusText","headers"].forEach(q=>{P[q]=D[q]});const L=ce.toFiniteNumber(D.headers.get("content-length")),[G,F]=d&&mx(L,qf(px(d),!0))||[];D=new Response(yx(D.body,vx,G,()=>{F&&F(),C&&C()}),P)}m=m||"text";let k=await Qf[ce.findKey(Qf,m)||"text"](D,t);return!A&&C&&C(),await new Promise((P,L)=>{_E(P,L,{data:k,headers:Ta.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:S})})}catch(x){throw C&&C(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new ut("Network Error",ut.ERR_NETWORK,t,S),{cause:x.cause||x}):ut.from(x,x&&x.code,t,S)}}),Jg={http:WO,xhr:wB,fetch:TB};ce.forEach(Jg,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const bx=t=>`- ${t}`,MB=t=>ce.isFunction(t)||t===null||t===!1,ME={getAdapter:t=>{t=ce.isArray(t)?t:[t];const{length:a}=t;let e,n;const r={};for(let o=0;o<a;o++){e=t[o];let l;if(n=e,!MB(e)&&(n=Jg[(l=String(e)).toLowerCase()],n===void 0))throw new ut(`Unknown adapter '${l}'`);if(n)break;r[l||"#"+o]=n}if(!n){const o=Object.entries(r).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(bx).join(`
`):" "+bx(o[0]):"as no adapter specified";throw new ut("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:Jg};function og(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Sl(null,t)}function wx(t){return og(t),t.headers=Ta.from(t.headers),t.data=ig.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ME.getAdapter(t.adapter||hu.adapter)(t).then(function(n){return og(t),n.data=ig.call(t,t.transformResponse,n),n.headers=Ta.from(n.headers),n},function(n){return CE(n)||(og(t),n&&n.response&&(n.response.data=ig.call(t,t.transformResponse,n.response),n.response.headers=Ta.from(n.response.headers))),Promise.reject(n)})}const NE="1.9.0",Ih={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{Ih[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});const xx={};Ih.transitional=function(a,e,n){function r(o,l){return"[Axios v"+NE+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,d)=>{if(a===!1)throw new ut(r(l," has been removed"+(e?" in "+e:"")),ut.ERR_DEPRECATED);return e&&!xx[l]&&(xx[l]=!0,console.warn(r(l," has been deprecated since v"+e+" and will be removed in the near future"))),a?a(o,l,d):!0}};Ih.spelling=function(a){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${a}`),!0)};function NB(t,a,e){if(typeof t!="object")throw new ut("options must be an object",ut.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const o=n[r],l=a[o];if(l){const d=t[o],h=d===void 0||l(d,o,t);if(h!==!0)throw new ut("option "+o+" must be "+h,ut.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new ut("Unknown option "+o,ut.ERR_BAD_OPTION)}}const Kd={assertOptions:NB,validators:Ih},Zr=Kd.validators;let so=class{constructor(a){this.defaults=a||{},this.interceptors={request:new fx,response:new fx}}async request(a,e){try{return await this._request(a,e)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(a,e){typeof a=="string"?(e=e||{},e.url=a):e=a||{},e=co(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:o}=e;n!==void 0&&Kd.assertOptions(n,{silentJSONParsing:Zr.transitional(Zr.boolean),forcedJSONParsing:Zr.transitional(Zr.boolean),clarifyTimeoutError:Zr.transitional(Zr.boolean)},!1),r!=null&&(ce.isFunction(r)?e.paramsSerializer={serialize:r}:Kd.assertOptions(r,{encode:Zr.function,serialize:Zr.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Kd.assertOptions(e,{baseUrl:Zr.spelling("baseURL"),withXsrfToken:Zr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let l=o&&ce.merge(o.common,o[e.method]);o&&ce.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),e.headers=Ta.concat(l,o);const d=[];let h=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(e)===!1||(h=h&&C.synchronous,d.unshift(C.fulfilled,C.rejected))});const m=[];this.interceptors.response.forEach(function(C){m.push(C.fulfilled,C.rejected)});let p,y=0,b;if(!h){const S=[wx.bind(this),void 0];for(S.unshift.apply(S,d),S.push.apply(S,m),b=S.length,p=Promise.resolve(e);y<b;)p=p.then(S[y++],S[y++]);return p}b=d.length;let E=e;for(y=0;y<b;){const S=d[y++],C=d[y++];try{E=S(E)}catch(_){C.call(this,_);break}}try{p=wx.call(this,E)}catch(S){return Promise.reject(S)}for(y=0,b=m.length;y<b;)p=p.then(m[y++],m[y++]);return p}getUri(a){a=co(this.defaults,a);const e=IE(a.baseURL,a.url,a.allowAbsoluteUrls);return xE(e,a.params,a.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(a){so.prototype[a]=function(e,n){return this.request(co(n||{},{method:a,url:e,data:(n||{}).data}))}});ce.forEach(["post","put","patch"],function(a){function e(n){return function(o,l,d){return this.request(co(d||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}so.prototype[a]=e(),so.prototype[a+"Form"]=e(!0)});let RB=class RE{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(d=>{n.subscribe(d),o=d}).then(r);return l.cancel=function(){n.unsubscribe(o)},l},a(function(o,l,d){n.reason||(n.reason=new Sl(o,l,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const e=this._listeners.indexOf(a);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const a=new AbortController,e=n=>{a.abort(n)};return this.subscribe(e),a.signal.unsubscribe=()=>this.unsubscribe(e),a.signal}static source(){let a;return{token:new RE(function(r){a=r}),cancel:a}}};function kB(t){return function(e){return t.apply(null,e)}}function LB(t){return ce.isObject(t)&&t.isAxiosError===!0}const Kg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kg).forEach(([t,a])=>{Kg[a]=t});function kE(t){const a=new so(t),e=cE(so.prototype.request,a);return ce.extend(e,so.prototype,a,{allOwnKeys:!0}),ce.extend(e,a,null,{allOwnKeys:!0}),e.create=function(r){return kE(co(t,r))},e}const An=kE(hu);An.Axios=so;An.CanceledError=Sl;An.CancelToken=RB;An.isCancel=CE;An.VERSION=NE;An.toFormData=Ch;An.AxiosError=ut;An.Cancel=An.CanceledError;An.all=function(a){return Promise.all(a)};An.spread=kB;An.isAxiosError=LB;An.mergeConfig=co;An.AxiosHeaders=Ta;An.formToJSON=t=>EE(ce.isHTMLForm(t)?new FormData(t):t);An.getAdapter=ME.getAdapter;An.HttpStatusCode=Kg;An.default=An;const{Axios:EF,AxiosError:CF,CanceledError:_F,isCancel:IF,CancelToken:DF,VERSION:AF,all:TF,Cancel:MF,isAxiosError:NF,spread:RF,toFormData:kF,AxiosHeaders:LF,HttpStatusCode:PF,formToJSON:OF,getAdapter:BF,mergeConfig:UF}=An,PB="AIzaSyCr05_9Bg1oZE7uJcGg48mWzOo4rLjxTQ8";async function Dh(t,a){const e=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/${encodeURIComponent(a)}?key=${PB}`;return(await An.get(e)).data.values}const OB="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",BB="BCAPL SIGNUP";function Sx(t){if(!t)return"";t=t.trim().toLowerCase().replace(/\s+/g,"");let a=t.match(/^(\d{1,2})(:?(\d{2}))?(am|pm)$/);if(!a)return t.toUpperCase();let[,e,,n,r]=a;return n||(n="00"),`${parseInt(e,10)}:${n} ${r.toUpperCase()}`}function UB(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const r=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(r){const[o,l,d,h]=r,m=a[l];if(m){const p=Sx(d),y=Sx(h);e[m].push(`${p} - ${y}`)}}}),e}async function zB(t){try{if(!t)return console.warn("No division selected for standings"),[];const a=t.replace(/[^A-Za-z0-9]/g,"_"),e=`${tt}/static/standings_${a}.json`,n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch standings: ${n.status}`);const r=await n.json();if(!Array.isArray(r))return console.error("Standings data is not an array:",r),[];const o=r.filter(l=>{if(!l||typeof l!="object")return console.warn("Invalid standings entry:",l),!1;if(!l.name||!l.rank)return console.warn("Standings entry missing name or rank:",l),!1;const d=parseInt(l.rank);return isNaN(d)||d<=0?(console.warn("Invalid rank in standings entry:",l),!1):!0});return console.log(`Loaded ${o.length} valid standings entries for division: ${t}`),o}catch(a){return console.error("Failed to load standings:",a),[]}}function pl(t,a){if(!a||typeof a!="string")return console.warn("getPlayerPosition: playerName is undefined or not a string:",a),null;const e=a.toLowerCase().trim(),n=t.find(r=>r.name&&r.name.toLowerCase().trim()===e);return n?parseInt(n.rank):null}function jB(t,a){return t.sort((e,n)=>{const r=e&&e.firstName&&e.lastName?`${e.firstName} ${e.lastName}`:"",o=n&&n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:"",l=pl(a,r),d=pl(a,o);return l!==null&&d!==null?l-d:l!==null&&d===null?-1:l===null&&d!==null?1:r.localeCompare(o)})}function FB(t,a,e){if(!a||a.length===0)return console.warn("No standings data available for Phase 2 filtering"),t;console.log("=== PHASE 2 FILTERING DEBUG ==="),console.log("Current player name:",e),console.log("Standings data:",a),console.log("All players from sheet:",t.map(o=>`${o.firstName} ${o.lastName}`));const n=pl(a,e);if(n===null)return console.warn(`Player ${e} not found in standings`),console.log("Available standings names:",a.map(o=>o.name)),t;console.log(`Phase 2 filtering: ${e} is at position ${n}`);const r=t.filter(o=>{if(!o||!o.firstName||!o.lastName)return console.warn("Player data incomplete, excluding from Phase 2 filtering:",o),!1;const l=`${o.firstName} ${o.lastName}`,d=pl(a,l);if(d===null)return console.warn(`Opponent ${l} not found in standings - excluding from Phase 2`),!1;const h=d-n,m=h<0&&h>=-4;return console.log(`${l} (${d}) - difference: ${h}, eligible: ${m}`),m});return console.log(`Phase 2 filtering complete: ${r.length} eligible opponents out of ${t.length} total players`),console.log("Eligible players:",r.map(o=>`${o.firstName} ${o.lastName}`)),console.log("=== END PHASE 2 DEBUG ==="),r}function e0({onClose:t,excludeName:a,senderName:e,senderEmail:n,onProposalComplete:r,selectedDivision:o,phase:l}){const[d,h]=w.useState([]),[m,p]=w.useState(""),[y,b]=w.useState(!0),[E,S]=w.useState([]),[C,_]=w.useState("search"),[x,D]=w.useState(null),[A,k]=w.useState(null);w.useEffect(()=>{},[d]),w.useEffect(()=>{let F=!0;async function q(){try{const te=await zB(o);F&&S(te);const X=await Dh(OB,`${BB}!A1:L1000`);if(!X||X.length===0){F&&h([]),b(!1);return}let se=X.slice(1).map(ee=>({firstName:ee[0]||"",lastName:ee[1]||"",email:ee[2]||"",phone:ee[3]||"",locations:ee[8]||"",availability:UB(ee[7]||""),pin:ee[11]||"",preferredContacts:(ee[10]||"").split(/\r?\n/).map(j=>j.trim().toLowerCase()).filter(Boolean)})).filter(ee=>ee.email&&ee.firstName&&ee.lastName&&`${ee.firstName} ${ee.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase()));l==="challenge"&&te.length>0?(console.log(" Phase value:",l),console.log(" Standings data length:",te.length),console.log(" Sender name:",e),se=FB(se,te,e),se=jB(se,te)):(console.log("   - phase === 'challenge':",l==="challenge"),console.log("   - standingsData.length > 0:",te.length>0),console.log("   - phase value:",l),console.log("   - standingsData length:",te.length)),F&&(h(se),setTimeout(()=>{},2e3))}catch(te){console.error("Error loading data:",te),F&&h([])}finally{F&&b(!1)}}return q(),()=>{F=!1}},[a,l,e,o]);const P=m.length>=3?d.filter(F=>`${F.firstName} ${F.lastName}`.toLowerCase().includes(m.toLowerCase())&&`${F.firstName} ${F.lastName}`.toLowerCase()!==(a==null?void 0:a.toLowerCase())):[],L=pl(E,e),G=u.createElement(u.Fragment,null,C==="search"&&u.createElement(qn,{open:!0,onClose:t,title:" Player Search",maxWidth:"500px"},l==="challenge"?u.createElement(u.Fragment,null,u.createElement("div",{style:{background:"rgba(229, 62, 62, 0.1)",border:"1px solid #e53e3e",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",color:"#fff"}},u.createElement("strong",null,"Phase 2 (Challenge):")," You can only challenge players ranked 4 spots above in the standings.",u.createElement("br",null),u.createElement("span",{style:{fontSize:"1rem",color:"#fff",marginTop:8,display:"block"}},u.createElement("b",null,"Your Position:")," #",L??"N/A"),d.length>0&&u.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",opacity:.9}},d.length," eligible opponent",d.length!==1?"s":""," available")),y?u.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):u.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},d.length===0?u.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No eligible opponents found within 4 spots above you in the standings."):u.createElement("div",{style:{display:"grid",gap:"8px"}},d.map((F,q)=>{const te=`${F.firstName} ${F.lastName}`,X=pl(E,te);return u.createElement("button",{key:q,onClick:()=>{D(F),_("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:se=>{se.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",se.target.style.transform="translateY(-2px)",se.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:se=>{se.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",se.target.style.transform="translateY(0)",se.target.style.boxShadow="none"}},u.createElement("span",{style:{fontWeight:"bold",color:"#fff"}},"#",X??"N/A"," ",te))})))):u.createElement(u.Fragment,null,m.length>=3&&P.length>0&&u.createElement("div",{style:{color:"#e53e3e",fontSize:"0.9rem",marginBottom:"1rem",textAlign:"center"}},"Click opponent's name to see availability."),u.createElement("input",{type:"text",placeholder:"Type at least 3 letters to search...",value:m,onChange:F=>p(F.target.value),autoFocus:!0,"aria-label":"Search for player",style:{width:"100%",padding:"0.75rem",background:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontSize:"1rem",marginBottom:"1rem"}}),y?u.createElement("p",{style:{color:"#fff",textAlign:"center"}},"Loading players..."):u.createElement(u.Fragment,null,m.length<3?u.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"Please enter at least 3 letters to search for a player."):u.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},P.length===0?u.createElement("p",{style:{color:"#888",textAlign:"center",fontStyle:"italic"}},"No players found."):u.createElement("div",{style:{display:"grid",gap:"8px"}},P.map((F,q)=>u.createElement("button",{key:q,onClick:()=>{D(F),_("availability")},style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:te=>{te.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",te.target.style.transform="translateY(-2px)",te.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:te=>{te.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",te.target.style.transform="translateY(0)",te.target.style.boxShadow="none"}},u.createElement(gT,{text:`${F.firstName} ${F.lastName}`,query:m})))))))),C==="availability"&&x&&u.createElement(M0,{player:x,onClose:t,onProposeMatch:(F,q,te,X)=>{k({player:x,day:F,slot:q,phase:te,selectedDivision:X||o}),_("proposal")},phase:l,selectedDivision:o}),C==="proposal"&&A&&u.createElement(u.Fragment,null,u.createElement(Q0,{player:A.player,day:A.day,slot:A.slot,onClose:t,senderName:e,senderEmail:n,onProposalComplete:()=>{_("search"),k(null),D(null),r&&r(),t()},phase:A.phase,selectedDivision:A.selectedDivision||o})));return tu.createPortal(G,document.body)}function HB({size:t="medium",color:a="#e53e3e",text:e="Loading...",showText:n=!0,variant:r="default"}){const o={small:"16px",medium:"24px",large:"32px",xlarge:"48px"},l=o[t]||o.medium,d=()=>{switch(r){case"pulse":return u.createElement("div",{style:{width:l,height:l,borderRadius:"50%",background:a,animation:"pulse 1.5s ease-in-out infinite"}});case"dots":return u.createElement("div",{style:{display:"flex",gap:"4px"}},[0,1,2].map(h=>u.createElement("div",{key:h,style:{width:"8px",height:"8px",borderRadius:"50%",background:a,animation:"bounce 1.4s ease-in-out infinite both",animationDelay:`${h*.16}s`}})));case"bars":return u.createElement("div",{style:{display:"flex",gap:"2px"}},[0,1,2,3,4].map(h=>u.createElement("div",{key:h,style:{width:"4px",height:"20px",background:a,animation:"bars 1.2s ease-in-out infinite",animationDelay:`${h*.1}s`}})));default:return u.createElement("div",{style:{width:l,height:l,border:"3px solid rgba(229, 62, 62, 0.2)",borderTop:`3px solid ${a}`,borderRadius:"50%",animation:"spin 1s linear infinite"}})}};return u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"12px",padding:"20px"}},d(),n&&e&&u.createElement("div",{style:{color:a,fontSize:"0.9rem",fontWeight:"500",textAlign:"center",maxWidth:"200px"}},e),u.createElement("style",null,`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
          0%, 100% { 
            transform: scale(0.8);
            opacity: 0.5;
          }
          50% { 
            transform: scale(1);
            opacity: 1;
          }
        }
        
        @keyframes bounce {
          0%, 80%, 100% { 
            transform: scale(0);
          }
          40% { 
            transform: scale(1);
          }
        }
        
        @keyframes bars {
          0%, 40%, 100% { 
            transform: scaleY(0.4);
          }
          20% { 
            transform: scaleY(1);
          }
        }
      `))}function LE({loading:t,children:a,loadingText:e="Loading...",disabled:n=!1,variant:r="default",size:o="medium",...l}){const d={small:{padding:"8px 16px",fontSize:"0.875rem",minHeight:"36px"},medium:{padding:"12px 20px",fontSize:"1rem",minHeight:"48px"},large:{padding:"16px 24px",fontSize:"1.125rem",minHeight:"56px"}},h=d[o]||d.medium;return u.createElement("button",{...l,disabled:t||n,style:{...l.style,...h,position:"relative",opacity:t?.8:1,cursor:t?"not-allowed":"pointer",transition:"all 0.3s ease"}},t?u.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}},u.createElement(HB,{size:"small",variant:r,showText:!1,color:"#fff"}),e):a)}function YB({lines:t=3,height:a="20px",width:e="100%",gap:n="8px",variant:r="default"}){const o=l=>{const h=l===t-1?"60%":e;switch(r){case"pulse":return u.createElement("div",{key:l,style:{height:a,width:h,background:"#444",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}});case"shimmer":return u.createElement("div",{key:l,style:{height:a,width:h,background:"linear-gradient(90deg, #333 25%, #444 50%, #333 75%)",backgroundSize:"200% 100%",borderRadius:"4px",animation:"shimmer 1.5s infinite"}});default:return u.createElement("div",{key:l,style:{height:a,width:h,background:"#333",borderRadius:"4px",opacity:.7}})}};return u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:n,padding:"16px"}},Array.from({length:t}).map((l,d)=>o(d)),u.createElement("style",null,`
        @keyframes pulse {
          0%, 100% { 
            opacity: 0.7;
          }
          50% { 
            opacity: 1;
          }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
      `))}function WB(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function GB({proposal:t,open:a,onClose:e,onEdit:n,onMessage:r}){if(w.useEffect(()=>{a&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},50)},[a]),!a||!t)return null;const{senderName:o,receiverName:l,day:d,date:h,time:m,location:p,gameType:y,raceLength:b,message:E,proposalNote:S}=t,C=window.innerWidth<=500,[_,x]=w.useState(!1),[D,A]=w.useState("");async function k(){x(!0),A("");try{if(!(await fetch(`${tt}/api/proposals/${t._id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"confirmed"})})).ok)throw new Error("Failed to confirm proposal");e&&e()}catch(L){A(L.message||"Failed to confirm proposal")}finally{x(!1)}}const P=u.createElement(qn,{open:a,onClose:e,title:" Proposal Details",maxWidth:C?"99vw":"480px"},t.isCounter&&u.createElement("div",{style:{color:"#ff9800",fontWeight:"bold",marginBottom:8,fontSize:"1.05em",textAlign:"center"}},"This is a counter proposal from ",t.counteredBy||"your opponent"),u.createElement("div",{style:{textAlign:"left",marginBottom:C?"0.7rem":"1.5rem",fontSize:C?"0.95rem":"1.05rem",padding:C?"0.2rem 0.2rem":void 0}},u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"You:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},o||"N/A")),u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Opponent:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},l||"N/A")),d&&u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Day:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},d)),u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Date:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},WB(h))),u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Time:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},m||"N/A")),u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Location:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},p||"N/A")),y&&u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement(ah,{gameType:y,size:C?12:16}),u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Game:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},y)),b&&u.createElement("div",{className:le.modalDetailRowSnazzy,style:{padding:C?"0.2em 0.3em":void 0}},u.createElement("strong",{style:{color:"#e53e3e",minWidth:C?"80px":"120px",fontSize:C?"0.95em":void 0}},"Race:"),u.createElement("span",{style:{color:"#fff",marginLeft:C?"4px":"8px"}},b)),S&&u.createElement("div",{style:{margin:C?"8px 0 0 0":"16px 0 0 0",padding:C?"0.4rem 0.5rem":"0.8rem 1rem",background:"rgba(255, 193, 7, 0.1)",borderLeft:"3px solid #ffc107",borderRadius:"6px",color:"#ffc107",fontSize:C?"0.9rem":"0.95rem",textAlign:"left"}},u.createElement("span",{role:"img","aria-label":"note"},"")," ",u.createElement("strong",null,"Note:"),u.createElement("br",null),S)),u.createElement("div",{style:{display:"flex",gap:C?6:12,justifyContent:"center",marginTop:C?10:24,flexDirection:C?"column":"row",alignItems:C?"stretch":"center"}},n&&u.createElement("button",{className:le.dashboardBtn,onClick:n,style:{background:"#e53e3e",color:"#fff",minWidth:C?"90px":"120px",fontSize:C?"0.95em":void 0,padding:C?"0.5em 0.7em":void 0}},"Edit"),r&&u.createElement("button",{className:le.dashboardBtn,onClick:r,style:{background:"#007bff",color:"#fff",minWidth:C?"90px":"120px",fontSize:C?"0.95em":void 0,padding:C?"0.5em 0.7em":void 0}},"Msg"),t.isCounter&&t.status==="countered"&&u.createElement(LE,{className:le.dashboardBtn,onClick:k,loading:_,loadingText:"Confirming...",disabled:_,style:{background:"#43a047",color:"#fff",minWidth:C?"90px":"120px",fontSize:C?"0.95em":void 0,padding:C?"0.5em 0.7em":void 0}},"Confirm"),u.createElement("button",{className:le.dashboardBtn,onClick:e,style:{background:"#6c757d",color:"#fff",minWidth:C?"90px":"120px",fontSize:C?"0.95em":void 0,padding:C?"0.5em 0.7em":void 0}},"Close")),D&&u.createElement("div",{style:{color:"red",marginTop:8}},D));return tu.createPortal(P,document.body)}function lg(t){const a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}-${e}-${n}`}function $B(t){const e=t.trim().replace(/\s+/g,"").toLowerCase().match(/^(\d{1,2})(:\d{2})?(am|pm)$/);if(e){const r=e[1],o=e[2]?e[2]:":00",l=e[3].toUpperCase();return`${r}${o} ${l}`}const n=t.trim().match(/^(\d{1,2})(:\d{2})?\s?(am|pm)$/i);if(n){const r=n[1],o=n[2]?n[2]:":00",l=n[3].toUpperCase();return`${r}${o} ${l}`}return t.trim()}const ZB=t=>t.replace(/[]/g,"-").replace(/\s*-\s*/g," - ").trim();function qB({proposal:t,open:a,onClose:e,onSave:n,selectedDivision:r,phase:o,receiverPlayer:l}){var T;const[d,h]=w.useState(new Date),[m,p]=w.useState(""),[y,b]=w.useState(""),[E,S]=w.useState(""),[C,_]=w.useState(""),[x,D]=w.useState(""),[A,k]=w.useState(""),[P,L]=w.useState(""),[G,F]=w.useState(!1);w.useEffect(()=>{if(t&&a){if(t.date){const[U,K,V]=t.date.split("-");h(new Date(parseInt(U),parseInt(K)-1,parseInt(V)))}p(t.time||""),S(t.location||""),_(t.message||""),D(t.gameType||""),k(t.raceLength||"")}},[t,a]);const te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()],se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()],ee=((T=l==null?void 0:l.availability)==null?void 0:T[se])||[];console.log("EditProposalModal - Receiver player:",l),console.log("EditProposalModal - Selected day short:",se),console.log("EditProposalModal - Opponent time blocks:",ee);const j=["6:00 PM - 8:00 PM","8:00 PM - 10:00 PM","10:00 PM - 12:00 AM"],H=ee.length>0?ee:j;console.log("EditProposalModal - Available time blocks:",H);const R=!l&&a,B=u.useMemo(()=>{if(!m)return console.log("EditProposalModal - No time selected:",m),[];console.log("EditProposalModal - Selected time block:",m);const U=ZB(m);if(console.log("EditProposalModal - Normalized slot:",U),!U.includes(" - "))return console.log("EditProposalModal - No dash found in normalized slot"),[];let[K,V]=U.split(" - ").map(Ee=>$B(Ee.trim()));if(console.log("EditProposalModal - Normalized times:",{blockStart:K,blockEnd:V}),!K||!V)return console.log("EditProposalModal - Failed to normalize times"),[];const re=T0(K,V,30);return console.log("EditProposalModal - Generated start times:",re),console.log("EditProposalModal - Times array length:",re.length),re},[m]);w.useEffect(()=>{b("")},[m]);const Y=async()=>{if(!y||!E){L("Please fill in all required fields.");return}F(!0),L("");try{const U=await fetch(`${tt}/api/proposals/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:lg(d),time:y,location:E,message:C,gameType:x,raceLength:A,phase:o,divisions:[r]})}),K=await U.json();if(!U.ok)throw new Error(K.error||"Failed to update proposal");n&&n({...t,date:lg(d),time:y,location:E,message:C,gameType:x,raceLength:A}),e()}catch(U){L(U.message||"Failed to update proposal")}finally{F(!1)}};if(!a||!t)return null;const $=u.createElement(qn,{open:a,onClose:e,title:" Edit Proposal",maxWidth:"400px"},u.createElement("div",{className:le.proposalModalContent,style:{width:"100%",maxWidth:400,margin:"0 auto"}},u.createElement("div",{className:le.proposalModalHeaderBar},u.createElement("span",{className:le.phasePill},"Phase 1: Scheduled Match Phase"),u.createElement("span",{className:le.divisionPill},"Division: ",r||"N/A")),u.createElement("div",{className:le.proposalModalToRow},u.createElement("span",{className:le.toOpponentLabel},"To Opponent:"),u.createElement("span",{className:le.toOpponentName},t.receiverName)),u.createElement("div",{className:le.proposalModalDayRow},u.createElement("span",{className:le.dayLabel},"Day:"),u.createElement("span",{className:le.dayValue},te)),u.createElement("div",{className:le.formGroup,style:{display:"flex",flexDirection:"column",alignItems:"center"}},u.createElement("label",{htmlFor:"proposal-date",style:{marginBottom:4,textAlign:"center"}},"Date"),u.createElement("input",{id:"proposal-date",type:"date",value:lg(d),onChange:U=>{const[K,V,re]=U.target.value.split("-");h(new Date(parseInt(K),parseInt(V)-1,parseInt(re)))},className:le.input,required:!0,style:{textAlign:"center"}})),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Time Block:"),R&&u.createElement("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",marginBottom:"0.5rem"}}," Opponent availability data not available. Using default time blocks."),l&&ee.length===0&&u.createElement("div",{style:{color:"#ffa500",fontSize:"0.9rem",marginBottom:"0.5rem"}}," No availability for ",te,". Using default time blocks."),u.createElement("select",{value:m,onChange:U=>p(U.target.value),className:le.inputField},u.createElement("option",{value:""},"Select time block"),H.map(U=>u.createElement("option",{key:U,value:U},U)))),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Start Time:"),u.createElement("select",{value:y,onChange:U=>b(U.target.value),className:le.inputField},u.createElement("option",{value:""},"Select start time"),B.map(U=>u.createElement("option",{key:U,value:U},U)))),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Game Type:"),u.createElement("select",{value:x,onChange:U=>D(U.target.value),className:le.inputField},u.createElement("option",{value:""},"Select game type"),u.createElement("option",{value:"8 Ball"},"8 Ball"),u.createElement("option",{value:"9 Ball"},"9 Ball"),u.createElement("option",{value:"10 Ball"},"10 Ball"),u.createElement("option",{value:"Mixed"},"Mixed"))),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Race Length:"),u.createElement("select",{value:A,onChange:U=>k(U.target.value),className:le.inputField},u.createElement("option",{value:""},"Select race length"),u.createElement("option",{value:"3"},"3"),u.createElement("option",{value:"5"},"5"),u.createElement("option",{value:"7"},"7"),u.createElement("option",{value:"9"},"9"))),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Location:"),u.createElement("input",{type:"text",value:E,onChange:U=>S(U.target.value),placeholder:"Enter location",className:le.inputField})),u.createElement("div",{className:le.proposalModalFieldRow},u.createElement("span",{className:le.fieldLabel},"Message to Opponent:"),u.createElement("textarea",{value:C,onChange:U=>_(U.target.value),placeholder:"Message to opponent",rows:3,className:le.inputField})),P&&u.createElement("div",{className:le.errorBox},P),u.createElement("div",{className:le.proposalModalButtonRow},u.createElement("button",{className:le.dashboardBtn,onClick:Y,disabled:G,style:{width:"48%"}},G?"Saving...":"Save Changes"),u.createElement("button",{className:le.dashboardBtn,onClick:e,disabled:G,style:{width:"48%"}},"Cancel"))));return tu.createPortal($,document.body)}const QB="_container_qqpwh_3",VB="_header_qqpwh_23",XB="_headerButtons_qqpwh_57",JB="_newChatButton_qqpwh_69",KB="_closeButton_qqpwh_101",e8="_content_qqpwh_133",t8="_conversationsList_qqpwh_147",n8="_loading_qqpwh_181",a8="_emptyState_qqpwh_193",r8="_startChatButton_qqpwh_215",s8="_conversationItems_qqpwh_245",i8="_conversationItem_qqpwh_245",o8="_active_qqpwh_283",l8="_conversationInfo_qqpwh_293",c8="_conversationName_qqpwh_303",u8="_lastMessage_qqpwh_321",d8="_conversationMeta_qqpwh_345",f8="_timestamp_qqpwh_361",h8="_unreadBadge_qqpwh_379",m8="_messagesArea_qqpwh_407",p8="_messagesHeader_qqpwh_421",g8="_messagesList_qqpwh_447",y8="_messageItem_qqpwh_465",v8="_myMessage_qqpwh_475",b8="_theirMessage_qqpwh_483",w8="_messageBubble_qqpwh_491",x8="_messageContent_qqpwh_527",S8="_messageTime_qqpwh_539",E8="_readStatus_qqpwh_563",C8="_noConversation_qqpwh_571",_8="_messageInput_qqpwh_591",I8="_sendButton_qqpwh_647",D8="_playerList_qqpwh_769",A8="_playerItem_qqpwh_781",T8="_selected_qqpwh_807",M8="_playerName_qqpwh_817",N8="_modalActions_qqpwh_847",R8="_cancelButton_qqpwh_861",k8="_startButton_qqpwh_893",L8="_error_qqpwh_939",ht={container:QB,header:VB,headerButtons:XB,newChatButton:JB,closeButton:KB,content:e8,conversationsList:t8,loading:n8,emptyState:a8,startChatButton:r8,conversationItems:s8,conversationItem:i8,active:o8,conversationInfo:l8,conversationName:c8,lastMessage:u8,conversationMeta:d8,timestamp:f8,unreadBadge:h8,messagesArea:m8,messagesHeader:p8,messagesList:g8,messageItem:y8,myMessage:v8,theirMessage:b8,messageBubble:w8,messageContent:x8,messageTime:S8,readStatus:E8,noConversation:C8,messageInput:_8,sendButton:I8,playerList:D8,playerItem:A8,selected:T8,playerName:M8,modalActions:N8,cancelButton:R8,startButton:k8,error:L8};console.log("DirectMessagingModal BACKEND_URL in use:",tt);function P8({userName:t,userEmail:a,userPin:e,selectedDivision:n,opponentEmails:r=[],onClose:o}){console.log("Opponent Emails:",r);const[l,d]=w.useState([]),[h,m]=w.useState(null),[p,y]=w.useState([]),[b,E]=w.useState(""),[S,C]=w.useState(!1),[_,x]=w.useState(!1),[D,A]=w.useState(""),[k,P]=w.useState([]),[L,G]=w.useState(!1),[F,q]=w.useState(null),te=w.useRef(null);w.useEffect(()=>{async function R(){try{const Y=await(await fetch(`${tt}/api/users`)).json();Array.isArray(Y)&&P(Y.filter($=>$.email!==a))}catch(B){console.error("Failed to load players:",B)}}R()},[a]),w.useEffect(()=>{async function R(){C(!0);try{const Y=await(await fetch(`${tt}/api/messages/conversations?user=${encodeURIComponent(a)}`)).json();console.log("Conversations fetch data:",Y),Array.isArray(Y)&&d(Y)}catch(B){console.error("Failed to load conversations:",B),A("Failed to load conversations")}finally{C(!1)}}R()},[a]),w.useEffect(()=>{if(!h){y([]);return}async function R(){try{const Y=await(await fetch(`${tt}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(h.email)}`)).json();Array.isArray(Y)&&(y(Y),Y.forEach($=>{$.receiverEmail===a&&!$.read&&fetch(`${tt}/api/messages/${$._id}/read`,{method:"PUT"})}))}catch(B){console.error("Failed to load messages:",B),A("Failed to load messages")}}R()},[h,a]),w.useEffect(()=>{te.current&&te.current.scrollIntoView({behavior:"smooth"})},[p]);const X=async()=>{if(!b.trim()||!h)return;x(!0),A("");let R=h.email;if(!R){const B=k.find(Y=>Y.name===h.name&&Y.email);B&&(R=B.email)}if(console.log("Sending message to:",R),!R){A("No email found for selected opponent."),x(!1);return}try{const B=await fetch(`${tt}/api/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderEmail:a,receiverEmail:R,content:b})});if(console.log("Send response:",B),!B.ok)throw new Error("Failed to send message");E("");const $=await(await fetch(`${tt}/api/messages?user1=${encodeURIComponent(a)}&user2=${encodeURIComponent(R)}`)).json();Array.isArray($)&&y($)}catch(B){A(B.message||"Failed to send message")}finally{x(!1)}},se=async()=>{F&&(m(F),G(!1),q(null))},ee=R=>R.unreadCount||0,j=R=>{const B=new Date(R),$=(new Date-B)/(1e3*60*60);return $<24?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):$<48?"Yesterday":B.toLocaleDateString()},H=k.filter(R=>r.length>0?r.includes(R.name):n?Array.isArray(R.divisions)?R.divisions.includes(n):typeof R.divisions=="string"?R.divisions.split(",").map(B=>B.trim()).includes(n):!1:!0).sort((R,B)=>{const Y=`${R.name||""}`.trim().toLowerCase(),$=`${B.name||""}`.trim().toLowerCase();return Y.localeCompare($)});return u.createElement("div",{className:ht.container},u.createElement("div",{className:ht.header},u.createElement("h2",null,"Direct Messages"),u.createElement("div",{className:ht.headerButtons},u.createElement("button",{className:ht.newChatButton,onClick:()=>G(!0),type:"button"}," New Chat"),u.createElement("button",{className:ht.closeButton,onClick:o,type:"button"},""))),u.createElement("div",{className:ht.content},u.createElement("div",{className:ht.conversationsList},u.createElement("h3",null,"Conversations"),S?u.createElement("div",{className:ht.loading},"Loading conversations..."):l.length===0?u.createElement("div",{className:ht.emptyState},u.createElement("p",null,"No conversations yet"),u.createElement("button",{className:ht.startChatButton,onClick:()=>G(!0),type:"button"},"Start a conversation")):u.createElement("div",{className:ht.conversationItems},l.map(R=>u.createElement("div",{key:R.email,className:`${ht.conversationItem} ${(h==null?void 0:h.email)===R.email?ht.active:""}`,onClick:()=>m(R)},u.createElement("div",{className:ht.conversationInfo},u.createElement("div",{className:ht.conversationName},R.name||R.email),u.createElement("div",{className:ht.lastMessage},R.lastMessage||"No messages yet")),u.createElement("div",{className:ht.conversationMeta},u.createElement("div",{className:ht.timestamp},R.lastMessageTime?j(R.lastMessageTime):""),ee(R)>0&&u.createElement("div",{className:ht.unreadBadge},ee(R))))))),u.createElement("div",{className:ht.messagesArea},h?u.createElement(u.Fragment,null,u.createElement("div",{className:ht.messagesHeader},u.createElement("h3",null,"Chat with ",h.name||h.email)),u.createElement("div",{className:ht.messagesList},p.map(R=>u.createElement("div",{key:R._id,className:`${ht.messageItem} ${R.senderEmail===a?ht.myMessage:ht.theirMessage}`},u.createElement("div",{className:ht.messageBubble},u.createElement("div",{className:ht.messageContent},R.content),u.createElement("div",{className:ht.messageTime},j(R.timestamp),R.senderEmail===a&&u.createElement("span",{className:ht.readStatus},R.read?"":""))))),u.createElement("div",{ref:te})),u.createElement("div",{className:ht.messageInput},u.createElement("input",{type:"text",value:b,onChange:R=>E(R.target.value),onKeyDown:R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),X())},placeholder:"Type a message...",disabled:_}),u.createElement("button",{onClick:X,disabled:_||!b.trim(),className:ht.sendButton,type:"button"},"Send"))):u.createElement("div",{className:ht.noConversation},u.createElement("p",null,"Select a conversation to start messaging")))),L&&u.createElement(qn,{open:L,onClose:()=>{G(!1),q(null)},title:"Start New Conversation",maxWidth:"400px"},u.createElement("button",{style:{position:"absolute",top:10,right:10,background:"none",border:"none",color:"#fff",fontSize:24,cursor:"pointer",zIndex:10001},onClick:()=>{G(!1),q(null)},"aria-label":"Close",type:"button"},""),u.createElement("div",{className:ht.playerList},H.map(R=>u.createElement("div",{key:R._id||R.email,className:`${ht.playerItem} ${(F==null?void 0:F.email)===R.email?ht.selected:""}`,onClick:()=>q(R)},u.createElement("div",{className:ht.playerName},R.name?R.name:R.email)))),u.createElement("div",{className:ht.modalActions},u.createElement("button",{onClick:()=>{G(!1),q(null)},className:ht.cancelButton,type:"button"},"Cancel"),u.createElement("button",{onClick:se,disabled:!F,className:ht.startButton,type:"button"},"Start Chat"))),D&&u.createElement("div",{className:ht.error},D))}const O8="_customChannelHeader_1kvzt_1",B8="_customChannelHeaderIcon_1kvzt_51",U8="_customChannelHeaderTitle_1kvzt_61",z8="_customChannelHeaderDate_1kvzt_71",j8="_customChannelHeaderOnline_1kvzt_83",F8="_customChannelHeaderOnlineLabel_1kvzt_97",H8="_customChannelHeaderNone_1kvzt_109",Y8="_customChannelHeaderAvatar_1kvzt_119",bi={customChannelHeader:O8,customChannelHeaderIcon:B8,customChannelHeaderTitle:U8,customChannelHeaderDate:z8,customChannelHeaderOnline:j8,customChannelHeaderOnlineLabel:F8,customChannelHeaderNone:H8,customChannelHeaderAvatar:Y8};function W8(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function G8(t){if(!t)return"";const a=t.trim().split(" ");if(a.length===1){const e=a[0].split(/[^a-zA-Z0-9]/).filter(Boolean);return e.length>1?(e[0][0]+e[1][0]).toUpperCase():a[0].slice(0,2).toUpperCase()}return(a[0][0]+a[a.length-1][0]).toUpperCase()}function $8({channel:t,currentUser:a}){var l,d,h;const e=((l=t==null?void 0:t.data)==null?void 0:l.name)||(t==null?void 0:t.id)||"General Chat",n=(d=t==null?void 0:t.data)==null?void 0:d.matchDate,r=a==null?void 0:a.id,o=(h=t==null?void 0:t.state)!=null&&h.members?Object.values(t.state.members).filter(m=>{var p,y;return((p=m.user)==null?void 0:p.online)||((y=m.user)==null?void 0:y.id)===r}).map(m=>{var p,y;return((p=m.user)==null?void 0:p.name)||((y=m.user)==null?void 0:y.id)}).filter(Boolean):[(a==null?void 0:a.name)||(a==null?void 0:a.id)].filter(Boolean);return u.createElement("div",{className:bi.customChannelHeader,style:{width:"100%",margin:"0",borderRadius:"0",marginTop:"0",marginBottom:"0"}},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%"}},u.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.8em",fontSize:"1.1em",textAlign:"center",width:"100%"}},u.createElement("span",{className:bi.customChannelHeaderIcon},""),u.createElement("span",{style:{textAlign:"center"}},"You're in the"," ",u.createElement("span",{className:bi.customChannelHeaderTitle},'"',e,'"')," ","channel."),n&&u.createElement("span",{className:bi.customChannelHeaderDate},"Match Date: ",W8(n))),u.createElement("div",{className:bi.customChannelHeaderOnline},u.createElement("span",{className:bi.customChannelHeaderOnlineLabel},"Online:"),o.length===0&&u.createElement("span",{className:bi.customChannelHeaderNone},"No one online"),o.map(m=>u.createElement("span",{key:m,className:bi.customChannelHeaderAvatar,title:m},G8(m))))))}const PE={async getUser(t){return _n.get(`/api/users/${encodeURIComponent(t)}`)},async syncUsers(){return _n.post("/admin/sync-users")}};class Z8{async getCurrentSeason(a){try{const e=await fetch(`${tt}/api/seasons/current/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current season:",e),null}}async getCurrentPhaseAndWeek(a){try{const e=await fetch(`${tt}/api/seasons/phase/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching current phase and week:",e),{currentWeek:null,phase:"offseason",isActive:!1,season:null}}}async getAllSeasons(a){try{const e=await fetch(`${tt}/api/seasons/${encodeURIComponent(a)}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching all seasons:",e),[]}}isMatchWithinPhase1Deadline(a,e){if(!e||!e.phase1End)return!0;const n=new Date(a),r=new Date(e.phase1End);return n<=r}getDaysUntilPhase1Deadline(a){if(!a||!a.phase1End)return null;const e=new Date,r=new Date(a.phase1End)-e;return Math.ceil(r/(1e3*60*60*24))}hasPhase1DeadlinePassed(a){if(!a||!a.phase1End)return!1;const e=new Date,n=new Date(a.phase1End);return e>n}hasPhase2Started(a){if(!a||!a.phase2Start)return!1;const e=new Date,n=new Date(a.phase2Start);return e>=n}getDaysUntilPhase2Deadline(a){if(!a||!a.phase2End)return null;const e=new Date,r=new Date(a.phase2End)-e;return Math.ceil(r/(1e3*60*60*24))}hasPhase2DeadlinePassed(a){if(!a||!a.phase2End)return!1;const e=new Date,n=new Date(a.phase2End);return e>n}getCurrentPhaseFromDates(a){if(!a)return"offseason";const e=new Date,n=new Date(a.phase1Start),r=new Date(a.phase1End),o=new Date(a.phase2Start),l=new Date(a.phase2End);return e<n?"offseason":e>=n&&e<=r?"scheduled":e>=o&&e<=l?"challenge":e>l?"completed":"transition"}}const Ii=new Z8,q8="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",Q8="BCAPL SIGNUP";function V8({userName:t,userEmail:a,userPin:e,onClose:n,fromChat:r=!1}){const[o,l]=w.useState([]),[d,h]=w.useState(!0),[m,p]=w.useState(""),[y,b]=w.useState("scheduled"),[E,S]=w.useState(!1),[C,_]=w.useState(!1),[x,D]=w.useState(!1),[A,k]=w.useState(!1),[P,L]=w.useState(null),[G,F]=w.useState(null),[q,te]=w.useState([]),[X,se]=w.useState([]),[ee,j]=w.useState(!1);w.useEffect(()=>{a&&PE.getUser(a).then(U=>{let K=[];Array.isArray(U.divisions)?K=U.divisions.map(V=>V.trim()).filter(Boolean):typeof U.divisions=="string"?K=U.divisions.split(",").map(V=>V.trim()).filter(Boolean):K=[],l(K),h(!1)}).catch(()=>{l([]),h(!1)})},[a]);const H=async U=>{j(!0);try{const K=`schedule_${U.replace(/[^A-Za-z0-9]/g,"_")}.json`,V=Date.now(),re=`${tt}/static/${K}?t=${V}`,Ee=await fetch(re,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!Ee.ok)throw new Error("Schedule not found");const Ce=await Ee.json();te(Ce);const Be=await fetch(`${tt}/api/users?t=${V}`,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!Be.ok)throw new Error("Players not found");const be=await Be.json();se(be)}catch(K){console.error("Failed to load schedule data:",K),te([]),se([])}finally{j(!1)}},R=async U=>{p(U);try{const K=await Ii.getCurrentPhaseAndWeek(U),V=(K==null?void 0:K.phase)||"scheduled";b(V),V==="scheduled"||V==="offseason"?(await H(U),S(!0)):_(!0)}catch(K){console.error("Error fetching phase data:",K),_(!0)}},B=()=>{if(!q.length||!X.length||!m)return[];const U=`${t}`,K=[];for(const Ee of q)if(Ee.player1&&Ee.player2&&!Ee.scheduled){const Ce=Ee.player1.trim(),Be=Ee.player2.trim();(Ce.toLowerCase()===U.toLowerCase()||Be.toLowerCase()===U.toLowerCase())&&K.push(Ee)}const V=X.filter(Ee=>Ee.divisions&&Ee.divisions.includes(m));return K.map(Ee=>{var be,Ve;const Ce=Ee.player1&&Ee.player1.trim().toLowerCase()===U.toLowerCase()?(be=Ee.player2)==null?void 0:be.trim():(Ve=Ee.player1)==null?void 0:Ve.trim();if(!Ce)return null;const Be=V.find(rt=>rt.name&&rt.name.trim().toLowerCase()===Ce.toLowerCase());return{match:Ee,player:Be,opponentName:Ce}}).filter(Boolean)},Y=async U=>{const V=X.filter(re=>re.divisions&&re.divisions.includes(m)).find(re=>re.name&&re.name.trim().toLowerCase()===U.trim().toLowerCase());if(!V){alert("Player data not found for: "+U);return}if(!V.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}if(r){try{const Ce=(await Dh(q8,`${Q8}!A1:L1000`)).slice(1).map(Be=>({firstName:Be[0]||"",lastName:Be[1]||"",email:Be[2]||"",phone:Be[3]||"",locations:Be[8]||"",availability:Be[7]||"",pin:Be[11]||"",preferredContacts:(Be[10]||"").split(/\r?\n/).map(be=>be.trim().toLowerCase()).filter(Boolean)})).filter(Be=>Be.email&&Be.firstName&&Be.lastName).find(Be=>`${Be.firstName} ${Be.lastName}`.trim().toLowerCase()===U.trim().toLowerCase());if(Ce){const Be=Ig(Ce.availability),be={...Ce,availability:Be};L(be)}else L(V)}catch(re){console.error("Error fetching detailed player data:",re),L(V)}S(!1),D(!0)}else S(!1),_(!0)},$=(U,K,V,re)=>{F({day:U,slot:K,phase:V,division:re,opponent:P}),D(!1),k(!0)},T=()=>{S(!1),_(!1),D(!1),k(!1),L(null),F(null),p(""),n()};return d?u.createElement(qn,{open:!0,onClose:n,title:"Loading Divisions...",maxWidth:"500px"},u.createElement("div",{style:{textAlign:"center",padding:"2rem"}},u.createElement("p",null,"Please wait while we load your divisions..."))):o.length===0?u.createElement(qn,{open:!0,onClose:n,title:"No Divisions Found",maxWidth:"500px"},u.createElement("div",{style:{textAlign:"center",padding:"2rem"}},u.createElement("p",null,"You are not registered for any divisions. Please contact an administrator."),u.createElement("button",{onClick:n,style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"0.8rem 1.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"1rem"},onMouseEnter:U=>{U.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",U.target.style.transform="translateY(-2px)",U.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:U=>{U.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",U.target.style.transform="translateY(0)",U.target.style.boxShadow="none"}},"Close"))):u.createElement(u.Fragment,null,!E&&!C&&u.createElement(qn,{open:!0,onClose:n,title:"Select Division",maxWidth:"500px"},u.createElement("div",{style:{maxHeight:"60vh",overflowY:"auto"}},u.createElement("p",{style:{color:"#fff",textAlign:"center",marginBottom:"1.5rem",fontSize:"1rem"}},"Choose a division to schedule a match:"),u.createElement("div",{style:{display:"grid",gap:"12px"}},o.map(U=>u.createElement("button",{key:U,onClick:()=>R(U),style:{background:"linear-gradient(135deg, #232323 0%, #2a0909 100%)",color:"#fff",border:"2px solid #e53e3e",borderRadius:"8px",padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:K=>{K.target.style.background="linear-gradient(135deg, #e53e3e 0%, #c00 100%)",K.target.style.transform="translateY(-2px)",K.target.style.boxShadow="0 4px 12px rgba(229, 62, 62, 0.3)"},onMouseLeave:K=>{K.target.style.background="linear-gradient(135deg, #232323 0%, #2a0909 100%)",K.target.style.transform="translateY(0)",K.target.style.boxShadow="none"}}," ",U))))),E&&(ee?u.createElement(qn,{open:!0,onClose:T,title:"Loading Opponents...",maxWidth:"500px"},u.createElement("div",{style:{textAlign:"center",padding:"2rem"}},u.createElement("p",null,"Please wait while we load your scheduled opponents..."))):u.createElement(tS,{open:E,onClose:T,opponents:B(),onOpponentClick:Y,phase:y})),C&&u.createElement(e0,{onClose:T,excludeName:t,senderName:t,senderEmail:a,onProposalComplete:()=>{T()},selectedDivision:m,phase:y}),x&&P&&u.createElement(M0,{open:x,onClose:T,player:P,senderName:t,senderEmail:a,selectedDivision:m,onProposeMatch:$,phase:y}),A&&G&&u.createElement(Q0,{open:A,onClose:T,player:G.opponent,day:G.day,slot:G.slot,senderName:t,senderEmail:a,selectedDivision:G.division,phase:G.phase,onProposalComplete:()=>{T()}}))}const X8="_outerChatBg_4cwjy_29",J8="_chatContainer_4cwjy_85",K8="_topNavBar_4cwjy_125",e6="_chatGreeting_4cwjy_169",t6="_buttonRow_4cwjy_193",n6="_topChatButton_4cwjy_207",a6="_logoutWithTimer_4cwjy_297",r6="_timerBox_4cwjy_311",s6="_sectionHeader_4cwjy_339",i6="_channelListRow_4cwjy_411",o6="_announcements_4cwjy_411",l6="_divisions_4cwjy_421",c6="_gameButton_4cwjy_473",u6="_mainChatArea_4cwjy_509",d6="_mainChatWindow_4cwjy_527",f6="_poolBackground_4cwjy_587",h6="_chatContent_4cwjy_661",m6="_sidebar_4cwjy_675",p6="_hamburgerButton_4cwjy_729",g6="_hamburgerIcon_4cwjy_777",y6="_sidebarBackdrop_4cwjy_787",v6="_closeSidebarButton_4cwjy_813",b6="_mobileNavButtons_4cwjy_861",w6="_mobileNavButton_4cwjy_861",x6="_mobileTimerBox_4cwjy_923",S6="_generalChannelRow_4cwjy_949",E6="_active_4cwjy_1015",C6="_channelListName_4cwjy_1027",_6="_pinIcon_4cwjy_1039",I6="_pinned_4cwjy_1067",D6="_noPinnedChannels_4cwjy_1077",A6="_noChannelsFound_4cwjy_1079",T6="_sidebarSearch_4cwjy_1101",M6="_channelListWrapper_4cwjy_1181",N6="_customMessageUi_4cwjy_1225",R6="_onlineDot_4cwjy_1263",k6="_online_4cwjy_1263",L6="_messageContent_4cwjy_1319",P6="_messageUsername_4cwjy_1337",O6="_messageText_4cwjy_1357",B6="_loadingContainer_4cwjy_1377",U6="_spinner_4cwjy_1391",z6="_spin_4cwjy_1391",j6="_open_4cwjy_1533",F6="_messagesArea_4cwjy_1775",H6="_messageInputContainer_4cwjy_1783",Y6="_messageInput_4cwjy_1783",W6="_sendButton_4cwjy_1805",G6="_messageItem_4cwjy_1945",$6="_messageItemLeft_4cwjy_2591",Z6="_messageItemRight_4cwjy_2601",q6="_messageListBackground_4cwjy_2615",Q6="_poolTableImg_4cwjy_2645",V6="_poolTableSvg_4cwjy_2647",X6="_channelNamePreview_4cwjy_2675",J6="_messageHeader_4cwjy_3619",K6="_messageAuthor_4cwjy_3633",e9="_messageTime_4cwjy_3647",t9="_chatHeader_4cwjy_3885",n9="_chatMessages_4cwjy_3895",a9="_message_4cwjy_1319",r9="_sent_4cwjy_4001",s9="_received_4cwjy_4013",i9="_messageSender_4cwjy_4067",o9="_sending_4cwjy_4591",l9="_error_4cwjy_4607",c9="_typingIndicator_4cwjy_4619",u9="_messageGroup_4cwjy_4641",d9="_scrollToBottom_4cwjy_4719",Ge={outerChatBg:X8,chatContainer:J8,topNavBar:K8,chatGreeting:e6,buttonRow:t6,topChatButton:n6,logoutWithTimer:a6,timerBox:r6,sectionHeader:s6,channelListRow:i6,announcements:o6,divisions:l6,"game-rooms":"_game-rooms_4cwjy_431",gameButton:c6,mainChatArea:u6,mainChatWindow:d6,poolBackground:f6,chatContent:h6,sidebar:m6,hamburgerButton:p6,hamburgerIcon:g6,sidebarBackdrop:y6,closeSidebarButton:v6,mobileNavButtons:b6,mobileNavButton:w6,mobileTimerBox:x6,generalChannelRow:S6,active:E6,channelListName:C6,pinIcon:_6,pinned:I6,noPinnedChannels:D6,noChannelsFound:A6,sidebarSearch:T6,channelListWrapper:M6,customMessageUi:N6,onlineDot:R6,online:k6,messageContent:L6,messageUsername:P6,messageText:O6,loadingContainer:B6,spinner:U6,spin:z6,"str-chat__send-button":"_str-chat__send-button_4cwjy_1423",open:j6,messagesArea:F6,messageInputContainer:H6,messageInput:Y6,sendButton:W6,messageItem:G6,messageItemLeft:$6,messageItemRight:Z6,messageListBackground:q6,poolTableImg:Q6,poolTableSvg:V6,"str-chat__main-panel":"_str-chat__main-panel_4cwjy_2663",channelNamePreview:X6,"str-chat":"_str-chat_4cwjy_1423","str-chat__container":"_str-chat__container_4cwjy_2727","str-chat__messenger":"_str-chat__messenger_4cwjy_2737","str-chat__messenger--main":"_str-chat__messenger--main_4cwjy_2747","str-chat__messenger--main-panel":"_str-chat__messenger--main-panel_4cwjy_2757","str-chat__messenger--main-panel-inner":"_str-chat__messenger--main-panel-inner_4cwjy_2767","str-chat__messenger--main-panel-inner-content":"_str-chat__messenger--main-panel-inner-content_4cwjy_2777","str-chat__messenger--main-panel-inner-content-inner":"_str-chat__messenger--main-panel-inner-content-inner_4cwjy_2787","str-chat__messenger--main-panel-inner-content-inner-inner":"_str-chat__messenger--main-panel-inner-content-inner-inner_4cwjy_2797","str-chat__message-list":"_str-chat__message-list_4cwjy_2809","str-chat__input-flat--wrapper":"_str-chat__input-flat--wrapper_4cwjy_2819","str-chat__input-flat":"_str-chat__input-flat_4cwjy_2819","str-chat__channel-header":"_str-chat__channel-header_4cwjy_2841","str-chat__thread":"_str-chat__thread_4cwjy_2853","str-chat__window":"_str-chat__window_4cwjy_2865","str-chat__channel":"_str-chat__channel_4cwjy_2841","str-chat__message":"_str-chat__message_4cwjy_2809","str-chat__message-text":"_str-chat__message-text_4cwjy_2939","str-chat__message-author":"_str-chat__message-author_4cwjy_2953","str-chat__message-timestamp":"_str-chat__message-timestamp_4cwjy_2969","str-chat__channel-header-title":"_str-chat__channel-header-title_4cwjy_3117","str-chat__channel-header-info":"_str-chat__channel-header-info_4cwjy_3139","str-chat__thread-header":"_str-chat__thread-header_4cwjy_3159","str-chat__thread-start":"_str-chat__thread-start_4cwjy_3171","str-chat__typing-indicator":"_str-chat__typing-indicator_4cwjy_3191","str-chat__avatar":"_str-chat__avatar_4cwjy_3209","str-chat__avatar-fallback":"_str-chat__avatar-fallback_4cwjy_3219","str-chat__channel-list":"_str-chat__channel-list_4cwjy_3253","str-chat__channel-list-messenger":"_str-chat__channel-list-messenger_4cwjy_3263","str-chat__channel-preview-messenger":"_str-chat__channel-preview-messenger_4cwjy_3271","str-chat__channel-preview-messenger--active":"_str-chat__channel-preview-messenger--active_4cwjy_3299","str-chat__channel-preview-messenger--title":"_str-chat__channel-preview-messenger--title_4cwjy_3311","str-chat__channel-preview-messenger--subtitle":"_str-chat__channel-preview-messenger--subtitle_4cwjy_3323",messageHeader:J6,messageAuthor:K6,messageTime:e9,chatHeader:t9,chatMessages:n9,message:a9,sent:r9,received:s9,messageSender:i9,sending:o9,error:l9,typingIndicator:c9,messageGroup:u9,scrollToBottom:d9},f9="nbvut8j4y6se",Ex=tt,Cx="general",h9="announcements";let Ld=!1;const m9=["FRBCAPL TEST","Singles Test"],_x={GENERAL:"general",DIVISIONS:"divisions",ANNOUNCEMENTS:"announcements",GAME_ROOMS:"game-rooms"};function Ix(t){return t.toLowerCase().replace(/[^a-z0-9_-]/g,"")}const p9=({channel:t})=>{var a;return u.createElement("div",{className:Ge.channelNamePreview},((a=t.data)==null?void 0:a.name)||t.id)};function g9(){return JSON.parse(localStorage.getItem("pinnedChannels")||"[]")}function y9(t){localStorage.setItem("pinnedChannels",JSON.stringify(t))}const v9=({pinned:t,onClick:a})=>u.createElement("span",{onClick:a,className:`${Ge.pinIcon}${t?" "+Ge.pinned:""}`,title:t?"Unpin channel":"Pin channel"},t?"":""),cg=({children:t,icon:a})=>u.createElement("div",{className:Ge.sectionHeader},a&&u.createElement("span",{style:{marginRight:"8px"}},a),t);function OE({userName:t,userEmail:a,userPin:e,channelId:n,onClose:r}){var Be;const o=ho(),[l,d]=w.useState(!1),[h,m]=w.useState(null),[p,y]=w.useState(null),[b,E]=w.useState(null),[S,C]=w.useState({}),[_,x]=w.useState([]),[D,A]=w.useState(null),[k,P]=w.useState(g9()),[L,G]=w.useState(!1),[F,q]=w.useState(!1),[te,X]=w.useState(1800),[se,ee]=w.useState(""),[j,H]=w.useState([]),[R,B]=w.useState(""),[Y,$]=w.useState(!0);w.useEffect(()=>{if(te<=0){T();return}const be=setInterval(()=>{X(Ve=>Ve-1)},1e3);return()=>clearInterval(be)},[te]),w.useEffect(()=>{if(Ld){console.log("Global connection already in progress, skipping...");return}Ld=!0;let be=q0.getInstance(f9),Ve=!1,rt=!0;async function St(){console.log("Starting chat initialization...");try{if(be.userID){console.log("Already connected as:",be.userID);try{await be.disconnectUser(),console.log("Disconnected existing user")}catch(st){console.log("Disconnect error (ignored):",st.message)}}await new Promise(st=>setTimeout(st,300)),console.log("Delay completed, proceeding with token request...");const xt=Ix(a);console.log("Cleaned userId:",xt),console.log("Making token request to:",`${Ex}/token`);const pn=await fetch(`${Ex}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:xt})});console.log("Token response status:",pn.status);const{token:we,userId:Xe}=await pn.json();if(console.log("Token received for userId:",Xe),console.log("Connecting user to Stream Chat..."),console.log("Using actualUserId for connection:",Xe),await be.connectUser({id:Xe,name:t,email:a},we),console.log("User connected successfully!"),Ve=!0,!rt)return;console.log("Setting chat client..."),m(be),console.log("Creating general channel...");const Je=be.channel("messaging",Cx,{name:"General Chat",description:"General discussion for all players"});console.log("General channel object created, now watching..."),await Je.watch({limit:30}),console.log("General channel created and watched"),console.log("Creating announcements channel...");const ot=be.channel("messaging",h9,{name:" Announcements",description:"Important announcements and updates"});try{await ot.watch({limit:30}),console.log("Announcements channel created and watched")}catch(st){console.log("Could not load announcements channel:",st.message)}console.log("Creating division channels...");const Nt={};for(const st of m9){const Ln=Ix(st),Xt=be.channel("messaging",`division-${Ln}`,{name:` ${st}`,description:`Discussion for ${st} players`,category:_x.DIVISIONS});try{await Xt.watch({limit:30}),Nt[st]=Xt,console.log(`Division channel created: ${st}`)}catch(Yt){console.log(`Could not load division channel ${st}:`,Yt.message)}}console.log("Creating game room channels...");const kn=[];for(let st=1;st<=5;st++){const Ln=`game-room-${st}`,Xt=be.channel("messaging",Ln,{name:` Game Room ${st}`,description:`Multiplayer game room ${st} - for future online play`,category:_x.GAME_ROOMS});try{await Xt.watch({limit:30}),kn.push(Xt),console.log(`Game room ${st} created`)}catch(Yt){console.log(`Could not load game room ${st}:`,Yt.message)}}console.log("Setting up channel states..."),rt&&(y(Je),E(ot),C(Nt),x(kn),A(Je),console.log("Setting loading to false..."),$(!1),console.log("Chat initialization complete!"))}catch(xt){console.error("Error initializing chat:",xt),console.error("Error details:",{message:xt.message,stack:xt.stack,name:xt.name}),rt&&$(!1)}finally{Ld=!1}}return St(),()=>{if(rt=!1,be&&Ve)try{be.disconnectUser()}catch(xt){console.log("Error during cleanup disconnect:",xt.message)}Ld=!1}},[a,t]),w.useEffect(()=>{y9(k)},[k]),w.useEffect(()=>{if(console.log("Channel changed:",D),D){const be=D.state.messages||[];console.log("Channel messages:",be),H(be);const Ve=St=>{console.log("New message received:",St);const xt=D.state.messages||[];console.log("Updated messages from new message:",xt),H([...xt])},rt=()=>{console.log("Channel state updated");const St=D.state.messages||[];console.log("Updated messages from state update:",St),H([...St])};return D.on("message.new",Ve),D.on("message.updated",rt),D.on("message.deleted",rt),()=>{D.off("message.new",Ve),D.off("message.updated",rt),D.off("message.deleted",rt)}}else console.log("No channel available"),H([])},[D]);function T(){h&&h.disconnectUser(),localStorage.clear(),r?r():(o("/"),window.location.reload())}function U(){console.log("Schedule Match button clicked"),q(!0)}const K=async()=>{if(console.log("Send message called with:",R),console.log("Channel:",D),!R.trim()){console.log("Message is empty, returning");return}if(!D){console.log("No channel available, returning");return}try{console.log("Sending message to channel...");const be=await D.sendMessage({text:R});console.log("Message sent successfully:",be),B("")}catch(be){console.error("Error sending message:",be)}},V=be=>{be.key==="Enter"&&!be.shiftKey&&(be.preventDefault(),K())};if(Y)return u.createElement("div",{className:Ge.loadingContainer},u.createElement("div",{className:Ge.spinner}),u.createElement("div",null,"Loading chat...Please wait"));(Be=h==null?void 0:h.user)==null||Be.id;const re=Math.floor(te/60),Ee=te%60,Ce=(be,Ve=null)=>!be||!be.cid?null:u.createElement("div",{key:be.cid,className:`${Ge.channelListRow} ${Ve?Ge[Ve]:""} ${(D==null?void 0:D.id)===be.id?Ge.active:""}`,onClick:()=>{A(be),d(!1)}},u.createElement("div",{className:Ge.channelListName},u.createElement(p9,{channel:be})),u.createElement(v9,{pinned:k.includes(be.id),onClick:rt=>{rt.stopPropagation();let St;k.includes(be.id)?St=k.filter(xt=>xt!==be.id):St=[...k,be.id],P(St)}}));return u.createElement("div",{className:Ge.outerChatBg},u.createElement("div",{className:Ge.chatContainer},u.createElement("button",{className:Ge.hamburgerButton,onClick:()=>d(!0),"aria-label":"Open channel list"},u.createElement("span",{className:Ge.hamburgerIcon},"")),l&&u.createElement("div",{className:Ge.sidebarBackdrop,onClick:()=>d(!1)}),u.createElement("div",{className:Ge.topNavBar},u.createElement("div",{className:Ge.buttonRow},u.createElement("button",{className:Ge.topChatButton,onClick:()=>{r?r():(o("/"),window.location.reload())}},"Dashboard"),u.createElement("button",{className:Ge.topChatButton,onClick:U},"Schedule a Match")),u.createElement("span",{className:Ge.chatGreeting},"Hello, ",t,"!"),u.createElement("div",{className:Ge.logoutWithTimer},u.createElement("button",{className:Ge.topChatButton,onClick:T},"Logout"),u.createElement("span",{className:Ge.timerBox},"Auto Logout: ",re,":",Ee.toString().padStart(2,"0")))),u.createElement("div",{className:Ge.mainChatArea},u.createElement("div",{className:`${Ge.sidebar} ${l?Ge.open:""}`},u.createElement("button",{className:Ge.closeSidebarButton,onClick:()=>d(!1),"aria-label":"Close channel list"},""),u.createElement("div",{className:Ge.mobileNavButtons},u.createElement("button",{className:Ge.mobileNavButton,onClick:()=>{r?r():(o("/"),window.location.reload()),d(!1)}}," Dashboard"),u.createElement("button",{className:Ge.mobileNavButton,onClick:()=>{U(),d(!1)}}," Schedule a Match"),u.createElement("button",{className:Ge.mobileNavButton,onClick:()=>{T(),d(!1)}}," Logout"),u.createElement("div",{className:Ge.mobileTimerBox},"Auto Logout: ",re,":",Ee.toString().padStart(2,"0"))),u.createElement("div",{className:`${Ge.generalChannelRow}${(D==null?void 0:D.id)===Cx?" "+Ge.active:""}`,onClick:()=>{A(p),d(!1)}},u.createElement("span",{style:{marginRight:8}},"#")," General Chat"),u.createElement("div",{className:Ge.sidebarSearch},u.createElement("input",{type:"text",placeholder:"Search channels...",value:se,onChange:be=>ee(be.target.value)})),u.createElement("div",{className:Ge.channelListWrapper},u.createElement(cg,{icon:""},"Announcements"),b&&Ce(b,"announcements"),u.createElement(cg,{icon:""},"Division Channels"),Object.values(S).map(be=>Ce(be,"divisions")),u.createElement(cg,{icon:""},"Game Rooms"),_.map(be=>Ce(be,"game-rooms")),u.createElement("div",{className:`${Ge.channelListRow} ${Ge.gameButton}`,onClick:()=>{o("/tenball"),d(!1)}},u.createElement("span",{style:{marginRight:8}},""),"Play Pool Game"))),u.createElement("div",{className:Ge.mainChatWindow},u.createElement("div",{className:Ge.poolBackground},u.createElement(uf,null)),D&&u.createElement(u.Fragment,null,u.createElement($8,{channel:D,currentUser:h==null?void 0:h.user}),u.createElement("div",{className:Ge.messagesArea},j.map(be=>{var xt,pn,we,Xe;const Ve=(xt=be.user)==null?void 0:xt.id,rt=(pn=h==null?void 0:h.user)==null?void 0:pn.id;let St=Ve===rt;if(!St&&Ve&&rt){const Je=Ve.replace(/_\d+$/,"");St=rt.startsWith(Je)}return u.createElement("div",{key:be.id,className:`${Ge.messageItem} ${St?Ge.messageItemRight:Ge.messageItemLeft}`},u.createElement("div",{className:Ge.messageHeader},u.createElement("span",{className:Ge.messageAuthor},((we=be.user)==null?void 0:we.name)||((Xe=be.user)==null?void 0:Xe.id)),u.createElement("span",{className:Ge.messageTime},new Date(be.created_at).toLocaleTimeString())),u.createElement("div",{className:Ge.messageText},be.text))})),u.createElement("div",{className:Ge.messageInputContainer},u.createElement("input",{type:"text",value:R,onChange:be=>B(be.target.value),onKeyPress:V,placeholder:"Type your message...",className:Ge.messageInput}),u.createElement("button",{onClick:K,className:Ge.sendButton,disabled:!R.trim()}," Send"))))),F&&u.createElement(V8,{userName:t,userEmail:a,userPin:e,onClose:()=>q(!1),fromChat:!0})))}function BE({isOpen:t,onClose:a,isMobile:e}){return t?u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #4CAF50",borderRadius:"12px",width:e?"98%":"90%",maxWidth:"800px",height:e?"98%":"95%",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},u.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #4CAF50",flexShrink:0}},u.createElement("h2",{style:{margin:0,fontSize:e?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}}," Phase 1 Scheduled Opponents Rules"),u.createElement("button",{onClick:a,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"")),u.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:e?"1rem":"1.1rem",lineHeight:"1.6"}},u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Overview"),u.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 1 covers Weeks 1-6 where each player is assigned specific opponents to schedule and complete matches with."),u.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"This phase focuses on completing your assigned matches with maximum scheduling flexibility.")),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Opponent Assignment"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Assigned Opponents:")," Each player is assigned 6 opponents at the start of the session"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Match Requirements:")," You must complete 1 match against each of your 6 assigned opponents"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Total Matches:")," 6 matches total during Phase 1"))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Scheduling Flexibility"),u.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},u.createElement("p",{style:{margin:"0 0 10px 0",color:"#4CAF50",fontWeight:"bold"}},"Maximum scheduling flexibility for your convenience:"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"Any Day:")," Matches may be played on any day of the week"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"Any Time:")," Matches may be played at any time that works for both players"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"Any Location:")," Matches may be played at any safe, mutually agreed location")))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Completion Deadline"),u.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},u.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"All Phase 1 matches must be completed by the end of Week 6"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"Deadline:")," End of Week 6 (Sunday at 11:59 PM)"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"No Extensions:")," Phase 1 deadline is firm and cannot be extended"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"Impact:")," Incomplete matches may affect your standings and Phase 2 eligibility")))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Match Rules"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Standard Rules:")," All matches use the official CSI rule book"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Scoring:")," All scoring must be done with the BCAPL scoring app"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Payment:")," Standard match payment and fees apply"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"FargoRate:")," All matches are integrated with FargoRate for ratings"))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Scheduling Process"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Contact Opponents:")," Reach out to your assigned opponents to schedule matches"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Mutual Agreement:")," Both players must agree on date, time, and location"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Record Matches:")," All scheduled matches must be recorded in the League Scheduling Hub"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Communication:")," Use the message center to coordinate with opponents"))),u.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},u.createElement("h4",{style:{color:"#ff4444",fontSize:e?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}}," Important Notes"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:e?"0.85rem":"0.9rem"}},u.createElement("li",{style:{marginBottom:"5px"}},"Phase 1 results determine your standings position for Phase 2 challenges"),u.createElement("li",{style:{marginBottom:"5px"}},"Incomplete matches may result in forfeits and affect your overall standings"),u.createElement("li",{style:{marginBottom:"5px"}},"All matches must be completed and recorded before Phase 2 begins"),u.createElement("li",{style:{marginBottom:"5px"}},"Use the calendar feature to track your scheduled matches and deadlines")))),u.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},u.createElement("button",{onClick:a,style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"none",color:"#ffffff",fontSize:e?"0.9rem":"1rem",fontWeight:"bold",padding:e?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ")))):null}const b9=({isMobile:t})=>u.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:t?"12px":"16px",padding:t?"8px":"16px",margin:t?"-15px 0 0 0":"13px auto",width:t?"100%":"90%",maxWidth:t?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",height:t?"350px":"400px",position:"relative",overflow:"hidden"}},u.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:t?"0px":"4px",padding:t?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",minHeight:t?"2.5rem":"3rem"}},u.createElement("div",{style:{display:"inline-block",width:t?"80px":"100px",height:t?"24px":"32px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}}),u.createElement("div",{style:{display:"inline-block",width:t?"60px":"80px",height:t?"20px":"28px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"6px",animation:"shimmer 1.5s infinite",margin:"8px"}})),u.createElement("div",{style:{width:t?"200px":"300px",height:t?"16px":"20px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"4px",animation:"shimmer 1.5s infinite",margin:"8px auto"}}),u.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",marginTop:t?"20px":"30px",gap:t?"10px":"20px"}},u.createElement("div",{style:{width:t?"100px":"140px",height:t?"80px":"120px",background:"linear-gradient(90deg, rgba(0,255,0,0.1) 25%, rgba(0,255,0,0.2) 50%, rgba(0,255,0,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(0,255,0,0.3)"}}),u.createElement("div",{style:{width:t?"80px":"140px",height:t?"60px":"100px",background:"linear-gradient(90deg, rgba(52,152,219,0.1) 25%, rgba(52,152,219,0.2) 50%, rgba(52,152,219,0.1) 75%)",borderRadius:"12px",animation:"shimmer 1.5s infinite",border:"2px solid rgba(52,152,219,0.3)"}})),u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginTop:t?"20px":"30px",gap:t?"6px":"12px",padding:t?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),u.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),u.createElement("div",{style:{flex:1,height:t?"70px":"80px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),u.createElement("div",{style:{display:"flex",gap:t?"8px":"12px",marginTop:t?"10px":"15px"}},u.createElement("div",{style:{flex:t?"0 0 140px":"0 0 200px",height:t?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}}),u.createElement("div",{style:{flex:1,height:t?"80px":"100px",background:"linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%)",borderRadius:"8px",animation:"shimmer 1.5s infinite"}})),u.createElement("style",null,`
        @keyframes shimmer {
          0% {
            background-position: -200px 0;
          }
          100% {
            background-position: calc(200px + 100%) 0;
          }
        }
      `));class w9{constructor(){this.weekdays=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.timeSlots=this.generateTimeSlots()}generateTimeSlots(){const a=[];for(let e=9;e<=22;e++)a.push(`${e.toString().padStart(2,"0")}:00`),e<22&&a.push(`${e.toString().padStart(2,"0")}:30`);return a}parseTimeToMinutes(a){const[e,n]=a.split(":").map(Number);return e*60+(n||0)}findOverlappingAvailability(a,e){const n=Ig(a.availability||""),r=Ig(e.availability||""),o={};return this.weekdays.forEach(l=>{n[l]&&r[l]&&(o[l]=this.findCommonTimeSlots(n[l],r[l]))}),o}findCommonTimeSlots(a,e){const n=[];return a.forEach(r=>{e.forEach(o=>{const l=this.findTimeOverlap(r,o);l&&n.push(l)})}),n}findTimeOverlap(a,e){const[n,r]=a.split(" - "),[o,l]=e.split(" - "),d=this.parseTimeToMinutes(n),h=this.parseTimeToMinutes(r),m=this.parseTimeToMinutes(o),p=this.parseTimeToMinutes(l),y=Math.max(d,m),b=Math.min(h,p);if(y<b){const E=Math.floor(y/60),S=y%60,C=Math.floor(b/60),_=b%60;return`${E.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")} - ${C.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`}return null}getMatchSuggestions(a,e,n=[]){const r=this.findOverlappingAvailability(a,e),o=[];return Object.entries(r).forEach(([l,d])=>{d.forEach(h=>{this.generateSlotsFromRange(h).forEach(p=>{const y={day:l,time:p,location:this.suggestOptimalLocation(a,e),confidence:this.calculateConfidence(a,e,l,p,n),reason:this.getSuggestionReason(a,e,l,p)};o.push(y)})})}),o.sort((l,d)=>d.confidence-l.confidence).slice(0,5)}generateSlotsFromRange(a){const[e,n]=a.split(" - "),r=this.parseTimeToMinutes(e),o=this.parseTimeToMinutes(n),l=[];let d=r;for(;d+90<=o;){const h=Math.floor(d/60),m=d%60;l.push(`${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`),d+=30}return l}suggestOptimalLocation(a,e){const n=(a.locations||"").split(",").map(l=>l.trim()).filter(Boolean),r=(e.locations||"").split(",").map(l=>l.trim()).filter(Boolean),o=n.filter(l=>r.includes(l));return o.length>0?o[0]:n.length>0?n[0]:r.length>0?r[0]:"TBD"}calculateConfidence(a,e,n,r,o){let l=50;this.checkForConflicts(a,e,n,r,o)&&(l-=30),(this.isPreferredTime(a,r)||this.isPreferredTime(e,r))&&(l+=20),(n==="Sat"||n==="Sun")&&(l+=15);const h=parseInt(r.split(":")[0]);return h>=18&&h<=21&&(l+=10),Math.max(0,Math.min(100,l))}checkForConflicts(a,e,n,r,o){const l=this.getNextOccurrenceOfDay(n),d=new Date(l+"T"+r+":00");return o.some(h=>{if(!h.scheduledDate)return!1;const m=new Date(h.scheduledDate);return Math.abs(d-m)<3*60*60*1e3})}getNextOccurrenceOfDay(a){const n={Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6,Sun:0}[a],r=new Date,o=r.getDay();let l=n-o;l<=0&&(l+=7);const d=new Date(r);return d.setDate(r.getDate()+l),d.toISOString().split("T")[0]}isPreferredTime(a,e){const n=parseInt(e.split(":")[0]);return n>=18&&n<=21}getSuggestionReason(a,e,n,r){const o=[];(this.isPreferredTime(a,r)||this.isPreferredTime(e,r))&&o.push("Preferred evening time"),(n==="Sat"||n==="Sun")&&o.push("Weekend flexibility");const l=this.suggestOptimalLocation(a,e);return l!=="TBD"&&o.push(`Common location: ${l}`),o.join(", ")||"Available time slot"}getQuickMatchProposal(a,e,n=[]){const r=this.getMatchSuggestions(a,e,n);if(r.length===0)return null;const o=r[0];return{day:o.day,time:o.time,location:o.location,confidence:o.confidence,reason:o.reason,alternativeTimes:r.slice(1,3).map(l=>({day:l.day,time:l.time,confidence:l.confidence}))}}getAvailableTimeSlots(a,e,n,r=[]){const l=this.findOverlappingAvailability(a,e)[n]||[],d=[];return l.forEach(h=>{this.generateSlotsFromRange(h).forEach(p=>{this.checkForConflicts(a,e,n,p,r)||d.push({time:p,available:!0,confidence:this.calculateConfidence(a,e,n,p,r)})})}),d.sort((h,m)=>m.confidence-h.confidence)}}const Dx=new w9,x9=({isOpen:t,onClose:a,player1:e,player2:n,existingMatches:r=[],onProposeMatch:o,isMobile:l=!1})=>{const[d,h]=w.useState([]),[m,p]=w.useState(null),[y,b]=w.useState(!1),[E,S]=w.useState(null),[C,_]=w.useState([]);w.useEffect(()=>{t&&e&&n&&(b(!0),setTimeout(()=>{const L=Dx.getMatchSuggestions(e,n,r);h(L),b(!1)},500))},[t,e,n,r]);const x=L=>{p(L),S(L.day);const G=Dx.getAvailableTimeSlots(e,n,L.day,r);_(G)},D=()=>{m&&(o({day:m.day,time:m.time,location:m.location,player:n,confidence:m.confidence}),a())},A=L=>L>=80?"#10b981":L>=60?"#f59e0b":"#ef4444",k=L=>L>=80?"Excellent":L>=60?"Good":L>=40?"Fair":"Poor",P=L=>({Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"})[L]||L;return t?u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:l?"10px":"20px"}},u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #4CAF50",borderRadius:"12px",width:l?"98%":"90%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.6)",display:"flex",flexDirection:"column",position:"relative",color:"#e0e0e0"}},u.createElement("div",{style:{padding:l?"15px":"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"}},u.createElement("div",null,u.createElement("h2",{style:{color:"#4CAF50",fontSize:l?"1.4rem":"1.8rem",margin:"0 0 5px 0",textShadow:"0 0 10px rgba(76, 175, 80, 0.5)"}}," Smart Match Suggestions"),u.createElement("p",{style:{color:"#bbb",fontSize:l?"0.8rem":"0.9rem",margin:0}},"AI-powered scheduling for ",e==null?void 0:e.firstName," ",e==null?void 0:e.lastName," vs ",n==null?void 0:n.firstName," ",n==null?void 0:n.lastName)),u.createElement("button",{onClick:a,style:{background:"none",border:"none",fontSize:l?"1.5rem":"2rem",cursor:"pointer",color:"#e0e0e0",transition:"transform 0.2s ease",padding:"5px"},onMouseEnter:L=>L.target.style.transform="scale(1.1)",onMouseLeave:L=>L.target.style.transform="scale(1)"},"")),u.createElement("div",{style:{padding:l?"15px":"20px",flex:1,overflowY:"auto"}},y?u.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"}},u.createElement("div",{style:{width:"40px",height:"40px",border:"4px solid rgba(76, 175, 80, 0.3)",borderTop:"4px solid #4CAF50",borderRadius:"50%",animation:"spin 1s linear infinite"}}),u.createElement("style",null,`
                @keyframes spin {
                  0% { transform: rotate(0deg); }
                  100% { transform: rotate(360deg); }
                }
              `)):d.length===0?u.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888"}},u.createElement("div",{style:{fontSize:"3rem",marginBottom:"16px"}},""),u.createElement("h3",{style:{marginBottom:"10px",color:"#ccc"}},"No Smart Suggestions Available"),u.createElement("p",{style:{fontSize:"0.9rem",lineHeight:1.5}},"We couldn't find overlapping availability between the players. Try manually selecting a time or updating player availability.")):u.createElement("div",null,u.createElement("div",{style:{marginBottom:"20px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:l?"1.1rem":"1.3rem",marginBottom:"15px"}}," Top Recommendations"),u.createElement("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:l?"1fr":"repeat(auto-fit, minmax(300px, 1fr))"}},d.slice(0,3).map((L,G)=>u.createElement("div",{key:`${L.day}-${L.time}`,style:{background:m===L?"linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.1))":"linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04))",border:m===L?"2px solid #4CAF50":"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"10px",padding:"15px",cursor:"pointer",transition:"all 0.3s ease",position:"relative"},onClick:()=>x(L),onMouseEnter:F=>{m!==L&&(F.target.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06))",F.target.style.transform="translateY(-2px)")},onMouseLeave:F=>{m!==L&&(F.target.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04))",F.target.style.transform="translateY(0)")}},u.createElement("div",{style:{position:"absolute",top:"10px",right:"10px",background:A(L.confidence),color:"#fff",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"600"}},L.confidence,"% ",k(L.confidence)),u.createElement("div",{style:{marginBottom:"10px"}},u.createElement("div",{style:{fontSize:l?"1.1rem":"1.3rem",fontWeight:"700",color:"#fff",marginBottom:"5px"}},P(L.day)," at ",L.time),u.createElement("div",{style:{fontSize:"0.9rem",color:"#bbb",marginBottom:"8px"}}," ",L.location)),u.createElement("div",{style:{fontSize:"0.8rem",color:"#888",fontStyle:"italic"}}," ",L.reason),G===0&&u.createElement("div",{style:{position:"absolute",top:"-8px",left:"-8px",background:"linear-gradient(135deg, #ffd700, #ffed4e)",color:"#000",padding:"4px 8px",borderRadius:"12px",fontSize:"0.7rem",fontWeight:"700",boxShadow:"0 2px 8px rgba(255, 215, 0, 0.5)"}}," BEST"))))),d.length>3&&u.createElement("div",{style:{marginBottom:"20px"}},u.createElement("h3",{style:{color:"#4CAF50",fontSize:l?"1rem":"1.2rem",marginBottom:"10px"}}," Alternative Times"),u.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"}},d.slice(3).map(L=>u.createElement("button",{key:`${L.day}-${L.time}`,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",padding:"8px 12px",color:"#fff",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>x(L),onMouseEnter:G=>{G.target.style.background="rgba(76, 175, 80, 0.2)",G.target.style.border="1px solid #4CAF50"},onMouseLeave:G=>{G.target.style.background="rgba(255, 255, 255, 0.1)",G.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},P(L.day)," ",L.time)))),m&&u.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"10px",padding:"15px",marginBottom:"20px"}},u.createElement("h4",{style:{color:"#4CAF50",fontSize:l?"1rem":"1.1rem",marginBottom:"10px"}}," Selected: ",P(m.day)," at ",m.time),u.createElement("div",{style:{display:"grid",gridTemplateColumns:l?"1fr":"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9rem"}},u.createElement("div",null,u.createElement("strong",null,"Location:")," ",m.location),u.createElement("div",null,u.createElement("strong",null,"Confidence:")," ",m.confidence,"%"),u.createElement("div",null,u.createElement("strong",null,"Reason:")," ",m.reason))))),u.createElement("div",{style:{padding:l?"15px":"20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",gap:"10px",justifyContent:"flex-end"}},u.createElement("button",{onClick:a,style:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#fff",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease"},onMouseEnter:L=>{L.target.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:L=>{L.target.style.background="rgba(255, 255, 255, 0.1)"}},"Cancel"),u.createElement("button",{onClick:D,disabled:!m,style:{padding:"10px 20px",background:m?"linear-gradient(135deg, #4CAF50, #45a049)":"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"6px",color:"#fff",cursor:m?"pointer":"not-allowed",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",opacity:m?1:.5},onMouseEnter:L=>{m&&(L.target.style.background="linear-gradient(135deg, #45a049, #3d8b40)",L.target.style.transform="translateY(-1px)")},onMouseLeave:L=>{m&&(L.target.style.background="linear-gradient(135deg, #4CAF50, #45a049)",L.target.style.transform="translateY(0)")}}," Propose Smart Match")))):null},S9="_overlay_rc4hc_1",E9="_modal_rc4hc_31",C9="_header_rc4hc_71",_9="_closeButton_rc4hc_105",I9="_content_rc4hc_145",D9="_searchContainer_rc4hc_157",A9="_searchInput_rc4hc_165",T9="_playersList_rc4hc_209",M9="_playerItem_rc4hc_221",N9="_playerInfo_rc4hc_257",R9="_playerName_rc4hc_265",k9="_playerDivision_rc4hc_279",L9="_selectArrow_rc4hc_289",P9="_noPlayers_rc4hc_311",Ia={overlay:S9,modal:E9,header:C9,closeButton:_9,content:I9,searchContainer:D9,searchInput:A9,playersList:T9,playerItem:M9,playerInfo:N9,playerName:R9,playerDivision:k9,selectArrow:L9,noPlayers:P9},O9=({isOpen:t,onClose:a,onSelectOpponent:e,currentUser:n,allPlayers:r,isMobile:o=!1})=>{const[l,d]=w.useState(""),[h,m]=w.useState([]);w.useEffect(()=>{if(r&&r.length>0){const y=r.filter(b=>b.firstName===(n==null?void 0:n.firstName)&&b.lastName===(n==null?void 0:n.lastName)?!1:l?`${b.firstName} ${b.lastName}`.toLowerCase().includes(l.toLowerCase()):!0);m(y)}},[r,l,n]);const p=y=>{e(y),a()};return t?u.createElement("div",{className:Ia.overlay,onClick:a},u.createElement("div",{className:Ia.modal,onClick:y=>y.stopPropagation(),style:{width:o?"95%":"500px",maxHeight:o?"80vh":"600px"}},u.createElement("div",{className:Ia.header},u.createElement("h2",null," Select Opponent for Smart Match"),u.createElement("button",{className:Ia.closeButton,onClick:a},"")),u.createElement("div",{className:Ia.content},u.createElement("div",{className:Ia.searchContainer},u.createElement("input",{type:"text",placeholder:"Search players...",value:l,onChange:y=>d(y.target.value),className:Ia.searchInput})),u.createElement("div",{className:Ia.playersList},h.length===0?u.createElement("div",{className:Ia.noPlayers},l?"No players found matching your search.":"No players available."):h.map((y,b)=>u.createElement("div",{key:b,className:Ia.playerItem,onClick:()=>p(y)},u.createElement("div",{className:Ia.playerInfo},u.createElement("div",{className:Ia.playerName},y.firstName," ",y.lastName),y.division&&u.createElement("div",{className:Ia.playerDivision},"Division: ",y.division)),u.createElement("div",{className:Ia.selectArrow},""))))))):null};function ug(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-");return`${l}-${d}-${o}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}const B9=({currentPhase:t,seasonData:a,completedMatches:e,totalRequiredMatches:n,playerName:r,playerLastName:o,selectedDivision:l,onOpenOpponentsModal:d,onOpenCompletedMatchesModal:h,onOpenStandingsModal:m,onOpenAllMatchesModal:p,pendingCount:y,sentCount:b,onOpenProposalListModal:E,onOpenSentProposalListModal:S,upcomingMatches:C,onMatchClick:_,isMobile:x,onOpenMessageCenter:D,currentUser:A,allPlayers:k})=>{const P=()=>!r||!o?(console.warn("Phase1Tracker: Missing player name information"),!1):l?!e||!Array.isArray(e)?(console.warn("Phase1Tracker: Invalid completedMatches prop"),!1):typeof n!="number"||n<=0?(console.warn("Phase1Tracker: Invalid totalRequiredMatches prop"),!1):!0:(console.warn("Phase1Tracker: Missing selected division"),!1);w.useEffect(()=>{P()},[r,o,l,e,n]);const[L,G]=w.useState(null),[F,q]=w.useState("normal"),[te,X]=w.useState(null),[se,ee]=w.useState(null),[j,H]=w.useState([]),[R,B]=w.useState(!1),[Y,$]=w.useState(null),[T,U]=w.useState(!0),[K,V]=w.useState(!1),[re,Ee]=w.useState(new Date),[Ce,Be]=w.useState(null),[be,Ve]=w.useState(!1),[rt,St]=w.useState(!1),[xt,pn]=w.useState(null),[we,Xe]=w.useState(!1);w.useEffect(()=>{if(!l||t!=="scheduled"){G(null);return}const Q=async()=>{try{const nt=l.replace(/[^A-Za-z0-9]/g,"_"),$e=Date.now(),yt=`${tt}/static/schedule_${nt}.json?t=${$e}`,Et=await fetch(yt,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!Et.ok){console.warn(`Failed to fetch schedule: ${Et.status} - ${Et.statusText}`);return}const sa=await Et.json();if(!Array.isArray(sa)||sa.length===0){console.warn("No schedule data available");return}const ia=sa.filter(dn=>dn.date).sort((dn,Or)=>new Date(dn.date)-new Date(Or.date));if(ia.length===0){console.warn("No valid matches found in schedule");return}const Pn=Math.min(47,ia.length-1),On=ia[Pn];if(!On||!On.date){console.warn("Could not determine Phase 1 end date from schedule");return}const jn=new Date(On.date);jn.setHours(23,59,59,999),$(jn);const Za=new Date;if(Fs(Za,jn))G({days:0,hours:0,passed:!0}),q("passed");else{const dn=f2(jn,Za),Or=F5(jn,Za)%24;G({days:dn,hours:Or,passed:!1}),dn<=0&&Or<=24?q("critical"):dn<=2?q("urgent"):dn<=7?q("warning"):q("normal")}}catch(nt){console.error("Error calculating Phase 1 deadline from schedule:",nt)}};Q();const He=setInterval(Q,6e4);return()=>clearInterval(He)},[l,t]),w.useEffect(()=>{t==="scheduled"&&l&&e&&(Nt(),kn())},[t,l,e,n,j]),w.useEffect(()=>{l&&t==="scheduled"&&Je()},[l,t]);const Je=async()=>{try{if(B(!0),!l){console.warn("No division selected for standings");return}const Q=l.replace(/[^A-Za-z0-9]/g,"_"),He=`${tt}/static/standings_${Q}.json`,nt=await fetch(He);if(!nt.ok){console.warn(`Failed to fetch standings: ${nt.status} - ${nt.statusText}`);return}const $e=await nt.json();if(!Array.isArray($e)){console.error("Standings data is not an array:",$e);return}const yt=$e.filter(Et=>{if(!Et||typeof Et!="object")return console.warn("Invalid standings entry:",Et),!1;if(!Et.name||!Et.rank)return console.warn("Standings entry missing name or rank:",Et),!1;const sa=parseInt(Et.rank);return isNaN(sa)||sa<=0?(console.warn("Invalid rank in standings entry:",Et),!1):!0});H(yt)}catch(Q){console.error("Failed to load standings:",Q)}finally{B(!1)}},ot=(Q,He)=>{if(!Q||Q.length===0)return null;const nt=He.toLowerCase().trim(),$e=Q.find(yt=>yt.name.toLowerCase().trim()===nt);return $e?parseInt($e.rank):null},Nt=()=>{const Q=e.length,He=n-Q,nt={completedCount:Q,remainingCount:He,deadlinePassed:Ii.hasPhase1DeadlinePassed(a)};X(nt)},kn=()=>{let Q=0,He=0;const nt=`${r} ${o}`;e&&e.length>0&&e.forEach(sa=>{sa.winner===nt?Q++:He++});const $e=e&&e.length>0?Math.round(Q/(Q+He)*100):0,yt=ot(j,nt);let Et="N/A";yt!==null?Et=`${yt}${st(yt)}`:e&&e.length>=1&&($e>=80?Et="1st-3rd":$e>=60?Et="4th-6th":$e>=40?Et="7th-9th":Et="10th+"),ee({wins:Q,losses:He,winRate:$e,position:Et,actualPosition:yt})},st=Q=>{const He=Q%10,nt=Q%100;return He===1&&nt!==11?"st":He===2&&nt!==12?"nd":He===3&&nt!==13?"rd":"th"};if(R||!L||!te||t!=="scheduled")return u.createElement(b9,{isMobile:x});const Ln=()=>F==="passed"?"#e74c3c":F==="critical"?"#ff6b6b":F==="urgent"?"#ff8800":F==="warning"?"#ffaa00":"#4CAF50",Xt=()=>{if(F==="passed")return" DEADLINE PASSED!";if(F==="critical"){const Q=Y?Wa(Y,x?"MMM d":"MMM d, yyyy"):"";return` CRITICAL: ENDS in ${L.hours} hours! (${Q})`}else if(F==="urgent"){const Q=Y?Wa(Y,x?"MMM d":"MMM d, yyyy"):"";return` URGENT: ENDS in ${L.days} days! (${Q})`}else if(F==="warning"){const Q=Y?Wa(Y,x?"MMM d":"MMM d, yyyy"):"";return` WARNING: ENDS in ${L.days} days. (${Q})`}else{const Q=Y?Wa(Y,x?"MMM d":"MMM d, yyyy"):"";return`ENDS in ${L.days} days. (${Q})`}},Yt=()=>Math.round(e.length/n*100),ra=Ln();return u.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:x?"12px":"16px",padding:x?"8px":"16px",margin:x?"-15px 0 0 0":"13px auto",width:x?"100%":"90%",maxWidth:x?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(4px)",overflow:x?"auto":"hidden",maxHeight:x?"none":"35vh",height:x?T?"350px":"60px":T?"400px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.05) 50%, transparent 70%)",borderRadius:"inherit",pointerEvents:"none"}},onClick:()=>U(!T),onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),U(!T))},role:"button",tabIndex:"0","aria-label":T?"Collapse Phase 1 tracker":"Expand Phase 1 tracker"},u.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:x?"0px":"4px",padding:x?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},u.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:x?"0.8rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:x?"4px":"6px",flexWrap:"wrap",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px",minHeight:x?"2.5rem":"3rem"}},u.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:x?"2px":"6px"}},F==="critical"&&"",F==="urgent"&&"",F==="warning"&&"",F==="passed"&&"",F==="normal"&&"",u.createElement("span",{style:{fontSize:x?"0.9rem":"1.1rem",background:`linear-gradient(45deg, ${ra}, ${ra}dd)`,padding:x?"2px 6px":"2px 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},"Phase 1"),u.createElement("button",{onClick:Q=>{Q.stopPropagation(),Ve(!0)},"aria-label":"Open Phase 1 rules and information",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"2px solid #ffffff",color:"#ffffff",fontSize:x?"0.5rem":"0.8rem",fontWeight:"bold",padding:x?"4px 8px":"6px 12px",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",marginLeft:"8px",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",zIndex:10},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",Q.target.style.transform="scale(1.1)",Q.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.4)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",Q.target.style.transform="scale(1)",Q.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)"}}," RULES"),u.createElement("button",{onClick:Q=>{Q.stopPropagation(),Xe(!0)},"aria-label":"Open smart matchmaking suggestions",role:"button",tabIndex:"0",style:{background:"linear-gradient(135deg, #4CAF50, #45a049)",border:"2px solid #ffffff",color:"#ffffff",fontSize:x?"0.5rem":"0.8rem",fontWeight:"bold",padding:x?"4px 8px":"6px 12px",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",marginLeft:"8px",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",zIndex:10},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #66bb6a, #4caf50)",Q.target.style.transform="scale(1.1)",Q.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.4)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #4CAF50, #45a049)",Q.target.style.transform="scale(1)",Q.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)"}}," SMART MATCH"))),u.createElement("div",{style:{color:"#ffffff",fontSize:x?"0.7rem":"0.95rem",lineHeight:"1.1",marginTop:"2px",marginBottom:x?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center"}},Xt()),u.createElement("div",{style:{position:x?"relative":"absolute",left:x?"auto":"20%",top:x?"auto":"50%",transform:x?"none":"translate(-50%, -50%)",cursor:"pointer",fontSize:x?"2.5rem":"3.2rem",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(0, 255, 0, 0.2), rgba(0, 200, 0, 0.15))",border:"2px solid rgba(0, 255, 0, 0.5)",padding:x?"8px":"12px",borderRadius:x?"8px":"12px",zIndex:10,boxShadow:"0 4px 16px rgba(0, 255, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",minWidth:x?"100px":"140px",minHeight:x?"80px":"120px",backdropFilter:"blur(4px)",margin:x?"8px auto":"0"},onClick:Q=>{Q.stopPropagation(),U(!0),V(!0)},"aria-label":"Open calendar to schedule matches by date",role:"button",tabIndex:"0",onMouseEnter:Q=>{Q.currentTarget.style.transform="translate(-50%, -50%) scale(1.1)",Q.currentTarget.style.background="rgba(0, 255, 0, 0.25)",Q.currentTarget.style.boxShadow="0 4px 16px rgba(0, 255, 0, 0.5)",Q.currentTarget.style.border="2px solid rgba(0, 255, 0, 0.6)"},onMouseLeave:Q=>{Q.currentTarget.style.transform="translate(-50%, -50%) scale(1)",Q.currentTarget.style.background="rgba(0, 255, 0, 0.15)",Q.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",Q.currentTarget.style.border="1px solid rgba(0, 255, 0, 0.4)"}},u.createElement("div",{style:{fontSize:x?"2rem":"4rem"}},""),u.createElement("div",{style:{fontSize:x?"0.35rem":"0.75rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginTop:x?"2px":"4px",textAlign:"center",whiteSpace:"nowrap",background:"rgba(0, 0, 0, 0.7)",padding:x?"1px 2px":"2px 4px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"}},x?"Schedule":"Click to Schedule by Date")),u.createElement("div",{style:{position:x?"relative":"absolute",right:x?"auto":"20%",top:x?"auto":"50%",transform:x?"none":"translate(50%, -50%)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:1,background:"linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15))",border:"2px solid rgba(52, 152, 219, 0.5)",padding:x?"6px":"12px",borderRadius:x?"6px":"12px",zIndex:10,boxShadow:"0 4px 16px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",minWidth:x?"80px":"140px",minHeight:x?"60px":"auto",backdropFilter:"blur(4px)",margin:x?"8px auto":"0"},title:"Proposal management - view pending and sent proposals",onMouseEnter:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.25))",Q.currentTarget.style.boxShadow="0 6px 20px rgba(52, 152, 219, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2)",Q.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.7)",Q.currentTarget.style.transform="translate(50%, -50%) scale(1.02)"},onMouseLeave:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.15))",Q.currentTarget.style.boxShadow="0 4px 16px rgba(52, 152, 219, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",Q.currentTarget.style.border="2px solid rgba(52, 152, 219, 0.5)",Q.currentTarget.style.transform="translate(50%, -50%) scale(1)"}},u.createElement("div",{style:{fontSize:x?"0.6rem":"0.85rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.9)",marginBottom:x?"4px":"8px",textAlign:"center",whiteSpace:"nowrap"}}," Proposals"),u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:x?"3px":"6px",justifyContent:"center",width:"100%"}},u.createElement("button",{onClick:Q=>{Q.stopPropagation(),E&&E()},style:{background:"linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:x?"3px 4px":"6px 8px",fontSize:x?"0.5rem":"0.75rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #e67e22 0%, #f39c12 50%, #f1c40f 100%)",Q.target.style.transform="translateY(-2px) scale(1.02)",Q.target.style.boxShadow="0 4px 12px rgba(211, 84, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #d35400 0%, #e67e22 50%, #f39c12 100%)",Q.target.style.transform="translateY(0) scale(1)",Q.target.style.boxShadow="0 2px 6px rgba(211, 84, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}}," ",y," waiting for you"),u.createElement("button",{onClick:Q=>{Q.stopPropagation(),S&&S()},style:{background:"linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:x?"3px 4px":"6px 8px",fontSize:x?"0.5rem":"0.75rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #27ae60 0%, #2ecc71 50%, #58d68d 100%)",Q.target.style.transform="translateY(-2px) scale(1.02)",Q.target.style.boxShadow="0 4px 12px rgba(30, 132, 73, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #1e8449 0%, #27ae60 50%, #2ecc71 100%)",Q.target.style.transform="translateY(0) scale(1)",Q.target.style.boxShadow="0 2px 6px rgba(30, 132, 73, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}}," ",b," waiting for opponents"))),u.createElement("div",{style:{color:"#ffffff",fontSize:x?"0.75rem":"0.95rem",fontWeight:"bold",marginTop:x?"4px":"2px",marginBottom:x?"2px":"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},e.length,"/",n," Matches Complete"),u.createElement("div",{style:{color:"#ffffff",fontSize:x?"0.75rem":"0.95rem",fontWeight:"bold",marginTop:"2px",marginBottom:x?"4px":"2px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1",textAlign:"center"}},n-e.length," to Schedule"),u.createElement("div",{style:{textAlign:"center",marginTop:x?"2px":"4px"}},u.createElement("div",{style:{fontSize:x?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:x?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:Q=>Q.target.style.backgroundColor=`${ra}20`,onMouseLeave:Q=>Q.target.style.backgroundColor="transparent"},T?"Hide Stats ":"Show Stats "))),T&&u.createElement(u.Fragment,null,u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"stretch",marginBottom:x?"8px":"4px",gap:x?"6px":"12px",padding:x?"6px":"8px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255,255,255,0.15)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},u.createElement("div",{onClick:Q=>{Q.stopPropagation(),d&&d()},style:{background:"rgba(0, 0, 0, 0.4)",padding:x?"6px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:x?"70px":"80px"},onMouseEnter:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3))",Q.currentTarget.style.transform="translateY(-2px) scale(1.02)",Q.currentTarget.style.boxShadow="0 4px 16px rgba(76, 175, 80, 0.3), 0 2px 8px rgba(0,0,0,0.2)",Q.currentTarget.style.border="1px solid rgba(76, 175, 80, 0.5)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(255,255,255,0.08)",Q.currentTarget.style.transform="translateY(0) scale(1)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{fontSize:x?"0.6rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:x?"4px":"2px"}},"Progress"),u.createElement("div",{style:{fontSize:x?"0.7rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:x?"3px":"1px"}},e.length,"/",n),u.createElement("div",{style:{width:"100%",height:x?"3px":"6px",background:"rgba(255,255,255,0.15)",borderRadius:"3px",overflow:"hidden",marginBottom:"1px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"}},u.createElement("div",{style:{width:`${Yt()}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #45a049, #4CAF50)",borderRadius:"3px",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 0 8px rgba(76, 175, 80, 0.5)",position:"relative"}},u.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"shimmer 2s infinite"}}))),u.createElement("div",{style:{fontSize:x?"0.55rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see opponents")),u.createElement("div",{onClick:Q=>{Q.stopPropagation(),h&&h()},style:{background:"rgba(0, 0, 0, 0.4)",padding:x?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.3))",Q.currentTarget.style.transform="translateY(-2px) scale(1.02)",Q.currentTarget.style.boxShadow="0 4px 16px rgba(33, 150, 243, 0.3), 0 2px 8px rgba(0,0,0,0.2)",Q.currentTarget.style.border="1px solid rgba(33, 150, 243, 0.5)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(255,255,255,0.08)",Q.currentTarget.style.transform="translateY(0) scale(1)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{fontSize:x?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Record"),u.createElement("div",{style:{fontSize:x?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},(se==null?void 0:se.wins)||0,"-",(se==null?void 0:se.losses)||0," (",(se==null?void 0:se.winRate)||0,"%)"),u.createElement("div",{style:{fontSize:x?"0.4rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to see results")),u.createElement("div",{onClick:Q=>{Q.stopPropagation(),m&&m()},style:{background:"rgba(0, 0, 0, 0.4)",padding:x?"4px":"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",flex:1,textAlign:"center",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"80px"},onMouseEnter:Q=>{Q.currentTarget.style.background="linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(156, 39, 176, 0.3))",Q.currentTarget.style.transform="translateY(-2px) scale(1.02)",Q.currentTarget.style.boxShadow="0 4px 16px rgba(156, 39, 176, 0.3), 0 2px 8px rgba(0,0,0,0.2)",Q.currentTarget.style.border="1px solid rgba(156, 39, 176, 0.5)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(0, 0, 0, 0.4)",Q.currentTarget.style.transform="translateY(0) scale(1)",Q.currentTarget.style.boxShadow="none",Q.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{fontSize:x?"0.35rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:"1px"}},"Position"),u.createElement("div",{style:{fontSize:x?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"1px"}},R?"...":(se==null?void 0:se.position)||"N/A"),u.createElement("div",{style:{fontSize:x?"0.4rem":"0.75rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to view standings"))),u.createElement("div",{style:{display:"flex",gap:x?"8px":"12px",marginBottom:"4px"}},u.createElement("div",{style:{flex:x?"0 0 140px":"0 0 200px",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"4px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",gap:"4px"}},u.createElement("div",{style:{fontSize:x?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:"2px"}}," ",x?"Messages":"Message Center"),u.createElement("button",{onClick:Q=>{Q.stopPropagation(),D&&D("direct")},style:{background:"linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"4px 6px",fontSize:x?"0.6rem":"0.7rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #cc3333 0%, #aa2222 50%, #881111 100%)",Q.target.style.transform="translateY(-2px) scale(1.02)",Q.target.style.boxShadow="0 4px 12px rgba(255, 68, 68, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #ff4444 0%, #cc3333 50%, #aa2222 100%)",Q.target.style.transform="translateY(0) scale(1)",Q.target.style.boxShadow="0 2px 6px rgba(255, 68, 68, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}}," ",x?"DM":"Direct Messages"),u.createElement("button",{onClick:Q=>{Q.stopPropagation(),D&&D("league")},style:{background:"linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",color:"#ffffff",border:"none",borderRadius:"6px",padding:"4px 6px",fontSize:x?"0.6rem":"0.7rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",position:"relative",overflow:"hidden"},onMouseEnter:Q=>{Q.target.style.background="linear-gradient(135deg, #0097a7 0%, #00695c 50%, #004d40 100%)",Q.target.style.transform="translateY(-2px) scale(1.02)",Q.target.style.boxShadow="0 4px 12px rgba(0, 188, 212, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6), inset 0 -1px 0 rgba(0, 0, 0, 0.3)"},onMouseLeave:Q=>{Q.target.style.background="linear-gradient(135deg, #00bcd4 0%, #0097a7 50%, #00695c 100%)",Q.target.style.transform="translateY(0) scale(1)",Q.target.style.boxShadow="0 2px 6px rgba(0, 188, 212, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -1px 0 rgba(0, 0, 0, 0.2)"}}," ",x?"Chat":"League Chat")),u.createElement("div",{onClick:Q=>{Q.stopPropagation(),p&&p()},style:{flex:"1",background:"rgba(0, 0, 0, 0.4)",borderRadius:"8px",padding:"4px",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:Q=>{Q.currentTarget.style.background="rgba(0,0,0,0.5)",Q.currentTarget.style.border="1px solid rgba(255,255,255,0.25)"},onMouseLeave:Q=>{Q.currentTarget.style.background="rgba(0, 0, 0, 0.4)",Q.currentTarget.style.border="1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{fontSize:x?"0.6rem":"1.1rem",color:"#ff4444",fontWeight:"bold",marginBottom:"0px",textAlign:"center",cursor:"pointer",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}}," Upcoming Matches"),u.createElement("div",{style:{fontSize:x?"0.45rem":"0.75rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",fontWeight:"500",marginTop:"0px",marginBottom:"0px",padding:"0px"}},"click for match details"),(()=>{const Q=C;return Q&&Q.length>0?u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"1px",marginTop:x?"1px":"2px"}},Q.slice(0,3).map((He,nt)=>u.createElement("div",{key:nt,onClick:$e=>{$e.stopPropagation(),_&&He&&_(He)},style:{fontSize:x?"0.5rem":"0.8rem",color:"#ccc",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer",padding:x?"1px 2px":"2px 3px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:$e=>{$e.target.style.color="#ffffff",$e.target.style.background="rgba(255,255,255,0.1)"},onMouseLeave:$e=>{$e.target.style.color="#ccc",$e.target.style.background="transparent"}},(()=>{let $e="",yt="";if(He.type==="proposal"||He.status==="confirmed")He.senderName&&He.receiverName&&($e=He.senderName.trim().toLowerCase()===`${r} ${o}`.trim().toLowerCase()?He.receiverName:He.senderName),He.date&&(yt=ug(He.date));else if(He.player1Id&&He.player2Id&&($e=He.player1Id.trim().toLowerCase()===`${r} ${o}`.trim().toLowerCase()?He.player2Id:He.player1Id),He.scheduledDate){const Et=new Date(He.scheduledDate);isNaN(Et.getTime())||(yt=ug(Et.toISOString().split("T")[0]))}else He.date&&(yt=ug(He.date));return $e?yt?`vs ${$e} (${yt})`:`vs ${$e}`:"No matches"})())),Q.length>3&&u.createElement("div",{style:{fontSize:x?"0.25rem":"0.55rem",color:"#888",textAlign:"center",fontStyle:"italic",padding:x?"0px":"1px"}},"+",Q.length-3," more")):u.createElement("div",{style:{fontSize:x?"0.4rem":"0.7rem",color:"#999",textAlign:"center"}},"No matches")})()))),K&&u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:()=>V(!1)},u.createElement("div",{style:{background:"rgba(0, 0, 0, 0.75)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:x?"12px":"16px",padding:x?"6px":"16px",width:x?"100%":"90%",maxWidth:x?"none":"1200px",boxShadow:"0 4px 16px rgba(0,0,0,0.3)",backdropFilter:"blur(4px)",maxHeight:x?"none":"35vh",height:x?"200px":"400px",overflow:"auto"},onClick:Q=>Q.stopPropagation()},u.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:x?"0px":"4px",padding:x?"2px":"4px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.6)",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},u.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:x?"0.4rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",letterSpacing:"0.5px"}},u.createElement("div",{style:{flex:1}}),u.createElement("span",{style:{fontSize:x?"0.6rem":"1.1rem",background:"linear-gradient(45deg, #4CAF50, #4CAF50dd)",padding:x?"1px 4px":"2px 8px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},"Phase 1 Calendar"),u.createElement("button",{onClick:()=>V(!1),style:{background:"none",border:"none",color:"#ffffff",fontSize:x?"0.8rem":"1.2rem",cursor:"pointer",padding:"0",width:x?"20px":"30px",height:x?"20px":"30px",display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1}},""))),u.createElement("div",{style:{background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"8px",padding:x?"6px":"10px",marginBottom:x?"4px":"8px",textAlign:"center"}},u.createElement("div",{style:{fontSize:x?"0.45rem":"0.85rem",color:"#ffffff",fontWeight:"bold",marginBottom:x?"3px":"5px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}}," Click any date to see opponents available for that day"),u.createElement("div",{style:{fontSize:x?"0.4rem":"0.75rem",color:"#cccccc",fontStyle:"italic",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}}," Or click the Progress meter on the home screen to see all available opponents")),u.createElement(U9,{phase1EndDate:Y,isMobile:x,currentMonth:re,onMonthChange:Ee,onOpenOpponentsModal:d,upcomingMatches:C,playerName:r,playerLastName:o,onMatchClick:_,onDateSelect:Q=>{Be(Q),d&&d(Q)}}))),u.createElement(BE,{isOpen:be,onClose:()=>Ve(!1),isMobile:x}))},U9=({phase1EndDate:t,isMobile:a,currentMonth:e,onMonthChange:n,onOpenOpponentsModal:r,upcomingMatches:o,playerName:l,playerLastName:d,onDateSelect:h,onMatchClick:m})=>{const p=new Date,y=e.getMonth(),b=e.getFullYear(),E=new Date(b,y,1),C=new Date(b,y+1,0).getDate(),_=E.getDay(),x=[];for(let X=0;X<_;X++)x.push(null);for(let X=1;X<=C;X++)x.push(X);const D=X=>!t||!X?!1:X===t.getDate()&&y===t.getMonth()&&b===t.getFullYear(),A=X=>X===p.getDate()&&y===p.getMonth()&&b===p.getFullYear(),k=X=>X&&X<p.getDate()&&y===p.getMonth()&&b===p.getFullYear(),P=["January","February","March","April","May","June","July","August","September","October","November","December"],L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],G=()=>{const X=new Date(b,y-1,1);n(X)},F=()=>{const X=new Date(b,y+1,1);n(X)},q=X=>{if(!X||!o)return[];const ee=new Date(b,y,X).toISOString().split("T")[0];return o.filter(j=>{let H=null;if(j.scheduledDate){const R=new Date(j.scheduledDate);isNaN(R.getTime())||(H=R.toISOString().split("T")[0])}else if(j.date){const R=j.date.split("-");if(R.length===3){const[B,Y,$]=R;H=`${$}-${B.padStart(2,"0")}-${Y.padStart(2,"0")}`}}return H===ee})},te=X=>q(X).length>0;return u.createElement(u.Fragment,null,u.createElement("div",{style:{color:"#ffffff"}},u.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:a?"2px":"4px"}},u.createElement("button",{onClick:G,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:a?"0.6rem":"0.8rem",cursor:"pointer",padding:a?"2px 4px":"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:X=>X.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:X=>X.target.style.background="rgba(255, 255, 255, 0.1)"},""),u.createElement("div",{style:{textAlign:"center",fontSize:a?"0.7rem":"1rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},P[y]," ",b),u.createElement("button",{onClick:F,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#ffffff",fontSize:a?"0.6rem":"0.8rem",cursor:"pointer",padding:a?"2px 4px":"4px 8px",borderRadius:"4px",transition:"all 0.2s ease"},onMouseEnter:X=>X.target.style.background="rgba(255, 255, 255, 0.2)",onMouseLeave:X=>X.target.style.background="rgba(255, 255, 255, 0.1)"},"")),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px",marginBottom:a?"1px":"2px"}},L.map(X=>u.createElement("div",{key:X,style:{textAlign:"center",fontSize:a?"0.5rem":"0.7rem",fontWeight:"bold",color:"#cccccc",padding:a?"0px":"1px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},X))),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0px"}},x.map((X,se)=>u.createElement("div",{key:se,onClick:()=>{if(X&&!te(X)&&h){const ee=new Date(b,y,X);h(ee)}},title:te(X)?q(X).map(ee=>{let j="";return ee.player1Id&&ee.player2Id?j=ee.player1Id.trim().toLowerCase()===`${l} ${d}`.trim().toLowerCase()?ee.player2Id:ee.player1Id:ee.senderName&&ee.receiverName&&(j=ee.senderName.trim().toLowerCase()===`${l} ${d}`.trim().toLowerCase()?ee.receiverName:ee.senderName),`Click to view match details vs ${j}`}).join(", "):"Click to schedule match",style:{aspectRatio:"1",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",fontSize:a?"0.6rem":"0.8rem",fontWeight:"bold",borderRadius:"1px",cursor:X?"pointer":"default",background:X?D(X)?"#e74c3c":k(X)?"rgba(255,255,255,0.1)":"transparent":"transparent",border:X?D(X)?"1px solid #c0392b":A(X)?"2px solid #4CAF50":"1px solid rgba(255,255,255,0.1)":"none",color:X?D(X)||A(X)?"#ffffff":k(X)?"#888888":"#ffffff":"transparent",transition:"all 0.2s ease",padding:"2px"},onMouseEnter:ee=>{X&&(ee.target.style.transform="scale(1.05)",ee.target.style.boxShadow="0 2px 8px rgba(255,255,255,0.2)")},onMouseLeave:ee=>{X&&(ee.target.style.transform="scale(1)",ee.target.style.boxShadow="none")}},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",width:"100%",height:"100%",position:"relative"}},u.createElement("span",{style:{position:"absolute",top:"2px",right:"2px",fontSize:a?"0.5rem":"0.7rem",fontWeight:"bold",color:"inherit"}},X||""),te(X)&&u.createElement("div",{style:{fontSize:a?"0.4rem":"0.5rem",color:"#4CAF50",fontWeight:"bold",textAlign:"center",cursor:"pointer",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginTop:"12px",padding:"1px",borderRadius:"2px",transition:"all 0.2s ease"},onMouseEnter:ee=>{ee.target.style.background="rgba(76, 175, 80, 0.2)",ee.target.style.transform="scale(1.1)"},onMouseLeave:ee=>{ee.target.style.background="transparent",ee.target.style.transform="scale(1)"},onClick:ee=>{ee.stopPropagation();const j=q(X);if(j.length>0){const H=j[0];m&&m(H)}}},(()=>{const ee=q(X);if(ee.length>0){const j=ee[0];let H="";return j.player1Id&&j.player2Id?H=j.player1Id.trim().toLowerCase()===`${l} ${d}`.trim().toLowerCase()?j.player2Id:j.player1Id:j.senderName&&j.receiverName&&(H=j.senderName.trim().toLowerCase()===`${l} ${d}`.trim().toLowerCase()?j.receiverName:j.senderName),H}return""})()))))),u.createElement("div",{style:{marginTop:a?"2px":"4px",fontSize:a?"0.5rem":"0.7rem",display:"flex",flexDirection:"column",gap:"1px"}},u.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},u.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"1px"}}),u.createElement("span",null,"Today (outline)")),t&&u.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},u.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"#e74c3c",border:"1px solid #c0392b",borderRadius:"1px"}}),u.createElement("span",null,"Phase 1 Deadline")),u.createElement("div",{style:{display:"flex",alignItems:"center",gap:a?"2px":"4px"}},u.createElement("div",{style:{width:a?"6px":"8px",height:a?"6px":"8px",background:"transparent",border:"1px solid #4CAF50",borderRadius:"50%",position:"relative"}},u.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"2px",height:"2px",background:"#4CAF50",borderRadius:"50%"}})),u.createElement("span",null,"Click scheduled opponent for match details")))),u.createElement(O9,{isOpen:showSelectOpponent,onClose:()=>setShowSelectOpponent(!1),onSelectOpponent:X=>{setSelectedOpponentForSmartMatch(X),setShowSelectOpponent(!1),setShowSmartMatchmaking(!0)},currentUser,allPlayers,isMobile:a}),u.createElement(x9,{isOpen:showSmartMatchmaking,onClose:()=>setShowSmartMatchmaking(!1),player1:(allPlayers==null?void 0:allPlayers.find(X=>X.email===(currentUser==null?void 0:currentUser.email)))||currentUser,player2:selectedOpponentForSmartMatch,existingMatches:o||[],onProposeMatch:X=>{console.log("Smart match proposed:",X),setShowSmartMatchmaking(!1)},isMobile:a}),u.createElement(BE,{isOpen:showPhase1Rules,onClose:()=>setShowPhase1Rules(!1),isMobile:a}))},Ax={async validateChallenge(t,a,e,n=!1,r=null){return _n.post("/api/challenges/validate",{senderName:t,receiverName:a,division:e,isRematch:n,originalChallengeId:r})},async validateDefenseAcceptance(t,a,e){return _n.post("/api/challenges/validate-defense",{defenderName:t,challengerName:a,division:e})},async getChallengeStats(t,a){return _n.get(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getChallengeLimits(t,a){return _n.get(`/api/challenges/limits/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getEligibleOpponents(t,a){return _n.get(`/api/challenges/eligible-opponents/${encodeURIComponent(t)}/${encodeURIComponent(a)}`)},async getDivisionChallengeStats(t){return _n.get(`/api/challenges/division-stats/${encodeURIComponent(t)}`)},async updateChallengeStats(t,a,e){return _n.put(`/api/challenges/stats/${encodeURIComponent(t)}/${encodeURIComponent(a)}`,e)},async resetDivisionChallengeStats(t){return _n.delete(`/api/challenges/division-stats/${encodeURIComponent(t)}`)}};function z9({isOpen:t,onClose:a,isMobile:e}){return t?u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"10px"}},u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #ff4444",borderRadius:"12px",width:e?"98%":"90%",maxWidth:"800px",height:e?"98%":"95%",display:"flex",flexDirection:"column",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",color:"#ffffff"}},u.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",borderBottom:"2px solid #ff4444",flexShrink:0}},u.createElement("h2",{style:{margin:0,fontSize:e?"1.2rem":"1.5rem",color:"#ffffff",fontWeight:"bold",display:"flex",alignItems:"center",gap:"10px",textAlign:"center"}}," Phase 2 Challenge Rules"),u.createElement("button",{onClick:a,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"#ffffff",fontSize:"2rem",cursor:"pointer",padding:"5px",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",transition:"background-color 0.2s ease"},onMouseEnter:n=>n.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:n=>n.target.style.backgroundColor="transparent"},"")),u.createElement("div",{style:{flex:1,overflowY:"auto",padding:"25px",fontSize:e?"1rem":"1.1rem",lineHeight:"1.6"}},u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Overview"),u.createElement("p",{style:{margin:"0 0 15px 0",color:"#e0e0e0"}},"Phase 2 is the challenge phase where players compete against each other based on standings from Phase 1."),u.createElement("p",null,"You must complete 2-4 total matches during this phase, as either a challenger or defender.")),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Match Requirements"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Total Matches:")," 2-4 matches (minimum 2, maximum 4)"),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("p",null,u.createElement("strong",null,"Defenses:")," If challenged, at least 2 defensive matches are required(you may accept more voluntarily). "),u.createElement("li",null,u.createElement("p",null,"If not challenged no defensive matches are required."))),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Weekly Limit:")," Only 1 match per week (as challenger or defender)"))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Dynamic Challenge Limits"),u.createElement("div",{style:{background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"8px",padding:"15px",marginBottom:"15px"}},u.createElement("p",{style:{margin:"0 0 10px 0",color:"#ffc107",fontWeight:"bold"}},"Your challenge limit depends on how many times you've been challenged:"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"0 times challenged:")," You can issue 4 challenges"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"1 time challenged:")," You can issue 3 challenges"),u.createElement("li",{style:{marginBottom:"5px"}},u.createElement("strong",null,"2 times challenged:")," You can issue 2 challenges")))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Challenge Rules"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Standings Limit:")," You can challenge players ranked up to 4 spots higher than you."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"One Challenge:")," You may challenge the same opponent only once."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Rematch Rule:")," If you lose a challenge as a defender, you may issue a rematch (if both remain eligible). Opponent is not required to accept the rematch if they have played the required 2 defensive matches."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Defense Priority:")," If you receive multiple challenges in the same week, the lowest-ranked challenger has priority."))),u.createElement("div",{style:{marginBottom:"30px"}},u.createElement("h3",{style:{color:"#ff4444",fontSize:e?"1.2rem":"1.4rem",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"}}," Defense Rules"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0"}},u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Required Defenses:")," You must accept challenges until you've played at least 2 matches as a defender."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Defense Limit:")," No player may be required to defend more than 2 times."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Voluntary Defenses:")," You may accept additional defenses beyond the required 2."),u.createElement("li",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Declining Challenges:")," After 2 defenses, declining further challenges is not a forfeit"))),u.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",border:"1px solid rgba(255, 68, 68, 0.3)",borderRadius:"8px",padding:"15px",marginTop:"20px"}},u.createElement("h4",{style:{color:"#ff4444",fontSize:e?"1rem":"1.1rem",margin:"0 0 10px 0",display:"flex",alignItems:"center",gap:"8px"}}," Important Notes"),u.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#e0e0e0",fontSize:e?"0.85rem":"0.9rem"}},u.createElement("li",{style:{marginBottom:"5px"}},"All challenges and responses must be recorded in the League Scheduling Hub"),u.createElement("li",{style:{marginBottom:"5px"}},"Any attempt to exploit rules or collude will be treated as a sportsmanship violation"),u.createElement("li",{style:{marginBottom:"5px"}},"Once you complete 4 matches, you may not accept or issue further challenges")))),u.createElement("div",{style:{textAlign:"center",padding:"20px",borderTop:"1px solid rgba(255,255,255,0.2)",flexShrink:0}},u.createElement("button",{onClick:a,style:{background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"none",color:"#ffffff",fontSize:e?"0.9rem":"1rem",fontWeight:"bold",padding:e?"10px 20px":"12px 25px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},onMouseEnter:n=>{n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.4)"},onMouseLeave:n=>{n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"}},"Got It! ")))):null}function j9({isOpen:t,onClose:a,phase1Stats:e,playerName:n,playerLastName:r,isMobile:o}){if(!t||!e)return null;const l=`${n} ${r}`;return u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:1e3,padding:o?"10px":"20px",overflowY:"auto"},onClick:a},u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"3px solid #ff4444",borderRadius:o?"12px":"16px",padding:o?"20px":"30px",maxWidth:o?"90vw":"500px",width:"100%",maxHeight:o?"80vh":"70vh",overflowY:"auto",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(5px)",position:"relative",marginTop:o?"20px":"40px",marginBottom:o?"20px":"40px"},onClick:d=>d.stopPropagation()},u.createElement("button",{onClick:a,style:{position:"absolute",top:o?"10px":"15px",right:o?"10px":"15px",background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"3px solid #ffffff",color:"#ffffff",fontSize:o?"1.2rem":"1.5rem",fontWeight:"bold",width:o?"35px":"40px",height:o?"35px":"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",zIndex:1e3,boxShadow:"0 4px 8px rgba(0,0,0,0.5)",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:d=>{d.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",d.target.style.transform="scale(1.1)",d.target.style.boxShadow="0 6px 12px rgba(0,0,0,0.7)"},onMouseLeave:d=>{d.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",d.target.style.transform="scale(1)",d.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.5)"}},""),u.createElement("div",{style:{textAlign:"center",marginBottom:o?"20px":"25px"}},u.createElement("h2",{style:{color:"#ffffff",fontSize:o?"1.2rem":"1.5rem",fontWeight:"bold",margin:"0 0 5px 0",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"}}," Phase 1 Results"),u.createElement("div",{style:{color:"#e0e0e0",fontSize:o?"0.9rem":"1rem",fontStyle:"italic"}},l)),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:o?"12px":"16px",marginBottom:o?"20px":"25px"}},u.createElement("div",{style:{padding:o?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},u.createElement("div",{style:{fontSize:o?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Record"),u.createElement("div",{style:{fontSize:o?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.wins,"-",e.losses),u.createElement("div",{style:{fontSize:o?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},e.winRate,"% Win Rate")),u.createElement("div",{style:{padding:o?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},u.createElement("div",{style:{fontSize:o?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Final Position"),u.createElement("div",{style:{fontSize:o?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.position),u.createElement("div",{style:{fontSize:o?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"in Division")),u.createElement("div",{style:{padding:o?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",border:"2px solid rgba(255,255,255,0.2)",textAlign:"center"}},u.createElement("div",{style:{fontSize:o?"0.8rem":"1rem",color:"#e0e0e0",marginBottom:"8px",fontWeight:"bold"}},"Matches Played"),u.createElement("div",{style:{fontSize:o?"1.5rem":"2rem",color:"#ffffff",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.8)",marginBottom:"5px"}},e.totalMatches),u.createElement("div",{style:{fontSize:o?"0.9rem":"1.1rem",color:"#e0e0e0",fontStyle:"italic"}},"Total Games"))),u.createElement("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:"8px",padding:o?"15px":"20px",border:"1px solid rgba(255,255,255,0.1)",marginBottom:o?"15px":"20px"}},u.createElement("h3",{style:{color:"#ffffff",fontSize:o?"1rem":"1.2rem",margin:"0 0 10px 0",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Performance Summary"),u.createElement("div",{style:{color:"#e0e0e0",fontSize:o?"0.85rem":"1rem",lineHeight:"1.5",textAlign:"center"}},e.totalMatches===0?u.createElement("div",null,"No matches completed in Phase 1"):u.createElement("div",null,u.createElement("div",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Win Rate:")," ",e.winRate,"% (",e.wins," wins, ",e.losses," losses)"),u.createElement("div",{style:{marginBottom:"8px"}},u.createElement("strong",null,"Final Standing:")," ",e.position," place"),u.createElement("div",null,u.createElement("strong",null,"Total Matches:")," ",e.totalMatches," games played")))),u.createElement("div",{style:{background:"rgba(255, 68, 68, 0.1)",borderRadius:"8px",padding:o?"15px":"20px",border:"2px solid rgba(255, 68, 68, 0.3)",textAlign:"center"}},u.createElement("div",{style:{color:"#ff4444",fontSize:o?"0.9rem":"1rem",fontWeight:"bold",marginBottom:"5px"}}," Phase 2 Qualified"),u.createElement("div",{style:{color:"#e0e0e0",fontSize:o?"0.8rem":"0.9rem"}},"Ready for challenge matches and defenses"))))}function F9({playerName:t,playerLastName:a,selectedDivision:e,phase:n,isMobile:r,onOpenOpponentsModal:o,onOpenCompletedMatchesModal:l,onOpenStandingsModal:d,onOpenDefenseChallengersModal:h,onOpenAllMatchesModal:m,onOpenProposalListModal:p,onOpenSentProposalListModal:y,onOpenPlayerSearch:b,pendingCount:E=0,sentCount:S=0,upcomingMatches:C=[],onMatchClick:_,seasonData:x,completedMatches:D=[],standings:A=[]}){const[k,P]=w.useState(null),[L,G]=w.useState(null),[F,q]=w.useState(!0),[te,X]=w.useState(null),[se,ee]=w.useState(!0),[j,H]=w.useState(!1),[R,B]=w.useState(!1),[Y,$]=w.useState(null),T=`${t} ${a}`,U=()=>{let we=0,Xe=0;D&&D.length>0&&D.forEach(Xt=>{Xt.winner===T?we++:Xe++});const Je=D&&D.length>0?Math.round(we/(we+Xe)*100):0,ot=(Xt,Yt)=>{if(!Xt||Xt.length===0)return null;const ra=Yt.toLowerCase().trim(),Q=Xt.find(He=>He.name.toLowerCase().trim()===ra);return Q?parseInt(Q.rank):null},Nt=Xt=>{const Yt=Xt%10,ra=Xt%100;return Yt===1&&ra!==11?"st":Yt===2&&ra!==12?"nd":Yt===3&&ra!==13?"rd":"th"},kn=ot(A,T);let st="N/A";kn!==null?st=`${kn}${Nt(kn)}`:D&&D.length>=1&&(Je>=80?st="1st-3rd":Je>=60?st="4th-6th":Je>=40?st="7th-9th":st="10th+");const Ln={wins:we,losses:Xe,winRate:Je,position:st,totalMatches:D?D.length:0};console.log("Phase2Tracker - Calculated Phase 1 stats:",Ln),$(Ln)};w.useEffect(()=>{console.log("Phase2Tracker - Calculating Phase 1 stats:"),console.log("  completedMatches:",D),console.log("  standings:",A),console.log("  fullPlayerName:",T),U()},[D,A,T]);const V=(()=>{if(console.log("Phase2Tracker - Received seasonData:",x),console.log("Phase2Tracker - seasonData.phase1End:",x==null?void 0:x.phase1End),!x||!x.phase1End)return console.log("Phase2Tracker - No seasonData or phase1End found"),{days:null,status:"no_deadline"};const we=new Date,Xe=new Date(x.phase1End);if(console.log("Phase2Tracker - Date comparison:"),console.log("  now:",we.toISOString()),console.log("  phase1End:",Xe.toISOString()),console.log("  nowTime:",we.getTime()),console.log("  phase1EndTime:",Xe.getTime()),console.log("  isPhase1Active:",we<=Xe),console.log("  currentDate:",we.toLocaleDateString()),console.log("  phase1EndDate:",Xe.toLocaleDateString()),we<=Xe)return console.log("Phase2Tracker - Phase 1 is still active, returning phase1_active status"),{days:null,status:"phase1_active"};const Je=new Date(Xe);Je.setDate(Je.getDate()+28);const ot=Je-we,Nt=Math.ceil(ot/(1e3*60*60*24));return console.log("Phase2Tracker - Phase 2 calculation:"),console.log("  phase2End:",Je.toISOString()),console.log("  diffTime:",ot),console.log("  diffDays:",Nt),console.log("  status:",Nt<0?"passed":Nt<=1?"critical":Nt<=3?"urgent":Nt<=7?"warning":"normal"),Nt<0?{days:Math.abs(Nt),status:"passed"}:Nt<=1?{days:Nt,status:"critical"}:Nt<=3?{days:Nt,status:"urgent"}:Nt<=7?{days:Nt,status:"warning"}:{days:Nt,status:"normal"}})();if(console.log("Phase2Tracker - Final deadlineStatus:",V),console.log("Phase2Tracker - Final deadlineStatus.status:",V==null?void 0:V.status),console.log("Phase2Tracker - Final deadlineStatus.days:",V==null?void 0:V.days),w.useEffect(()=>{if(!t||!a||!e||n!=="challenge"){q(!1);return}async function we(){try{q(!0),X(null);const[Xe,Je]=await Promise.all([Ax.getChallengeStats(T,e),Ax.getChallengeLimits(T,e)]);P(Xe),G(Je)}catch(Xe){console.error("Error loading challenge data:",Xe),X("Failed to load challenge statistics")}finally{q(!1)}}we()},[t,a,e,n,T]),n!=="challenge")return null;if(F)return u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #ff4444",borderRadius:r?"8px":"12px",padding:r?"1px":"18px",margin:r?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#888"}},"Loading Phase 2 challenge statistics...");if(te)return u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.7), rgba(26, 26, 26, 0.8))",border:"2px solid #e53e3e",borderRadius:r?"8px":"12px",padding:r?"1px":"18px",margin:r?"-15px 0 0 0":"16px 0",boxShadow:"0 6px 20px rgba(0,0,0,0.3), 0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(2px)",textAlign:"center",color:"#e53e3e"}},te);if(!k||!L)return null;const re=k.matchesAsChallenger+k.requiredDefenses,Ee=2,Ce=4,Be=re>=Ee,be=re>=Ce,Ve=()=>be?"completed":Be?"active":re>=1?"progressing":"ready",rt=(we,Xe)=>{const Je=we/Xe*100;return Je>=90?"#e53e3e":Je>=75?"#ffc107":"#28a745"},St=()=>{if(V.status==="phase1_active")return"#ffaa00";switch(Ve()){case"completed":return"#00aa00";case"active":return"#ff4444";case"progressing":return"#ff4444";case"ready":return"#ff4444";default:return"#ff4444"}},xt=()=>{const we=Ve();if(V.status==="phase1_active")return` Phase 1 still active until ${x&&x.phase1End?Wa(new Date(x.phase1End),r?"MMM d":"MMM d, yyyy"):""}`;if(V.status==="passed")return" DEADLINE PASSED!";if(V.status==="critical"){const Xe=new Date(x.phase1End),Je=new Date(Xe);Je.setDate(Je.getDate()+28);const ot=Wa(Je,r?"MMM d":"MMM d, yyyy");return` CRITICAL: ENDS in ${V.days} hours! (${ot})`}else if(V.status==="urgent"){const Xe=new Date(x.phase1End),Je=new Date(Xe);Je.setDate(Je.getDate()+28);const ot=Wa(Je,r?"MMM d":"MMM d, yyyy");return` URGENT: ENDS in ${V.days} days! (${ot})`}else if(V.status==="warning"){const Xe=new Date(x.phase1End),Je=new Date(Xe);Je.setDate(Je.getDate()+28);const ot=Wa(Je,r?"MMM d":"MMM d, yyyy");return` WARNING: ENDS in ${V.days} days. (${ot})`}else if(V.status==="normal"){const Xe=new Date(x.phase1End),Je=new Date(Xe);Je.setDate(Je.getDate()+28);const ot=Wa(Je,r?"MMM d":"MMM d, yyyy");return`ENDS in ${V.days} days. (${ot})`}switch(we){case"completed":return" Phase 2 Complete! (4/4 matches)";case"active":return` Active in Phase 2! ${re}/4 total matches (need 2-4)`;case"progressing":return` Phase 2 in progress! ${re}/4 total matches (need 2-4)`;case"ready":return" Ready for Phase 2! Need 2-4 total matches.";default:return"Phase 2 Challenge Status"}},pn=St();return u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(20, 20, 20, 0.85), rgba(10, 10, 10, 0.9))",border:`3px solid ${pn}`,borderRadius:r?"12px":"16px",padding:r?"8px":"20px",margin:r?"-15px 0 0 0":"16px 0",boxShadow:"0 8px 32px rgba(0,0,0,0.4), 0 4px 16px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"flex-start",backdropFilter:"blur(8px)",overflow:r||se?"auto":"hidden",maxHeight:r?"none":"35vh",height:r?se?"200px":"40px":se?"400px":"160px",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},onClick:()=>ee(!se)},u.createElement("div",{style:{position:"relative",textAlign:"center",marginBottom:r?"0px":"8px",padding:r?"4px":"8px",borderRadius:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"}},u.createElement("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},u.createElement("button",{onClick:we=>{we.stopPropagation(),B(!0)},style:{position:"absolute",left:0,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"6px",color:"#ffffff",fontSize:r?"0.5rem":"0.8rem",fontWeight:"bold",padding:r?"4px 8px":"6px 12px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},onMouseEnter:we=>{we.target.style.background="linear-gradient(135deg, rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.3))",we.target.style.color="#ff4444",we.target.style.transform="translateY(-50%) scale(1.05)",we.target.style.boxShadow="0 4px 16px rgba(255, 68, 68, 0.3), 0 2px 8px rgba(0,0,0,0.2)",we.target.style.border="1px solid rgba(255, 68, 68, 0.5)"},onMouseLeave:we=>{we.target.style.background="rgba(255,255,255,0.08)",we.target.style.color="#ffffff",we.target.style.transform="translateY(-50%) scale(1)",we.target.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",we.target.style.border="1px solid rgba(255,255,255,0.15)"}},u.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},u.createElement("div",null," Phase 1 Results",Y&&u.createElement("span",{style:{fontSize:r?"0.4rem":"0.7rem",opacity:.8}},"(",Y.wins,"-",Y.losses,"  ",Y.position,")")),u.createElement("div",{style:{fontSize:r?"0.3rem":"0.6rem",opacity:.7,fontStyle:"italic",marginTop:"2px"}},"click to view"))),u.createElement("button",{onClick:we=>{we.stopPropagation(),H(!0)},style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",background:"linear-gradient(135deg, #ff4444, #cc3333)",border:"2px solid #ffffff",color:"#ffffff",fontSize:r?"0.5rem":"0.8rem",fontWeight:"bold",padding:r?"4px 8px":"6px 12px",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",zIndex:10},onMouseEnter:we=>{we.target.style.background="linear-gradient(135deg, #ff6666, #dd4444)",we.target.style.transform="translateY(-50%) scale(1.1)",we.target.style.boxShadow="0 4px 8px rgba(0,0,0,0.4)"},onMouseLeave:we=>{we.target.style.background="linear-gradient(135deg, #ff4444, #cc3333)",we.target.style.transform="translateY(-50%) scale(1)",we.target.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)"}}," Phase 2 Rules"),u.createElement("h3",{style:{margin:0,color:"#ffffff",fontSize:r?"0.4rem":"1.1rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:r?"2px":"6px",flexWrap:"wrap",textShadow:"1px 1px 3px rgba(0,0,0,0.9)",textAlign:"center"}},V.status==="phase1_active"&&"",V.status!=="phase1_active"&&Ve()==="completed"&&"",V.status!=="phase1_active"&&Ve()==="active"&&"",V.status!=="phase1_active"&&Ve()==="progressing"&&"",V.status!=="phase1_active"&&Ve()==="ready"&&"",u.createElement("span",{style:{fontSize:r?"0.6rem":"1.1rem"}},"Phase 2"))),!r&&u.createElement("div",{style:{color:"#ffffff",fontSize:r?"0.6rem":"0.85rem",lineHeight:"1.1",marginTop:r?"2px":"3px",marginBottom:r?"0px":"6px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",fontWeight:"500"}},xt()),!r&&u.createElement("div",{style:{color:"#ffffff",fontSize:r?"0.55rem":"0.8rem",fontWeight:"bold",marginTop:r?"2px":"3px",marginBottom:r?"0px":"6px",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",lineHeight:"1.1"}},re,"/4 Total  ",k.requiredDefenses,"/2 Defenses")),u.createElement("div",{style:{textAlign:"center",marginBottom:r?"0px":"4px"}},u.createElement("div",{style:{fontSize:r?"0.5rem":"0.9rem",color:"#ffffff",fontWeight:"bold",cursor:"pointer",padding:r?"1px 3px":"4px 8px",borderRadius:"6px",display:"inline-block",transition:"background-color 0.2s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},onMouseEnter:we=>we.target.style.backgroundColor=`${pn}20`,onMouseLeave:we=>we.target.style.backgroundColor="transparent"},se?"Hide Stats ":"Show Stats ")),se&&u.createElement(u.Fragment,null,u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:r?"0.4rem":"0.6rem",marginBottom:r?"0.5rem":"0.75rem"}},u.createElement("div",{onClick:we=>{we.stopPropagation(),b&&b()},style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseEnter:we=>we.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:we=>we.target.style.backgroundColor="rgba(255,255,255,0.1)"},u.createElement("div",{style:{fontSize:r?"0.45rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"2px":"3px"}}," Total Matches"),u.createElement("div",{style:{fontSize:r?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"2px":"4px"}},re,"/4"),u.createElement("div",{style:{width:"100%",height:r?"2px":"3px",background:"rgba(255,255,255,0.2)",borderRadius:"2px",overflow:"hidden",marginBottom:r?"1px":"2px"}},u.createElement("div",{style:{width:`${re/Ce*100}%`,height:"100%",background:rt(re,Ce),borderRadius:"2px",transition:"width 0.3s ease"}})),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},Be?" Min met":`${Ee-re} to min`)),u.createElement("div",{onClick:we=>{we.stopPropagation(),h&&h()},style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onMouseEnter:we=>we.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:we=>we.target.style.backgroundColor="rgba(255,255,255,0.1)"},u.createElement("div",{style:{fontSize:r?"0.45rem":"0.8rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"2px":"3px"}}," Defenses"),u.createElement("div",{style:{fontSize:r?"0.4rem":"0.9rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"2px":"4px"}},k.requiredDefenses,"/2"),u.createElement("div",{style:{width:"100%",height:r?"2px":"3px",background:"rgba(255,255,255,0.2)",borderRadius:"2px",overflow:"hidden",marginBottom:r?"1px":"2px"}},u.createElement("div",{style:{width:`${k.requiredDefenses/2*100}%`,height:"100%",background:rt(k.requiredDefenses,2),borderRadius:"2px",transition:"width 0.3s ease"}})),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},k.requiredDefenses>=2?" Max met":`${2-k.requiredDefenses} required left`)),u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center"}},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"1px":"2px"}}," This Week"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"1px":"2px"}},L.weeklyStatus.canChallengeThisWeek?"":""," Available"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},L.weeklyStatus.challengesThisWeek," challenges"))),L.dynamicLimits&&u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255, 193, 7, 0.1)",border:"1px solid rgba(255, 193, 7, 0.3)",borderRadius:"6px",marginBottom:r?"0.5rem":"0.75rem",color:"#ffffff"}},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#ffc107",marginBottom:r?"0.25rem":"0.4rem",textAlign:"center"}}," Dynamic Challenge Limits"),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:r?"0.3rem":"0.5rem",fontSize:r?"0.35rem":"0.65rem",color:"#ffffff",textAlign:"center",lineHeight:r?"1.2":"1.3"}},u.createElement("div",null,u.createElement("strong",null,"Times Challenged:")," ",L.dynamicLimits.timesChallenged),u.createElement("div",null,u.createElement("strong",null,"Base Allowed:")," ",L.dynamicLimits.baseChallengesAllowed),u.createElement("div",null,u.createElement("strong",null,"Challenges Issued:")," ",L.dynamicLimits.challengesIssued),u.createElement("div",{style:{color:L.dynamicLimits.remainingChallenges>0?"#28a745":"#e53e3e",fontWeight:"bold"}},u.createElement("strong",null,"Remaining:")," ",L.dynamicLimits.remainingChallenges))),u.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:r?"0.4rem":"0.6rem",marginBottom:r?"0.5rem":"0.75rem"}},u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:we=>{we.stopPropagation(),p&&p()},onMouseEnter:we=>we.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:we=>we.target.style.backgroundColor="rgba(255,255,255,0.1)"},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"1px":"2px"}}," Proposals"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"1px":"2px"}},E," waiting"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},S," sent")),u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:we=>{we.stopPropagation(),b&&b()},onMouseEnter:we=>we.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:we=>we.target.style.backgroundColor="rgba(255,255,255,0.1)"},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"1px":"2px"}}," Schedule"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"1px":"2px"}},k.eligibleOpponentsCount," available"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click to schedule")),u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",textAlign:"center",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:we=>{we.stopPropagation(),m&&m()},onMouseEnter:we=>we.target.style.backgroundColor="rgba(255,255,255,0.15)",onMouseLeave:we=>we.target.style.backgroundColor="rgba(255,255,255,0.1)"},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#e0e0e0",marginBottom:r?"1px":"2px"}}," Matches"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.8rem",color:"#ffffff",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.8)",marginBottom:r?"1px":"2px"}},C.length," upcoming"),u.createElement("div",{style:{fontSize:r?"0.35rem":"0.65rem",color:"#e0e0e0",fontStyle:"italic",textAlign:"center",fontWeight:"500"}},"click for details"))),C.length>0&&u.createElement("div",{style:{marginBottom:r?"0.5rem":"0.75rem"}},u.createElement("div",{style:{fontSize:r?"0.4rem":"0.7rem",fontWeight:"bold",color:"#ffffff",marginBottom:r?"0.2rem":"0.4rem",textAlign:"center",textShadow:"1px 1px 2px rgba(0,0,0,0.8)"}},"Upcoming Matches"),u.createElement("div",{style:{maxHeight:r?"50px":"60px",overflowY:"auto",background:"rgba(0,0,0,0.3)",borderRadius:"4px",padding:r?"0.2rem":"0.4rem"}},C.slice(0,2).map((we,Xe)=>{let Je="";return we.senderName&&we.receiverName&&(Je=we.senderName.trim().toLowerCase()===T.toLowerCase()?we.receiverName:we.senderName),u.createElement("div",{key:we._id||Xe,style:{fontSize:r?"0.3rem":"0.6rem",color:"#ffffff",padding:r?"0.15rem 0.25rem":"0.25rem 0.4rem",marginBottom:r?"0.1rem":"0.15rem",background:"rgba(255,255,255,0.1)",borderRadius:"3px",cursor:"pointer",transition:"background-color 0.2s ease",textAlign:"center"},onClick:ot=>{ot.stopPropagation(),_&&_(we)},onMouseEnter:ot=>ot.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseLeave:ot=>ot.target.style.backgroundColor="rgba(255,255,255,0.1)"},"VS ",Je||"Unknown"," - ",we.date||"No Date")}),C.length>2&&u.createElement("div",{style:{fontSize:r?"0.3rem":"0.6rem",color:"#e0e0e0",textAlign:"center",fontStyle:"italic",padding:r?"0.15rem":"0.25rem"}},"+",C.length-2," more..."))),u.createElement("div",{style:{padding:r?"0.4rem":"0.6rem",background:"rgba(0,0,0,0.3)",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.1)",fontSize:r?"0.35rem":"0.65rem",color:"#ffffff",textAlign:"center"}},Be?u.createElement("div",null," Minimum requirement met (",re,"/4 total matches)"):u.createElement("div",null," Need ",Ee-re," more match",Ee-re!==1?"es":""," to meet minimum (2-4 total)"))),u.createElement(z9,{isOpen:j,onClose:()=>H(!1),isMobile:r}),u.createElement(j9,{isOpen:R,onClose:()=>B(!1),phase1Stats:Y,playerName:t,playerLastName:a,isMobile:r}))}const H9=({isOpen:t,onClose:a,match:e,onValidate:n,onReject:r})=>{const[o,l]=w.useState({actualDate:"",actualTime:"",actualLocation:"",winner:"",score:"",notes:"",witnesses:"",photos:null}),[d,h]=w.useState(!1);if(!t||!e)return null;const m=async y=>{y.preventDefault(),h(!0);try{if(!o.actualDate||!o.winner||!o.score){alert("Please fill in all required fields: Date, Winner, and Score");return}await n({matchId:e._id,...o}),a()}catch(b){console.error("Error validating match:",b),alert("Error validating match. Please try again.")}finally{h(!1)}},p=async()=>{if(window.confirm("Are you sure you want to reject this match completion? This will require the match to be replayed.")){h(!0);try{await r(e._id),a()}catch(y){console.error("Error rejecting match:",y),alert("Error rejecting match. Please try again.")}finally{h(!1)}}};return u.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},u.createElement("div",{style:{background:"#222",border:"2px solid #444",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"}},u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},u.createElement("h2",{style:{margin:0,color:"#fff"}}," Match Validation"),u.createElement("button",{onClick:a,style:{background:"none",border:"none",color:"#aaa",fontSize:"24px",cursor:"pointer"}},"")),u.createElement("div",{style:{background:"#333",padding:"16px",borderRadius:"8px",marginBottom:"20px"}},u.createElement("h3",{style:{margin:"0 0 12px 0",color:"#fff"}},"Match Details"),u.createElement("div",{style:{color:"#ccc",fontSize:"0.9rem"}},u.createElement("div",null,u.createElement("strong",null,"Players:")," ",e.player1," vs ",e.player2),u.createElement("div",null,u.createElement("strong",null,"Scheduled Date:")," ",e.date),u.createElement("div",null,u.createElement("strong",null,"Location:")," ",e.location))),u.createElement("form",{onSubmit:m},u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Date Played * ",u.createElement("span",{style:{color:"#ff4444"}},"Required")),u.createElement("input",{type:"date",value:o.actualDate,onChange:y=>l({...o,actualDate:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Time Played"),u.createElement("input",{type:"time",value:o.actualTime,onChange:y=>l({...o,actualTime:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Actual Location"),u.createElement("input",{type:"text",value:o.actualLocation,onChange:y=>l({...o,actualLocation:y.target.value}),placeholder:"Where was the match actually played?",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Winner * ",u.createElement("span",{style:{color:"#ff4444"}},"Required")),u.createElement("select",{value:o.winner,onChange:y=>l({...o,winner:y.target.value}),style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0},u.createElement("option",{value:""},"Select winner..."),u.createElement("option",{value:e.player1},e.player1),u.createElement("option",{value:e.player2},e.player2))),u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Final Score * ",u.createElement("span",{style:{color:"#ff4444"}},"Required")),u.createElement("input",{type:"text",value:o.score,onChange:y=>l({...o,score:y.target.value}),placeholder:"e.g., 7-3, 8-2, etc.",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"},required:!0})),u.createElement("div",{style:{marginBottom:"16px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Witnesses (optional)"),u.createElement("input",{type:"text",value:o.witnesses,onChange:y=>l({...o,witnesses:y.target.value}),placeholder:"Names of people who witnessed the match",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff"}})),u.createElement("div",{style:{marginBottom:"20px"}},u.createElement("label",{style:{display:"block",marginBottom:"4px",color:"#fff"}},"Additional Notes"),u.createElement("textarea",{value:o.notes,onChange:y=>l({...o,notes:y.target.value}),placeholder:"Any additional details about the match...",rows:"3",style:{width:"100%",padding:"8px",background:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",resize:"vertical"}})),u.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},u.createElement("button",{type:"button",onClick:p,disabled:d,style:{padding:"10px 16px",background:"#ff4444",border:"none",borderRadius:"6px",color:"#fff",cursor:d?"not-allowed":"pointer",opacity:d?.6:1}},d?"Rejecting...":"Reject Match"),u.createElement("button",{type:"submit",disabled:d,style:{padding:"10px 16px",background:"#00aa00",border:"none",borderRadius:"6px",color:"#fff",cursor:d?"not-allowed":"pointer",opacity:d?.6:1}},d?"Validating...":"Validate Match")))))};class Y9 extends u.Component{constructor(a){super(a),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,e){this.setState({error:a,errorInfo:e})}render(){return this.state.hasError?u.createElement("div",{style:{background:"linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.98))",border:"2px solid #e74c3c",borderRadius:"12px",padding:"20px",margin:"10px",textAlign:"center",color:"#ffffff"}},u.createElement("h3",{style:{color:"#e74c3c",marginBottom:"15px"}}," Phase 1 Tracker Error"),u.createElement("p",{style:{marginBottom:"15px"}},"Something went wrong with the Phase 1 Tracker. Please refresh the page."),!1,u.createElement("button",{onClick:()=>window.location.reload(),style:{background:"linear-gradient(135deg, #e74c3c, #c0392b)",color:"#ffffff",border:"none",borderRadius:"8px",padding:"10px 20px",cursor:"pointer",marginTop:"15px",fontWeight:"600"}}," Refresh Page")):this.props.children}}const Vf=async(t,a)=>{const e=await fetch(`${tt}/api/matches/status/${encodeURIComponent(t)}/${a}`);if(!e.ok)throw new Error("Failed to fetch matches by status");return e.json()},W9=async(t,a,e,n="")=>{const r=await fetch(`${tt}/api/matches/${t}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:a,score:e,notes:n})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to complete match")}return r.json()},G9=async(t,a="")=>{const e=await fetch(`${tt}/api/matches/${t}/cancel`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:a})});if(!e.ok){const n=await e.json();throw new Error(n.error||"Failed to cancel match")}return e.json()},$9=async t=>{const a=await fetch(`${tt}/api/matches/stats/${encodeURIComponent(t)}`);if(!a.ok)throw new Error("Failed to fetch match statistics");return a.json()},Z9=(t,a,e)=>{const[n,r]=w.useState([]),[o,l]=w.useState([]),[d,h]=w.useState(!0),[m,p]=w.useState(null),y=async()=>{try{h(!0);const[b,E]=await Promise.all([Vf(a,"scheduled"),Vf(a,"completed")]),S=b.filter(x=>x.player1Id===t||x.player2Id===t).map(x=>{const D=x.player1Id===t,A=D?x.player1Id:x.player2Id,k=D?x.player2Id:x.player1Id,P=new Date(x.scheduledDate),L=P.toISOString().split("T")[0],G=P.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...x,player:A,opponent:k,senderName:x.player1Id,receiverName:x.player2Id,date:L,time:G,gameType:x.gameType||"8 ball",raceLength:x.raceLength||5,type:"scheduled"}}),C=E.filter(x=>x.player1Id===t||x.player2Id===t).map(x=>{const D=x.player1Id===t,A=D?x.player1Id:x.player2Id,k=D?x.player2Id:x.player1Id,P=new Date(x.scheduledDate),L=P.toISOString().split("T")[0],G=P.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{...x,player:A,opponent:k,senderName:x.player1Id,receiverName:x.player2Id,date:L,time:G,gameType:x.gameType||"8 ball",raceLength:x.raceLength||5,type:"completed"}});let _=[];try{const x=await as.getPendingProposals(t,a),D=await as.getSentProposals(t,a);_=[...x,...D].filter(L=>L.status==="confirmed"&&(L.senderName===t||L.receiverName===t));const k=_.map(L=>{const G=L.senderName===t,F=G?L.senderName:L.receiverName,q=G?L.receiverName:L.senderName;return{_id:L._id,type:"proposal",status:"confirmed",player1Id:L.senderName,player2Id:L.receiverName,player:F,opponent:q,senderName:L.senderName,receiverName:L.receiverName,scheduledDate:L.date?new Date(L.date):new Date,date:L.date,time:L.time,location:L.location,message:L.message,gameType:L.gameType,raceLength:L.raceLength,completed:L.completed||!1,winner:L.winner||null}}),P=[...S,...k];P.sort((L,G)=>new Date(L.scheduledDate)-new Date(G.scheduledDate)),C.sort((L,G)=>new Date(G.completedDate)-new Date(L.completedDate)),r(P),l(C)}catch(x){console.warn("Error fetching confirmed proposals:",x),S.sort((D,A)=>new Date(D.scheduledDate)-new Date(A.scheduledDate)),C.sort((D,A)=>new Date(A.completedDate)-new Date(D.completedDate)),r(S),l(C)}p(null)}catch(b){console.error("Error fetching matches:",b),p(b.message),r([]),l([])}finally{h(!1)}};return w.useEffect(()=>{t&&a&&y()},[t,a,e]),{matches:n,completedMatches:o,scheduledConfirmedMatches:n,loading:d,error:m,refetch:y,markMatchCompleted:b=>{r(E=>E.filter(S=>S._id!==b._id)),l(E=>{const S={...b,completed:!0};return[...E,S]})},updateCompletedMatch:b=>{l(E=>E.map(S=>S._id===b._id?b:S))}}},Pd={async getAllNotes(){return _n.get("/api/notes")},async createNote(t){return _n.post("/api/notes",{text:t})},async deleteNote(t){return _n.delete(`/api/notes/${t}`)}};class q9{async checkAndSendDeadlineReminder(a,e,n){try{const r=await Ii.getCurrentSeason(n);if(!(r!=null&&r.season)){console.log("No current season found for division:",n);return}const o=r.season,l=new Date,d=new Date(o.phase1End);if(l>d){console.log("Phase 1 deadline has passed, no reminder needed");return}const h=Math.ceil((d-l)/(1e3*60*60*24));if(!this.shouldSendReminder(h))return;const p=await this.getUserMatchStatus(e,n);await sT({to_email:a,to_name:e,division:n,daysUntilDeadline:h,completedMatches:p.completedCount,totalRequiredMatches:p.totalRequired,deadlineDate:Wa(d,"EEEE, MMMM d, yyyy"),remainingMatches:p.remainingCount}),console.log(`Deadline reminder sent to ${e} for ${n}`)}catch(r){console.error("Error sending deadline reminder:",r)}}shouldSendReminder(a){return[7,3,1,0].includes(a)}async getUserMatchStatus(a,e){try{return{completedCount:1,totalRequired:6,remainingCount:5}}catch(n){return console.error("Error getting user match status:",n),{completedCount:0,totalRequired:6,remainingCount:6}}}async sendBulkDeadlineReminders(a){try{console.log(`Sending bulk deadline reminders for ${a}`)}catch(e){console.error("Error sending bulk deadline reminders:",e)}}}const Q9=new q9,V9="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",X9="BCAPL SIGNUP",J9={"FRBCAPL TEST":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=b345a437-3415-4765-b19a-b2f7014f2cfa","Singles Test":"https://lms.fargorate.com/PublicReport/LeagueReports?leagueId=e05896bb-b0f4-4a80-bf99-b2ca012ceaaa&divisionId=9058a0cc-3231-4118-bd91-b305006fe578"};function K9(t){const a={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat"},e={Mon:[],Tue:[],Wed:[],Thu:[],Fri:[],Sat:[]};return t&&t.split(/\r?\n/).forEach(n=>{const r=n.match(/Day:\s*(\w+),\s*Available From:\s*([\w:]+),\s*Available Until:\s*([\w: ]+)/i);if(r){const[o,l,d,h]=r,m=a[l];m&&e[m].push(`${d} - ${h}`)}}),e}function Tx(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-");return`${l}-${d}-${o}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}function UE({playerName:t,playerLastName:a,onOpenChat:e,userPin:n,onGoToAdmin:r,onLogout:o,onScheduleMatch:l,senderEmail:d}){const[h,m]=w.useState([]),[p,y]=w.useState(""),[b,E]=w.useState(!1),[S,C]=w.useState(!1),[_,x]=w.useState(!1),[D,A]=w.useState(null),[k,P]=w.useState(""),[L,G]=w.useState(!1),[F,q]=w.useState(!1),[te,X]=w.useState(null),[se,ee]=w.useState([]),[j,H]=w.useState(!0),[R,B]=w.useState(!1),[Y,$]=w.useState(""),[T,U]=w.useState(""),[K,V]=w.useState(null),[re,Ee]=w.useState(!1),[Ce,Be]=w.useState(!1),[be,Ve]=w.useState(!1),[rt,St]=w.useState("scheduled"),[xt,pn]=w.useState([]),[we,Xe]=w.useState(!1),[Je,ot]=w.useState(null),[Nt,kn]=w.useState(!1),[st,Ln]=w.useState(!1),[Xt,Yt]=w.useState(null),[ra,Q]=w.useState(!1),[He,nt]=w.useState(null),[$e,yt]=w.useState(!1),[Et,sa]=w.useState(null),[ia,Pn]=w.useState([]),[On,jn]=w.useState(0),[Za,dn]=w.useState(0),[Or,us]=w.useState(0),wt=`${t} ${a}`.trim(),{pendingProposals:wa,sentProposals:oa,loading:Ys,refetch:Fn}=lE(wt,p),Jt=Xt||rt,{matches:la,completedMatches:Bn,loading:Ws,refetch:qa,markMatchCompleted:pa,updateCompletedMatch:xn}=Z9(wt,p,Jt),[Tn,Qa]=w.useState(0),[ds,Gs]=w.useState(0),[Br,Ur]=w.useState(!1),[xr,zr]=w.useState(!1),[Ma,Sr]=w.useState(""),[Na,Va]=w.useState("all"),[sn,$s]=w.useState("date"),[fs,Xa]=w.useState(null),[jr,go]=w.useState(!1),[Zs,yo]=w.useState(!1),[El,Er]=w.useState(!1),[hs,Ra]=w.useState("direct"),[vo,Cr]=w.useState(0),[Ja,_r]=w.useState(!1),[Ir,Cl]=w.useState(null),[qs,Hn]=w.useState({player1:"",player2:""}),[Ka,Z]=w.useState(null),[N,fe]=w.useState(null),[me,xe]=w.useState(!1),[Ae,De]=w.useState(null),[Ne,at]=w.useState([]),[je,it]=w.useState(!1),Ue=w.useRef(null);ho();const ve=typeof window<"u"&&window.innerWidth<=768||typeof navigator<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:typeof window<"u"&&window.self!==window.top?window.innerWidth<=768||window.innerHeight<=600:!1;w.useEffect(()=>{(async()=>{try{const de=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);console.log("Device Info:",{userAgent:navigator.userAgent,isMobile:de,backendUrl:tt,protocol:window.location.protocol,hostname:window.location.hostname}),console.log("Testing backend connection...");const Ie=await fetch(`${tt}/health`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",credentials:"include"});Ie.ok?console.log(" Backend connection successful"):console.error(" Backend connection failed:",Ie.status,Ie.statusText)}catch(de){console.error(" Backend connection error:",de),console.error("Error details:",{name:de.name,message:de.message,stack:de.stack})}})()},[]),w.useEffect(()=>{Qa(wa.length)},[wa]),w.useEffect(()=>{Gs(oa.length)},[oa]),w.useEffect(()=>{async function O(){if(p)try{console.log("Dashboard - Fetching season data for division:",p);const[de,Ie]=await Promise.all([Ii.getCurrentSeason(p),Ii.getCurrentPhaseAndWeek(p)]);console.log("Dashboard - Season result:",de),console.log("Dashboard - Phase result:",Ie),Z((de==null?void 0:de.season)||null),fe(Ie),console.log("Dashboard - Set seasonData:",(de==null?void 0:de.season)||null)}catch(de){console.error("Error fetching season data:",de)}}O()},[p]),w.useEffect(()=>{async function O(){if(p)try{it(!0);const de=p.replace(/[^A-Za-z0-9]/g,"_"),Ie=`${tt}/static/standings_${de}.json`,Ye=await fetch(Ie);if(!Ye.ok){console.warn(`Failed to fetch standings: ${Ye.status} - ${Ye.statusText}`);return}const Qe=await Ye.json();if(!Array.isArray(Qe)){console.error("Standings data is not an array:",Qe);return}const Bt=Qe.filter(Dt=>{if(!Dt||typeof Dt!="object")return console.warn("Invalid standings entry:",Dt),!1;if(!Dt.name||!Dt.rank)return console.warn("Standings entry missing name or rank:",Dt),!1;const ka=parseInt(Dt.rank);return isNaN(ka)||ka<=0?(console.warn("Invalid rank in standings entry:",Dt),!1):!0});at(Bt)}catch(de){console.error("Failed to load standings:",de)}finally{it(!1)}}O()},[p]),w.useEffect(()=>{async function O(){try{const Ie=await(await fetch(`${tt}/api/messages/unread?user=${encodeURIComponent(d)}`)).json();Array.isArray(Ie)&&Cr(Ie.length)}catch(de){console.error("Failed to fetch unread messages:",de)}}if(d){O();const de=setInterval(O,3e4);return()=>clearInterval(de)}},[d]),w.useEffect(()=>{if(!t||!a||!p||Ws||Ys)return;const O=Jt==="challenge"?2:1,Ie=xt.filter(Dt=>Dt.division===p&&Dt.phase===O&&(Dt.player1&&Dt.player1.trim().toLowerCase()===wt.toLowerCase()||Dt.player2&&Dt.player2.trim().toLowerCase()===wt.toLowerCase())).length;dn(Bn.length);const Qe=la.filter(Dt=>Dt.status==="confirmed"&&(Dt.completed===!1||Dt.completed===void 0)).length+Bn.length,Bt=Math.max(0,Ie-Qe);jn(Bt),us(Ie)},[t,a,p,xt,Bn,la,Ws,Ys]);const ue=(()=>{if(!t||!a||!p)return 0;const de=xt.filter(Ie=>Ie.division===p&&(Ie.player1&&Ie.player1.trim().toLowerCase()===wt.toLowerCase()||Ie.player2&&Ie.player2.trim().toLowerCase()===wt.toLowerCase())).length;return de===0&&Jt==="scheduled"?(console.log("No schedule matches found, using fallback of 6 matches for Phase 1"),6):de})();w.useEffect(()=>{let O=!0;async function de(){try{const Ie=await Dh(V9,`${X9}!A1:L1000`);if(!Ie||Ie.length===0){O&&Pn([]);return}const Ye=Ie.slice(1).map(Qe=>({firstName:Qe[0]||"",lastName:Qe[1]||"",email:Qe[2]||"",phone:Qe[3]||"",locations:Qe[8]||"",availability:K9(Qe[7]||""),pin:Qe[11]||"",preferredContacts:(Qe[10]||"").split(/\r?\n/).map(Bt=>Bt.trim().toLowerCase()).filter(Boolean)})).filter(Qe=>Qe.email&&Qe.firstName&&Qe.lastName);O&&Pn(Ye)}catch{O&&Pn([])}}return de(),()=>{O=!1}},[]),w.useEffect(()=>{if(!p){pn([]);return}let O;p==="FRBCAPL TEST"?O="schedule_FRBCAPL_TEST.json":p==="Singles Test"?O="schedule_Singles_Test.json":O=`schedule_${p.replace(/[^A-Za-z0-9]/g,"_")}.json`;const de=`${tt}/static/${O}`;fetch(de).then(Ie=>{if(!Ie.ok)throw new Error("Schedule not found");return Ie.json()}).then(Ie=>{console.log("Schedule loaded for",p,":",Ie.length,"matches"),pn(Ie)}).catch(Ie=>{console.error("Failed to load schedule for",p,":",Ie),console.log("Schedule URL attempted:",de),pn([])})},[p]),w.useEffect(()=>{d&&PE.getUser(d).then(O=>{let de=[];Array.isArray(O.divisions)?de=O.divisions.map(Ie=>Ie.trim()).filter(Boolean):typeof O.divisions=="string"?de=O.divisions.split(",").map(Ie=>Ie.trim()).filter(Boolean):de=[],m(de)}).catch(()=>{m([])})},[d]),w.useEffect(()=>{h.length>0?y(h[0]):y("")},[h]),w.useEffect(()=>{H(!0),Pd.getAllNotes().then(O=>{ee(O),H(!1)}).catch(()=>{ee([]),H(!1)})},[]),w.useEffect(()=>{if(!t||!a||!p)return;const O=setInterval(()=>{Fn(),qa()},2*60*1e3);return()=>clearInterval(O)},[t,a,p,Fn,qa]);const _e=async()=>{U("");try{const O=await Pd.createNote(Y.trim());ee([O,...se]),$(""),B(!1)}catch{U("Failed to add note")}},Me=async O=>{if(window.confirm("Delete this note?"))try{await Pd.deleteNote(O),ee(se.filter(de=>de._id!==O))}catch(de){console.error("Failed to delete note:",de)}},Pe=async()=>{if(window.confirm("Are you sure you want to clear all notes?"))try{for(const O of se)await Pd.deleteNote(O._id);ee([])}catch(O){console.error("Failed to clear notes:",O)}};async function Ct(O){if(te)try{await as.counterProposal(te._id,O),q(!1),X(null),qa(),Fn()}catch(de){console.error("Failed to counter proposal:",de)}}function Rt(){Ee(!1),V(null)}const xa=Jt==="challenge"?2:1,Fr=xt.filter(O=>O.division===p&&(!O.phase||O.phase===xa)&&(O.player1&&O.player1.trim().toLowerCase()===wt.toLowerCase()||O.player2&&O.player2.trim().toLowerCase()===wt.toLowerCase())),_t=Array.from(new Set(Fr.map(O=>O.player1&&O.player1.trim().toLowerCase()===wt.toLowerCase()?O.player2Email||O.player2EmailAddress||O.player2Email||O.player2||null:O.player2&&O.player2.trim().toLowerCase()===wt.toLowerCase()&&(O.player1Email||O.player1EmailAddress||O.player1Email||O.player1)||null).filter(Boolean)));function Le(){var Ie,Ye;const O=new Set,de=[];for(const Qe of Fr){const Bt=Qe.player1&&Qe.player1.trim().toLowerCase()===wt.toLowerCase()?Qe.player2:Qe.player1;if(Bn.some(Fe=>{var La,ms;const Jn=[(La=Fe.player1Id)==null?void 0:La.trim().toLowerCase(),(ms=Fe.player2Id)==null?void 0:ms.trim().toLowerCase()];return Fe.division===p&&Jn.includes(wt.toLowerCase())&&Jn.includes(Bt==null?void 0:Bt.trim().toLowerCase())}))continue;let ka=!1;for(let Fe=0;Fe<la.length;Fe++){if(O.has(Fe))continue;const Jn=la[Fe],La=[(Ie=Jn.player1Id)==null?void 0:Ie.trim().toLowerCase(),(Ye=Jn.player2Id)==null?void 0:Ye.trim().toLowerCase()];if(Jn.division===p&&La.includes(wt.toLowerCase())&&La.includes(Bt==null?void 0:Bt.trim().toLowerCase())){O.add(Fe),ka=!0;break}}ka||de.push(Qe)}return de}const an=Le().map(O=>{var Ye,Qe;const de=O.player1&&O.player1.trim().toLowerCase()===wt.toLowerCase()?(Ye=O.player2)==null?void 0:Ye.trim():(Qe=O.player1)==null?void 0:Qe.trim();if(!de)return null;const Ie=ia.find(Bt=>`${Bt.firstName} ${Bt.lastName}`.trim().toLowerCase()===de.toLowerCase());return{match:O,player:Ie,opponentName:de}}).filter(Boolean);function Sn(O){const de=ia.find(Ie=>`${Ie.firstName} ${Ie.lastName}`.trim().toLowerCase()===O.trim().toLowerCase());if(!de){alert("Player data not found for: "+O);return}if(!de.email){alert("This opponent does not have an email on file and cannot be proposed a match.");return}nt(de),Q(!0),Xe(!1)}w.useEffect(()=>{if(!d||!t||!p||!Ka||Jt!=="scheduled")return;const O=async()=>{try{await Q9.checkAndSendDeadlineReminder(d,`${t} ${a}`,p)}catch(Ie){console.error("Error checking deadline reminders:",Ie)}};O();const de=setInterval(O,60*60*1e3);return()=>clearInterval(de)},[d,t,a,p,Ka,Jt]);const Ot=la.filter(O=>O.division===p).filter(O=>{if(Ma){let de="";if(O.player1Id&&O.player2Id?O.player1Id.trim().toLowerCase()===wt.trim().toLowerCase()?de=O.player2Id:de=O.player1Id:O.senderName&&O.receiverName&&(O.senderName.trim().toLowerCase()===wt.trim().toLowerCase()?de=O.receiverName:de=O.senderName),!de.toLowerCase().includes(Ma.toLowerCase()))return!1}return!(Na!=="all"&&(Na==="completed"&&O.status!=="completed"||Na==="pending"&&O.status!=="pending"||Na==="upcoming"&&O.status==="completed"))}).sort((O,de)=>{switch(sn){case"date":const Ie=O.scheduledDate?new Date(O.scheduledDate):new Date(O.date||0),Ye=de.scheduledDate?new Date(de.scheduledDate):new Date(de.date||0);return Ie-Ye;case"opponent":let Qe="",Bt="";return O.player1Id&&O.player2Id?Qe=O.player1Id.trim().toLowerCase()===wt.trim().toLowerCase()?O.player2Id:O.player1Id:O.senderName&&O.receiverName&&(Qe=O.senderName.trim().toLowerCase()===wt.trim().toLowerCase()?O.receiverName:O.senderName),de.player1Id&&de.player2Id?Bt=de.player1Id.trim().toLowerCase()===wt.trim().toLowerCase()?de.player2Id:de.player1Id:de.senderName&&de.receiverName&&(Bt=de.senderName.trim().toLowerCase()===wt.trim().toLowerCase()?de.receiverName:de.senderName),Qe.localeCompare(Bt);case"status":const Dt={pending:1,confirmed:2,completed:3},ka=Dt[O.status]||0,Fe=Dt[de.status]||0;return ka-Fe;default:return 0}});function Kt(O){V(O),Ee(!0)}const Yn=be&&u.createElement(qn,{open:be,onClose:()=>{Ve(!1),Sr(""),Va("all"),$s("date")},title:` All Upcoming Matches (${Ot.length})`,maxWidth:"600px",maxHeight:"70vh"},u.createElement("div",{style:{display:"flex",gap:"12px",flexWrap:ve?"wrap":"nowrap",alignItems:"center",marginBottom:"16px"}},u.createElement("div",{style:{flex:1,minWidth:ve?"100%":"200px",position:"relative"}},u.createElement("input",{type:"text",placeholder:"Search by opponent name...",value:Ma,onChange:O=>Sr(O.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",transition:"all 0.2s ease"},onFocus:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.4)",O.target.style.background="rgba(0, 0, 0, 0.5)"},onBlur:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.2)",O.target.style.background="rgba(0, 0, 0, 0.3)"}}),u.createElement("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#888",fontSize:"0.9rem"}},"")),u.createElement("select",{value:Na,onChange:O=>Va(O.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:ve?"100%":"120px"},onFocus:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},u.createElement("option",{value:"all"},"All Matches"),u.createElement("option",{value:"upcoming"},"Upcoming"),u.createElement("option",{value:"completed"},"Completed"),u.createElement("option",{value:"pending"},"Pending")),u.createElement("select",{value:sn,onChange:O=>$s(O.target.value),style:{padding:"8px 12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none",cursor:"pointer",minWidth:ve?"100%":"100px"},onFocus:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.4)"},onBlur:O=>{O.target.style.border="1px solid rgba(255, 255, 255, 0.2)"}},u.createElement("option",{value:"date"},"Sort by Date"),u.createElement("option",{value:"opponent"},"Sort by Opponent"),u.createElement("option",{value:"status"},"Sort by Status"))),u.createElement("div",{style:{flex:1,overflowY:"auto",maxHeight:"50vh"}},Ot.length===0?u.createElement("div",{style:{textAlign:"center",padding:"40px 20px",color:"#888",fontSize:"1.1rem"}},u.createElement("div",{style:{fontSize:"3rem",marginBottom:"16px"}},""),u.createElement("div",{style:{marginBottom:"8px",fontWeight:"bold"}},"No matches found"),u.createElement("div",{style:{fontSize:"0.9rem"}},"You don't have any upcoming matches scheduled.")):u.createElement("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:ve?"1fr":"repeat(auto-fill, minmax(300px, 1fr))"}},Ot.map((O,de)=>{let Ie="",Ye="",Qe="upcoming";if(O.player1Id&&O.player2Id)if(O.player1Id.trim().toLowerCase()===wt.trim().toLowerCase()?Ie=O.player2Id:Ie=O.player1Id,O.scheduledDate){const Fe=new Date(O.scheduledDate);isNaN(Fe.getTime())?Ye="[Invalid Date]":Ye=Tx(Fe.toISOString().split("T")[0])}else Ye="[No Date]";else if(O.senderName&&O.receiverName&&(O.senderName.trim().toLowerCase()===wt.trim().toLowerCase()?Ie=O.receiverName:Ie=O.senderName),O.date){const Fe=O.date.split("-");if(Fe.length===3){const[Jn,La,ms]=Fe,mu=new Date(`${Jn}-${La}-${ms}`);isNaN(mu.getTime())?Ye="[Invalid Date]":Ye=Tx(O.date)}else Ye="[Invalid Date]"}else Ye="[No Date]";O.status;const Bt=O.status==="completed";Bt?Qe="completed":O.status==="pending"&&(Qe="pending");const Dt=Fe=>{switch(Fe){case"completed":return"#10b981";case"pending":return"#f59e0b";default:return"var(--accent-red)"}},ka=Fe=>{switch(Fe){case"completed":return"";case"pending":return"";default:return""}};return u.createElement("div",{key:O._id||de,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.15)",padding:"20px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},onMouseEnter:Fe=>{Fe.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",Fe.currentTarget.style.border="1px solid rgba(229, 62, 62, 0.3)",Fe.currentTarget.style.transform="translateY(-2px)",Fe.currentTarget.style.boxShadow="0 8px 24px rgba(229, 62, 62, 0.2)"},onMouseLeave:Fe=>{Fe.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%)",Fe.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.15)",Fe.currentTarget.style.transform="translateY(0)",Fe.currentTarget.style.boxShadow="none"}},u.createElement("div",{style:{position:"absolute",top:"16px",right:"16px",background:Dt(Qe),color:"#fff",padding:"6px 12px",borderRadius:"16px",fontSize:"0.8rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}},ka(Qe)," ",Qe),u.createElement("div",{style:{textAlign:"center",marginBottom:"16px",paddingRight:"100px"}},u.createElement("div",{style:{fontSize:"1.2rem",fontWeight:"700",color:"#fff",textShadow:"0 2px 4px rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",flexWrap:"wrap"}},u.createElement("span",null,t," ",a),u.createElement("span",{style:{color:"var(--accent-red)",fontSize:"1rem",fontWeight:"600"}},"VS"),u.createElement("span",null,Ie||"[Unknown Opponent]"))),u.createElement("div",{style:{display:"flex",justifyContent:"center",gap:"24px",marginBottom:"20px",fontSize:"0.9rem",color:"#ccc"}},u.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}}," ",Ye),O.location&&u.createElement("div",{style:{display:"flex",alignItems:"center",gap:"6px",background:"rgba(255, 255, 255, 0.1)",padding:"8px 12px",borderRadius:"8px"}}," ",O.location)),u.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"center"}},u.createElement("button",{onClick:()=>Kt(O),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--accent-red), var(--accent-red-dark))",border:"none",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(229, 62, 62, 0.3)",minWidth:"120px"},onMouseEnter:Fe=>{Fe.target.style.transform="translateY(-1px)",Fe.target.style.boxShadow="0 4px 16px rgba(229, 62, 62, 0.5)"},onMouseLeave:Fe=>{Fe.target.style.transform="translateY(0)",Fe.target.style.boxShadow="0 2px 8px rgba(229, 62, 62, 0.3)"}}," View Details"),!Bt&&u.createElement(LE,{className:le.dashboardBtn+" "+le.matchCardDoneBtn,loading:fs===O._id,loadingText:"Completing...",style:{padding:"12px 24px",fontSize:"0.9rem",fontWeight:"600",background:"linear-gradient(135deg, #6c757d, #5a6268)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",transition:"all 0.2s ease",minWidth:"120px",boxShadow:"0 2px 8px rgba(108, 117, 125, 0.3)"},onMouseEnter:Fe=>{fs!==O._id&&(Fe.target.style.background="linear-gradient(135deg, #10b981, #059669)",Fe.target.style.transform="translateY(-1px)",Fe.target.style.boxShadow="0 4px 16px rgba(16, 185, 129, 0.5)")},onMouseLeave:Fe=>{fs!==O._id&&(Fe.target.style.background="linear-gradient(135deg, #6c757d, #5a6268)",Fe.target.style.transform="translateY(0)",Fe.target.style.boxShadow="0 2px 8px rgba(108, 117, 125, 0.3)")},onClick:()=>{let Fe="",Jn="";O.player1Id&&O.player2Id?(Fe=O.player1Id,Jn=O.player2Id):O.type==="scheduled"?(Fe=O.player1,Jn=O.player2):(Fe=O.senderName,Jn=O.receiverName),Cl(O),Hn({player1:Fe,player2:Jn}),_r(!0)},type:"button"}," Mark as Complete")))}))),u.createElement("div",{style:{padding:"16px 0 0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"16px",textAlign:"center"}},u.createElement("div",{style:{fontSize:"0.9rem",color:"#888"}},"Showing ",Ot.length," match",Ot.length!==1?"es":""))),Wn=[...la.filter(O=>{var de,Ie;return O.division===p&&[(de=O.player1Id)==null?void 0:de.trim().toLowerCase(),(Ie=O.player2Id)==null?void 0:Ie.trim().toLowerCase()].includes(wt.toLowerCase())}),...Bn.filter(O=>{var de,Ie;return O.division===p&&[(de=O.player1Id)==null?void 0:de.trim().toLowerCase(),(Ie=O.player2Id)==null?void 0:Ie.trim().toLowerCase()].includes(wt.toLowerCase())})];Array.from(new Set(Wn.map(O=>O._id))).map(O=>Wn.find(de=>de._id===O)).length;const[er,Xn]=w.useState(!1);[...wa.filter(O=>O.status==="pending"&&O.receiverName===wt),...oa.filter(O=>O.status==="countered"&&O.senderName===wt)],[...oa.filter(O=>O.status==="pending"&&O.senderName===wt),...wa.filter(O=>O.status==="countered"&&O.receiverName===wt)];const tr=we&&Ue.current?tu.createPortal(u.createElement("div",{style:{position:"absolute",top:Ue.current.getBoundingClientRect().top+window.scrollY,left:Ue.current.getBoundingClientRect().left+window.scrollX,width:Ue.current.offsetWidth,height:Ue.current.offsetHeight,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",pointerEvents:"auto"}},u.createElement(tS,{open:we,onClose:()=>Xe(!1),opponents:an,onOpponentClick:Sn,phase:Jt,selectedCalendarDate:Je})),document.body):null;return u.createElement("div",{className:le.dashboardBg,style:{position:"relative"}},u.createElement("div",{className:le.dashboardFrame,style:{position:"relative",zIndex:1}},u.createElement("div",{className:le.dashboardCard,style:{position:"relative",zIndex:1,padding:ve?"12px":"20px",margin:ve?"6px":"16px"}},u.createElement("h1",{className:le.dashboardTitle,style:{fontSize:ve?"1.6rem":"2rem"}},"Welcome,",u.createElement("span",{className:le.dashboardUserName,style:{fontSize:ve?"1.4rem":"1.8rem"}},t," ",a)),u.createElement("div",{className:le.announcement,style:{fontSize:ve?"0.75rem":"1rem",marginBottom:ve?"8px":"16px"}},u.createElement("p",null,"This is the BETA version. "),"Matches that are created, scheduled, and confirmed will NOT be played.",u.createElement("br",null),"This is for testing purposes only."),n==="777777"&&u.createElement("div",{style:{marginBottom:ve?12:16,textAlign:"center"}},u.createElement("button",{onClick:()=>window.location.hash="#/tenball-tutorial",style:{background:"linear-gradient(45deg, #4CAF50, #8BC34A)",border:"none",color:"white",padding:ve?"10px 16px":"12px 20px",borderRadius:"25px",cursor:"pointer",fontSize:ve?"0.9rem":"1rem",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(76, 175, 80, 0.3)"}},u.createElement("img",{src:ih,alt:"10-Ball",style:{width:"20px",height:"20px",marginRight:"8px",display:"inline-block",verticalAlign:"text-bottom"}}),"Play 10-Ball Tutorial & Learn Official CSI Rules")),!ve&&u.createElement("br",null),h.length>0&&u.createElement("div",{style:{marginBottom:ve?8:16,display:"flex",flexDirection:"column",alignItems:ve?"flex-start":"center",gap:ve?"8px":"12px"}},u.createElement("div",{style:{display:"flex",flexDirection:ve?"column":"row",alignItems:ve?"flex-start":"center",gap:ve?"4px":"12px",width:"100%"}},u.createElement("label",{style:{fontSize:ve?"0.9rem":"1rem"}},"Division:",h.length>1?u.createElement("select",{value:p,onChange:O=>y(O.target.value),style:{fontSize:ve?"0.9em":"1em",padding:ve?6:4,borderRadius:4}},h.map(O=>u.createElement("option",{key:O,value:O},O))):u.createElement("span",{style:{fontWeight:600}},h[0])))),u.createElement("section",{className:`${le.dashboardSection} ${le.dashboardSectionBox} ${le.matchesSection}`,style:{position:"relative",overflow:"visible",backgroundColor:"rgba(0, 0, 0, .5)",minHeight:ve?"650px":"570px",marginBottom:ve?"16px":"36px",paddingBottom:"20px"}},u.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},u.createElement("div",{className:le.poolTableContainer,style:{marginBottom:ve?"12px":"24px",position:"relative",width:"100%",maxWidth:ve?"98%":"600px",height:ve?"400px":"auto",display:"flex",justifyContent:"center",alignItems:"center"}},Jt==="scheduled"&&Ka&&u.createElement("div",{style:{position:"absolute",top:ve?"50px":"35px",left:"50%",transform:"translateX(-50%)",zIndex:10,width:ve?"95%":"90%",maxWidth:ve?"500px":"1200px",height:ve?"150px":"200px"}},u.createElement(Y9,null,u.createElement(B9,{currentPhase:Jt,seasonData:Ka,completedMatches:Bn,totalRequiredMatches:ue,playerName:t,playerLastName:a,selectedDivision:p,onOpenOpponentsModal:O=>{ot(O),Xe(!0)},onOpenCompletedMatchesModal:()=>Xn(!0),onOpenStandingsModal:()=>E(!0),onOpenAllMatchesModal:()=>Ve(!0),pendingCount:Tn,sentCount:ds,onOpenProposalListModal:()=>x(!0),onOpenSentProposalListModal:()=>G(!0),upcomingMatches:Ot,onMatchClick:Kt,isMobile:ve,onOpenMessageCenter:O=>{Ra(O),Er(!0)},currentUser:{firstName:t,lastName:a,email:d},allPlayers:ia}))),Jt==="challenge"&&u.createElement("div",{style:{position:"absolute",top:ve?"50px":"35px",left:"50%",transform:"translateX(-50%)",zIndex:10,width:ve?"95%":"90%",maxWidth:ve?"500px":"1200px",height:ve?"150px":"200px"}},u.createElement(F9,{playerName:t,playerLastName:a,selectedDivision:p,phase:Jt,isMobile:ve,onOpenOpponentsModal:O=>{ot(O),Xe(!0)},onOpenCompletedMatchesModal:()=>Xn(!0),onOpenStandingsModal:()=>E(!0),onOpenDefenseChallengersModal:()=>C(!0),onOpenAllMatchesModal:()=>Ve(!0),pendingCount:Tn,sentCount:ds,onOpenProposalListModal:()=>x(!0),onOpenSentProposalListModal:()=>G(!0),onOpenPlayerSearch:()=>kn(!0),upcomingMatches:Ot,onMatchClick:Kt,seasonData:Ka,completedMatches:Bn,standings:Ne})),ve?u.createElement("div",{className:le.simulationContainer,ref:Ue,style:{width:"100% !important",height:"400px !important",position:"relative",minWidth:"0 !important",maxWidth:"100% !important",minHeight:"400px !important",maxHeight:"400px !important"}},u.createElement(uf,{isRotated:!0})):u.createElement(R2,{aspectWidth:600,aspectHeight:300},u.createElement("div",{className:le.simulationContainer,ref:Ue,style:{width:"100%",height:"100%",position:"relative"}},u.createElement(uf,null))),tr))),u.createElement("section",{className:`${le.dashboardSection} ${le.dashboardSectionBox} ${le.newsUpdatesSection}`},u.createElement("h2",{className:le.dashboardSectionTitle},"News & Updates"),j?u.createElement(YB,{lines:3,height:"16px"}):u.createElement("ul",{className:le.dashboardList},se.length===0?u.createElement("li",{className:le.dashboardNoteItem},"No news yet."):se.map((O,de)=>u.createElement("li",{key:O._id||de,className:le.dashboardNoteItem},u.createElement("span",{style:{flex:1}},O.text),n==="777777"&&u.createElement("button",{onClick:()=>Me(O._id),style:{background:"#e53935",color:"#fff",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:"0.95em"},"aria-label":"Delete note",title:"Delete note",type:"button"},"Delete")))),n==="777777"&&se.length>0&&u.createElement("button",{style:{marginTop:10,background:"#444",color:"#fff",border:"none",borderRadius:5,padding:"4px 14px",cursor:"pointer",fontSize:"0.98em"},onClick:Pe,type:"button"},"Clear All Notes"),T&&u.createElement("div",{style:{marginTop:10,padding:"10px",background:"#ffebee",color:"#c62828",border:"1px solid #ffcdd2",borderRadius:"4px",fontSize:"0.9em"}},"Error: ",T)),u.createElement("button",{className:le.dashboardLogoutBtn,onClick:o,type:"button"},"Logout"),n==="777777"&&u.createElement(u.Fragment,null,u.createElement("button",{className:le.dashboardAdminBtn,onClick:()=>B(!0),type:"button"},"Add Note"),u.createElement("button",{className:le.dashboardAdminBtn,onClick:r,type:"button"},"Admin"),u.createElement("button",{className:le.dashboardAdminBtn,onClick:async()=>{if(Xt==="challenge")Yt("scheduled");else try{const de=await(await fetch(`${tt}/api/seasons/activate-phase2/${encodeURIComponent(p)}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();de.success?(console.log(" Phase 2 activated successfully:",de.message),Yt("challenge"),alert(" Phase 2 activated successfully! The system will now allow Phase 2 challenges."),p&&(async()=>{try{const[Ye,Qe]=await Promise.all([Ii.getCurrentSeason(p),Ii.getCurrentPhaseAndWeek(p)]);Z((Ye==null?void 0:Ye.season)||null),fe(Qe)}catch(Ye){console.error("Error refreshing season data:",Ye)}})()):(console.error(" Failed to activate Phase 2:",de.error),alert("Failed to activate Phase 2: "+de.error))}catch(O){console.error(" Error activating Phase 2:",O),alert("Error activating Phase 2: "+O.message)}},type:"button"},Xt==="challenge"?"Switch to Phase 1 (Scheduled)":"Activate Phase 2 (Challenge)"),Xt&&u.createElement("button",{className:le.dashboardAdminBtn,onClick:()=>Yt(null),type:"button",style:{background:"#888"}},"Clear Phase Override")))),Nt&&u.createElement(u.Fragment,null,u.createElement(e0,{onClose:()=>kn(!1),excludeName:wt,senderName:wt,senderEmail:d,selectedDivision:p,phase:Jt,onProposalComplete:()=>kn(!1)})),st&&u.createElement(e0,{onClose:()=>Ln(!1),excludeName:null,senderName:wt,senderEmail:d,phase:Jt,onProposalComplete:()=>Ln(!1)}),ra&&He&&u.createElement(M0,{onClose:()=>{Q(!1),nt(null)},player:He,onProposeMatch:(O,de)=>{sa({player:He,day:O,slot:de,selectedDivision:p,phase:Jt}),yt(!0),Q(!1),nt(null)},selectedDivision:p,phase:Jt}),$e&&Et&&u.createElement(Q0,{player:Et.player,day:Et.day,slot:Et.slot,selectedDivision:Et.selectedDivision,phase:Et.phase||Jt,onClose:()=>yt(!1),senderName:`${t} ${a}`,senderEmail:d,onProposalComplete:()=>{yt(!1),sa(null),qa(),Fn()}}),u.createElement(J3,{open:b,onClose:()=>E(!1),standingsUrl:J9[p]}),u.createElement(K3,{open:S,onClose:()=>C(!1),playerName:t,playerLastName:a,selectedDivision:p}),u.createElement(yM,{open:re,onClose:Rt,match:K,onCompleted:O=>setUpcomingMatches(de=>de.filter(Ie=>Ie._id!==O)),userPin:n,onMatchUpdated:O=>V(O),senderName:`${t} ${a}`,senderEmail:d}),R&&u.createElement("div",{className:le.modalOverlay,style:{zIndex:99999}},u.createElement("div",{className:le.modalContent,style:{maxWidth:400,margin:"auto"}},u.createElement("h2",null,"Add News/Note"),u.createElement("textarea",{value:Y,onChange:O=>$(O.target.value),rows:4,style:{width:"100%",marginBottom:12,borderRadius:6,padding:8},placeholder:"Enter your note..."}),T&&u.createElement("div",{style:{color:"red",marginBottom:8}},T),u.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},u.createElement("button",{className:le.dashboardBtn,onClick:()=>B(!1),type:"button"},"Cancel"),u.createElement("button",{className:le.dashboardBtn,disabled:!Y.trim(),onClick:_e,type:"button"},"Add Note")))),_&&u.createElement(Np,{proposals:wa,onSelect:O=>{const de=d&&O.senderEmail&&d.toLowerCase()===O.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(O.senderName||"").toLowerCase();A(O),P(""),x(!1),Ur(de)},onClose:()=>x(!1),type:"received"}),L&&u.createElement(Np,{proposals:oa,onSelect:O=>{const de=d&&O.senderEmail&&d.toLowerCase()===O.senderEmail.toLowerCase()||`${t} ${a}`.toLowerCase()===(O.senderName||"").toLowerCase();A(O),P(""),G(!1),Ur(de)},onClose:()=>G(!1),type:"sent"}),D&&!Br&&u.createElement("div",{className:le.modalOverlay},u.createElement("div",{className:le.modalContent,style:{maxWidth:420,margin:"auto"}},u.createElement(DM,{proposal:D,userNote:k,setUserNote:P,onConfirm:async()=>{await as.updateProposalStatus(D._id,"confirmed",k),A(null),P(""),qa(),Fn()},onClose:()=>{A(null),P("")},onCounterPropose:()=>{X(D),q(!0),A(null)},phase:Jt,currentUserName:`${t} ${a}`,currentUserEmail:d}))),u.createElement(TR,{proposal:te,open:F,onClose:()=>{q(!1),X(null)},onSubmit:Ct,senderPlayer:ia.find(O=>{var de,Ie;return`${O.firstName} ${O.lastName}`.trim().toLowerCase()===((te==null?void 0:te.senderName)||"").trim().toLowerCase()||((de=O.email)==null?void 0:de.toLowerCase())===((Ie=te==null?void 0:te.senderEmail)==null?void 0:Ie.toLowerCase())}),phase:Jt,selectedDivision:p}),D&&Br&&u.createElement(GB,{proposal:D,open:Br,onClose:()=>{Ur(!1),A(null)},onEdit:()=>{D.isCounter?(Ur(!1),setTimeout(()=>{A(null),X(D),q(!0)},0)):zr(!0)},onMessage:()=>{alert("Message opponent coming soon!")}}),D&&xr&&u.createElement(qB,{proposal:D,open:xr,onClose:()=>{zr(!1)},onSave:O=>{A(O),Fn(),zr(!1)},selectedDivision:p,phase:Jt,receiverPlayer:ia.find(O=>{var de,Ie;return`${O.firstName} ${O.lastName}`.trim().toLowerCase()===(D.receiverName||"").trim().toLowerCase()||((de=O.email)==null?void 0:de.toLowerCase())===((Ie=D.receiverEmail)==null?void 0:Ie.toLowerCase())})}),Yn,El&&u.createElement("div",{className:le.modalOverlay,style:{zIndex:99999}},u.createElement("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"1400px",maxHeight:"900px",background:"#181818",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",overflow:"hidden"}},u.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:"1px solid #333",background:"#222",borderRadius:"12px 12px 0 0"}},u.createElement("h2",{style:{margin:0,color:"#ffffff",fontSize:"1.2em"}},hs==="league"?"League Chat":"Direct Messages"),u.createElement("button",{onClick:()=>Er(!1),style:{background:"none",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseOver:O=>O.target.style.background="#444",onMouseOut:O=>O.target.style.background="none",type:"button"},"")),u.createElement("div",{style:{flex:1,overflow:"hidden",position:"relative"}},hs==="league"?u.createElement(OE,{userName:`${t} ${a}`,userEmail:d,userPin:n,onClose:()=>Er(!1)}):u.createElement(P8,{userName:`${t} ${a}`,userEmail:d,userPin:n,selectedDivision:p,opponentEmails:_t,onClose:()=>Er(!1)})))),er&&u.createElement(Np,{proposals:Bn,onSelect:()=>{},onClose:()=>Xn(!1),type:"completed",isAdmin:n==="777777",senderEmail:d,senderName:`${t} ${a}`,onProposalUpdated:O=>{xn(O),Fn()}}),u.createElement(b0,{open:Ja,onClose:()=>_r(!1),player1:qs.player1,player2:qs.player2,onSelect:async O=>{if(Ir){if((N==null?void 0:N.phase)==="scheduled"&&Ka&&Ii.hasPhase1DeadlinePassed(Ka)&&!window.confirm(` PHASE 1 DEADLINE HAS PASSED!

You are attempting to complete a match after the Phase 1 deadline. This may affect your standings or eligibility for Phase 2.

Do you want to continue marking this match as completed?`)){_r(!1);return}_r(!1),Xa(Ir._id);try{const Ie=await(await fetch(`${tt}/api/matches?proposalId=${Ir._id}`)).json();if(Ie.length>0){const Ye=Ie[0]._id;await fetch(`${tt}/api/matches/${Ye}/complete`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({winner:O,score:"TBD",notes:`Completed by ${t} ${a}`})})}else await as.markCompleted(Ir._id,O);pa({...Ir,winner:O}),qa(),Fn()}catch(de){console.error("Error completing match:",de),alert("Failed to mark as completed.")}Xa(null)}}}),u.createElement(H9,{isOpen:me,onClose:()=>{xe(!1),De(null)},match:Ae,onValidate:async O=>{console.log("Validating match:",O),qa()},onReject:async O=>{console.log("Rejecting match:",O),qa()}}))}const eU="_adminDashboardRoot_ubhsd_21",tU="_adminDashboardNav_ubhsd_51",nU="_adminDashboardMainColumn_ubhsd_125",aU="_adminActionButton_ubhsd_335",rU="_adminChatWrapper_ubhsd_355",sU="_adminChannelList_ubhsd_379",iU="_adminChannelMessages_ubhsd_379",oU="_adminChannelListItem_ubhsd_425",lU="_selected_ubhsd_443",cU="_adminDeleteChannelBtn_ubhsd_451",uU="_adminChannelName_ubhsd_481",dU="_adminMessageItem_ubhsd_513",fU="_adminDeleteMessageBtn_ubhsd_537",hU="_adminCard_ubhsd_567",mU="_adminCardTitle_ubhsd_597",pU="_scrollableCardContent_ubhsd_617",tn={adminDashboardRoot:eU,adminDashboardNav:tU,adminDashboardMainColumn:nU,adminActionButton:aU,adminChatWrapper:rU,adminChannelList:sU,adminChannelMessages:iU,adminChannelListItem:oU,selected:lU,adminDeleteChannelBtn:cU,adminChannelName:uU,adminMessageItem:dU,adminDeleteMessageBtn:fU,adminCard:hU,adminCardTitle:mU,scrollableCardContent:pU},gU="_searchContainer_1xrci_1",yU="_searchTitle_1xrci_23",vU="_searchForm_1xrci_33",bU="_searchInput_1xrci_49",wU="_searchButton_1xrci_73",xU="_resultsTable_1xrci_95",SU="_resultsHeader_1xrci_127",EU="_resultsCell_1xrci_137",CU="_divisionBadge_1xrci_149",_U="_removeBtn_1xrci_179",IU="_addBtn_1xrci_209",Da={searchContainer:gU,searchTitle:yU,searchForm:vU,searchInput:bU,searchButton:wU,resultsTable:xU,resultsHeader:SU,resultsCell:EU,divisionBadge:CU,removeBtn:_U,addBtn:IU};function DU(t){if(!t)return"N/A";if(t.includes("-")&&t.length===10){const[o,l,d]=t.split("-"),h=new Date(parseInt(o),parseInt(l)-1,parseInt(d)),m=String(h.getMonth()+1).padStart(2,"0"),p=String(h.getDate()).padStart(2,"0"),y=h.getFullYear();return`${m}-${p}-${y}`}let a;if(t.includes("-"))a=new Date(t);else if(t.includes("/")){const o=t.split("/");if(o.length===3){const[l,d,h]=o;a=new Date(h,l-1,d)}else return t}else return t;if(isNaN(a.getTime()))return t;const e=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),r=a.getFullYear();return`${e}-${n}-${r}`}const Mx=tt;function AU({open:t,onClose:a}){const[e,n]=w.useState([]),[r,o]=w.useState(!0);w.useEffect(()=>{t&&(o(!0),fetch(`${Mx}/admin/unentered-matches`).then(d=>d.json()).then(d=>{n(d),o(!1)}))},[t]);const l=d=>{fetch(`${Mx}/admin/mark-lms-entered/${d}`,{method:"PATCH"}).then(h=>h.json()).then(()=>n(e.filter(h=>h._id!==d)))};return t?u.createElement(qn,{open:t,onClose:a,title:"Confirmed Challenge Matches Needing LMS Entry",maxWidth:"520px"},r?u.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"Loading unentered matches..."):e.length===0?u.createElement("div",{style:{color:"#fff",textAlign:"center",padding:"2rem"}},"All matches are entered!"):u.createElement("ul",{style:{padding:0,listStyle:"none"}},e.map(d=>u.createElement("li",{key:d._id,style:{marginBottom:12,background:"#222",borderRadius:8,padding:"12px 14px",display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:"4px solid #c00"}},u.createElement("span",null,u.createElement("span",{style:{color:"#fff"}},u.createElement("b",null,DU(d.date)),"  ",u.createElement("span",{style:{color:"#c00"}},d.senderName)," vs ",u.createElement("span",{style:{color:"#c00"}},d.receiverName),d.location&&u.createElement("span",{style:{color:"#fff"}}," @ ",d.location))),u.createElement("button",{style:{marginLeft:16,background:"#c00",color:"#fff",border:"none",borderRadius:5,padding:"7px 14px",fontWeight:"bold",cursor:"pointer",fontSize:"1em",transition:"background 0.2s"},onClick:()=>l(d._id)},"Mark as Entered"))))):null}const TU=({division:t,isAdmin:a=!1})=>{const[e,n]=w.useState([]),[r,o]=w.useState([]),[l,d]=w.useState(!0),[h,m]=w.useState(null),[p,y]=w.useState(null),[b,E]=w.useState(!1),[S,C]=w.useState(!1),[_,x]=w.useState(""),[D,A]=w.useState(""),[k,P]=w.useState(""),[L,G]=w.useState("");w.useEffect(()=>{t&&(F(),q())},[t]);const F=async()=>{try{d(!0);const[j,H]=await Promise.all([Vf(t,"scheduled"),Vf(t,"completed")]);n(j),o(H)}catch(j){console.error("Error loading matches:",j)}finally{d(!1)}},q=async()=>{try{const j=await $9(t);m(j)}catch(j){console.error("Error loading match stats:",j)}},te=async()=>{if(!(!p||!_||!D))try{await W9(p._id,_,D,k),E(!1),y(null),x(""),A(""),P(""),F(),q()}catch(j){console.error("Error completing match:",j),alert("Failed to complete match: "+j.message)}},X=async()=>{if(p)try{await G9(p._id,L),C(!1),y(null),G(""),F(),q()}catch(j){console.error("Error cancelling match:",j),alert("Failed to cancel match: "+j.message)}},se=j=>new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),ee=j=>j.status==="completed"?" Completed":j.status==="cancelled"?" Cancelled":" Scheduled";return l?u.createElement("div",{className:le.loading},"Loading matches..."):u.createElement("div",{className:le.matchManager},h&&u.createElement("div",{className:le.matchStats},u.createElement("h3",null,"Match Statistics"),u.createElement("div",{className:le.statsGrid},u.createElement("div",{className:le.statItem},u.createElement("span",{className:le.statNumber},h.total),u.createElement("span",{className:le.statLabel},"Total Matches")),u.createElement("div",{className:le.statItem},u.createElement("span",{className:le.statNumber},h.scheduled),u.createElement("span",{className:le.statLabel},"Scheduled")),u.createElement("div",{className:le.statItem},u.createElement("span",{className:le.statNumber},h.completed),u.createElement("span",{className:le.statLabel},"Completed")))),u.createElement("div",{className:le.matchSection},u.createElement("h3",null,"Scheduled Matches (",e.length,")"),e.length===0?u.createElement("p",{className:le.noMatches},"No scheduled matches"):u.createElement("div",{className:le.matchList},e.map(j=>u.createElement("div",{key:j._id,className:le.matchCard},u.createElement("div",{className:le.matchHeader},u.createElement("span",{className:le.matchStatus},ee(j)),u.createElement("span",{className:le.matchDate},se(j.scheduledDate))),u.createElement("div",{className:le.matchPlayers},u.createElement("span",{className:le.player1},j.player1Id),u.createElement("span",{className:le.vs},"vs"),u.createElement("span",{className:le.player2},j.player2Id)),u.createElement("div",{className:le.matchDetails},u.createElement("span",{className:le.location}," ",j.location),u.createElement("span",{className:le.type}," ",j.type)),a&&u.createElement("div",{className:le.matchActions},u.createElement("button",{className:le.actionButton,onClick:()=>{y(j),E(!0)}},"Complete"),u.createElement("button",{className:`${le.actionButton} ${le.cancelButton}`,onClick:()=>{y(j),C(!0)}},"Cancel")))))),u.createElement("div",{className:le.matchSection},u.createElement("h3",null,"Completed Matches (",r.length,")"),r.length===0?u.createElement("p",{className:le.noMatches},"No completed matches"):u.createElement("div",{className:le.matchList},r.map(j=>u.createElement("div",{key:j._id,className:`${le.matchCard} ${le.completedMatch}`},u.createElement("div",{className:le.matchHeader},u.createElement("span",{className:le.matchStatus},ee(j)),u.createElement("span",{className:le.matchDate},se(j.completedDate))),u.createElement("div",{className:le.matchPlayers},u.createElement("span",{className:`${le.player1} ${j.winner===j.player1Id?le.winner:""}`},j.player1Id),u.createElement("span",{className:le.vs},"vs"),u.createElement("span",{className:`${le.player2} ${j.winner===j.player2Id?le.winner:""}`},j.player2Id)),u.createElement("div",{className:le.matchResult},u.createElement("span",{className:le.winner}," Winner: ",j.winner),u.createElement("span",{className:le.score},"Score: ",j.score)),j.notes&&u.createElement("div",{className:le.matchNotes},u.createElement("span",{className:le.notesLabel},"Notes:"),u.createElement("span",{className:le.notesText},j.notes)))))),b&&p&&u.createElement("div",{className:le.modalOverlay},u.createElement("div",{className:le.modal},u.createElement("h3",null,"Complete Match"),u.createElement("p",null,p.player1Id," vs ",p.player2Id),u.createElement("div",{className:le.formGroup},u.createElement("label",null,"Winner:"),u.createElement("select",{value:_,onChange:j=>x(j.target.value)},u.createElement("option",{value:""},"Select winner"),u.createElement("option",{value:p.player1Id},p.player1Id),u.createElement("option",{value:p.player2Id},p.player2Id))),u.createElement("div",{className:le.formGroup},u.createElement("label",null,"Score:"),u.createElement("input",{type:"text",value:D,onChange:j=>A(j.target.value),placeholder:"e.g., 7-5"})),u.createElement("div",{className:le.formGroup},u.createElement("label",null,"Notes (optional):"),u.createElement("textarea",{value:k,onChange:j=>P(j.target.value),placeholder:"Any additional notes..."})),u.createElement("div",{className:le.modalActions},u.createElement("button",{onClick:te,disabled:!_||!D},"Complete Match"),u.createElement("button",{onClick:()=>E(!1)},"Cancel")))),S&&p&&u.createElement("div",{className:le.modalOverlay},u.createElement("div",{className:le.modal},u.createElement("h3",null,"Cancel Match"),u.createElement("p",null,p.player1Id," vs ",p.player2Id),u.createElement("div",{className:le.formGroup},u.createElement("label",null,"Reason for cancellation:"),u.createElement("textarea",{value:L,onChange:j=>G(j.target.value),placeholder:"Why is this match being cancelled?"})),u.createElement("div",{className:le.modalActions},u.createElement("button",{onClick:X},"Cancel Match"),u.createElement("button",{onClick:()=>C(!1)},"Keep Match")))))};var zE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nx=u.createContext&&u.createContext(zE),MU=["attr","size","title"];function NU(t,a){if(t==null)return{};var e=RU(t,a),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],!(a.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}function RU(t,a){if(t==null)return{};var e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(a.indexOf(n)>=0)continue;e[n]=t[n]}return e}function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Xf.apply(this,arguments)}function Rx(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,n)}return e}function Jf(t){for(var a=1;a<arguments.length;a++){var e=arguments[a]!=null?arguments[a]:{};a%2?Rx(Object(e),!0).forEach(function(n){kU(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Rx(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function kU(t,a,e){return a=LU(a),a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function LU(t){var a=PU(t,"string");return typeof a=="symbol"?a:a+""}function PU(t,a){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function jE(t){return t&&t.map((a,e)=>u.createElement(a.tag,Jf({key:e},a.attr),jE(a.child)))}function Pr(t){return a=>u.createElement(OU,Xf({attr:Jf({},t.attr)},a),jE(t.child))}function OU(t){var a=e=>{var{attr:n,size:r,title:o}=t,l=NU(t,MU),d=r||e.size||"1em",h;return e.className&&(h=e.className),t.className&&(h=(h?h+" ":"")+t.className),u.createElement("svg",Xf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,l,{className:h,style:Jf(Jf({color:t.color||e.color},e.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&u.createElement("title",null,o),t.children)};return Nx!==void 0?u.createElement(Nx.Consumer,null,e=>a(e)):a(zE)}function kx(t){return Pr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function BU(t){return Pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function UU(t){return Pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function zU(t){return Pr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function jU(t){return Pr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function FU(t){return Pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function HU(t){return Pr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function YU(t){return Pr({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function WU(t){return Pr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function GU(t){return Pr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"},child:[]}]})(t)}function $U(t){return Pr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const ZU="nbvut8j4y6se",dg="frbcaplgmailcom";function qU({backendUrl:t}){const[a,e]=w.useState([]),[n,r]=w.useState(""),[o,l]=w.useState(!1),[d,h]=w.useState("");return w.useEffect(()=>{fetch(`${t}/admin/divisions`).then(m=>m.json()).then(m=>{const p=m.map(y=>y.name);e(p),r(p[0]||"")}).catch(()=>e([]))},[t]),u.createElement("div",{style:{margin:"12px 0"}},u.createElement("h3",null,"Update Schedule for Division"),u.createElement("select",{value:n,onChange:m=>r(m.target.value),style:{marginRight:8,padding:4,borderRadius:4}},a.map(m=>u.createElement("option",{key:m,value:m},m))),u.createElement("button",{onClick:async()=>{l(!0),h("");try{const p=await(await fetch(`${t}/admin/update-schedule`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:n})})).json();p.deadlineExtended?h(` ${p.message}`):h(" "+(p.message||"Schedule updated successfully!"))}catch(m){h(" "+m.message)}l(!1)},disabled:o||!n,style:{background:"#673ab7",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",fontWeight:"bold",cursor:o?"not-allowed":"pointer"}},o?"Updating...":"Update Schedule"),d&&u.createElement("div",{style:{marginTop:8}},d))}function QU({backendUrl:t}){const[a,e]=w.useState([]),[n,r]=w.useState(""),[o,l]=w.useState(!1),[d,h]=w.useState("");w.useEffect(()=>{fetch(`${t}/admin/divisions`).then(p=>p.json()).then(p=>{const y=p.map(b=>b.name);e(y),r(y[0]||"")}).catch(()=>e([]))},[t]);const m=async()=>{l(!0),h("");try{const p=await fetch(`${t}/admin/update-season-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:n})}),y=await p.json();p.ok?h(" "+(y.message||"Season data updated successfully!")):h(" "+(y.error||"Update failed."))}catch(p){h(" Update failed: "+p.message)}l(!1)};return u.createElement("div",{style:{margin:"12px 0"}},u.createElement("h3",null,"Update Season Data from Schedule"),u.createElement("select",{value:n,onChange:p=>r(p.target.value),style:{marginRight:8,padding:4,borderRadius:4}},a.map(p=>u.createElement("option",{key:p,value:p},p))),u.createElement("button",{onClick:m,disabled:o||!n,style:{background:"#28a745",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",fontWeight:"bold",cursor:o?"not-allowed":"pointer"}},o?"Updating...":"Update Season Data"),d&&u.createElement("div",{style:{marginTop:8}},d))}function VU({backendUrl:t}){const[a,e]=w.useState(!1),[n,r]=w.useState(""),o=async()=>{e(!0),r("");try{(await fetch(`${t}/admin/sync-users`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok?r(" Users synced successfully!"):r(" Sync failed.")}catch{r(" Sync failed.")}e(!1)};return u.createElement("div",{style:{margin:"12px 0"}},u.createElement("button",{onClick:o,disabled:a,style:{background:"#007bff",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",cursor:a?"not-allowed":"pointer",fontWeight:"bold"}},a?"Adding...":"Add Players to Database"),n&&u.createElement("div",{style:{marginTop:8}},n))}function XU({backendUrl:t}){const[a,e]=w.useState(!1),[n,r]=w.useState(""),[o,l]=w.useState(""),d=async()=>{e(!0),r(""),l("");try{const h=await fetch(`${t}/admin/update-standings`,{method:"POST",headers:{"Content-Type":"application/json"}}),m=await h.json();h.ok?(r(" All standings updated successfully!"),m.message&&m.message.includes("Scraping Summary")&&l(m.message)):(r(" Update failed: "+(m.error||"Unknown error")),m.error&&l(m.error))}catch(h){r(" Update failed: Network error"),l(h.message)}e(!1)};return u.createElement("div",{style:{margin:"12px 0"}},u.createElement("button",{onClick:d,disabled:a,style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:5,padding:"8px 16px",cursor:a?"not-allowed":"pointer",fontWeight:"bold"}},a?" Updating All Standings...":" Update All Standings"),n&&u.createElement("div",{style:{marginTop:8,fontWeight:"bold"}},n),o&&u.createElement("div",{style:{marginTop:8,padding:8,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"0.9em",whiteSpace:"pre-wrap",fontFamily:"monospace"}},o))}function JU({backendUrl:t}){const[a,e]=w.useState([]),[n,r]=w.useState(""),o=async()=>{try{const h=(await(await fetch(`${t}/admin/divisions`)).json()||[]).map(m=>m.name);e(h),!n&&h.length>0&&r(h[0])}catch{e([])}};return w.useEffect(()=>{o()},[t]),u.createElement("div",{style:{width:"100%"}},u.createElement("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:16}},u.createElement("h3",{style:{margin:0}},"Match Manager (New System)"),u.createElement("select",{value:n,onChange:l=>r(l.target.value),style:{padding:"4px 8px",borderRadius:"4px"}},a.map(l=>u.createElement("option",{key:l,value:l},l)))),n&&u.createElement(TU,{division:n,isAdmin:!0}))}function KU({backendUrl:t,onDivisionCreated:a}){const[e,n]=w.useState(""),[r,o]=w.useState(""),[l,d]=w.useState(""),[h,m]=w.useState(""),[p,y]=w.useState(""),[b,E]=w.useState(""),S=async C=>{C.preventDefault(),E("");try{const _=await fetch(`${t}/api/seasons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,division:e,description:r,scheduleUrl:l,standingsUrl:h,seasonStart:p})}),x=await _.json();_.ok?(E(" Division/Season created!"),n(""),o(""),d(""),m(""),y(""),a&&a()):E(" "+(x.error||"Failed to create division/season."))}catch{E(" Failed to create division/season.")}};return u.createElement("form",{onSubmit:S,style:{marginBottom:16}},u.createElement("h3",null,"Create New Division/Season"),u.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},u.createElement("input",{type:"text",placeholder:"Division Name",value:e,onChange:C=>n(C.target.value),required:!0}),u.createElement("input",{type:"text",placeholder:"Description (optional)",value:r,onChange:C=>o(C.target.value)}),u.createElement("input",{type:"url",placeholder:"Schedule URL",value:l,onChange:C=>d(C.target.value),required:!0}),u.createElement("input",{type:"url",placeholder:"Standings URL",value:h,onChange:C=>m(C.target.value),required:!0}),u.createElement("input",{type:"date",placeholder:"Season Start",value:p,onChange:C=>y(C.target.value),required:!0}),u.createElement("div",{style:{fontSize:"0.95em",color:"#aaa",marginTop:4}},"Phase 1: 6 weeks  Phase 2: 4 weeks  Season: 10 weeks total (auto-calculated)"),u.createElement("button",{type:"submit"},"Create")),b&&u.createElement("div",{style:{marginTop:8}},b))}function ez({backendUrl:t}){const[a,e]=w.useState(""),[n,r]=w.useState([]),[o,l]=w.useState([]),[d,h]=w.useState("");w.useEffect(()=>{fetch(`${t}/admin/divisions`).then(b=>b.json()).then(b=>l(b.map(E=>E.name))).catch(()=>l([]))},[t]);const m=async b=>{if(b.preventDefault(),!!a.trim())try{const S=await(await fetch(`${t}/admin/search-users?query=${encodeURIComponent(a)}`)).json();r(S)}catch{r([]),alert("Search failed")}},p=async(b,E)=>{try{await fetch(`${t}/admin/user/${b}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:E})}),m({preventDefault:()=>{}})}catch{alert("Failed to add user to division")}},y=async(b,E)=>{try{await fetch(`${t}/admin/user/${b}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:E})}),m({preventDefault:()=>{}})}catch{alert("Failed to remove user from division")}};return u.createElement("div",{className:Da.searchContainer},u.createElement("h3",{className:Da.searchTitle},"Player Search & Quick Division Management"),u.createElement("form",{onSubmit:m,className:Da.searchForm},u.createElement("input",{type:"text",placeholder:"Search by name or email",value:a,onChange:b=>e(b.target.value),className:Da.searchInput}),u.createElement("button",{type:"submit",className:Da.searchButton},"Search")),n.length>0&&u.createElement("table",{className:Da.resultsTable},u.createElement("thead",null,u.createElement("tr",{className:Da.resultsHeader},u.createElement("th",null,"Name"),u.createElement("th",null,"Email"),u.createElement("th",null,"Divisions"),u.createElement("th",null,"Add to Division"))),u.createElement("tbody",null,n.map(b=>u.createElement("tr",{key:b.id},u.createElement("td",{className:Da.resultsCell},b.name||b.id),u.createElement("td",{className:Da.resultsCell},b.email),u.createElement("td",{className:Da.resultsCell},(b.divisions||[]).length>0?b.divisions.map(E=>u.createElement("span",{key:E,className:Da.divisionBadge},E,u.createElement("button",{className:Da.removeBtn,onClick:()=>y(b.id,E),title:`Remove from ${E}`},""))):u.createElement("span",{style:{color:"#888"}},"None")),u.createElement("td",{className:Da.resultsCell},u.createElement("select",{value:d,onChange:E=>h(E.target.value)},u.createElement("option",{value:""},"Select Division"),o.map(E=>u.createElement("option",{key:E,value:E},E))),u.createElement("button",{disabled:!d,onClick:()=>p(b.email,d),className:Da.addBtn},"Add")))))))}function tz({backendUrl:t}){const[a,e]=w.useState([]),[n,r]=w.useState(!1),[o,l]=w.useState(""),[d,h]=w.useState([]),[m,p]=w.useState(""),y=async()=>{const D=await(await fetch(`${t}/admin/divisions`)).json();h(D.map(A=>A.name).sort())},b=()=>{r(!0),fetch(`${t}/api/users`).then(x=>x.json()).then(x=>{e(x),r(!1)}).catch(()=>r(!1))};w.useEffect(()=>{b(),y()},[t]);const E=async(x,D)=>{l("");try{const k=await(await fetch(`${t}/admin/user/${x}/add-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:D})})).json();k.success?(e(a.map(P=>P.id===x?k.user:P)),l(` Added to ${D}!`)):l(" "+(k.error||"Failed to add division"))}catch{l(" Network error")}},S=async(x,D)=>{l("");const k=await(await fetch(`${t}/admin/user/${x}/remove-division`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({division:D})})).json();k.success?(e(a.map(P=>P.id===x?k.user:P)),l(` Removed from ${D}!`)):l(" "+(k.error||"Failed to remove division"))},C=m?a.filter(x=>(x.divisions||[]).includes(m)):[],_=m?a.filter(x=>!(x.divisions||[]).includes(m)):[];return n?u.createElement("div",null,"Loading users..."):u.createElement("div",{style:{margin:"24px 0",padding:16,border:"1px solid #ccc",borderRadius:8}},u.createElement("h3",null,"Division Manager"),u.createElement("div",{style:{marginBottom:12}},u.createElement("label",null,u.createElement("b",null,"Select Division: "),u.createElement("select",{value:m,onChange:x=>p(x.target.value),style:{marginLeft:8,padding:4,borderRadius:4}},u.createElement("option",{value:""},"-- Select --"),d.map(x=>u.createElement("option",{key:x,value:x},x))))),o&&u.createElement("div",{style:{marginBottom:8}},o),m&&u.createElement(u.Fragment,null,u.createElement("h4",null,"Users in ",m),C.length===0?u.createElement("div",null,"No users found in this division."):u.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",null,"User"),u.createElement("th",null,"Email"),u.createElement("th",null,"Divisions"),u.createElement("th",null,"Remove"))),u.createElement("tbody",null,C.map(x=>u.createElement("tr",{key:x.id},u.createElement("td",null,x.name||x.id),u.createElement("td",null,x.email),u.createElement("td",null,(x.divisions||[]).join(", ")),u.createElement("td",null,u.createElement("button",{onClick:()=>S(x.email,m),style:{color:"red",border:"none",background:"none",cursor:"pointer"}},"Remove")))))),u.createElement("h4",{style:{marginTop:24}},"Add Users to ",m),_.length===0?u.createElement("div",null,"All users are already in this division."):u.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",null,"User"),u.createElement("th",null,"Email"),u.createElement("th",null,"Add"))),u.createElement("tbody",null,_.map(x=>u.createElement("tr",{key:x.id},u.createElement("td",null,x.name||x.id),u.createElement("td",null,x.email),u.createElement("td",null,u.createElement("button",{onClick:()=>E(x.email,m),style:{color:"green",border:"none",background:"none",cursor:"pointer"}},"Add"))))))))}function nz(){const[t,a]=w.useState(null),[e,n]=w.useState([]),[r,o]=w.useState(null),[l,d]=w.useState([]),[h,m]=w.useState(!1),[p,y]=w.useState(!1),[b,E]=w.useState("chat"),[S,C]=w.useState(null),_=ho();w.useEffect(()=>{const k=q0.getInstance(ZU);async function P(){try{console.log("Admin setup starting..."),console.log("Admin user ID:",dg),console.log("Backend URL:",tt),console.log("Requesting admin token...");const L=await fetch(`${tt}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:dg})});if(!L.ok){const X=await L.text();throw console.error("Token request failed:",L.status,X),new Error(`Token request failed: ${L.status} - ${X}`)}const G=await L.json();if(console.log("Token response:",G),!G.token){console.error("No token in response:",G),alert("Failed to get admin token - no token in response");return}console.log("Connecting to Stream Chat..."),await k.connectUser({id:dg,name:"Admin"},G.token),a(k),console.log("Querying channels...");const F={type:"messaging"},q=[{last_message_at:-1}],te=await k.queryChannels(F,q,{watch:!1,state:!0});n(te),console.log("Admin setup completed successfully")}catch(L){console.error("Admin setup error:",L),alert("Admin setup error: "+L.message)}}return P(),()=>{k&&k.disconnectUser()}},[]),w.useEffect(()=>{if(!r)return;async function k(){m(!0),await r.watch(),d(r.state.messages),m(!1)}k()},[r]);async function x(k){if(window.confirm("Delete this message?"))try{await t.deleteMessage(k),d(P=>P.filter(L=>L.id!==k))}catch(P){alert("Failed to delete message: "+P.message)}}async function D(k){if(window.confirm(`Delete channel "${k.data.name||k.id}"? This cannot be undone.`))try{await k.delete(),n(P=>P.filter(L=>L.id!==k.id)),r&&r.id===k.id&&(o(null),d([]))}catch(P){alert("Failed to delete channel: "+P.message)}}const A=(k,P)=>{C({type:k,message:P}),setTimeout(()=>C(null),5e3)};return t?u.createElement("div",{className:tn.adminDashboardRoot},u.createElement("div",{className:tn.adminDashboardNav},u.createElement("button",{onClick:()=>{_("/"),window.location.reload()}}," User Dashboard"),u.createElement("button",{onClick:()=>_("/chat")}," Back to Chat"),u.createElement("button",{onClick:()=>{localStorage.clear(),_("/"),window.location.reload()}}," Logout")),u.createElement("div",{className:tn.adminDashboardMainColumn},S&&u.createElement("div",{style:{background:S.type==="success"?"#d4edda":"#f8d7da",color:S.type==="success"?"#155724":"#721c24",border:`1px solid ${S.type==="success"?"#c3e6cb":"#f5c6cb"}`,borderRadius:6,padding:"10px 18px",marginBottom:18,fontWeight:600,display:"flex",alignItems:"center",gap:10}},S.type==="success"?u.createElement(UU,null):u.createElement(FU,null)," ",S.message),u.createElement("div",{className:tn.adminCard},u.createElement("div",{className:tn.adminCardTitle},u.createElement(GU,null)," Data Sync"),u.createElement("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"}},u.createElement(qU,{backendUrl:tt}),u.createElement(QU,{backendUrl:tt}),u.createElement(XU,{backendUrl:tt}),u.createElement(VU,{backendUrl:tt}))),u.createElement("div",{className:tn.adminCard},u.createElement("div",{className:tn.adminCardTitle},u.createElement($U,null)," Division Management"),u.createElement("div",{className:tn.scrollableCardContent,style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"flex-start"}},u.createElement(KU,{backendUrl:tt,onDivisionCreated:()=>A("success","Division/Season created!")}),u.createElement(ez,{backendUrl:tt}),u.createElement(tz,{backendUrl:tt}))),u.createElement("div",{className:tn.adminCard},u.createElement("div",{className:tn.adminCardTitle},u.createElement(kx,null)," Match Management"),u.createElement("div",{className:tn.scrollableCardContent},u.createElement(JU,{backendUrl:tt}))),u.createElement("div",{className:tn.adminCard},u.createElement("div",{className:tn.adminCardTitle},u.createElement(BU,null)," Reports & Monitoring"),u.createElement("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center"}},u.createElement("button",{className:tn.adminActionButton,onClick:()=>y(!0)},"View Unentered LMS Matches"),u.createElement(AU,{open:p,onClose:()=>y(!1)}))),u.createElement("div",{className:tn.adminCard},u.createElement("div",{className:tn.adminCardTitle},u.createElement(kx,null)," Chat Admin"),u.createElement("div",{className:tn.scrollableCardContent+" "+tn.adminChatWrapper},u.createElement("div",{className:tn.adminChannelList},u.createElement("h3",null,"Channels"),u.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},e.map(k=>u.createElement("li",{key:k.id,className:tn.adminChannelListItem+((r==null?void 0:r.id)===k.id?` ${tn.selected}`:"")},u.createElement("button",{className:tn.adminDeleteChannelBtn,onClick:async P=>{P.stopPropagation(),await D(k)},title:"Delete Channel"},""),u.createElement("span",{className:tn.adminChannelName,onClick:()=>o(k),tabIndex:0,style:{outline:"none"},onKeyDown:P=>{P.key==="Enter"&&o(k)}},k.data.name||k.id))))),u.createElement("div",{className:tn.adminChannelMessages},u.createElement("h3",null,r?`Messages in "${r.data.name||r.id}"`:"Select a channel"),h&&u.createElement("div",null,"Loading messages..."),!h&&r&&u.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},l.map(k=>{var P,L;return u.createElement("li",{key:k.id,className:tn.adminMessageItem},u.createElement("b",null,((P=k.user)==null?void 0:P.name)||((L=k.user)==null?void 0:L.id),":")," ",k.text,u.createElement("button",{className:tn.adminDeleteMessageBtn,onClick:()=>x(k.id),title:"Delete Message"},""))}))))))):u.createElement("div",null,"Loading admin chat client...")}const az="_simplePoolGame_1kwr6_1",rz="_tableContainer_1kwr6_11",sz="_tableCanvas_1kwr6_22",iz="_aimingInstructions_1kwr6_35",oz="_instructions_1kwr6_47",lz="_controls_1kwr6_52",cz="_shootButton_1kwr6_70",uz="_buttonRow_1kwr6_105",dz="_resetAimButton_1kwr6_111",fz="_powerControl_1kwr6_145",hz="_gameInfo_1kwr6_274",mz="_resetButton_1kwr6_291",pz="_pushOutModal_1kwr6_710",gz="_pushOutContent_1kwr6_723",yz="_pushOutButtons_1kwr6_762",vz="_acceptButton_1kwr6_768",bz="_declineButton_1kwr6_769",rn={simplePoolGame:az,tableContainer:rz,tableCanvas:sz,aimingInstructions:iz,instructions:oz,controls:lz,shootButton:cz,buttonRow:uz,resetAimButton:dz,powerControl:fz,gameInfo:hz,resetButton:mz,pushOutModal:pz,pushOutContent:gz,pushOutButtons:yz,acceptButton:vz,declineButton:bz},uo={BREAK:"break",PLAY:"play"};function Zi(t){return t===uo.BREAK}function fg(t){return t===uo.PLAY}function wz(t,a){return t===uo.BREAK&&a?uo.PLAY:t}function xz(t,a){return t===uo.BREAK&&a}function Lx(t,a){return t===uo.PLAY&&a}const Sz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwxTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDFIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwxSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsMVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+MTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwxU2hhZG93KSIvPg0KPC9zdmc+IA==",Ez="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsdWUgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsMk1haW4iIGN4PSIzMCUiIGN5PSIzMCUiIHI9IjcwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjI1JSIgc3RvcC1jb2xvcj0iIzQyYTVmNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiMyMTk2ZjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNzUlIiBzdG9wLWNvbG9yPSIjMTk3NmQyIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwZDQ3YTEiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gSGlnaGxpZ2h0IGZvciBkZXB0aCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwySGlnaGxpZ2h0IiBjeD0iMjUlIiBjeT0iMjUlIiByPSI0NSUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2JiZGVmYiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAuNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjOTBjYWY5IiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTcGVjdWxhciIgY3g9IjQwJSIgY3k9IjQwJSIgcj0iMjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAuOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICAgIA0KICAgIDwhLS0gU2hhZG93IGdyYWRpZW50IC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDJTaGFkb3ciIGN4PSI3MCUiIGN5PSI3MCUiIHI9IjMwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIiBzdG9wLW9wYWNpdHk9IjAiLz4NCiAgICA8L3JhZGlhbEdyYWRpZW50Pg0KICA8L2RlZnM+DQogIA0KICA8IS0tIE1haW4gYmFsbCAtLT4NCiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDJNYWluKSIgc3Ryb2tlPSIjMGQ0N2ExIiBzdHJva2Utd2lkdGg9IjAuNSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsMkhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDJTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDIgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNmZmZmZmYiPjI8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsMlNoYWRvdykiLz4NCjwvc3ZnPiA=",Cz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHJlZCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGwzTWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZjQ0MzM2Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2QzMmYyZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNiNzFjMWMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzhlMDAwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDNIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZlYmVlIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmNkZDIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsM1NoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsM01haW4pIiBzdHJva2U9IiM4ZTAwMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGwzSGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsM1NwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgMyAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+MzwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGwzU2hhZG93KSIvPg0KPC9zdmc+IA==",_z="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHB1cnBsZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw0TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjYWI0N2JjIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzljMjdiMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiM3YjFmYTIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzRhMTQ4YyIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDRIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZjNlNWY1IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMWJlZTciIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNFNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNE1haW4pIiBzdHJva2U9IiM0YTE0OGMiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw0SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNFNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNCAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI2ZmZmZmZiI+NDwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw0U2hhZG93KSIvPg0KPC9zdmc+IA==",Iz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIG9yYW5nZSAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw1TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmY5ODAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Y1N2MwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNlZjZjMDAiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDVIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmM2UwIiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmUwYjIiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsNU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFByaW1hcnkgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJ1cmwoI2JhbGw1SGlnaGxpZ2h0KSIvPg0KICANCiAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjE0IiBjeT0iMTQiIHI9IjIuNSIgZmlsbD0idXJsKCNiYWxsNVNwZWN1bGFyKSIvPg0KICANCiAgPCEtLSBOdW1iZXIgNSAtIG11Y2ggbGFyZ2VyIGFuZCBtb3JlIHZpc2libGUgLS0+DQogIDx0ZXh0IHg9IjE2IiB5PSIyMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iIzAwMDAwMCI+NTwvdGV4dD4NCiAgDQogIDwhLS0gU3VidGxlIHNoYWRvdyBmb3IgZGVwdGggLS0+DQogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTgiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw1U2hhZG93KSIvPg0KPC9zdmc+IA==",Dz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGdyZWVuIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDZNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiM2NmJiNmEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNGNhZjUwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzM4OGUzYyIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMWI1ZTIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsNkhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlOGY1ZTgiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2M4ZTZjOSIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw2U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw2TWFpbikiIHN0cm9rZT0iIzFiNWUyMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDZIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw2U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA2IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj42PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDZTaGFkb3cpIi8+DQo8L3N2Zz4g",Az="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJyb3duIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDdNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiNhMTg4N2YiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjOGQ2ZTYzIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzZkNGM0MSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjM2UyNzIzIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsN0hpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNlZmViZTkiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2Q3Y2NjOCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw3U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw3TWFpbikiIHN0cm9rZT0iIzNlMjcyMyIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDdIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw3U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA3IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj43PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDdTaGFkb3cpIi8+DQo8L3N2Zz4g",Tz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIGJsYWNrIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDhNYWluIiBjeD0iMzAlIiBjeT0iMzAlIiByPSI3MCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIyNSUiIHN0b3AtY29sb3I9IiMyMTIxMjEiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9Ijc1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMDAwMDAwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEhpZ2hsaWdodCBmb3IgZGVwdGggLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOEhpZ2hsaWdodCIgY3g9IjI1JSIgY3k9IjI1JSIgcj0iNDUlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM3NTc1NzUiIHN0b3Atb3BhY2l0eT0iMC45Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzQyNDI0MiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U3BlY3VsYXIiIGN4PSI0MCUiIGN5PSI0MCUiIHI9IjIwJSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIFNoYWRvdyBncmFkaWVudCAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw4U2hhZG93IiBjeD0iNzAlIiBjeT0iNzAlIiByPSIzMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjMiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwIi8+DQogICAgPC9yYWRpYWxHcmFkaWVudD4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBNYWluIGJhbGwgLS0+DQogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE1IiBmaWxsPSJ1cmwoI2JhbGw4TWFpbikiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCiAgDQogIDwhLS0gUHJpbWFyeSBoaWdobGlnaHQgLS0+DQogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiIGZpbGw9InVybCgjYmFsbDhIaWdobGlnaHQpIi8+DQogIA0KICA8IS0tIFNwZWN1bGFyIGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMi41IiBmaWxsPSJ1cmwoI2JhbGw4U3BlY3VsYXIpIi8+DQogIA0KICA8IS0tIE51bWJlciA4IC0gbXVjaCBsYXJnZXIgYW5kIG1vcmUgdmlzaWJsZSAtLT4NCiAgPHRleHQgeD0iMTYiIHk9IjIyIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjZmZmZmZmIj44PC90ZXh0Pg0KICANCiAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgPGNpcmNsZSBjeD0iMTgiIGN5PSIxOCIgcj0iMTUiIGZpbGw9InVybCgjYmFsbDhTaGFkb3cpIi8+DQo8L3N2Zz4g",Mz="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxkZWZzPg0KICAgIDwhLS0gTWFpbiBiYWxsIGdyYWRpZW50IHdpdGggcmVhbGlzdGljIHllbGxvdyAtLT4NCiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9ImJhbGw5TWFpbiIgY3g9IjMwJSIgY3k9IjMwJSIgcj0iNzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMjUlIiBzdG9wLWNvbG9yPSIjZmZlYjNiIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZkZDgzNSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI3NSUiIHN0b3AtY29sb3I9IiNmNTdmMTciLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2U2NTEwMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBIaWdobGlnaHQgZm9yIGRlcHRoIC0tPg0KICAgIDxyYWRpYWxHcmFkaWVudCBpZD0iYmFsbDlIaWdobGlnaHQiIGN4PSIyNSUiIGN5PSIyNSUiIHI9IjQ1JSI+DQogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmOWM0IiBzdG9wLW9wYWNpdHk9IjAuOSIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmY1OWQiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTcGVjdWxhciBoaWdobGlnaHQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNwZWN1bGFyIiBjeD0iNDAlIiBjeT0iNDAlIiByPSIyMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMC44Ii8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBTaGFkb3cgZ3JhZGllbnQgLS0+DQogICAgPHJhZGlhbEdyYWRpZW50IGlkPSJiYWxsOVNoYWRvdyIgY3g9IjcwJSIgY3k9IjcwJSIgcj0iMzAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMC4zIi8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMCIvPg0KICAgIDwvcmFkaWFsR3JhZGllbnQ+DQogICAgDQogICAgPCEtLSBXaGl0ZSBzdHJpcGUgZ3JhZGllbnQgLS0+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiYWxsOVN0cmlwZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0b3AtY29sb3I9IiNmOGY4ZjgiLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogIDwvZGVmcz4NCiAgDQogIDwhLS0gTWFpbiBiYWxsIC0tPg0KICA8Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOU1haW4pIiBzdHJva2U9IiNlNjUxMDAiIHN0cm9rZS13aWR0aD0iMC41Ii8+DQogIA0KICA8IS0tIFJlYWxpc3RpYyBjdXJ2ZWQgd2hpdGUgc3RyaXBlIC0tPg0KICA8cGF0aCBkPSJNIDQgOCBBIDggOCAwIDAgMSAxMiA4IEwgMTIgMjQgQSA4IDggMCAwIDEgNCAyNCBaIiBmaWxsPSJ1cmwoI2JhbGw5U3RyaXBlKSIvPg0KICANCiAgPCEtLSBQcmltYXJ5IGhpZ2hsaWdodCAtLT4NCiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIgZmlsbD0idXJsKCNiYWxsOUhpZ2hsaWdodCkiLz4NCiAgDQogIDwhLS0gU3BlY3VsYXIgaGlnaGxpZ2h0IC0tPg0KICA8Y2lyY2xlIGN4PSIxNCIgY3k9IjE0IiByPSIyLjUiIGZpbGw9InVybCgjYmFsbDlTcGVjdWxhcikiLz4NCiAgDQogIDwhLS0gTnVtYmVyIDkgLSBtdWNoIGxhcmdlciBhbmQgbW9yZSB2aXNpYmxlIC0tPg0KICA8dGV4dCB4PSIxNiIgeT0iMjIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwMDAwMDAiPjk8L3RleHQ+DQogIA0KICA8IS0tIFN1YnRsZSBzaGFkb3cgZm9yIGRlcHRoIC0tPg0KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE4IiByPSIxNSIgZmlsbD0idXJsKCNiYWxsOVNoYWRvdykiLz4NCjwvc3ZnPiA=",Qt=600,hn=300,qe=15,et=qe/2,dr=1.3,Vo=.9,Ac=30,hg=160,Tc=24.5,mg=270.18,Px=Qt*.75,Ox=hn/2,pg=et*.1,Bx=.7,Ux=.45,zx=.05,Od=.99,wi=.75,xi=.75,fr=.95,Si=.3,Nz=.8,bn=(...t)=>{},t0=({onGameEnd:t})=>{const a=w.useRef(null),[e,n]=w.useState({balls:[],cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0},isAnimating:!1,currentPlayer:1,gamePhase:uo.BREAK,ballInHand:!1,scratchOccurred:!1}),[r,o]=w.useState(!1),[l,d]=w.useState({x:0,y:0}),[h,m]=w.useState(0),[p,y]=w.useState(.5),[b,E]=w.useState(0),[S,C]=w.useState(0),[_,x]=w.useState(!0),[D,A]=w.useState(null),[k,P]=w.useState(null),[L,G]=w.useState(null),[F,q]=w.useState(!1),[te,X]=w.useState(!1),[se,ee]=w.useState(0),[j,H]=w.useState(!1),[R,B]=w.useState(null),[Y,$]=w.useState(null),[T,U]=w.useState(!1),[K,V]=w.useState(!1),[re,Ee]=w.useState(!1),[Ce,Be]=w.useState(!1),[be,Ve]=w.useState(!1),[rt,St]=w.useState(!1),[xt,pn]=w.useState(null),[we,Xe]=w.useState(!1),[Je,ot]=w.useState({1:0,2:0}),[Nt,kn]=w.useState(null),[st,Ln]=w.useState(null),[Xt,Yt]=w.useState(!1),[ra,Q]=w.useState(null),[He,nt]=w.useState(!1),[$e,yt]=w.useState(!1),[Et,sa]=w.useState(!1),[ia,Pn]=w.useState(!1),[On,jn]=w.useState(null),[Za,dn]=w.useState(0),[Or,us]=w.useState([]),[wt,wa]=w.useState(!1),oa=w.useRef(null),Ys={cue:T2,1:Sz,2:Ez,3:Cz,4:_z,5:Iz,6:Dz,7:Az,8:Tz,9:Mz,10:ih},Fn=w.useRef({}),Jt=w.useRef(null),la=w.useRef(null),Bn=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}],Ws=w.useCallback(Z=>{if(!K)return;const N=a.current.getBoundingClientRect(),fe=N.width/Qt,me=(Z.clientX-N.left)/fe,xe=(Z.clientY-N.top)/fe,Ae=e.balls.find(Ne=>Ne.visible&&!Ne.pocketed&&Math.sqrt((Ne.x-me)**2+(Ne.y-xe)**2)<et*1.5);if(Ae){B(Ae.id);return}const De=Bn.find(Ne=>Math.sqrt((Ne.x-me)**2+(Ne.y-xe)**2)<60);if(De){$(De.id);return}},[K,e.balls,Bn]),qa=w.useCallback((Z,N)=>{const Ne=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let at=null,je=1/0;return Ne.forEach(it=>{const Ue=Math.hypot(Z-it.x,N-it.y);Ue<je&&(je=Ue,at=it)}),at?at.id:null},[]),pa=w.useCallback(Z=>{const De=[{x:30,y:24.5,margin:qe*dr,type:"corner"},{x:570.77,y:24.5,margin:qe*dr,type:"corner"},{x:30,y:270.18,margin:qe*dr,type:"corner"},{x:570.77,y:270.18,margin:qe*dr,type:"corner"},{x:300.385,y:24.5,margin:qe*Vo,type:"side"},{x:300.385,y:270.18,margin:qe*Vo,type:"side"}],Ne=Z.x,at=Z.y,je=Z.vx??0,it=Z.vy??0,Ue=Math.hypot(je,it);return De.some(ve=>{const ue=ve.x-Ne,_e=ve.y-at,Me=Math.hypot(ue,_e);if(Me>=ve.margin+pg)return!1;if(Ue>0){const Pe=(je*ue+it*_e)/(Ue*(Me||1)),Ct=ve.type==="side"?Bx:Ux,Rt=(je*ue+it*_e)/(Me||1);if(Pe<Ct||Rt<zx)return!1}return!0})},[]),xn=w.useCallback((Z,N)=>Z>=Ac&&Z<=hg&&N>=Tc&&N<=mg,[]);w.useCallback(()=>{n(Z=>({...Z,scratchOccurred:!0,ballInHand:!0,currentPlayer:Z.currentPlayer===1?2:1,cueBall:{...Z.cueBall,x:100,y:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0}}))},[]);const Tn=w.useCallback(()=>{const Z=e.balls.filter(fe=>fe.visible&&!fe.pocketed);if(bn("Visible balls on table:",Z.map(fe=>fe.id).sort((fe,me)=>fe-me)),Z.length===0)return null;const N=Z.reduce((fe,me)=>me.id<fe.id?me:fe);return bn("Lowest numbered ball:",N.id),N},[e.balls]),Qa=w.useCallback(()=>{if(re)return null;const Z=ra||Tn();let N=null;if(e.cueBall.visible||(N="scratch"),e.gamePhase==="break"){st&&st!==1&&(N="break_wrong_ball_first");const fe=e.balls.filter(xe=>xe.pocketed&&!xe.wasPocketedBeforeShot),me=Za;fe.length===0&&me<4&&(N="break_insufficient_cushions")}return!N&&st&&Z&&st!==Z.id&&(bn("Wrong ball first foul - Hit:",st,"Lowest:",Z.id),bn("Visible balls on table:",e.balls.filter(fe=>fe.visible&&!fe.pocketed).map(fe=>fe.id).sort((fe,me)=>fe-me)),N="wrong_ball_first"),!N&&!$e&&!re&&e.gamePhase!=="break"&&(N="no_contact"),!N&&$e&&!Xt&&e.balls.filter(me=>me.pocketed&&!me.wasPocketedBeforeShot).length===0&&(N="no_rail_contact"),bn("Current lowest ball:",Z?Z.id:"none"),N},[re,st,Xt,$e,Tn,e.balls,ra,e.cueBall.visible,e.gamePhase,Za]),ds=w.useCallback(()=>{if(e.gamePhase==="break"||re)return[];const Z=e.balls.filter(fe=>fe.pocketed&&!fe.wasPocketedBeforeShot);if(Z.length===0)return[];const N=[];return Z.forEach(fe=>{if(fe.id===R)fe.pocketedPocket!==Y&&(bn("Illegally pocketed ball:",fe.id,"- called ball went in wrong pocket"),N.push(fe));else{const me=Z.find(xe=>xe.id===R);(!me||me.pocketedPocket!==Y)&&(bn("Illegally pocketed ball:",fe.id,"- not called ball and called ball not legally pocketed"),N.push(fe))}}),N},[e.gamePhase,re,R,Y,e.balls]),Gs=w.useCallback(Z=>{const N=On||e.currentPlayer;window.dispatchEvent(new CustomEvent("gameFoul",{detail:{foulType:Z,player:N}})),Z==="scratch"?window.dispatchEvent(new CustomEvent("scratchFoul",{detail:{player:N}})):Z==="wrong_ball_first"?window.dispatchEvent(new CustomEvent("wrongBallFoul",{detail:{player:N}})):Z==="no_rail_contact"&&window.dispatchEvent(new CustomEvent("noRailFoul",{detail:{player:N}})),window.dispatchEvent(new CustomEvent("ballInHand",{detail:{player:N}})),ot(fe=>{const me={...fe,[N]:fe[N]+1};return me[N]>=3&&(window.dispatchEvent(new CustomEvent("threeFoul",{detail:{player:N}})),alert(`Player ${N} loses due to 3 consecutive fouls!`)),me}),n(fe=>({...fe,ballInHand:!0,currentPlayer:fe.currentPlayer===1?2:1,scratchOccurred:Z==="scratch"})),Z==="scratch"&&n(fe=>({...fe,cueBall:{...fe.cueBall,visible:!0,x:100,y:150,vx:0,vy:0}})),kn(Z)},[e.currentPlayer,On]),Br=w.useCallback((Z,N)=>{const fe=e.cueBall;return Math.hypot(Z-fe.x,N-fe.y)<=et},[e.cueBall]),Ur=w.useCallback((Z,N)=>{(e.ballInHand||e.gamePhase==="break")&&Br(Z,N)&&(o(!0),d({x:Z-e.cueBall.x,y:N-e.cueBall.y}))},[e.ballInHand,e.gamePhase,e.cueBall,Br]),xr=w.useCallback((Z,N)=>{if(r){const fe=Z-l.x,me=N-l.y;let xe,Ae;e.gamePhase==="break"?(xe=Math.max(Ac+et,Math.min(hg-et,fe)),Ae=Math.max(Tc+et,Math.min(mg-et,me))):(xe=Math.max(30+et,Math.min(570.77-et,fe)),Ae=Math.max(24.5+et,Math.min(270.18-et,me))),n(De=>({...De,cueBall:{...De.cueBall,x:xe,y:Ae}}))}},[r,l,e.gamePhase]),zr=w.useCallback(()=>{r&&o(!1)},[r]);w.useCallback((Z,N)=>{xn(Z,N)&&n(fe=>({...fe,cueBall:{...fe.cueBall,x:Z,y:N,vx:0,vy:0,visible:!0,isMoving:!1},ballInHand:!1}))},[xn]),w.useCallback((Z,N)=>{let fe=null,me=1/0;return Bn.forEach(xe=>{const Ae=Math.hypot(Z-xe.x,N-xe.y);Ae<me&&(me=Ae,fe=xe)}),fe},[]);const Ma=w.useCallback((Z,N,fe,me)=>{const xe=Z-fe,Ae=N-me,De=Math.sqrt(xe*xe+Ae*Ae);if(De<et*2)return null;const Ne=Z-xe/De*(et*2),at=N-Ae/De*(et*2);return{x:Ne,y:at}},[]);function Sr(Z,N){return Z>=15&&Z<=30&&N>=hn-75&&N<=hn-60}function Na(Z,N,fe,me,xe){Lx(xe,me)&&(Z.fillStyle="rgba(255, 215, 0, 0.2)",Z.fillRect(10,N-80,200,25),Z.strokeStyle="rgba(255, 215, 0, 0.5)",Z.lineWidth=1,Z.strokeRect(10,N-80,200,25),Z.fillStyle="rgba(255, 215, 0, 0.9)",Z.font="12px Arial",Z.textAlign="left",Z.fillText("Push Out Available",15,N-65),Z.fillStyle=fe?"rgba(255, 215, 0, 0.9)":"rgba(255, 255, 255, 0.3)",Z.fillRect(15,N-75,15,15),Z.strokeStyle="rgba(255, 215, 0, 0.8)",Z.lineWidth=2,Z.strokeRect(15,N-75,15,15),fe&&(Z.fillStyle="rgba(255, 215, 0, 0.9)",Z.font="bold 16px Arial",Z.textAlign="center",Z.fillText("",22,N-65)))}function Va(Z,N){Z.setLineDash([]),Z.beginPath(),Z.moveTo(N[0].x,N[0].y);for(let fe=1;fe<N.length;fe++){const me=N[fe];Z.lineTo(me.x,me.y)}Z.stroke()}function sn(Z){let N="rgba(255, 255, 255, 0.8)";F?N="rgba(0, 255, 0, 0.95)":te&&(N="rgba(255, 255, 0, 0.9)"),Math.abs(b)>.1&&(b>0?N="rgba(76, 175, 80, 0.9)":N="rgba(244, 67, 54, 0.9)"),Z.strokeStyle=N,Z.lineWidth=F?4:te?2:3,Z.setLineDash([]),Z.globalAlpha=.9}function $s(Z){const N=Qt*.3,fe=Qt*.5*Z;return N+fe}function fs(Z,N){let fe=Z-N;for(;fe>Math.PI;)fe-=Math.PI*2;for(;fe<-Math.PI;)fe+=Math.PI*2;return fe}const Xa=w.useCallback((Z,N)=>{const Ne=[{x:30,y:24.5,id:"top-left"},{x:570.77,y:24.5,id:"top-right"},{x:30,y:270.18,id:"bottom-left"},{x:570.77,y:270.18,id:"bottom-right"},{x:300.385,y:24.5,id:"top-center"},{x:300.385,y:270.18,id:"bottom-center"}];let at=null,je=1/0;if(Ne.forEach(it=>{const Ue=Math.hypot(Z-it.x,N-it.y);Ue<je&&(je=Ue,at=it)}),at&&je<80){const it=Math.max(0,(80-je)/80),Ue=Z+(at.x-Z)*it*.3,ve=N+(at.y-N)*it*.3;return{x:Ue,y:ve,assisted:!0}}return{x:Z,y:N,assisted:!1}},[]),jr=w.useCallback((Z,N,fe=null,me={})=>{const{ignoreCuePocket:xe=!0}=me,Ae={},De=.99,Ne=16,at=30.77,je=570.77,it=24.5,Ue=270.18,ve={1:"#ffff00",2:"#0000ff",3:"#ff0000",4:"#800080",5:"#ffa500",6:"#008000",7:"#8b4513",8:"#000000",9:"#ffff00",10:"#ff0000"};return(()=>{const _e=new Map;e.balls.forEach(Pe=>{Pe.visible&&!Pe.pocketed&&_e.set(Pe.id,{id:Pe.id,x:Pe.x,y:Pe.y,vx:0,vy:0,visible:!0,isMoving:!1,trajectory:[{x:Pe.x,y:Pe.y}]})});const Me=fe||e.cueBall;_e.set("cue",{id:"cue",x:Me.x,y:Me.y,vx:Z,vy:N,visible:!0,isMoving:!0,trajectory:[{x:Me.x,y:Me.y}]});for(let Pe=0;Pe<300;Pe++){const Ct=Array.from(_e.values()).filter(_t=>_t.visible);for(let _t=0;_t<Ne;_t++)Ct.forEach(Le=>{if(Math.abs(Le.vx)<.03&&Math.abs(Le.vy)<.03){Le.vx=0,Le.vy=0;return}Le.vx*=Math.pow(De,1/Ne),Le.vy*=Math.pow(De,1/Ne);let Wt=Le.x+Le.vx/Ne,an=Le.y+Le.vy/Ne,Sn=!1;Wt<at+et?(Le.x=at+et,Le.vx=Math.abs(Le.vx)*.85,Sn=!0):Wt>je-et?(Le.x=je-et,Le.vx=-Math.abs(Le.vx)*.8,Sn=!0):Le.x=Wt,an<it+et?(Le.y=it+et,Le.vy=Math.abs(Le.vy)*.85,Sn=!0):an>Ue-et?(Le.y=Ue-et,Le.vy=-Math.abs(Le.vy)*.8,Sn=!0):Le.y=an;let Sa=!1;const Ot=(at+je)/2,Kt=[{x:at,y:it,margin:qe*dr},{x:je,y:it,margin:qe*dr},{x:at,y:Ue,margin:qe*dr},{x:je,y:Ue,margin:qe*dr},{x:Ot,y:it,margin:qe*Vo},{x:Ot,y:Ue,margin:qe*Vo}],Yn=Le.x,Wn=Le.y,Vn=Le.vx??0,er=Le.vy??0,Xn=Math.hypot(Vn,er);let tr=!1;if(xe||(tr=Kt.some(O=>{const de=O.x-Yn,Ie=O.y-Wn,Ye=Math.hypot(de,Ie),Qe=O.margin+pg;if(Ye>=Qe)return!1;if(Xn>0){const Bt=(Vn*de+er*Ie)/(Xn*(Ye||1)),Dt=O.x===Ot?Bx:Ux,ka=(Vn*de+er*Ie)/(Ye||1);if(Bt<Dt||ka<zx)return!1}return!0})),tr&&!(xe&&Le.id==="cue")&&(Sa=!0),!Sa&&Le.id!=="cue"){const O=Xa(Le.x,Le.y);if(O.assisted){const de=O.x-Le.x,Ie=O.y-Le.y;Math.sqrt(de*de+Ie*Ie)<5&&(Sa=!0)}}if(Sa){Le.visible=!1,Le.trajectory.push({x:Le.x,y:Le.y,pocketed:!0});return}Le.isMoving&&Math.abs(Le.vx)<.03&&Math.abs(Le.vy)<.03&&(Le.vx=0,Le.vy=0,Le.isMoving=!1),Le.trajectory.push({x:Le.x,y:Le.y,bounced:Sn})});const Rt=_e.get("cue");Rt&&Rt.visible&&_e.forEach((_t,Le)=>{if(Le!=="cue"&&_t.visible){const Wt=_t.x-Rt.x,an=_t.y-Rt.y,Sn=Math.sqrt(Wt*Wt+an*an);if(Sn>0&&Sn<qe+.5){const Sa=qe-Sn+.01,Ot=Wt/Sn,Kt=an/Sn,Yn=Math.max(Sa/2,.1);Rt.x-=Ot*Yn,Rt.y-=Kt*Yn,_t.x+=Ot*Yn,_t.y+=Kt*Yn;const Wn=Rt.vx-_t.vx,Vn=Rt.vy-_t.vy,Xn=-(Wn*Ot+Vn*Kt)||.01;Rt.vx+=Xn*Ot,Rt.vy+=Xn*Kt,_t.vx-=Xn*Ot,_t.vy-=Xn*Kt,Rt.trajectory.length>0&&(Rt.trajectory[Rt.trajectory.length-1].collision=!0),_t.trajectory.length>0&&(_t.trajectory[_t.trajectory.length-1].collision=!0)}}});const xa=Array.from(_e.values()).filter(_t=>_t.id!=="cue"&&_t.visible);for(let _t=0;_t<xa.length;_t++)for(let Le=_t+1;Le<xa.length;Le++){const Wt=xa[_t],an=xa[Le],Sn=an.x-Wt.x,Sa=an.y-Wt.y,Ot=Math.sqrt(Sn*Sn+Sa*Sa);if(Ot>0&&Ot<qe){const Kt=qe-Ot+.01,Yn=Sn/Ot,Wn=Sa/Ot;Wt.x-=Yn*(Kt/2),Wt.y-=Wn*(Kt/2),an.x+=Yn*(Kt/2),an.y+=Wn*(Kt/2);const Vn=Wt.vx-an.vx,er=Wt.vy-an.vy,tr=-(Vn*Yn+er*Wn)||.01;Wt.vx+=tr*Yn,Wt.vy+=tr*Wn,an.vx-=tr*Yn,an.vy-=tr*Wn,Wt.isMoving=!0,an.isMoving=!0,Wt.trajectory.length>0&&(Wt.trajectory[Wt.trajectory.length-1].collision=!0),an.trajectory.length>0&&(an.trajectory[an.trajectory.length-1].collision=!0)}}if(Ct.every(_t=>Math.abs(_t.vx)<.028&&Math.abs(_t.vy)<.028))break}_e.forEach((Pe,Ct)=>{Pe.trajectory.length>1&&(Ae[Ct]={points:Pe.trajectory,color:ve[Ct]||"#ffffff"})})})(),Ae},[e.balls,e.cueBall,pa]),go=w.useCallback((Z,N)=>{const fe=N.x-Z.x,me=N.y-Z.y,xe=Math.sqrt(fe*fe+me*me);if(xe===0||xe>=qe)return!1;const Ae=qe-xe+.01,De=fe/xe,Ne=me/xe;Z.x-=De*(Ae/2),Z.y-=Ne*(Ae/2),N.x+=De*(Ae/2),N.y+=Ne*(Ae/2);const at=Z.vx-N.vx,je=Z.vy-N.vy,Ue=-(at*De+je*Ne)||.01;Z.vx+=Ue*De,Z.vy+=Ue*Ne,N.vx-=Ue*De,N.vy-=Ue*Ne;const ve=Nz,ue=Z.spinX||0,_e=Z.spinY||0,Me=N.spinX||0,Pe=N.spinY||0,Ct=(ue-Me)*ve*De,Rt=(_e-Pe)*ve*Ne;return Z.spinX=(ue-Ct)*.9,Z.spinY=(_e-Rt)*.9,N.spinX=(Me+Ct)*.9,N.spinY=(Pe+Rt)*.9,Z.isMoving=!0,N.isMoving=!0,!0},[]),Zs=w.useCallback(()=>{const Z=[],N=Qt*.75,fe=hn/2;function me(){return(Math.random()-.5)*1.5}const xe=[{x:N,y:fe},{x:N+qe*.95,y:fe-qe*.48},{x:N+qe*.95,y:fe+qe*.48},{x:N+2*qe*.95,y:fe-qe*.95},{x:N+2*qe*.95,y:fe},{x:N+2*qe*.95,y:fe+qe*.95},{x:N+3*qe*.95,y:fe-qe*1.43},{x:N+3*qe*.95,y:fe-qe*.48},{x:N+3*qe*.95,y:fe+qe*.48},{x:N+3*qe*.95,y:fe+qe*1.43}],Ae=[{x:N+3*qe*.95,y:fe-qe*1.43},{x:N+3*qe*.95,y:fe+qe*1.43}],Ne=[2,3].sort(()=>Math.random()-.5),je=[4,5,6,7,8,9].sort(()=>Math.random()-.5);return[1,10,...Ne,...je].forEach((Ue,ve)=>{let ue;if(ve===0)ue=xe[0];else if(ve===1)ue=xe[4];else if(ve===2||ve===3){const _e=ve-2;ue=Ae[_e]}else ue=[xe[1],xe[2],xe[3],xe[5],xe[7],xe[8]][ve-4];ue&&Z.push({id:Ue,x:ue.x+me(),y:ue.y+me(),vx:0,vy:0,visible:!0,pocketed:!1,wasPocketedBeforeShot:!1,isMoving:!1,rotation:0,rotationSpeed:0,spinX:0,spinY:0})}),Z},[]),yo=w.useCallback(()=>{function Ae(){let De=[];for(let ve=0;ve<16;ve++){if(e.cueBall.visible){let ue=e.cueBall.x+e.cueBall.vx/16,_e=e.cueBall.y+e.cueBall.vy/16;ue<30+et?(e.cueBall.x=30+et,e.cueBall.vx=Math.abs(e.cueBall.vx)*wi*xi,e.cueBall.spinY*=fr,$e&&Yt(!0)):ue>570.77-et?(e.cueBall.x=570.77-et,e.cueBall.vx=-Math.abs(e.cueBall.vx)*wi*xi,e.cueBall.spinY*=fr,$e&&Yt(!0)):e.cueBall.x=ue,_e<24.5+et?(e.cueBall.y=24.5+et,e.cueBall.vy=Math.abs(e.cueBall.vy)*wi*xi,e.cueBall.spinX*=fr,$e&&Yt(!0)):_e>270.18-et?(e.cueBall.y=270.18-et,e.cueBall.vy=-Math.abs(e.cueBall.vy)*wi*xi,e.cueBall.spinX*=fr,$e&&Yt(!0)):e.cueBall.y=_e,e.cueBall.vx*=Math.pow(Od,1/16),e.cueBall.vy*=Math.pow(Od,1/16),e.cueBall.vx+=e.cueBall.spinX*Si,e.cueBall.vy+=e.cueBall.spinY*Si,e.cueBall.spinX*=Math.pow(fr,1/16),e.cueBall.spinY*=Math.pow(fr,1/16);const Me=Math.sqrt(e.cueBall.vx*e.cueBall.vx+e.cueBall.vy*e.cueBall.vy);Me>.01?(e.cueBall.rotationSpeed=Me/et,Math.abs(e.cueBall.vx)>Math.abs(e.cueBall.vy)?e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vx):e.cueBall.rotation+=e.cueBall.rotationSpeed/16*Math.sign(e.cueBall.vy)):e.cueBall.rotationSpeed=0,pa(e.cueBall)&&(e.cueBall.isMoving=!1,e.cueBall.visible=!1),e.cueBall.isMoving&&Math.abs(e.cueBall.vx)<.03&&Math.abs(e.cueBall.vy)<.03&&(e.cueBall.vx=0,e.cueBall.vy=0,e.cueBall.isMoving=!1)}e.balls.forEach(ue=>{if(!ue.visible)return;let _e=ue.x+ue.vx/16,Me=ue.y+ue.vy/16;_e<30+et?(ue.x=30+et,ue.vx=Math.abs(ue.vx)*wi*xi,ue.spinY*=fr,$e&&(bn("Rail contact detected for ball:",ue.id),Yt(!0)),e.gamePhase==="break"&&ue.id!=="cue"&&dn(Ct=>Ct+1)):_e>570.77-et?(ue.x=570.77-et,ue.vx=-Math.abs(ue.vx)*wi*xi,ue.spinY*=fr,$e&&Yt(!0),e.gamePhase==="break"&&ue.id!=="cue"&&dn(Ct=>Ct+1)):ue.x=_e,Me<24.5+et?(ue.y=24.5+et,ue.vy=Math.abs(ue.vy)*wi*xi,ue.spinX*=fr,$e&&Yt(!0),e.gamePhase==="break"&&ue.id!=="cue"&&dn(Ct=>Ct+1)):Me>270.18-et?(ue.y=270.18-et,ue.vy=-Math.abs(ue.vy)*wi*xi,ue.spinX*=fr,$e&&Yt(!0),e.gamePhase==="break"&&ue.id!=="cue"&&dn(Ct=>Ct+1)):ue.y=Me,ue.vx*=Math.pow(Od,1/16),ue.vy*=Math.pow(Od,1/16),ue.vx+=ue.spinX*Si,ue.vy+=ue.spinY*Si,ue.spinX*=Math.pow(fr,1/16),ue.spinY*=Math.pow(fr,1/16);const Pe=Math.sqrt(ue.vx*ue.vx+ue.vy*ue.vy);Pe>.01?(ue.rotationSpeed=Pe/et,Math.abs(ue.vx)>Math.abs(ue.vy)?ue.rotation+=ue.rotationSpeed/16*Math.sign(ue.vx):ue.rotation+=ue.rotationSpeed/16*Math.sign(ue.vy)):ue.rotationSpeed=0,pa(ue)&&(ue.isMoving=!1,ue.visible=!1,ue.pocketed=!0,ue.pocketedPocket=qa(ue.x,ue.y),De.includes(ue.id)||De.push(ue.id)),ue.isMoving&&Math.abs(ue.vx)<.03&&Math.abs(ue.vy)<.03&&(ue.vx=0,ue.vy=0,ue.isMoving=!1)}),e.cueBall.visible&&e.balls.forEach(ue=>{if(ue.visible){const _e=go(e.cueBall,ue);!Et&&_e&&e.cueBall.isMoving&&(bn("First contact made with ball:",ue.id),Ln(ue.id),yt(!0),sa(!0))}}),e.balls.forEach((ue,_e)=>{ue.visible&&e.balls.slice(_e+1).forEach(Me=>{Me.visible&&go(ue,Me)})})}const Ne=e.balls.every(ve=>!ve.isMoving)&&!e.cueBall.isMoving;if(Ne&&xt&&(Xe(!0),pn(null)),Ne&&re&&!He&&!ia&&On===e.currentPlayer&&(bn("currentPlayer:",e.currentPlayer),bn("cueBall visible:",e.cueBall.visible),e.cueBall.visible?(Pn(!0),Ee(!1)):(nt(!0),Pn(!0),Ee(!1),Gs("scratch"))),Ne&&!re&&e.gamePhase!=="break"&&!He&&!ia&&On===e.currentPlayer&&On!==null&&!rt){bn("currentPlayer:",e.currentPlayer),bn("gamePhase:",e.gamePhase),bn("Checking for fouls - Current player:",e.currentPlayer,"First ball hit:",st);const ve=Qa();if(ve)bn("Foul detected:",ve,"by player:",e.currentPlayer),nt(!0),Pn(!0),B(null),$(null),Ee(!1),Gs(ve);else{if(!rt){const _e=ds();if(_e.length>0){bn("Illegally pocketed balls detected:",_e.map(Me=>Me.id)),us(_e),wa(!0),Pn(!0),B(null),$(null);return}}Pn(!0),B(null),$(null),Ee(!1),ot(_e=>{const Me={..._e,[On]:0};return bn(`Resetting fouls for player ${On} only. Player 1 fouls: ${Me[1]}, Player 2 fouls: ${Me[2]}`),Me}),e.balls.filter(_e=>_e.pocketed&&!_e.wasPocketedBeforeShot).length===0&&n(_e=>({..._e,currentPlayer:_e.currentPlayer===1?2:1}))}}if(Ne&&rt&&!He&&!ia){Pn(!0),St(!1);const ve=Qa();ve?(bn("Break foul detected:",ve,"by player:",e.currentPlayer),nt(!0),Gs(ve)):e.balls.filter(_e=>_e.pocketed&&!_e.wasPocketedBeforeShot).length===0&&n(_e=>({..._e,currentPlayer:_e.currentPlayer===1?2:1}))}const at=e.balls.find(ve=>ve.id===10&&ve.pocketed),je=e.balls.filter(ve=>ve.visible&&!ve.pocketed),it=je.length>0?je.reduce((ve,ue)=>ue.id<ve.id?ue:ve):null;if(Ne&&it&&it.id===10&&window.dispatchEvent(new CustomEvent("tenBallTarget",{detail:{player:e.currentPlayer}})),Ne&&it&&fg(e.gamePhase)&&window.dispatchEvent(new CustomEvent("lowestBall",{detail:{player:e.currentPlayer,lowestBall:it.id}})),Ne&&fg(e.gamePhase)&&Math.random()<.1&&window.dispatchEvent(new CustomEvent("safetyOpportunity",{detail:{player:e.currentPlayer}})),Ne&&at){const ve=R===10,ue=Y&&at.pocketedPocket===Y;if(ve&&ue){const _e=On;t&&t(_e),window.dispatchEvent(new CustomEvent("gameWinning",{detail:{player:_e}})),setTimeout(()=>{n(Me=>({...Me,balls:Zs(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1})),setIsDragging(!1),x(!0),ot({1:0,2:0}),n(Me=>({...Me,_foulReset:Date.now()})),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()},2e3)}else{n(Me=>({...Me,balls:Me.balls.map(Pe=>Pe.id===10?{...Pe,pocketed:!1,visible:!0,x:Px,y:Ox,vx:0,vy:0,isMoving:!1}:Pe)}));const _e=e.balls.find(Me=>Me.id===R&&Me.pocketed&&!Me.wasPocketedBeforeShot);_e&&_e.pocketedPocket===Y||n(Me=>({...Me,currentPlayer:Me.currentPlayer===1?2:1})),B(null),$(null)}}const Ue=Zi(e.gamePhase);bn("Step function - wasBreakPhase:",Ue,"allStopped:",Ne,"gamePhase:",e.gamePhase),n(ve=>({...ve,isAnimating:!Ne,gamePhase:wz(ve.gamePhase,Ne)})),xz(e.gamePhase,Ne)&&(Be(!0),Ve(!1),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutStrategy",{detail:{player:e.currentPlayer}}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("pushOutAvailable",{detail:{player:e.currentPlayer}}))},1e3)),Ne||(oa.current=requestAnimationFrame(Ae))}oa.current=requestAnimationFrame(Ae)},[e,pa,go,st,re,Qa,Gs,xt,He,On,ia,ds,rt]),El=w.useCallback(()=>{if(e.isAnimating||!F)return;if(!Zi(e.gamePhase)){if(!re){if(!R&&!Y){V(!0),q(!1);return}}}e.cueBall;const Z=p*18,N=S*Math.PI/180,fe=Math.cos(N)*b*Si*Z*.05,me=Math.sin(N)*b*Si*Z*.05;Ln(null),Yt(!1),kn(null),nt(!1),yt(!1),sa(!1),Pn(!1),jn(e.currentPlayer),dn(0);const xe=e.balls.filter(De=>De.visible&&!De.pocketed),Ae=xe.length>0?xe.reduce((De,Ne)=>Ne.id<De.id?Ne:De):null;Q(Ae),n(De=>({...De,balls:De.balls.map(Ne=>({...Ne,wasPocketedBeforeShot:Ne.pocketed}))})),n(De=>({...De,cueBall:{...De.cueBall,vx:Math.cos(h)*Z,vy:Math.sin(h)*Z,isMoving:!0,spinX:fe,spinY:me},isAnimating:!0,ballInHand:!1,gamePhase:De.gamePhase})),Zi(e.gamePhase)&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("callPocket",{detail:{player:e.currentPlayer}}))},500),Zi(e.gamePhase)&&St(!0),q(!1),x(!0),A(null),P(null),G(null),re&&pn({ballsPocketed:e.balls.filter(De=>De.pocketed).length,cueBallPosition:{x:e.cueBall.x,y:e.cueBall.y},player:e.currentPlayer}),V(!1),Ce&&!be&&e.gamePhase!=="break"&&(Ve(!0),Be(!1)),re&&(Be(!1),Ve(!0))},[e.isAnimating,F,e.cueBall,p,h,re,R,Y,e.gamePhase,Ce,be]),Er=w.useCallback(Z=>{if(e.isAnimating)return;if(Z.button===2){X(!0);return}const N=a.current.getBoundingClientRect(),fe=N.width/Qt,me=(Z.clientX-N.left)/fe,xe=(Z.clientY-N.top)/fe;if(me>=0&&me<=Qt&&xe>=0&&xe<=hn){if(K){if(fg(e.gamePhase)&&Ce&&Sr(me,xe)){Ee(!re);return}if(R&&Y||re){if(me>=Qt/2-80&&me<=Qt/2-10&&xe>=hn-30&&xe<=hn-5){V(!1),q(!0);return}if(me>=Qt/2+10&&me<=Qt/2+80&&xe>=hn-30&&xe<=hn-5){V(!1),B(null),$(null),Ee(!1),q(!0);return}}const Ne=e.balls.find(je=>je.visible&&!je.pocketed&&Math.sqrt((me-je.x)**2+(xe-je.y)**2)<et),at=Bn.find(je=>Math.sqrt((me-je.x)**2+(xe-je.y)**2)<50);if(Ne||at){Ws(Z);return}else{V(!1),B(null),$(null),q(!1);return}}if((e.ballInHand||Zi(e.gamePhase))&&Br(me,xe)){Ur(me,xe);return}const De=!F;q(De),De&&!Zi(e.gamePhase)&&!re&&V(!0),De||(V(!1),B(null),$(null))}},[e.isAnimating,e.ballInHand,e.gamePhase,Br,Ur,F,K,R,Y,Ws,Ce,re]),hs=w.useCallback(Z=>{r&&zr(),Z.button===2&&(X(!1),!F&&!e.isAnimating&&(q(!0),e.gamePhase!=="break"&&!re&&V(!0)))},[r,zr,F,e.isAnimating,e.gamePhase,re]),Ra=w.useCallback(Z=>{if(e.isAnimating)return;const N=a.current.getBoundingClientRect(),fe=N.width/Qt,me=(Z.clientX-N.left)/fe,xe=(Z.clientY-N.top)/fe;if(r){xr(me,xe);return}if(F&&!(K&&(j||Z.altKey)))return;const Ae={x:e.cueBall.x,y:e.cueBall.y},De={x:Math.max(30,Math.min(570,Ae.x)),y:Math.max(24,Math.min(270,Ae.y))},Ne=Math.atan2(xe-De.y,me-De.x);let at=!1,je=null,it=1/0;e.balls.forEach(_e=>{if(_e.visible&&!_e.pocketed){const Me=_e.x-De.x,Pe=_e.y-De.y,Ct=Math.sqrt(Me*Me+Pe*Pe),Rt=Math.atan2(Pe,Me);Math.abs(Ne-Rt)<.25&&Ct<it&&(it=Ct,je=_e,at=!0)}});let Ue=Ne;if(te){let _e=2e-5;at&&je&&(_e=1e-5*(Math.sqrt((je.x-De.x)**2+(je.y-De.y)**2)/100));const Me=De.x,Pe=De.y,Ct=(me-Me)*_e,Rt=(xe-Pe)*_e;Ue=Math.atan2(Rt,Ct)}else if(at){const Me=De.x,Pe=De.y,Ct=(me-Me)*.25,Rt=(xe-Pe)*.25;Ue=Math.atan2(Rt,Ct)}else{const _e=.9*Math.PI/180;Ue=Math.round(Ne/_e)*_e}if(F&&K&&(j||Z.altKey)){const _e=fs(Ue,se),Pe=Math.max(-.001,Math.min(.001,_e));Ue=se+Pe}if((Math.abs(fs(Ue,se))>2e-4||!te)&&(m(Ue),ee(Ue)),at&&je){const _e=Ma(je.x,je.y,De.x,De.y);A(_e),P(je)}else A(null),P(null)},[e.isAnimating,r,xr,e.cueBall,e.balls,Ma,F,K]),vo=w.useCallback(()=>{},[]);w.useCallback(()=>{x(!0),y(.5),E(0),C(0),G(null),q(!1)},[]),w.useCallback(()=>{const Z=e.cueBall;let N=null,fe=1/0;return e.balls.forEach(me=>{me.visible&&!me.pocketed&&me.id<fe&&(fe=me.id,N=me)}),N?Math.atan2(N.y-Z.y,N.x-Z.x):Math.atan2(hn/2-Z.y,Qt/2-Z.x)},[e.cueBall,e.balls]),w.useEffect(()=>{n(Z=>({...Z,balls:Zs()}))},[Zs]),w.useEffect(()=>{if(e.isAnimating)return yo(),()=>{oa.current&&cancelAnimationFrame(oa.current)}},[e.isAnimating,yo]),w.useEffect(()=>{const Z=N=>{N.key==="Escape"&&K&&(V(!1),B(null),$(null),q(!1))};return document.addEventListener("keydown",Z),()=>{document.removeEventListener("keydown",Z)}},[K]);const Cr=w.useCallback(()=>{const Z=a.current;if(!Z)return;const N=Z.getContext("2d");if(N.clearRect(0,0,Qt,hn),Jt.current?N.drawImage(Jt.current,0,0,Qt,hn):(N.fillStyle="#0d5c0d",N.fillRect(0,0,Qt,hn)),la.current){N.save(),N.globalAlpha=.25;const me=Qt*.305,xe=me*(la.current.height/la.current.width),Ae=(Qt-me)/2,De=(hn-xe)/2;N.shadowColor="rgba(0, 0, 0, 0.3)",N.shadowBlur=4,N.shadowOffsetX=0,N.shadowOffsetY=1,N.drawImage(la.current,Ae,De,me,xe),N.restore()}Zi(e.gamePhase)&&!e.isAnimating&&(N.save(),N.strokeStyle="rgba(255, 0, 0, 0.5)",N.lineWidth=2,N.setLineDash([10,5]),N.strokeRect(Ac,Tc,hg-Ac,mg-Tc),N.fillStyle="rgba(255, 0, 0, 0.8)",N.font="12px Arial",N.fillText("KITCHEN",Ac+10,Tc+20),N.restore());const fe=(me,xe)=>{if(Fn.current[xe]){const Ae=Fn.current[xe];N.save(),N.translate(me.x,me.y),N.rotate(me.rotation||0),N.shadowColor="rgba(0, 0, 0, 0.3)",N.shadowBlur=3,N.shadowOffsetX=1,N.shadowOffsetY=1,N.beginPath(),N.arc(0,0,et,0,2*Math.PI),N.clip(),N.drawImage(Ae,-7.5,-7.5,qe,qe),N.shadowColor="transparent",N.globalAlpha=.3,N.fillStyle="rgba(255, 255, 255, 0.8)",N.beginPath(),N.arc(-7.5*.3,-7.5*.3,et*.4,0,2*Math.PI),N.fill(),N.restore()}else{const Ae=new Image;Ae.onload=()=>{Fn.current[xe]=Ae,fe(me,xe)},Ae.src=xe}};if(e.balls.forEach(me=>{me.visible&&!me.pocketed&&fe(me,Ys[me.id])}),_&&!e.isAnimating){const me={x:Math.max(30,Math.min(570,e.cueBall.x)),y:Math.max(24,Math.min(270,e.cueBall.y))},xe=h,Ae=p*18,De=Math.cos(xe)*Ae,Ne=Math.sin(xe)*Ae,at=S*Math.PI/180,je=Math.cos(at)*b*Si*Ae*.05,it=Math.sin(at)*b*Si*Ae*.05,Ue=jr(De+je,Ne+it,me,{ignoreCuePocket:!0});if(Ue.cue&&Ue.cue.points.length>1){const ve=Ue.cue.points.find(ue=>ue.collision);if(ve){bn("Trajectory collision at:",ve.x.toFixed(2),ve.y.toFixed(2));const ue=e.balls.find(_e=>_e.visible&&!_e.pocketed&&_e.id===1);ue&&bn("Actual ball 1 position:",ue.x.toFixed(2),ue.y.toFixed(2))}}Object.entries(Ue).forEach(([ve,ue])=>{const _e=ve==="cue"?1:3;if(ue.points.length>_e){if(N.save(),ve==="cue"?sn(N):(N.strokeStyle=ue.color,N.lineWidth=2,N.globalAlpha=.7),ve==="cue"){const Me=ue.points,Pe=Me[0],Ct=Me[Me.length-1]||Pe;if(Math.hypot(Ct.x-Pe.x,Ct.y-Pe.y)<20){const Fr=$s(p);N.beginPath(),N.moveTo(Pe.x,Pe.y),N.lineTo(Pe.x+Math.cos(xe)*Fr,Pe.y+Math.sin(xe)*Fr),N.stroke()}else Va(N,Me)}else Va(N,ue.points);N.restore();for(let Me=1;Me<ue.points.length;Me++){const Pe=ue.points[Me];if(Pe.collision&&(N.save(),N.fillStyle=ue.color,N.globalAlpha=.6,N.beginPath(),N.arc(Pe.x,Pe.y,4,0,2*Math.PI),N.fill(),N.restore()),Pe.pocketed){N.save(),N.fillStyle="#00ff00",N.globalAlpha=.8,N.beginPath(),N.arc(Pe.x,Pe.y,6,0,2*Math.PI),N.fill(),N.restore();break}}}else if(ve==="cue"){N.save(),sn(N);const Me=ue.points[0],Pe=$s(p),Ct=Me.x+Math.cos(xe)*Pe,Rt=Me.y+Math.sin(xe)*Pe;N.beginPath(),N.moveTo(Me.x,Me.y),N.lineTo(Ct,Rt),N.stroke(),N.restore()}})}if(L&&!e.isAnimating&&(N.save(),N.strokeStyle="rgba(255, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(L.x,L.y,25,0,2*Math.PI),N.stroke(),N.restore()),!e.isAnimating&&!F){const at=[{x:30,y:24.5,margin:qe*dr},{x:570.77,y:24.5,margin:qe*dr},{x:30,y:270.18,margin:qe*dr},{x:570.77,y:270.18,margin:qe*dr},{x:300.385,y:24.5,margin:qe*Vo},{x:300.385,y:270.18,margin:qe*Vo}],je=e.cueBall.x+Math.cos(h)*100,it=e.cueBall.y+Math.sin(h)*100;let Ue=null,ve=1/0;if(at.forEach(ue=>{const _e=Math.hypot(je-ue.x,it-ue.y);_e<ve&&(ve=_e,Ue=ue)}),Ue&&ve<120){const ue=Ue.margin+pg;N.save(),N.strokeStyle="rgba(0, 255, 0, 0.18)",N.lineWidth=1.5,N.setLineDash([]),N.beginPath(),N.arc(Ue.x,Ue.y,ue,0,2*Math.PI),N.stroke(),N.fillStyle="rgba(0, 255, 0, 0.15)",N.beginPath(),N.arc(Ue.x,Ue.y,2,0,2*Math.PI),N.fill(),N.restore()}}if(K&&!e.isAnimating){if(N.save(),N.fillStyle="rgba(0, 0, 0, 0.4)",N.fillRect(0,0,Qt,hn),N.fillStyle="rgba(255, 215, 0, 0.9)",N.font="bold 16px Arial",N.textAlign="center",N.fillText("CALL YOUR SHOT",Qt/2,30),N.font="14px Arial",N.fillStyle="rgba(255, 255, 255, 0.9)",N.fillText("Click a ball, then click a pocket",Qt/2,50),R&&(N.fillStyle="rgba(0, 255, 0, 0.8)",N.font="bold 14px Arial",N.fillText(`Selected Ball: ${R}`,Qt/2,hn-60)),Y&&(N.fillStyle="rgba(0, 255, 0, 0.8)",N.font="bold 14px Arial",N.fillText(`Selected Pocket: ${Y.replace("-"," ")}`,Qt/2,hn-40)),R){const me=e.balls.find(xe=>xe.id===R&&xe.visible&&!xe.pocketed);me&&(N.strokeStyle="rgba(0, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(me.x,me.y,et+5,0,2*Math.PI),N.stroke())}if(Y){const me=Bn.find(xe=>xe.id===Y);me&&(N.strokeStyle="rgba(0, 255, 0, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(me.x,me.y,30,0,2*Math.PI),N.stroke())}bn("Draw function - gamePhase:",e.gamePhase,"pushOutAvailable:",Ce,"isCallShotMode:",K),Na(N,hn,re,Ce,e.gamePhase),(R&&Y||re)&&(N.fillStyle="rgba(76, 175, 80, 0.9)",N.fillRect(Qt/2-80,hn-30,70,25),N.fillStyle="white",N.font="bold 12px Arial",N.textAlign="center",N.fillText("CONFIRM",Qt/2-45,hn-15),N.fillStyle="rgba(244, 67, 54, 0.9)",N.fillRect(Qt/2+10,hn-30,70,25),N.fillStyle="white",N.font="bold 12px Arial",N.textAlign="center",N.fillText("CANCEL",Qt/2+45,hn-15)),N.restore()}if(e.cueBall.visible){const me=e.cueBall,xe=Ys.cue;if(Fn.current[xe]){const Ae=Fn.current[xe];N.save(),N.translate(me.x,me.y),N.rotate(me.rotation||0),N.beginPath(),N.arc(0,0,et,0,2*Math.PI),N.clip(),N.drawImage(Ae,-7.5,-7.5,qe,qe),b!==0&&!e.isAnimating&&(N.restore(),N.save(),N.strokeStyle=b>0?"rgba(76, 175, 80, 0.8)":"rgba(244, 67, 54, 0.8)",N.lineWidth=3,N.setLineDash([5,5]),N.beginPath(),N.arc(me.x,me.y,et+5,0,2*Math.PI),N.stroke(),N.strokeStyle=b>0?"rgba(76, 175, 80, 0.9)":"rgba(244, 67, 54, 0.9)",N.lineWidth=2,N.setLineDash([]),N.beginPath(),N.moveTo(me.x,me.y),N.lineTo(me.x+Math.cos(S*Math.PI/180)*(et+10),me.y+Math.sin(S*Math.PI/180)*(et+10)),N.stroke()),N.restore()}else{const Ae=new Image;Ae.onload=()=>{Fn.current[xe]=Ae,Cr()},Ae.src=xe}}N.globalAlpha=1},[e,_,h,Ys,p,L,F,jr,K,R,Y,Bn,Ce,re]);w.useEffect(()=>{Cr()},[e.isAnimating,_,h,p,L,F,K,R,Y,Ce,re]),w.useEffect(()=>{const Z=new Image;Z.onload=()=>{Jt.current=Z,Cr()},Z.src=D2},[Cr]),w.useEffect(()=>{const Z=new Image;Z.onload=()=>{la.current=Z,Cr()},Z.src=v0},[Cr]),w.useEffect(()=>{const Z=fe=>{fe.altKey&&H(!0)},N=fe=>{fe.altKey||H(!1),fe.key==="Alt"&&H(!1)};return window.addEventListener("keydown",Z),window.addEventListener("keyup",N),()=>{window.removeEventListener("keydown",Z),window.removeEventListener("keyup",N)}},[]);const[Ja,_r]=w.useState(!1),Ir=w.useCallback(Z=>{Z.preventDefault(),_r(!0),console.log("English drag started")},[]),Cl=w.useCallback(Z=>{if(!Ja)return;const N=Z.currentTarget.getBoundingClientRect(),fe=Z.clientX-N.left,me=Z.clientY-N.top,xe=fe/N.width,Ae=me/N.height,De=.5,Ne=.5,at=Math.sqrt((xe-De)**2+(Ae-Ne)**2),je=Math.min(at,.4),it=Math.min(je/.4,1),ve=(Math.atan2(Ae-Ne,xe-De)*180/Math.PI+360)%360;E(it),C(ve),console.log(`English updated: ${Math.round(it*100)}% at ${Math.round(ve)}`)},[Ja]),qs=w.useCallback(()=>{_r(!1),console.log("English drag ended")},[]),Hn=w.useCallback(Z=>{const N=Z%360;return N>=247.5&&N<=292.5?"#4CAF50":N>=67.5&&N<=112.5?"#F44336":N>=157.5&&N<=202.5?"#9C27B0":N>=337.5||N<=22.5?"#FF9800":N>292.5&&N<337.5?"#00BCD4":N>202.5&&N<247.5?"#CDDC39":N>22.5&&N<67.5?"#E91E63":"#FFC107"},[]),Ka=w.useCallback(Z=>{const N=Z%360;return N>=247.5&&N<=292.5?"Top Spin":N>=67.5&&N<=112.5?"Back Spin":N>=157.5&&N<=202.5?"Left Spin":N>=337.5||N<=22.5?"Right Spin":N>292.5&&N<337.5?"Top-Right Spin":N>202.5&&N<247.5?"Top-Left Spin":N>22.5&&N<67.5?"Bottom-Right Spin":"Bottom-Left Spin"},[]);return u.createElement("div",{className:rn.simplePoolGame},u.createElement("div",{className:rn.aimingInstructions},u.createElement("div",{className:rn.instructions},u.createElement("strong",null,"How To Aim:"),u.createElement("br",null),"Move mouse to aim  Click table to lock aim  Call Shot  Adjust power  Drag English ball  Click SHOOT",u.createElement("br",null),u.createElement("small",{style:{color:"#888",fontSize:"12px"}}," ",u.createElement("strong",null,"Aim Line Colors:")," White = Aiming  Green = Locked & ready  Yellow = Fine-tuning  Green/Red = English spin  Colored = Object ball paths",u.createElement("br",null)," ",u.createElement("strong",null,"Fine-tuning:")," Hold right-click for precise aiming, release to lock aim",u.createElement("br",null)," ",u.createElement("strong",null,"English:")," Click and drag on the English ball to set spin direction and intensity"))),Lx(e.gamePhase,Ce)&&u.createElement("div",{style:{alignSelf:"center",margin:"8px 0 14px 0",padding:"6px 14px",background:"rgba(255, 215, 0, 0.95)",color:"#000",fontWeight:700,fontSize:"15px",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.25)"}},"Push Out Available"),u.createElement("div",{className:rn.tableContainer},u.createElement("canvas",{ref:a,width:Qt,height:hn,onPointerDown:Er,onPointerUp:hs,onPointerMove:Ra,onPointerLeave:vo,onContextMenu:Z=>Z.preventDefault(),className:rn.tableCanvas})),u.createElement("div",{className:rn.controls},u.createElement("div",{className:rn.powerControl},u.createElement("label",null,"Power: ",Math.round(p*100),"%"),u.createElement("div",{style:{position:"relative",width:"100%",height:"8px",background:"#ffffff",borderRadius:"4px",border:"1px solid #e0e0e0",overflow:"hidden"}},u.createElement("div",{style:{position:"absolute",top:0,left:0,width:`${p*100}%`,height:"100%",background:"#2196F3",borderRadius:"3px"}}),u.createElement("div",{style:{position:"absolute",top:"-4px",left:`${p*100}%`,width:"16px",height:"16px",background:"#2196F3",borderRadius:"50%",border:"1px solid #1976D2",cursor:"pointer",transform:"translateX(-50%)"}}),u.createElement("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:p,onChange:Z=>y(parseFloat(Z.target.value)),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",outline:"none",cursor:"pointer",opacity:0}}))),u.createElement("div",{className:rn.englishControl},u.createElement("label",null,"English: Drag to set spin"),u.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"}},u.createElement("div",{onMouseDown:Ir,onMouseMove:Cl,onMouseUp:qs,onMouseLeave:qs,style:{width:"60px",height:"60px",borderRadius:"50%",border:"2px solid #333",background:"linear-gradient(135deg, #fff 0%, #f0f0f0 100%)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#333",cursor:Ja?"grabbing":"grab",userSelect:"none"}},b>0?"+":"",Math.round(b*100),"%",b!==0&&u.createElement(u.Fragment,null,u.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) translate(${Math.cos(S*Math.PI/180)*20}px, ${Math.sin(S*Math.PI/180)*20}px)`,width:"8px",height:"8px",borderRadius:"50%",background:Hn(S),border:"1px solid #fff"}}),u.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${S}deg)`,width:"2px",height:"20px",background:Hn(S),borderRadius:"1px"}}))),b!==0&&u.createElement("div",{style:{fontSize:"12px",color:Hn(S),fontWeight:"bold"}},Ka(S)),b===0&&u.createElement("div",{style:{fontSize:"12px",color:"#666"}},"No Spin"),b!==0&&u.createElement("button",{onClick:()=>{E(0),C(0)},style:{fontSize:"10px",padding:"2px 6px",background:"#666",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",marginLeft:"5px"}},"Reset"))),u.createElement("div",{className:rn.shootButton},u.createElement("button",{className:rn.shootButton,onClick:El,disabled:e.isAnimating||!F},F?e.gamePhase==="break"||R&&Y||re?"SHOOT!":"CALL SHOT":"LOCK AIM FIRST")),u.createElement("div",{className:rn.gameInfo},u.createElement("span",null,"Player: ",e.currentPlayer),u.createElement("span",null,"Phase: ",e.gamePhase),u.createElement("span",null,"Status: ",e.isAnimating?"Animating":e.ballInHand||e.gamePhase==="break"?r?"Drag Cue Ball to Position":e.gamePhase==="break"?"Click Cue Ball to Move (Kitchen Only)":"Click Cue Ball to Move (Anywhere)":F?"Aim Locked - Ready to Shoot":L?"Pocket assistance active - Click to lock!":"Move Mouse to Aim"),Nt&&u.createElement("span",{style:{color:"#ff6b6b",fontWeight:"bold"}},"FOUL: ",Nt==="scratch"?"Scratch":Nt==="wrong_ball_first"?"Wrong Ball First":Nt==="no_rail_contact"?"No Rail Contact":Nt),u.createElement("span",null,"Consecutive Fouls P1: ",Je[1]," | P2: ",Je[2])),u.createElement("div",{className:rn.buttonRow},u.createElement("button",{className:rn.resetAimButton,onClick:()=>{setIsDragging(!1),x(!1),y(.5)},disabled:e.isAnimating},"Reset Aim"),u.createElement("button",{className:rn.resetButton,onClick:()=>{n(Z=>({...Z,balls:Zs(),cueBall:{x:100,y:150,originalX:100,originalY:150,vx:0,vy:0,visible:!0,isMoving:!1,rotation:0,rotationSpeed:0},isAnimating:!1,gamePhase:"break",ballInHand:!1,scratchOccurred:!1,currentPlayer:1})),x(!0),o(!1),G(null),q(!1),E(0),C(0),Be(!1),Ve(!1),Ee(!1),pn(null),Xe(!1),Q(null),console.log("Resetting foul counters via reset button"),ot({1:0,2:0}),kn(null),nt(!1),Pn(!1),jn(null),dn(0),us([]),wa(!1),window.tipManager&&window.tipManager.resetTips&&window.tipManager.resetTips()}},"Reset Game"),u.createElement("button",{className:rn.resetButton,onClick:()=>{n(Z=>({...Z,ballInHand:!0,currentPlayer:Z.currentPlayer===1?2:1}))},style:{marginLeft:"10px",backgroundColor:"#ff6b6b"}},"Test Ball-in-Hand"))),we&&u.createElement("div",{className:rn.pushOutModal},u.createElement("div",{className:rn.pushOutContent},u.createElement("h3",null,"Push Out Result"),u.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", do you want to accept this push out result?"),u.createElement("div",{className:rn.pushOutButtons},u.createElement("button",{onClick:()=>{Xe(!1),n(Z=>({...Z,currentPlayer:Z.currentPlayer===1?2:1}))},className:rn.acceptButton},"Accept"),u.createElement("button",{onClick:()=>{Xe(!1)},className:rn.declineButton},"Decline")))),wt&&u.createElement("div",{className:rn.pushOutModal},u.createElement("div",{className:rn.pushOutContent},u.createElement("h3",null,"Illegally Pocketed Balls"),u.createElement("p",null,"Player ",e.currentPlayer===1?2:1,", balls were illegally pocketed:"),u.createElement("ul",null,Or.map(Z=>u.createElement("li",{key:Z.id},"Ball ",Z.id," ",Z.id===10?"(will be spotted)":"(remains pocketed)"))),u.createElement("p",null,"Do you want to:"),u.createElement("div",{className:rn.pushOutButtons},u.createElement("button",{onClick:()=>{wa(!1),n(N=>({...N,currentPlayer:N.currentPlayer===1?2:1})),Or.find(N=>N.id===10)&&n(N=>({...N,balls:N.balls.map(fe=>fe.id===10?{...fe,pocketed:!1,visible:!0,x:Px,y:Ox}:fe)})),us([])},className:rn.acceptButton},"Accept Table"),u.createElement("button",{onClick:()=>{wa(!1),us([])},className:rn.declineButton},"Require Re-Shot")))))},Rz="_tutorialRules_use5n_1",kz="_header_use5n_14",Lz="_progressContainer_use5n_25",Pz="_progressBar_use5n_31",Oz="_progressFill_use5n_39",Bz="_progressText_use5n_46",Uz="_content_use5n_52",zz="_stepContent_use5n_56",jz="_highlightBox_use5n_73",Fz="_highlightIcon_use5n_86",Hz="_tipSection_use5n_90",Yz="_navigation_use5n_110",Wz="_navButton_use5n_119",Gz="_disabled_use5n_135",$z="_centerButtons_use5n_145",Zz="_skipButton_use5n_153",qz="_nextButton_use5n_171",Qz="_startButton_use5n_171",Vz="_quickRules_use5n_193",Xz="_ruleGrid_use5n_205",Jz="_ruleItem_use5n_211",Kz="_ruleNumber_use5n_231",qt={tutorialRules:Rz,header:kz,progressContainer:Lz,progressBar:Pz,progressFill:Oz,progressText:Bz,content:Uz,stepContent:zz,highlightBox:jz,highlightIcon:Fz,tipSection:Hz,navigation:Yz,navButton:Wz,disabled:Gz,centerButtons:$z,skipButton:Zz,nextButton:qz,startButton:Qz,quickRules:Vz,ruleGrid:Xz,ruleItem:Jz,ruleNumber:Kz},ej=({step:t,currentStep:a,totalSteps:e,onNext:n,onBack:r,onSkip:o})=>{const l=(a+1)/e*100,d=["Remember: Always hit the lowest numbered ball first!","Call your shots clearly - specify ball and pocket.","The 10-ball is the money ball - pocket it legally to win!","Use the push out strategically to improve your position.","Three consecutive fouls result in loss of game.","Practice your break shot - it sets up the entire game.","Defensive play is just as important as offensive play.","Watch for safety opportunities when you can't make a shot."];return u.createElement("div",{className:qt.tutorialRules},u.createElement("div",{className:qt.header},u.createElement("h3",null,"10-Ball Rules Tutorial"),u.createElement("div",{className:qt.progressContainer},u.createElement("div",{className:qt.progressBar},u.createElement("div",{className:qt.progressFill,style:{width:`${l}%`}})),u.createElement("span",{className:qt.progressText},"Step ",a+1," of ",e))),u.createElement("div",{className:qt.content},u.createElement("div",{className:qt.stepContent},u.createElement("h4",null,t.title),u.createElement("p",null,t.content),t.highlight&&u.createElement("div",{className:qt.highlightBox},u.createElement(YU,{className:qt.highlightIcon}),u.createElement("span",null,"This concept will be highlighted on the table"))),u.createElement("div",{className:qt.tipSection},u.createElement("h5",null," Pro Tip"),u.createElement("p",null,d[a%d.length]))),u.createElement("div",{className:qt.navigation},u.createElement("button",{className:`${qt.navButton} ${a===0?qt.disabled:""}`,onClick:r,disabled:a===0},u.createElement(zU,null),"Previous"),u.createElement("div",{className:qt.centerButtons},u.createElement("button",{className:qt.skipButton,onClick:o},"Skip Tutorial"),a===e-1?u.createElement("button",{className:qt.startButton,onClick:n},u.createElement(WU,null),"Start Playing"):u.createElement("button",{className:qt.nextButton,onClick:n},"Next",u.createElement(jU,null)))),u.createElement("div",{className:qt.quickRules},u.createElement("h5",null,"Quick Reference"),u.createElement("div",{className:qt.ruleGrid},u.createElement("div",{className:qt.ruleItem},u.createElement("span",{className:qt.ruleNumber},"1"),u.createElement("span",null,"Hit lowest ball first")),u.createElement("div",{className:qt.ruleItem},u.createElement("span",{className:qt.ruleNumber},"2"),u.createElement("span",null,"Call your shots")),u.createElement("div",{className:qt.ruleItem},u.createElement("span",{className:qt.ruleNumber},"3"),u.createElement("span",null,"10-ball wins the game")),u.createElement("div",{className:qt.ruleItem},u.createElement("span",{className:qt.ruleNumber},"4"),u.createElement("span",null,"Push out after break")))))},tj="_gameModeSelector_s58nb_29",nj="_header_s58nb_67",aj="_backToDashboardButton_s58nb_113",rj="_modesGrid_s58nb_277",sj="_modeCard_s58nb_291",ij="_recommended_s58nb_333",oj="_recommendedBadge_s58nb_353",lj="_modeIcon_s58nb_379",cj="_modeContent_s58nb_403",uj="_modeArrow_s58nb_441",dj="_whatYoullLearn_s58nb_539",Mr={gameModeSelector:tj,header:nj,backToDashboardButton:aj,modesGrid:rj,modeCard:sj,recommended:ij,recommendedBadge:oj,modeIcon:lj,modeContent:cj,modeArrow:uj,whatYoullLearn:dj},jx=({onModeSelect:t,fromLogin:a=!1})=>{const e=[{id:"tutorial",title:"Interactive Tutorial",description:"Learn the official CSI 10-Ball rules step by step with interactive examples and tips.",icon:HU,color:"#4CAF50",recommended:!0}];return u.createElement("div",{className:Mr.gameModeSelector,style:{maxWidth:"280px",width:"280px",margin:"0 auto",overflowX:"hidden",boxSizing:"border-box"}},u.createElement("div",{className:Mr.header},!a&&u.createElement("button",{className:Mr.backToDashboardButton,onClick:()=>window.location.href="/dashboard"}," Back to Dashboard"),u.createElement("h2",null,"10-Ball Tutorial"),u.createElement("p",null,"Learn and master the official CSI 10-Ball rules")),u.createElement("div",{className:Mr.modesGrid},e.map(n=>{const r=n.icon;return u.createElement("div",{key:n.id,className:`${Mr.modeCard} ${n.recommended?Mr.recommended:""}`,onClick:()=>t(n.id)},n.recommended&&u.createElement("div",{className:Mr.recommendedBadge},"Recommended"),u.createElement("div",{className:Mr.modeIcon,style:{backgroundColor:n.color}},u.createElement(r,null)),u.createElement("div",{className:Mr.modeContent},u.createElement("h3",null,n.title),u.createElement("p",null,n.description)),u.createElement("div",{className:Mr.modeArrow},""))})),u.createElement("div",{className:Mr.whatYoullLearn},u.createElement("h3",null,"What You'll Learn"),u.createElement("ul",null,u.createElement("li",null,"Official CSI 10-Ball Rules"),u.createElement("li",null,"Break/Push Out Requirements"),u.createElement("li",null,"Call Shot/Ball in Hand Requirements"),u.createElement("li",null,"Illegally Pocketed Balls/Opponent's Option"),u.createElement("li",null,"Foul Detection and Penalties"),u.createElement("li",null,"Advanced Shot Planning"))))},fj="_tipContainer_1z0xf_1",hj="_show_1z0xf_27",mj="_dragging_1z0xf_35",pj="_tipContent_1z0xf_47",gj="_tipHeader_1z0xf_71",yj="_tipIcon_1z0xf_89",vj="_tipTitle_1z0xf_99",bj="_closeButton_1z0xf_113",wj="_tipText_1z0xf_155",Ms={tipContainer:fj,show:hj,dragging:mj,tipContent:pj,tipHeader:gj,tipIcon:yj,tipTitle:vj,closeButton:bj,tipText:wj},xj=({tip:t,isVisible:a,onClose:e})=>{const[n,r]=w.useState(!1),[o,l]=w.useState({x:0,y:0}),[d,h]=w.useState(!1),[m,p]=w.useState({x:0,y:0}),y=w.useRef(null);w.useEffect(()=>{if(a){r(!0);const C=setTimeout(()=>{e()},8e3);return()=>clearTimeout(C)}},[a,e]);const b=C=>{if(C.target.closest("button"))return;h(!0);const _=y.current.getBoundingClientRect();p({x:C.clientX-_.left,y:C.clientY-_.top})},E=C=>{if(!d)return;const _=C.clientX-m.x,x=C.clientY-m.y,D=window.innerWidth-250,A=window.innerHeight-100;l({x:Math.max(0,Math.min(_,D)),y:Math.max(0,Math.min(x,A))})},S=()=>{h(!1)};return w.useEffect(()=>{if(d)return document.addEventListener("mousemove",E),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",S)}},[d,m]),a?u.createElement("div",{ref:y,className:`${Ms.tipContainer} ${n?Ms.show:""} ${d?Ms.dragging:""}`,style:{maxWidth:"250px",width:"250px",minWidth:"250px",top:o.y||20,left:o.x||"50%",transform:o.x?"none":"translateX(-50%)",right:"auto",cursor:d?"grabbing":"grab"},onMouseDown:b},u.createElement("div",{className:Ms.tipContent},u.createElement("div",{className:Ms.tipHeader},u.createElement("span",{className:Ms.tipIcon},""),u.createElement("span",{className:Ms.tipTitle},"Pro Tip"),u.createElement("button",{className:Ms.closeButton,onClick:e},"")),u.createElement("div",{className:Ms.tipText},t))):null},Sj=w.forwardRef(({gameState:t,onTipShown:a},e)=>{const[n,r]=w.useState(null),[o,l]=w.useState(!1),[d,h]=w.useState(new Set),m=S=>{b(S)},p=()=>{h(new Set)};w.useImperativeHandle(e,()=>({triggerTip:m,resetTips:p}));const y={breakShot:{title:"Break Shot",tip:"Always hit the lowest numbered ball first! A good break can set up your entire game!"},callShot:{title:"Call Shot",tip:"Be specific about which pocket you're aiming for! If you don't call it, it doesn't count!"},pushOut:{title:"Push Out Opportunity",tip:"Use push out to improve your position when the table is difficult!"},foul:{title:"Foul Committed",tip:"Three consecutive fouls by the same player results in loss of game!"},tenBall:{title:"10-Ball Target",tip:"The 10-ball is the only ball that matters for winning!"},defensive:{title:"Defensive Play",tip:"Sometimes the best shot is the one that leaves your opponent nothing!"},practice:{title:"Keep Learning",tip:"Practice makes perfect - keep playing and learning!"},scratch:{title:"Scratch Foul",tip:"The cue ball went in a pocket! Your opponent gets ball-in-hand."},wrongBall:{title:"Wrong Ball First",tip:"You must hit the lowest numbered ball first! This is a foul."},noRail:{title:"No Rail Contact",tip:"After contact, a ball must hit a rail or be pocketed. This is a foul."},ballInHand:{title:"Ball-in-Hand",tip:"You can place the cue ball anywhere on the table after a foul."},kitchen:{title:"Kitchen Rule",tip:"During break, the cue ball must start in the kitchen (behind the head string)."},threeFoul:{title:"Three Foul Rule",tip:"Three consecutive fouls by the same player results in loss of game!"},pushOutStrategy:{title:"Push Out Strategy",tip:"After a legal break, you can push out to improve position. Opponent then chooses to shoot or pass."},callPocket:{title:"Call Pocket",tip:"You must call both the ball and the pocket for every shot after the break."},lowestBall:{title:"Lowest Ball First",tip:"Always hit the lowest numbered ball on the table first!"},safety:{title:"Safety Shot",tip:"A safety shot is when you don't expect to pocket a ball but leave your opponent in a difficult position."},jumpShot:{title:"Jump Shot",tip:"Jump shots are legal in 10-ball, but be careful not to jump the cue ball off the table!"},gameWinning:{title:"Game Winner",tip:"Legally pocket the 10-ball to win! Remember to call it and the pocket."}},b=S=>{if(d.has(S))return;const C=y[S];C&&(r(C),l(!0),h(_=>new Set([..._,S])),a==null||a(S))},E=()=>{l(!1)};return w.useEffect(()=>{t&&(t.gamePhase==="break"&&!d.has("breakShot")&&(b("breakShot"),window.dispatchEvent(new CustomEvent("kitchenRule"))),t.gamePhase==="play"&&!d.has("callShot")&&b("callShot"))},[t,d]),w.useEffect(()=>{const S=ee=>{d.has("foul")||b("foul")},C=ee=>{d.has("scratch")||b("scratch")},_=ee=>{d.has("wrongBall")||b("wrongBall")},x=ee=>{d.has("noRail")||b("noRail")},D=ee=>{d.has("ballInHand")||b("ballInHand")},A=ee=>{d.has("kitchen")||b("kitchen")},k=ee=>{d.has("threeFoul")||b("threeFoul")},P=ee=>{d.has("pushOut")||b("pushOut")},L=ee=>{d.has("pushOutStrategy")||b("pushOutStrategy")},G=ee=>{d.has("callPocket")||b("callPocket")},F=ee=>{d.has("lowestBall")||b("lowestBall")},q=ee=>{d.has("safety")||b("safety")},te=ee=>{d.has("jumpShot")||b("jumpShot")},X=ee=>{d.has("tenBall")||b("tenBall")},se=ee=>{d.has("gameWinning")||b("gameWinning")};return window.addEventListener("gameFoul",S),window.addEventListener("scratchFoul",C),window.addEventListener("wrongBallFoul",_),window.addEventListener("noRailFoul",x),window.addEventListener("ballInHand",D),window.addEventListener("kitchenRule",A),window.addEventListener("threeFoul",k),window.addEventListener("pushOutAvailable",P),window.addEventListener("pushOutStrategy",L),window.addEventListener("callPocket",G),window.addEventListener("lowestBall",F),window.addEventListener("safetyOpportunity",q),window.addEventListener("jumpShot",te),window.addEventListener("tenBallTarget",X),window.addEventListener("gameWinning",se),()=>{window.removeEventListener("gameFoul",S),window.removeEventListener("scratchFoul",C),window.removeEventListener("wrongBallFoul",_),window.removeEventListener("noRailFoul",x),window.removeEventListener("ballInHand",D),window.removeEventListener("kitchenRule",A),window.removeEventListener("threeFoul",k),window.removeEventListener("pushOutAvailable",P),window.removeEventListener("pushOutStrategy",L),window.removeEventListener("callPocket",G),window.removeEventListener("lowestBall",F),window.removeEventListener("safetyOpportunity",q),window.removeEventListener("jumpShot",te),window.removeEventListener("tenBallTarget",X),window.removeEventListener("gameWinning",se)}},[d]),u.createElement(xj,{tip:n==null?void 0:n.tip,isVisible:o,onClose:E})}),Ej="_container_1jm20_1",Cj="_backButton_1jm20_53",_j="_tutorialContainer_1jm20_79",Ei={container:Ej,backButton:Cj,tutorialContainer:_j},FE=({fromLogin:t=!1,onBackToLogin:a})=>{const[e,n]=w.useState("menu"),[r,o]=w.useState(0),[l,d]=w.useState(!0),[h,m]=w.useState({player1Score:0,player2Score:0,currentPlayer:1,gamePhase:"break",rules:{callPocket:!0,pushOut:!0,threeFoulRule:!0,jumpShots:!0}}),p=[{title:"The Break Shot",content:"Start the game with a legal break shot. You must break from the kitchen hitting the 1-ball first and drive at least 4 balls to the rails or pocket a ball.",proTip:"A good break can set up your entire game!"},{title:"Welcome to 10-Ball!",content:"10-Ball is a call-shot game where you must hit the lowest numbered ball first and call your shots. The 10-ball is the game-winning ball!",proTip:"Always hit the lowest numbered ball first!"},{title:"Call Shot Rules",content:"After the break, you must call both the ball and the pocket for every shot. If you don't call it, it doesn't count!",proTip:"CSI rules state that you do not have to call obvious shots. Banks, Kicks, and Caroms should always be called. Be specific about which pocket you're aiming for! Make sure your opponent acknowledges your called shot."},{title:"Push Out Option",content:"After a legal break, the incoming player may choose to 'push out' - shoot the cue ball anywhere without hitting any ball. The opponent then chooses to shoot or pass.",proTip:"Use push out to improve your position when the table is difficult!"},{title:"Fouls and Penalties",content:"Common fouls include: scratching (cue ball in pocket), hitting wrong ball first, not hitting any rail after contact, and jumping the cue ball off the table.",proTip:"Three consecutive fouls by the same player results in loss of game!"},{title:"Winning the Game",content:"Legally pocket the 10-ball to win! Yes, you can win with an early ten ball...Remember, you must call the 10-ball and the pocket, and hit the lowest numbered ball first.",proTip:"The 10-ball is the only ball that matters for winning!"},{title:"Strategy Tips",content:"Plan your shots ahead, use defensive play when needed, and always consider your opponent's options after your shot.",proTip:"Sometimes the best shot is the one that leaves your opponent nothing!"},{title:"Ready to Play!",content:"You now know the basics of 10-Ball! Practice these rules and strategies to improve your game.",proTip:"Practice makes perfect - keep playing and learning!"}],y=_=>{n(_),_==="tutorial"&&(o(0),d(!0))},b=()=>{r<p.length-1?o(r+1):n("game")},E=()=>{r>0&&o(r-1)},S=_=>{m(x=>({...x,gamePhase:"end",player1Score:_===1?x.player1Score+1:x.player1Score,player2Score:_===2?x.player2Score+1:x.player2Score}))},C=()=>{switch(e){case"menu":return u.createElement(jx,{onModeSelect:y,fromLogin:t});case"tutorial":return u.createElement("div",{className:Ei.tutorialContainer},u.createElement(ej,{step:p[r],currentStep:r,totalSteps:p.length,onNext:b,onBack:E,onSkip:()=>n("game")}),u.createElement(t0,{onGameEnd:S}));case"game":return u.createElement(t0,{onGameEnd:S});default:return u.createElement(jx,{onModeSelect:y})}};return u.createElement("div",{className:Ei.container},C(),(e==="game"||e==="tutorial")&&u.createElement(Sj,{gameState:h,onTipShown:_=>console.log(`Tip shown: ${_}`),ref:_=>{_&&(window.tipManager=_)}}),e!=="menu"&&!t&&u.createElement("div",{className:Ei.navigation},u.createElement("button",{className:Ei.backButton,onClick:()=>n("menu")}," Back to Menu")),e!=="menu"&&u.createElement("div",{className:Ei.gameInfo},u.createElement("div",{className:Ei.scoreBoard},u.createElement("div",{className:Ei.playerScore},u.createElement("span",null,"Player 1: ",h.player1Score)),u.createElement("div",{className:Ei.playerScore},u.createElement("span",null,"Player 2: ",h.player2Score)))))},Ij="1tvMgMHsRwQxsR6lMNlSnztmwpK7fhZeNEyqjTqmRFRc",Dj="BCAPL SIGNUP";function Aj({onSuccess:t}){const[a,e]=w.useState(""),[n,r]=w.useState(""),[o,l]=w.useState(!1),[d,h]=w.useState(!1),[m,p]=w.useState(!1),y=async()=>{if(!a){r("Please enter your email or PIN.");return}r(""),l(!0);try{const C=(await Dh(Ij,`${Dj}!A1:L1000`)).slice(1).find(_=>(_[2]||"").trim().toLowerCase()===a.trim().toLowerCase()||(_[11]||"").trim()===a.trim());l(!1),C?(r(""),t(`${C[0]||""} ${C[1]||""}`.trim(),C[2]||"",C[11]||"")):r("No user found with that email or PIN. Please try again or contact frbcapl@gmail.com for help.")}catch(E){l(!1),r("Error verifying login. Please try again later."),console.error("Login verification error:",E)}},b=E=>{E.key==="Enter"&&y()};return d?u.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},u.createElement("button",{onClick:()=>h(!1),style:{position:"fixed",top:"0px",left:"0px",zIndex:1e3,backgroundColor:"#e53e3e",color:"white",border:"none",padding:"12px 20px",borderRadius:"0 0 8px 0",fontSize:"14px",cursor:"pointer",fontWeight:"bold"}}," Back to Login"),u.createElement(FE,{fromLogin:!0,onBackToLogin:()=>h(!1)})):u.createElement("div",{className:hr.pinLoginBg},u.createElement("div",{className:hr.pinLoginFrame},u.createElement("a",{href:"https://frusapl.com/frbcapl-singles#3a534cc1-c4ac-4c04-8d7a-a0fe9ddfaca4",target:"_blank",rel:"noopener noreferrer",className:hr.signupBtn,style:{marginBottom:"1.5rem"}},"Sign Up for Beta Test"),u.createElement("div",{className:hr.simulationContainer},u.createElement(R2,{aspectWidth:600,aspectHeight:300},u.createElement(uf,null))),u.createElement("div",{className:hr.pinLoginCard},u.createElement("h3",{className:hr.pinLoginSubtitle},u.createElement("span",{className:hr.pinLoginLock,"aria-hidden":"true"},""),u.createElement("span",{className:hr.pinOutlineText}," Enter Email or PIN")),u.createElement("div",{style:{position:"relative",width:"100%"}},u.createElement("input",{type:m?"text":"password",value:a,onChange:E=>e(E.target.value),onKeyDown:b,placeholder:"Email or PIN",autoFocus:!0,className:hr.pinInput,"aria-label":"Email or PIN",disabled:o,style:{paddingRight:"50px"}}),u.createElement("button",{type:"button",onClick:()=>p(!m),style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",fontSize:"16px",color:"#666",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":m?"Hide password":"Show password"},m?"":"")),u.createElement("button",{onClick:y,disabled:o,className:hr.pinLoginBtn,type:"button"},o?"Verifying...":"Submit"),n&&u.createElement("p",{className:hr.pinLoginError,role:"alert"},n))))}const Tj=""+new URL("bcapl_logo-BvvUeHn5.png",import.meta.url).href,Mj=""+new URL("csi_logo-ChVaLM6t.png",import.meta.url).href,Nj=""+new URL("usapl_logo-jJ_LE_Bw.png",import.meta.url).href,Rj=""+new URL("fargorate-logo-BVCRpqvV.png",import.meta.url).href;function kj(){const[t,a]=w.useState(window.innerWidth),[e,n]=w.useState(window.innerHeight),[r]=w.useState(()=>[0,1,2,3,4,5,6,7].map(A=>{const k=.1+Math.random()*.15,P=Math.random()*Math.PI*2;return{x:Math.random()*t,y:Math.random()*e,vx:Math.cos(P)*k*1.2,vy:Math.sin(P)*k*1.2,baseSize:.8+Math.random()*.4,sizePhase:Math.random()*Math.PI*2,isSizeChanger:!1,speedCategory:"base",lastChange:Date.now(),changeInterval:8e3+Math.random()*12e3,rotationDirection:A>=5?Math.random()>.5?1:-1:0}}));w.useEffect(()=>{const A=()=>{a(window.innerWidth),n(window.innerHeight)};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);function o(A,k,P){const[L,G]=w.useState(A);w.useRef(null);const F=w.useRef(A);return w.useEffect(()=>{let q,te=Date.now();const X=()=>{const se=Date.now(),ee=se-te,j=F.current;if(se-j.lastChange>j.changeInterval){const V=P.includes(k)?"fast":"base",re={...j,speedCategory:V,lastChange:se,changeInterval:3e3+Math.random()*6e3};F.current=re,G(re)}if(Math.random()<.003){const K=Math.atan2(j.vy,j.vx),V=(Math.random()-.5)*Math.PI*.3,re=K+V,Ee=.3+Math.random()*1,Ce=j.speedCategory==="fast"?.6:.2;j.vx=Math.cos(re)*Ee*Ce,j.vy=Math.sin(re)*Ee*Ce}let H=j.x+j.vx*(ee/16),R=j.y+j.vy*(ee/16);(H<0||H>t||R<0||R>e)&&(j.edgeShrink||(j.edgeShrink=!0,j.edgeShrinkTime=se));const B=se/1e3;let Y=j.baseSize;const $=Math.sin(B*.07+j.sizePhase)*.1,T=Math.sin(B*.35+j.sizePhase*2)*.05;if(Y=j.baseSize+$+T,Y<j.baseSize*.3&&!j.sizeShrink&&(j.sizeShrink=!0,j.sizeShrinkTime=se),j.edgeShrink){const K=se-j.edgeShrinkTime;if(K<2e3){const re=1-K/2e3;j.edgeOpacity=re,Y=j.baseSize+$+T}else if(K<4e3)j.edgeOpacity=.01,Y=.01;else if(K<4100)H=Math.random()*t,R=Math.random()*e,j.x=H,j.y=R,Y=.01,j.edgeOpacity=.01;else if(K<12500){const re=.01+.99*((K-4100)/8400);Y*=re,j.edgeOpacity=re}else j.edgeShrink=!1,j.edgeOpacity=1}else j.edgeOpacity=1;if(j.sizeShrink){const K=se-j.sizeShrinkTime;if(K<2e3){const re=1-K/2e3;j.sizeOpacity=re}else if(K<4e3)j.sizeOpacity=.01,Y=.01;else if(K<4100)H=Math.random()*t,R=Math.random()*e,j.x=H,j.y=R,Y=.01,j.sizeOpacity=.01;else if(K<12500){const re=.01+.99*((K-4100)/8400);Y*=re,j.sizeOpacity=re}else j.sizeShrink=!1,j.sizeOpacity=1}else j.sizeOpacity=1;let U=j.rotation||0;if(k>=5){const V=(Math.sqrt(j.vx*j.vx+j.vy*j.vy)*2+.3)*(ee/16)*(j.rotationDirection||1);U+=V}F.current={...j,x:H,y:R,size:Y,rotation:U},se-te>100&&(G(F.current),te=se),q=requestAnimationFrame(X)};return X(),()=>cancelAnimationFrame(q)},[t,e,P]),L}const[l]=w.useState(()=>{const A=[];for(;A.length<3;){const P=Math.floor(Math.random()*8);A.includes(P)||A.push(P)}const k=[];for(;k.length<3;){const P=Math.floor(Math.random()*8);!k.includes(P)&&!A.includes(P)&&k.push(P)}return r.forEach((P,L)=>{A.includes(L)?(P.speedCategory="fast",P.vx=(Math.random()-.5)*2,P.vy=(Math.random()-.5)*2):(P.speedCategory="base",P.vx=(Math.random()-.5)*.5,P.vy=(Math.random()-.5)*.5),k.includes(L)&&(P.isSizeChanger=!0)}),!0}),[d,h]=w.useState(()=>{const A=[];for(;A.length<3;){const k=Math.floor(Math.random()*8);A.includes(k)||A.push(k)}return A}),m=()=>{const A=[];for(;A.length<3;){const k=Math.floor(Math.random()*8);A.includes(k)||A.push(k)}h(A)};w.useEffect(()=>{const A=setInterval(()=>{m(),console.log("Speed reassignment triggered")},4e3+Math.random()*4e3);return()=>clearInterval(A)},[]);const p=o(r[0],0,d),y=o(r[1],1,d),b=o(r[2],2,d),E=o(r[3],3,d),S=o(r[4],4,d),C=o(r[5],5,d),_=o(r[6],6,d),x=o(r[7],7,d),D=(A,k,P,L,G=!1)=>{const F=G&&A.rotation||0;return{position:"absolute",left:A.x,top:A.y,transform:`translate(-50%, -50%) scale(${A.size}) rotate(${F}deg)`,width:k,height:"auto",opacity:P*(A.edgeOpacity||1)*(A.sizeOpacity||1),zIndex:0,pointerEvents:"none",filter:L,transition:"none"}};return u.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",overflow:"hidden"}},u.createElement("img",{src:v0,alt:"League Logo Background",style:D(p,150,.75,"drop-shadow(0 0 24px rgba(245, 30, 30, 0.2))")}),u.createElement("img",{src:Tj,alt:"BCAPL Logo Background",style:D(y,120,.75,"drop-shadow(0 0 18px rgba(245, 30, 30, 0.2))")}),u.createElement("img",{src:Mj,alt:"CSI Logo Background",style:D(b,120,.75,"drop-shadow(0 0 12px rgba(245, 30, 30, 0.2))")}),u.createElement("img",{src:Nj,alt:"USAPL Logo Background",style:D(E,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),u.createElement("img",{src:Rj,alt:"Fargorate Logo Background",style:D(S,140,.8,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.2))")}),u.createElement("img",{src:cf,alt:"8 Ball Background",style:D(C,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),u.createElement("img",{src:A2,alt:"9 Ball Background",style:D(_,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}),u.createElement("img",{src:ih,alt:"10 Ball Background",style:D(x,40,.7,"drop-shadow(0 0 10px rgba(245, 30, 30, 0.3))",!0)}))}function Lj(){return u.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"0.5rem 0",position:"fixed",top:0,left:0,zIndex:1e3,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(6px)",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"}},u.createElement("span",{className:"app-header-title"},"Front Range Pool League"))}function Pj({isAuthenticated:t,userFirstName:a,userLastName:e,userEmail:n,userPin:r,handleLoginSuccess:o,handleLogout:l}){const d=ho();return u.createElement("main",{className:"main-app-content"},t?u.createElement(UE,{playerName:a,playerLastName:e,senderEmail:n,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:l,userPin:r,onGoToAdmin:()=>d("/admin")}):u.createElement(Aj,{onSuccess:o}))}function Oj(){const[t,a]=w.useState(!1),[e,n]=w.useState(""),[r,o]=w.useState(""),[l,d]=w.useState(""),[h,m]=w.useState("");w.useEffect(()=>{localStorage.getItem("isAuthenticated")==="true"&&(n(localStorage.getItem("userFirstName")||""),o(localStorage.getItem("userLastName")||""),d(localStorage.getItem("userEmail")||""),m(localStorage.getItem("userPin")||""),a(!0))},[]);const p=(b,E,S)=>{let C="",_="";if(b){const x=b.trim().split(" ");C=x[0],_=x.slice(1).join(" ")}n(C),o(_),d(E),m(S),a(!0),localStorage.setItem("userFirstName",C),localStorage.setItem("userLastName",_),localStorage.setItem("userEmail",E),localStorage.setItem("userPin",S),localStorage.setItem("isAuthenticated","true")},y=()=>{n(""),o(""),d(""),m(""),a(!1),localStorage.removeItem("userFirstName"),localStorage.removeItem("userLastName"),localStorage.removeItem("userEmail"),localStorage.removeItem("userPin"),localStorage.removeItem("isAuthenticated")};return u.createElement(y5,null,u.createElement("div",{style:{position:"relative",minHeight:"100vh",width:"100%",overflowX:"hidden",background:"#000"}},u.createElement(kj,null),u.createElement(Lj,null),u.createElement("div",{style:{position:"relative",zIndex:3,maxWidth:900,margin:"0 auto",width:"100%",background:"none",minHeight:"calc(100vh - 80px)",paddingTop:"0px"}},u.createElement(Nw,null,u.createElement(qr,{path:"/admin",element:t&&h==="777777"?u.createElement("div",{className:"admin-app-content"},u.createElement(nz,null)):u.createElement(pd,{to:"/"})}),u.createElement(qr,{path:"*",element:u.createElement("main",{className:"main-app-content"},u.createElement(Nw,null,u.createElement(qr,{path:"/confirm-match",element:u.createElement(vT,null)}),u.createElement(qr,{path:"/chat",element:t?u.createElement(OE,{userName:`${e} ${r}`,userEmail:l,userPin:h}):u.createElement(pd,{to:"/"})}),u.createElement(qr,{path:"/simple-pool",element:u.createElement(t0,null)}),u.createElement(qr,{path:"/tenball-tutorial",element:u.createElement(FE,null)}),u.createElement(qr,{path:"/dashboard",element:t?u.createElement(UE,{playerName:e,playerLastName:r,senderEmail:l,onScheduleMatch:()=>{},onOpenChat:()=>window.location.hash="#/chat",onLogout:y,userPin:h,onGoToAdmin:()=>{}}):u.createElement(pd,{to:"/"})}),u.createElement(qr,{path:"/",element:u.createElement(Pj,{isAuthenticated:t,userFirstName:e,userLastName:r,userEmail:l,userPin:h,handleLoginSuccess:p,handleLogout:y})}),u.createElement(qr,{path:"*",element:u.createElement(pd,{to:"/"})})))})))))}var HE=function(){if(typeof Map<"u")return Map;function t(a,e){var n=-1;return a.some(function(r,o){return r[0]===e?(n=o,!0):!1}),n}return function(){function a(){this.__entries__=[]}return Object.defineProperty(a.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),a.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},a.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},a.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},a.prototype.has=function(e){return!!~t(this.__entries__,e)},a.prototype.clear=function(){this.__entries__.splice(0)},a.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var r=0,o=this.__entries__;r<o.length;r++){var l=o[r];e.call(n,l[1],l[0])}},a}()}(),n0=typeof window<"u"&&typeof document<"u"&&window.document===document,Kf=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Bj=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Kf):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),Uj=2;function zj(t,a){var e=!1,n=!1,r=0;function o(){e&&(e=!1,t()),n&&d()}function l(){Bj(o)}function d(){var h=Date.now();if(e){if(h-r<Uj)return;n=!0}else e=!0,n=!1,setTimeout(l,a);r=h}return d}var jj=20,Fj=["top","right","bottom","left","width","height","size","weight"],Hj=typeof MutationObserver<"u",Yj=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=zj(this.refresh.bind(this),jj)}return t.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},t.prototype.removeObserver=function(a){var e=this.observers_,n=e.indexOf(a);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var a=this.updateObservers_();a&&this.refresh()},t.prototype.updateObservers_=function(){var a=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return a.forEach(function(e){return e.broadcastActive()}),a.length>0},t.prototype.connect_=function(){!n0||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Hj?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!n0||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(a){var e=a.propertyName,n=e===void 0?"":e,r=Fj.some(function(o){return!!~n.indexOf(o)});r&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),YE=function(t,a){for(var e=0,n=Object.keys(a);e<n.length;e++){var r=n[e];Object.defineProperty(t,r,{value:a[r],enumerable:!1,writable:!1,configurable:!0})}return t},gl=function(t){var a=t&&t.ownerDocument&&t.ownerDocument.defaultView;return a||Kf},WE=Ah(0,0,0,0);function eh(t){return parseFloat(t)||0}function Fx(t){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];return a.reduce(function(n,r){var o=t["border-"+r+"-width"];return n+eh(o)},0)}function Wj(t){for(var a=["top","right","bottom","left"],e={},n=0,r=a;n<r.length;n++){var o=r[n],l=t["padding-"+o];e[o]=eh(l)}return e}function Gj(t){var a=t.getBBox();return Ah(0,0,a.width,a.height)}function $j(t){var a=t.clientWidth,e=t.clientHeight;if(!a&&!e)return WE;var n=gl(t).getComputedStyle(t),r=Wj(n),o=r.left+r.right,l=r.top+r.bottom,d=eh(n.width),h=eh(n.height);if(n.boxSizing==="border-box"&&(Math.round(d+o)!==a&&(d-=Fx(n,"left","right")+o),Math.round(h+l)!==e&&(h-=Fx(n,"top","bottom")+l)),!qj(t)){var m=Math.round(d+o)-a,p=Math.round(h+l)-e;Math.abs(m)!==1&&(d-=m),Math.abs(p)!==1&&(h-=p)}return Ah(r.left,r.top,d,h)}var Zj=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof gl(t).SVGGraphicsElement}:function(t){return t instanceof gl(t).SVGElement&&typeof t.getBBox=="function"}}();function qj(t){return t===gl(t).document.documentElement}function Qj(t){return n0?Zj(t)?Gj(t):$j(t):WE}function Vj(t){var a=t.x,e=t.y,n=t.width,r=t.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return YE(l,{x:a,y:e,width:n,height:r,top:e,right:a+n,bottom:r+e,left:a}),l}function Ah(t,a,e,n){return{x:t,y:a,width:e,height:n}}var Xj=function(){function t(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ah(0,0,0,0),this.target=a}return t.prototype.isActive=function(){var a=Qj(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},t}(),Jj=function(){function t(a,e){var n=Vj(e);YE(this,{target:a,contentRect:n})}return t}(),Kj=function(){function t(a,e,n){if(this.activeObservations_=[],this.observations_=new HE,typeof a!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof gl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)||(e.set(a,new Xj(a)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(a instanceof gl(a).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(a)&&(e.delete(a),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&a.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new Jj(n.target,n.broadcastRect())});this.callback_.call(a,e,a),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),GE=typeof WeakMap<"u"?new WeakMap:new HE,$E=function(){function t(a){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Yj.getInstance(),n=new Kj(a,e,this);GE.set(this,n)}return t}();["observe","unobserve","disconnect"].forEach(function(t){$E.prototype[t]=function(){var a;return(a=GE.get(this))[t].apply(a,arguments)}});var eF=function(){return typeof Kf.ResizeObserver<"u"?Kf.ResizeObserver:$E}();window.ResizeObserver=window.ResizeObserver||eF;if(typeof window<"u"&&window.self!==window.top){document.documentElement.setAttribute("data-iframe","true"),document.body.setAttribute("data-iframe","true");const a=document.getElementById("root");a&&a.setAttribute("data-iframe","true")}nI.createRoot(document.getElementById("root")).render(u.createElement(u.StrictMode,null,u.createElement(Oj,null)));
